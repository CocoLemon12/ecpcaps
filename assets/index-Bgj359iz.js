(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();var US=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tE={exports:{}},J1={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OF;function xee(){if(OF)return J1;OF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(r,s,l){var h=null;if(l!==void 0&&(h=""+l),s.key!==void 0&&(h=""+s.key),"key"in s){l={};for(var n in s)n!=="key"&&(l[n]=s[n])}else l=s;return s=l.ref,{$$typeof:t,type:r,key:h,ref:s!==void 0?s:null,props:l}}return J1.Fragment=e,J1.jsx=a,J1.jsxs=a,J1}var DF;function Pee(){return DF||(DF=1,tE.exports=xee()),tE.exports}var X=Pee(),aE={exports:{}},yi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MF;function Eee(){if(MF)return yi;MF=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),n=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),z=Symbol.iterator;function k(Le){return Le===null||typeof Le!="object"?null:(Le=z&&Le[z]||Le["@@iterator"],typeof Le=="function"?Le:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,H={};function $(Le,qe,ye){this.props=Le,this.context=qe,this.refs=H,this.updater=ye||U}$.prototype.isReactComponent={},$.prototype.setState=function(Le,qe){if(typeof Le!="object"&&typeof Le!="function"&&Le!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Le,qe,"setState")},$.prototype.forceUpdate=function(Le){this.updater.enqueueForceUpdate(this,Le,"forceUpdate")};function Q(){}Q.prototype=$.prototype;function ne(Le,qe,ye){this.props=Le,this.context=qe,this.refs=H,this.updater=ye||U}var de=ne.prototype=new Q;de.constructor=ne,q(de,$.prototype),de.isPureReactComponent=!0;var ge=Array.isArray,fe={H:null,A:null,T:null,S:null},_e=Object.prototype.hasOwnProperty;function me(Le,qe,ye,ze,We,lt){return ye=lt.ref,{$$typeof:t,type:Le,key:qe,ref:ye!==void 0?ye:null,props:lt}}function Ae(Le,qe){return me(Le.type,qe,void 0,void 0,void 0,Le.props)}function Te(Le){return typeof Le=="object"&&Le!==null&&Le.$$typeof===t}function Oe(Le){var qe={"=":"=0",":":"=2"};return"$"+Le.replace(/[=:]/g,function(ye){return qe[ye]})}var ie=/\/+/g;function we(Le,qe){return typeof Le=="object"&&Le!==null&&Le.key!=null?Oe(""+Le.key):qe.toString(36)}function Me(){}function Ve(Le){switch(Le.status){case"fulfilled":return Le.value;case"rejected":throw Le.reason;default:switch(typeof Le.status=="string"?Le.then(Me,Me):(Le.status="pending",Le.then(function(qe){Le.status==="pending"&&(Le.status="fulfilled",Le.value=qe)},function(qe){Le.status==="pending"&&(Le.status="rejected",Le.reason=qe)})),Le.status){case"fulfilled":return Le.value;case"rejected":throw Le.reason}}throw Le}function Ie(Le,qe,ye,ze,We){var lt=typeof Le;(lt==="undefined"||lt==="boolean")&&(Le=null);var vt=!1;if(Le===null)vt=!0;else switch(lt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(Le.$$typeof){case t:case e:vt=!0;break;case E:return vt=Le._init,Ie(vt(Le._payload),qe,ye,ze,We)}}if(vt)return We=We(Le),vt=ze===""?"."+we(Le,0):ze,ge(We)?(ye="",vt!=null&&(ye=vt.replace(ie,"$&/")+"/"),Ie(We,qe,ye,"",function(pt){return pt})):We!=null&&(Te(We)&&(We=Ae(We,ye+(We.key==null||Le&&Le.key===We.key?"":(""+We.key).replace(ie,"$&/")+"/")+vt)),qe.push(We)),1;vt=0;var Ot=ze===""?".":ze+":";if(ge(Le))for(var dt=0;dt<Le.length;dt++)ze=Le[dt],lt=Ot+we(ze,dt),vt+=Ie(ze,qe,ye,lt,We);else if(dt=k(Le),typeof dt=="function")for(Le=dt.call(Le),dt=0;!(ze=Le.next()).done;)ze=ze.value,lt=Ot+we(ze,dt++),vt+=Ie(ze,qe,ye,lt,We);else if(lt==="object"){if(typeof Le.then=="function")return Ie(Ve(Le),qe,ye,ze,We);throw qe=String(Le),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(Le).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.")}return vt}function Ue(Le,qe,ye){if(Le==null)return Le;var ze=[],We=0;return Ie(Le,ze,"","",function(lt){return qe.call(ye,lt,We++)}),ze}function Be(Le){if(Le._status===-1){var qe=Le._result;qe=qe(),qe.then(function(ye){(Le._status===0||Le._status===-1)&&(Le._status=1,Le._result=ye)},function(ye){(Le._status===0||Le._status===-1)&&(Le._status=2,Le._result=ye)}),Le._status===-1&&(Le._status=0,Le._result=qe)}if(Le._status===1)return Le._result.default;throw Le._result}var ke=typeof reportError=="function"?reportError:function(Le){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var qe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Le=="object"&&Le!==null&&typeof Le.message=="string"?String(Le.message):String(Le),error:Le});if(!window.dispatchEvent(qe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Le);return}console.error(Le)};function Je(){}return yi.Children={map:Ue,forEach:function(Le,qe,ye){Ue(Le,function(){qe.apply(this,arguments)},ye)},count:function(Le){var qe=0;return Ue(Le,function(){qe++}),qe},toArray:function(Le){return Ue(Le,function(qe){return qe})||[]},only:function(Le){if(!Te(Le))throw Error("React.Children.only expected to receive a single React element child.");return Le}},yi.Component=$,yi.Fragment=a,yi.Profiler=s,yi.PureComponent=ne,yi.StrictMode=r,yi.Suspense=w,yi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,yi.act=function(){throw Error("act(...) is not supported in production builds of React.")},yi.cache=function(Le){return function(){return Le.apply(null,arguments)}},yi.cloneElement=function(Le,qe,ye){if(Le==null)throw Error("The argument must be a React element, but you passed "+Le+".");var ze=q({},Le.props),We=Le.key,lt=void 0;if(qe!=null)for(vt in qe.ref!==void 0&&(lt=void 0),qe.key!==void 0&&(We=""+qe.key),qe)!_e.call(qe,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&qe.ref===void 0||(ze[vt]=qe[vt]);var vt=arguments.length-2;if(vt===1)ze.children=ye;else if(1<vt){for(var Ot=Array(vt),dt=0;dt<vt;dt++)Ot[dt]=arguments[dt+2];ze.children=Ot}return me(Le.type,We,void 0,void 0,lt,ze)},yi.createContext=function(Le){return Le={$$typeof:h,_currentValue:Le,_currentValue2:Le,_threadCount:0,Provider:null,Consumer:null},Le.Provider=Le,Le.Consumer={$$typeof:l,_context:Le},Le},yi.createElement=function(Le,qe,ye){var ze,We={},lt=null;if(qe!=null)for(ze in qe.key!==void 0&&(lt=""+qe.key),qe)_e.call(qe,ze)&&ze!=="key"&&ze!=="__self"&&ze!=="__source"&&(We[ze]=qe[ze]);var vt=arguments.length-2;if(vt===1)We.children=ye;else if(1<vt){for(var Ot=Array(vt),dt=0;dt<vt;dt++)Ot[dt]=arguments[dt+2];We.children=Ot}if(Le&&Le.defaultProps)for(ze in vt=Le.defaultProps,vt)We[ze]===void 0&&(We[ze]=vt[ze]);return me(Le,lt,void 0,void 0,null,We)},yi.createRef=function(){return{current:null}},yi.forwardRef=function(Le){return{$$typeof:n,render:Le}},yi.isValidElement=Te,yi.lazy=function(Le){return{$$typeof:E,_payload:{_status:-1,_result:Le},_init:Be}},yi.memo=function(Le,qe){return{$$typeof:T,type:Le,compare:qe===void 0?null:qe}},yi.startTransition=function(Le){var qe=fe.T,ye={};fe.T=ye;try{var ze=Le(),We=fe.S;We!==null&&We(ye,ze),typeof ze=="object"&&ze!==null&&typeof ze.then=="function"&&ze.then(Je,ke)}catch(lt){ke(lt)}finally{fe.T=qe}},yi.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},yi.use=function(Le){return fe.H.use(Le)},yi.useActionState=function(Le,qe,ye){return fe.H.useActionState(Le,qe,ye)},yi.useCallback=function(Le,qe){return fe.H.useCallback(Le,qe)},yi.useContext=function(Le){return fe.H.useContext(Le)},yi.useDebugValue=function(){},yi.useDeferredValue=function(Le,qe){return fe.H.useDeferredValue(Le,qe)},yi.useEffect=function(Le,qe){return fe.H.useEffect(Le,qe)},yi.useId=function(){return fe.H.useId()},yi.useImperativeHandle=function(Le,qe,ye){return fe.H.useImperativeHandle(Le,qe,ye)},yi.useInsertionEffect=function(Le,qe){return fe.H.useInsertionEffect(Le,qe)},yi.useLayoutEffect=function(Le,qe){return fe.H.useLayoutEffect(Le,qe)},yi.useMemo=function(Le,qe){return fe.H.useMemo(Le,qe)},yi.useOptimistic=function(Le,qe){return fe.H.useOptimistic(Le,qe)},yi.useReducer=function(Le,qe,ye){return fe.H.useReducer(Le,qe,ye)},yi.useRef=function(Le){return fe.H.useRef(Le)},yi.useState=function(Le){return fe.H.useState(Le)},yi.useSyncExternalStore=function(Le,qe,ye){return fe.H.useSyncExternalStore(Le,qe,ye)},yi.useTransition=function(){return fe.H.useTransition()},yi.version="19.0.0",yi}var IF;function FM(){return IF||(IF=1,aE.exports=Eee()),aE.exports}var rt=FM();const It=Xi(rt);var rE={exports:{}},Q1={},nE={exports:{}},iE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LF;function Nee(){return LF||(LF=1,function(t){function e(Ue,Be){var ke=Ue.length;Ue.push(Be);e:for(;0<ke;){var Je=ke-1>>>1,Le=Ue[Je];if(0<s(Le,Be))Ue[Je]=Be,Ue[ke]=Le,ke=Je;else break e}}function a(Ue){return Ue.length===0?null:Ue[0]}function r(Ue){if(Ue.length===0)return null;var Be=Ue[0],ke=Ue.pop();if(ke!==Be){Ue[0]=ke;e:for(var Je=0,Le=Ue.length,qe=Le>>>1;Je<qe;){var ye=2*(Je+1)-1,ze=Ue[ye],We=ye+1,lt=Ue[We];if(0>s(ze,ke))We<Le&&0>s(lt,ze)?(Ue[Je]=lt,Ue[We]=ke,Je=We):(Ue[Je]=ze,Ue[ye]=ke,Je=ye);else if(We<Le&&0>s(lt,ke))Ue[Je]=lt,Ue[We]=ke,Je=We;else break e}}return Be}function s(Ue,Be){var ke=Ue.sortIndex-Be.sortIndex;return ke!==0?ke:Ue.id-Be.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,n=h.now();t.unstable_now=function(){return h.now()-n}}var w=[],T=[],E=1,z=null,k=3,U=!1,q=!1,H=!1,$=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function de(Ue){for(var Be=a(T);Be!==null;){if(Be.callback===null)r(T);else if(Be.startTime<=Ue)r(T),Be.sortIndex=Be.expirationTime,e(w,Be);else break;Be=a(T)}}function ge(Ue){if(H=!1,de(Ue),!q)if(a(w)!==null)q=!0,Ve();else{var Be=a(T);Be!==null&&Ie(ge,Be.startTime-Ue)}}var fe=!1,_e=-1,me=5,Ae=-1;function Te(){return!(t.unstable_now()-Ae<me)}function Oe(){if(fe){var Ue=t.unstable_now();Ae=Ue;var Be=!0;try{e:{q=!1,H&&(H=!1,Q(_e),_e=-1),U=!0;var ke=k;try{t:{for(de(Ue),z=a(w);z!==null&&!(z.expirationTime>Ue&&Te());){var Je=z.callback;if(typeof Je=="function"){z.callback=null,k=z.priorityLevel;var Le=Je(z.expirationTime<=Ue);if(Ue=t.unstable_now(),typeof Le=="function"){z.callback=Le,de(Ue),Be=!0;break t}z===a(w)&&r(w),de(Ue)}else r(w);z=a(w)}if(z!==null)Be=!0;else{var qe=a(T);qe!==null&&Ie(ge,qe.startTime-Ue),Be=!1}}break e}finally{z=null,k=ke,U=!1}Be=void 0}}finally{Be?ie():fe=!1}}}var ie;if(typeof ne=="function")ie=function(){ne(Oe)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Me=we.port2;we.port1.onmessage=Oe,ie=function(){Me.postMessage(null)}}else ie=function(){$(Oe,0)};function Ve(){fe||(fe=!0,ie())}function Ie(Ue,Be){_e=$(function(){Ue(t.unstable_now())},Be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ue){Ue.callback=null},t.unstable_continueExecution=function(){q||U||(q=!0,Ve())},t.unstable_forceFrameRate=function(Ue){0>Ue||125<Ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<Ue?Math.floor(1e3/Ue):5},t.unstable_getCurrentPriorityLevel=function(){return k},t.unstable_getFirstCallbackNode=function(){return a(w)},t.unstable_next=function(Ue){switch(k){case 1:case 2:case 3:var Be=3;break;default:Be=k}var ke=k;k=Be;try{return Ue()}finally{k=ke}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ue,Be){switch(Ue){case 1:case 2:case 3:case 4:case 5:break;default:Ue=3}var ke=k;k=Ue;try{return Be()}finally{k=ke}},t.unstable_scheduleCallback=function(Ue,Be,ke){var Je=t.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?Je+ke:Je):ke=Je,Ue){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ke+Le,Ue={id:E++,callback:Be,priorityLevel:Ue,startTime:ke,expirationTime:Le,sortIndex:-1},ke>Je?(Ue.sortIndex=ke,e(T,Ue),a(w)===null&&Ue===a(T)&&(H?(Q(_e),_e=-1):H=!0,Ie(ge,ke-Je))):(Ue.sortIndex=Le,e(w,Ue),q||U||(q=!0,Ve())),Ue},t.unstable_shouldYield=Te,t.unstable_wrapCallback=function(Ue){var Be=k;return function(){var ke=k;k=Be;try{return Ue.apply(this,arguments)}finally{k=ke}}}}(iE)),iE}var FF;function Vee(){return FF||(FF=1,nE.exports=Nee()),nE.exports}var sE={exports:{}},Qc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UF;function zee(){if(UF)return Qc;UF=1;var t=FM();function e(w){var T="https://react.dev/errors/"+w;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)T+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+w+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(w,T,E){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:z==null?null:""+z,children:w,containerInfo:T,implementation:E}}var h=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function n(w,T){if(w==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return Qc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Qc.createPortal=function(w,T){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(e(299));return l(w,T,null,E)},Qc.flushSync=function(w){var T=h.T,E=r.p;try{if(h.T=null,r.p=2,w)return w()}finally{h.T=T,r.p=E,r.d.f()}},Qc.preconnect=function(w,T){typeof w=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,r.d.C(w,T))},Qc.prefetchDNS=function(w){typeof w=="string"&&r.d.D(w)},Qc.preinit=function(w,T){if(typeof w=="string"&&T&&typeof T.as=="string"){var E=T.as,z=n(E,T.crossOrigin),k=typeof T.integrity=="string"?T.integrity:void 0,U=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;E==="style"?r.d.S(w,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:z,integrity:k,fetchPriority:U}):E==="script"&&r.d.X(w,{crossOrigin:z,integrity:k,fetchPriority:U,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},Qc.preinitModule=function(w,T){if(typeof w=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var E=n(T.as,T.crossOrigin);r.d.M(w,{crossOrigin:E,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&r.d.M(w)},Qc.preload=function(w,T){if(typeof w=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var E=T.as,z=n(E,T.crossOrigin);r.d.L(w,E,{crossOrigin:z,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},Qc.preloadModule=function(w,T){if(typeof w=="string")if(T){var E=n(T.as,T.crossOrigin);r.d.m(w,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:E,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else r.d.m(w)},Qc.requestFormReset=function(w){r.d.r(w)},Qc.unstable_batchedUpdates=function(w,T){return w(T)},Qc.useFormState=function(w,T,E){return h.H.useFormState(w,T,E)},Qc.useFormStatus=function(){return h.H.useHostTransitionStatus()},Qc.version="19.0.0",Qc}var kF;function Oee(){if(kF)return sE.exports;kF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sE.exports=zee(),sE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BF;function Dee(){if(BF)return Q1;BF=1;var t=Vee(),e=FM(),a=Oee();function r(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)v+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}var l=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),U=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),ge=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function _e(p){return p===null||typeof p!="object"?null:(p=fe&&p[fe]||p["@@iterator"],typeof p=="function"?p:null)}var me=Symbol.for("react.client.reference");function Ae(p){if(p==null)return null;if(typeof p=="function")return p.$$typeof===me?null:p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case w:return"Fragment";case n:return"Portal";case E:return"Profiler";case T:return"StrictMode";case H:return"Suspense";case $:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case U:return(p.displayName||"Context")+".Provider";case k:return(p._context.displayName||"Context")+".Consumer";case q:var v=p.render;return p=p.displayName,p||(p=v.displayName||v.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case Q:return v=p.displayName||null,v!==null?v:Ae(p.type)||"Memo";case ne:v=p._payload,p=p._init;try{return Ae(p(v))}catch{}}return null}var Te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe=Object.assign,ie,we;function Me(p){if(ie===void 0)try{throw Error()}catch(x){var v=x.stack.trim().match(/\n( *(at )?)/);ie=v&&v[1]||"",we=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+p+we}var Ve=!1;function Ie(p,v){if(!p||Ve)return"";Ve=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var F={DetermineComponentFrameRoot:function(){try{if(v){var rr=function(){throw Error()};if(Object.defineProperty(rr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rr,[])}catch(Za){var ba=Za}Reflect.construct(p,[],rr)}else{try{rr.call()}catch(Za){ba=Za}p.call(rr.prototype)}}else{try{throw Error()}catch(Za){ba=Za}(rr=p())&&typeof rr.catch=="function"&&rr.catch(function(){})}}catch(Za){if(Za&&ba&&typeof Za.stack=="string")return[Za.stack,ba.stack]}return[null,null]}};F.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var W=Object.getOwnPropertyDescriptor(F.DetermineComponentFrameRoot,"name");W&&W.configurable&&Object.defineProperty(F.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var se=F.DetermineComponentFrameRoot(),Fe=se[0],ut=se[1];if(Fe&&ut){var Ft=Fe.split(`
`),oa=ut.split(`
`);for(W=F=0;F<Ft.length&&!Ft[F].includes("DetermineComponentFrameRoot");)F++;for(;W<oa.length&&!oa[W].includes("DetermineComponentFrameRoot");)W++;if(F===Ft.length||W===oa.length)for(F=Ft.length-1,W=oa.length-1;1<=F&&0<=W&&Ft[F]!==oa[W];)W--;for(;1<=F&&0<=W;F--,W--)if(Ft[F]!==oa[W]){if(F!==1||W!==1)do if(F--,W--,0>W||Ft[F]!==oa[W]){var ja=`
`+Ft[F].replace(" at new "," at ");return p.displayName&&ja.includes("<anonymous>")&&(ja=ja.replace("<anonymous>",p.displayName)),ja}while(1<=F&&0<=W);break}}}finally{Ve=!1,Error.prepareStackTrace=x}return(x=p?p.displayName||p.name:"")?Me(x):""}function Ue(p){switch(p.tag){case 26:case 27:case 5:return Me(p.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return p=Ie(p.type,!1),p;case 11:return p=Ie(p.type.render,!1),p;case 1:return p=Ie(p.type,!0),p;default:return""}}function Be(p){try{var v="";do v+=Ue(p),p=p.return;while(p);return v}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function ke(p){var v=p,x=p;if(p.alternate)for(;v.return;)v=v.return;else{p=v;do v=p,(v.flags&4098)!==0&&(x=v.return),p=v.return;while(p)}return v.tag===3?x:null}function Je(p){if(p.tag===13){var v=p.memoizedState;if(v===null&&(p=p.alternate,p!==null&&(v=p.memoizedState)),v!==null)return v.dehydrated}return null}function Le(p){if(ke(p)!==p)throw Error(r(188))}function qe(p){var v=p.alternate;if(!v){if(v=ke(p),v===null)throw Error(r(188));return v!==p?null:p}for(var x=p,F=v;;){var W=x.return;if(W===null)break;var se=W.alternate;if(se===null){if(F=W.return,F!==null){x=F;continue}break}if(W.child===se.child){for(se=W.child;se;){if(se===x)return Le(W),p;if(se===F)return Le(W),v;se=se.sibling}throw Error(r(188))}if(x.return!==F.return)x=W,F=se;else{for(var Fe=!1,ut=W.child;ut;){if(ut===x){Fe=!0,x=W,F=se;break}if(ut===F){Fe=!0,F=W,x=se;break}ut=ut.sibling}if(!Fe){for(ut=se.child;ut;){if(ut===x){Fe=!0,x=se,F=W;break}if(ut===F){Fe=!0,F=se,x=W;break}ut=ut.sibling}if(!Fe)throw Error(r(189))}}if(x.alternate!==F)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?p:v}function ye(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p;for(p=p.child;p!==null;){if(v=ye(p),v!==null)return v;p=p.sibling}return null}var ze=Array.isArray,We=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},vt=[],Ot=-1;function dt(p){return{current:p}}function pt(p){0>Ot||(p.current=vt[Ot],vt[Ot]=null,Ot--)}function ve(p,v){Ot++,vt[Ot]=p.current,p.current=v}var ea=dt(null),Kt=dt(null),Ea=dt(null),Bt=dt(null);function la(p,v){switch(ve(Ea,v),ve(Kt,p),ve(ea,null),p=v.nodeType,p){case 9:case 11:v=(v=v.documentElement)&&(v=v.namespaceURI)?i1(v):0;break;default:if(p=p===8?v.parentNode:v,v=p.tagName,p=p.namespaceURI)p=i1(p),v=s1(p,v);else switch(v){case"svg":v=1;break;case"math":v=2;break;default:v=0}}pt(ea),ve(ea,v)}function St(){pt(ea),pt(Kt),pt(Ea)}function vr(p){p.memoizedState!==null&&ve(Bt,p);var v=ea.current,x=s1(v,p.type);v!==x&&(ve(Kt,p),ve(ea,x))}function Va(p){Kt.current===p&&(pt(ea),pt(Kt)),Bt.current===p&&(pt(Bt),Yy._currentValue=lt)}var za=Object.prototype.hasOwnProperty,nr=t.unstable_scheduleCallback,cr=t.unstable_cancelCallback,ur=t.unstable_shouldYield,Pr=t.unstable_requestPaint,ka=t.unstable_now,jr=t.unstable_getCurrentPriorityLevel,pn=t.unstable_ImmediatePriority,Dn=t.unstable_UserBlockingPriority,Rn=t.unstable_NormalPriority,va=t.unstable_LowPriority,Wa=t.unstable_IdlePriority,ca=t.log,Qa=t.unstable_setDisableYieldValue,yr=null,jn=null;function Mn(p){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(yr,p,void 0,(p.current.flags&128)===128)}catch{}}function mn(p){if(typeof ca=="function"&&Qa(p),jn&&typeof jn.setStrictMode=="function")try{jn.setStrictMode(yr,p)}catch{}}var en=Math.clz32?Math.clz32:ki,Er=Math.log,As=Math.LN2;function ki(p){return p>>>=0,p===0?32:31-(Er(p)/As|0)|0}var Ji=128,zo=4194304;function Ei(p){var v=p&42;if(v!==0)return v;switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return p&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return p}}function hn(p,v){var x=p.pendingLanes;if(x===0)return 0;var F=0,W=p.suspendedLanes,se=p.pingedLanes,Fe=p.warmLanes;p=p.finishedLanes!==0;var ut=x&134217727;return ut!==0?(x=ut&~W,x!==0?F=Ei(x):(se&=ut,se!==0?F=Ei(se):p||(Fe=ut&~Fe,Fe!==0&&(F=Ei(Fe))))):(ut=x&~W,ut!==0?F=Ei(ut):se!==0?F=Ei(se):p||(Fe=x&~Fe,Fe!==0&&(F=Ei(Fe)))),F===0?0:v!==0&&v!==F&&(v&W)===0&&(W=F&-F,Fe=v&-v,W>=Fe||W===32&&(Fe&4194176)!==0)?v:F}function ui(p,v){return(p.pendingLanes&~(p.suspendedLanes&~p.pingedLanes)&v)===0}function Ec(p,v){switch(p){case 1:case 2:case 4:case 8:return v+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(){var p=Ji;return Ji<<=1,(Ji&4194176)===0&&(Ji=128),p}function Xt(){var p=zo;return zo<<=1,(zo&62914560)===0&&(zo=4194304),p}function be(p){for(var v=[],x=0;31>x;x++)v.push(p);return v}function De(p,v){p.pendingLanes|=v,v!==268435456&&(p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0)}function at(p,v,x,F,W,se){var Fe=p.pendingLanes;p.pendingLanes=x,p.suspendedLanes=0,p.pingedLanes=0,p.warmLanes=0,p.expiredLanes&=x,p.entangledLanes&=x,p.errorRecoveryDisabledLanes&=x,p.shellSuspendCounter=0;var ut=p.entanglements,Ft=p.expirationTimes,oa=p.hiddenUpdates;for(x=Fe&~x;0<x;){var ja=31-en(x),rr=1<<ja;ut[ja]=0,Ft[ja]=-1;var ba=oa[ja];if(ba!==null)for(oa[ja]=null,ja=0;ja<ba.length;ja++){var Za=ba[ja];Za!==null&&(Za.lane&=-536870913)}x&=~rr}F!==0&&At(p,F,0),se!==0&&W===0&&p.tag!==0&&(p.suspendedLanes|=se&~(Fe&~v))}function At(p,v,x){p.pendingLanes|=v,p.suspendedLanes&=~v;var F=31-en(v);p.entangledLanes|=v,p.entanglements[F]=p.entanglements[F]|1073741824|x&4194218}function mt(p,v){var x=p.entangledLanes|=v;for(p=p.entanglements;x;){var F=31-en(x),W=1<<F;W&v|p[F]&v&&(p[F]|=v),x&=~W}}function Ct(p){return p&=-p,2<p?8<p?(p&134217727)!==0?32:268435456:8:2}function kt(){var p=We.p;return p!==0?p:(p=window.event,p===void 0?32:aS(p.type))}function Pt(p,v){var x=We.p;try{return We.p=p,v()}finally{We.p=x}}var qt=Math.random().toString(36).slice(2),Ht="__reactFiber$"+qt,Zt="__reactProps$"+qt,Ra="__reactContainer$"+qt,Ma="__reactEvents$"+qt,Ba="__reactListeners$"+qt,Ar="__reactHandles$"+qt,Nr="__reactResources$"+qt,Vr="__reactMarker$"+qt;function Gr(p){delete p[Ht],delete p[Zt],delete p[Ma],delete p[Ba],delete p[Ar]}function zn(p){var v=p[Ht];if(v)return v;for(var x=p.parentNode;x;){if(v=x[Ra]||x[Ht]){if(x=v.alternate,v.child!==null||x!==null&&x.child!==null)for(p=c1(p);p!==null;){if(x=p[Ht])return x;p=c1(p)}return v}p=x,x=p.parentNode}return null}function Xn(p){if(p=p[Ht]||p[Ra]){var v=p.tag;if(v===5||v===6||v===13||v===26||v===27||v===3)return p}return null}function qr(p){var v=p.tag;if(v===5||v===26||v===27||v===6)return p.stateNode;throw Error(r(33))}function yn(p){var v=p[Nr];return v||(v=p[Nr]={hoistableStyles:new Map,hoistableScripts:new Map}),v}function Hr(p){p[Vr]=!0}var In=new Set,Ni={};function Bi(p,v){_s(p,v),_s(p+"Capture",v)}function _s(p,v){for(Ni[p]=v,p=0;p<v.length;p++)In.add(v[p])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ws={},Us={};function nc(p){return za.call(Us,p)?!0:za.call(ws,p)?!1:Oo.test(p)?Us[p]=!0:(ws[p]=!0,!1)}function Ko(p,v,x){if(nc(v))if(x===null)p.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":p.removeAttribute(v);return;case"boolean":var F=v.toLowerCase().slice(0,5);if(F!=="data-"&&F!=="aria-"){p.removeAttribute(v);return}}p.setAttribute(v,""+x)}}function Vi(p,v,x){if(x===null)p.removeAttribute(v);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(v);return}p.setAttribute(v,""+x)}}function kl(p,v,x,F){if(F===null)p.removeAttribute(x);else{switch(typeof F){case"undefined":case"function":case"symbol":case"boolean":p.removeAttribute(x);return}p.setAttributeNS(v,x,""+F)}}function Do(p){switch(typeof p){case"bigint":case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function yd(p){var v=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Nc(p){var v=yd(p)?"checked":"value",x=Object.getOwnPropertyDescriptor(p.constructor.prototype,v),F=""+p[v];if(!p.hasOwnProperty(v)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var W=x.get,se=x.set;return Object.defineProperty(p,v,{configurable:!0,get:function(){return W.call(this)},set:function(Fe){F=""+Fe,se.call(this,Fe)}}),Object.defineProperty(p,v,{enumerable:x.enumerable}),{getValue:function(){return F},setValue:function(Fe){F=""+Fe},stopTracking:function(){p._valueTracker=null,delete p[v]}}}}function Qd(p){p._valueTracker||(p._valueTracker=Nc(p))}function uu(p){if(!p)return!1;var v=p._valueTracker;if(!v)return!0;var x=v.getValue(),F="";return p&&(F=yd(p)?p.checked?"true":"false":p.value),p=F,p!==x?(v.setValue(p),!0):!1}function Vc(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}var ul=/[\n"\\]/g;function Ys(p){return p.replace(ul,function(v){return"\\"+v.charCodeAt(0).toString(16)+" "})}function Mo(p,v,x,F,W,se,Fe,ut){p.name="",Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"?p.type=Fe:p.removeAttribute("type"),v!=null?Fe==="number"?(v===0&&p.value===""||p.value!=v)&&(p.value=""+Do(v)):p.value!==""+Do(v)&&(p.value=""+Do(v)):Fe!=="submit"&&Fe!=="reset"||p.removeAttribute("value"),v!=null?cu(p,Fe,Do(v)):x!=null?cu(p,Fe,Do(x)):F!=null&&p.removeAttribute("value"),W==null&&se!=null&&(p.defaultChecked=!!se),W!=null&&(p.checked=W&&typeof W!="function"&&typeof W!="symbol"),ut!=null&&typeof ut!="function"&&typeof ut!="symbol"&&typeof ut!="boolean"?p.name=""+Do(ut):p.removeAttribute("name")}function Bl(p,v,x,F,W,se,Fe,ut){if(se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(p.type=se),v!=null||x!=null){if(!(se!=="submit"&&se!=="reset"||v!=null))return;x=x!=null?""+Do(x):"",v=v!=null?""+Do(v):x,ut||v===p.value||(p.value=v),p.defaultValue=v}F=F??W,F=typeof F!="function"&&typeof F!="symbol"&&!!F,p.checked=ut?p.checked:!!F,p.defaultChecked=!!F,Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"&&(p.name=Fe)}function cu(p,v,x){v==="number"&&Vc(p.ownerDocument)===p||p.defaultValue===""+x||(p.defaultValue=""+x)}function oo(p,v,x,F){if(p=p.options,v){v={};for(var W=0;W<x.length;W++)v["$"+x[W]]=!0;for(x=0;x<p.length;x++)W=v.hasOwnProperty("$"+p[x].value),p[x].selected!==W&&(p[x].selected=W),W&&F&&(p[x].defaultSelected=!0)}else{for(x=""+Do(x),v=null,W=0;W<p.length;W++){if(p[W].value===x){p[W].selected=!0,F&&(p[W].defaultSelected=!0);return}v!==null||p[W].disabled||(v=p[W])}v!==null&&(v.selected=!0)}}function Io(p,v,x){if(v!=null&&(v=""+Do(v),v!==p.value&&(p.value=v),x==null)){p.defaultValue!==v&&(p.defaultValue=v);return}p.defaultValue=x!=null?""+Do(x):""}function gd(p,v,x,F){if(v==null){if(F!=null){if(x!=null)throw Error(r(92));if(ze(F)){if(1<F.length)throw Error(r(93));F=F[0]}x=F}x==null&&(x=""),v=x}x=Do(v),p.defaultValue=x,F=p.textContent,F===x&&F!==""&&F!==null&&(p.value=F)}function Fu(p,v){if(v){var x=p.firstChild;if(x&&x===p.lastChild&&x.nodeType===3){x.nodeValue=v;return}}p.textContent=v}var cf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gl(p,v,x){var F=v.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?F?p.setProperty(v,""):v==="float"?p.cssFloat="":p[v]="":F?p.setProperty(v,x):typeof x!="number"||x===0||cf.has(v)?v==="float"?p.cssFloat=x:p[v]=(""+x).trim():p[v]=x+"px"}function Lo(p,v,x){if(v!=null&&typeof v!="object")throw Error(r(62));if(p=p.style,x!=null){for(var F in x)!x.hasOwnProperty(F)||v!=null&&v.hasOwnProperty(F)||(F.indexOf("--")===0?p.setProperty(F,""):F==="float"?p.cssFloat="":p[F]="");for(var W in v)F=v[W],v.hasOwnProperty(W)&&x[W]!==F&&Gl(p,W,F)}else for(var se in v)v.hasOwnProperty(se)&&Gl(p,se,v[se])}function Uu(p){if(p.indexOf("-")===-1)return!1;switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bn(p){return Wo.test(""+p)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":p}var lo=null;function hr(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var zc=null,gn=null;function th(p){var v=Xn(p);if(v&&(p=v.stateNode)){var x=p[Zt]||null;e:switch(p=v.stateNode,v.type){case"input":if(Mo(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),v=x.name,x.type==="radio"&&v!=null){for(x=p;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Ys(""+v)+'"][type="radio"]'),v=0;v<x.length;v++){var F=x[v];if(F!==p&&F.form===p.form){var W=F[Zt]||null;if(!W)throw Error(r(90));Mo(F,W.value,W.defaultValue,W.defaultValue,W.checked,W.defaultChecked,W.type,W.name)}}for(v=0;v<x.length;v++)F=x[v],F.form===p.form&&uu(F)}break e;case"textarea":Io(p,x.value,x.defaultValue);break e;case"select":v=x.value,v!=null&&oo(p,!!x.multiple,v,!1)}}}var Tn=!1;function ks(p,v,x){if(Tn)return p(v,x);Tn=!0;try{var F=p(v);return F}finally{if(Tn=!1,(zc!==null||gn!==null)&&(b0(),zc&&(v=zc,p=gn,gn=zc=null,th(v),p)))for(v=0;v<p.length;v++)th(p[v])}}function ic(p,v){var x=p.stateNode;if(x===null)return null;var F=x[Zt]||null;if(F===null)return null;x=F[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(p=p.type,F=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!F;break e;default:p=!1}if(p)return null;if(x&&typeof x!="function")throw Error(r(231,v,typeof x));return x}var sc=!1;if(vs)try{var Xa={};Object.defineProperty(Xa,"passive",{get:function(){sc=!0}}),window.addEventListener("test",Xa,Xa),window.removeEventListener("test",Xa,Xa)}catch{sc=!1}var an=null,An=null,Bs=null;function Ad(){if(Bs)return Bs;var p,v=An,x=v.length,F,W="value"in an?an.value:an.textContent,se=W.length;for(p=0;p<x&&v[p]===W[p];p++);var Fe=x-p;for(F=1;F<=Fe&&v[x-F]===W[se-F];F++);return Bs=W.slice(p,1<F?1-F:void 0)}function ln(p){var v=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&v===13&&(p=13)):p=v,p===10&&(p=13),32<=p||p===13?p:0}function Fo(){return!0}function du(){return!1}function Rs(p){function v(x,F,W,se,Fe){this._reactName=x,this._targetInst=W,this.type=F,this.nativeEvent=se,this.target=Fe,this.currentTarget=null;for(var ut in p)p.hasOwnProperty(ut)&&(x=p[ut],this[ut]=x?x(se):se[ut]);return this.isDefaultPrevented=(se.defaultPrevented!=null?se.defaultPrevented:se.returnValue===!1)?Fo:du,this.isPropagationStopped=du,this}return Oe(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),v}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=Rs(Li),uo=Oe({},Li,{view:0,detail:0}),_d=Rs(uo),ah,oc,lc,Yo=Oe({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==lc&&(lc&&p.type==="mousemove"?(ah=p.screenX-lc.screenX,oc=p.screenY-lc.screenY):oc=ah=0,lc=p),ah)},movementY:function(p){return"movementY"in p?p.movementY:oc}}),us=Rs(Yo),ku=Oe({},Yo,{dataTransfer:0}),Ts=Rs(ku),Rl=Oe({},uo,{relatedTarget:0}),Xo=Rs(Rl),Gi=Oe({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),Gs=Rs(Gi),jl=Oe({},Li,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),rs=Rs(jl),Nh=Oe({},Li,{data:0}),Uo=Rs(Nh),vd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jf(p){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(p):(p=fu[p])?!!v[p]:!1}function Zl(){return jf}var Om=Oe({},uo,{key:function(p){if(p.key){var v=vd[p.key]||p.key;if(v!=="Unidentified")return v}return p.type==="keypress"?(p=ln(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?hu[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(p){return p.type==="keypress"?ln(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?ln(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),wd=Rs(Om),js=Oe({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=Rs(js),ql=Oe({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),hf=Rs(ql),oe=Oe({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),$e=Rs(oe),zt=Oe({},Yo,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),Wt=Rs(zt),ha=Oe({},Li,{newState:0,oldState:0}),Da=Rs(ha),ar=[9,13,27,32],wr=vs&&"CompositionEvent"in window,$r=null;vs&&"documentMode"in document&&($r=document.documentMode);var Sn=vs&&"TextEvent"in window&&!$r,Nn=vs&&(!wr||$r&&8<$r&&11>=$r),pi=" ",Ss=!1;function Cs(p,v){switch(p){case"keyup":return ar.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xs(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Qi=!1;function br(p,v){switch(p){case"compositionend":return Xs(v);case"keypress":return v.which!==32?null:(Ss=!0,pi);case"textInput":return p=v.data,p===pi&&Ss?null:p;default:return null}}function ir(p,v){if(Qi)return p==="compositionend"||!wr&&Cs(p,v)?(p=Ad(),Bs=An=an=null,Qi=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return Nn&&v.locale!=="ko"?null:v.data;default:return null}}var cl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rr(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v==="input"?!!cl[p.type]:v==="textarea"}function pu(p,v,x,F){zc?gn?gn.push(F):gn=[F]:zc=F,v=Pf(v,"onChange"),0<v.length&&(x=new Ci("onChange","change",null,x,F),p.push({event:x,listeners:v}))}var Hl=null,_r=null;function rh(p){O0(p,0)}function $l(p){var v=qr(p);if(uu(v))return p}function uc(p,v){if(p==="change")return v}var Rd=!1;if(vs){var bs;if(vs){var gi="oninput"in document;if(!gi){var cc=document.createElement("div");cc.setAttribute("oninput","return;"),gi=typeof cc.oninput=="function"}bs=gi}else bs=!1;Rd=bs&&(!document.documentMode||9<document.documentMode)}function Na(){Hl&&(Hl.detachEvent("onpropertychange",Td),_r=Hl=null)}function Td(p){if(p.propertyName==="value"&&$l(_r)){var v=[];pu(v,_r,p,hr(p)),ks(rh,v)}}function Zs(p,v,x){p==="focusin"?(Na(),Hl=v,_r=x,Hl.attachEvent("onpropertychange",Td)):p==="focusout"&&Na()}function co(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return $l(_r)}function ff(p,v){if(p==="click")return $l(v)}function Vh(p,v){if(p==="input"||p==="change")return $l(v)}function ho(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var Os=typeof Object.is=="function"?Object.is:ho;function Tl(p,v){if(Os(p,v))return!0;if(typeof p!="object"||p===null||typeof v!="object"||v===null)return!1;var x=Object.keys(p),F=Object.keys(v);if(x.length!==F.length)return!1;for(F=0;F<x.length;F++){var W=x[F];if(!za.call(v,W)||!Os(p[W],v[W]))return!1}return!0}function Oc(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function Kl(p,v){var x=Oc(p);p=0;for(var F;x;){if(x.nodeType===3){if(F=p+x.textContent.length,p<=v&&F>=v)return{node:x,offset:v-p};p=F}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Oc(x)}}function nh(p,v){return p&&v?p===v?!0:p&&p.nodeType===3?!1:v&&v.nodeType===3?nh(p,v.parentNode):"contains"in p?p.contains(v):p.compareDocumentPosition?!!(p.compareDocumentPosition(v)&16):!1:!1}function Sl(p){p=p!=null&&p.ownerDocument!=null&&p.ownerDocument.defaultView!=null?p.ownerDocument.defaultView:window;for(var v=Vc(p.document);v instanceof p.HTMLIFrameElement;){try{var x=typeof v.contentWindow.location.href=="string"}catch{x=!1}if(x)p=v.contentWindow;else break;v=Vc(p.document)}return v}function Ro(p){var v=p&&p.nodeName&&p.nodeName.toLowerCase();return v&&(v==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||v==="textarea"||p.contentEditable==="true")}function Sd(p,v){var x=Sl(v);v=p.focusedElem;var F=p.selectionRange;if(x!==v&&v&&v.ownerDocument&&nh(v.ownerDocument.documentElement,v)){if(F!==null&&Ro(v)){if(p=F.start,x=F.end,x===void 0&&(x=p),"selectionStart"in v)v.selectionStart=p,v.selectionEnd=Math.min(x,v.value.length);else if(x=(p=v.ownerDocument||document)&&p.defaultView||window,x.getSelection){x=x.getSelection();var W=v.textContent.length,se=Math.min(F.start,W);F=F.end===void 0?se:Math.min(F.end,W),!x.extend&&se>F&&(W=F,F=se,se=W),W=Kl(v,se);var Fe=Kl(v,F);W&&Fe&&(x.rangeCount!==1||x.anchorNode!==W.node||x.anchorOffset!==W.offset||x.focusNode!==Fe.node||x.focusOffset!==Fe.offset)&&(p=p.createRange(),p.setStart(W.node,W.offset),x.removeAllRanges(),se>F?(x.addRange(p),x.extend(Fe.node,Fe.offset)):(p.setEnd(Fe.node,Fe.offset),x.addRange(p)))}}for(p=[],x=v;x=x.parentNode;)x.nodeType===1&&p.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<p.length;v++)x=p[v],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}var Dc=vs&&"documentMode"in document&&11>=document.documentMode,Cl=null,dc=null,mu=null,ji=!1;function pf(p,v,x){var F=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;ji||Cl==null||Cl!==Vc(F)||(F=Cl,"selectionStart"in F&&Ro(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),mu&&Tl(mu,F)||(mu=F,F=Pf(dc,"onSelect"),0<F.length&&(v=new Ci("onSelect","select",null,v,x),p.push({event:v,listeners:F}),v.target=Cl)))}function Js(p,v){var x={};return x[p.toLowerCase()]=v.toLowerCase(),x["Webkit"+p]="webkit"+v,x["Moz"+p]="moz"+v,x}var fo={animationend:Js("Animation","AnimationEnd"),animationiteration:Js("Animation","AnimationIteration"),animationstart:Js("Animation","AnimationStart"),transitionrun:Js("Transition","TransitionRun"),transitionstart:Js("Transition","TransitionStart"),transitioncancel:Js("Transition","TransitionCancel"),transitionend:Js("Transition","TransitionEnd")},Cd={},bd={};vs&&(bd=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function Qs(p){if(Cd[p])return Cd[p];if(!fo[p])return p;var v=fo[p],x;for(x in v)if(v.hasOwnProperty(x)&&x in bd)return Cd[p]=v[x];return p}var Mc=Qs("animationend"),hc=Qs("animationiteration"),yu=Qs("animationstart"),Ic=Qs("transitionrun"),gu=Qs("transitionstart"),Lc=Qs("transitioncancel"),fc=Qs("transitionend"),Bu=new Map,ko="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function cs(p,v){Bu.set(p,v),Bi(v,[p])}var Yn=[],ti=0,Zi=0;function ns(){for(var p=ti,v=Zi=ti=0;v<p;){var x=Yn[v];Yn[v++]=null;var F=Yn[v];Yn[v++]=null;var W=Yn[v];Yn[v++]=null;var se=Yn[v];if(Yn[v++]=null,F!==null&&W!==null){var Fe=F.pending;Fe===null?W.next=W:(W.next=Fe.next,Fe.next=W),F.pending=W}se!==0&&Yl(x,W,se)}}function Wl(p,v,x,F){Yn[ti++]=p,Yn[ti++]=v,Yn[ti++]=x,Yn[ti++]=F,Zi|=F,p.lanes|=F,p=p.alternate,p!==null&&(p.lanes|=F)}function Fc(p,v,x,F){return Wl(p,v,x,F),tn(p)}function Jo(p,v){return Wl(p,null,null,v),tn(p)}function Yl(p,v,x){p.lanes|=x;var F=p.alternate;F!==null&&(F.lanes|=x);for(var W=!1,se=p.return;se!==null;)se.childLanes|=x,F=se.alternate,F!==null&&(F.childLanes|=x),se.tag===22&&(p=se.stateNode,p===null||p._visibility&1||(W=!0)),p=se,se=se.return;W&&v!==null&&p.tag===3&&(se=p.stateNode,W=31-en(x),se=se.hiddenUpdates,p=se[W],p===null?se[W]=[v]:p.push(v),v.lane=x|536870912)}function tn(p){if(50<gl)throw gl=0,kd=null,Error(r(185));for(var v=p.return;v!==null;)p=v,v=p.return;return p.tag===3?p.stateNode:null}var Uc={},bl=new WeakMap;function es(p,v){if(typeof p=="object"&&p!==null){var x=bl.get(p);return x!==void 0?x:(v={value:p,source:v,stack:Be(v)},bl.set(p,v),v)}return{value:p,source:v,stack:Be(v)}}var pc=[],xd=0,ci=null,zh=0,Qo=[],dl=0,kc=null,Au=1,Gu="";function mc(p,v){pc[xd++]=zh,pc[xd++]=ci,ci=p,zh=v}function Ip(p,v,x){Qo[dl++]=Au,Qo[dl++]=Gu,Qo[dl++]=kc,kc=p;var F=Au;p=Gu;var W=32-en(F)-1;F&=~(1<<W),x+=1;var se=32-en(v)+W;if(30<se){var Fe=W-W%5;se=(F&(1<<Fe)-1).toString(32),F>>=Fe,W-=Fe,Au=1<<32-en(v)+W|x<<W|F,Gu=se+p}else Au=1<<se|x<<W|F,Gu=p}function Oh(p){p.return!==null&&(mc(p,1),Ip(p,1,0))}function Dh(p){for(;p===ci;)ci=pc[--xd],pc[xd]=null,zh=pc[--xd],pc[xd]=null;for(;p===kc;)kc=Qo[--dl],Qo[dl]=null,Gu=Qo[--dl],Qo[dl]=null,Au=Qo[--dl],Qo[dl]=null}var el=null,qi=null,Ai=!1,Xl=null,_u=!1,Zf=Error(r(519));function yc(p){var v=Error(r(418,""));throw Ed(es(v,p)),Zf}function mf(p){var v=p.stateNode,x=p.type,F=p.memoizedProps;switch(v[Ht]=p,v[Zt]=F,x){case"dialog":Di("cancel",v),Di("close",v);break;case"iframe":case"object":case"embed":Di("load",v);break;case"video":case"audio":for(x=0;x<Zm.length;x++)Di(Zm[x],v);break;case"source":Di("error",v);break;case"img":case"image":case"link":Di("error",v),Di("load",v);break;case"details":Di("toggle",v);break;case"input":Di("invalid",v),Bl(v,F.value,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name,!0),Qd(v);break;case"select":Di("invalid",v);break;case"textarea":Di("invalid",v),gd(v,F.value,F.defaultValue,F.children),Qd(v)}x=F.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||v.textContent===""+x||F.suppressHydrationWarning===!0||Ef(v.textContent,x)?(F.popover!=null&&(Di("beforetoggle",v),Di("toggle",v)),F.onScroll!=null&&Di("scroll",v),F.onScrollEnd!=null&&Di("scrollend",v),F.onClick!=null&&(v.onclick=qy),v=!0):v=!1,v||yc(p)}function Pd(p){for(el=p.return;el;)switch(el.tag){case 3:case 27:_u=!0;return;case 5:case 13:_u=!1;return;default:el=el.return}}function Mh(p){if(p!==el)return!1;if(!Ai)return Pd(p),Ai=!0,!1;var v=!1,x;if((x=p.tag!==3&&p.tag!==27)&&((x=p.tag===5)&&(x=p.type,x=!(x!=="form"&&x!=="button")||F0(p.type,p.memoizedProps)),x=!x),x&&(v=!0),v&&qi&&yc(p),Pd(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));e:{for(p=p.nextSibling,v=0;p;){if(p.nodeType===8)if(x=p.data,x==="/$"){if(v===0){qi=Nu(p.nextSibling);break e}v--}else x!=="$"&&x!=="$!"&&x!=="$?"||v++;p=p.nextSibling}qi=null}}else qi=el?Nu(p.stateNode.nextSibling):null;return!0}function Ih(){qi=el=null,Ai=!1}function Ed(p){Xl===null?Xl=[p]:Xl.push(p)}var yf=Error(r(460)),Dm=Error(r(474)),ih={then:function(){}};function Ey(p){return p=p.status,p==="fulfilled"||p==="rejected"}function gc(){}function ju(p,v,x){switch(x=p[x],x===void 0?p.push(v):x!==v&&(v.then(gc,gc),v=x),v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,p===yf?Error(r(483)):p;default:if(typeof v.status=="string")v.then(gc,gc);else{if(p=Fr,p!==null&&100<p.shellSuspendCounter)throw Error(r(482));p=v,p.status="pending",p.then(function(F){if(v.status==="pending"){var W=v;W.status="fulfilled",W.value=F}},function(F){if(v.status==="pending"){var W=v;W.status="rejected",W.reason=F}})}switch(v.status){case"fulfilled":return v.value;case"rejected":throw p=v.reason,p===yf?Error(r(483)):p}throw vu=v,yf}}var vu=null;function Ny(){if(vu===null)throw Error(r(459));var p=vu;return vu=null,p}var Lh=null,hl=0;function tl(p){var v=hl;return hl+=1,Lh===null&&(Lh=[]),ju(Lh,p,v)}function Fh(p,v){v=v.props.ref,p.ref=v!==void 0?v:null}function Nd(p,v){throw v.$$typeof===l?Error(r(525)):(p=Object.prototype.toString.call(v),Error(r(31,p==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":p)))}function Lp(p){var v=p._init;return v(p._payload)}function Fp(p){function v(ya,na){if(p){var Ta=ya.deletions;Ta===null?(ya.deletions=[na],ya.flags|=16):Ta.push(na)}}function x(ya,na){if(!p)return null;for(;na!==null;)v(ya,na),na=na.sibling;return null}function F(ya){for(var na=new Map;ya!==null;)ya.key!==null?na.set(ya.key,ya):na.set(ya.index,ya),ya=ya.sibling;return na}function W(ya,na){return ya=Sa(ya,na),ya.index=0,ya.sibling=null,ya}function se(ya,na,Ta){return ya.index=Ta,p?(Ta=ya.alternate,Ta!==null?(Ta=Ta.index,Ta<na?(ya.flags|=33554434,na):Ta):(ya.flags|=33554434,na)):(ya.flags|=1048576,na)}function Fe(ya){return p&&ya.alternate===null&&(ya.flags|=33554434),ya}function ut(ya,na,Ta,Ja){return na===null||na.tag!==6?(na=Qt(Ta,ya.mode,Ja),na.return=ya,na):(na=W(na,Ta),na.return=ya,na)}function Ft(ya,na,Ta,Ja){var Kr=Ta.type;return Kr===w?ja(ya,na,Ta.props.children,Ja,Ta.key):na!==null&&(na.elementType===Kr||typeof Kr=="object"&&Kr!==null&&Kr.$$typeof===ne&&Lp(Kr)===na.type)?(na=W(na,Ta.props),Fh(na,Ta),na.return=ya,na):(na=ia(Ta.type,Ta.key,Ta.props,null,ya.mode,Ja),Fh(na,Ta),na.return=ya,na)}function oa(ya,na,Ta,Ja){return na===null||na.tag!==4||na.stateNode.containerInfo!==Ta.containerInfo||na.stateNode.implementation!==Ta.implementation?(na=da(Ta,ya.mode,Ja),na.return=ya,na):(na=W(na,Ta.children||[]),na.return=ya,na)}function ja(ya,na,Ta,Ja,Kr){return na===null||na.tag!==7?(na=Nt(Ta,ya.mode,Ja,Kr),na.return=ya,na):(na=W(na,Ta),na.return=ya,na)}function rr(ya,na,Ta){if(typeof na=="string"&&na!==""||typeof na=="number"||typeof na=="bigint")return na=Qt(""+na,ya.mode,Ta),na.return=ya,na;if(typeof na=="object"&&na!==null){switch(na.$$typeof){case h:return Ta=ia(na.type,na.key,na.props,null,ya.mode,Ta),Fh(Ta,na),Ta.return=ya,Ta;case n:return na=da(na,ya.mode,Ta),na.return=ya,na;case ne:var Ja=na._init;return na=Ja(na._payload),rr(ya,na,Ta)}if(ze(na)||_e(na))return na=Nt(na,ya.mode,Ta,null),na.return=ya,na;if(typeof na.then=="function")return rr(ya,tl(na),Ta);if(na.$$typeof===U)return rr(ya,$u(ya,na),Ta);Nd(ya,na)}return null}function ba(ya,na,Ta,Ja){var Kr=na!==null?na.key:null;if(typeof Ta=="string"&&Ta!==""||typeof Ta=="number"||typeof Ta=="bigint")return Kr!==null?null:ut(ya,na,""+Ta,Ja);if(typeof Ta=="object"&&Ta!==null){switch(Ta.$$typeof){case h:return Ta.key===Kr?Ft(ya,na,Ta,Ja):null;case n:return Ta.key===Kr?oa(ya,na,Ta,Ja):null;case ne:return Kr=Ta._init,Ta=Kr(Ta._payload),ba(ya,na,Ta,Ja)}if(ze(Ta)||_e(Ta))return Kr!==null?null:ja(ya,na,Ta,Ja,null);if(typeof Ta.then=="function")return ba(ya,na,tl(Ta),Ja);if(Ta.$$typeof===U)return ba(ya,na,$u(ya,Ta),Ja);Nd(ya,Ta)}return null}function Za(ya,na,Ta,Ja,Kr){if(typeof Ja=="string"&&Ja!==""||typeof Ja=="number"||typeof Ja=="bigint")return ya=ya.get(Ta)||null,ut(na,ya,""+Ja,Kr);if(typeof Ja=="object"&&Ja!==null){switch(Ja.$$typeof){case h:return ya=ya.get(Ja.key===null?Ta:Ja.key)||null,Ft(na,ya,Ja,Kr);case n:return ya=ya.get(Ja.key===null?Ta:Ja.key)||null,oa(na,ya,Ja,Kr);case ne:var mi=Ja._init;return Ja=mi(Ja._payload),Za(ya,na,Ta,Ja,Kr)}if(ze(Ja)||_e(Ja))return ya=ya.get(Ta)||null,ja(na,ya,Ja,Kr,null);if(typeof Ja.then=="function")return Za(ya,na,Ta,tl(Ja),Kr);if(Ja.$$typeof===U)return Za(ya,na,Ta,$u(na,Ja),Kr);Nd(na,Ja)}return null}function Yr(ya,na,Ta,Ja){for(var Kr=null,mi=null,on=na,Pn=na=0,tu=null;on!==null&&Pn<Ta.length;Pn++){on.index>Pn?(tu=on,on=null):tu=on.sibling;var ts=ba(ya,on,Ta[Pn],Ja);if(ts===null){on===null&&(on=tu);break}p&&on&&ts.alternate===null&&v(ya,on),na=se(ts,na,Pn),mi===null?Kr=ts:mi.sibling=ts,mi=ts,on=tu}if(Pn===Ta.length)return x(ya,on),Ai&&mc(ya,Pn),Kr;if(on===null){for(;Pn<Ta.length;Pn++)on=rr(ya,Ta[Pn],Ja),on!==null&&(na=se(on,na,Pn),mi===null?Kr=on:mi.sibling=on,mi=on);return Ai&&mc(ya,Pn),Kr}for(on=F(on);Pn<Ta.length;Pn++)tu=Za(on,ya,Pn,Ta[Pn],Ja),tu!==null&&(p&&tu.alternate!==null&&on.delete(tu.key===null?Pn:tu.key),na=se(tu,na,Pn),mi===null?Kr=tu:mi.sibling=tu,mi=tu);return p&&on.forEach(function(sm){return v(ya,sm)}),Ai&&mc(ya,Pn),Kr}function Jn(ya,na,Ta,Ja){if(Ta==null)throw Error(r(151));for(var Kr=null,mi=null,on=na,Pn=na=0,tu=null,ts=Ta.next();on!==null&&!ts.done;Pn++,ts=Ta.next()){on.index>Pn?(tu=on,on=null):tu=on.sibling;var sm=ba(ya,on,ts.value,Ja);if(sm===null){on===null&&(on=tu);break}p&&on&&sm.alternate===null&&v(ya,on),na=se(sm,na,Pn),mi===null?Kr=sm:mi.sibling=sm,mi=sm,on=tu}if(ts.done)return x(ya,on),Ai&&mc(ya,Pn),Kr;if(on===null){for(;!ts.done;Pn++,ts=Ta.next())ts=rr(ya,ts.value,Ja),ts!==null&&(na=se(ts,na,Pn),mi===null?Kr=ts:mi.sibling=ts,mi=ts);return Ai&&mc(ya,Pn),Kr}for(on=F(on);!ts.done;Pn++,ts=Ta.next())ts=Za(on,ya,Pn,ts.value,Ja),ts!==null&&(p&&ts.alternate!==null&&on.delete(ts.key===null?Pn:ts.key),na=se(ts,na,Pn),mi===null?Kr=ts:mi.sibling=ts,mi=ts);return p&&on.forEach(function(uP){return v(ya,uP)}),Ai&&mc(ya,Pn),Kr}function qo(ya,na,Ta,Ja){if(typeof Ta=="object"&&Ta!==null&&Ta.type===w&&Ta.key===null&&(Ta=Ta.props.children),typeof Ta=="object"&&Ta!==null){switch(Ta.$$typeof){case h:e:{for(var Kr=Ta.key;na!==null;){if(na.key===Kr){if(Kr=Ta.type,Kr===w){if(na.tag===7){x(ya,na.sibling),Ja=W(na,Ta.props.children),Ja.return=ya,ya=Ja;break e}}else if(na.elementType===Kr||typeof Kr=="object"&&Kr!==null&&Kr.$$typeof===ne&&Lp(Kr)===na.type){x(ya,na.sibling),Ja=W(na,Ta.props),Fh(Ja,Ta),Ja.return=ya,ya=Ja;break e}x(ya,na);break}else v(ya,na);na=na.sibling}Ta.type===w?(Ja=Nt(Ta.props.children,ya.mode,Ja,Ta.key),Ja.return=ya,ya=Ja):(Ja=ia(Ta.type,Ta.key,Ta.props,null,ya.mode,Ja),Fh(Ja,Ta),Ja.return=ya,ya=Ja)}return Fe(ya);case n:e:{for(Kr=Ta.key;na!==null;){if(na.key===Kr)if(na.tag===4&&na.stateNode.containerInfo===Ta.containerInfo&&na.stateNode.implementation===Ta.implementation){x(ya,na.sibling),Ja=W(na,Ta.children||[]),Ja.return=ya,ya=Ja;break e}else{x(ya,na);break}else v(ya,na);na=na.sibling}Ja=da(Ta,ya.mode,Ja),Ja.return=ya,ya=Ja}return Fe(ya);case ne:return Kr=Ta._init,Ta=Kr(Ta._payload),qo(ya,na,Ta,Ja)}if(ze(Ta))return Yr(ya,na,Ta,Ja);if(_e(Ta)){if(Kr=_e(Ta),typeof Kr!="function")throw Error(r(150));return Ta=Kr.call(Ta),Jn(ya,na,Ta,Ja)}if(typeof Ta.then=="function")return qo(ya,na,tl(Ta),Ja);if(Ta.$$typeof===U)return qo(ya,na,$u(ya,Ta),Ja);Nd(ya,Ta)}return typeof Ta=="string"&&Ta!==""||typeof Ta=="number"||typeof Ta=="bigint"?(Ta=""+Ta,na!==null&&na.tag===6?(x(ya,na.sibling),Ja=W(na,Ta),Ja.return=ya,ya=Ja):(x(ya,na),Ja=Qt(Ta,ya.mode,Ja),Ja.return=ya,ya=Ja),Fe(ya)):x(ya,na)}return function(ya,na,Ta,Ja){try{hl=0;var Kr=qo(ya,na,Ta,Ja);return Lh=null,Kr}catch(on){if(on===yf)throw on;var mi=aa(29,on,null,ya.mode);return mi.lanes=Ja,mi.return=ya,mi}finally{}}}var Bc=Fp(!0),gf=Fp(!1),al=dt(null),Vd=dt(0);function wu(p,v){p=un,ve(Vd,p),ve(al,v),un=p|v.baseLanes}function zd(){ve(Vd,un),ve(al,al.current)}function Gc(){un=Vd.current,pt(al),pt(Vd)}var xl=dt(null),Zu=null;function jc(p){var v=p.alternate;ve(Ds,Ds.current&1),ve(xl,p),Zu===null&&(v===null||al.current!==null||v.memoizedState!==null)&&(Zu=p)}function qf(p){if(p.tag===22){if(ve(Ds,Ds.current),ve(xl,p),Zu===null){var v=p.alternate;v!==null&&v.memoizedState!==null&&(Zu=p)}}else Od()}function Od(){ve(Ds,Ds.current),ve(xl,xl.current)}function Zc(p){pt(xl),Zu===p&&(Zu=null),pt(Ds)}var Ds=dt(0);function Up(p){for(var v=p;v!==null;){if(v.tag===13){var x=v.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if((v.flags&128)!==0)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var Mm=typeof AbortController<"u"?AbortController:function(){var p=[],v=this.signal={aborted:!1,addEventListener:function(x,F){p.push(F)}};this.abort=function(){v.aborted=!0,p.forEach(function(x){return x()})}},Af=t.unstable_scheduleCallback,kp=t.unstable_NormalPriority,eo={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uh(){return{controller:new Mm,data:new Map,refCount:0}}function G(p){p.refCount--,p.refCount===0&&Af(kp,function(){p.controller.abort()})}var J=null,he=0,Ee=0,je=null;function Qe(p,v){if(J===null){var x=J=[];he=0,Ee=nA(),je={status:"pending",value:void 0,then:function(F){x.push(F)}}}return he++,v.then(tt,tt),v}function tt(){if(--he===0&&J!==null){je!==null&&(je.status="fulfilled");var p=J;J=null,Ee=0,je=null;for(var v=0;v<p.length;v++)(0,p[v])()}}function ot(p,v){var x=[],F={status:"pending",value:null,reason:null,then:function(W){x.push(W)}};return p.then(function(){F.status="fulfilled",F.value=v;for(var W=0;W<x.length;W++)(0,x[W])(v)},function(W){for(F.status="rejected",F.reason=W,W=0;W<x.length;W++)(0,x[W])(void 0)}),F}var ht=Te.S;Te.S=function(p,v){typeof v=="object"&&v!==null&&typeof v.then=="function"&&Qe(p,v),ht!==null&&ht(p,v)};var Tt=dt(null);function Jt(){var p=Tt.current;return p!==null?p:Fr.pooledCache}function xt(p,v){v===null?ve(Tt,Tt.current):ve(Tt,v.pool)}function Aa(){var p=Jt();return p===null?null:{parent:eo._currentValue,pool:p}}var ra=0,wa=null,fa=null,_t=null,ta=!1,Ga=!1,Ka=!1,qa=0,Sr=0,fr=null,rn=0;function lr(){throw Error(r(321))}function _i(p,v){if(v===null)return!1;for(var x=0;x<v.length&&x<p.length;x++)if(!Os(p[x],v[x]))return!1;return!0}function bi(p,v,x,F,W,se){return ra=se,wa=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,Te.H=p===null||p.memoizedState===null?Ac:Jl,Ka=!1,se=x(F,W),Ka=!1,Ga&&(se=ai(v,x,F,W)),Zn(p),se}function Zn(p){Te.H=bu;var v=fa!==null&&fa.next!==null;if(ra=0,_t=fa=wa=null,ta=!1,Sr=0,fr=null,v)throw Error(r(300));p===null||il||(p=p.dependencies,p!==null&&Rf(p)&&(il=!0))}function ai(p,v,x,F){wa=p;var W=0;do{if(Ga&&(fr=null),Sr=0,Ga=!1,25<=W)throw Error(r(301));if(W+=1,_t=fa=null,p.updateQueue!=null){var se=p.updateQueue;se.lastEffect=null,se.events=null,se.stores=null,se.memoCache!=null&&(se.memoCache.index=0)}Te.H=_c,se=v(x,F)}while(Ga);return se}function Hi(){var p=Te.H,v=p.useState()[0];return v=typeof v.then=="function"?vi(v):v,p=p.useState()[0],(fa!==null?fa.memoizedState:null)!==p&&(wa.flags|=1024),v}function Fn(){var p=qa!==0;return qa=0,p}function _n(p,v,x){v.updateQueue=p.updateQueue,v.flags&=-2053,p.lanes&=~x}function ds(p){if(ta){for(p=p.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}ta=!1}ra=0,_t=fa=wa=null,Ga=!1,Sr=qa=0,fr=null}function Fi(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?wa.memoizedState=_t=p:_t=_t.next=p,_t}function Un(){if(fa===null){var p=wa.alternate;p=p!==null?p.memoizedState:null}else p=fa.next;var v=_t===null?wa.memoizedState:_t.next;if(v!==null)_t=v,fa=p;else{if(p===null)throw wa.alternate===null?Error(r(467)):Error(r(310));fa=p,p={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},_t===null?wa.memoizedState=_t=p:_t=_t.next=p}return _t}var po;po=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function vi(p){var v=Sr;return Sr+=1,fr===null&&(fr=[]),p=ju(fr,p,v),v=wa,(_t===null?v.memoizedState:_t.next)===null&&(v=v.alternate,Te.H=v===null||v.memoizedState===null?Ac:Jl),p}function is(p){if(p!==null&&typeof p=="object"){if(typeof p.then=="function")return vi(p);if(p.$$typeof===U)return $s(p)}throw Error(r(438,String(p)))}function vn(p){var v=null,x=wa.updateQueue;if(x!==null&&(v=x.memoCache),v==null){var F=wa.alternate;F!==null&&(F=F.updateQueue,F!==null&&(F=F.memoCache,F!=null&&(v={data:F.data.map(function(W){return W.slice()}),index:0})))}if(v==null&&(v={data:[],index:0}),x===null&&(x=po(),wa.updateQueue=x),x.memoCache=v,x=v.data[v.index],x===void 0)for(x=v.data[v.index]=Array(p),F=0;F<p;F++)x[F]=ge;return v.index++,x}function Mi(p,v){return typeof v=="function"?v(p):v}function qs(p){var v=Un();return To(v,fa,p)}function To(p,v,x){var F=p.queue;if(F===null)throw Error(r(311));F.lastRenderedReducer=x;var W=p.baseQueue,se=F.pending;if(se!==null){if(W!==null){var Fe=W.next;W.next=se.next,se.next=Fe}v.baseQueue=W=se,F.pending=null}if(se=p.baseState,W===null)p.memoizedState=se;else{v=W.next;var ut=Fe=null,Ft=null,oa=v,ja=!1;do{var rr=oa.lane&-536870913;if(rr!==oa.lane?(dr&rr)===rr:(ra&rr)===rr){var ba=oa.revertLane;if(ba===0)Ft!==null&&(Ft=Ft.next={lane:0,revertLane:0,action:oa.action,hasEagerState:oa.hasEagerState,eagerState:oa.eagerState,next:null}),rr===Ee&&(ja=!0);else if((ra&ba)===ba){oa=oa.next,ba===Ee&&(ja=!0);continue}else rr={lane:0,revertLane:oa.revertLane,action:oa.action,hasEagerState:oa.hasEagerState,eagerState:oa.eagerState,next:null},Ft===null?(ut=Ft=rr,Fe=se):Ft=Ft.next=rr,wa.lanes|=ba,Ki|=ba;rr=oa.action,Ka&&x(se,rr),se=oa.hasEagerState?oa.eagerState:x(se,rr)}else ba={lane:rr,revertLane:oa.revertLane,action:oa.action,hasEagerState:oa.hasEagerState,eagerState:oa.eagerState,next:null},Ft===null?(ut=Ft=ba,Fe=se):Ft=Ft.next=ba,wa.lanes|=rr,Ki|=rr;oa=oa.next}while(oa!==null&&oa!==v);if(Ft===null?Fe=se:Ft.next=ut,!Os(se,p.memoizedState)&&(il=!0,ja&&(x=je,x!==null)))throw x;p.memoizedState=se,p.baseState=Fe,p.baseQueue=Ft,F.lastRenderedState=se}return W===null&&(F.lanes=0),[p.memoizedState,F.dispatch]}function rl(p){var v=Un(),x=v.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=p;var F=x.dispatch,W=x.pending,se=v.memoizedState;if(W!==null){x.pending=null;var Fe=W=W.next;do se=p(se,Fe.action),Fe=Fe.next;while(Fe!==W);Os(se,v.memoizedState)||(il=!0),v.memoizedState=se,v.baseQueue===null&&(v.baseState=se),x.lastRenderedState=se}return[se,F]}function Pl(p,v,x){var F=wa,W=Un(),se=Ai;if(se){if(x===void 0)throw Error(r(407));x=x()}else x=v();var Fe=!Os((fa||W).memoizedState,x);if(Fe&&(W.memoizedState=x,il=!0),W=W.queue,$c(Ru.bind(null,F,W,p),[p]),W.getSnapshot!==v||Fe||_t!==null&&_t.memoizedState.tag&1){if(F.flags|=2048,Nl(9,El.bind(null,F,W,x,v),{destroy:void 0},null),Fr===null)throw Error(r(349));se||(ra&60)!==0||xs(F,v,x)}return x}function xs(p,v,x){p.flags|=16384,p={getSnapshot:v,value:x},v=wa.updateQueue,v===null?(v=po(),wa.updateQueue=v,v.stores=[p]):(x=v.stores,x===null?v.stores=[p]:x.push(p))}function El(p,v,x,F){v.value=x,v.getSnapshot=F,Ca(v)&&Ua(p)}function Ru(p,v,x){return x(function(){Ca(v)&&Ua(p)})}function Ca(p){var v=p.getSnapshot;p=p.value;try{var x=v();return!Os(p,x)}catch{return!0}}function Ua(p){var v=Jo(p,2);v!==null&&Ol(v,p,2)}function $i(p){var v=Fi();if(typeof p=="function"){var x=p;if(p=x(),Ka){mn(!0);try{x()}finally{mn(!1)}}}return v.memoizedState=v.baseState=p,v.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:p},v}function zi(p,v,x,F){return p.baseState=x,To(p,fa,typeof F=="function"?F:Mi)}function Gt(p,v,x,F,W){if(Yc(p))throw Error(r(485));if(p=v.action,p!==null){var se={payload:W,action:p,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Fe){se.listeners.push(Fe)}};Te.T!==null?x(!0):se.isTransition=!1,F(se),x=v.pending,x===null?(se.next=v.pending=se,Bp(v,se)):(se.next=x.next,v.pending=x.next=se)}}function Bp(p,v){var x=v.action,F=v.payload,W=p.state;if(v.isTransition){var se=Te.T,Fe={};Te.T=Fe;try{var ut=x(W,F),Ft=Te.S;Ft!==null&&Ft(Fe,ut),sh(p,v,ut)}catch(oa){lh(p,v,oa)}finally{Te.T=se}}else try{se=x(W,F),sh(p,v,se)}catch(oa){lh(p,v,oa)}}function sh(p,v,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(F){oh(p,v,F)},function(F){return lh(p,v,F)}):oh(p,v,x)}function oh(p,v,x){v.status="fulfilled",v.value=x,Tu(v),p.state=x,v=p.pending,v!==null&&(x=v.next,x===v?p.pending=null:(x=x.next,v.next=x,Bp(p,x)))}function lh(p,v,x){var F=p.pending;if(p.pending=null,F!==null){F=F.next;do v.status="rejected",v.reason=x,Tu(v),v=v.next;while(v!==F)}p.action=null}function Tu(p){p=p.listeners;for(var v=0;v<p.length;v++)(0,p[v])()}function uh(p,v){return v}function qu(p,v){if(Ai){var x=Fr.formState;if(x!==null){e:{var F=wa;if(Ai){if(qi){t:{for(var W=qi,se=_u;W.nodeType!==8;){if(!se){W=null;break t}if(W=Nu(W.nextSibling),W===null){W=null;break t}}se=W.data,W=se==="F!"||se==="F"?W:null}if(W){qi=Nu(W.nextSibling),F=W.data==="F!";break e}}yc(F)}F=!1}F&&(v=x[0])}}return x=Fi(),x.memoizedState=x.baseState=v,F={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uh,lastRenderedState:v},x.queue=F,x=Yf.bind(null,wa,F),F.dispatch=x,F=$i(!1),se=Wc.bind(null,wa,!1,F.queue),F=Fi(),W={state:v,dispatch:null,action:p,pending:null},F.queue=W,x=Gt.bind(null,wa,W,se,x),W.dispatch=x,F.memoizedState=p,[v,x,!1]}function Im(p){var v=Un();return Hf(v,fa,p)}function Hf(p,v,x){v=To(p,v,uh)[0],p=qs(Mi)[0],v=typeof v=="object"&&v!==null&&typeof v.then=="function"?vi(v):v;var F=Un(),W=F.queue,se=W.dispatch;return x!==F.memoizedState&&(wa.flags|=2048,Nl(9,Lm.bind(null,W,x),{destroy:void 0},null)),[v,se,p]}function Lm(p,v){p.action=v}function ch(p){var v=Un(),x=fa;if(x!==null)return Hf(v,x,p);Un(),v=v.memoizedState,x=Un();var F=x.queue.dispatch;return x.memoizedState=p,[v,F,!1]}function Nl(p,v,x,F){return p={tag:p,create:v,inst:x,deps:F,next:null},v=wa.updateQueue,v===null&&(v=po(),wa.updateQueue=v),x=v.lastEffect,x===null?v.lastEffect=p.next=p:(F=x.next,x.next=p,p.next=F,v.lastEffect=p),p}function kh(){return Un().memoizedState}function qc(p,v,x,F){var W=Fi();wa.flags|=p,W.memoizedState=Nl(1|v,x,{destroy:void 0},F===void 0?null:F)}function Hc(p,v,x,F){var W=Un();F=F===void 0?null:F;var se=W.memoizedState.inst;fa!==null&&F!==null&&_i(F,fa.memoizedState.deps)?W.memoizedState=Nl(v,x,se,F):(wa.flags|=p,W.memoizedState=Nl(1|v,x,se,F))}function $f(p,v){qc(8390656,8,p,v)}function $c(p,v){Hc(2048,8,p,v)}function nl(p,v){return Hc(4,2,p,v)}function Fm(p,v){return Hc(4,4,p,v)}function to(p,v){if(typeof v=="function"){p=p();var x=v(p);return function(){typeof x=="function"?x():v(null)}}if(v!=null)return p=p(),v.current=p,function(){v.current=null}}function Vy(p,v,x){x=x!=null?x.concat([p]):null,Hc(4,4,to.bind(null,v,p),x)}function dh(){}function ri(p,v){var x=Un();v=v===void 0?null:v;var F=x.memoizedState;return v!==null&&_i(v,F[1])?F[0]:(x.memoizedState=[p,v],p)}function xn(p,v){var x=Un();v=v===void 0?null:v;var F=x.memoizedState;if(v!==null&&_i(v,F[1]))return F[0];if(F=p(),Ka){mn(!0);try{p()}finally{mn(!1)}}return x.memoizedState=[F,v],F}function Kf(p,v,x){return x===void 0||(ra&1073741824)!==0?p.memoizedState=v:(p.memoizedState=x,p=Ah(),wa.lanes|=p,Ki|=p,x)}function Su(p,v,x,F){return Os(x,v)?x:al.current!==null?(p=Kf(p,x,F),Os(p,v)||(il=!0),p):(ra&42)===0?(il=!0,p.memoizedState=x):(p=Ah(),wa.lanes|=p,Ki|=p,v)}function Dd(p,v,x,F,W){var se=We.p;We.p=se!==0&&8>se?se:8;var Fe=Te.T,ut={};Te.T=ut,Wc(p,!1,v,x);try{var Ft=W(),oa=Te.S;if(oa!==null&&oa(ut,Ft),Ft!==null&&typeof Ft=="object"&&typeof Ft.then=="function"){var ja=ot(Ft,F);hh(p,v,ja,go(p))}else hh(p,v,F,go(p))}catch(rr){hh(p,v,{then:function(){},status:"rejected",reason:rr},go())}finally{We.p=se,Te.T=Fe}}function Cu(){}function Kc(p,v,x,F){if(p.tag!==5)throw Error(r(476));var W=_f(p).queue;Dd(p,W,v,lt,x===null?Cu:function(){return Bh(p),x(F)})}function _f(p){var v=p.memoizedState;if(v!==null)return v;v={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:lt},next:null};var x={};return v.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:x},next:null},p.memoizedState=v,p=p.alternate,p!==null&&(p.memoizedState=v),v}function Bh(p){var v=_f(p).next.queue;hh(p,v,{},go())}function Vl(){return $s(Yy)}function vf(){return Un().memoizedState}function So(){return Un().memoizedState}function Md(p){for(var v=p.return;v!==null;){switch(v.tag){case 24:case 3:var x=go();p=Tf(x);var F=Sf(v,p,x);F!==null&&(Ol(F,v,x),Cf(F,v,x)),v={cache:Uh()},p.payload=v;return}v=v.return}}function Wf(p,v,x){var F=go();x={lane:F,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Yc(p)?Xf(v,x):(x=Fc(p,v,x,F),x!==null&&(Ol(x,p,F),Id(x,v,F)))}function Yf(p,v,x){var F=go();hh(p,v,x,F)}function hh(p,v,x,F){var W={lane:F,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Yc(p))Xf(v,W);else{var se=p.alternate;if(p.lanes===0&&(se===null||se.lanes===0)&&(se=v.lastRenderedReducer,se!==null))try{var Fe=v.lastRenderedState,ut=se(Fe,x);if(W.hasEagerState=!0,W.eagerState=ut,Os(ut,Fe))return Wl(p,v,W,0),Fr===null&&ns(),!1}catch{}finally{}if(x=Fc(p,v,W,F),x!==null)return Ol(x,p,F),Id(x,v,F),!0}return!1}function Wc(p,v,x,F){if(F={lane:2,revertLane:nA(),action:F,hasEagerState:!1,eagerState:null,next:null},Yc(p)){if(v)throw Error(r(479))}else v=Fc(p,x,F,2),v!==null&&Ol(v,p,2)}function Yc(p){var v=p.alternate;return p===wa||v!==null&&v===wa}function Xf(p,v){Ga=ta=!0;var x=p.pending;x===null?v.next=v:(v.next=x.next,x.next=v),p.pending=v}function Id(p,v,x){if((x&4194176)!==0){var F=v.lanes;F&=p.pendingLanes,x|=F,v.lanes=x,mt(p,x)}}var bu={readContext:$s,use:is,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useInsertionEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useSyncExternalStore:lr,useId:lr};bu.useCacheRefresh=lr,bu.useMemoCache=lr,bu.useHostTransitionStatus=lr,bu.useFormState=lr,bu.useActionState=lr,bu.useOptimistic=lr;var Ac={readContext:$s,use:is,useCallback:function(p,v){return Fi().memoizedState=[p,v===void 0?null:v],p},useContext:$s,useEffect:$f,useImperativeHandle:function(p,v,x){x=x!=null?x.concat([p]):null,qc(4194308,4,to.bind(null,v,p),x)},useLayoutEffect:function(p,v){return qc(4194308,4,p,v)},useInsertionEffect:function(p,v){qc(4,2,p,v)},useMemo:function(p,v){var x=Fi();v=v===void 0?null:v;var F=p();if(Ka){mn(!0);try{p()}finally{mn(!1)}}return x.memoizedState=[F,v],F},useReducer:function(p,v,x){var F=Fi();if(x!==void 0){var W=x(v);if(Ka){mn(!0);try{x(v)}finally{mn(!1)}}}else W=v;return F.memoizedState=F.baseState=W,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:W},F.queue=p,p=p.dispatch=Wf.bind(null,wa,p),[F.memoizedState,p]},useRef:function(p){var v=Fi();return p={current:p},v.memoizedState=p},useState:function(p){p=$i(p);var v=p.queue,x=Yf.bind(null,wa,v);return v.dispatch=x,[p.memoizedState,x]},useDebugValue:dh,useDeferredValue:function(p,v){var x=Fi();return Kf(x,p,v)},useTransition:function(){var p=$i(!1);return p=Dd.bind(null,wa,p.queue,!0,!1),Fi().memoizedState=p,[!1,p]},useSyncExternalStore:function(p,v,x){var F=wa,W=Fi();if(Ai){if(x===void 0)throw Error(r(407));x=x()}else{if(x=v(),Fr===null)throw Error(r(349));(dr&60)!==0||xs(F,v,x)}W.memoizedState=x;var se={value:x,getSnapshot:v};return W.queue=se,$f(Ru.bind(null,F,se,p),[p]),F.flags|=2048,Nl(9,El.bind(null,F,se,x,v),{destroy:void 0},null),x},useId:function(){var p=Fi(),v=Fr.identifierPrefix;if(Ai){var x=Gu,F=Au;x=(F&~(1<<32-en(F)-1)).toString(32)+x,v=":"+v+"R"+x,x=qa++,0<x&&(v+="H"+x.toString(32)),v+=":"}else x=rn++,v=":"+v+"r"+x.toString(32)+":";return p.memoizedState=v},useCacheRefresh:function(){return Fi().memoizedState=Md.bind(null,wa)}};Ac.useMemoCache=vn,Ac.useHostTransitionStatus=Vl,Ac.useFormState=qu,Ac.useActionState=qu,Ac.useOptimistic=function(p){var v=Fi();v.memoizedState=v.baseState=p;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return v.queue=x,v=Wc.bind(null,wa,!0,x),x.dispatch=v,[p,v]};var Jl={readContext:$s,use:is,useCallback:ri,useContext:$s,useEffect:$c,useImperativeHandle:Vy,useInsertionEffect:nl,useLayoutEffect:Fm,useMemo:xn,useReducer:qs,useRef:kh,useState:function(){return qs(Mi)},useDebugValue:dh,useDeferredValue:function(p,v){var x=Un();return Su(x,fa.memoizedState,p,v)},useTransition:function(){var p=qs(Mi)[0],v=Un().memoizedState;return[typeof p=="boolean"?p:vi(p),v]},useSyncExternalStore:Pl,useId:vf};Jl.useCacheRefresh=So,Jl.useMemoCache=vn,Jl.useHostTransitionStatus=Vl,Jl.useFormState=Im,Jl.useActionState=Im,Jl.useOptimistic=function(p,v){var x=Un();return zi(x,fa,p,v)};var _c={readContext:$s,use:is,useCallback:ri,useContext:$s,useEffect:$c,useImperativeHandle:Vy,useInsertionEffect:nl,useLayoutEffect:Fm,useMemo:xn,useReducer:rl,useRef:kh,useState:function(){return rl(Mi)},useDebugValue:dh,useDeferredValue:function(p,v){var x=Un();return fa===null?Kf(x,p,v):Su(x,fa.memoizedState,p,v)},useTransition:function(){var p=rl(Mi)[0],v=Un().memoizedState;return[typeof p=="boolean"?p:vi(p),v]},useSyncExternalStore:Pl,useId:vf};_c.useCacheRefresh=So,_c.useMemoCache=vn,_c.useHostTransitionStatus=Vl,_c.useFormState=ch,_c.useActionState=ch,_c.useOptimistic=function(p,v){var x=Un();return fa!==null?zi(x,fa,p,v):(x.baseState=p,[p,x.queue.dispatch])};function Ps(p,v,x,F){v=p.memoizedState,x=x(F,v),x=x==null?v:Oe({},v,x),p.memoizedState=x,p.lanes===0&&(p.updateQueue.baseState=x)}var Ql={isMounted:function(p){return(p=p._reactInternals)?ke(p)===p:!1},enqueueSetState:function(p,v,x){p=p._reactInternals;var F=go(),W=Tf(F);W.payload=v,x!=null&&(W.callback=x),v=Sf(p,W,F),v!==null&&(Ol(v,p,F),Cf(v,p,F))},enqueueReplaceState:function(p,v,x){p=p._reactInternals;var F=go(),W=Tf(F);W.tag=1,W.payload=v,x!=null&&(W.callback=x),v=Sf(p,W,F),v!==null&&(Ol(v,p,F),Cf(v,p,F))},enqueueForceUpdate:function(p,v){p=p._reactInternals;var x=go(),F=Tf(x);F.tag=2,v!=null&&(F.callback=v),v=Sf(p,F,x),v!==null&&(Ol(v,p,x),Cf(v,p,x))}};function Hu(p,v,x,F,W,se,Fe){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(F,se,Fe):v.prototype&&v.prototype.isPureReactComponent?!Tl(x,F)||!Tl(W,se):!0}function Hs(p,v,x,F){p=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(x,F),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(x,F),v.state!==p&&Ql.enqueueReplaceState(v,v.state,null)}function xu(p,v){var x=v;if("ref"in v){x={};for(var F in v)F!=="ref"&&(x[F]=v[F])}if(p=p.defaultProps){x===v&&(x=Oe({},x));for(var W in p)x[W]===void 0&&(x[W]=p[W])}return x}var fh=typeof reportError=="function"?reportError:function(p){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var v=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof p=="object"&&p!==null&&typeof p.message=="string"?String(p.message):String(p),error:p});if(!window.dispatchEvent(v))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",p);return}console.error(p)};function Jf(p){fh(p)}function Gh(p){console.error(p)}function ph(p){fh(p)}function Ld(p,v){try{var x=p.onUncaughtError;x(v.value,{componentStack:v.stack})}catch(F){setTimeout(function(){throw F})}}function Um(p,v,x){try{var F=p.onCaughtError;F(x.value,{componentStack:x.stack,errorBoundary:v.tag===1?v.stateNode:null})}catch(W){setTimeout(function(){throw W})}}function Gp(p,v,x){return x=Tf(x),x.tag=3,x.payload={element:null},x.callback=function(){Ld(p,v)},x}function km(p){return p=Tf(p),p.tag=3,p}function zy(p,v,x,F){var W=x.type.getDerivedStateFromError;if(typeof W=="function"){var se=F.value;p.payload=function(){return W(se)},p.callback=function(){Um(v,x,F)}}var Fe=x.stateNode;Fe!==null&&typeof Fe.componentDidCatch=="function"&&(p.callback=function(){Um(v,x,F),typeof W!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var ut=F.stack;this.componentDidCatch(F.value,{componentStack:ut!==null?ut:""})})}function Gg(p,v,x,F,W){if(x.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){if(v=x.alternate,v!==null&&rp(v,x,W,!0),x=xl.current,x!==null){switch(x.tag){case 13:return Zu===null?P0():x.alternate===null&&Vn===0&&(Vn=3),x.flags&=-257,x.flags|=65536,x.lanes=W,F===ih?x.flags|=16384:(v=x.updateQueue,v===null?x.updateQueue=new Set([F]):v.add(F),e1(p,F,W)),!1;case 22:return x.flags|=65536,F===ih?x.flags|=16384:(v=x.updateQueue,v===null?(v={transitions:null,markerInstances:null,retryQueue:new Set([F])},x.updateQueue=v):(x=v.retryQueue,x===null?v.retryQueue=new Set([F]):x.add(F)),e1(p,F,W)),!1}throw Error(r(435,x.tag))}return e1(p,F,W),P0(),!1}if(Ai)return v=xl.current,v!==null?((v.flags&65536)===0&&(v.flags|=256),v.flags|=65536,v.lanes=W,F!==Zf&&(p=Error(r(422),{cause:F}),Ed(es(p,x)))):(F!==Zf&&(v=Error(r(423),{cause:F}),Ed(es(v,x))),p=p.current.alternate,p.flags|=65536,W&=-W,p.lanes|=W,F=es(F,x),W=Gp(p.stateNode,F,W),My(p,W),Vn!==4&&(Vn=2)),!1;var se=Error(r(520),{cause:F});if(se=es(se,x),Cn===null?Cn=[se]:Cn.push(se),Vn!==4&&(Vn=2),v===null)return!0;F=es(F,x),x=v;do{switch(x.tag){case 3:return x.flags|=65536,p=W&-W,x.lanes|=p,p=Gp(x.stateNode,F,p),My(x,p),!1;case 1:if(v=x.type,se=x.stateNode,(x.flags&128)===0&&(typeof v.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(ss===null||!ss.has(se))))return x.flags|=65536,W&=-W,x.lanes|=W,W=km(W),zy(W,p,x,F),My(x,W),!1}x=x.return}while(x!==null);return!1}var jp=Error(r(461)),il=!1;function fl(p,v,x,F){v.child=p===null?gf(v,null,x,F):Bc(v,p.child,x,F)}function jg(p,v,x,F,W){x=x.render;var se=v.ref;if("ref"in F){var Fe={};for(var ut in F)ut!=="ref"&&(Fe[ut]=F[ut])}else Fe=F;return wc(v),F=bi(p,v,x,Fe,se,W),ut=Fn(),p!==null&&!il?(_n(p,v,W),vc(p,v,W)):(Ai&&ut&&Oh(v),v.flags|=1,fl(p,v,F,W),v.child)}function Zg(p,v,x,F,W){if(p===null){var se=x.type;return typeof se=="function"&&!ua(se)&&se.defaultProps===void 0&&x.compare===null?(v.tag=15,v.type=se,qg(p,v,se,F,W)):(p=ia(x.type,null,F,v,v.mode,W),p.ref=v.ref,p.return=v,v.child=p)}if(se=p.child,!ms(p,W)){var Fe=se.memoizedProps;if(x=x.compare,x=x!==null?x:Tl,x(Fe,F)&&p.ref===v.ref)return vc(p,v,W)}return v.flags|=1,p=Sa(se,F),p.ref=v.ref,p.return=v,v.child=p}function qg(p,v,x,F,W){if(p!==null){var se=p.memoizedProps;if(Tl(se,F)&&p.ref===v.ref)if(il=!1,v.pendingProps=F=se,ms(p,W))(p.flags&131072)!==0&&(il=!0);else return v.lanes=p.lanes,vc(p,v,W)}return Qf(p,v,x,F,W)}function Zp(p,v,x){var F=v.pendingProps,W=F.children,se=(v.stateNode._pendingVisibility&2)!==0,Fe=p!==null?p.memoizedState:null;if(pl(p,v),F.mode==="hidden"||se){if((v.flags&128)!==0){if(F=Fe!==null?Fe.baseLanes|x:x,p!==null){for(W=v.child=p.child,se=0;W!==null;)se=se|W.lanes|W.childLanes,W=W.sibling;v.childLanes=se&~F}else v.childLanes=0,v.child=null;return qp(p,v,F,x)}if((x&536870912)!==0)v.memoizedState={baseLanes:0,cachePool:null},p!==null&&xt(v,Fe!==null?Fe.cachePool:null),Fe!==null?wu(v,Fe):zd(),qf(v);else return v.lanes=v.childLanes=536870912,qp(p,v,Fe!==null?Fe.baseLanes|x:x,x)}else Fe!==null?(xt(v,Fe.cachePool),wu(v,Fe),Od(),v.memoizedState=null):(p!==null&&xt(v,null),zd(),Od());return fl(p,v,W,x),v.child}function qp(p,v,x,F){var W=Jt();return W=W===null?null:{parent:eo._currentValue,pool:W},v.memoizedState={baseLanes:x,cachePool:W},p!==null&&xt(v,null),zd(),qf(v),p!==null&&rp(p,v,F,!0),null}function pl(p,v){var x=v.ref;if(x===null)p!==null&&p.ref!==null&&(v.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(p===null||p.ref!==x)&&(v.flags|=2097664)}}function Qf(p,v,x,F,W){return wc(v),x=bi(p,v,x,F,void 0,W),F=Fn(),p!==null&&!il?(_n(p,v,W),vc(p,v,W)):(Ai&&F&&Oh(v),v.flags|=1,fl(p,v,x,W),v.child)}function Hg(p,v,x,F,W,se){return wc(v),v.updateQueue=null,x=ai(v,F,x,W),Zn(p),F=Fn(),p!==null&&!il?(_n(p,v,se),vc(p,v,se)):(Ai&&F&&Oh(v),v.flags|=1,fl(p,v,x,se),v.child)}function $g(p,v,x,F,W){if(wc(v),v.stateNode===null){var se=Uc,Fe=x.contextType;typeof Fe=="object"&&Fe!==null&&(se=$s(Fe)),se=new x(F,se),v.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,se.updater=Ql,v.stateNode=se,se._reactInternals=v,se=v.stateNode,se.props=F,se.state=v.memoizedState,se.refs={},yh(v),Fe=x.contextType,se.context=typeof Fe=="object"&&Fe!==null?$s(Fe):Uc,se.state=v.memoizedState,Fe=x.getDerivedStateFromProps,typeof Fe=="function"&&(Ps(v,x,Fe,F),se.state=v.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(Fe=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),Fe!==se.state&&Ql.enqueueReplaceState(se,se.state,null),Kp(v,F,se,W),gh(),se.state=v.memoizedState),typeof se.componentDidMount=="function"&&(v.flags|=4194308),F=!0}else if(p===null){se=v.stateNode;var ut=v.memoizedProps,Ft=xu(x,ut);se.props=Ft;var oa=se.context,ja=x.contextType;Fe=Uc,typeof ja=="object"&&ja!==null&&(Fe=$s(ja));var rr=x.getDerivedStateFromProps;ja=typeof rr=="function"||typeof se.getSnapshotBeforeUpdate=="function",ut=v.pendingProps!==ut,ja||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(ut||oa!==Fe)&&Hs(v,se,F,Fe),Ku=!1;var ba=v.memoizedState;se.state=ba,Kp(v,F,se,W),gh(),oa=v.memoizedState,ut||ba!==oa||Ku?(typeof rr=="function"&&(Ps(v,x,rr,F),oa=v.memoizedState),(Ft=Ku||Hu(v,x,Ft,F,ba,oa,Fe))?(ja||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(v.flags|=4194308)):(typeof se.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=F,v.memoizedState=oa),se.props=F,se.state=oa,se.context=Fe,F=Ft):(typeof se.componentDidMount=="function"&&(v.flags|=4194308),F=!1)}else{se=v.stateNode,Xg(p,v),Fe=v.memoizedProps,ja=xu(x,Fe),se.props=ja,rr=v.pendingProps,ba=se.context,oa=x.contextType,Ft=Uc,typeof oa=="object"&&oa!==null&&(Ft=$s(oa)),ut=x.getDerivedStateFromProps,(oa=typeof ut=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(Fe!==rr||ba!==Ft)&&Hs(v,se,F,Ft),Ku=!1,ba=v.memoizedState,se.state=ba,Kp(v,F,se,W),gh();var Za=v.memoizedState;Fe!==rr||ba!==Za||Ku||p!==null&&p.dependencies!==null&&Rf(p.dependencies)?(typeof ut=="function"&&(Ps(v,x,ut,F),Za=v.memoizedState),(ja=Ku||Hu(v,x,ja,F,ba,Za,Ft)||p!==null&&p.dependencies!==null&&Rf(p.dependencies))?(oa||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(F,Za,Ft),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(F,Za,Ft)),typeof se.componentDidUpdate=="function"&&(v.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof se.componentDidUpdate!="function"||Fe===p.memoizedProps&&ba===p.memoizedState||(v.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Fe===p.memoizedProps&&ba===p.memoizedState||(v.flags|=1024),v.memoizedProps=F,v.memoizedState=Za),se.props=F,se.state=Za,se.context=Ft,F=ja):(typeof se.componentDidUpdate!="function"||Fe===p.memoizedProps&&ba===p.memoizedState||(v.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||Fe===p.memoizedProps&&ba===p.memoizedState||(v.flags|=1024),F=!1)}return se=F,pl(p,v),F=(v.flags&128)!==0,se||F?(se=v.stateNode,x=F&&typeof x.getDerivedStateFromError!="function"?null:se.render(),v.flags|=1,p!==null&&F?(v.child=Bc(v,p.child,null,W),v.child=Bc(v,null,x,W)):fl(p,v,x,W),v.memoizedState=se.state,p=v.child):p=vc(p,v,W),p}function C0(p,v,x,F){return Ih(),v.flags|=256,fl(p,v,x,F),v.child}var Kg={dehydrated:null,treeContext:null,retryLane:0};function Oi(p){return{baseLanes:p,cachePool:Aa()}}function Oy(p,v,x){return p=p!==null?p.childLanes&~x:0,v&&(p|=Ks),p}function Dy(p,v,x){var F=v.pendingProps,W=!1,se=(v.flags&128)!==0,Fe;if((Fe=se)||(Fe=p!==null&&p.memoizedState===null?!1:(Ds.current&2)!==0),Fe&&(W=!0,v.flags&=-129),Fe=(v.flags&32)!==0,v.flags&=-33,p===null){if(Ai){if(W?jc(v):Od(),Ai){var ut=qi,Ft;if(Ft=ut){e:{for(Ft=ut,ut=_u;Ft.nodeType!==8;){if(!ut){ut=null;break e}if(Ft=Nu(Ft.nextSibling),Ft===null){ut=null;break e}}ut=Ft}ut!==null?(v.memoizedState={dehydrated:ut,treeContext:kc!==null?{id:Au,overflow:Gu}:null,retryLane:536870912},Ft=aa(18,null,null,0),Ft.stateNode=ut,Ft.return=v,v.child=Ft,el=v,qi=null,Ft=!0):Ft=!1}Ft||yc(v)}if(ut=v.memoizedState,ut!==null&&(ut=ut.dehydrated,ut!==null))return ut.data==="$!"?v.lanes=16:v.lanes=536870912,null;Zc(v)}return ut=F.children,F=F.fallback,W?(Od(),W=v.mode,ut=ep({mode:"hidden",children:ut},W),F=Nt(F,W,x,null),ut.return=v,F.return=v,ut.sibling=F,v.child=ut,W=v.child,W.memoizedState=Oi(x),W.childLanes=Oy(p,Fe,x),v.memoizedState=Kg,F):(jc(v),Wg(v,ut))}if(Ft=p.memoizedState,Ft!==null&&(ut=Ft.dehydrated,ut!==null)){if(se)v.flags&256?(jc(v),v.flags&=-257,v=Bm(p,v,x)):v.memoizedState!==null?(Od(),v.child=p.child,v.flags|=128,v=null):(Od(),W=F.fallback,ut=v.mode,F=ep({mode:"visible",children:F.children},ut),W=Nt(W,ut,x,null),W.flags|=2,F.return=v,W.return=v,F.sibling=W,v.child=F,Bc(v,p.child,null,x),F=v.child,F.memoizedState=Oi(x),F.childLanes=Oy(p,Fe,x),v.memoizedState=Kg,v=W);else if(jc(v),ut.data==="$!"){if(Fe=ut.nextSibling&&ut.nextSibling.dataset,Fe)var oa=Fe.dgst;Fe=oa,F=Error(r(419)),F.stack="",F.digest=Fe,Ed({value:F,source:null,stack:null}),v=Bm(p,v,x)}else if(il||rp(p,v,x,!1),Fe=(x&p.childLanes)!==0,il||Fe){if(Fe=Fr,Fe!==null){if(F=x&-x,(F&42)!==0)F=1;else switch(F){case 2:F=1;break;case 8:F=4;break;case 32:F=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:F=64;break;case 268435456:F=134217728;break;default:F=0}if(F=(F&(Fe.suspendedLanes|x))!==0?0:F,F!==0&&F!==Ft.retryLane)throw Ft.retryLane=F,Jo(p,F),Ol(Fe,p,F),jp}ut.data==="$?"||P0(),v=Bm(p,v,x)}else ut.data==="$?"?(v.flags|=128,v.child=p.child,v=Y2.bind(null,p),ut._reactRetry=v,v=null):(p=Ft.treeContext,qi=Nu(ut.nextSibling),el=v,Ai=!0,Xl=null,_u=!1,p!==null&&(Qo[dl++]=Au,Qo[dl++]=Gu,Qo[dl++]=kc,Au=p.id,Gu=p.overflow,kc=v),v=Wg(v,F.children),v.flags|=4096);return v}return W?(Od(),W=F.fallback,ut=v.mode,Ft=p.child,oa=Ft.sibling,F=Sa(Ft,{mode:"hidden",children:F.children}),F.subtreeFlags=Ft.subtreeFlags&31457280,oa!==null?W=Sa(oa,W):(W=Nt(W,ut,x,null),W.flags|=2),W.return=v,F.return=v,F.sibling=W,v.child=F,F=W,W=v.child,ut=p.child.memoizedState,ut===null?ut=Oi(x):(Ft=ut.cachePool,Ft!==null?(oa=eo._currentValue,Ft=Ft.parent!==oa?{parent:oa,pool:oa}:Ft):Ft=Aa(),ut={baseLanes:ut.baseLanes|x,cachePool:Ft}),W.memoizedState=ut,W.childLanes=Oy(p,Fe,x),v.memoizedState=Kg,F):(jc(v),x=p.child,p=x.sibling,x=Sa(x,{mode:"visible",children:F.children}),x.return=v,x.sibling=null,p!==null&&(Fe=v.deletions,Fe===null?(v.deletions=[p],v.flags|=16):Fe.push(p)),v.child=x,v.memoizedState=null,x)}function Wg(p,v){return v=ep({mode:"visible",children:v},p.mode),v.return=p,p.child=v}function ep(p,v){return sa(p,v,0,null)}function Bm(p,v,x){return Bc(v,p.child,null,x),p=Wg(v,v.pendingProps.children),p.flags|=2,v.memoizedState=null,p}function Hp(p,v,x){p.lanes|=v;var F=p.alternate;F!==null&&(F.lanes|=v),Yg(p.return,v,x)}function $p(p,v,x,F,W){var se=p.memoizedState;se===null?p.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:F,tail:x,tailMode:W}:(se.isBackwards=v,se.rendering=null,se.renderingStartTime=0,se.last=F,se.tail=x,se.tailMode=W)}function Fd(p,v,x){var F=v.pendingProps,W=F.revealOrder,se=F.tail;if(fl(p,v,F.children,x),F=Ds.current,(F&2)!==0)F=F&1|2,v.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=v.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&Hp(p,x,v);else if(p.tag===19)Hp(p,x,v);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===v)break e;for(;p.sibling===null;){if(p.return===null||p.return===v)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}F&=1}switch(ve(Ds,F),W){case"forwards":for(x=v.child,W=null;x!==null;)p=x.alternate,p!==null&&Up(p)===null&&(W=x),x=x.sibling;x=W,x===null?(W=v.child,v.child=null):(W=x.sibling,x.sibling=null),$p(v,!1,W,x,se);break;case"backwards":for(x=null,W=v.child,v.child=null;W!==null;){if(p=W.alternate,p!==null&&Up(p)===null){v.child=W;break}p=W.sibling,W.sibling=x,x=W,W=p}$p(v,!0,x,null,se);break;case"together":$p(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function vc(p,v,x){if(p!==null&&(v.dependencies=p.dependencies),Ki|=v.lanes,(x&v.childLanes)===0)if(p!==null){if(rp(p,v,x,!1),(x&v.childLanes)===0)return null}else return null;if(p!==null&&v.child!==p.child)throw Error(r(153));if(v.child!==null){for(p=v.child,x=Sa(p,p.pendingProps),v.child=x,x.return=v;p.sibling!==null;)p=p.sibling,x=x.sibling=Sa(p,p.pendingProps),x.return=v;x.sibling=null}return v.child}function ms(p,v){return(p.lanes&v)!==0?!0:(p=p.dependencies,!!(p!==null&&Rf(p)))}function Xc(p,v,x){switch(v.tag){case 3:la(v,v.stateNode.containerInfo),Jc(v,eo,p.memoizedState.cache),Ih();break;case 27:case 5:vr(v);break;case 4:la(v,v.stateNode.containerInfo);break;case 10:Jc(v,v.type,v.memoizedProps.value);break;case 13:var F=v.memoizedState;if(F!==null)return F.dehydrated!==null?(jc(v),v.flags|=128,null):(x&v.child.childLanes)!==0?Dy(p,v,x):(jc(v),p=vc(p,v,x),p!==null?p.sibling:null);jc(v);break;case 19:var W=(p.flags&128)!==0;if(F=(x&v.childLanes)!==0,F||(rp(p,v,x,!1),F=(x&v.childLanes)!==0),W){if(F)return Fd(p,v,x);v.flags|=128}if(W=v.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),ve(Ds,Ds.current),F)break;return null;case 22:case 23:return v.lanes=0,Zp(p,v,x);case 24:Jc(v,eo,p.memoizedState.cache)}return vc(p,v,x)}function tp(p,v,x){if(p!==null)if(p.memoizedProps!==v.pendingProps)il=!0;else{if(!ms(p,x)&&(v.flags&128)===0)return il=!1,Xc(p,v,x);il=(p.flags&131072)!==0}else il=!1,Ai&&(v.flags&1048576)!==0&&Ip(v,zh,v.index);switch(v.lanes=0,v.tag){case 16:e:{p=v.pendingProps;var F=v.elementType,W=F._init;if(F=W(F._payload),v.type=F,typeof F=="function")ua(F)?(p=xu(F,p),v.tag=1,v=$g(null,v,F,p,x)):(v.tag=0,v=Qf(null,v,F,p,x));else{if(F!=null){if(W=F.$$typeof,W===q){v.tag=11,v=jg(null,v,F,p,x);break e}else if(W===Q){v.tag=14,v=Zg(null,v,F,p,x);break e}}throw v=Ae(F)||F,Error(r(306,v,""))}}return v;case 0:return Qf(p,v,v.type,v.pendingProps,x);case 1:return F=v.type,W=xu(F,v.pendingProps),$g(p,v,F,W,x);case 3:e:{if(la(v,v.stateNode.containerInfo),p===null)throw Error(r(387));var se=v.pendingProps;W=v.memoizedState,F=W.element,Xg(p,v),Kp(v,se,null,x);var Fe=v.memoizedState;if(se=Fe.cache,Jc(v,eo,se),se!==W.cache&&Gm(v,[eo],x,!0),gh(),se=Fe.element,W.isDehydrated)if(W={element:se,isDehydrated:!1,cache:Fe.cache},v.updateQueue.baseState=W,v.memoizedState=W,v.flags&256){v=C0(p,v,se,x);break e}else if(se!==F){F=es(Error(r(424)),v),Ed(F),v=C0(p,v,se,x);break e}else for(qi=Nu(v.stateNode.containerInfo.firstChild),el=v,Ai=!0,Xl=null,_u=!0,x=gf(v,null,se,x),v.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Ih(),se===F){v=vc(p,v,x);break e}fl(p,v,se,x)}v=v.child}return v;case 26:return pl(p,v),p===null?(x=f1(v.type,null,v.pendingProps,null))?v.memoizedState=x:Ai||(x=v.type,p=v.pendingProps,F=Hy(Ea.current).createElement(x),F[Ht]=v,F[Zt]=p,Co(F,x,p),Hr(F),v.stateNode=F):v.memoizedState=f1(v.type,p.memoizedProps,v.pendingProps,p.memoizedState),null;case 27:return vr(v),p===null&&Ai&&(F=v.stateNode=uA(v.type,v.pendingProps,Ea.current),el=v,_u=!0,qi=Nu(F.firstChild)),F=v.pendingProps.children,p!==null||Ai?fl(p,v,F,x):v.child=Bc(v,null,F,x),pl(p,v),v.child;case 5:return p===null&&Ai&&((W=F=qi)&&(F=rP(F,v.type,v.pendingProps,_u),F!==null?(v.stateNode=F,el=v,qi=Nu(F.firstChild),_u=!1,W=!0):W=!1),W||yc(v)),vr(v),W=v.type,se=v.pendingProps,Fe=p!==null?p.memoizedProps:null,F=se.children,F0(W,se)?F=null:Fe!==null&&F0(W,Fe)&&(v.flags|=32),v.memoizedState!==null&&(W=bi(p,v,Hi,null,null,x),Yy._currentValue=W),pl(p,v),fl(p,v,F,x),v.child;case 6:return p===null&&Ai&&((p=x=qi)&&(x=nP(x,v.pendingProps,_u),x!==null?(v.stateNode=x,el=v,qi=null,p=!0):p=!1),p||yc(v)),null;case 13:return Dy(p,v,x);case 4:return la(v,v.stateNode.containerInfo),F=v.pendingProps,p===null?v.child=Bc(v,null,F,x):fl(p,v,F,x),v.child;case 11:return jg(p,v,v.type,v.pendingProps,x);case 7:return fl(p,v,v.pendingProps,x),v.child;case 8:return fl(p,v,v.pendingProps.children,x),v.child;case 12:return fl(p,v,v.pendingProps.children,x),v.child;case 10:return F=v.pendingProps,Jc(v,v.type,F.value),fl(p,v,F.children,x),v.child;case 9:return W=v.type._context,F=v.pendingProps.children,wc(v),W=$s(W),F=F(W),v.flags|=1,fl(p,v,F,x),v.child;case 14:return Zg(p,v,v.type,v.pendingProps,x);case 15:return qg(p,v,v.type,v.pendingProps,x);case 19:return Fd(p,v,x);case 22:return Zp(p,v,x);case 24:return wc(v),F=$s(eo),p===null?(W=Jt(),W===null&&(W=Fr,se=Uh(),W.pooledCache=se,se.refCount++,se!==null&&(W.pooledCacheLanes|=x),W=se),v.memoizedState={parent:F,cache:W},yh(v),Jc(v,eo,W)):((p.lanes&x)!==0&&(Xg(p,v),Kp(v,null,null,x),gh()),W=p.memoizedState,se=v.memoizedState,W.parent!==F?(W={parent:F,cache:F},v.memoizedState=W,v.lanes===0&&(v.memoizedState=v.updateQueue.baseState=W),Jc(v,eo,F)):(F=se.cache,Jc(v,eo,F),F!==W.cache&&Gm(v,[eo],x,!0))),fl(p,v,v.pendingProps.children,x),v.child;case 29:throw v.pendingProps}throw Error(r(156,v.tag))}var ap=dt(null),wf=null,mh=null;function Jc(p,v,x){ve(ap,v._currentValue),v._currentValue=x}function Ud(p){p._currentValue=ap.current,pt(ap)}function Yg(p,v,x){for(;p!==null;){var F=p.alternate;if((p.childLanes&v)!==v?(p.childLanes|=v,F!==null&&(F.childLanes|=v)):F!==null&&(F.childLanes&v)!==v&&(F.childLanes|=v),p===x)break;p=p.return}}function Gm(p,v,x,F){var W=p.child;for(W!==null&&(W.return=p);W!==null;){var se=W.dependencies;if(se!==null){var Fe=W.child;se=se.firstContext;e:for(;se!==null;){var ut=se;se=W;for(var Ft=0;Ft<v.length;Ft++)if(ut.context===v[Ft]){se.lanes|=x,ut=se.alternate,ut!==null&&(ut.lanes|=x),Yg(se.return,x,p),F||(Fe=null);break e}se=ut.next}}else if(W.tag===18){if(Fe=W.return,Fe===null)throw Error(r(341));Fe.lanes|=x,se=Fe.alternate,se!==null&&(se.lanes|=x),Yg(Fe,x,p),Fe=null}else Fe=W.child;if(Fe!==null)Fe.return=W;else for(Fe=W;Fe!==null;){if(Fe===p){Fe=null;break}if(W=Fe.sibling,W!==null){W.return=Fe.return,Fe=W;break}Fe=Fe.return}W=Fe}}function rp(p,v,x,F){p=null;for(var W=v,se=!1;W!==null;){if(!se){if((W.flags&524288)!==0)se=!0;else if((W.flags&262144)!==0)break}if(W.tag===10){var Fe=W.alternate;if(Fe===null)throw Error(r(387));if(Fe=Fe.memoizedProps,Fe!==null){var ut=W.type;Os(W.pendingProps.value,Fe.value)||(p!==null?p.push(ut):p=[ut])}}else if(W===Bt.current){if(Fe=W.alternate,Fe===null)throw Error(r(387));Fe.memoizedState.memoizedState!==W.memoizedState.memoizedState&&(p!==null?p.push(Yy):p=[Yy])}W=W.return}p!==null&&Gm(v,p,x,F),v.flags|=262144}function Rf(p){for(p=p.firstContext;p!==null;){if(!Os(p.context._currentValue,p.memoizedValue))return!0;p=p.next}return!1}function wc(p){wf=p,mh=null,p=p.dependencies,p!==null&&(p.firstContext=null)}function $s(p){return jh(wf,p)}function $u(p,v){return wf===null&&wc(p),jh(p,v)}function jh(p,v){var x=v._currentValue;if(v={context:v,memoizedValue:x,next:null},mh===null){if(p===null)throw Error(r(308));mh=v,p.dependencies={lanes:0,firstContext:v},p.flags|=524288}else mh=mh.next=v;return x}var Ku=!1;function yh(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xg(p,v){p=p.updateQueue,v.updateQueue===p&&(v.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,callbacks:null})}function Tf(p){return{lane:p,tag:0,payload:null,callback:null,next:null}}function Sf(p,v,x){var F=p.updateQueue;if(F===null)return null;if(F=F.shared,(xr&2)!==0){var W=F.pending;return W===null?v.next=v:(v.next=W.next,W.next=v),F.pending=v,v=tn(p),Yl(p,null,x),v}return Wl(p,F,v,x),tn(p)}function Cf(p,v,x){if(v=v.updateQueue,v!==null&&(v=v.shared,(x&4194176)!==0)){var F=v.lanes;F&=p.pendingLanes,x|=F,v.lanes=x,mt(p,x)}}function My(p,v){var x=p.updateQueue,F=p.alternate;if(F!==null&&(F=F.updateQueue,x===F)){var W=null,se=null;if(x=x.firstBaseUpdate,x!==null){do{var Fe={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};se===null?W=se=Fe:se=se.next=Fe,x=x.next}while(x!==null);se===null?W=se=v:se=se.next=v}else W=se=v;x={baseState:F.baseState,firstBaseUpdate:W,lastBaseUpdate:se,shared:F.shared,callbacks:F.callbacks},p.updateQueue=x;return}p=x.lastBaseUpdate,p===null?x.firstBaseUpdate=v:p.next=v,x.lastBaseUpdate=v}var ml=!1;function gh(){if(ml){var p=je;if(p!==null)throw p}}function Kp(p,v,x,F){ml=!1;var W=p.updateQueue;Ku=!1;var se=W.firstBaseUpdate,Fe=W.lastBaseUpdate,ut=W.shared.pending;if(ut!==null){W.shared.pending=null;var Ft=ut,oa=Ft.next;Ft.next=null,Fe===null?se=oa:Fe.next=oa,Fe=Ft;var ja=p.alternate;ja!==null&&(ja=ja.updateQueue,ut=ja.lastBaseUpdate,ut!==Fe&&(ut===null?ja.firstBaseUpdate=oa:ut.next=oa,ja.lastBaseUpdate=Ft))}if(se!==null){var rr=W.baseState;Fe=0,ja=oa=Ft=null,ut=se;do{var ba=ut.lane&-536870913,Za=ba!==ut.lane;if(Za?(dr&ba)===ba:(F&ba)===ba){ba!==0&&ba===Ee&&(ml=!0),ja!==null&&(ja=ja.next={lane:0,tag:ut.tag,payload:ut.payload,callback:null,next:null});e:{var Yr=p,Jn=ut;ba=v;var qo=x;switch(Jn.tag){case 1:if(Yr=Jn.payload,typeof Yr=="function"){rr=Yr.call(qo,rr,ba);break e}rr=Yr;break e;case 3:Yr.flags=Yr.flags&-65537|128;case 0:if(Yr=Jn.payload,ba=typeof Yr=="function"?Yr.call(qo,rr,ba):Yr,ba==null)break e;rr=Oe({},rr,ba);break e;case 2:Ku=!0}}ba=ut.callback,ba!==null&&(p.flags|=64,Za&&(p.flags|=8192),Za=W.callbacks,Za===null?W.callbacks=[ba]:Za.push(ba))}else Za={lane:ba,tag:ut.tag,payload:ut.payload,callback:ut.callback,next:null},ja===null?(oa=ja=Za,Ft=rr):ja=ja.next=Za,Fe|=ba;if(ut=ut.next,ut===null){if(ut=W.shared.pending,ut===null)break;Za=ut,ut=Za.next,Za.next=null,W.lastBaseUpdate=Za,W.shared.pending=null}}while(!0);ja===null&&(Ft=rr),W.baseState=Ft,W.firstBaseUpdate=oa,W.lastBaseUpdate=ja,se===null&&(W.shared.lanes=0),Ki|=Fe,p.lanes=Fe,p.memoizedState=rr}}function Jg(p,v){if(typeof p!="function")throw Error(r(191,p));p.call(v)}function np(p,v){var x=p.callbacks;if(x!==null)for(p.callbacks=null,p=0;p<x.length;p++)Jg(x[p],v)}function bf(p,v){try{var x=v.updateQueue,F=x!==null?x.lastEffect:null;if(F!==null){var W=F.next;x=W;do{if((x.tag&p)===p){F=void 0;var se=x.create,Fe=x.inst;F=se(),Fe.destroy=F}x=x.next}while(x!==W)}}catch(ut){Ms(v,v.return,ut)}}function Bo(p,v,x){try{var F=v.updateQueue,W=F!==null?F.lastEffect:null;if(W!==null){var se=W.next;F=se;do{if((F.tag&p)===p){var Fe=F.inst,ut=Fe.destroy;if(ut!==void 0){Fe.destroy=void 0,W=v;var Ft=x;try{ut()}catch(oa){Ms(W,Ft,oa)}}}F=F.next}while(F!==se)}}catch(oa){Ms(v,v.return,oa)}}function Wu(p){var v=p.updateQueue;if(v!==null){var x=p.stateNode;try{np(v,x)}catch(F){Ms(p,p.return,F)}}}function ip(p,v,x){x.props=xu(p.type,p.memoizedProps),x.state=p.memoizedState;try{x.componentWillUnmount()}catch(F){Ms(p,v,F)}}function Rc(p,v){try{var x=p.ref;if(x!==null){var F=p.stateNode;switch(p.tag){case 26:case 27:case 5:var W=F;break;default:W=F}typeof x=="function"?p.refCleanup=x(W):x.current=W}}catch(se){Ms(p,v,se)}}function sl(p,v){var x=p.ref,F=p.refCleanup;if(x!==null)if(typeof F=="function")try{F()}catch(W){Ms(p,v,W)}finally{p.refCleanup=null,p=p.alternate,p!=null&&(p.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(W){Ms(p,v,W)}else x.current=null}function Iy(p){var v=p.type,x=p.memoizedProps,F=p.stateNode;try{e:switch(v){case"button":case"input":case"select":case"textarea":x.autoFocus&&F.focus();break e;case"img":x.src?F.src=x.src:x.srcSet&&(F.srcset=x.srcSet)}}catch(W){Ms(p,p.return,W)}}function Ln(p,v,x){try{var F=p.stateNode;eP(F,p.type,x,v),F[Zt]=v}catch(W){Ms(p,p.return,W)}}function Zh(p){return p.tag===5||p.tag===3||p.tag===26||p.tag===27||p.tag===4}function Qg(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||Zh(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==27&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function eA(p,v,x){var F=p.tag;if(F===5||F===6)p=p.stateNode,v?x.nodeType===8?x.parentNode.insertBefore(p,v):x.insertBefore(p,v):(x.nodeType===8?(v=x.parentNode,v.insertBefore(p,x)):(v=x,v.appendChild(p)),x=x._reactRootContainer,x!=null||v.onclick!==null||(v.onclick=qy));else if(F!==4&&F!==27&&(p=p.child,p!==null))for(eA(p,v,x),p=p.sibling;p!==null;)eA(p,v,x),p=p.sibling}function sp(p,v,x){var F=p.tag;if(F===5||F===6)p=p.stateNode,v?x.insertBefore(p,v):x.appendChild(p);else if(F!==4&&F!==27&&(p=p.child,p!==null))for(sp(p,v,x),p=p.sibling;p!==null;)sp(p,v,x),p=p.sibling}var yl=!1,xi=!1,Go=!1,Pu=typeof WeakSet=="function"?WeakSet:Set,wi=null,Ly=!1;function Eu(p,v){if(p=p.containerInfo,Bd=rm,p=Sl(p),Ro(p)){if("selectionStart"in p)var x={start:p.selectionStart,end:p.selectionEnd};else e:{x=(x=p.ownerDocument)&&x.defaultView||window;var F=x.getSelection&&x.getSelection();if(F&&F.rangeCount!==0){x=F.anchorNode;var W=F.anchorOffset,se=F.focusNode;F=F.focusOffset;try{x.nodeType,se.nodeType}catch{x=null;break e}var Fe=0,ut=-1,Ft=-1,oa=0,ja=0,rr=p,ba=null;t:for(;;){for(var Za;rr!==x||W!==0&&rr.nodeType!==3||(ut=Fe+W),rr!==se||F!==0&&rr.nodeType!==3||(Ft=Fe+F),rr.nodeType===3&&(Fe+=rr.nodeValue.length),(Za=rr.firstChild)!==null;)ba=rr,rr=Za;for(;;){if(rr===p)break t;if(ba===x&&++oa===W&&(ut=Fe),ba===se&&++ja===F&&(Ft=Fe),(Za=rr.nextSibling)!==null)break;rr=ba,ba=rr.parentNode}rr=Za}x=ut===-1||Ft===-1?null:{start:ut,end:Ft}}else x=null}x=x||{start:0,end:0}}else x=null;for(lA={focusedElem:p,selectionRange:x},rm=!1,wi=v;wi!==null;)if(v=wi,p=v.child,(v.subtreeFlags&1028)!==0&&p!==null)p.return=v,wi=p;else for(;wi!==null;){switch(v=wi,se=v.alternate,p=v.flags,v.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&se!==null){p=void 0,x=v,W=se.memoizedProps,se=se.memoizedState,F=x.stateNode;try{var Yr=xu(x.type,W,x.elementType===x.type);p=F.getSnapshotBeforeUpdate(Yr,se),F.__reactInternalSnapshotBeforeUpdate=p}catch(Jn){Ms(x,x.return,Jn)}}break;case 3:if((p&1024)!==0){if(p=v.stateNode.containerInfo,x=p.nodeType,x===9)u1(p);else if(x===1)switch(p.nodeName){case"HEAD":case"HTML":case"BODY":u1(p);break;default:p.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=v.sibling,p!==null){p.return=v.return,wi=p;break}wi=v.return}return Yr=Ly,Ly=!1,Yr}function tA(p,v,x){var F=x.flags;switch(x.tag){case 0:case 11:case 15:te(p,x),F&4&&bf(5,x);break;case 1:if(te(p,x),F&4)if(p=x.stateNode,v===null)try{p.componentDidMount()}catch(ut){Ms(x,x.return,ut)}else{var W=xu(x.type,v.memoizedProps);v=v.memoizedState;try{p.componentDidUpdate(W,v,p.__reactInternalSnapshotBeforeUpdate)}catch(ut){Ms(x,x.return,ut)}}F&64&&Wu(x),F&512&&Rc(x,x.return);break;case 3:if(te(p,x),F&64&&(F=x.updateQueue,F!==null)){if(p=null,x.child!==null)switch(x.child.tag){case 27:case 5:p=x.child.stateNode;break;case 1:p=x.child.stateNode}try{np(F,p)}catch(ut){Ms(x,x.return,ut)}}break;case 26:te(p,x),F&512&&Rc(x,x.return);break;case 27:case 5:te(p,x),v===null&&F&4&&Iy(x),F&512&&Rc(x,x.return);break;case 12:te(p,x);break;case 13:te(p,x),F&4&&A(p,x);break;case 22:if(W=x.memoizedState!==null||yl,!W){v=v!==null&&v.memoizedState!==null||xi;var se=yl,Fe=xi;yl=W,(xi=v)&&!Fe?ce(p,x,(x.subtreeFlags&8772)!==0):te(p,x),yl=se,xi=Fe}F&512&&(x.memoizedProps.mode==="manual"?Rc(x,x.return):sl(x,x.return));break;default:te(p,x)}}function qh(p){var v=p.alternate;v!==null&&(p.alternate=null,qh(v)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(v=p.stateNode,v!==null&&Gr(v)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}var jo=null,g=!1;function o(p,v,x){for(x=x.child;x!==null;)c(p,v,x),x=x.sibling}function c(p,v,x){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(yr,x)}catch{}switch(x.tag){case 26:xi||sl(x,v),o(p,v,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:xi||sl(x,v);var F=jo,W=g;for(jo=x.stateNode,o(p,v,x),x=x.stateNode,v=x.attributes;v.length;)x.removeAttributeNode(v[0]);Gr(x),jo=F,g=W;break;case 5:xi||sl(x,v);case 6:W=jo;var se=g;if(jo=null,o(p,v,x),jo=W,g=se,jo!==null)if(g)try{p=jo,F=x.stateNode,p.nodeType===8?p.parentNode.removeChild(F):p.removeChild(F)}catch(Fe){Ms(x,v,Fe)}else try{jo.removeChild(x.stateNode)}catch(Fe){Ms(x,v,Fe)}break;case 18:jo!==null&&(g?(v=jo,x=x.stateNode,v.nodeType===8?l1(v.parentNode,x):v.nodeType===1&&l1(v,x),gA(v)):l1(jo,x.stateNode));break;case 4:F=jo,W=g,jo=x.stateNode.containerInfo,g=!0,o(p,v,x),jo=F,g=W;break;case 0:case 11:case 14:case 15:xi||Bo(2,x,v),xi||Bo(4,x,v),o(p,v,x);break;case 1:xi||(sl(x,v),F=x.stateNode,typeof F.componentWillUnmount=="function"&&ip(x,v,F)),o(p,v,x);break;case 21:o(p,v,x);break;case 22:xi||sl(x,v),xi=(F=xi)||x.memoizedState!==null,o(p,v,x),xi=F;break;default:o(p,v,x)}}function A(p,v){if(v.memoizedState===null&&(p=v.alternate,p!==null&&(p=p.memoizedState,p!==null&&(p=p.dehydrated,p!==null))))try{gA(p)}catch(x){Ms(v,v.return,x)}}function R(p){switch(p.tag){case 13:case 19:var v=p.stateNode;return v===null&&(v=p.stateNode=new Pu),v;case 22:return p=p.stateNode,v=p._retryCache,v===null&&(v=p._retryCache=new Pu),v;default:throw Error(r(435,p.tag))}}function C(p,v){var x=R(p);v.forEach(function(F){var W=X2.bind(null,p,F);x.has(F)||(x.add(F),F.then(W,W))})}function P(p,v){var x=v.deletions;if(x!==null)for(var F=0;F<x.length;F++){var W=x[F],se=p,Fe=v,ut=Fe;e:for(;ut!==null;){switch(ut.tag){case 27:case 5:jo=ut.stateNode,g=!1;break e;case 3:jo=ut.stateNode.containerInfo,g=!0;break e;case 4:jo=ut.stateNode.containerInfo,g=!0;break e}ut=ut.return}if(jo===null)throw Error(r(160));c(se,Fe,W),jo=null,g=!1,se=W.alternate,se!==null&&(se.return=null),W.return=null}if(v.subtreeFlags&13878)for(v=v.child;v!==null;)j(v,p),v=v.sibling}var L=null;function j(p,v){var x=p.alternate,F=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:P(v,p),Z(p),F&4&&(Bo(3,p,p.return),bf(3,p),Bo(5,p,p.return));break;case 1:P(v,p),Z(p),F&512&&(xi||x===null||sl(x,x.return)),F&64&&yl&&(p=p.updateQueue,p!==null&&(F=p.callbacks,F!==null&&(x=p.shared.hiddenCallbacks,p.shared.hiddenCallbacks=x===null?F:x.concat(F))));break;case 26:var W=L;if(P(v,p),Z(p),F&512&&(xi||x===null||sl(x,x.return)),F&4){var se=x!==null?x.memoizedState:null;if(F=p.memoizedState,x===null)if(F===null)if(p.stateNode===null){e:{F=p.type,x=p.memoizedProps,W=W.ownerDocument||W;t:switch(F){case"title":se=W.getElementsByTagName("title")[0],(!se||se[Vr]||se[Ht]||se.namespaceURI==="http://www.w3.org/2000/svg"||se.hasAttribute("itemprop"))&&(se=W.createElement(F),W.head.insertBefore(se,W.querySelector("head > title"))),Co(se,F,x),se[Ht]=p,Hr(se),F=se;break e;case"link":var Fe=p1("link","href",W).get(F+(x.href||""));if(Fe){for(var ut=0;ut<Fe.length;ut++)if(se=Fe[ut],se.getAttribute("href")===(x.href==null?null:x.href)&&se.getAttribute("rel")===(x.rel==null?null:x.rel)&&se.getAttribute("title")===(x.title==null?null:x.title)&&se.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){Fe.splice(ut,1);break t}}se=W.createElement(F),Co(se,F,x),W.head.appendChild(se);break;case"meta":if(Fe=p1("meta","content",W).get(F+(x.content||""))){for(ut=0;ut<Fe.length;ut++)if(se=Fe[ut],se.getAttribute("content")===(x.content==null?null:""+x.content)&&se.getAttribute("name")===(x.name==null?null:x.name)&&se.getAttribute("property")===(x.property==null?null:x.property)&&se.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&se.getAttribute("charset")===(x.charSet==null?null:x.charSet)){Fe.splice(ut,1);break t}}se=W.createElement(F),Co(se,F,x),W.head.appendChild(se);break;default:throw Error(r(468,F))}se[Ht]=p,Hr(se),F=se}p.stateNode=F}else m1(W,p.type,p.stateNode);else p.stateNode=up(W,F,p.memoizedProps);else se!==F?(se===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):se.count--,F===null?m1(W,p.type,p.stateNode):up(W,F,p.memoizedProps)):F===null&&p.stateNode!==null&&Ln(p,p.memoizedProps,x.memoizedProps)}break;case 27:if(F&4&&p.alternate===null){W=p.stateNode,se=p.memoizedProps;try{for(var Ft=W.firstChild;Ft;){var oa=Ft.nextSibling,ja=Ft.nodeName;Ft[Vr]||ja==="HEAD"||ja==="BODY"||ja==="SCRIPT"||ja==="STYLE"||ja==="LINK"&&Ft.rel.toLowerCase()==="stylesheet"||W.removeChild(Ft),Ft=oa}for(var rr=p.type,ba=W.attributes;ba.length;)W.removeAttributeNode(ba[0]);Co(W,rr,se),W[Ht]=p,W[Zt]=se}catch(Yr){Ms(p,p.return,Yr)}}case 5:if(P(v,p),Z(p),F&512&&(xi||x===null||sl(x,x.return)),p.flags&32){W=p.stateNode;try{Fu(W,"")}catch(Yr){Ms(p,p.return,Yr)}}F&4&&p.stateNode!=null&&(W=p.memoizedProps,Ln(p,W,x!==null?x.memoizedProps:W)),F&1024&&(Go=!0);break;case 6:if(P(v,p),Z(p),F&4){if(p.stateNode===null)throw Error(r(162));F=p.memoizedProps,x=p.stateNode;try{x.nodeValue=F}catch(Yr){Ms(p,p.return,Yr)}}break;case 3:if(am=null,W=L,L=$m(v.containerInfo),P(v,p),L=W,Z(p),F&4&&x!==null&&x.memoizedState.isDehydrated)try{gA(v.containerInfo)}catch(Yr){Ms(p,p.return,Yr)}Go&&(Go=!1,K(p));break;case 4:F=L,L=$m(p.stateNode.containerInfo),P(v,p),Z(p),L=F;break;case 12:P(v,p),Z(p);break;case 13:P(v,p),Z(p),p.child.flags&8192&&p.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(oi=ka()),F&4&&(F=p.updateQueue,F!==null&&(p.updateQueue=null,C(p,F)));break;case 22:if(F&512&&(xi||x===null||sl(x,x.return)),Ft=p.memoizedState!==null,oa=x!==null&&x.memoizedState!==null,ja=yl,rr=xi,yl=ja||Ft,xi=rr||oa,P(v,p),xi=rr,yl=ja,Z(p),v=p.stateNode,v._current=p,v._visibility&=-3,v._visibility|=v._pendingVisibility&2,F&8192&&(v._visibility=Ft?v._visibility&-2:v._visibility|1,Ft&&(v=yl||xi,x===null||oa||v||ae(p)),p.memoizedProps===null||p.memoizedProps.mode!=="manual"))e:for(x=null,v=p;;){if(v.tag===5||v.tag===26||v.tag===27){if(x===null){oa=x=v;try{if(W=oa.stateNode,Ft)se=W.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{Fe=oa.stateNode,ut=oa.memoizedProps.style;var Za=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;Fe.style.display=Za==null||typeof Za=="boolean"?"":(""+Za).trim()}}catch(Yr){Ms(oa,oa.return,Yr)}}}else if(v.tag===6){if(x===null){oa=v;try{oa.stateNode.nodeValue=Ft?"":oa.memoizedProps}catch(Yr){Ms(oa,oa.return,Yr)}}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===p)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===p)break e;for(;v.sibling===null;){if(v.return===null||v.return===p)break e;x===v&&(x=null),v=v.return}x===v&&(x=null),v.sibling.return=v.return,v=v.sibling}F&4&&(F=p.updateQueue,F!==null&&(x=F.retryQueue,x!==null&&(F.retryQueue=null,C(p,x))));break;case 19:P(v,p),Z(p),F&4&&(F=p.updateQueue,F!==null&&(p.updateQueue=null,C(p,F)));break;case 21:break;default:P(v,p),Z(p)}}function Z(p){var v=p.flags;if(v&2){try{if(p.tag!==27){e:{for(var x=p.return;x!==null;){if(Zh(x)){var F=x;break e}x=x.return}throw Error(r(160))}switch(F.tag){case 27:var W=F.stateNode,se=Qg(p);sp(p,se,W);break;case 5:var Fe=F.stateNode;F.flags&32&&(Fu(Fe,""),F.flags&=-33);var ut=Qg(p);sp(p,ut,Fe);break;case 3:case 4:var Ft=F.stateNode.containerInfo,oa=Qg(p);eA(p,oa,Ft);break;default:throw Error(r(161))}}}catch(ja){Ms(p,p.return,ja)}p.flags&=-3}v&4096&&(p.flags&=-4097)}function K(p){if(p.subtreeFlags&1024)for(p=p.child;p!==null;){var v=p;K(v),v.tag===5&&v.flags&1024&&v.stateNode.reset(),p=p.sibling}}function te(p,v){if(v.subtreeFlags&8772)for(v=v.child;v!==null;)tA(p,v.alternate,v),v=v.sibling}function ae(p){for(p=p.child;p!==null;){var v=p;switch(v.tag){case 0:case 11:case 14:case 15:Bo(4,v,v.return),ae(v);break;case 1:sl(v,v.return);var x=v.stateNode;typeof x.componentWillUnmount=="function"&&ip(v,v.return,x),ae(v);break;case 26:case 27:case 5:sl(v,v.return),ae(v);break;case 22:sl(v,v.return),v.memoizedState===null&&ae(v);break;default:ae(v)}p=p.sibling}}function ce(p,v,x){for(x=x&&(v.subtreeFlags&8772)!==0,v=v.child;v!==null;){var F=v.alternate,W=p,se=v,Fe=se.flags;switch(se.tag){case 0:case 11:case 15:ce(W,se,x),bf(4,se);break;case 1:if(ce(W,se,x),F=se,W=F.stateNode,typeof W.componentDidMount=="function")try{W.componentDidMount()}catch(oa){Ms(F,F.return,oa)}if(F=se,W=F.updateQueue,W!==null){var ut=F.stateNode;try{var Ft=W.shared.hiddenCallbacks;if(Ft!==null)for(W.shared.hiddenCallbacks=null,W=0;W<Ft.length;W++)Jg(Ft[W],ut)}catch(oa){Ms(F,F.return,oa)}}x&&Fe&64&&Wu(se),Rc(se,se.return);break;case 26:case 27:case 5:ce(W,se,x),x&&F===null&&Fe&4&&Iy(se),Rc(se,se.return);break;case 12:ce(W,se,x);break;case 13:ce(W,se,x),x&&Fe&4&&A(W,se);break;case 22:se.memoizedState===null&&ce(W,se,x),Rc(se,se.return);break;default:ce(W,se,x)}v=v.sibling}}function Ce(p,v){var x=null;p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),p=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(p=v.memoizedState.cachePool.pool),p!==x&&(p!=null&&p.refCount++,x!=null&&G(x))}function Re(p,v){p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&G(p))}function Pe(p,v,x,F){if(v.subtreeFlags&10256)for(v=v.child;v!==null;)Ne(p,v,x,F),v=v.sibling}function Ne(p,v,x,F){var W=v.flags;switch(v.tag){case 0:case 11:case 15:Pe(p,v,x,F),W&2048&&bf(9,v);break;case 3:Pe(p,v,x,F),W&2048&&(p=null,v.alternate!==null&&(p=v.alternate.memoizedState.cache),v=v.memoizedState.cache,v!==p&&(v.refCount++,p!=null&&G(p)));break;case 12:if(W&2048){Pe(p,v,x,F),p=v.stateNode;try{var se=v.memoizedProps,Fe=se.id,ut=se.onPostCommit;typeof ut=="function"&&ut(Fe,v.alternate===null?"mount":"update",p.passiveEffectDuration,-0)}catch(Ft){Ms(v,v.return,Ft)}}else Pe(p,v,x,F);break;case 23:break;case 22:se=v.stateNode,v.memoizedState!==null?se._visibility&4?Pe(p,v,x,F):et(p,v):se._visibility&4?Pe(p,v,x,F):(se._visibility|=4,Ge(p,v,x,F,(v.subtreeFlags&10256)!==0)),W&2048&&Ce(v.alternate,v);break;case 24:Pe(p,v,x,F),W&2048&&Re(v.alternate,v);break;default:Pe(p,v,x,F)}}function Ge(p,v,x,F,W){for(W=W&&(v.subtreeFlags&10256)!==0,v=v.child;v!==null;){var se=p,Fe=v,ut=x,Ft=F,oa=Fe.flags;switch(Fe.tag){case 0:case 11:case 15:Ge(se,Fe,ut,Ft,W),bf(8,Fe);break;case 23:break;case 22:var ja=Fe.stateNode;Fe.memoizedState!==null?ja._visibility&4?Ge(se,Fe,ut,Ft,W):et(se,Fe):(ja._visibility|=4,Ge(se,Fe,ut,Ft,W)),W&&oa&2048&&Ce(Fe.alternate,Fe);break;case 24:Ge(se,Fe,ut,Ft,W),W&&oa&2048&&Re(Fe.alternate,Fe);break;default:Ge(se,Fe,ut,Ft,W)}v=v.sibling}}function et(p,v){if(v.subtreeFlags&10256)for(v=v.child;v!==null;){var x=p,F=v,W=F.flags;switch(F.tag){case 22:et(x,F),W&2048&&Ce(F.alternate,F);break;case 24:et(x,F),W&2048&&Re(F.alternate,F);break;default:et(x,F)}v=v.sibling}}var Xe=8192;function ct(p){if(p.subtreeFlags&Xe)for(p=p.child;p!==null;)nt(p),p=p.sibling}function nt(p){switch(p.tag){case 26:ct(p),p.flags&Xe&&p.memoizedState!==null&&XT(L,p.memoizedState,p.memoizedProps);break;case 5:ct(p);break;case 3:case 4:var v=L;L=$m(p.stateNode.containerInfo),ct(p),L=v;break;case 22:p.memoizedState===null&&(v=p.alternate,v!==null&&v.memoizedState!==null?(v=Xe,Xe=16777216,ct(p),Xe=v):ct(p));break;default:ct(p)}}function it(p){var v=p.alternate;if(v!==null&&(p=v.child,p!==null)){v.child=null;do v=p.sibling,p.sibling=null,p=v;while(p!==null)}}function st(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var x=0;x<v.length;x++){var F=v[x];wi=F,Yt(F,p)}it(p)}if(p.subtreeFlags&10256)for(p=p.child;p!==null;)yt(p),p=p.sibling}function yt(p){switch(p.tag){case 0:case 11:case 15:st(p),p.flags&2048&&Bo(9,p,p.return);break;case 3:st(p);break;case 12:st(p);break;case 22:var v=p.stateNode;p.memoizedState!==null&&v._visibility&4&&(p.return===null||p.return.tag!==13)?(v._visibility&=-5,wt(p)):st(p);break;default:st(p)}}function wt(p){var v=p.deletions;if((p.flags&16)!==0){if(v!==null)for(var x=0;x<v.length;x++){var F=v[x];wi=F,Yt(F,p)}it(p)}for(p=p.child;p!==null;){switch(v=p,v.tag){case 0:case 11:case 15:Bo(8,v,v.return),wt(v);break;case 22:x=v.stateNode,x._visibility&4&&(x._visibility&=-5,wt(v));break;default:wt(v)}p=p.sibling}}function Yt(p,v){for(;wi!==null;){var x=wi;switch(x.tag){case 0:case 11:case 15:Bo(8,x,v);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var F=x.memoizedState.cachePool.pool;F!=null&&F.refCount++}break;case 24:G(x.memoizedState.cache)}if(F=x.child,F!==null)F.return=x,wi=F;else e:for(x=p;wi!==null;){F=wi;var W=F.sibling,se=F.return;if(qh(F),F===x){wi=null;break e}if(W!==null){W.return=se,wi=W;break e}wi=se}}}function Lt(p,v,x,F){this.tag=p,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function aa(p,v,x,F){return new Lt(p,v,x,F)}function ua(p){return p=p.prototype,!(!p||!p.isReactComponent)}function Sa(p,v){var x=p.alternate;return x===null?(x=aa(p.tag,v,p.key,p.mode),x.elementType=p.elementType,x.type=p.type,x.stateNode=p.stateNode,x.alternate=p,p.alternate=x):(x.pendingProps=v,x.type=p.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=p.flags&31457280,x.childLanes=p.childLanes,x.lanes=p.lanes,x.child=p.child,x.memoizedProps=p.memoizedProps,x.memoizedState=p.memoizedState,x.updateQueue=p.updateQueue,v=p.dependencies,x.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},x.sibling=p.sibling,x.index=p.index,x.ref=p.ref,x.refCleanup=p.refCleanup,x}function Mt(p,v){p.flags&=31457282;var x=p.alternate;return x===null?(p.childLanes=0,p.lanes=v,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=x.childLanes,p.lanes=x.lanes,p.child=x.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=x.memoizedProps,p.memoizedState=x.memoizedState,p.updateQueue=x.updateQueue,p.type=x.type,v=x.dependencies,p.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext}),p}function ia(p,v,x,F,W,se){var Fe=0;if(F=p,typeof p=="function")ua(p)&&(Fe=1);else if(typeof p=="string")Fe=YT(p,x,ea.current)?26:p==="html"||p==="head"||p==="body"?27:5;else e:switch(p){case w:return Nt(x.children,W,se,v);case T:Fe=8,W|=24;break;case E:return p=aa(12,x,v,W|2),p.elementType=E,p.lanes=se,p;case H:return p=aa(13,x,v,W),p.elementType=H,p.lanes=se,p;case $:return p=aa(19,x,v,W),p.elementType=$,p.lanes=se,p;case de:return sa(x,W,se,v);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case z:case U:Fe=10;break e;case k:Fe=9;break e;case q:Fe=11;break e;case Q:Fe=14;break e;case ne:Fe=16,F=null;break e}Fe=29,x=Error(r(130,p===null?"null":typeof p,"")),F=null}return v=aa(Fe,x,v,W),v.elementType=p,v.type=F,v.lanes=se,v}function Nt(p,v,x,F){return p=aa(7,p,F,v),p.lanes=x,p}function sa(p,v,x,F){p=aa(22,p,F,v),p.elementType=de,p.lanes=x;var W={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var se=W._current;if(se===null)throw Error(r(456));if((W._pendingVisibility&2)===0){var Fe=Jo(se,2);Fe!==null&&(W._pendingVisibility|=2,Ol(Fe,se,2))}},attach:function(){var se=W._current;if(se===null)throw Error(r(456));if((W._pendingVisibility&2)!==0){var Fe=Jo(se,2);Fe!==null&&(W._pendingVisibility&=-3,Ol(Fe,se,2))}}};return p.stateNode=W,p}function Qt(p,v,x){return p=aa(6,p,null,v),p.lanes=x,p}function da(p,v,x){return v=aa(4,p.children!==null?p.children:[],p.key,v),v.lanes=x,v.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},v}function $t(p){p.flags|=4}function pa(p,v){if(v.type!=="stylesheet"||(v.state.loading&4)!==0)p.flags&=-16777217;else if(p.flags|=16777216,!y1(v)){if(v=xl.current,v!==null&&((dr&4194176)===dr?Zu!==null:(dr&62914560)!==dr&&(dr&536870912)===0||v!==Zu))throw vu=ih,Dm;p.flags|=8192}}function Ia(p,v){v!==null&&(p.flags|=4),p.flags&16384&&(v=p.tag!==22?Xt():536870912,p.lanes|=v,mo|=v)}function La(p,v){if(!Ai)switch(p.tailMode){case"hidden":v=p.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?p.tail=null:x.sibling=null;break;case"collapsed":x=p.tail;for(var F=null;x!==null;)x.alternate!==null&&(F=x),x=x.sibling;F===null?v||p.tail===null?p.tail=null:p.tail.sibling=null:F.sibling=null}}function Pa(p){var v=p.alternate!==null&&p.alternate.child===p.child,x=0,F=0;if(v)for(var W=p.child;W!==null;)x|=W.lanes|W.childLanes,F|=W.subtreeFlags&31457280,F|=W.flags&31457280,W.return=p,W=W.sibling;else for(W=p.child;W!==null;)x|=W.lanes|W.childLanes,F|=W.subtreeFlags,F|=W.flags,W.return=p,W=W.sibling;return p.subtreeFlags|=F,p.childLanes=x,v}function sr(p,v,x){var F=v.pendingProps;switch(Dh(v),v.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pa(v),null;case 1:return Pa(v),null;case 3:return x=v.stateNode,F=null,p!==null&&(F=p.memoizedState.cache),v.memoizedState.cache!==F&&(v.flags|=2048),Ud(eo),St(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(p===null||p.child===null)&&(Mh(v)?$t(v):p===null||p.memoizedState.isDehydrated&&(v.flags&256)===0||(v.flags|=1024,Xl!==null&&(Wp(Xl),Xl=null))),Pa(v),null;case 26:return x=v.memoizedState,p===null?($t(v),x!==null?(Pa(v),pa(v,x)):(Pa(v),v.flags&=-16777217)):x?x!==p.memoizedState?($t(v),Pa(v),pa(v,x)):(Pa(v),v.flags&=-16777217):(p.memoizedProps!==F&&$t(v),Pa(v),v.flags&=-16777217),null;case 27:Va(v),x=Ea.current;var W=v.type;if(p!==null&&v.stateNode!=null)p.memoizedProps!==F&&$t(v);else{if(!F){if(v.stateNode===null)throw Error(r(166));return Pa(v),null}p=ea.current,Mh(v)?mf(v):(p=uA(W,F,x),v.stateNode=p,$t(v))}return Pa(v),null;case 5:if(Va(v),x=v.type,p!==null&&v.stateNode!=null)p.memoizedProps!==F&&$t(v);else{if(!F){if(v.stateNode===null)throw Error(r(166));return Pa(v),null}if(p=ea.current,Mh(v))mf(v);else{switch(W=Hy(Ea.current),p){case 1:p=W.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:p=W.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":p=W.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":p=W.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":p=W.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof F.is=="string"?W.createElement("select",{is:F.is}):W.createElement("select"),F.multiple?p.multiple=!0:F.size&&(p.size=F.size);break;default:p=typeof F.is=="string"?W.createElement(x,{is:F.is}):W.createElement(x)}}p[Ht]=v,p[Zt]=F;e:for(W=v.child;W!==null;){if(W.tag===5||W.tag===6)p.appendChild(W.stateNode);else if(W.tag!==4&&W.tag!==27&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===v)break e;for(;W.sibling===null;){if(W.return===null||W.return===v)break e;W=W.return}W.sibling.return=W.return,W=W.sibling}v.stateNode=p;e:switch(Co(p,x,F),x){case"button":case"input":case"select":case"textarea":p=!!F.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&$t(v)}}return Pa(v),v.flags&=-16777217,null;case 6:if(p&&v.stateNode!=null)p.memoizedProps!==F&&$t(v);else{if(typeof F!="string"&&v.stateNode===null)throw Error(r(166));if(p=Ea.current,Mh(v)){if(p=v.stateNode,x=v.memoizedProps,F=null,W=el,W!==null)switch(W.tag){case 27:case 5:F=W.memoizedProps}p[Ht]=v,p=!!(p.nodeValue===x||F!==null&&F.suppressHydrationWarning===!0||Ef(p.nodeValue,x)),p||yc(v)}else p=Hy(p).createTextNode(F),p[Ht]=v,v.stateNode=p}return Pa(v),null;case 13:if(F=v.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(W=Mh(v),F!==null&&F.dehydrated!==null){if(p===null){if(!W)throw Error(r(318));if(W=v.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(r(317));W[Ht]=v}else Ih(),(v.flags&128)===0&&(v.memoizedState=null),v.flags|=4;Pa(v),W=!1}else Xl!==null&&(Wp(Xl),Xl=null),W=!0;if(!W)return v.flags&256?(Zc(v),v):(Zc(v),null)}if(Zc(v),(v.flags&128)!==0)return v.lanes=x,v;if(x=F!==null,p=p!==null&&p.memoizedState!==null,x){F=v.child,W=null,F.alternate!==null&&F.alternate.memoizedState!==null&&F.alternate.memoizedState.cachePool!==null&&(W=F.alternate.memoizedState.cachePool.pool);var se=null;F.memoizedState!==null&&F.memoizedState.cachePool!==null&&(se=F.memoizedState.cachePool.pool),se!==W&&(F.flags|=2048)}return x!==p&&x&&(v.child.flags|=8192),Ia(v,v.updateQueue),Pa(v),null;case 4:return St(),p===null&&M0(v.stateNode.containerInfo),Pa(v),null;case 10:return Ud(v.type),Pa(v),null;case 19:if(pt(Ds),W=v.memoizedState,W===null)return Pa(v),null;if(F=(v.flags&128)!==0,se=W.rendering,se===null)if(F)La(W,!1);else{if(Vn!==0||p!==null&&(p.flags&128)!==0)for(p=v.child;p!==null;){if(se=Up(p),se!==null){for(v.flags|=128,La(W,!1),p=se.updateQueue,v.updateQueue=p,Ia(v,p),v.subtreeFlags=0,p=x,x=v.child;x!==null;)Mt(x,p),x=x.sibling;return ve(Ds,Ds.current&1|2),v.child}p=p.sibling}W.tail!==null&&ka()>yo&&(v.flags|=128,F=!0,La(W,!1),v.lanes=4194304)}else{if(!F)if(p=Up(se),p!==null){if(v.flags|=128,F=!0,p=p.updateQueue,v.updateQueue=p,Ia(v,p),La(W,!0),W.tail===null&&W.tailMode==="hidden"&&!se.alternate&&!Ai)return Pa(v),null}else 2*ka()-W.renderingStartTime>yo&&x!==536870912&&(v.flags|=128,F=!0,La(W,!1),v.lanes=4194304);W.isBackwards?(se.sibling=v.child,v.child=se):(p=W.last,p!==null?p.sibling=se:v.child=se,W.last=se)}return W.tail!==null?(v=W.tail,W.rendering=v,W.tail=v.sibling,W.renderingStartTime=ka(),v.sibling=null,p=Ds.current,ve(Ds,F?p&1|2:p&1),v):(Pa(v),null);case 22:case 23:return Zc(v),Gc(),F=v.memoizedState!==null,p!==null?p.memoizedState!==null!==F&&(v.flags|=8192):F&&(v.flags|=8192),F?(x&536870912)!==0&&(v.flags&128)===0&&(Pa(v),v.subtreeFlags&6&&(v.flags|=8192)):Pa(v),x=v.updateQueue,x!==null&&Ia(v,x.retryQueue),x=null,p!==null&&p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(x=p.memoizedState.cachePool.pool),F=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(F=v.memoizedState.cachePool.pool),F!==x&&(v.flags|=2048),p!==null&&pt(Tt),null;case 24:return x=null,p!==null&&(x=p.memoizedState.cache),v.memoizedState.cache!==x&&(v.flags|=2048),Ud(eo),Pa(v),null;case 25:return null}throw Error(r(156,v.tag))}function Lr(p,v){switch(Dh(v),v.tag){case 1:return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 3:return Ud(eo),St(),p=v.flags,(p&65536)!==0&&(p&128)===0?(v.flags=p&-65537|128,v):null;case 26:case 27:case 5:return Va(v),null;case 13:if(Zc(v),p=v.memoizedState,p!==null&&p.dehydrated!==null){if(v.alternate===null)throw Error(r(340));Ih()}return p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 19:return pt(Ds),null;case 4:return St(),null;case 10:return Ud(v.type),null;case 22:case 23:return Zc(v),Gc(),p!==null&&pt(Tt),p=v.flags,p&65536?(v.flags=p&-65537|128,v):null;case 24:return Ud(eo),null;case 25:return null;default:return null}}function pr(p,v){switch(Dh(v),v.tag){case 3:Ud(eo),St();break;case 26:case 27:case 5:Va(v);break;case 4:St();break;case 13:Zc(v);break;case 19:pt(Ds);break;case 10:Ud(v.type);break;case 22:case 23:Zc(v),Gc(),p!==null&&pt(Tt);break;case 24:Ud(eo)}}var zr={getCacheForType:function(p){var v=$s(eo),x=v.data.get(p);return x===void 0&&(x=p(),v.data.set(p,x)),x}},Cr=typeof WeakMap=="function"?WeakMap:Map,xr=0,Fr=null,Mr=null,dr=0,nn=0,Tr=null,er=!1,sn=!1,qn=!1,un=0,Vn=0,Ki=0,hs=0,ao=0,Ks=0,mo=0,Cn=null,ni=null,On=!1,oi=0,yo=1/0,Ri=null,ss=null,Tc=!1,Zo=null,eu=0,zl=0,Yu=null,gl=0,kd=null;function go(){if((xr&2)!==0&&dr!==0)return dr&-dr;if(Te.T!==null){var p=Ee;return p!==0?p:nA()}return kt()}function Ah(){Ks===0&&(Ks=(dr&536870912)===0||Ai?Fs():536870912);var p=xl.current;return p!==null&&(p.flags|=32),Ks}function Ol(p,v,x){(p===Fr&&nn===2||p.cancelPendingCommit!==null)&&(jm(p,0),lp(p,dr,Ks,!1)),De(p,x),((xr&2)===0||p!==Fr)&&(p===Fr&&((xr&2)===0&&(hs|=x),Vn===4&&lp(p,dr,Ks,!1)),Hh(p))}function op(p,v,x){if((xr&6)!==0)throw Error(r(327));var F=!x&&(v&60)===0&&(v&p.expiredLanes)===0||ui(p,v),W=F?Yp(p,v):E0(p,v,!0),se=F;do{if(W===0){sn&&!F&&lp(p,v,0,!1);break}else if(W===6)lp(p,v,0,!er);else{if(x=p.current.alternate,se&&!NT(x)){W=E0(p,v,!1),se=!1;continue}if(W===2){if(se=v,p.errorRecoveryDisabledLanes&se)var Fe=0;else Fe=p.pendingLanes&-536870913,Fe=Fe!==0?Fe:Fe&536870912?536870912:0;if(Fe!==0){v=Fe;e:{var ut=p;W=Cn;var Ft=ut.current.memoizedState.isDehydrated;if(Ft&&(jm(ut,Fe).flags|=256),Fe=E0(ut,Fe,!1),Fe!==2){if(qn&&!Ft){ut.errorRecoveryDisabledLanes|=se,hs|=se,W=4;break e}se=ni,ni=W,se!==null&&Wp(se)}W=Fe}if(se=!1,W!==2)continue}}if(W===1){jm(p,0),lp(p,v,0,!0);break}e:{switch(F=p,W){case 0:case 1:throw Error(r(345));case 4:if((v&4194176)===v){lp(F,v,Ks,!er);break e}break;case 2:ni=null;break;case 3:case 5:break;default:throw Error(r(329))}if(F.finishedWork=x,F.finishedLanes=v,(v&62914560)===v&&(se=oi+300-ka(),10<se)){if(lp(F,v,Ks,!er),hn(F,0)!==0)break e;F.timeoutHandle=$h(Fy.bind(null,F,x,ni,Ri,On,v,Ks,hs,mo,er,2,-0,0),se);break e}Fy(F,x,ni,Ri,On,v,Ks,hs,mo,er,0,-0,0)}}break}while(!0);Hh(p)}function Wp(p){ni===null?ni=p:ni.push.apply(ni,p)}function Fy(p,v,x,F,W,se,Fe,ut,Ft,oa,ja,rr,ba){var Za=v.subtreeFlags;if((Za&8192||(Za&16785408)===16785408)&&(dA={stylesheets:null,count:0,unsuspend:oP},nt(v),v=G0(),v!==null)){p.cancelPendingCommit=v(zT.bind(null,p,x,F,W,Fe,ut,Ft,1,rr,ba)),lp(p,se,Fe,!oa);return}zT(p,x,F,W,Fe,ut,Ft,ja,rr,ba)}function NT(p){for(var v=p;;){var x=v.tag;if((x===0||x===11||x===15)&&v.flags&16384&&(x=v.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var F=0;F<x.length;F++){var W=x[F],se=W.getSnapshot;W=W.value;try{if(!Os(se(),W))return!1}catch{return!1}}if(x=v.child,v.subtreeFlags&16384&&x!==null)x.return=v,v=x;else{if(v===p)break;for(;v.sibling===null;){if(v.return===null||v.return===p)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function lp(p,v,x,F){v&=~ao,v&=~hs,p.suspendedLanes|=v,p.pingedLanes&=~v,F&&(p.warmLanes|=v),F=p.expirationTimes;for(var W=v;0<W;){var se=31-en(W),Fe=1<<se;F[se]=-1,W&=~Fe}x!==0&&At(p,x,v)}function b0(){return(xr&6)===0?(Jp(0),!1):!0}function x0(){if(Mr!==null){if(nn===0)var p=Mr.return;else p=Mr,mh=wf=null,ds(p),Lh=null,hl=0,p=Mr;for(;p!==null;)pr(p.alternate,p),p=p.return;Mr=null}}function jm(p,v){p.finishedWork=null,p.finishedLanes=0;var x=p.timeoutHandle;x!==-1&&(p.timeoutHandle=-1,BT(x)),x=p.cancelPendingCommit,x!==null&&(p.cancelPendingCommit=null,x()),x0(),Fr=p,Mr=x=Sa(p.current,null),dr=v,nn=0,Tr=null,er=!1,sn=ui(p,v),qn=!1,mo=Ks=ao=hs=Ki=Vn=0,ni=Cn=null,On=!1,(v&8)!==0&&(v|=v&32);var F=p.entangledLanes;if(F!==0)for(p=p.entanglements,F&=v;0<F;){var W=31-en(F),se=1<<W;v|=p[W],F&=~se}return un=v,ns(),x}function Kv(p,v){wa=null,Te.H=bu,v===yf?(v=Ny(),nn=3):v===Dm?(v=Ny(),nn=4):nn=v===jp?8:v!==null&&typeof v=="object"&&typeof v.then=="function"?6:1,Tr=v,Mr===null&&(Vn=1,Ld(p,es(v,p.current)))}function Wv(){var p=Te.H;return Te.H=bu,p===null?bu:p}function Yv(){var p=Te.A;return Te.A=zr,p}function P0(){Vn=4,er||(dr&4194176)!==dr&&xl.current!==null||(sn=!0),(Ki&134217727)===0&&(hs&134217727)===0||Fr===null||lp(Fr,dr,Ks,!1)}function E0(p,v,x){var F=xr;xr|=2;var W=Wv(),se=Yv();(Fr!==p||dr!==v)&&(Ri=null,jm(p,v)),v=!1;var Fe=Vn;e:do try{if(nn!==0&&Mr!==null){var ut=Mr,Ft=Tr;switch(nn){case 8:x0(),Fe=6;break e;case 3:case 2:case 6:xl.current===null&&(v=!0);var oa=nn;if(nn=0,Tr=null,ky(p,ut,Ft,oa),x&&sn){Fe=0;break e}break;default:oa=nn,nn=0,Tr=null,ky(p,ut,Ft,oa)}}Xv(),Fe=Vn;break}catch(ja){Kv(p,ja)}while(!0);return v&&p.shellSuspendCounter++,mh=wf=null,xr=F,Te.H=W,Te.A=se,Mr===null&&(Fr=null,dr=0,ns()),Fe}function Xv(){for(;Mr!==null;)Jv(Mr)}function Yp(p,v){var x=xr;xr|=2;var F=Wv(),W=Yv();Fr!==p||dr!==v?(Ri=null,yo=ka()+500,jm(p,v)):sn=ui(p,v);e:do try{if(nn!==0&&Mr!==null){v=Mr;var se=Tr;t:switch(nn){case 1:nn=0,Tr=null,ky(p,v,se,1);break;case 2:if(Ey(se)){nn=0,Tr=null,Uy(v);break}v=function(){nn===2&&Fr===p&&(nn=7),Hh(p)},se.then(v,v);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:Ey(se)?(nn=0,Tr=null,Uy(v)):(nn=0,Tr=null,ky(p,v,se,7));break;case 5:var Fe=null;switch(Mr.tag){case 26:Fe=Mr.memoizedState;case 5:case 27:var ut=Mr;if(!Fe||y1(Fe)){nn=0,Tr=null;var Ft=ut.sibling;if(Ft!==null)Mr=Ft;else{var oa=ut.return;oa!==null?(Mr=oa,N0(oa)):Mr=null}break t}}nn=0,Tr=null,ky(p,v,se,5);break;case 6:nn=0,Tr=null,ky(p,v,se,6);break;case 8:x0(),Vn=6;break e;default:throw Error(r(462))}}Al();break}catch(ja){Kv(p,ja)}while(!0);return mh=wf=null,Te.H=F,Te.A=W,xr=x,Mr!==null?0:(Fr=null,dr=0,ns(),Vn)}function Al(){for(;Mr!==null&&!ur();)Jv(Mr)}function Jv(p){var v=tp(p.alternate,p,un);p.memoizedProps=p.pendingProps,v===null?N0(p):Mr=v}function Uy(p){var v=p,x=v.alternate;switch(v.tag){case 15:case 0:v=Hg(x,v,v.pendingProps,v.type,void 0,dr);break;case 11:v=Hg(x,v,v.pendingProps,v.type.render,v.ref,dr);break;case 5:ds(v);default:pr(x,v),v=Mr=Mt(v,un),v=tp(x,v,un)}p.memoizedProps=p.pendingProps,v===null?N0(p):Mr=v}function ky(p,v,x,F){mh=wf=null,ds(v),Lh=null,hl=0;var W=v.return;try{if(Gg(p,W,v,x,dr)){Vn=1,Ld(p,es(x,p.current)),Mr=null;return}}catch(se){if(W!==null)throw Mr=W,se;Vn=1,Ld(p,es(x,p.current)),Mr=null;return}v.flags&32768?(Ai||F===1?p=!0:sn||(dr&536870912)!==0?p=!1:(er=p=!0,(F===2||F===3||F===6)&&(F=xl.current,F!==null&&F.tag===13&&(F.flags|=16384))),VT(v,p)):N0(v)}function N0(p){var v=p;do{if((v.flags&32768)!==0){VT(v,er);return}p=v.return;var x=sr(v.alternate,v,un);if(x!==null){Mr=x;return}if(v=v.sibling,v!==null){Mr=v;return}Mr=v=p}while(v!==null);Vn===0&&(Vn=5)}function VT(p,v){do{var x=Lr(p.alternate,p);if(x!==null){x.flags&=32767,Mr=x;return}if(x=p.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!v&&(p=p.sibling,p!==null)){Mr=p;return}Mr=p=x}while(p!==null);Vn=6,Mr=null}function zT(p,v,x,F,W,se,Fe,ut,Ft,oa){var ja=Te.T,rr=We.p;try{We.p=2,Te.T=null,aA(p,v,x,F,rr,W,se,Fe,ut,Ft,oa)}finally{Te.T=ja,We.p=rr}}function aA(p,v,x,F,W,se,Fe,ut){do _h();while(Zo!==null);if((xr&6)!==0)throw Error(r(327));var Ft=p.finishedWork;if(F=p.finishedLanes,Ft===null)return null;if(p.finishedWork=null,p.finishedLanes=0,Ft===p.current)throw Error(r(177));p.callbackNode=null,p.callbackPriority=0,p.cancelPendingCommit=null;var oa=Ft.lanes|Ft.childLanes;if(oa|=Zi,at(p,F,oa,se,Fe,ut),p===Fr&&(Mr=Fr=null,dr=0),(Ft.subtreeFlags&10256)===0&&(Ft.flags&10256)===0||Tc||(Tc=!0,zl=oa,Yu=x,J2(Rn,function(){return _h(),null})),x=(Ft.flags&15990)!==0,(Ft.subtreeFlags&15990)!==0||x?(x=Te.T,Te.T=null,se=We.p,We.p=2,Fe=xr,xr|=4,Eu(p,Ft),j(Ft,p),Sd(lA,p.containerInfo),rm=!!Bd,lA=Bd=null,p.current=Ft,tA(p,Ft.alternate,Ft),Pr(),xr=Fe,We.p=se,Te.T=x):p.current=Ft,Tc?(Tc=!1,Zo=p,eu=F):Qv(p,oa),oa=p.pendingLanes,oa===0&&(ss=null),Mn(Ft.stateNode),Hh(p),v!==null)for(W=p.onRecoverableError,Ft=0;Ft<v.length;Ft++)oa=v[Ft],W(oa.value,{componentStack:oa.stack});return(eu&3)!==0&&_h(),oa=p.pendingLanes,(F&4194218)!==0&&(oa&42)!==0?p===kd?gl++:(gl=0,kd=p):gl=0,Jp(0),null}function Qv(p,v){(p.pooledCacheLanes&=v)===0&&(v=p.pooledCache,v!=null&&(p.pooledCache=null,G(v)))}function _h(){if(Zo!==null){var p=Zo,v=zl;zl=0;var x=Ct(eu),F=Te.T,W=We.p;try{if(We.p=32>x?32:x,Te.T=null,Zo===null)var se=!1;else{x=Yu,Yu=null;var Fe=Zo,ut=eu;if(Zo=null,eu=0,(xr&6)!==0)throw Error(r(331));var Ft=xr;if(xr|=4,yt(Fe.current),Ne(Fe,Fe.current,ut,x),xr=Ft,Jp(0,!1),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(yr,Fe)}catch{}se=!0}return se}finally{We.p=W,Te.T=F,Qv(p,v)}}return!1}function By(p,v,x){v=es(x,v),v=Gp(p.stateNode,v,2),p=Sf(p,v,2),p!==null&&(De(p,2),Hh(p))}function Ms(p,v,x){if(p.tag===3)By(p,p,x);else for(;v!==null;){if(v.tag===3){By(v,p,x);break}else if(v.tag===1){var F=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(ss===null||!ss.has(F))){p=es(x,p),x=km(2),F=Sf(v,x,2),F!==null&&(zy(x,F,v,p),De(F,2),Hh(F));break}}v=v.return}}function e1(p,v,x){var F=p.pingCache;if(F===null){F=p.pingCache=new Cr;var W=new Set;F.set(v,W)}else W=F.get(v),W===void 0&&(W=new Set,F.set(v,W));W.has(x)||(qn=!0,W.add(x),p=W2.bind(null,p,v,x),v.then(p,p))}function W2(p,v,x){var F=p.pingCache;F!==null&&F.delete(v),p.pingedLanes|=p.suspendedLanes&x,p.warmLanes&=~x,Fr===p&&(dr&x)===x&&(Vn===4||Vn===3&&(dr&62914560)===dr&&300>ka()-oi?(xr&2)===0&&jm(p,0):ao|=x,mo===dr&&(mo=0)),Hh(p)}function OT(p,v){v===0&&(v=Xt()),p=Jo(p,v),p!==null&&(De(p,v),Hh(p))}function Y2(p){var v=p.memoizedState,x=0;v!==null&&(x=v.retryLane),OT(p,x)}function X2(p,v){var x=0;switch(p.tag){case 13:var F=p.stateNode,W=p.memoizedState;W!==null&&(x=W.retryLane);break;case 19:F=p.stateNode;break;case 22:F=p.stateNode._retryCache;break;default:throw Error(r(314))}F!==null&&F.delete(v),OT(p,x)}function J2(p,v){return nr(p,v)}var Gy=null,jy=null,Xp=!1,V0=!1,ro=!1,xf=0;function Hh(p){p!==jy&&p.next===null&&(jy===null?Gy=jy=p:jy=jy.next=p),V0=!0,Xp||(Xp=!0,rA(z0))}function Jp(p,v){if(!ro&&V0){ro=!0;do for(var x=!1,F=Gy;F!==null;){if(p!==0){var W=F.pendingLanes;if(W===0)var se=0;else{var Fe=F.suspendedLanes,ut=F.pingedLanes;se=(1<<31-en(42|p)+1)-1,se&=W&~(Fe&~ut),se=se&201326677?se&201326677|1:se?se|2:0}se!==0&&(x=!0,a1(F,se))}else se=dr,se=hn(F,F===Fr?se:0),(se&3)===0||ui(F,se)||(x=!0,a1(F,se));F=F.next}while(x);ro=!1}}function z0(){V0=Xp=!1;var p=0;xf!==0&&(o1()&&(p=xf),xf=0);for(var v=ka(),x=null,F=Gy;F!==null;){var W=F.next,se=Zy(F,v);se===0?(F.next=null,x===null?Gy=W:x.next=W,W===null&&(jy=x)):(x=F,(p!==0||(se&3)!==0)&&(V0=!0)),F=W}Jp(p)}function Zy(p,v){for(var x=p.suspendedLanes,F=p.pingedLanes,W=p.expirationTimes,se=p.pendingLanes&-62914561;0<se;){var Fe=31-en(se),ut=1<<Fe,Ft=W[Fe];Ft===-1?((ut&x)===0||(ut&F)!==0)&&(W[Fe]=Ec(ut,v)):Ft<=v&&(p.expiredLanes|=ut),se&=~ut}if(v=Fr,x=dr,x=hn(p,p===v?x:0),F=p.callbackNode,x===0||p===v&&nn===2||p.cancelPendingCommit!==null)return F!==null&&F!==null&&cr(F),p.callbackNode=null,p.callbackPriority=0;if((x&3)===0||ui(p,x)){if(v=x&-x,v===p.callbackPriority)return v;switch(F!==null&&cr(F),Ct(x)){case 2:case 8:x=Dn;break;case 32:x=Rn;break;case 268435456:x=Wa;break;default:x=Rn}return F=t1.bind(null,p),x=nr(x,F),p.callbackPriority=v,p.callbackNode=x,v}return F!==null&&F!==null&&cr(F),p.callbackPriority=2,p.callbackNode=null,2}function t1(p,v){var x=p.callbackNode;if(_h()&&p.callbackNode!==x)return null;var F=dr;return F=hn(p,p===Fr?F:0),F===0?null:(op(p,F,v),Zy(p,ka()),p.callbackNode!=null&&p.callbackNode===x?t1.bind(null,p):null)}function a1(p,v){if(_h())return null;op(p,v,!0)}function rA(p){tP(function(){(xr&6)!==0?nr(pn,p):p()})}function nA(){return xf===0&&(xf=Fs()),xf}function iA(p){return p==null||typeof p=="symbol"||typeof p=="boolean"?null:typeof p=="function"?p:bn(""+p)}function DT(p,v){var x=v.ownerDocument.createElement("input");return x.name=v.name,x.value=v.value,p.id&&x.setAttribute("form",p.id),v.parentNode.insertBefore(x,v),p=new FormData(p),x.parentNode.removeChild(x),p}function MT(p,v,x,F,W){if(v==="submit"&&x&&x.stateNode===W){var se=iA((W[Zt]||null).action),Fe=F.submitter;Fe&&(v=(v=Fe[Zt]||null)?iA(v.formAction):Fe.getAttribute("formAction"),v!==null&&(se=v,Fe=null));var ut=new Ci("action","action",null,F,W);p.push({event:ut,listeners:[{instance:null,listener:function(){if(F.defaultPrevented){if(xf!==0){var Ft=Fe?DT(W,Fe):new FormData(W);Kc(x,{pending:!0,data:Ft,method:W.method,action:se},null,Ft)}}else typeof se=="function"&&(ut.preventDefault(),Ft=Fe?DT(W,Fe):new FormData(W),Kc(x,{pending:!0,data:Ft,method:W.method,action:se},se,Ft))},currentTarget:W}]})}}for(var sA=0;sA<ko.length;sA++){var oA=ko[sA],r1=oA.toLowerCase(),IT=oA[0].toUpperCase()+oA.slice(1);cs(r1,"on"+IT)}cs(Mc,"onAnimationEnd"),cs(hc,"onAnimationIteration"),cs(yu,"onAnimationStart"),cs("dblclick","onDoubleClick"),cs("focusin","onFocus"),cs("focusout","onBlur"),cs(Ic,"onTransitionRun"),cs(gu,"onTransitionStart"),cs(Lc,"onTransitionCancel"),cs(fc,"onTransitionEnd"),_s("onMouseEnter",["mouseout","mouseover"]),_s("onMouseLeave",["mouseout","mouseover"]),_s("onPointerEnter",["pointerout","pointerover"]),_s("onPointerLeave",["pointerout","pointerover"]),Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zm));function O0(p,v){v=(v&4)!==0;for(var x=0;x<p.length;x++){var F=p[x],W=F.event;F=F.listeners;e:{var se=void 0;if(v)for(var Fe=F.length-1;0<=Fe;Fe--){var ut=F[Fe],Ft=ut.instance,oa=ut.currentTarget;if(ut=ut.listener,Ft!==se&&W.isPropagationStopped())break e;se=ut,W.currentTarget=oa;try{se(W)}catch(ja){fh(ja)}W.currentTarget=null,se=Ft}else for(Fe=0;Fe<F.length;Fe++){if(ut=F[Fe],Ft=ut.instance,oa=ut.currentTarget,ut=ut.listener,Ft!==se&&W.isPropagationStopped())break e;se=ut,W.currentTarget=oa;try{se(W)}catch(ja){fh(ja)}W.currentTarget=null,se=Ft}}}}function Di(p,v){var x=v[Ma];x===void 0&&(x=v[Ma]=new Set);var F=p+"__bubble";x.has(F)||(n1(v,p,2,!1),x.add(F))}function D0(p,v,x){var F=0;v&&(F|=4),n1(x,p,F,v)}var qm="_reactListening"+Math.random().toString(36).slice(2);function M0(p){if(!p[qm]){p[qm]=!0,In.forEach(function(x){x!=="selectionchange"&&(LT.has(x)||D0(x,!1,p),D0(x,!0,p))});var v=p.nodeType===9?p:p.ownerDocument;v===null||v[qm]||(v[qm]=!0,D0("selectionchange",!1,v))}}function n1(p,v,x,F){switch(aS(v)){case 2:var W=eS;break;case 8:W=tS;break;default:W=R1}x=W.bind(null,v,x,p),W=void 0,!sc||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(W=!0),F?W!==void 0?p.addEventListener(v,x,{capture:!0,passive:W}):p.addEventListener(v,x,!0):W!==void 0?p.addEventListener(v,x,{passive:W}):p.addEventListener(v,x,!1)}function I0(p,v,x,F,W){var se=F;if((v&1)===0&&(v&2)===0&&F!==null)e:for(;;){if(F===null)return;var Fe=F.tag;if(Fe===3||Fe===4){var ut=F.stateNode.containerInfo;if(ut===W||ut.nodeType===8&&ut.parentNode===W)break;if(Fe===4)for(Fe=F.return;Fe!==null;){var Ft=Fe.tag;if((Ft===3||Ft===4)&&(Ft=Fe.stateNode.containerInfo,Ft===W||Ft.nodeType===8&&Ft.parentNode===W))return;Fe=Fe.return}for(;ut!==null;){if(Fe=zn(ut),Fe===null)return;if(Ft=Fe.tag,Ft===5||Ft===6||Ft===26||Ft===27){F=se=Fe;continue e}ut=ut.parentNode}}F=F.return}ks(function(){var oa=se,ja=hr(x),rr=[];e:{var ba=Bu.get(p);if(ba!==void 0){var Za=Ci,Yr=p;switch(p){case"keypress":if(ln(x)===0)break e;case"keydown":case"keyup":Za=wd;break;case"focusin":Yr="focus",Za=Xo;break;case"focusout":Yr="blur",Za=Xo;break;case"beforeblur":case"afterblur":Za=Xo;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Za=us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Za=Ts;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Za=hf;break;case Mc:case hc:case yu:Za=Gs;break;case fc:Za=$e;break;case"scroll":case"scrollend":Za=_d;break;case"wheel":Za=Wt;break;case"copy":case"cut":case"paste":Za=rs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Za=df;break;case"toggle":case"beforetoggle":Za=Da}var Jn=(v&4)!==0,qo=!Jn&&(p==="scroll"||p==="scrollend"),ya=Jn?ba!==null?ba+"Capture":null:ba;Jn=[];for(var na=oa,Ta;na!==null;){var Ja=na;if(Ta=Ja.stateNode,Ja=Ja.tag,Ja!==5&&Ja!==26&&Ja!==27||Ta===null||ya===null||(Ja=ic(na,ya),Ja!=null&&Jn.push(vh(na,Ja,Ta))),qo)break;na=na.return}0<Jn.length&&(ba=new Za(ba,Yr,null,x,ja),rr.push({event:ba,listeners:Jn}))}}if((v&7)===0){e:{if(ba=p==="mouseover"||p==="pointerover",Za=p==="mouseout"||p==="pointerout",ba&&x!==lo&&(Yr=x.relatedTarget||x.fromElement)&&(zn(Yr)||Yr[Ra]))break e;if((Za||ba)&&(ba=ja.window===ja?ja:(ba=ja.ownerDocument)?ba.defaultView||ba.parentWindow:window,Za?(Yr=x.relatedTarget||x.toElement,Za=oa,Yr=Yr?zn(Yr):null,Yr!==null&&(qo=ke(Yr),Jn=Yr.tag,Yr!==qo||Jn!==5&&Jn!==27&&Jn!==6)&&(Yr=null)):(Za=null,Yr=oa),Za!==Yr)){if(Jn=us,Ja="onMouseLeave",ya="onMouseEnter",na="mouse",(p==="pointerout"||p==="pointerover")&&(Jn=df,Ja="onPointerLeave",ya="onPointerEnter",na="pointer"),qo=Za==null?ba:qr(Za),Ta=Yr==null?ba:qr(Yr),ba=new Jn(Ja,na+"leave",Za,x,ja),ba.target=qo,ba.relatedTarget=Ta,Ja=null,zn(ja)===oa&&(Jn=new Jn(ya,na+"enter",Yr,x,ja),Jn.target=Ta,Jn.relatedTarget=qo,Ja=Jn),qo=Ja,Za&&Yr)t:{for(Jn=Za,ya=Yr,na=0,Ta=Jn;Ta;Ta=Hm(Ta))na++;for(Ta=0,Ja=ya;Ja;Ja=Hm(Ja))Ta++;for(;0<na-Ta;)Jn=Hm(Jn),na--;for(;0<Ta-na;)ya=Hm(ya),Ta--;for(;na--;){if(Jn===ya||ya!==null&&Jn===ya.alternate)break t;Jn=Hm(Jn),ya=Hm(ya)}Jn=null}else Jn=null;Za!==null&&FT(rr,ba,Za,Jn,!1),Yr!==null&&qo!==null&&FT(rr,qo,Yr,Jn,!0)}}e:{if(ba=oa?qr(oa):window,Za=ba.nodeName&&ba.nodeName.toLowerCase(),Za==="select"||Za==="input"&&ba.type==="file")var Kr=uc;else if(Rr(ba))if(Rd)Kr=Vh;else{Kr=co;var mi=Zs}else Za=ba.nodeName,!Za||Za.toLowerCase()!=="input"||ba.type!=="checkbox"&&ba.type!=="radio"?oa&&Uu(oa.elementType)&&(Kr=uc):Kr=ff;if(Kr&&(Kr=Kr(p,oa))){pu(rr,Kr,x,ja);break e}mi&&mi(p,ba,oa),p==="focusout"&&oa&&ba.type==="number"&&oa.memoizedProps.value!=null&&cu(ba,"number",ba.value)}switch(mi=oa?qr(oa):window,p){case"focusin":(Rr(mi)||mi.contentEditable==="true")&&(Cl=mi,dc=oa,mu=null);break;case"focusout":mu=dc=Cl=null;break;case"mousedown":ji=!0;break;case"contextmenu":case"mouseup":case"dragend":ji=!1,pf(rr,x,ja);break;case"selectionchange":if(Dc)break;case"keydown":case"keyup":pf(rr,x,ja)}var on;if(wr)e:{switch(p){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else Qi?Cs(p,x)&&(Pn="onCompositionEnd"):p==="keydown"&&x.keyCode===229&&(Pn="onCompositionStart");Pn&&(Nn&&x.locale!=="ko"&&(Qi||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&Qi&&(on=Ad()):(an=ja,An="value"in an?an.value:an.textContent,Qi=!0)),mi=Pf(oa,Pn),0<mi.length&&(Pn=new Uo(Pn,p,null,x,ja),rr.push({event:Pn,listeners:mi}),on?Pn.data=on:(on=Xs(x),on!==null&&(Pn.data=on)))),(on=Sn?br(p,x):ir(p,x))&&(Pn=Pf(oa,"onBeforeInput"),0<Pn.length&&(mi=new Uo("onBeforeInput","beforeinput",null,x,ja),rr.push({event:mi,listeners:Pn}),mi.data=on)),MT(rr,p,oa,x,ja)}O0(rr,v)})}function vh(p,v,x){return{instance:p,listener:v,currentTarget:x}}function Pf(p,v){for(var x=v+"Capture",F=[];p!==null;){var W=p,se=W.stateNode;W=W.tag,W!==5&&W!==26&&W!==27||se===null||(W=ic(p,x),W!=null&&F.unshift(vh(p,W,se)),W=ic(p,v),W!=null&&F.push(vh(p,W,se))),p=p.return}return F}function Hm(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5&&p.tag!==27);return p||null}function FT(p,v,x,F,W){for(var se=v._reactName,Fe=[];x!==null&&x!==F;){var ut=x,Ft=ut.alternate,oa=ut.stateNode;if(ut=ut.tag,Ft!==null&&Ft===F)break;ut!==5&&ut!==26&&ut!==27||oa===null||(Ft=oa,W?(oa=ic(x,se),oa!=null&&Fe.unshift(vh(x,oa,Ft))):W||(oa=ic(x,se),oa!=null&&Fe.push(vh(x,oa,Ft)))),x=x.return}Fe.length!==0&&p.push({event:v,listeners:Fe})}var UT=/\r\n?/g,Q2=/\u0000|\uFFFD/g;function kT(p){return(typeof p=="string"?p:""+p).replace(UT,`
`).replace(Q2,"")}function Ef(p,v){return v=kT(v),kT(p)===v}function qy(){}function Es(p,v,x,F,W,se){switch(x){case"children":typeof F=="string"?v==="body"||v==="textarea"&&F===""||Fu(p,F):(typeof F=="number"||typeof F=="bigint")&&v!=="body"&&Fu(p,""+F);break;case"className":Vi(p,"class",F);break;case"tabIndex":Vi(p,"tabindex",F);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(p,x,F);break;case"style":Lo(p,F,se);break;case"data":if(v!=="object"){Vi(p,"data",F);break}case"src":case"href":if(F===""&&(v!=="a"||x!=="href")){p.removeAttribute(x);break}if(F==null||typeof F=="function"||typeof F=="symbol"||typeof F=="boolean"){p.removeAttribute(x);break}F=bn(""+F),p.setAttribute(x,F);break;case"action":case"formAction":if(typeof F=="function"){p.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof se=="function"&&(x==="formAction"?(v!=="input"&&Es(p,v,"name",W.name,W,null),Es(p,v,"formEncType",W.formEncType,W,null),Es(p,v,"formMethod",W.formMethod,W,null),Es(p,v,"formTarget",W.formTarget,W,null)):(Es(p,v,"encType",W.encType,W,null),Es(p,v,"method",W.method,W,null),Es(p,v,"target",W.target,W,null)));if(F==null||typeof F=="symbol"||typeof F=="boolean"){p.removeAttribute(x);break}F=bn(""+F),p.setAttribute(x,F);break;case"onClick":F!=null&&(p.onclick=qy);break;case"onScroll":F!=null&&Di("scroll",p);break;case"onScrollEnd":F!=null&&Di("scrollend",p);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(r(61));if(x=F.__html,x!=null){if(W.children!=null)throw Error(r(60));p.innerHTML=x}}break;case"multiple":p.multiple=F&&typeof F!="function"&&typeof F!="symbol";break;case"muted":p.muted=F&&typeof F!="function"&&typeof F!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(F==null||typeof F=="function"||typeof F=="boolean"||typeof F=="symbol"){p.removeAttribute("xlink:href");break}x=bn(""+F),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":F!=null&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,""+F):p.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":F&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,""):p.removeAttribute(x);break;case"capture":case"download":F===!0?p.setAttribute(x,""):F!==!1&&F!=null&&typeof F!="function"&&typeof F!="symbol"?p.setAttribute(x,F):p.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":F!=null&&typeof F!="function"&&typeof F!="symbol"&&!isNaN(F)&&1<=F?p.setAttribute(x,F):p.removeAttribute(x);break;case"rowSpan":case"start":F==null||typeof F=="function"||typeof F=="symbol"||isNaN(F)?p.removeAttribute(x):p.setAttribute(x,F);break;case"popover":Di("beforetoggle",p),Di("toggle",p),Ko(p,"popover",F);break;case"xlinkActuate":kl(p,"http://www.w3.org/1999/xlink","xlink:actuate",F);break;case"xlinkArcrole":kl(p,"http://www.w3.org/1999/xlink","xlink:arcrole",F);break;case"xlinkRole":kl(p,"http://www.w3.org/1999/xlink","xlink:role",F);break;case"xlinkShow":kl(p,"http://www.w3.org/1999/xlink","xlink:show",F);break;case"xlinkTitle":kl(p,"http://www.w3.org/1999/xlink","xlink:title",F);break;case"xlinkType":kl(p,"http://www.w3.org/1999/xlink","xlink:type",F);break;case"xmlBase":kl(p,"http://www.w3.org/XML/1998/namespace","xml:base",F);break;case"xmlLang":kl(p,"http://www.w3.org/XML/1998/namespace","xml:lang",F);break;case"xmlSpace":kl(p,"http://www.w3.org/XML/1998/namespace","xml:space",F);break;case"is":Ko(p,"is",F);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=eh.get(x)||x,Ko(p,x,F))}}function L0(p,v,x,F,W,se){switch(x){case"style":Lo(p,F,se);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(r(61));if(x=F.__html,x!=null){if(W.children!=null)throw Error(r(60));p.innerHTML=x}}break;case"children":typeof F=="string"?Fu(p,F):(typeof F=="number"||typeof F=="bigint")&&Fu(p,""+F);break;case"onScroll":F!=null&&Di("scroll",p);break;case"onScrollEnd":F!=null&&Di("scrollend",p);break;case"onClick":F!=null&&(p.onclick=qy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ni.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(W=x.endsWith("Capture"),v=x.slice(2,W?x.length-7:void 0),se=p[Zt]||null,se=se!=null?se[x]:null,typeof se=="function"&&p.removeEventListener(v,se,W),typeof F=="function")){typeof se!="function"&&se!==null&&(x in p?p[x]=null:p.hasAttribute(x)&&p.removeAttribute(x)),p.addEventListener(v,F,W);break e}x in p?p[x]=F:F===!0?p.setAttribute(x,""):Ko(p,x,F)}}}function Co(p,v,x){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Di("error",p),Di("load",p);var F=!1,W=!1,se;for(se in x)if(x.hasOwnProperty(se)){var Fe=x[se];if(Fe!=null)switch(se){case"src":F=!0;break;case"srcSet":W=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Es(p,v,se,Fe,x,null)}}W&&Es(p,v,"srcSet",x.srcSet,x,null),F&&Es(p,v,"src",x.src,x,null);return;case"input":Di("invalid",p);var ut=se=Fe=W=null,Ft=null,oa=null;for(F in x)if(x.hasOwnProperty(F)){var ja=x[F];if(ja!=null)switch(F){case"name":W=ja;break;case"type":Fe=ja;break;case"checked":Ft=ja;break;case"defaultChecked":oa=ja;break;case"value":se=ja;break;case"defaultValue":ut=ja;break;case"children":case"dangerouslySetInnerHTML":if(ja!=null)throw Error(r(137,v));break;default:Es(p,v,F,ja,x,null)}}Bl(p,se,ut,Ft,oa,Fe,W,!1),Qd(p);return;case"select":Di("invalid",p),F=Fe=se=null;for(W in x)if(x.hasOwnProperty(W)&&(ut=x[W],ut!=null))switch(W){case"value":se=ut;break;case"defaultValue":Fe=ut;break;case"multiple":F=ut;default:Es(p,v,W,ut,x,null)}v=se,x=Fe,p.multiple=!!F,v!=null?oo(p,!!F,v,!1):x!=null&&oo(p,!!F,x,!0);return;case"textarea":Di("invalid",p),se=W=F=null;for(Fe in x)if(x.hasOwnProperty(Fe)&&(ut=x[Fe],ut!=null))switch(Fe){case"value":F=ut;break;case"defaultValue":W=ut;break;case"children":se=ut;break;case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(91));break;default:Es(p,v,Fe,ut,x,null)}gd(p,F,W,se),Qd(p);return;case"option":for(Ft in x)if(x.hasOwnProperty(Ft)&&(F=x[Ft],F!=null))switch(Ft){case"selected":p.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Es(p,v,Ft,F,x,null)}return;case"dialog":Di("cancel",p),Di("close",p);break;case"iframe":case"object":Di("load",p);break;case"video":case"audio":for(F=0;F<Zm.length;F++)Di(Zm[F],p);break;case"image":Di("error",p),Di("load",p);break;case"details":Di("toggle",p);break;case"embed":case"source":case"link":Di("error",p),Di("load",p);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oa in x)if(x.hasOwnProperty(oa)&&(F=x[oa],F!=null))switch(oa){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,v));default:Es(p,v,oa,F,x,null)}return;default:if(Uu(v)){for(ja in x)x.hasOwnProperty(ja)&&(F=x[ja],F!==void 0&&L0(p,v,ja,F,x,void 0));return}}for(ut in x)x.hasOwnProperty(ut)&&(F=x[ut],F!=null&&Es(p,v,ut,F,x,null))}function eP(p,v,x,F){switch(v){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var W=null,se=null,Fe=null,ut=null,Ft=null,oa=null,ja=null;for(Za in x){var rr=x[Za];if(x.hasOwnProperty(Za)&&rr!=null)switch(Za){case"checked":break;case"value":break;case"defaultValue":Ft=rr;default:F.hasOwnProperty(Za)||Es(p,v,Za,null,F,rr)}}for(var ba in F){var Za=F[ba];if(rr=x[ba],F.hasOwnProperty(ba)&&(Za!=null||rr!=null))switch(ba){case"type":se=Za;break;case"name":W=Za;break;case"checked":oa=Za;break;case"defaultChecked":ja=Za;break;case"value":Fe=Za;break;case"defaultValue":ut=Za;break;case"children":case"dangerouslySetInnerHTML":if(Za!=null)throw Error(r(137,v));break;default:Za!==rr&&Es(p,v,ba,Za,F,rr)}}Mo(p,Fe,ut,Ft,oa,ja,se,W);return;case"select":Za=Fe=ut=ba=null;for(se in x)if(Ft=x[se],x.hasOwnProperty(se)&&Ft!=null)switch(se){case"value":break;case"multiple":Za=Ft;default:F.hasOwnProperty(se)||Es(p,v,se,null,F,Ft)}for(W in F)if(se=F[W],Ft=x[W],F.hasOwnProperty(W)&&(se!=null||Ft!=null))switch(W){case"value":ba=se;break;case"defaultValue":ut=se;break;case"multiple":Fe=se;default:se!==Ft&&Es(p,v,W,se,F,Ft)}v=ut,x=Fe,F=Za,ba!=null?oo(p,!!x,ba,!1):!!F!=!!x&&(v!=null?oo(p,!!x,v,!0):oo(p,!!x,x?[]:"",!1));return;case"textarea":Za=ba=null;for(ut in x)if(W=x[ut],x.hasOwnProperty(ut)&&W!=null&&!F.hasOwnProperty(ut))switch(ut){case"value":break;case"children":break;default:Es(p,v,ut,null,F,W)}for(Fe in F)if(W=F[Fe],se=x[Fe],F.hasOwnProperty(Fe)&&(W!=null||se!=null))switch(Fe){case"value":ba=W;break;case"defaultValue":Za=W;break;case"children":break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(91));break;default:W!==se&&Es(p,v,Fe,W,F,se)}Io(p,ba,Za);return;case"option":for(var Yr in x)if(ba=x[Yr],x.hasOwnProperty(Yr)&&ba!=null&&!F.hasOwnProperty(Yr))switch(Yr){case"selected":p.selected=!1;break;default:Es(p,v,Yr,null,F,ba)}for(Ft in F)if(ba=F[Ft],Za=x[Ft],F.hasOwnProperty(Ft)&&ba!==Za&&(ba!=null||Za!=null))switch(Ft){case"selected":p.selected=ba&&typeof ba!="function"&&typeof ba!="symbol";break;default:Es(p,v,Ft,ba,F,Za)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Jn in x)ba=x[Jn],x.hasOwnProperty(Jn)&&ba!=null&&!F.hasOwnProperty(Jn)&&Es(p,v,Jn,null,F,ba);for(oa in F)if(ba=F[oa],Za=x[oa],F.hasOwnProperty(oa)&&ba!==Za&&(ba!=null||Za!=null))switch(oa){case"children":case"dangerouslySetInnerHTML":if(ba!=null)throw Error(r(137,v));break;default:Es(p,v,oa,ba,F,Za)}return;default:if(Uu(v)){for(var qo in x)ba=x[qo],x.hasOwnProperty(qo)&&ba!==void 0&&!F.hasOwnProperty(qo)&&L0(p,v,qo,void 0,F,ba);for(ja in F)ba=F[ja],Za=x[ja],!F.hasOwnProperty(ja)||ba===Za||ba===void 0&&Za===void 0||L0(p,v,ja,ba,F,Za);return}}for(var ya in x)ba=x[ya],x.hasOwnProperty(ya)&&ba!=null&&!F.hasOwnProperty(ya)&&Es(p,v,ya,null,F,ba);for(rr in F)ba=F[rr],Za=x[rr],!F.hasOwnProperty(rr)||ba===Za||ba==null&&Za==null||Es(p,v,rr,ba,F,Za)}var Bd=null,lA=null;function Hy(p){return p.nodeType===9?p:p.ownerDocument}function i1(p){switch(p){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s1(p,v){if(p===0)switch(v){case"svg":return 1;case"math":return 2;default:return 0}return p===1&&v==="foreignObject"?0:p}function F0(p,v){return p==="textarea"||p==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.children=="bigint"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var U0=null;function o1(){var p=window.event;return p&&p.type==="popstate"?p===U0?!1:(U0=p,!0):(U0=null,!1)}var $h=typeof setTimeout=="function"?setTimeout:void 0,BT=typeof clearTimeout=="function"?clearTimeout:void 0,GT=typeof Promise=="function"?Promise:void 0,tP=typeof queueMicrotask=="function"?queueMicrotask:typeof GT<"u"?function(p){return GT.resolve(null).then(p).catch(aP)}:$h;function aP(p){setTimeout(function(){throw p})}function l1(p,v){var x=v,F=0;do{var W=x.nextSibling;if(p.removeChild(x),W&&W.nodeType===8)if(x=W.data,x==="/$"){if(F===0){p.removeChild(W),gA(v);return}F--}else x!=="$"&&x!=="$?"&&x!=="$!"||F++;x=W}while(x);gA(v)}function u1(p){var v=p.firstChild;for(v&&v.nodeType===10&&(v=v.nextSibling);v;){var x=v;switch(v=v.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":u1(x),Gr(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}p.removeChild(x)}}function rP(p,v,x,F){for(;p.nodeType===1;){var W=x;if(p.nodeName.toLowerCase()!==v.toLowerCase()){if(!F&&(p.nodeName!=="INPUT"||p.type!=="hidden"))break}else if(F){if(!p[Vr])switch(v){case"meta":if(!p.hasAttribute("itemprop"))break;return p;case"link":if(se=p.getAttribute("rel"),se==="stylesheet"&&p.hasAttribute("data-precedence"))break;if(se!==W.rel||p.getAttribute("href")!==(W.href==null?null:W.href)||p.getAttribute("crossorigin")!==(W.crossOrigin==null?null:W.crossOrigin)||p.getAttribute("title")!==(W.title==null?null:W.title))break;return p;case"style":if(p.hasAttribute("data-precedence"))break;return p;case"script":if(se=p.getAttribute("src"),(se!==(W.src==null?null:W.src)||p.getAttribute("type")!==(W.type==null?null:W.type)||p.getAttribute("crossorigin")!==(W.crossOrigin==null?null:W.crossOrigin))&&se&&p.hasAttribute("async")&&!p.hasAttribute("itemprop"))break;return p;default:return p}}else if(v==="input"&&p.type==="hidden"){var se=W.name==null?null:""+W.name;if(W.type==="hidden"&&p.getAttribute("name")===se)return p}else return p;if(p=Nu(p.nextSibling),p===null)break}return null}function nP(p,v,x){if(v==="")return null;for(;p.nodeType!==3;)if((p.nodeType!==1||p.nodeName!=="INPUT"||p.type!=="hidden")&&!x||(p=Nu(p.nextSibling),p===null))return null;return p}function Nu(p){for(;p!=null;p=p.nextSibling){var v=p.nodeType;if(v===1||v===3)break;if(v===8){if(v=p.data,v==="$"||v==="$!"||v==="$?"||v==="F!"||v==="F")break;if(v==="/$")return null}}return p}function c1(p){p=p.previousSibling;for(var v=0;p;){if(p.nodeType===8){var x=p.data;if(x==="$"||x==="$!"||x==="$?"){if(v===0)return p;v--}else x==="/$"&&v++}p=p.previousSibling}return null}function uA(p,v,x){switch(v=Hy(x),p){case"html":if(p=v.documentElement,!p)throw Error(r(452));return p;case"head":if(p=v.head,!p)throw Error(r(453));return p;case"body":if(p=v.body,!p)throw Error(r(454));return p;default:throw Error(r(451))}}var Gd=new Map,d1=new Set;function $m(p){return typeof p.getRootNode=="function"?p.getRootNode():p.ownerDocument}var Nf=We.d;We.d={f:k0,r:jT,D:ZT,C:iP,L:qT,m:HT,X:KT,S:$T,M:h1};function k0(){var p=Nf.f(),v=b0();return p||v}function jT(p){var v=Xn(p);v!==null&&v.tag===5&&v.type==="form"?Bh(v):Nf.r(p)}var Qp=typeof document>"u"?null:document;function B0(p,v,x){var F=Qp;if(F&&typeof v=="string"&&v){var W=Ys(v);W='link[rel="'+p+'"][href="'+W+'"]',typeof x=="string"&&(W+='[crossorigin="'+x+'"]'),d1.has(W)||(d1.add(W),p={rel:p,crossOrigin:x,href:v},F.querySelector(W)===null&&(v=F.createElement("link"),Co(v,"link",p),Hr(v),F.head.appendChild(v)))}}function ZT(p){Nf.D(p),B0("dns-prefetch",p,null)}function iP(p,v){Nf.C(p,v),B0("preconnect",p,v)}function qT(p,v,x){Nf.L(p,v,x);var F=Qp;if(F&&p&&v){var W='link[rel="preload"][as="'+Ys(v)+'"]';v==="image"&&x&&x.imageSrcSet?(W+='[imagesrcset="'+Ys(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(W+='[imagesizes="'+Ys(x.imageSizes)+'"]')):W+='[href="'+Ys(p)+'"]';var se=W;switch(v){case"style":se=em(p);break;case"script":se=$y(p)}Gd.has(se)||(p=Oe({rel:"preload",href:v==="image"&&x&&x.imageSrcSet?void 0:p,as:v},x),Gd.set(se,p),F.querySelector(W)!==null||v==="style"&&F.querySelector(cA(se))||v==="script"&&F.querySelector(Ky(se))||(v=F.createElement("link"),Co(v,"link",p),Hr(v),F.head.appendChild(v)))}}function HT(p,v){Nf.m(p,v);var x=Qp;if(x&&p){var F=v&&typeof v.as=="string"?v.as:"script",W='link[rel="modulepreload"][as="'+Ys(F)+'"][href="'+Ys(p)+'"]',se=W;switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":se=$y(p)}if(!Gd.has(se)&&(p=Oe({rel:"modulepreload",href:p},v),Gd.set(se,p),x.querySelector(W)===null)){switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Ky(se)))return}F=x.createElement("link"),Co(F,"link",p),Hr(F),x.head.appendChild(F)}}}function $T(p,v,x){Nf.S(p,v,x);var F=Qp;if(F&&p){var W=yn(F).hoistableStyles,se=em(p);v=v||"default";var Fe=W.get(se);if(!Fe){var ut={loading:0,preload:null};if(Fe=F.querySelector(cA(se)))ut.loading=5;else{p=Oe({rel:"stylesheet",href:p,"data-precedence":v},x),(x=Gd.get(se))&&Km(p,x);var Ft=Fe=F.createElement("link");Hr(Ft),Co(Ft,"link",p),Ft._p=new Promise(function(oa,ja){Ft.onload=oa,Ft.onerror=ja}),Ft.addEventListener("load",function(){ut.loading|=1}),Ft.addEventListener("error",function(){ut.loading|=2}),ut.loading|=4,tm(Fe,v,F)}Fe={type:"stylesheet",instance:Fe,count:1,state:ut},W.set(se,Fe)}}}function KT(p,v){Nf.X(p,v);var x=Qp;if(x&&p){var F=yn(x).hoistableScripts,W=$y(p),se=F.get(W);se||(se=x.querySelector(Ky(W)),se||(p=Oe({src:p,async:!0},v),(v=Gd.get(W))&&Wy(p,v),se=x.createElement("script"),Hr(se),Co(se,"link",p),x.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},F.set(W,se))}}function h1(p,v){Nf.M(p,v);var x=Qp;if(x&&p){var F=yn(x).hoistableScripts,W=$y(p),se=F.get(W);se||(se=x.querySelector(Ky(W)),se||(p=Oe({src:p,async:!0,type:"module"},v),(v=Gd.get(W))&&Wy(p,v),se=x.createElement("script"),Hr(se),Co(se,"link",p),x.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},F.set(W,se))}}function f1(p,v,x,F){var W=(W=Ea.current)?$m(W):null;if(!W)throw Error(r(446));switch(p){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(v=em(x.href),x=yn(W).hoistableStyles,F=x.get(v),F||(F={type:"style",instance:null,count:0,state:null},x.set(v,F)),F):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){p=em(x.href);var se=yn(W).hoistableStyles,Fe=se.get(p);if(Fe||(W=W.ownerDocument||W,Fe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},se.set(p,Fe),(se=W.querySelector(cA(p)))&&!se._p&&(Fe.instance=se,Fe.state.loading=5),Gd.has(p)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},Gd.set(p,x),se||sP(W,p,x,Fe.state))),v&&F===null)throw Error(r(528,""));return Fe}if(v&&F!==null)throw Error(r(529,""));return null;case"script":return v=x.async,x=x.src,typeof x=="string"&&v&&typeof v!="function"&&typeof v!="symbol"?(v=$y(x),x=yn(W).hoistableScripts,F=x.get(v),F||(F={type:"script",instance:null,count:0,state:null},x.set(v,F)),F):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,p))}}function em(p){return'href="'+Ys(p)+'"'}function cA(p){return'link[rel="stylesheet"]['+p+"]"}function WT(p){return Oe({},p,{"data-precedence":p.precedence,precedence:null})}function sP(p,v,x,F){p.querySelector('link[rel="preload"][as="style"]['+v+"]")?F.loading=1:(v=p.createElement("link"),F.preload=v,v.addEventListener("load",function(){return F.loading|=1}),v.addEventListener("error",function(){return F.loading|=2}),Co(v,"link",x),Hr(v),p.head.appendChild(v))}function $y(p){return'[src="'+Ys(p)+'"]'}function Ky(p){return"script[async]"+p}function up(p,v,x){if(v.count++,v.instance===null)switch(v.type){case"style":var F=p.querySelector('style[data-href~="'+Ys(x.href)+'"]');if(F)return v.instance=F,Hr(F),F;var W=Oe({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return F=(p.ownerDocument||p).createElement("style"),Hr(F),Co(F,"style",W),tm(F,x.precedence,p),v.instance=F;case"stylesheet":W=em(x.href);var se=p.querySelector(cA(W));if(se)return v.state.loading|=4,v.instance=se,Hr(se),se;F=WT(x),(W=Gd.get(W))&&Km(F,W),se=(p.ownerDocument||p).createElement("link"),Hr(se);var Fe=se;return Fe._p=new Promise(function(ut,Ft){Fe.onload=ut,Fe.onerror=Ft}),Co(se,"link",F),v.state.loading|=4,tm(se,x.precedence,p),v.instance=se;case"script":return se=$y(x.src),(W=p.querySelector(Ky(se)))?(v.instance=W,Hr(W),W):(F=x,(W=Gd.get(se))&&(F=Oe({},x),Wy(F,W)),p=p.ownerDocument||p,W=p.createElement("script"),Hr(W),Co(W,"link",F),p.head.appendChild(W),v.instance=W);case"void":return null;default:throw Error(r(443,v.type))}else v.type==="stylesheet"&&(v.state.loading&4)===0&&(F=v.instance,v.state.loading|=4,tm(F,x.precedence,p));return v.instance}function tm(p,v,x){for(var F=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),W=F.length?F[F.length-1]:null,se=W,Fe=0;Fe<F.length;Fe++){var ut=F[Fe];if(ut.dataset.precedence===v)se=ut;else if(se!==W)break}se?se.parentNode.insertBefore(p,se.nextSibling):(v=x.nodeType===9?x.head:x,v.insertBefore(p,v.firstChild))}function Km(p,v){p.crossOrigin==null&&(p.crossOrigin=v.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=v.referrerPolicy),p.title==null&&(p.title=v.title)}function Wy(p,v){p.crossOrigin==null&&(p.crossOrigin=v.crossOrigin),p.referrerPolicy==null&&(p.referrerPolicy=v.referrerPolicy),p.integrity==null&&(p.integrity=v.integrity)}var am=null;function p1(p,v,x){if(am===null){var F=new Map,W=am=new Map;W.set(x,F)}else W=am,F=W.get(x),F||(F=new Map,W.set(x,F));if(F.has(p))return F;for(F.set(p,null),x=x.getElementsByTagName(p),W=0;W<x.length;W++){var se=x[W];if(!(se[Vr]||se[Ht]||p==="link"&&se.getAttribute("rel")==="stylesheet")&&se.namespaceURI!=="http://www.w3.org/2000/svg"){var Fe=se.getAttribute(v)||"";Fe=p+Fe;var ut=F.get(Fe);ut?ut.push(se):F.set(Fe,[se])}}return F}function m1(p,v,x){p=p.ownerDocument||p,p.head.insertBefore(x,v==="title"?p.querySelector("head > title"):null)}function YT(p,v,x){if(x===1||v.itemProp!=null)return!1;switch(p){case"meta":case"title":return!0;case"style":if(typeof v.precedence!="string"||typeof v.href!="string"||v.href==="")break;return!0;case"link":if(typeof v.rel!="string"||typeof v.href!="string"||v.href===""||v.onLoad||v.onError)break;switch(v.rel){case"stylesheet":return p=v.disabled,typeof v.precedence=="string"&&p==null;default:return!0}case"script":if(v.async&&typeof v.async!="function"&&typeof v.async!="symbol"&&!v.onLoad&&!v.onError&&v.src&&typeof v.src=="string")return!0}return!1}function y1(p){return!(p.type==="stylesheet"&&(p.state.loading&3)===0)}var dA=null;function oP(){}function XT(p,v,x){if(dA===null)throw Error(r(475));var F=dA;if(v.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var W=em(x.href),se=p.querySelector(cA(W));if(se){p=se._p,p!==null&&typeof p=="object"&&typeof p.then=="function"&&(F.count++,F=hA.bind(F),p.then(F,F)),v.state.loading|=4,v.instance=se,Hr(se);return}se=p.ownerDocument||p,x=WT(x),(W=Gd.get(W))&&Km(x,W),se=se.createElement("link"),Hr(se);var Fe=se;Fe._p=new Promise(function(ut,Ft){Fe.onload=ut,Fe.onerror=Ft}),Co(se,"link",x),v.instance=se}F.stylesheets===null&&(F.stylesheets=new Map),F.stylesheets.set(v,p),(p=v.state.preload)&&(v.state.loading&3)===0&&(F.count++,v=hA.bind(F),p.addEventListener("load",v),p.addEventListener("error",v))}}function G0(){if(dA===null)throw Error(r(475));var p=dA;return p.stylesheets&&p.count===0&&Z0(p,p.stylesheets),0<p.count?function(v){var x=setTimeout(function(){if(p.stylesheets&&Z0(p,p.stylesheets),p.unsuspend){var F=p.unsuspend;p.unsuspend=null,F()}},6e4);return p.unsuspend=v,function(){p.unsuspend=null,clearTimeout(x)}}:null}function hA(){if(this.count--,this.count===0){if(this.stylesheets)Z0(this,this.stylesheets);else if(this.unsuspend){var p=this.unsuspend;this.unsuspend=null,p()}}}var j0=null;function Z0(p,v){p.stylesheets=null,p.unsuspend!==null&&(p.count++,j0=new Map,v.forEach(g1,p),j0=null,hA.call(p))}function g1(p,v){if(!(v.state.loading&4)){var x=j0.get(p);if(x)var F=x.get(null);else{x=new Map,j0.set(p,x);for(var W=p.querySelectorAll("link[data-precedence],style[data-precedence]"),se=0;se<W.length;se++){var Fe=W[se];(Fe.nodeName==="LINK"||Fe.getAttribute("media")!=="not all")&&(x.set(Fe.dataset.precedence,Fe),F=Fe)}F&&x.set(null,F)}W=v.instance,Fe=W.getAttribute("data-precedence"),se=x.get(Fe)||F,se===F&&x.set(null,W),x.set(Fe,W),this.count++,F=hA.bind(this),W.addEventListener("load",F),W.addEventListener("error",F),se?se.parentNode.insertBefore(W,se.nextSibling):(p=p.nodeType===9?p.head:p,p.insertBefore(W,p.firstChild)),v.state.loading|=4}}var Yy={$$typeof:U,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function JT(p,v,x,F,W,se,Fe,ut){this.tag=1,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=be(0),this.hiddenUpdates=be(null),this.identifierPrefix=F,this.onUncaughtError=W,this.onCaughtError=se,this.onRecoverableError=Fe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ut,this.incompleteTransitions=new Map}function A1(p,v,x,F,W,se,Fe,ut,Ft,oa,ja,rr){return p=new JT(p,v,x,Fe,ut,Ft,oa,rr),v=1,se===!0&&(v|=24),se=aa(3,null,null,v),p.current=se,se.stateNode=p,v=Uh(),v.refCount++,p.pooledCache=v,v.refCount++,se.memoizedState={element:F,isDehydrated:x,cache:v},yh(se),p}function _1(p){return p?(p=Uc,p):Uc}function v1(p,v,x,F,W,se){W=_1(W),F.context===null?F.context=W:F.pendingContext=W,F=Tf(v),F.payload={element:x},se=se===void 0?null:se,se!==null&&(F.callback=se),x=Sf(p,F,v),x!==null&&(Ol(x,p,v),Cf(x,p,v))}function QT(p,v){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var x=p.retryLane;p.retryLane=x!==0&&x<v?x:v}}function q0(p,v){QT(p,v),(p=p.alternate)&&QT(p,v)}function w1(p){if(p.tag===13){var v=Jo(p,67108864);v!==null&&Ol(v,p,67108864),q0(p,67108864)}}var rm=!0;function eS(p,v,x,F){var W=Te.T;Te.T=null;var se=We.p;try{We.p=2,R1(p,v,x,F)}finally{We.p=se,Te.T=W}}function tS(p,v,x,F){var W=Te.T;Te.T=null;var se=We.p;try{We.p=8,R1(p,v,x,F)}finally{We.p=se,Te.T=W}}function R1(p,v,x,F){if(rm){var W=T1(F);if(W===null)I0(p,v,F,H0,x),x1(p,F);else if(rS(W,p,v,x,F))F.stopPropagation();else if(x1(p,F),v&4&&-1<b1.indexOf(p)){for(;W!==null;){var se=Xn(W);if(se!==null)switch(se.tag){case 3:if(se=se.stateNode,se.current.memoizedState.isDehydrated){var Fe=Ei(se.pendingLanes);if(Fe!==0){var ut=se;for(ut.pendingLanes|=2,ut.entangledLanes|=2;Fe;){var Ft=1<<31-en(Fe);ut.entanglements[1]|=Ft,Fe&=~Ft}Hh(se),(xr&6)===0&&(yo=ka()+500,Jp(0))}}break;case 13:ut=Jo(se,2),ut!==null&&Ol(ut,se,2),b0(),q0(se,2)}if(se=T1(F),se===null&&I0(p,v,F,H0,x),se===W)break;W=se}W!==null&&F.stopPropagation()}else I0(p,v,F,null,x)}}function T1(p){return p=hr(p),S1(p)}var H0=null;function S1(p){if(H0=null,p=zn(p),p!==null){var v=ke(p);if(v===null)p=null;else{var x=v.tag;if(x===13){if(p=Je(v),p!==null)return p;p=null}else if(x===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;p=null}else v!==p&&(p=null)}}return H0=p,null}function aS(p){switch(p){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(jr()){case pn:return 2;case Dn:return 8;case Rn:case va:return 32;case Wa:return 268435456;default:return 32}default:return 32}}var C1=!1,nm=null,cp=null,im=null,fA=new Map,pA=new Map,Vf=[],b1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x1(p,v){switch(p){case"focusin":case"focusout":nm=null;break;case"dragenter":case"dragleave":cp=null;break;case"mouseover":case"mouseout":im=null;break;case"pointerover":case"pointerout":fA.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":pA.delete(v.pointerId)}}function Xy(p,v,x,F,W,se){return p===null||p.nativeEvent!==se?(p={blockedOn:v,domEventName:x,eventSystemFlags:F,nativeEvent:se,targetContainers:[W]},v!==null&&(v=Xn(v),v!==null&&w1(v)),p):(p.eventSystemFlags|=F,v=p.targetContainers,W!==null&&v.indexOf(W)===-1&&v.push(W),p)}function rS(p,v,x,F,W){switch(v){case"focusin":return nm=Xy(nm,p,v,x,F,W),!0;case"dragenter":return cp=Xy(cp,p,v,x,F,W),!0;case"mouseover":return im=Xy(im,p,v,x,F,W),!0;case"pointerover":var se=W.pointerId;return fA.set(se,Xy(fA.get(se)||null,p,v,x,F,W)),!0;case"gotpointercapture":return se=W.pointerId,pA.set(se,Xy(pA.get(se)||null,p,v,x,F,W)),!0}return!1}function P1(p){var v=zn(p.target);if(v!==null){var x=ke(v);if(x!==null){if(v=x.tag,v===13){if(v=Je(x),v!==null){p.blockedOn=v,Pt(p.priority,function(){if(x.tag===13){var F=go(),W=Jo(x,F);W!==null&&Ol(W,x,F),q0(x,F)}});return}}else if(v===3&&x.stateNode.current.memoizedState.isDehydrated){p.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}p.blockedOn=null}function mA(p){if(p.blockedOn!==null)return!1;for(var v=p.targetContainers;0<v.length;){var x=T1(p.nativeEvent);if(x===null){x=p.nativeEvent;var F=new x.constructor(x.type,x);lo=F,x.target.dispatchEvent(F),lo=null}else return v=Xn(x),v!==null&&w1(v),p.blockedOn=x,!1;v.shift()}return!0}function E1(p,v,x){mA(p)&&x.delete(v)}function nS(){C1=!1,nm!==null&&mA(nm)&&(nm=null),cp!==null&&mA(cp)&&(cp=null),im!==null&&mA(im)&&(im=null),fA.forEach(E1),pA.forEach(E1)}function yA(p,v){p.blockedOn===v&&(p.blockedOn=null,C1||(C1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nS)))}var Jy=null;function N1(p){Jy!==p&&(Jy=p,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jy===p&&(Jy=null);for(var v=0;v<p.length;v+=3){var x=p[v],F=p[v+1],W=p[v+2];if(typeof F!="function"){if(S1(F||x)===null)continue;break}var se=Xn(x);se!==null&&(p.splice(v,3),v-=3,Kc(se,{pending:!0,data:W,method:x.method,action:F},F,W))}}))}function gA(p){function v(Ft){return yA(Ft,p)}nm!==null&&yA(nm,p),cp!==null&&yA(cp,p),im!==null&&yA(im,p),fA.forEach(v),pA.forEach(v);for(var x=0;x<Vf.length;x++){var F=Vf[x];F.blockedOn===p&&(F.blockedOn=null)}for(;0<Vf.length&&(x=Vf[0],x.blockedOn===null);)P1(x),x.blockedOn===null&&Vf.shift();if(x=(p.ownerDocument||p).$$reactFormReplay,x!=null)for(F=0;F<x.length;F+=3){var W=x[F],se=x[F+1],Fe=W[Zt]||null;if(typeof se=="function")Fe||N1(x);else if(Fe){var ut=null;if(se&&se.hasAttribute("formAction")){if(W=se,Fe=se[Zt]||null)ut=Fe.formAction;else if(S1(W)!==null)continue}else ut=Fe.action;typeof ut=="function"?x[F+1]=ut:(x.splice(F,3),F-=3),N1(x)}}}function Wm(p){this._internalRoot=p}AA.prototype.render=Wm.prototype.render=function(p){var v=this._internalRoot;if(v===null)throw Error(r(409));var x=v.current,F=go();v1(x,F,p,v,null,null)},AA.prototype.unmount=Wm.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var v=p.containerInfo;p.tag===0&&_h(),v1(p.current,2,null,p,null,null),b0(),v[Ra]=null}};function AA(p){this._internalRoot=p}AA.prototype.unstable_scheduleHydration=function(p){if(p){var v=kt();p={blockedOn:null,target:p,priority:v};for(var x=0;x<Vf.length&&v!==0&&v<Vf[x].priority;x++);Vf.splice(x,0,p),x===0&&P1(p)}};var iS=e.version;if(iS!=="19.0.0")throw Error(r(527,iS,"19.0.0"));We.findDOMNode=function(p){var v=p._reactInternals;if(v===void 0)throw typeof p.render=="function"?Error(r(188)):(p=Object.keys(p).join(","),Error(r(268,p)));return p=qe(v),p=p!==null?ye(p):null,p=p===null?null:p.stateNode,p};var lP={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:Te,findFiberByHostInstance:zn,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$0.isDisabled&&$0.supportsFiber)try{yr=$0.inject(lP),jn=$0}catch{}}return Q1.createRoot=function(p,v){if(!s(p))throw Error(r(299));var x=!1,F="",W=Jf,se=Gh,Fe=ph,ut=null;return v!=null&&(v.unstable_strictMode===!0&&(x=!0),v.identifierPrefix!==void 0&&(F=v.identifierPrefix),v.onUncaughtError!==void 0&&(W=v.onUncaughtError),v.onCaughtError!==void 0&&(se=v.onCaughtError),v.onRecoverableError!==void 0&&(Fe=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(ut=v.unstable_transitionCallbacks)),v=A1(p,1,!1,null,null,x,F,W,se,Fe,ut,null),p[Ra]=v.current,M0(p.nodeType===8?p.parentNode:p),new Wm(v)},Q1.hydrateRoot=function(p,v,x){if(!s(p))throw Error(r(299));var F=!1,W="",se=Jf,Fe=Gh,ut=ph,Ft=null,oa=null;return x!=null&&(x.unstable_strictMode===!0&&(F=!0),x.identifierPrefix!==void 0&&(W=x.identifierPrefix),x.onUncaughtError!==void 0&&(se=x.onUncaughtError),x.onCaughtError!==void 0&&(Fe=x.onCaughtError),x.onRecoverableError!==void 0&&(ut=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Ft=x.unstable_transitionCallbacks),x.formState!==void 0&&(oa=x.formState)),v=A1(p,1,!0,v,x??null,F,W,se,Fe,ut,Ft,oa),v.context=_1(null),x=v.current,F=go(),W=Tf(F),W.callback=null,Sf(x,W,F),v.current.lanes=F,De(v,F),Hh(v),p[Ra]=v.current,M0(p),new AA(v)},Q1.version="19.0.0",Q1}var GF;function Mee(){if(GF)return rE.exports;GF=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rE.exports=Dee(),rE.exports}var Iee=Mee(),ew={},jF;function Lee(){if(jF)return ew;jF=1,Object.defineProperty(ew,"__esModule",{value:!0}),ew.parse=h,ew.serialize=T;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,a=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const k=function(){};return k.prototype=Object.create(null),k})();function h(k,U){const q=new l,H=k.length;if(H<2)return q;const $=(U==null?void 0:U.decode)||E;let Q=0;do{const ne=k.indexOf("=",Q);if(ne===-1)break;const de=k.indexOf(";",Q),ge=de===-1?H:de;if(ne>ge){Q=k.lastIndexOf(";",ne-1)+1;continue}const fe=n(k,Q,ne),_e=w(k,ne,fe),me=k.slice(fe,_e);if(q[me]===void 0){let Ae=n(k,ne+1,ge),Te=w(k,ge,Ae);const Oe=$(k.slice(Ae,Te));q[me]=Oe}Q=ge+1}while(Q<H);return q}function n(k,U,q){do{const H=k.charCodeAt(U);if(H!==32&&H!==9)return U}while(++U<q);return q}function w(k,U,q){for(;U>q;){const H=k.charCodeAt(--U);if(H!==32&&H!==9)return U+1}return q}function T(k,U,q){const H=(q==null?void 0:q.encode)||encodeURIComponent;if(!t.test(k))throw new TypeError(`argument name is invalid: ${k}`);const $=H(U);if(!e.test($))throw new TypeError(`argument val is invalid: ${U}`);let Q=k+"="+$;if(!q)return Q;if(q.maxAge!==void 0){if(!Number.isInteger(q.maxAge))throw new TypeError(`option maxAge is invalid: ${q.maxAge}`);Q+="; Max-Age="+q.maxAge}if(q.domain){if(!a.test(q.domain))throw new TypeError(`option domain is invalid: ${q.domain}`);Q+="; Domain="+q.domain}if(q.path){if(!r.test(q.path))throw new TypeError(`option path is invalid: ${q.path}`);Q+="; Path="+q.path}if(q.expires){if(!z(q.expires)||!Number.isFinite(q.expires.valueOf()))throw new TypeError(`option expires is invalid: ${q.expires}`);Q+="; Expires="+q.expires.toUTCString()}if(q.httpOnly&&(Q+="; HttpOnly"),q.secure&&(Q+="; Secure"),q.partitioned&&(Q+="; Partitioned"),q.priority)switch(typeof q.priority=="string"?q.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${q.priority}`)}if(q.sameSite)switch(typeof q.sameSite=="string"?q.sameSite.toLowerCase():q.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${q.sameSite}`)}return Q}function E(k){if(k.indexOf("%")===-1)return k;try{return decodeURIComponent(k)}catch{return k}}function z(k){return s.call(k)==="[object Date]"}return ew}Lee();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ZF="popstate";function Fee(t={}){function e(s,l){let{pathname:h="/",search:n="",hash:w=""}=h0(s.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),f5("",{pathname:h,search:n,hash:w},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(s,l){let h=s.document.querySelector("base"),n="";if(h&&h.getAttribute("href")){let w=s.location.href,T=w.indexOf("#");n=T===-1?w:w.slice(0,T)}return n+"#"+(typeof l=="string"?l:Gw(l))}function r(s,l){xp(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return kee(e,a,r,t)}function ll(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Uee(){return Math.random().toString(36).substring(2,10)}function qF(t,e){return{usr:t.state,key:t.key,idx:e}}function f5(t,e,a=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?h0(e):e,state:a,key:e&&e.key||r||Uee()}}function Gw({pathname:t="/",search:e="",hash:a=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function h0(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function kee(t,e,a,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,h=s.history,n="POP",w=null,T=E();T==null&&(T=0,h.replaceState({...h.state,idx:T},""));function E(){return(h.state||{idx:null}).idx}function z(){n="POP";let $=E(),Q=$==null?null:$-T;T=$,w&&w({action:n,location:H.location,delta:Q})}function k($,Q){n="PUSH";let ne=f5(H.location,$,Q);a&&a(ne,$),T=E()+1;let de=qF(ne,T),ge=H.createHref(ne);try{h.pushState(de,"",ge)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;s.location.assign(ge)}l&&w&&w({action:n,location:H.location,delta:1})}function U($,Q){n="REPLACE";let ne=f5(H.location,$,Q);a&&a(ne,$),T=E();let de=qF(ne,T),ge=H.createHref(ne);h.replaceState(de,"",ge),l&&w&&w({action:n,location:H.location,delta:0})}function q($){let Q=s.location.origin!=="null"?s.location.origin:s.location.href,ne=typeof $=="string"?$:Gw($);return ne=ne.replace(/ $/,"%20"),ll(Q,`No window.location.(origin|href) available to create URL for href: ${ne}`),new URL(ne,Q)}let H={get action(){return n},get location(){return t(s,h)},listen($){if(w)throw new Error("A history only accepts one active listener");return s.addEventListener(ZF,z),w=$,()=>{s.removeEventListener(ZF,z),w=null}},createHref($){return e(s,$)},createURL:q,encodeLocation($){let Q=q($);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:k,replace:U,go($){return h.go($)}};return H}function MZ(t,e,a="/"){return Bee(t,e,a,!1)}function Bee(t,e,a,r){let s=typeof e=="string"?h0(e):e,l=hy(s.pathname||"/",a);if(l==null)return null;let h=IZ(t);Gee(h);let n=null;for(let w=0;n==null&&w<h.length;++w){let T=Qee(l);n=Xee(h[w],T,r)}return n}function IZ(t,e=[],a=[],r=""){let s=(l,h,n)=>{let w={relativePath:n===void 0?l.path||"":n,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};w.relativePath.startsWith("/")&&(ll(w.relativePath.startsWith(r),`Absolute route path "${w.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(r.length));let T=ly([r,w.relativePath]),E=a.concat(w);l.children&&l.children.length>0&&(ll(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),IZ(l.children,e,E,T)),!(l.path==null&&!l.index)&&e.push({path:T,score:Wee(T,l.index),routesMeta:E})};return t.forEach((l,h)=>{var n;if(l.path===""||!((n=l.path)!=null&&n.includes("?")))s(l,h);else for(let w of LZ(l.path))s(l,h,w)}),e}function LZ(t){let e=t.split("/");if(e.length===0)return[];let[a,...r]=e,s=a.endsWith("?"),l=a.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let h=LZ(r.join("/")),n=[];return n.push(...h.map(w=>w===""?l:[l,w].join("/"))),s&&n.push(...h),n.map(w=>t.startsWith("/")&&w===""?"/":w)}function Gee(t){t.sort((e,a)=>e.score!==a.score?a.score-e.score:Yee(e.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var jee=/^:[\w-]+$/,Zee=3,qee=2,Hee=1,$ee=10,Kee=-2,HF=t=>t==="*";function Wee(t,e){let a=t.split("/"),r=a.length;return a.some(HF)&&(r+=Kee),e&&(r+=qee),a.filter(s=>!HF(s)).reduce((s,l)=>s+(jee.test(l)?Zee:l===""?Hee:$ee),r)}function Yee(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Xee(t,e,a=!1){let{routesMeta:r}=t,s={},l="/",h=[];for(let n=0;n<r.length;++n){let w=r[n],T=n===r.length-1,E=l==="/"?e:e.slice(l.length)||"/",z=GC({path:w.relativePath,caseSensitive:w.caseSensitive,end:T},E),k=w.route;if(!z&&T&&a&&!r[r.length-1].route.index&&(z=GC({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},E)),!z)return null;Object.assign(s,z.params),h.push({params:s,pathname:ly([l,z.pathname]),pathnameBase:rte(ly([l,z.pathnameBase])),route:k}),z.pathnameBase!=="/"&&(l=ly([l,z.pathnameBase]))}return h}function GC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=Jee(t.path,t.caseSensitive,t.end),s=e.match(a);if(!s)return null;let l=s[0],h=l.replace(/(.)\/+$/,"$1"),n=s.slice(1);return{params:r.reduce((T,{paramName:E,isOptional:z},k)=>{if(E==="*"){let q=n[k]||"";h=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const U=n[k];return z&&!U?T[E]=void 0:T[E]=(U||"").replace(/%2F/g,"/"),T},{}),pathname:l,pathnameBase:h,pattern:t}}function Jee(t,e=!1,a=!0){xp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,n,w)=>(r.push({paramName:n,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Qee(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xp(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function hy(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}function ete(t,e="/"){let{pathname:a,search:r="",hash:s=""}=typeof t=="string"?h0(t):t;return{pathname:a?a.startsWith("/")?a:tte(a,e):e,search:nte(r),hash:ite(s)}}function tte(t,e){let a=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function oE(t,e,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ate(t){return t.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function FZ(t){let e=ate(t);return e.map((a,r)=>r===e.length-1?a.pathname:a.pathnameBase)}function UZ(t,e,a,r=!1){let s;typeof t=="string"?s=h0(t):(s={...t},ll(!s.pathname||!s.pathname.includes("?"),oE("?","pathname","search",s)),ll(!s.pathname||!s.pathname.includes("#"),oE("#","pathname","hash",s)),ll(!s.search||!s.search.includes("#"),oE("#","search","hash",s)));let l=t===""||s.pathname==="",h=l?"/":s.pathname,n;if(h==null)n=a;else{let z=e.length-1;if(!r&&h.startsWith("..")){let k=h.split("/");for(;k[0]==="..";)k.shift(),z-=1;s.pathname=k.join("/")}n=z>=0?e[z]:"/"}let w=ete(s,n),T=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&a.endsWith("/");return!w.pathname.endsWith("/")&&(T||E)&&(w.pathname+="/"),w}var ly=t=>t.join("/").replace(/\/\/+/g,"/"),rte=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nte=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ite=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ste(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var kZ=["POST","PUT","PATCH","DELETE"];new Set(kZ);var ote=["GET",...kZ];new Set(ote);var xv=rt.createContext(null);xv.displayName="DataRouter";var gx=rt.createContext(null);gx.displayName="DataRouterState";var BZ=rt.createContext({isTransitioning:!1});BZ.displayName="ViewTransition";var lte=rt.createContext(new Map);lte.displayName="Fetchers";var ute=rt.createContext(null);ute.displayName="Await";var Em=rt.createContext(null);Em.displayName="Navigation";var HR=rt.createContext(null);HR.displayName="Location";var Ty=rt.createContext({outlet:null,matches:[],isDataRoute:!1});Ty.displayName="Route";var UM=rt.createContext(null);UM.displayName="RouteError";function cte(t,{relative:e}={}){ll($R(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=rt.useContext(Em),{hash:s,pathname:l,search:h}=KR(t,{relative:e}),n=l;return a!=="/"&&(n=l==="/"?a:ly([a,l])),r.createHref({pathname:n,search:h,hash:s})}function $R(){return rt.useContext(HR)!=null}function Vg(){return ll($R(),"useLocation() may be used only in the context of a <Router> component."),rt.useContext(HR).location}var GZ="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jZ(t){rt.useContext(Em).static||rt.useLayoutEffect(t)}function kM(){let{isDataRoute:t}=rt.useContext(Ty);return t?Tte():dte()}function dte(){ll($R(),"useNavigate() may be used only in the context of a <Router> component.");let t=rt.useContext(xv),{basename:e,navigator:a}=rt.useContext(Em),{matches:r}=rt.useContext(Ty),{pathname:s}=Vg(),l=JSON.stringify(FZ(r)),h=rt.useRef(!1);return jZ(()=>{h.current=!0}),rt.useCallback((w,T={})=>{if(xp(h.current,GZ),!h.current)return;if(typeof w=="number"){a.go(w);return}let E=UZ(w,JSON.parse(l),s,T.relative==="path");t==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:ly([e,E.pathname])),(T.replace?a.replace:a.push)(E,T.state,T)},[e,a,l,s,t])}rt.createContext(null);function KR(t,{relative:e}={}){let{matches:a}=rt.useContext(Ty),{pathname:r}=Vg(),s=JSON.stringify(FZ(a));return rt.useMemo(()=>UZ(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function hte(t,e){return ZZ(t,e)}function ZZ(t,e,a,r){var ne;ll($R(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=rt.useContext(Em),{matches:h}=rt.useContext(Ty),n=h[h.length-1],w=n?n.params:{},T=n?n.pathname:"/",E=n?n.pathnameBase:"/",z=n&&n.route;{let de=z&&z.path||"";qZ(T,!z||de.endsWith("*")||de.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${T}" (under <Route path="${de}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${de}"> to <Route path="${de==="/"?"*":`${de}/*`}">.`)}let k=Vg(),U;if(e){let de=typeof e=="string"?h0(e):e;ll(E==="/"||((ne=de.pathname)==null?void 0:ne.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${de.pathname}" was given in the \`location\` prop.`),U=de}else U=k;let q=U.pathname||"/",H=q;if(E!=="/"){let de=E.replace(/^\//,"").split("/");H="/"+q.replace(/^\//,"").split("/").slice(de.length).join("/")}let $=!l&&a&&a.matches&&a.matches.length>0?a.matches:MZ(t,{pathname:H});xp(z||$!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),xp($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=gte($&&$.map(de=>Object.assign({},de,{params:Object.assign({},w,de.params),pathname:ly([E,s.encodeLocation?s.encodeLocation(de.pathname).pathname:de.pathname]),pathnameBase:de.pathnameBase==="/"?E:ly([E,s.encodeLocation?s.encodeLocation(de.pathnameBase).pathname:de.pathnameBase])})),h,a,r);return e&&Q?rt.createElement(HR.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},Q):Q}function fte(){let t=Rte(),e=ste(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",t),h=rt.createElement(rt.Fragment,null,rt.createElement("p",null,"💿 Hey developer 👋"),rt.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",rt.createElement("code",{style:l},"ErrorBoundary")," or"," ",rt.createElement("code",{style:l},"errorElement")," prop on your route.")),rt.createElement(rt.Fragment,null,rt.createElement("h2",null,"Unexpected Application Error!"),rt.createElement("h3",{style:{fontStyle:"italic"}},e),a?rt.createElement("pre",{style:s},a):null,h)}var pte=rt.createElement(fte,null),mte=class extends rt.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?rt.createElement(Ty.Provider,{value:this.props.routeContext},rt.createElement(UM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yte({routeContext:t,match:e,children:a}){let r=rt.useContext(xv);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),rt.createElement(Ty.Provider,{value:t},a)}function gte(t,e=[],a=null,r=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(e.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let s=t,l=a==null?void 0:a.errors;if(l!=null){let w=s.findIndex(T=>T.route.id&&(l==null?void 0:l[T.route.id])!==void 0);ll(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,w+1))}let h=!1,n=-1;if(a)for(let w=0;w<s.length;w++){let T=s[w];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(n=w),T.route.id){let{loaderData:E,errors:z}=a,k=T.route.loader&&!E.hasOwnProperty(T.route.id)&&(!z||z[T.route.id]===void 0);if(T.route.lazy||k){h=!0,n>=0?s=s.slice(0,n+1):s=[s[0]];break}}}return s.reduceRight((w,T,E)=>{let z,k=!1,U=null,q=null;a&&(z=l&&T.route.id?l[T.route.id]:void 0,U=T.route.errorElement||pte,h&&(n<0&&E===0?(qZ("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,q=null):n===E&&(k=!0,q=T.route.hydrateFallbackElement||null)));let H=e.concat(s.slice(0,E+1)),$=()=>{let Q;return z?Q=U:k?Q=q:T.route.Component?Q=rt.createElement(T.route.Component,null):T.route.element?Q=T.route.element:Q=w,rt.createElement(yte,{match:T,routeContext:{outlet:w,matches:H,isDataRoute:a!=null},children:Q})};return a&&(T.route.ErrorBoundary||T.route.errorElement||E===0)?rt.createElement(mte,{location:a.location,revalidation:a.revalidation,component:U,error:z,children:$(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):$()},null)}function BM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ate(t){let e=rt.useContext(xv);return ll(e,BM(t)),e}function _te(t){let e=rt.useContext(gx);return ll(e,BM(t)),e}function vte(t){let e=rt.useContext(Ty);return ll(e,BM(t)),e}function GM(t){let e=vte(t),a=e.matches[e.matches.length-1];return ll(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function wte(){return GM("useRouteId")}function Rte(){var r;let t=rt.useContext(UM),e=_te("useRouteError"),a=GM("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[a]}function Tte(){let{router:t}=Ate("useNavigate"),e=GM("useNavigate"),a=rt.useRef(!1);return jZ(()=>{a.current=!0}),rt.useCallback(async(s,l={})=>{xp(a.current,GZ),a.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...l}))},[t,e])}var $F={};function qZ(t,e,a){!e&&!$F[t]&&($F[t]=!0,xp(!1,a))}rt.memo(Ste);function Ste({routes:t,future:e,state:a}){return ZZ(t,void 0,a,e)}function vp(t){ll(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Cte({basename:t="/",children:e=null,location:a,navigationType:r="POP",navigator:s,static:l=!1}){ll(!$R(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=t.replace(/^\/*/,"/"),n=rt.useMemo(()=>({basename:h,navigator:s,static:l,future:{}}),[h,s,l]);typeof a=="string"&&(a=h0(a));let{pathname:w="/",search:T="",hash:E="",state:z=null,key:k="default"}=a,U=rt.useMemo(()=>{let q=hy(w,h);return q==null?null:{location:{pathname:q,search:T,hash:E,state:z,key:k},navigationType:r}},[h,w,T,E,z,k,r]);return xp(U!=null,`<Router basename="${h}"> is not able to match the URL "${w}${T}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:rt.createElement(Em.Provider,{value:n},rt.createElement(HR.Provider,{children:e,value:U}))}function bte({children:t,location:e}){return hte(p5(t),e)}function p5(t,e=[]){let a=[];return rt.Children.forEach(t,(r,s)=>{if(!rt.isValidElement(r))return;let l=[...e,s];if(r.type===rt.Fragment){a.push.apply(a,p5(r.props.children,l));return}ll(r.type===vp,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ll(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=p5(r.props.children,l)),a.push(h)}),a}var yC="get",gC="application/x-www-form-urlencoded";function Ax(t){return t!=null&&typeof t.tagName=="string"}function xte(t){return Ax(t)&&t.tagName.toLowerCase()==="button"}function Pte(t){return Ax(t)&&t.tagName.toLowerCase()==="form"}function Ete(t){return Ax(t)&&t.tagName.toLowerCase()==="input"}function Nte(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vte(t,e){return t.button===0&&(!e||e==="_self")&&!Nte(t)}var kS=null;function zte(){if(kS===null)try{new FormData(document.createElement("form"),0),kS=!1}catch{kS=!0}return kS}var Ote=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lE(t){return t!=null&&!Ote.has(t)?(xp(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gC}"`),null):t}function Dte(t,e){let a,r,s,l,h;if(Pte(t)){let n=t.getAttribute("action");r=n?hy(n,e):null,a=t.getAttribute("method")||yC,s=lE(t.getAttribute("enctype"))||gC,l=new FormData(t)}else if(xte(t)||Ete(t)&&(t.type==="submit"||t.type==="image")){let n=t.form;if(n==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=t.getAttribute("formaction")||n.getAttribute("action");if(r=w?hy(w,e):null,a=t.getAttribute("formmethod")||n.getAttribute("method")||yC,s=lE(t.getAttribute("formenctype"))||lE(n.getAttribute("enctype"))||gC,l=new FormData(n,t),!zte()){let{name:T,type:E,value:z}=t;if(E==="image"){let k=T?`${T}.`:"";l.append(`${k}x`,"0"),l.append(`${k}y`,"0")}else T&&l.append(T,z)}}else{if(Ax(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=yC,r=null,s=gC,h=t}return l&&s==="text/plain"&&(h=l,l=void 0),{action:r,method:a.toLowerCase(),encType:s,formData:l,body:h}}function jM(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Mte(t,e){if(t.id in e)return e[t.id];try{let a=await import(t.module);return e[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ite(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Lte(t,e,a){let r=await Promise.all(t.map(async s=>{let l=e.routes[s.route.id];if(l){let h=await Mte(l,a);return h.links?h.links():[]}return[]}));return Bte(r.flat(1).filter(Ite).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function KF(t,e,a,r,s,l){let h=(w,T)=>a[T]?w.route.id!==a[T].route.id:!0,n=(w,T)=>{var E;return a[T].pathname!==w.pathname||((E=a[T].route.path)==null?void 0:E.endsWith("*"))&&a[T].params["*"]!==w.params["*"]};return l==="assets"?e.filter((w,T)=>h(w,T)||n(w,T)):l==="data"?e.filter((w,T)=>{var z;let E=r.routes[w.route.id];if(!E||!E.hasLoader)return!1;if(h(w,T)||n(w,T))return!0;if(w.route.shouldRevalidate){let k=w.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((z=a[0])==null?void 0:z.params)||{},nextUrl:new URL(t,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function Fte(t,e,{includeHydrateFallback:a}={}){return Ute(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),a&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function Ute(t){return[...new Set(t)]}function kte(t){let e={},a=Object.keys(t).sort();for(let r of a)e[r]=t[r];return e}function Bte(t,e){let a=new Set;return new Set(e),t.reduce((r,s)=>{let l=JSON.stringify(kte(s));return a.has(l)||(a.add(l),r.push({key:l,link:s})),r},[])}function Gte(t,e){let a=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a.pathname==="/"?a.pathname="_root.data":e&&hy(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.data`:a.pathname=`${a.pathname.replace(/\/$/,"")}.data`,a}function HZ(){let t=rt.useContext(xv);return jM(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function jte(){let t=rt.useContext(gx);return jM(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ZM=rt.createContext(void 0);ZM.displayName="FrameworkContext";function $Z(){let t=rt.useContext(ZM);return jM(t,"You must render this element inside a <HydratedRouter> element"),t}function Zte(t,e){let a=rt.useContext(ZM),[r,s]=rt.useState(!1),[l,h]=rt.useState(!1),{onFocus:n,onBlur:w,onMouseEnter:T,onMouseLeave:E,onTouchStart:z}=e,k=rt.useRef(null);rt.useEffect(()=>{if(t==="render"&&h(!0),t==="viewport"){let H=Q=>{Q.forEach(ne=>{h(ne.isIntersecting)})},$=new IntersectionObserver(H,{threshold:.5});return k.current&&$.observe(k.current),()=>{$.disconnect()}}},[t]),rt.useEffect(()=>{if(r){let H=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(H)}}},[r]);let U=()=>{s(!0)},q=()=>{s(!1),h(!1)};return a?t!=="intent"?[l,k,{}]:[l,k,{onFocus:tw(n,U),onBlur:tw(w,q),onMouseEnter:tw(T,U),onMouseLeave:tw(E,q),onTouchStart:tw(z,U)}]:[!1,k,{}]}function tw(t,e){return a=>{t&&t(a),a.defaultPrevented||e(a)}}function qte({page:t,...e}){let{router:a}=HZ(),r=rt.useMemo(()=>MZ(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?rt.createElement($te,{page:t,matches:r,...e}):null}function Hte(t){let{manifest:e,routeModules:a}=$Z(),[r,s]=rt.useState([]);return rt.useEffect(()=>{let l=!1;return Lte(t,e,a).then(h=>{l||s(h)}),()=>{l=!0}},[t,e,a]),r}function $te({page:t,matches:e,...a}){let r=Vg(),{manifest:s,routeModules:l}=$Z(),{basename:h}=HZ(),{loaderData:n,matches:w}=jte(),T=rt.useMemo(()=>KF(t,e,w,s,r,"data"),[t,e,w,s,r]),E=rt.useMemo(()=>KF(t,e,w,s,r,"assets"),[t,e,w,s,r]),z=rt.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let q=new Set,H=!1;if(e.forEach(Q=>{var de;let ne=s.routes[Q.route.id];!ne||!ne.hasLoader||(!T.some(ge=>ge.route.id===Q.route.id)&&Q.route.id in n&&((de=l[Q.route.id])!=null&&de.shouldRevalidate)||ne.hasClientLoader?H=!0:q.add(Q.route.id))}),q.size===0)return[];let $=Gte(t,h);return H&&q.size>0&&$.searchParams.set("_routes",e.filter(Q=>q.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[$.pathname+$.search]},[h,n,r,s,T,e,t,l]),k=rt.useMemo(()=>Fte(E,s),[E,s]),U=Hte(E);return rt.createElement(rt.Fragment,null,z.map(q=>rt.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...a})),k.map(q=>rt.createElement("link",{key:q,rel:"modulepreload",href:q,...a})),U.map(({key:q,link:H})=>rt.createElement("link",{key:q,...H})))}function Kte(...t){return e=>{t.forEach(a=>{typeof a=="function"?a(e):a!=null&&(a.current=e)})}}var KZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KZ&&(window.__reactRouterVersion="7.3.0")}catch{}function Wte({basename:t,children:e,window:a}){let r=rt.useRef();r.current==null&&(r.current=Fee({window:a,v5Compat:!0}));let s=r.current,[l,h]=rt.useState({action:s.action,location:s.location}),n=rt.useCallback(w=>{rt.startTransition(()=>h(w))},[h]);return rt.useLayoutEffect(()=>s.listen(n),[s,n]),rt.createElement(Cte,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:s})}var WZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YZ=rt.forwardRef(function({onClick:e,discover:a="render",prefetch:r="none",relative:s,reloadDocument:l,replace:h,state:n,target:w,to:T,preventScrollReset:E,viewTransition:z,...k},U){let{basename:q}=rt.useContext(Em),H=typeof T=="string"&&WZ.test(T),$,Q=!1;if(typeof T=="string"&&H&&($=T,KZ))try{let Te=new URL(window.location.href),Oe=T.startsWith("//")?new URL(Te.protocol+T):new URL(T),ie=hy(Oe.pathname,q);Oe.origin===Te.origin&&ie!=null?T=ie+Oe.search+Oe.hash:Q=!0}catch{xp(!1,`<Link to="${T}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=cte(T,{relative:s}),[de,ge,fe]=Zte(r,k),_e=Qte(T,{replace:h,state:n,target:w,preventScrollReset:E,relative:s,viewTransition:z});function me(Te){e&&e(Te),Te.defaultPrevented||_e(Te)}let Ae=rt.createElement("a",{...k,...fe,href:$||ne,onClick:Q||l?e:me,ref:Kte(U,ge),target:w,"data-discover":!H&&a==="render"?"true":void 0});return de&&!H?rt.createElement(rt.Fragment,null,Ae,rt.createElement(qte,{page:ne})):Ae});YZ.displayName="Link";var Yte=rt.forwardRef(function({"aria-current":e="page",caseSensitive:a=!1,className:r="",end:s=!1,style:l,to:h,viewTransition:n,children:w,...T},E){let z=KR(h,{relative:T.relative}),k=Vg(),U=rt.useContext(gx),{navigator:q,basename:H}=rt.useContext(Em),$=U!=null&&nae(z)&&n===!0,Q=q.encodeLocation?q.encodeLocation(z).pathname:z.pathname,ne=k.pathname,de=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;a||(ne=ne.toLowerCase(),de=de?de.toLowerCase():null,Q=Q.toLowerCase()),de&&H&&(de=hy(de,H)||de);const ge=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let fe=ne===Q||!s&&ne.startsWith(Q)&&ne.charAt(ge)==="/",_e=de!=null&&(de===Q||!s&&de.startsWith(Q)&&de.charAt(Q.length)==="/"),me={isActive:fe,isPending:_e,isTransitioning:$},Ae=fe?e:void 0,Te;typeof r=="function"?Te=r(me):Te=[r,fe?"active":null,_e?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let Oe=typeof l=="function"?l(me):l;return rt.createElement(YZ,{...T,"aria-current":Ae,className:Te,ref:E,style:Oe,to:h,viewTransition:n},typeof w=="function"?w(me):w)});Yte.displayName="NavLink";var Xte=rt.forwardRef(({discover:t="render",fetcherKey:e,navigate:a,reloadDocument:r,replace:s,state:l,method:h=yC,action:n,onSubmit:w,relative:T,preventScrollReset:E,viewTransition:z,...k},U)=>{let q=aae(),H=rae(n,{relative:T}),$=h.toLowerCase()==="get"?"get":"post",Q=typeof n=="string"&&WZ.test(n),ne=de=>{if(w&&w(de),de.defaultPrevented)return;de.preventDefault();let ge=de.nativeEvent.submitter,fe=(ge==null?void 0:ge.getAttribute("formmethod"))||h;q(ge||de.currentTarget,{fetcherKey:e,method:fe,navigate:a,replace:s,state:l,relative:T,preventScrollReset:E,viewTransition:z})};return rt.createElement("form",{ref:U,method:$,action:H,onSubmit:r?w:ne,...k,"data-discover":!Q&&t==="render"?"true":void 0})});Xte.displayName="Form";function Jte(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XZ(t){let e=rt.useContext(xv);return ll(e,Jte(t)),e}function Qte(t,{target:e,replace:a,state:r,preventScrollReset:s,relative:l,viewTransition:h}={}){let n=kM(),w=Vg(),T=KR(t,{relative:l});return rt.useCallback(E=>{if(Vte(E,e)){E.preventDefault();let z=a!==void 0?a:Gw(w)===Gw(T);n(t,{replace:z,state:r,preventScrollReset:s,relative:l,viewTransition:h})}},[w,n,T,a,r,e,t,s,l,h])}var eae=0,tae=()=>`__${String(++eae)}__`;function aae(){let{router:t}=XZ("useSubmit"),{basename:e}=rt.useContext(Em),a=wte();return rt.useCallback(async(r,s={})=>{let{action:l,method:h,encType:n,formData:w,body:T}=Dte(r,e);if(s.navigate===!1){let E=s.fetcherKey||tae();await t.fetch(E,a,s.action||l,{preventScrollReset:s.preventScrollReset,formData:w,body:T,formMethod:s.method||h,formEncType:s.encType||n,flushSync:s.flushSync})}else await t.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:w,body:T,formMethod:s.method||h,formEncType:s.encType||n,replace:s.replace,state:s.state,fromRouteId:a,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,a])}function rae(t,{relative:e}={}){let{basename:a}=rt.useContext(Em),r=rt.useContext(Ty);ll(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...KR(t||".",{relative:e})},h=Vg();if(t==null){l.search=h.search;let n=new URLSearchParams(l.search),w=n.getAll("index");if(w.some(E=>E==="")){n.delete("index"),w.filter(z=>z).forEach(z=>n.append("index",z));let E=n.toString();l.search=E?`?${E}`:""}}return(!t||t===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(l.pathname=l.pathname==="/"?a:ly([a,l.pathname])),Gw(l)}function nae(t,e={}){let a=rt.useContext(BZ);ll(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=XZ("useViewTransitionState"),s=KR(t,{relative:e.relative});if(!a.isTransitioning)return!1;let l=hy(a.currentLocation.pathname,r)||a.currentLocation.pathname,h=hy(a.nextLocation.pathname,r)||a.nextLocation.pathname;return GC(s.pathname,h)!=null||GC(s.pathname,l)!=null}new TextEncoder;var WF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JZ=function(t){const e=[];let a=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[a++]=s:s<2048?(e[a++]=s>>6|192,e[a++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[a++]=s>>18|240,e[a++]=s>>12&63|128,e[a++]=s>>6&63|128,e[a++]=s&63|128):(e[a++]=s>>12|224,e[a++]=s>>6&63|128,e[a++]=s&63|128)}return e},iae=function(t){const e=[];let a=0,r=0;for(;a<t.length;){const s=t[a++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=t[a++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=t[a++],h=t[a++],n=t[a++],w=((s&7)<<18|(l&63)<<12|(h&63)<<6|n&63)-65536;e[r++]=String.fromCharCode(55296+(w>>10)),e[r++]=String.fromCharCode(56320+(w&1023))}else{const l=t[a++],h=t[a++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|h&63)}}return e.join("")},QZ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const l=t[s],h=s+1<t.length,n=h?t[s+1]:0,w=s+2<t.length,T=w?t[s+2]:0,E=l>>2,z=(l&3)<<4|n>>4;let k=(n&15)<<2|T>>6,U=T&63;w||(U=64,h||(k=64)),r.push(a[E],a[z],a[k],a[U])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JZ(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iae(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const a=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const l=a[t.charAt(s++)],n=s<t.length?a[t.charAt(s)]:0;++s;const T=s<t.length?a[t.charAt(s)]:64;++s;const z=s<t.length?a[t.charAt(s)]:64;if(++s,l==null||n==null||T==null||z==null)throw new sae;const k=l<<2|n>>4;if(r.push(k),T!==64){const U=n<<4&240|T>>2;if(r.push(U),z!==64){const q=T<<6&192|z;r.push(q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oae=function(t){const e=JZ(t);return QZ.encodeByteArray(e,!0)},jC=function(t){return oae(t).replace(/\./g,"")},eq=function(t){try{return QZ.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uae=()=>lae().__FIREBASE_DEFAULTS__,cae=()=>{if(typeof process>"u"||typeof WF>"u")return;const t=WF.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dae=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eq(t[1]);return e&&JSON.parse(e)},qM=()=>{try{return uae()||cae()||dae()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tq=t=>{var e,a;return(a=(e=qM())===null||e===void 0?void 0:e.emulatorHosts)===null||a===void 0?void 0:a[t]},hae=t=>{const e=tq(t);if(!e)return;const a=e.lastIndexOf(":");if(a<=0||a+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(a+1),10);return e[0]==="["?[e.substring(1,a-1),r]:[e.substring(0,a),r]},aq=()=>{var t;return(t=qM())===null||t===void 0?void 0:t.config},rq=t=>{var e;return(e=qM())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}wrapCallback(e){return(a,r)=>{a?this.reject(a):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(a):e(a,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pae(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jC(JSON.stringify(a)),jC(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pd())}function yae(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gae(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Aae(){const t=pd();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _ae(){try{return typeof indexedDB=="object"}catch{return!1}}function vae(){return new Promise((t,e)=>{try{let a=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),a||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{a=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(a){e(a)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wae="FirebaseError";class Sy extends Error{constructor(e,a,r){super(a),this.code=e,this.customData=r,this.name=wae,Object.setPrototypeOf(this,Sy.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,WR.prototype.create)}}class WR{constructor(e,a,r){this.service=e,this.serviceName=a,this.errors=r}create(e,...a){const r=a[0]||{},s=`${this.service}/${e}`,l=this.errors[e],h=l?Rae(l,r):"Error",n=`${this.serviceName}: ${h} (${s}).`;return new Sy(s,n,r)}}function Rae(t,e){return t.replace(Tae,(a,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Tae=/\{\$([^}]+)}/g;function Sae(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ZC(t,e){if(t===e)return!0;const a=Object.keys(t),r=Object.keys(e);for(const s of a){if(!r.includes(s))return!1;const l=t[s],h=e[s];if(YF(l)&&YF(h)){if(!ZC(l,h))return!1}else if(l!==h)return!1}for(const s of r)if(!a.includes(s))return!1;return!0}function YF(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){const e=[];for(const[a,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(a)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(a)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Aw(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function _w(t){const e=t.indexOf("?");if(!e)return"";const a=t.indexOf("#",e);return t.substring(e,a>0?a:void 0)}function Cae(t,e){const a=new bae(t,e);return a.subscribe.bind(a)}class bae{constructor(e,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(a=>{a.next(e)})}error(e){this.forEachObserver(a=>{a.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,a,r){let s;if(e===void 0&&a===void 0&&r===void 0)throw new Error("Missing Observer.");xae(e,["next","error","complete"])?s=e:s={next:e,error:a,complete:r},s.next===void 0&&(s.next=uE),s.error===void 0&&(s.error=uE),s.complete===void 0&&(s.complete=uE);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,e)}sendOne(e,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{a(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xae(t,e){if(typeof t!="object"||t===null)return!1;for(const a of e)if(a in t&&typeof t[a]=="function")return!0;return!1}function uE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){return t&&t._delegate?t._delegate:t}class QA{constructor(e,a,r){this.name=e,this.instanceFactory=a,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pae{constructor(e,a){this.name=e,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const a=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(a)){const r=new fae;if(this.instancesDeferred.set(a,r),this.isInitialized(a)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:a});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(e){var a;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(a=e==null?void 0:e.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nae(e))try{this.getOrInitializeService({instanceIdentifier:VA})}catch{}for(const[a,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=VA){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...e.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=VA){return this.instances.has(e)}getOptions(e=VA){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:a={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:a});for(const[l,h]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(l);r===n&&h.resolve(s)}return s}onInit(e,a){var r;const s=this.normalizeInstanceIdentifier(a),l=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(s,l);const h=this.instances.get(s);return h&&e(h,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,a){const r=this.onInitCallbacks.get(a);if(r)for(const s of r)try{s(e,a)}catch{}}getOrInitializeService({instanceIdentifier:e,options:a={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Eae(e),options:a}),this.instances.set(e,r),this.instancesOptions.set(e,a),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=VA){return this.component?this.component.multipleInstances?e:VA:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Eae(t){return t===VA?void 0:t}function Nae(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const a=this.getProvider(e.name);if(a.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);a.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const a=new Pae(e,this);return this.providers.set(e,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(fs||(fs={}));const zae={debug:fs.DEBUG,verbose:fs.VERBOSE,info:fs.INFO,warn:fs.WARN,error:fs.ERROR,silent:fs.SILENT},Oae=fs.INFO,Dae={[fs.DEBUG]:"log",[fs.VERBOSE]:"log",[fs.INFO]:"info",[fs.WARN]:"warn",[fs.ERROR]:"error"},Mae=(t,e,...a)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Dae[e];if(s)console[s](`[${r}]  ${t.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class HM{constructor(e){this.name=e,this._logLevel=Oae,this._logHandler=Mae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fs))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fs.DEBUG,...e),this._logHandler(this,fs.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fs.VERBOSE,...e),this._logHandler(this,fs.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fs.INFO,...e),this._logHandler(this,fs.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fs.WARN,...e),this._logHandler(this,fs.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fs.ERROR,...e),this._logHandler(this,fs.ERROR,...e)}}const Iae=(t,e)=>e.some(a=>t instanceof a);let XF,JF;function Lae(){return XF||(XF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fae(){return JF||(JF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nq=new WeakMap,m5=new WeakMap,iq=new WeakMap,cE=new WeakMap,$M=new WeakMap;function Uae(t){const e=new Promise((a,r)=>{const s=()=>{t.removeEventListener("success",l),t.removeEventListener("error",h)},l=()=>{a(Rg(t.result)),s()},h=()=>{r(t.error),s()};t.addEventListener("success",l),t.addEventListener("error",h)});return e.then(a=>{a instanceof IDBCursor&&nq.set(a,t)}).catch(()=>{}),$M.set(e,t),e}function kae(t){if(m5.has(t))return;const e=new Promise((a,r)=>{const s=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",h),t.removeEventListener("abort",h)},l=()=>{a(),s()},h=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",l),t.addEventListener("error",h),t.addEventListener("abort",h)});m5.set(t,e)}let y5={get(t,e,a){if(t instanceof IDBTransaction){if(e==="done")return m5.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iq.get(t);if(e==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return Rg(t[e])},set(t,e,a){return t[e]=a,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Bae(t){y5=t(y5)}function Gae(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...a){const r=t.call(dE(this),e,...a);return iq.set(r,e.sort?e.sort():[e]),Rg(r)}:Fae().includes(t)?function(...e){return t.apply(dE(this),e),Rg(nq.get(this))}:function(...e){return Rg(t.apply(dE(this),e))}}function jae(t){return typeof t=="function"?Gae(t):(t instanceof IDBTransaction&&kae(t),Iae(t,Lae())?new Proxy(t,y5):t)}function Rg(t){if(t instanceof IDBRequest)return Uae(t);if(cE.has(t))return cE.get(t);const e=jae(t);return e!==t&&(cE.set(t,e),$M.set(e,t)),e}const dE=t=>$M.get(t);function Zae(t,e,{blocked:a,upgrade:r,blocking:s,terminated:l}={}){const h=indexedDB.open(t,e),n=Rg(h);return r&&h.addEventListener("upgradeneeded",w=>{r(Rg(h.result),w.oldVersion,w.newVersion,Rg(h.transaction),w)}),a&&h.addEventListener("blocked",w=>a(w.oldVersion,w.newVersion,w)),n.then(w=>{l&&w.addEventListener("close",()=>l()),s&&w.addEventListener("versionchange",T=>s(T.oldVersion,T.newVersion,T))}).catch(()=>{}),n}const qae=["get","getKey","getAll","getAllKeys","count"],Hae=["put","add","delete","clear"],hE=new Map;function QF(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hE.get(e))return hE.get(e);const a=e.replace(/FromIndex$/,""),r=e!==a,s=Hae.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(s||qae.includes(a)))return;const l=async function(h,...n){const w=this.transaction(h,s?"readwrite":"readonly");let T=w.store;return r&&(T=T.index(n.shift())),(await Promise.all([T[a](...n),s&&w.done]))[0]};return hE.set(e,l),l}Bae(t=>({...t,get:(e,a,r)=>QF(e,a)||t.get(e,a,r),has:(e,a)=>!!QF(e,a)||t.has(e,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(Kae(a)){const r=a.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(a=>a).join(" ")}}function Kae(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const g5="@firebase/app",e6="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new HM("@firebase/app"),Wae="@firebase/app-compat",Yae="@firebase/analytics-compat",Xae="@firebase/analytics",Jae="@firebase/app-check-compat",Qae="@firebase/app-check",ere="@firebase/auth",tre="@firebase/auth-compat",are="@firebase/database",rre="@firebase/database-compat",nre="@firebase/functions",ire="@firebase/functions-compat",sre="@firebase/installations",ore="@firebase/installations-compat",lre="@firebase/messaging",ure="@firebase/messaging-compat",cre="@firebase/performance",dre="@firebase/performance-compat",hre="@firebase/remote-config",fre="@firebase/remote-config-compat",pre="@firebase/storage",mre="@firebase/storage-compat",yre="@firebase/firestore",gre="@firebase/firestore-compat",Are="firebase",_re="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="[DEFAULT]",vre={[g5]:"fire-core",[Wae]:"fire-core-compat",[Xae]:"fire-analytics",[Yae]:"fire-analytics-compat",[Qae]:"fire-app-check",[Jae]:"fire-app-check-compat",[ere]:"fire-auth",[tre]:"fire-auth-compat",[are]:"fire-rtdb",[rre]:"fire-rtdb-compat",[nre]:"fire-fn",[ire]:"fire-fn-compat",[sre]:"fire-iid",[ore]:"fire-iid-compat",[lre]:"fire-fcm",[ure]:"fire-fcm-compat",[cre]:"fire-perf",[dre]:"fire-perf-compat",[hre]:"fire-rc",[fre]:"fire-rc-compat",[pre]:"fire-gcs",[mre]:"fire-gcs-compat",[yre]:"fire-fst",[gre]:"fire-fst-compat","fire-js":"fire-js",[Are]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=new Map,_5=new Map;function wre(t,e){try{t.container.addComponent(e)}catch(a){e0.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,a)}}function q_(t){const e=t.name;if(_5.has(e))return e0.debug(`There were multiple attempts to register component ${e}.`),!1;_5.set(e,t);for(const a of qC.values())wre(a,t);return!0}function KM(t,e){const a=t.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Tg=new WR("app","Firebase",Rre);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tre{constructor(e,a,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new QA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=_re;function sq(t,e={}){let a=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:A5,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Tg.create("bad-app-name",{appName:String(s)});if(a||(a=aq()),!a)throw Tg.create("no-options");const l=qC.get(s);if(l){if(ZC(a,l.options)&&ZC(r,l.config))return l;throw Tg.create("duplicate-app",{appName:s})}const h=new Vae(s);for(const w of _5.values())h.addComponent(w);const n=new Tre(a,r,h);return qC.set(s,n),n}function oq(t=A5){const e=qC.get(t);if(!e&&t===A5&&aq())return sq();if(!e)throw Tg.create("no-app",{appName:t});return e}function Sg(t,e,a){var r;let s=(r=vre[t])!==null&&r!==void 0?r:t;a&&(s+=`-${a}`);const l=s.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const n=[`Unable to register library "${s}" with version "${e}":`];l&&n.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&h&&n.push("and"),h&&n.push(`version name "${e}" contains illegal characters (whitespace or "/")`),e0.warn(n.join(" "));return}q_(new QA(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sre="firebase-heartbeat-database",Cre=1,jw="firebase-heartbeat-store";let fE=null;function lq(){return fE||(fE=Zae(Sre,Cre,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(jw)}}}).catch(t=>{throw Tg.create("idb-open",{originalErrorMessage:t.message})})),fE}async function bre(t){try{return await(await lq()).transaction(jw).objectStore(jw).get(uq(t))}catch(e){if(e instanceof Sy)e0.warn(e.message);else{const a=Tg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});e0.warn(a.message)}}}async function t6(t,e){try{const r=(await lq()).transaction(jw,"readwrite");await r.objectStore(jw).put(e,uq(t)),await r.done}catch(a){if(a instanceof Sy)e0.warn(a.message);else{const r=Tg.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});e0.warn(r.message)}}}function uq(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xre=1024,Pre=30*24*60*60*1e3;class Ere{constructor(e){this.container=e,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new Vre(a),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=a6();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=Pre}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=a6(),{heartbeatsToSend:a,unsentEntries:r}=Nre(this._heartbeatsCache.heartbeats),s=jC(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function a6(){return new Date().toISOString().substring(0,10)}function Nre(t,e=xre){const a=[];let r=t.slice();for(const s of t){const l=a.find(h=>h.agent===s.agent);if(l){if(l.dates.push(s.date),r6(a)>e){l.dates.pop();break}}else if(a.push({agent:s.agent,dates:[s.date]}),r6(a)>e){a.pop();break}r=r.slice(1)}return{heartbeatsToSend:a,unsentEntries:r}}class Vre{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _ae()?vae().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await bre(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var a;if(await this._canUseIndexedDBPromise){const s=await this.read();return t6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var a;if(await this._canUseIndexedDBPromise){const s=await this.read();return t6(this.app,{lastSentHeartbeatDate:(a=e.lastSentHeartbeatDate)!==null&&a!==void 0?a:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function r6(t){return jC(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zre(t){q_(new QA("platform-logger",e=>new $ae(e),"PRIVATE")),q_(new QA("heartbeat",e=>new Ere(e),"PRIVATE")),Sg(g5,e6,t),Sg(g5,e6,"esm2017"),Sg("fire-js","")}zre("");var Ore="firebase",Dre="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sg(Ore,Dre,"app");function WM(t,e){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(a[r[s]]=t[r[s]]);return a}function cq(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mre=cq,dq=new WR("auth","Firebase",cq());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new HM("@firebase/auth");function Ire(t,...e){HC.logLevel<=fs.WARN&&HC.warn(`Auth (${Pv}): ${t}`,...e)}function AC(t,...e){HC.logLevel<=fs.ERROR&&HC.error(`Auth (${Pv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,...e){throw YM(t,...e)}function vm(t,...e){return YM(t,...e)}function Lre(t,e,a){const r=Object.assign(Object.assign({},Mre()),{[e]:a});return new WR("auth","Firebase",r).create(e,{appName:t.name})}function YM(t,...e){if(typeof t!="string"){const a=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(a,...r)}return dq.create(t,...e)}function Qn(t,e,...a){if(!t)throw YM(e,...a)}function ty(t){const e="INTERNAL ASSERTION FAILED: "+t;throw AC(e),new Error(e)}function fy(t,e){t||ty(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Fre(){return n6()==="http:"||n6()==="https:"}function n6(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ure(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fre()||yae()||"connection"in navigator)?navigator.onLine:!0}function kre(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,a){this.shortDelay=e,this.longDelay=a,fy(a>e,"Short delay should be less than long delay!"),this.isMobile=mae()||gae()}get(){return Ure()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(t,e){fy(t.emulator,"Emulator should always be set here");const{url:a}=t.emulator;return e?`${a}${e.startsWith("/")?e.slice(1):e}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{static initialize(e,a,r){this.fetchImpl=e,a&&(this.headersImpl=a),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ty("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ty("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ty("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bre={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gre=new XR(3e4,6e4);function JR(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ev(t,e,a,r,s={}){return fq(t,s,async()=>{let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});const n=YR(Object.assign({key:t.config.apiKey},h)).slice(1),w=await t._getAdditionalHeaders();return w["Content-Type"]="application/json",t.languageCode&&(w["X-Firebase-Locale"]=t.languageCode),hq.fetch()(pq(t,t.config.apiHost,a,n),Object.assign({method:e,headers:w,referrerPolicy:"no-referrer"},l))})}async function fq(t,e,a){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Bre),e);try{const s=new jre(t),l=await Promise.race([a(),s.promise]);s.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw BS(t,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const n=l.ok?h.errorMessage:h.error.message,[w,T]=n.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw BS(t,"credential-already-in-use",h);if(w==="EMAIL_EXISTS")throw BS(t,"email-already-in-use",h);if(w==="USER_DISABLED")throw BS(t,"user-disabled",h);const E=r[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw Lre(t,E,T);Pp(t,E)}}catch(s){if(s instanceof Sy)throw s;Pp(t,"network-request-failed",{message:String(s)})}}async function _x(t,e,a,r,s={}){const l=await Ev(t,e,a,r,s);return"mfaPendingCredential"in l&&Pp(t,"multi-factor-auth-required",{_serverResponse:l}),l}function pq(t,e,a,r){const s=`${e}${a}?${r}`;return t.config.emulator?XM(t.config,s):`${t.config.apiScheme}://${s}`}class jre{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((a,r)=>{this.timer=setTimeout(()=>r(vm(this.auth,"network-request-failed")),Gre.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function BS(t,e,a){const r={appName:t.name};a.email&&(r.email=a.email),a.phoneNumber&&(r.phoneNumber=a.phoneNumber);const s=vm(t,e,r);return s.customData._tokenResponse=a,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zre(t,e){return Ev(t,"POST","/v1/accounts:delete",e)}async function qre(t,e){return Ev(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Hre(t,e=!1){const a=Iu(t),r=await a.getIdToken(e),s=JM(r);Qn(s&&s.exp&&s.auth_time&&s.iat,a.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Ew(pE(s.auth_time)),issuedAtTime:Ew(pE(s.iat)),expirationTime:Ew(pE(s.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function pE(t){return Number(t)*1e3}function JM(t){const[e,a,r]=t.split(".");if(e===void 0||a===void 0||r===void 0)return AC("JWT malformed, contained fewer than 3 sections"),null;try{const s=eq(a);return s?JSON.parse(s):(AC("Failed to decode base64 JWT payload"),null)}catch(s){return AC("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $re(t){const e=JM(t);return Qn(e,"internal-error"),Qn(typeof e.exp<"u","internal-error"),Qn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zw(t,e,a=!1){if(a)return e;try{return await e}catch(r){throw r instanceof Sy&&Kre(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Kre({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wre{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var a;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((a=this.user.stsTokenManager.expirationTime)!==null&&a!==void 0?a:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const a=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,a){this.createdAt=e,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ew(this.lastLoginAt),this.creationTime=Ew(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(t){var e;const a=t.auth,r=await t.getIdToken(),s=await Zw(t,qre(a,{idToken:r}));Qn(s==null?void 0:s.users.length,a,"internal-error");const l=s.users[0];t._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Jre(l.providerUserInfo):[],n=Xre(t.providerData,h),w=t.isAnonymous,T=!(t.email&&l.passwordHash)&&!(n!=null&&n.length),E=w?T:!1,z={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:n,metadata:new mq(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(t,z)}async function Yre(t){const e=Iu(t);await $C(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xre(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Jre(t){return t.map(e=>{var{providerId:a}=e,r=WM(e,["providerId"]);return{providerId:a,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qre(t,e){const a=await fq(t,{},async()=>{const r=YR({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=t.config,h=pq(t,s,"/v1/token",`key=${l}`),n=await t._getAdditionalHeaders();return n["Content-Type"]="application/x-www-form-urlencoded",hq.fetch()(h,{method:"POST",headers:n,body:r})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qn(e.idToken,"internal-error"),Qn(typeof e.idToken<"u","internal-error"),Qn(typeof e.refreshToken<"u","internal-error");const a="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$re(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,a)}async getToken(e,a=!1){return Qn(!this.accessToken||this.refreshToken,e,"user-token-expired"),!a&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,a){const{accessToken:r,refreshToken:s,expiresIn:l}=await Qre(e,a);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,a,r){this.refreshToken=a||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,a){const{refreshToken:r,accessToken:s,expirationTime:l}=a,h=new qw;return r&&(Qn(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),s&&(Qn(typeof s=="string","internal-error",{appName:e}),h.accessToken=s),l&&(Qn(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qw,this.toJSON())}_performRefresh(){return ty("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e){Qn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class HA{constructor(e){var{uid:a,auth:r,stsTokenManager:s}=e,l=WM(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wre(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new mq(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const a=await Zw(this,this.stsTokenManager.getToken(this.auth,e));return Qn(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(e){return Hre(this,e)}reload(){return Yre(this)}_assign(e){this!==e&&(Qn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(a=>Object.assign({},a)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const a=new HA(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(e){Qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,a=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),a&&await $C(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Zw(this,Zre(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,a){var r,s,l,h,n,w,T,E;const z=(r=a.displayName)!==null&&r!==void 0?r:void 0,k=(s=a.email)!==null&&s!==void 0?s:void 0,U=(l=a.phoneNumber)!==null&&l!==void 0?l:void 0,q=(h=a.photoURL)!==null&&h!==void 0?h:void 0,H=(n=a.tenantId)!==null&&n!==void 0?n:void 0,$=(w=a._redirectEventId)!==null&&w!==void 0?w:void 0,Q=(T=a.createdAt)!==null&&T!==void 0?T:void 0,ne=(E=a.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:de,emailVerified:ge,isAnonymous:fe,providerData:_e,stsTokenManager:me}=a;Qn(de&&me,e,"internal-error");const Ae=qw.fromJSON(this.name,me);Qn(typeof de=="string",e,"internal-error"),og(z,e.name),og(k,e.name),Qn(typeof ge=="boolean",e,"internal-error"),Qn(typeof fe=="boolean",e,"internal-error"),og(U,e.name),og(q,e.name),og(H,e.name),og($,e.name),og(Q,e.name),og(ne,e.name);const Te=new HA({uid:de,auth:e,email:k,emailVerified:ge,displayName:z,isAnonymous:fe,photoURL:q,phoneNumber:U,tenantId:H,stsTokenManager:Ae,createdAt:Q,lastLoginAt:ne});return _e&&Array.isArray(_e)&&(Te.providerData=_e.map(Oe=>Object.assign({},Oe))),$&&(Te._redirectEventId=$),Te}static async _fromIdTokenResponse(e,a,r=!1){const s=new qw;s.updateFromServerResponse(a);const l=new HA({uid:a.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $C(l),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new Map;function ay(t){fy(t instanceof Function,"Expected a class definition");let e=i6.get(t);return e?(fy(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,i6.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,a){this.storage[e]=a}async _get(e){const a=this.storage[e];return a===void 0?null:a}async _remove(e){delete this.storage[e]}_addListener(e,a){}_removeListener(e,a){}}yq.type="NONE";const s6=yq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e,a){return`firebase:${t}:${e}:${a}`}class N_{constructor(e,a,r){this.persistence=e,this.auth=a,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=_C(this.userKey,s.apiKey,l),this.fullPersistenceKey=_C("persistence",s.apiKey,l),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?HA._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,a,r="authUser"){if(!a.length)return new N_(ay(s6),e,r);const s=(await Promise.all(a.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let l=s[0]||ay(s6);const h=_C(r,e.config.apiKey,e.name);let n=null;for(const T of a)try{const E=await T._get(h);if(E){const z=HA._fromJSON(e,E);T!==l&&(n=z),l=T;break}}catch{}const w=s.filter(T=>T._shouldAllowMigration);return!l._shouldAllowMigration||!w.length?new N_(l,e,r):(l=w[0],n&&await l._set(h,n.toJSON()),await Promise.all(a.map(async T=>{if(T!==l)try{await T._remove(h)}catch{}})),new N_(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_q(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gq(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wq(e))return"Blackberry";if(Rq(e))return"Webos";if(QM(e))return"Safari";if((e.includes("chrome/")||Aq(e))&&!e.includes("edge/"))return"Chrome";if(vq(e))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(a);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gq(t=pd()){return/firefox\//i.test(t)}function QM(t=pd()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Aq(t=pd()){return/crios\//i.test(t)}function _q(t=pd()){return/iemobile/i.test(t)}function vq(t=pd()){return/android/i.test(t)}function wq(t=pd()){return/blackberry/i.test(t)}function Rq(t=pd()){return/webos/i.test(t)}function vx(t=pd()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ene(t=pd()){var e;return vx(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tne(){return Aae()&&document.documentMode===10}function Tq(t=pd()){return vx(t)||vq(t)||Rq(t)||wq(t)||/windows phone/i.test(t)||_q(t)}function ane(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(t,e=[]){let a;switch(t){case"Browser":a=o6(pd());break;case"Worker":a=`${o6(pd())}-${t}`;break;default:a=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${a}/JsCore/${Pv}/${r}`}async function Cq(t,e){return Ev(t,"GET","/v2/recaptchaConfig",JR(t,e))}function l6(t){return t!==void 0&&t.enterprise!==void 0}class bq{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(a=>a.provider==="EMAIL_PASSWORD_PROVIDER"&&a.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rne(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function xq(t){return new Promise((e,a)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const l=vm("internal-error");l.customData=s,a(l)},r.type="text/javascript",r.charset="UTF-8",rne().appendChild(r)})}function nne(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ine="https://www.google.com/recaptcha/enterprise.js?render=",sne="recaptcha-enterprise",one="NO_RECAPTCHA";class Pq{constructor(e){this.type=sne,this.auth=QR(e)}async verify(e="verify",a=!1){async function r(l){if(!a){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,n)=>{Cq(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)n(new Error("recaptcha Enterprise site key undefined"));else{const T=new bq(w);return l.tenantId==null?l._agentRecaptchaConfig=T:l._tenantRecaptchaConfigs[l.tenantId]=T,h(T.siteKey)}}).catch(w=>{n(w)})})}function s(l,h,n){const w=window.grecaptcha;l6(w)?w.enterprise.ready(()=>{w.enterprise.execute(l,{action:e}).then(T=>{h(T)}).catch(()=>{h(one)})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,h)=>{r(this.auth).then(n=>{if(!a&&l6(window.grecaptcha))s(n,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}xq(ine+n).then(()=>{s(n,l,h)}).catch(w=>{h(w)})}}).catch(n=>{h(n)})})}}async function u6(t,e,a,r=!1){const s=new Pq(t);let l;try{l=await s.verify(a)}catch{l=await s.verify(a,!0)}const h=Object.assign({},e);return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lne{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,a){const r=l=>new Promise((h,n)=>{try{const w=e(l);h(w)}catch(w){n(w)}});r.onAbort=a,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const a=[];try{for(const r of this.queue)await r(e),r.onAbort&&a.push(r.onAbort)}catch(r){a.reverse();for(const s of a)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class une{constructor(e,a,r,s){this.app=e,this.heartbeatServiceProvider=a,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c6(this),this.idTokenSubscription=new c6(this),this.beforeStateQueue=new lne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dq,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,a){return a&&(this._popupRedirectResolver=ay(a)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await N_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var a;const r=await this.assertedPersistence.getCurrentUser();let s=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId,n=s==null?void 0:s._redirectEventId,w=await this.tryRedirectSignIn(e);(!h||h===n)&&(w!=null&&w.user)&&(s=w.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Qn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(e){try{await $C(e)}catch(a){if((a==null?void 0:a.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kre()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const a=e?Iu(e):null;return a&&Qn(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(e,a=!1){if(!this._deleted)return e&&Qn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ay(e))})}async initializeRecaptchaConfig(){const e=await Cq(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),a=new bq(e);this.tenantId==null?this._agentRecaptchaConfig=a:this._tenantRecaptchaConfigs[this.tenantId]=a,a.emailPasswordEnabled&&new Pq(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new WR("auth","Firebase",e())}onAuthStateChanged(e,a,r){return this.registerStateListener(this.authStateSubscription,e,a,r)}beforeAuthStateChanged(e,a){return this.beforeStateQueue.pushCallback(e,a)}onIdTokenChanged(e,a,r){return this.registerStateListener(this.idTokenSubscription,e,a,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,a){const r=await this.getOrInitRedirectPersistenceManager(a);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const a=e&&ay(e)||this._popupRedirectResolver;Qn(a,this,"argument-error"),this.redirectPersistenceManager=await N_.create(this,[ay(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var a,r;return this._isInitialized&&await this.queue(async()=>{}),((a=this._currentUser)===null||a===void 0?void 0:a._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(a=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&a!==void 0?a:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,a,r,s){if(this._deleted)return()=>{};const l=typeof a=="function"?a:a.next.bind(a),h=this._isInitialized?Promise.resolve():this._initializationPromise;return Qn(h,this,"internal-error"),h.then(()=>l(this.currentUser)),typeof a=="function"?e.addObserver(a,r,s):e.addObserver(a)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sq(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const a={"X-Client-Version":this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(a["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(a["X-Firebase-AppCheck"]=s),a}async _getAppCheckToken(){var e;const a=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return a!=null&&a.error&&Ire(`Error while retrieving App Check token: ${a.error}`),a==null?void 0:a.token}}function QR(t){return Iu(t)}class c6{constructor(e){this.auth=e,this.observer=null,this.addObserver=Cae(a=>this.observer=a)}get next(){return Qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cne(t,e){const a=KM(t,"auth");if(a.isInitialized()){const s=a.getImmediate(),l=a.getOptions();if(ZC(l,e??{}))return s;Pp(s,"already-initialized")}return a.initialize({options:e})}function dne(t,e){const a=(e==null?void 0:e.persistence)||[],r=(Array.isArray(a)?a:[a]).map(ay);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hne(t,e,a){const r=QR(t);Qn(r._canInitEmulator,r,"emulator-config-failed"),Qn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=Eq(e),{host:h,port:n}=fne(e),w=n===null?"":`:${n}`;r.config.emulator={url:`${l}//${h}${w}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:h,port:n,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})}),pne()}function Eq(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fne(t){const e=Eq(t),a=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!a)return{host:"",port:null};const r=a[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:d6(r.substr(l.length+1))}}else{const[l,h]=r.split(":");return{host:l,port:d6(h)}}}function d6(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pne(){function t(){const e=document.createElement("p"),a=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,a){this.providerId=e,this.signInMethod=a}toJSON(){return ty("not implemented")}_getIdTokenResponse(e){return ty("not implemented")}_linkToIdToken(e,a){return ty("not implemented")}_getReauthenticationResolver(e){return ty("not implemented")}}async function mne(t,e){return Ev(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(t,e){return _x(t,"POST","/v1/accounts:signInWithPassword",JR(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yne(t,e){return _x(t,"POST","/v1/accounts:signInWithEmailLink",JR(t,e))}async function gne(t,e){return _x(t,"POST","/v1/accounts:signInWithEmailLink",JR(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends eI{constructor(e,a,r,s=null){super("password",r),this._email=e,this._password=a,this._tenantId=s}static _fromEmailAndPassword(e,a){return new Hw(e,a,"password")}static _fromEmailAndCode(e,a,r=null){return new Hw(e,a,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e;if(a!=null&&a.email&&(a!=null&&a.password)){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(e){var a;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((a=e._getRecaptchaConfig())===null||a===void 0)&&a.emailPasswordEnabled){const s=await u6(e,r,"signInWithPassword");return mE(e,s)}else return mE(e,r).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const l=await u6(e,r,"signInWithPassword");return mE(e,l)}else return Promise.reject(s)});case"emailLink":return yne(e,{email:this._email,oobCode:this._password});default:Pp(e,"internal-error")}}async _linkToIdToken(e,a){switch(this.signInMethod){case"password":return mne(e,{idToken:a,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return gne(e,{idToken:a,email:this._email,oobCode:this._password});default:Pp(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V_(t,e){return _x(t,"POST","/v1/accounts:signInWithIdp",JR(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ane="http://localhost";class t0 extends eI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const a=new t0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(a.idToken=e.idToken),e.accessToken&&(a.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(a.nonce=e.nonce),e.pendingToken&&(a.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(a.accessToken=e.oauthToken,a.secret=e.oauthTokenSecret):Pp("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const a=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=a,l=WM(a,["providerId","signInMethod"]);if(!r||!s)return null;const h=new t0(r,s);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const a=this.buildRequest();return V_(e,a)}_linkToIdToken(e,a){const r=this.buildRequest();return r.idToken=a,V_(e,r)}_getReauthenticationResolver(e){const a=this.buildRequest();return a.autoCreate=!1,V_(e,a)}buildRequest(){const e={requestUri:Ane,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),e.postBody=YR(a)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ne(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vne(t){const e=Aw(_w(t)).link,a=e?Aw(_w(e)).deep_link_id:null,r=Aw(_w(t)).deep_link_id;return(r?Aw(_w(r)).link:null)||r||a||e||t}class tI{constructor(e){var a,r,s,l,h,n;const w=Aw(_w(e)),T=(a=w.apiKey)!==null&&a!==void 0?a:null,E=(r=w.oobCode)!==null&&r!==void 0?r:null,z=_ne((s=w.mode)!==null&&s!==void 0?s:null);Qn(T&&E&&z,"argument-error"),this.apiKey=T,this.operation=z,this.code=E,this.continueUrl=(l=w.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=w.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(n=w.tenantId)!==null&&n!==void 0?n:null}static parseLink(e){const a=vne(e);try{return new tI(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.providerId=Nv.PROVIDER_ID}static credential(e,a){return Hw._fromEmailAndPassword(e,a)}static credentialWithLink(e,a){const r=tI.parseLink(a);return Qn(r,"argument-error"),Hw._fromEmailAndCode(e,r.code,r.tenantId)}}Nv.PROVIDER_ID="password";Nv.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Nv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Nq{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends eT{constructor(){super("facebook.com")}static credential(e){return t0._fromParams({providerId:fg.PROVIDER_ID,signInMethod:fg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fg.credentialFromTaggedObject(e)}static credentialFromError(e){return fg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fg.credential(e.oauthAccessToken)}catch{return null}}}fg.FACEBOOK_SIGN_IN_METHOD="facebook.com";fg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends eT{constructor(){super("google.com"),this.addScope("profile")}static credential(e,a){return t0._fromParams({providerId:pg.PROVIDER_ID,signInMethod:pg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:a})}static credentialFromResult(e){return pg.credentialFromTaggedObject(e)}static credentialFromError(e){return pg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:a,oauthAccessToken:r}=e;if(!a&&!r)return null;try{return pg.credential(a,r)}catch{return null}}}pg.GOOGLE_SIGN_IN_METHOD="google.com";pg.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg extends eT{constructor(){super("github.com")}static credential(e){return t0._fromParams({providerId:mg.PROVIDER_ID,signInMethod:mg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mg.credentialFromTaggedObject(e)}static credentialFromError(e){return mg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mg.credential(e.oauthAccessToken)}catch{return null}}}mg.GITHUB_SIGN_IN_METHOD="github.com";mg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends eT{constructor(){super("twitter.com")}static credential(e,a){return t0._fromParams({providerId:yg.PROVIDER_ID,signInMethod:yg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:a})}static credentialFromResult(e){return yg.credentialFromTaggedObject(e)}static credentialFromError(e){return yg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:a,oauthTokenSecret:r}=e;if(!a||!r)return null;try{return yg.credential(a,r)}catch{return null}}}yg.TWITTER_SIGN_IN_METHOD="twitter.com";yg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,a,r,s=!1){const l=await HA._fromIdTokenResponse(e,r,s),h=h6(r);return new H_({user:l,providerId:h,_tokenResponse:r,operationType:a})}static async _forOperation(e,a,r){await e._updateTokensIfNecessary(r,!0);const s=h6(r);return new H_({user:e,providerId:s,_tokenResponse:r,operationType:a})}}function h6(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC extends Sy{constructor(e,a,r,s){var l;super(a.code,a.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,KC.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:a.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,a,r,s){return new KC(e,a,r,s)}}function Vq(t,e,a,r){return(e==="reauthenticate"?a._getReauthenticationResolver(t):a._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?KC._fromErrorAndOperation(t,l,e,r):l})}async function wne(t,e,a=!1){const r=await Zw(t,e._linkToIdToken(t.auth,await t.getIdToken()),a);return H_._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rne(t,e,a=!1){const{auth:r}=t,s="reauthenticate";try{const l=await Zw(t,Vq(r,s,e,t),a);Qn(l.idToken,r,"internal-error");const h=JM(l.idToken);Qn(h,r,"internal-error");const{sub:n}=h;return Qn(t.uid===n,r,"user-mismatch"),H_._forOperation(t,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Pp(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zq(t,e,a=!1){const r="signIn",s=await Vq(t,r,e),l=await H_._fromIdTokenResponse(t,r,s);return a||await t._updateCurrentUser(l.user),l}async function Tne(t,e){return zq(QR(t),e)}function Sne(t,e,a){return Tne(Iu(t),Nv.credential(e,a))}function Cne(t,e,a,r){return Iu(t).onIdTokenChanged(e,a,r)}function bne(t,e,a){return Iu(t).beforeAuthStateChanged(e,a)}const WC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e,a){this.storageRetriever=e,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(WC,"1"),this.storage.removeItem(WC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,a){return this.storage.setItem(e,JSON.stringify(a)),Promise.resolve()}_get(e){const a=this.storage.getItem(e);return Promise.resolve(a?JSON.parse(a):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xne(){const t=pd();return QM(t)||vx(t)}const Pne=1e3,Ene=10;class Dq extends Oq{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,a)=>this.onStorageEvent(e,a),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=xne()&&ane(),this.fallbackToPolling=Tq(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const a of Object.keys(this.listeners)){const r=this.storage.getItem(a),s=this.localCache[a];r!==s&&e(a,s,r)}}onStorageEvent(e,a=!1){if(!e.key){this.forAllChangedKeys((h,n,w)=>{this.notifyListeners(h,w)});return}const r=e.key;if(a?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const h=this.storage.getItem(r);if(e.newValue!==h)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!a)return}const s=()=>{const h=this.storage.getItem(r);!a&&this.localCache[r]===h||this.notifyListeners(r,h)},l=this.storage.getItem(r);tne()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ene):s()}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,a,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:a,newValue:r}),!0)})},Pne)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,a){await super._set(e,a),this.localCache[e]=JSON.stringify(a)}async _get(e){const a=await super._get(e);return this.localCache[e]=JSON.stringify(a),a}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dq.type="LOCAL";const Nne=Dq;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq extends Oq{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,a){}_removeListener(e,a){}}Mq.type="SESSION";const Iq=Mq;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vne(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const a=this.receivers.find(s=>s.isListeningto(e));if(a)return a;const r=new wx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const a=e,{eventId:r,eventType:s,data:l}=a.data,h=this.handlersMap[s];if(!(h!=null&&h.size))return;a.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const n=Array.from(h).map(async T=>T(a.origin,l)),w=await Vne(n);a.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:w})}_subscribe(e,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(a)}_unsubscribe(e,a){this.handlersMap[e]&&a&&this.handlersMap[e].delete(a),(!a||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t="",e=10){let a="";for(let r=0;r<e;r++)a+=Math.floor(Math.random()*10);return t+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zne{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,a,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,h;return new Promise((n,w)=>{const T=aI("",20);s.port1.start();const E=setTimeout(()=>{w(new Error("unsupported_event"))},r);h={messageChannel:s,onMessage(z){const k=z;if(k.data.eventId===T)switch(k.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),n(k.data.response);break;default:clearTimeout(E),clearTimeout(l),w(new Error("invalid_response"));break}}},this.handlers.add(h),s.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:T,data:a},[s.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(){return window}function One(t){wm().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(){return typeof wm().WorkerGlobalScope<"u"&&typeof wm().importScripts=="function"}async function Dne(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mne(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Ine(){return Lq()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq="firebaseLocalStorageDb",Lne=1,YC="firebaseLocalStorage",Uq="fbase_key";class tT{constructor(e){this.request=e}toPromise(){return new Promise((e,a)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function Rx(t,e){return t.transaction([YC],e?"readwrite":"readonly").objectStore(YC)}function Fne(){const t=indexedDB.deleteDatabase(Fq);return new tT(t).toPromise()}function w5(){const t=indexedDB.open(Fq,Lne);return new Promise((e,a)=>{t.addEventListener("error",()=>{a(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(YC,{keyPath:Uq})}catch(s){a(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(YC)?e(r):(r.close(),await Fne(),e(await w5()))})})}async function f6(t,e,a){const r=Rx(t,!0).put({[Uq]:e,value:a});return new tT(r).toPromise()}async function Une(t,e){const a=Rx(t,!1).get(e),r=await new tT(a).toPromise();return r===void 0?null:r.value}function p6(t,e){const a=Rx(t,!0).delete(e);return new tT(a).toPromise()}const kne=800,Bne=3;class kq{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await w5(),this.db)}async _withRetries(e){let a=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(a++>Bne)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lq()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wx._getInstance(Ine()),this.receiver._subscribe("keyChanged",async(e,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(e,a)=>["keyChanged"])}async initializeSender(){var e,a;if(this.activeServiceWorker=await Dne(),!this.activeServiceWorker)return;this.sender=new zne(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((a=r[0])===null||a===void 0)&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mne()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await w5();return await f6(e,WC,"1"),await p6(e,WC),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,a){return this._withPendingWrite(async()=>(await this._withRetries(r=>f6(r,e,a)),this.localCache[e]=a,this.notifyServiceWorker(e)))}async _get(e){const a=await this._withRetries(r=>Une(r,e));return this.localCache[e]=a,a}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(a=>p6(a,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Rx(s,!1).getAll();return new tT(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const a=[],r=new Set;for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),a.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),a.push(s));return a}notifyListeners(e,a){this.localCache[e]=a;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kne)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(a)}_removeListener(e,a){this.listeners[e]&&(this.listeners[e].delete(a),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kq.type="LOCAL";const Gne=kq;new XR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jne(t,e){return e?ay(e):(Qn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI extends eI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return V_(e,this._buildIdpRequest())}_linkToIdToken(e,a){return V_(e,this._buildIdpRequest(a))}_getReauthenticationResolver(e){return V_(e,this._buildIdpRequest())}_buildIdpRequest(e){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(a.idToken=e),a}}function Zne(t){return zq(t.auth,new rI(t),t.bypassAuthState)}function qne(t){const{auth:e,user:a}=t;return Qn(a,e,"internal-error"),Rne(a,new rI(t),t.bypassAuthState)}async function Hne(t){const{auth:e,user:a}=t;return Qn(a,e,"internal-error"),wne(a,new rI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,a,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(e,a)=>{this.pendingPromise={resolve:e,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:a,sessionId:r,postBody:s,tenantId:l,error:h,type:n}=e;if(h){this.reject(h);return}const w={auth:this.auth,requestUri:a,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(n)(w))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zne;case"linkViaPopup":case"linkViaRedirect":return Hne;case"reauthViaPopup":case"reauthViaRedirect":return qne;default:Pp(this.auth,"internal-error")}}resolve(e){fy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fy(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ne=new XR(2e3,1e4);class w_ extends Bq{constructor(e,a,r,s,l){super(e,a,s,l),this.provider=r,this.authWindow=null,this.pollId=null,w_.currentPopupAction&&w_.currentPopupAction.cancel(),w_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qn(e,this.auth,"internal-error"),e}async onExecution(){fy(this.filter.length===1,"Popup operations only handle one event");const e=aI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(vm(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w_.currentPopupAction=null}pollUserCancellation(){const e=()=>{var a,r;if(!((r=(a=this.authWindow)===null||a===void 0?void 0:a.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vm(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$ne.get())};e()}}w_.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kne="pendingRedirect",vC=new Map;class Wne extends Bq{constructor(e,a,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,r),this.eventId=null}async execute(){let e=vC.get(this.auth._key());if(!e){try{const r=await Yne(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(a){e=()=>Promise.reject(a)}vC.set(this.auth._key(),e)}return this.bypassAuthState||vC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const a=await this.auth._redirectUserForId(e.eventId);if(a)return this.user=a,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yne(t,e){const a=Qne(e),r=Jne(t);if(!await r._isAvailable())return!1;const s=await r._get(a)==="true";return await r._remove(a),s}function Xne(t,e){vC.set(t._key(),e)}function Jne(t){return ay(t._redirectPersistence)}function Qne(t){return _C(Kne,t.config.apiKey,t.name)}async function eie(t,e,a=!1){const r=QR(t),s=jne(r,e),h=await new Wne(r,s,a).execute();return h&&!a&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tie=10*60*1e3;class aie{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let a=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(a=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rie(e)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=e,a=!0)),a}sendToConsumer(e,a){var r;if(e.error&&!Gq(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";a.onError(vm(this.auth,s))}else a.onAuthEvent(e)}isEventForConsumer(e,a){const r=a.eventId===null||!!e.eventId&&e.eventId===a.eventId;return a.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tie&&this.cachedEventUids.clear(),this.cachedEventUids.has(m6(e))}saveEventToCache(e){this.cachedEventUids.add(m6(e)),this.lastProcessedEventTime=Date.now()}}function m6(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Gq({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rie(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gq(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nie(t,e={}){return Ev(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iie=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sie=/^https?/;async function oie(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nie(t);for(const a of e)try{if(lie(a))return}catch{}Pp(t,"unauthorized-domain")}function lie(t){const e=v5(),{protocol:a,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const h=new URL(t);return h.hostname===""&&r===""?a==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):a==="chrome-extension:"&&h.hostname===r}if(!sie.test(a))return!1;if(iie.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uie=new XR(3e4,6e4);function y6(){const t=wm().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let a=0;a<t.CP.length;a++)t.CP[a]=null}}function cie(t){return new Promise((e,a)=>{var r,s,l;function h(){y6(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y6(),a(vm(t,"network-request-failed"))},timeout:uie.get()})}if(!((s=(r=wm().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=wm().gapi)===null||l===void 0)&&l.load)h();else{const n=nne("iframefcb");return wm()[n]=()=>{gapi.load?h():a(vm(t,"network-request-failed"))},xq(`https://apis.google.com/js/api.js?onload=${n}`).catch(w=>a(w))}}).catch(e=>{throw wC=null,e})}let wC=null;function die(t){return wC=wC||cie(t),wC}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hie=new XR(5e3,15e3),fie="__/auth/iframe",pie="emulator/auth/iframe",mie={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yie=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gie(t){const e=t.config;Qn(e.authDomain,t,"auth-domain-config-required");const a=e.emulator?XM(e,pie):`https://${t.config.authDomain}/${fie}`,r={apiKey:e.apiKey,appName:t.name,v:Pv},s=yie.get(t.config.apiHost);s&&(r.eid=s);const l=t._getFrameworks();return l.length&&(r.fw=l.join(",")),`${a}?${YR(r).slice(1)}`}async function Aie(t){const e=await die(t),a=wm().gapi;return Qn(a,t,"internal-error"),e.open({where:document.body,url:gie(t),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mie,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const h=vm(t,"network-request-failed"),n=wm().setTimeout(()=>{l(h)},hie.get());function w(){wm().clearTimeout(n),s(r)}r.ping(w).then(w,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ie={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vie=500,wie=600,Rie="_blank",Tie="http://localhost";class g6{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sie(t,e,a,r=vie,s=wie){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let n="";const w=Object.assign(Object.assign({},_ie),{width:r.toString(),height:s.toString(),top:l,left:h}),T=pd().toLowerCase();a&&(n=Aq(T)?Rie:a),gq(T)&&(e=e||Tie,w.scrollbars="yes");const E=Object.entries(w).reduce((k,[U,q])=>`${k}${U}=${q},`,"");if(ene(T)&&n!=="_self")return Cie(e||"",n),new g6(null);const z=window.open(e||"",n,E);Qn(z,t,"popup-blocked");try{z.focus()}catch{}return new g6(z)}function Cie(t,e){const a=document.createElement("a");a.href=t,a.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bie="__/auth/handler",xie="emulator/auth/handler",Pie=encodeURIComponent("fac");async function A6(t,e,a,r,s,l){Qn(t.config.authDomain,t,"auth-domain-config-required"),Qn(t.config.apiKey,t,"invalid-api-key");const h={apiKey:t.config.apiKey,appName:t.name,authType:a,redirectUrl:r,v:Pv,eventId:s};if(e instanceof Nq){e.setDefaultLanguage(t.languageCode),h.providerId=e.providerId||"",Sae(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,z]of Object.entries({}))h[E]=z}if(e instanceof eT){const E=e.getScopes().filter(z=>z!=="");E.length>0&&(h.scopes=E.join(","))}t.tenantId&&(h.tid=t.tenantId);const n=h;for(const E of Object.keys(n))n[E]===void 0&&delete n[E];const w=await t._getAppCheckToken(),T=w?`#${Pie}=${encodeURIComponent(w)}`:"";return`${Eie(t)}?${YR(n).slice(1)}${T}`}function Eie({config:t}){return t.emulator?XM(t,xie):`https://${t.authDomain}/${bie}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="webStorageSupport";class Nie{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Iq,this._completeRedirectFn=eie,this._overrideRedirectResult=Xne}async _openPopup(e,a,r,s){var l;fy((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await A6(e,a,r,v5(),s);return Sie(e,h,aI())}async _openRedirect(e,a,r,s){await this._originValidation(e);const l=await A6(e,a,r,v5(),s);return One(l),new Promise(()=>{})}_initialize(e){const a=e._key();if(this.eventManagers[a]){const{manager:s,promise:l}=this.eventManagers[a];return s?Promise.resolve(s):(fy(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[a]={promise:r},r.catch(()=>{delete this.eventManagers[a]}),r}async initAndGetManager(e){const a=await Aie(e),r=new aie(e);return a.register("authEvent",s=>(Qn(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=a,r}_isIframeWebStorageSupported(e,a){this.iframes[e._key()].send(yE,{type:yE},s=>{var l;const h=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[yE];h!==void 0&&a(!!h),Pp(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const a=e._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=oie(e)),this.originValidationPromises[a]}get _shouldInitProactively(){return Tq()||QM()||vx()}}const Vie=Nie;var _6="@firebase/auth",v6="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zie{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const a=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,a),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const a=this.internalListeners.get(e);a&&(this.internalListeners.delete(e),a(),this.updateProactiveRefresh())}assertAuthConfigured(){Qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oie(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Die(t){q_(new QA("auth",(e,{options:a})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:n}=r.options;Qn(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const w={apiKey:h,authDomain:n,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sq(t)},T=new une(r,s,l,w);return dne(T,a),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,a,r)=>{e.getProvider("auth-internal").initialize()})),q_(new QA("auth-internal",e=>{const a=QR(e.getProvider("auth").getImmediate());return(r=>new zie(r))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),Sg(_6,v6,Oie(t)),Sg(_6,v6,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mie=5*60,Iie=rq("authIdTokenMaxAge")||Mie;let w6=null;const Lie=t=>async e=>{const a=e&&await e.getIdTokenResult(),r=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(r&&r>Iie)return;const s=a==null?void 0:a.token;w6!==s&&(w6=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Fie(t=oq()){const e=KM(t,"auth");if(e.isInitialized())return e.getImmediate();const a=cne(t,{popupRedirectResolver:Vie,persistence:[Gne,Nne,Iq]}),r=rq("authTokenSyncURL");if(r){const l=Lie(r);bne(a,l,()=>l(a.currentUser)),Cne(a,h=>l(h))}const s=tq("auth");return s&&hne(a,`http://${s}`),a}Die("Browser");var Uie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br,nI=nI||{},ii=Uie||self;function Tx(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Sx(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function kie(t,e,a){return t.call.apply(t.bind,arguments)}function Bie(t,e,a){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function dd(t,e,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?dd=kie:dd=Bie,dd.apply(null,arguments)}function GS(t,e){var a=Array.prototype.slice.call(arguments,1);return function(){var r=a.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ac(t,e){function a(){}a.prototype=e.prototype,t.$=e.prototype,t.prototype=new a,t.prototype.constructor=t,t.ac=function(r,s,l){for(var h=Array(arguments.length-2),n=2;n<arguments.length;n++)h[n-2]=arguments[n];return e.prototype[s].apply(r,h)}}function zg(){this.s=this.s,this.o=this.o}var Gie=0;zg.prototype.s=!1;zg.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Gie!=0)};zg.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const jq=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let a=0;a<t.length;a++)if(a in t&&t[a]===e)return a;return-1};function iI(t){const e=t.length;if(0<e){const a=Array(e);for(let r=0;r<e;r++)a[r]=t[r];return a}return[]}function R6(t,e){for(let a=1;a<arguments.length;a++){const r=arguments[a];if(Tx(r)){const s=t.length||0,l=r.length||0;t.length=s+l;for(let h=0;h<l;h++)t[s+h]=r[h]}else t.push(r)}}function hd(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}hd.prototype.h=function(){this.defaultPrevented=!0};var jie=function(){if(!ii.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ii.addEventListener("test",()=>{},e),ii.removeEventListener("test",()=>{},e)}catch{}return t}();function $w(t){return/^[\s\xa0]*$/.test(t)}function Cx(){var t=ii.navigator;return t&&(t=t.userAgent)?t:""}function pm(t){return Cx().indexOf(t)!=-1}function sI(t){return sI[" "](t),t}sI[" "]=function(){};function Zie(t,e){var a=Lse;return Object.prototype.hasOwnProperty.call(a,t)?a[t]:a[t]=e(t)}var qie=pm("Opera"),$_=pm("Trident")||pm("MSIE"),Zq=pm("Edge"),R5=Zq||$_,qq=pm("Gecko")&&!(Cx().toLowerCase().indexOf("webkit")!=-1&&!pm("Edge"))&&!(pm("Trident")||pm("MSIE"))&&!pm("Edge"),Hie=Cx().toLowerCase().indexOf("webkit")!=-1&&!pm("Edge");function Hq(){var t=ii.document;return t?t.documentMode:void 0}var T5;e:{var gE="",AE=function(){var t=Cx();if(qq)return/rv:([^\);]+)(\)|;)/.exec(t);if(Zq)return/Edge\/([\d\.]+)/.exec(t);if($_)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Hie)return/WebKit\/(\S+)/.exec(t);if(qie)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(AE&&(gE=AE?AE[1]:""),$_){var _E=Hq();if(_E!=null&&_E>parseFloat(gE)){T5=String(_E);break e}}T5=gE}var S5;if(ii.document&&$_){var T6=Hq();S5=T6||parseInt(T5,10)||void 0}else S5=void 0;var $ie=S5;function Kw(t,e){if(hd.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var a=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(qq){e:{try{sI(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else a=="mouseover"?e=t.fromElement:a=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Kie[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Kw.$.h.call(this)}}ac(Kw,hd);var Kie={2:"touch",3:"pen",4:"mouse"};Kw.prototype.h=function(){Kw.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var bx="closure_listenable_"+(1e6*Math.random()|0),Wie=0;function Yie(t,e,a,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=a,this.capture=!!r,this.la=s,this.key=++Wie,this.fa=this.ia=!1}function xx(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function oI(t,e,a){for(const r in t)e.call(a,t[r],r,t)}function Xie(t,e){for(const a in t)e.call(void 0,t[a],a,t)}function $q(t){const e={};for(const a in t)e[a]=t[a];return e}const S6="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kq(t,e){let a,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(a in r)t[a]=r[a];for(let l=0;l<S6.length;l++)a=S6[l],Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}}function Px(t){this.src=t,this.g={},this.h=0}Px.prototype.add=function(t,e,a,r,s){var l=t.toString();t=this.g[l],t||(t=this.g[l]=[],this.h++);var h=b5(t,e,r,s);return-1<h?(e=t[h],a||(e.ia=!1)):(e=new Yie(e,this.src,l,!!r,s),e.ia=a,t.push(e)),e};function C5(t,e){var a=e.type;if(a in t.g){var r=t.g[a],s=jq(r,e),l;(l=0<=s)&&Array.prototype.splice.call(r,s,1),l&&(xx(e),t.g[a].length==0&&(delete t.g[a],t.h--))}}function b5(t,e,a,r){for(var s=0;s<t.length;++s){var l=t[s];if(!l.fa&&l.listener==e&&l.capture==!!a&&l.la==r)return s}return-1}var lI="closure_lm_"+(1e6*Math.random()|0),vE={};function Wq(t,e,a,r,s){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Wq(t,e[l],a,r,s);return null}return a=Jq(a),t&&t[bx]?t.O(e,a,Sx(r)?!!r.capture:!1,s):Jie(t,e,a,!1,r,s)}function Jie(t,e,a,r,s,l){if(!e)throw Error("Invalid event type");var h=Sx(s)?!!s.capture:!!s,n=cI(t);if(n||(t[lI]=n=new Px(t)),a=n.add(e,a,r,h,l),a.proxy)return a;if(r=Qie(),a.proxy=r,r.src=t,r.listener=a,t.addEventListener)jie||(s=h),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Xq(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return a}function Qie(){function t(a){return e.call(t.src,t.listener,a)}const e=ese;return t}function Yq(t,e,a,r,s){if(Array.isArray(e))for(var l=0;l<e.length;l++)Yq(t,e[l],a,r,s);else r=Sx(r)?!!r.capture:!!r,a=Jq(a),t&&t[bx]?(t=t.i,e=String(e).toString(),e in t.g&&(l=t.g[e],a=b5(l,a,r,s),-1<a&&(xx(l[a]),Array.prototype.splice.call(l,a,1),l.length==0&&(delete t.g[e],t.h--)))):t&&(t=cI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=b5(e,a,r,s)),(a=-1<t?e[t]:null)&&uI(a))}function uI(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[bx])C5(e.i,t);else{var a=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(a,r,t.capture):e.detachEvent?e.detachEvent(Xq(a),r):e.addListener&&e.removeListener&&e.removeListener(r),(a=cI(e))?(C5(a,t),a.h==0&&(a.src=null,e[lI]=null)):xx(t)}}}function Xq(t){return t in vE?vE[t]:vE[t]="on"+t}function ese(t,e){if(t.fa)t=!0;else{e=new Kw(e,this);var a=t.listener,r=t.la||t.src;t.ia&&uI(t),t=a.call(r,e)}return t}function cI(t){return t=t[lI],t instanceof Px?t:null}var wE="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jq(t){return typeof t=="function"?t:(t[wE]||(t[wE]=function(e){return t.handleEvent(e)}),t[wE])}function tc(){zg.call(this),this.i=new Px(this),this.S=this,this.J=null}ac(tc,zg);tc.prototype[bx]=!0;tc.prototype.removeEventListener=function(t,e,a,r){Yq(this,t,e,a,r)};function Pc(t,e){var a,r=t.J;if(r)for(a=[];r;r=r.J)a.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new hd(e,t);else if(e instanceof hd)e.target=e.target||t;else{var s=e;e=new hd(r,t),Kq(e,s)}if(s=!0,a)for(var l=a.length-1;0<=l;l--){var h=e.g=a[l];s=jS(h,r,!0,e)&&s}if(h=e.g=t,s=jS(h,r,!0,e)&&s,s=jS(h,r,!1,e)&&s,a)for(l=0;l<a.length;l++)h=e.g=a[l],s=jS(h,r,!1,e)&&s}tc.prototype.N=function(){if(tc.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var a=t.g[e],r=0;r<a.length;r++)xx(a[r]);delete t.g[e],t.h--}}this.J=null};tc.prototype.O=function(t,e,a,r){return this.i.add(String(t),e,!1,a,r)};tc.prototype.P=function(t,e,a,r){return this.i.add(String(t),e,!0,a,r)};function jS(t,e,a,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.fa&&h.capture==a){var n=h.listener,w=h.la||h.src;h.ia&&C5(t.i,h),s=n.call(w,r)!==!1&&s}}return s&&!r.defaultPrevented}var dI=ii.JSON.stringify;class tse{constructor(e,a){this.i=e,this.j=a,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function ase(){var t=hI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class rse{constructor(){this.h=this.g=null}add(e,a){const r=Qq.get();r.set(e,a),this.h?this.h.next=r:this.g=r,this.h=r}}var Qq=new tse(()=>new nse,t=>t.reset());class nse{constructor(){this.next=this.g=this.h=null}set(e,a){this.h=e,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}function ise(t){var e=1;t=t.split(":");const a=[];for(;0<e&&t.length;)a.push(t.shift()),e--;return t.length&&a.push(t.join(":")),a}function sse(t){ii.setTimeout(()=>{throw t},0)}let Ww,Yw=!1,hI=new rse,eH=()=>{const t=ii.Promise.resolve(void 0);Ww=()=>{t.then(ose)}};var ose=()=>{for(var t;t=ase();){try{t.h.call(t.g)}catch(a){sse(a)}var e=Qq;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Yw=!1};function Ex(t,e){tc.call(this),this.h=t||1,this.g=e||ii,this.j=dd(this.qb,this),this.l=Date.now()}ac(Ex,tc);Br=Ex.prototype;Br.ga=!1;Br.T=null;Br.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Pc(this,"tick"),this.ga&&(fI(this),this.start()))}};Br.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function fI(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}Br.N=function(){Ex.$.N.call(this),fI(this),delete this.g};function pI(t,e,a){if(typeof t=="function")a&&(t=dd(t,a));else if(t&&typeof t.handleEvent=="function")t=dd(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ii.setTimeout(t,e||0)}function tH(t){t.g=pI(()=>{t.g=null,t.i&&(t.i=!1,tH(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class lse extends zg{constructor(e,a){super(),this.m=e,this.j=a,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tH(this)}N(){super.N(),this.g&&(ii.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xw(t){zg.call(this),this.h=t,this.g={}}ac(Xw,zg);var C6=[];function aH(t,e,a,r){Array.isArray(a)||(a&&(C6[0]=a.toString()),a=C6);for(var s=0;s<a.length;s++){var l=Wq(e,a[s],r||t.handleEvent,!1,t.h||t);if(!l)break;t.g[l.key]=l}}function rH(t){oI(t.g,function(e,a){this.g.hasOwnProperty(a)&&uI(e)},t),t.g={}}Xw.prototype.N=function(){Xw.$.N.call(this),rH(this)};Xw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Nx(){this.g=!0}Nx.prototype.Ea=function(){this.g=!1};function use(t,e,a,r,s,l){t.info(function(){if(t.g)if(l)for(var h="",n=l.split("&"),w=0;w<n.length;w++){var T=n[w].split("=");if(1<T.length){var E=T[0];T=T[1];var z=E.split("_");h=2<=z.length&&z[1]=="type"?h+(E+"="+T+"&"):h+(E+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+a+`
`+h})}function cse(t,e,a,r,s,l,h){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+a+`
`+l+" "+h})}function R_(t,e,a,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+hse(t,a)+(r?" "+r:"")})}function dse(t,e){t.info(function(){return"TIMEOUT: "+e})}Nx.prototype.info=function(){};function hse(t,e){if(!t.g)return e;if(!e)return null;try{var a=JSON.parse(e);if(a){for(t=0;t<a.length;t++)if(Array.isArray(a[t])){var r=a[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var l=s[0];if(l!="noop"&&l!="stop"&&l!="close")for(var h=1;h<s.length;h++)s[h]=""}}}}return dI(a)}catch{return e}}var f0={},b6=null;function Vx(){return b6=b6||new tc}f0.Ta="serverreachability";function nH(t){hd.call(this,f0.Ta,t)}ac(nH,hd);function Jw(t){const e=Vx();Pc(e,new nH(e))}f0.STAT_EVENT="statevent";function iH(t,e){hd.call(this,f0.STAT_EVENT,t),this.stat=e}ac(iH,hd);function $d(t){const e=Vx();Pc(e,new iH(e,t))}f0.Ua="timingevent";function sH(t,e){hd.call(this,f0.Ua,t),this.size=e}ac(sH,hd);function aT(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ii.setTimeout(function(){t()},e)}var zx={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},oH={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mI(){}mI.prototype.h=null;function x6(t){return t.h||(t.h=t.i())}function lH(){}var rT={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function yI(){hd.call(this,"d")}ac(yI,hd);function gI(){hd.call(this,"c")}ac(gI,hd);var x5;function Ox(){}ac(Ox,mI);Ox.prototype.g=function(){return new XMLHttpRequest};Ox.prototype.i=function(){return{}};x5=new Ox;function nT(t,e,a,r){this.l=t,this.j=e,this.m=a,this.W=r||1,this.U=new Xw(this),this.P=fse,t=R5?125:void 0,this.V=new Ex(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new uH}function uH(){this.i=null,this.g="",this.h=!1}var fse=45e3,P5={},XC={};Br=nT.prototype;Br.setTimeout=function(t){this.P=t};function E5(t,e,a){t.L=1,t.v=Mx(py(e)),t.s=a,t.S=!0,cH(t,null)}function cH(t,e){t.G=Date.now(),iT(t),t.A=py(t.v);var a=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),AH(a.i,"t",r),t.C=0,a=t.l.J,t.h=new uH,t.g=UH(t.l,a?e:null,!t.s),0<t.O&&(t.M=new lse(dd(t.Pa,t,t.g),t.O)),aH(t.U,t.g,"readystatechange",t.nb),e=t.I?$q(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Jw(),use(t.j,t.u,t.A,t.m,t.W,t.s)}Br.nb=function(t){t=t.target;const e=this.M;e&&mm(t)==3?e.l():this.Pa(t)};Br.Pa=function(t){try{if(t==this.g)e:{const E=mm(this.g);var e=this.g.Ia();const z=this.g.da();if(!(3>E)&&(E!=3||R5||this.g&&(this.h.h||this.g.ja()||V6(this.g)))){this.J||E!=4||e==7||(e==8||0>=z?Jw(3):Jw(2)),Dx(this);var a=this.g.da();this.ca=a;t:if(dH(this)){var r=V6(this.g);t="";var s=r.length,l=mm(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){LA(this),Nw(this);var h="";break t}this.h.i=new ii.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:l&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,h=this.h.g}else h=this.g.ja();if(this.i=a==200,cse(this.j,this.u,this.A,this.m,this.W,E,a),this.i){if(this.aa&&!this.K){t:{if(this.g){var n,w=this.g;if((n=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$w(n)){var T=n;break t}}T=null}if(a=T)R_(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,N5(this,a);else{this.i=!1,this.o=3,$d(12),LA(this),Nw(this);break e}}this.S?(hH(this,E,h),R5&&this.i&&E==3&&(aH(this.U,this.V,"tick",this.mb),this.V.start())):(R_(this.j,this.m,h,null),N5(this,h)),E==4&&LA(this),this.i&&!this.J&&(E==4?MH(this.l,this):(this.i=!1,iT(this)))}else Dse(this.g),a==400&&0<h.indexOf("Unknown SID")?(this.o=3,$d(12)):(this.o=0,$d(13)),LA(this),Nw(this)}}}catch{}finally{}};function dH(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function hH(t,e,a){let r=!0,s;for(;!t.J&&t.C<a.length;)if(s=pse(t,a),s==XC){e==4&&(t.o=4,$d(14),r=!1),R_(t.j,t.m,null,"[Incomplete Response]");break}else if(s==P5){t.o=4,$d(15),R_(t.j,t.m,a,"[Invalid Chunk]"),r=!1;break}else R_(t.j,t.m,s,null),N5(t,s);dH(t)&&s!=XC&&s!=P5&&(t.h.g="",t.C=0),e!=4||a.length!=0||t.h.h||(t.o=1,$d(16),r=!1),t.i=t.i&&r,r?0<a.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+a.length),TI(e),e.M=!0,$d(11))):(R_(t.j,t.m,a,"[Invalid Chunked Response]"),LA(t),Nw(t))}Br.mb=function(){if(this.g){var t=mm(this.g),e=this.g.ja();this.C<e.length&&(Dx(this),hH(this,t,e),this.i&&t!=4&&iT(this))}};function pse(t,e){var a=t.C,r=e.indexOf(`
`,a);return r==-1?XC:(a=Number(e.substring(a,r)),isNaN(a)?P5:(r+=1,r+a>e.length?XC:(e=e.slice(r,r+a),t.C=r+a,e)))}Br.cancel=function(){this.J=!0,LA(this)};function iT(t){t.Y=Date.now()+t.P,fH(t,t.P)}function fH(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=aT(dd(t.lb,t),e)}function Dx(t){t.B&&(ii.clearTimeout(t.B),t.B=null)}Br.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(dse(this.j,this.A),this.L!=2&&(Jw(),$d(17)),LA(this),this.o=2,Nw(this)):fH(this,this.Y-t)};function Nw(t){t.l.H==0||t.J||MH(t.l,t)}function LA(t){Dx(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,fI(t.V),rH(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function N5(t,e){try{var a=t.l;if(a.H!=0&&(a.g==t||V5(a.i,t))){if(!t.K&&V5(a.i,t)&&a.H==3){try{var r=a.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!a.u){if(a.g)if(a.g.G+3e3<t.G)eb(a),Fx(a);else break e;RI(a),$d(18)}}else a.Fa=s[1],0<a.Fa-a.V&&37500>s[2]&&a.G&&a.A==0&&!a.v&&(a.v=aT(dd(a.ib,a),6e3));if(1>=wH(a.i)&&a.oa){try{a.oa()}catch{}a.oa=void 0}}else FA(a,11)}else if((t.K||a.g==t)&&eb(a),!$w(e))for(s=a.Ja.g.parse(e),e=0;e<s.length;e++){let T=s[e];if(a.V=T[0],T=T[1],a.H==2)if(T[0]=="c"){a.K=T[1],a.pa=T[2];const E=T[3];E!=null&&(a.ra=E,a.l.info("VER="+a.ra));const z=T[4];z!=null&&(a.Ga=z,a.l.info("SVER="+a.Ga));const k=T[5];k!=null&&typeof k=="number"&&0<k&&(r=1.5*k,a.L=r,a.l.info("backChannelRequestTimeoutMs_="+r)),r=a;const U=t.g;if(U){const q=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var l=r.i;l.g||q.indexOf("spdy")==-1&&q.indexOf("quic")==-1&&q.indexOf("h2")==-1||(l.j=l.l,l.g=new Set,l.h&&(AI(l,l.h),l.h=null))}if(r.F){const H=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(r.Da=H,Eo(r.I,r.F,H))}}a.H=3,a.h&&a.h.Ba(),a.ca&&(a.S=Date.now()-t.G,a.l.info("Handshake RTT: "+a.S+"ms")),r=a;var h=t;if(r.wa=FH(r,r.J?r.pa:null,r.Y),h.K){RH(r.i,h);var n=h,w=r.L;w&&n.setTimeout(w),n.B&&(Dx(n),iT(n)),r.g=h}else OH(r);0<a.j.length&&Ux(a)}else T[0]!="stop"&&T[0]!="close"||FA(a,7);else a.H==3&&(T[0]=="stop"||T[0]=="close"?T[0]=="stop"?FA(a,7):wI(a):T[0]!="noop"&&a.h&&a.h.Aa(T),a.A=0)}}Jw(4)}catch{}}function mse(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Tx(t)){for(var e=[],a=t.length,r=0;r<a;r++)e.push(t[r]);return e}e=[],a=0;for(r in t)e[a++]=t[r];return e}function yse(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Tx(t)||typeof t=="string"){var e=[];t=t.length;for(var a=0;a<t;a++)e.push(a);return e}e=[],a=0;for(const r in t)e[a++]=r;return e}}}function pH(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Tx(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var a=yse(t),r=mse(t),s=r.length,l=0;l<s;l++)e.call(void 0,r[l],a&&a[l],t)}var mH=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gse(t,e){if(t){t=t.split("&");for(var a=0;a<t.length;a++){var r=t[a].indexOf("="),s=null;if(0<=r){var l=t[a].substring(0,r);s=t[a].substring(r+1)}else l=t[a];e(l,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function $A(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof $A){this.h=t.h,JC(this,t.j),this.s=t.s,this.g=t.g,QC(this,t.m),this.l=t.l;var e=t.i,a=new Qw;a.i=e.i,e.g&&(a.g=new Map(e.g),a.h=e.h),P6(this,a),this.o=t.o}else t&&(e=String(t).match(mH))?(this.h=!1,JC(this,e[1]||"",!0),this.s=vw(e[2]||""),this.g=vw(e[3]||"",!0),QC(this,e[4]),this.l=vw(e[5]||"",!0),P6(this,e[6]||"",!0),this.o=vw(e[7]||"")):(this.h=!1,this.i=new Qw(null,this.h))}$A.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ww(e,E6,!0),":");var a=this.g;return(a||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ww(e,E6,!0),"@"),t.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.m,a!=null&&t.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(ww(a,a.charAt(0)=="/"?vse:_se,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.o)&&t.push("#",ww(a,Rse)),t.join("")};function py(t){return new $A(t)}function JC(t,e,a){t.j=a?vw(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function QC(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function P6(t,e,a){e instanceof Qw?(t.i=e,Tse(t.i,t.h)):(a||(e=ww(e,wse)),t.i=new Qw(e,t.h))}function Eo(t,e,a){t.i.set(e,a)}function Mx(t){return Eo(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vw(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ww(t,e,a){return typeof t=="string"?(t=encodeURI(t).replace(e,Ase),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ase(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var E6=/[#\/\?@]/g,_se=/[#\?:]/g,vse=/[#\?]/g,wse=/[#\?@]/g,Rse=/#/g;function Qw(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Og(t){t.g||(t.g=new Map,t.h=0,t.i&&gse(t.i,function(e,a){t.add(decodeURIComponent(e.replace(/\+/g," ")),a)}))}Br=Qw.prototype;Br.add=function(t,e){Og(this),this.i=null,t=Vv(this,t);var a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(e),this.h+=1,this};function yH(t,e){Og(t),e=Vv(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function gH(t,e){return Og(t),e=Vv(t,e),t.g.has(e)}Br.forEach=function(t,e){Og(this),this.g.forEach(function(a,r){a.forEach(function(s){t.call(e,s,r,this)},this)},this)};Br.ta=function(){Og(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),a=[];for(let r=0;r<e.length;r++){const s=t[r];for(let l=0;l<s.length;l++)a.push(e[r])}return a};Br.Z=function(t){Og(this);let e=[];if(typeof t=="string")gH(this,t)&&(e=e.concat(this.g.get(Vv(this,t))));else{t=Array.from(this.g.values());for(let a=0;a<t.length;a++)e=e.concat(t[a])}return e};Br.set=function(t,e){return Og(this),this.i=null,t=Vv(this,t),gH(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Br.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function AH(t,e,a){yH(t,e),0<a.length&&(t.i=null,t.g.set(Vv(t,e),iI(a)),t.h+=a.length)}Br.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var a=0;a<e.length;a++){var r=e[a];const l=encodeURIComponent(String(r)),h=this.Z(r);for(r=0;r<h.length;r++){var s=l;h[r]!==""&&(s+="="+encodeURIComponent(String(h[r]))),t.push(s)}}return this.i=t.join("&")};function Vv(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Tse(t,e){e&&!t.j&&(Og(t),t.i=null,t.g.forEach(function(a,r){var s=r.toLowerCase();r!=s&&(yH(this,r),AH(this,s,a))},t)),t.j=e}var Sse=class{constructor(t,e){this.g=t,this.map=e}};function _H(t){this.l=t||Cse,ii.PerformanceNavigationTiming?(t=ii.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ii.g&&ii.g.Ka&&ii.g.Ka()&&ii.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cse=10;function vH(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function wH(t){return t.h?1:t.g?t.g.size:0}function V5(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function AI(t,e){t.g?t.g.add(e):t.h=e}function RH(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}_H.prototype.cancel=function(){if(this.i=TH(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function TH(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const a of t.g.values())e=e.concat(a.F);return e}return iI(t.i)}var bse=class{stringify(t){return ii.JSON.stringify(t,void 0)}parse(t){return ii.JSON.parse(t,void 0)}};function xse(){this.g=new bse}function Pse(t,e,a){const r=a||"";try{pH(t,function(s,l){let h=s;Sx(s)&&(h=dI(s)),e.push(r+l+"="+encodeURIComponent(h))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ese(t,e){const a=new Nx;if(ii.Image){const r=new Image;r.onload=GS(ZS,a,r,"TestLoadImage: loaded",!0,e),r.onerror=GS(ZS,a,r,"TestLoadImage: error",!1,e),r.onabort=GS(ZS,a,r,"TestLoadImage: abort",!1,e),r.ontimeout=GS(ZS,a,r,"TestLoadImage: timeout",!1,e),ii.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ZS(t,e,a,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function sT(t){this.l=t.fc||null,this.j=t.ob||!1}ac(sT,mI);sT.prototype.g=function(){return new Ix(this.l,this.j)};sT.prototype.i=function(t){return function(){return t}}({});function Ix(t,e){tc.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=_I,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ac(Ix,tc);var _I=0;Br=Ix.prototype;Br.open=function(t,e){if(this.readyState!=_I)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,eR(this)};Br.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ii).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};Br.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oT(this)),this.readyState=_I};Br.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,eR(this)),this.g&&(this.readyState=3,eR(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ii.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;SH(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function SH(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}Br.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?oT(this):eR(this),this.readyState==3&&SH(this)}};Br.Za=function(t){this.g&&(this.response=this.responseText=t,oT(this))};Br.Ya=function(t){this.g&&(this.response=t,oT(this))};Br.ka=function(){this.g&&oT(this)};function oT(t){t.readyState=4,t.l=null,t.j=null,t.A=null,eR(t)}Br.setRequestHeader=function(t,e){this.v.append(t,e)};Br.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Br.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var a=e.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=e.next();return t.join(`\r
`)};function eR(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ix.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Nse=ii.JSON.parse;function wl(t){tc.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=CH,this.L=this.M=!1}ac(wl,tc);var CH="",Vse=/^https?$/i,zse=["POST","PUT"];Br=wl.prototype;Br.Oa=function(t){this.M=t};Br.ha=function(t,e,a,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():x5.g(),this.C=this.u?x6(this.u):x6(x5),this.g.onreadystatechange=dd(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(l){N6(this,l);return}if(t=a||"",a=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)a.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const l of r.keys())a.set(l,r.get(l));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(a.keys()).find(l=>l.toLowerCase()=="content-type"),s=ii.FormData&&t instanceof ii.FormData,!(0<=jq(zse,e))||r||s||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,h]of a)this.g.setRequestHeader(l,h);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{PH(this),0<this.B&&((this.L=Ose(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dd(this.ua,this)):this.A=pI(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(l){N6(this,l)}};function Ose(t){return $_&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Br.ua=function(){typeof nI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pc(this,"timeout"),this.abort(8))};function N6(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,bH(t),Lx(t)}function bH(t){t.F||(t.F=!0,Pc(t,"complete"),Pc(t,"error"))}Br.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Pc(this,"complete"),Pc(this,"abort"),Lx(this))};Br.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lx(this,!0)),wl.$.N.call(this)};Br.La=function(){this.s||(this.G||this.v||this.l?xH(this):this.kb())};Br.kb=function(){xH(this)};function xH(t){if(t.h&&typeof nI<"u"&&(!t.C[1]||mm(t)!=4||t.da()!=2)){if(t.v&&mm(t)==4)pI(t.La,0,t);else if(Pc(t,"readystatechange"),mm(t)==4){t.h=!1;try{const h=t.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var a;if(!(a=e)){var r;if(r=h===0){var s=String(t.I).match(mH)[1]||null;!s&&ii.self&&ii.self.location&&(s=ii.self.location.protocol.slice(0,-1)),r=!Vse.test(s?s.toLowerCase():"")}a=r}if(a)Pc(t,"complete"),Pc(t,"success");else{t.m=6;try{var l=2<mm(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.da()+"]",bH(t)}}finally{Lx(t)}}}}function Lx(t,e){if(t.g){PH(t);const a=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Pc(t,"ready");try{a.onreadystatechange=r}catch{}}}function PH(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ii.clearTimeout(t.A),t.A=null)}Br.isActive=function(){return!!this.g};function mm(t){return t.g?t.g.readyState:0}Br.da=function(){try{return 2<mm(this)?this.g.status:-1}catch{return-1}};Br.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};Br.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Nse(e)}};function V6(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case CH:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Dse(t){const e={};t=(t.g&&2<=mm(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if($w(t[r]))continue;var a=ise(t[r]);const s=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();const l=e[s]||[];e[s]=l,l.push(a)}Xie(e,function(r){return r.join(", ")})}Br.Ia=function(){return this.m};Br.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function EH(t){let e="";return oI(t,function(a,r){e+=r,e+=":",e+=a,e+=`\r
`}),e}function vI(t,e,a){e:{for(r in a){var r=!1;break e}r=!0}r||(a=EH(a),typeof t=="string"?a!=null&&encodeURIComponent(String(a)):Eo(t,e,a))}function aw(t,e,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||e}function NH(t){this.Ga=0,this.j=[],this.l=new Nx,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=aw("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=aw("baseRetryDelayMs",5e3,t),this.hb=aw("retryDelaySeedMs",1e4,t),this.eb=aw("forwardChannelMaxRetries",2,t),this.xa=aw("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new _H(t&&t.concurrentRequestLimit),this.Ja=new xse,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}Br=NH.prototype;Br.ra=8;Br.H=1;function wI(t){if(VH(t),t.H==3){var e=t.W++,a=py(t.I);if(Eo(a,"SID",t.K),Eo(a,"RID",e),Eo(a,"TYPE","terminate"),lT(t,a),e=new nT(t,t.l,e),e.L=2,e.v=Mx(py(a)),a=!1,ii.navigator&&ii.navigator.sendBeacon)try{a=ii.navigator.sendBeacon(e.v.toString(),"")}catch{}!a&&ii.Image&&(new Image().src=e.v,a=!0),a||(e.g=UH(e.l,null),e.g.ha(e.v)),e.G=Date.now(),iT(e)}LH(t)}function Fx(t){t.g&&(TI(t),t.g.cancel(),t.g=null)}function VH(t){Fx(t),t.u&&(ii.clearTimeout(t.u),t.u=null),eb(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ii.clearTimeout(t.m),t.m=null)}function Ux(t){if(!vH(t.i)&&!t.m){t.m=!0;var e=t.Na;Ww||eH(),Yw||(Ww(),Yw=!0),hI.add(e,t),t.C=0}}function Mse(t,e){return wH(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=aT(dd(t.Na,t,e),IH(t,t.C)),t.C++,!0)}Br.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new nT(this,this.l,t);let l=this.s;if(this.U&&(l?(l=$q(l),Kq(l,this.U)):l=this.U),this.o!==null||this.O||(s.I=l,l=null),this.P)e:{for(var e=0,a=0;a<this.j.length;a++){t:{var r=this.j[a];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=a;break e}if(e===4096||a===this.j.length-1){e=a+1;break e}}e=1e3}else e=1e3;e=zH(this,s,e),a=py(this.I),Eo(a,"RID",t),Eo(a,"CVER",22),this.F&&Eo(a,"X-HTTP-Session-Id",this.F),lT(this,a),l&&(this.O?e="headers="+encodeURIComponent(String(EH(l)))+"&"+e:this.o&&vI(a,this.o,l)),AI(this.i,s),this.bb&&Eo(a,"TYPE","init"),this.P?(Eo(a,"$req",e),Eo(a,"SID","null"),s.aa=!0,E5(s,a,null)):E5(s,a,e),this.H=2}}else this.H==3&&(t?z6(this,t):this.j.length==0||vH(this.i)||z6(this))};function z6(t,e){var a;e?a=e.m:a=t.W++;const r=py(t.I);Eo(r,"SID",t.K),Eo(r,"RID",a),Eo(r,"AID",t.V),lT(t,r),t.o&&t.s&&vI(r,t.o,t.s),a=new nT(t,t.l,a,t.C+1),t.o===null&&(a.I=t.s),e&&(t.j=e.F.concat(t.j)),e=zH(t,a,1e3),a.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),AI(t.i,a),E5(a,r,e)}function lT(t,e){t.na&&oI(t.na,function(a,r){Eo(e,r,a)}),t.h&&pH({},function(a,r){Eo(e,r,a)})}function zH(t,e,a){a=Math.min(t.j.length,a);var r=t.h?dd(t.h.Va,t.h,t):null;e:{var s=t.j;let l=-1;for(;;){const h=["count="+a];l==-1?0<a?(l=s[0].g,h.push("ofs="+l)):l=0:h.push("ofs="+l);let n=!0;for(let w=0;w<a;w++){let T=s[w].g;const E=s[w].map;if(T-=l,0>T)l=Math.max(0,s[w].g-100),n=!1;else try{Pse(E,h,"req"+T+"_")}catch{r&&r(E)}}if(n){r=h.join("&");break e}}}return t=t.j.splice(0,a),e.F=t,r}function OH(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ww||eH(),Yw||(Ww(),Yw=!0),hI.add(e,t),t.A=0}}function RI(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=aT(dd(t.Ma,t),IH(t,t.A)),t.A++,!0)}Br.Ma=function(){if(this.u=null,DH(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=aT(dd(this.jb,this),t)}};Br.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$d(10),Fx(this),DH(this))};function TI(t){t.B!=null&&(ii.clearTimeout(t.B),t.B=null)}function DH(t){t.g=new nT(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=py(t.wa);Eo(e,"RID","rpc"),Eo(e,"SID",t.K),Eo(e,"AID",t.V),Eo(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Eo(e,"TO",t.qa),Eo(e,"TYPE","xmlhttp"),lT(t,e),t.o&&t.s&&vI(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var a=t.g;t=t.pa,a.L=1,a.v=Mx(py(e)),a.s=null,a.S=!0,cH(a,t)}Br.ib=function(){this.v!=null&&(this.v=null,Fx(this),RI(this),$d(19))};function eb(t){t.v!=null&&(ii.clearTimeout(t.v),t.v=null)}function MH(t,e){var a=null;if(t.g==e){eb(t),TI(t),t.g=null;var r=2}else if(V5(t.i,e))a=e.F,RH(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){a=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;r=Vx(),Pc(r,new sH(r,a)),Ux(t)}else OH(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(r==1&&Mse(t,e)||r==2&&RI(t)))switch(a&&0<a.length&&(e=t.i,e.i=e.i.concat(a)),s){case 1:FA(t,5);break;case 4:FA(t,10);break;case 3:FA(t,6);break;default:FA(t,2)}}}function IH(t,e){let a=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(a*=2),a*e}function FA(t,e){if(t.l.info("Error code "+e),e==2){var a=null;t.h&&(a=null);var r=dd(t.pb,t);a||(a=new $A("//www.google.com/images/cleardot.gif"),ii.location&&ii.location.protocol=="http"||JC(a,"https"),Mx(a)),Ese(a.toString(),r)}else $d(2);t.H=0,t.h&&t.h.za(e),LH(t),VH(t)}Br.pb=function(t){t?(this.l.info("Successfully pinged google.com"),$d(2)):(this.l.info("Failed to ping google.com"),$d(1))};function LH(t){if(t.H=0,t.ma=[],t.h){const e=TH(t.i);(e.length!=0||t.j.length!=0)&&(R6(t.ma,e),R6(t.ma,t.j),t.i.i.length=0,iI(t.j),t.j.length=0),t.h.ya()}}function FH(t,e,a){var r=a instanceof $A?py(a):new $A(a);if(r.g!="")e&&(r.g=e+"."+r.g),QC(r,r.m);else{var s=ii.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var l=new $A(null);r&&JC(l,r),e&&(l.g=e),s&&QC(l,s),a&&(l.l=a),r=l}return a=t.F,e=t.Da,a&&e&&Eo(r,a,e),Eo(r,"VER",t.ra),lT(t,r),r}function UH(t,e,a){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=a&&t.Ha&&!t.va?new wl(new sT({ob:!0})):new wl(t.va),e.Oa(t.J),e}Br.isActive=function(){return!!this.h&&this.h.isActive(this)};function kH(){}Br=kH.prototype;Br.Ba=function(){};Br.Aa=function(){};Br.za=function(){};Br.ya=function(){};Br.isActive=function(){return!0};Br.Va=function(){};function tb(){if($_&&!(10<=Number($ie)))throw Error("Environmental error: no available transport.")}tb.prototype.g=function(t,e){return new uf(t,e)};function uf(t,e){tc.call(this),this.g=new NH(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!$w(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$w(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new zv(this)}ac(uf,tc);uf.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,a=this.h||void 0;$d(0),t.Y=e,t.na=a||{},t.G=t.aa,t.I=FH(t,null,t.Y),Ux(t)};uf.prototype.close=function(){wI(this.g)};uf.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.v&&(a={},a.__data__=dI(t),t=a);e.j.push(new Sse(e.fb++,t)),e.H==3&&Ux(e)};uf.prototype.N=function(){this.g.h=null,delete this.j,wI(this.g),delete this.g,uf.$.N.call(this)};function BH(t){yI.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const a in e){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ac(BH,yI);function GH(){gI.call(this),this.status=1}ac(GH,gI);function zv(t){this.g=t}ac(zv,kH);zv.prototype.Ba=function(){Pc(this.g,"a")};zv.prototype.Aa=function(t){Pc(this.g,new BH(t))};zv.prototype.za=function(t){Pc(this.g,new GH)};zv.prototype.ya=function(){Pc(this.g,"b")};function Ise(){this.blockSize=-1}function Ep(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ac(Ep,Ise);Ep.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function RE(t,e,a){a||(a=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(a++)|e.charCodeAt(a++)<<8|e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<24;else for(s=0;16>s;++s)r[s]=e[a++]|e[a++]<<8|e[a++]<<16|e[a++]<<24;e=t.g[0],a=t.g[1],s=t.g[2];var l=t.g[3],h=e+(l^a&(s^l))+r[0]+3614090360&4294967295;e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[1]+3905402710&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[2]+606105819&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[3]+3250441966&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[4]+4118548399&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[5]+1200080426&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[6]+2821735955&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[7]+4249261313&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[8]+1770035416&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[9]+2336552879&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[10]+4294925233&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[11]+2304563134&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(l^a&(s^l))+r[12]+1804603682&4294967295,e=a+(h<<7&4294967295|h>>>25),h=l+(s^e&(a^s))+r[13]+4254626195&4294967295,l=e+(h<<12&4294967295|h>>>20),h=s+(a^l&(e^a))+r[14]+2792965006&4294967295,s=l+(h<<17&4294967295|h>>>15),h=a+(e^s&(l^e))+r[15]+1236535329&4294967295,a=s+(h<<22&4294967295|h>>>10),h=e+(s^l&(a^s))+r[1]+4129170786&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[6]+3225465664&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[11]+643717713&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[0]+3921069994&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[5]+3593408605&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[10]+38016083&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[15]+3634488961&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[4]+3889429448&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[9]+568446438&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[14]+3275163606&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[3]+4107603335&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[8]+1163531501&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(s^l&(a^s))+r[13]+2850285829&4294967295,e=a+(h<<5&4294967295|h>>>27),h=l+(a^s&(e^a))+r[2]+4243563512&4294967295,l=e+(h<<9&4294967295|h>>>23),h=s+(e^a&(l^e))+r[7]+1735328473&4294967295,s=l+(h<<14&4294967295|h>>>18),h=a+(l^e&(s^l))+r[12]+2368359562&4294967295,a=s+(h<<20&4294967295|h>>>12),h=e+(a^s^l)+r[5]+4294588738&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[8]+2272392833&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[11]+1839030562&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[14]+4259657740&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[1]+2763975236&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[4]+1272893353&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[7]+4139469664&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[10]+3200236656&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[13]+681279174&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[0]+3936430074&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[3]+3572445317&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[6]+76029189&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(a^s^l)+r[9]+3654602809&4294967295,e=a+(h<<4&4294967295|h>>>28),h=l+(e^a^s)+r[12]+3873151461&4294967295,l=e+(h<<11&4294967295|h>>>21),h=s+(l^e^a)+r[15]+530742520&4294967295,s=l+(h<<16&4294967295|h>>>16),h=a+(s^l^e)+r[2]+3299628645&4294967295,a=s+(h<<23&4294967295|h>>>9),h=e+(s^(a|~l))+r[0]+4096336452&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[7]+1126891415&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[14]+2878612391&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[5]+4237533241&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[12]+1700485571&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[3]+2399980690&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[10]+4293915773&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[1]+2240044497&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[8]+1873313359&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[15]+4264355552&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[6]+2734768916&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[13]+1309151649&4294967295,a=s+(h<<21&4294967295|h>>>11),h=e+(s^(a|~l))+r[4]+4149444226&4294967295,e=a+(h<<6&4294967295|h>>>26),h=l+(a^(e|~s))+r[11]+3174756917&4294967295,l=e+(h<<10&4294967295|h>>>22),h=s+(e^(l|~a))+r[2]+718787259&4294967295,s=l+(h<<15&4294967295|h>>>17),h=a+(l^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(h<<21&4294967295|h>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+l&4294967295}Ep.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var a=e-this.blockSize,r=this.m,s=this.h,l=0;l<e;){if(s==0)for(;l<=a;)RE(this,t,l),l+=this.blockSize;if(typeof t=="string"){for(;l<e;)if(r[s++]=t.charCodeAt(l++),s==this.blockSize){RE(this,r),s=0;break}}else for(;l<e;)if(r[s++]=t[l++],s==this.blockSize){RE(this,r),s=0;break}}this.h=s,this.i+=e};Ep.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var a=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=a&255,a/=256;for(this.j(t),t=Array(16),e=a=0;4>e;++e)for(var r=0;32>r;r+=8)t[a++]=this.g[e]>>>r&255;return t};function Ls(t,e){this.h=e;for(var a=[],r=!0,s=t.length-1;0<=s;s--){var l=t[s]|0;r&&l==e||(a[s]=l,r=!1)}this.g=a}var Lse={};function SI(t){return-128<=t&&128>t?Zie(t,function(e){return new Ls([e|0],0>e?-1:0)}):new Ls([t|0],0>t?-1:0)}function ym(t){if(isNaN(t)||!isFinite(t))return z_;if(0>t)return xc(ym(-t));for(var e=[],a=1,r=0;t>=a;r++)e[r]=t/a|0,a*=z5;return new Ls(e,0)}function jH(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return xc(jH(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var a=ym(Math.pow(e,8)),r=z_,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),h=parseInt(t.substring(s,s+l),e);8>l?(l=ym(Math.pow(e,l)),r=r.R(l).add(ym(h))):(r=r.R(a),r=r.add(ym(h)))}return r}var z5=4294967296,z_=SI(0),O5=SI(1),O6=SI(16777216);Br=Ls.prototype;Br.ea=function(){if(Lf(this))return-xc(this).ea();for(var t=0,e=1,a=0;a<this.g.length;a++){var r=this.D(a);t+=(0<=r?r:z5+r)*e,e*=z5}return t};Br.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ry(this))return"0";if(Lf(this))return"-"+xc(this).toString(t);for(var e=ym(Math.pow(t,6)),a=this,r="";;){var s=rb(a,e).g;a=ab(a,s.R(e));var l=((0<a.g.length?a.g[0]:a.h)>>>0).toString(t);if(a=s,ry(a))return l+r;for(;6>l.length;)l="0"+l;r=l+r}};Br.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ry(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Lf(t){return t.h==-1}Br.X=function(t){return t=ab(this,t),Lf(t)?-1:ry(t)?0:1};function xc(t){for(var e=t.g.length,a=[],r=0;r<e;r++)a[r]=~t.g[r];return new Ls(a,~t.h).add(O5)}Br.abs=function(){return Lf(this)?xc(this):this};Br.add=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0,s=0;s<=e;s++){var l=r+(this.D(s)&65535)+(t.D(s)&65535),h=(l>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=h>>>16,l&=65535,h&=65535,a[s]=h<<16|l}return new Ls(a,a[a.length-1]&-2147483648?-1:0)};function ab(t,e){return t.add(xc(e))}Br.R=function(t){if(ry(this)||ry(t))return z_;if(Lf(this))return Lf(t)?xc(this).R(xc(t)):xc(xc(this).R(t));if(Lf(t))return xc(this.R(xc(t)));if(0>this.X(O6)&&0>t.X(O6))return ym(this.ea()*t.ea());for(var e=this.g.length+t.g.length,a=[],r=0;r<2*e;r++)a[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var l=this.D(r)>>>16,h=this.D(r)&65535,n=t.D(s)>>>16,w=t.D(s)&65535;a[2*r+2*s]+=h*w,qS(a,2*r+2*s),a[2*r+2*s+1]+=l*w,qS(a,2*r+2*s+1),a[2*r+2*s+1]+=h*n,qS(a,2*r+2*s+1),a[2*r+2*s+2]+=l*n,qS(a,2*r+2*s+2)}for(r=0;r<e;r++)a[r]=a[2*r+1]<<16|a[2*r];for(r=e;r<2*e;r++)a[r]=0;return new Ls(a,0)};function qS(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function rw(t,e){this.g=t,this.h=e}function rb(t,e){if(ry(e))throw Error("division by zero");if(ry(t))return new rw(z_,z_);if(Lf(t))return e=rb(xc(t),e),new rw(xc(e.g),xc(e.h));if(Lf(e))return e=rb(t,xc(e)),new rw(xc(e.g),e.h);if(30<t.g.length){if(Lf(t)||Lf(e))throw Error("slowDivide_ only works with positive integers.");for(var a=O5,r=e;0>=r.X(t);)a=D6(a),r=D6(r);var s=l_(a,1),l=l_(r,1);for(r=l_(r,2),a=l_(a,2);!ry(r);){var h=l.add(r);0>=h.X(t)&&(s=s.add(a),l=h),r=l_(r,1),a=l_(a,1)}return e=ab(t,s.R(e)),new rw(s,e)}for(s=z_;0<=t.X(e);){for(a=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(a)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),l=ym(a),h=l.R(e);Lf(h)||0<h.X(t);)a-=r,l=ym(a),h=l.R(e);ry(l)&&(l=O5),s=s.add(l),t=ab(t,h)}return new rw(s,t)}Br.gb=function(t){return rb(this,t).h};Br.and=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)&t.D(r);return new Ls(a,this.h&t.h)};Br.or=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)|t.D(r);return new Ls(a,this.h|t.h)};Br.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),a=[],r=0;r<e;r++)a[r]=this.D(r)^t.D(r);return new Ls(a,this.h^t.h)};function D6(t){for(var e=t.g.length+1,a=[],r=0;r<e;r++)a[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ls(a,t.h)}function l_(t,e){var a=e>>5;e%=32;for(var r=t.g.length-a,s=[],l=0;l<r;l++)s[l]=0<e?t.D(l+a)>>>e|t.D(l+a+1)<<32-e:t.D(l+a);return new Ls(s,t.h)}tb.prototype.createWebChannel=tb.prototype.g;uf.prototype.send=uf.prototype.u;uf.prototype.open=uf.prototype.m;uf.prototype.close=uf.prototype.close;zx.NO_ERROR=0;zx.TIMEOUT=8;zx.HTTP_ERROR=6;oH.COMPLETE="complete";lH.EventType=rT;rT.OPEN="a";rT.CLOSE="b";rT.ERROR="c";rT.MESSAGE="d";tc.prototype.listen=tc.prototype.O;wl.prototype.listenOnce=wl.prototype.P;wl.prototype.getLastError=wl.prototype.Sa;wl.prototype.getLastErrorCode=wl.prototype.Ia;wl.prototype.getStatus=wl.prototype.da;wl.prototype.getResponseJson=wl.prototype.Wa;wl.prototype.getResponseText=wl.prototype.ja;wl.prototype.send=wl.prototype.ha;wl.prototype.setWithCredentials=wl.prototype.Oa;Ep.prototype.digest=Ep.prototype.l;Ep.prototype.reset=Ep.prototype.reset;Ep.prototype.update=Ep.prototype.j;Ls.prototype.add=Ls.prototype.add;Ls.prototype.multiply=Ls.prototype.R;Ls.prototype.modulo=Ls.prototype.gb;Ls.prototype.compare=Ls.prototype.X;Ls.prototype.toNumber=Ls.prototype.ea;Ls.prototype.toString=Ls.prototype.toString;Ls.prototype.getBits=Ls.prototype.D;Ls.fromNumber=ym;Ls.fromString=jH;var Fse=function(){return new tb},Use=function(){return Vx()},TE=zx,kse=oH,Bse=f0,M6={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gse=sT,HS=lH,jse=wl,Zse=Ep,O_=Ls;const I6="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};sd.UNAUTHENTICATED=new sd(null),sd.GOOGLE_CREDENTIALS=new sd("google-credentials-uid"),sd.FIRST_PARTY=new sd("first-party-uid"),sd.MOCK_USER=new sd("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ov="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new HM("@firebase/firestore");function L6(){return a0.logLevel}function dn(t,...e){if(a0.logLevel<=fs.DEBUG){const a=e.map(CI);a0.debug(`Firestore (${Ov}): ${t}`,...a)}}function my(t,...e){if(a0.logLevel<=fs.ERROR){const a=e.map(CI);a0.error(`Firestore (${Ov}): ${t}`,...a)}}function K_(t,...e){if(a0.logLevel<=fs.WARN){const a=e.map(CI);a0.warn(`Firestore (${Ov}): ${t}`,...a)}}function CI(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t="Unexpected state"){const e=`FIRESTORE (${Ov}) INTERNAL ASSERTION FAILED: `+t;throw my(e),new Error(e)}function Vo(t,e){t||ei()}function fi(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let Zr=class extends Sy{constructor(e,a){super(e,a),this.code=e,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uy=class{constructor(){this.promise=new Promise((e,a)=>{this.resolve=e,this.reject=a})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZH=class{constructor(e,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qse=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,a){e.enqueueRetryable(()=>a(sd.UNAUTHENTICATED))}shutdown(){}},Hse=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,a){this.changeListener=a,e.enqueueRetryable(()=>a(this.token.user))}shutdown(){this.changeListener=null}},$se=class{constructor(e){this.t=e,this.currentUser=sd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,a){let r=this.i;const s=w=>this.i!==r?(r=this.i,a(w)):Promise.resolve();let l=new uy;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new uy,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable(async()=>{await w.promise,await s(this.currentUser)})},n=w=>{dn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>n(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?n(w):(dn("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new uy)}},0),h()}getToken(){const e=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(r=>this.i!==e?(dn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vo(typeof r.accessToken=="string"),new ZH(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Vo(e===null||typeof e=="string"),new sd(e)}},Kse=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r,this.type="FirstParty",this.user=sd.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},Wse=class{constructor(e,a,r){this.h=e,this.l=a,this.m=r}getToken(){return Promise.resolve(new Kse(this.h,this.l,this.m))}start(e,a){e.enqueueRetryable(()=>a(sd.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Yse=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Xse=class{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,a){const r=l=>{l.error!=null&&dn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.T;return this.T=l.token,dn("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?a(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{dn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?s(l):dn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(a=>a?(Vo(typeof a.token=="string"),this.T=a.token,new Yse(a.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jse(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(a);else for(let r=0;r<t;r++)a[r]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qH=class{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Jse(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<a&&(r+=e.charAt(s[l]%e.length))}return r}};function gs(t,e){return t<e?-1:t>e?1:0}function W_(t,e,a){return t.length===e.length&&t.every((r,s)=>a(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xd=class RC{constructor(e,a){if(this.seconds=e,this.nanoseconds=a,a<0)throw new Zr(tr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new Zr(tr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(e<-62135596800)throw new Zr(tr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zr(tr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return RC.fromMillis(Date.now())}static fromDate(e){return RC.fromMillis(e.getTime())}static fromMillis(e){const a=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*a));return new RC(a,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?gs(this.nanoseconds,e.nanoseconds):gs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Si=class TC{constructor(e){this.timestamp=e}static fromTimestamp(e){return new TC(e)}static min(){return new TC(new Xd(0,0))}static max(){return new TC(new Xd(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HH=class D5{constructor(e,a,r){a===void 0?a=0:a>e.length&&ei(),r===void 0?r=e.length-a:r>e.length-a&&ei(),this.segments=e,this.offset=a,this.len=r}get length(){return this.len}isEqual(e){return D5.comparator(this,e)===0}child(e){const a=this.segments.slice(this.offset,this.limit());return e instanceof D5?e.forEach(r=>{a.push(r)}):a.push(e),this.construct(a)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==e.get(a))return!1;return!0}forEach(e){for(let a=this.offset,r=this.limit();a<r;a++)e(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,a){const r=Math.min(e.length,a.length);for(let s=0;s<r;s++){const l=e.get(s),h=a.get(s);if(l<h)return-1;if(l>h)return 1}return e.length<a.length?-1:e.length>a.length?1:0}},Ml=class SC extends HH{construct(e,a,r){return new SC(e,a,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const a=[];for(const r of e){if(r.indexOf("//")>=0)throw new Zr(tr.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);a.push(...r.split("/").filter(s=>s.length>0))}return new SC(a)}static emptyPath(){return new SC([])}};const Qse=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let bm=class y_ extends HH{construct(e,a,r){return new y_(e,a,r)}static isValidIdentifier(e){return Qse.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),y_.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new y_(["__name__"])}static fromServerFormat(e){const a=[];let r="",s=0;const l=()=>{if(r.length===0)throw new Zr(tr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(r),r=""};let h=!1;for(;s<e.length;){const n=e[s];if(n==="\\"){if(s+1===e.length)throw new Zr(tr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new Zr(tr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else n==="`"?(h=!h,s++):n!=="."||h?(r+=n,s++):(l(),s++)}if(l(),h)throw new Zr(tr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new y_(a)}static emptyPath(){return new y_([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kn=class Rw{constructor(e){this.path=e}static fromPath(e){return new Rw(Ml.fromString(e))}static fromName(e){return new Rw(Ml.fromString(e).popFirst(5))}static empty(){return new Rw(Ml.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ml.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,a){return Ml.comparator(e.path,a.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Rw(new Ml(e.slice()))}};function eoe(t,e){const a=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Si.fromTimestamp(r===1e9?new Xd(a+1,0):new Xd(a,r));return new tR(s,Kn.empty(),e)}function toe(t){return new tR(t.readTime,t.key,-1)}let tR=class M5{constructor(e,a,r){this.readTime=e,this.documentKey=a,this.largestBatchId=r}static min(){return new M5(Si.min(),Kn.empty(),-1)}static max(){return new M5(Si.max(),Kn.empty(),-1)}};function aoe(t,e){let a=t.readTime.compareTo(e.readTime);return a!==0?a:(a=Kn.comparator(t.documentKey,e.documentKey),a!==0?a:gs(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const roe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let noe=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(t){if(t.code!==tr.FAILED_PRECONDITION||t.message!==roe)throw t;dn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dr=class wh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(e){return this.next(void 0,e)}next(e,a){return this.callbackAttached&&ei(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(e,this.result):new wh((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(a,l).next(r,s)}})}toPromise(){return new Promise((e,a)=>{this.next(e,a)})}wrapUserFunction(e){try{const a=e();return a instanceof wh?a:wh.resolve(a)}catch(a){return wh.reject(a)}}wrapSuccess(e,a){return e?this.wrapUserFunction(()=>e(a)):wh.resolve(a)}wrapFailure(e,a){return e?this.wrapUserFunction(()=>e(a)):wh.reject(a)}static resolve(e){return new wh((a,r)=>{a(e)})}static reject(e){return new wh((a,r)=>{r(e)})}static waitFor(e){return new wh((a,r)=>{let s=0,l=0,h=!1;e.forEach(n=>{++s,n.next(()=>{++l,h&&l===s&&a()},w=>r(w))}),h=!0,l===s&&a()})}static or(e){let a=wh.resolve(!1);for(const r of e)a=a.next(s=>s?wh.resolve(s):r());return a}static forEach(e,a){const r=[];return e.forEach((s,l)=>{r.push(a.call(this,s,l))}),this.waitFor(r)}static mapArray(e,a){return new wh((r,s)=>{const l=e.length,h=new Array(l);let n=0;for(let w=0;w<l;w++){const T=w;a(e[T]).next(E=>{h[T]=E,++n,n===l&&r(h)},E=>s(E))}})}static doWhile(e,a){return new wh((r,s)=>{const l=()=>{e()===!0?a().next(()=>{l()},s):r()};l()})}};function cT(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bI=class{constructor(e,a){this.previousValue=e,a&&(a.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>a.writeSequenceNumber(r))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}};bI.ct=-1;function kx(t){return t==null}function nb(t){return t===0&&1/t==-1/0}function ioe(t){return typeof t=="number"&&Number.isInteger(t)&&!nb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(t){let e=0;for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e++;return e}function p0(t,e){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&e(a,t[a])}function $H(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou=class I5{constructor(e,a){this.comparator=e,this.root=a||bc.EMPTY}insert(e,a){return new I5(this.comparator,this.root.insert(e,a,this.comparator).copy(null,null,bc.BLACK,null,null))}remove(e){return new I5(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bc.BLACK,null,null))}get(e){let a=this.root;for(;!a.isEmpty();){const r=this.comparator(e,a.key);if(r===0)return a.value;r<0?a=a.left:r>0&&(a=a.right)}return null}indexOf(e){let a=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return a+r.left.size;s<0?r=r.left:(a+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((a,r)=>(e(a,r),!1))}toString(){const e=[];return this.inorderTraversal((a,r)=>(e.push(`${a}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $S(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $S(this.root,e,this.comparator,!1)}getReverseIterator(){return new $S(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $S(this.root,e,this.comparator,!0)}};class $S{constructor(e,a,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=a?r(e.key,a):1,a&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const a={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bc{constructor(e,a,r,s,l){this.key=e,this.value=a,this.color=r??bc.RED,this.left=s??bc.EMPTY,this.right=l??bc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,a,r,s,l){return new bc(e??this.key,a??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,a,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,a,r),null):l===0?s.copy(null,a,null,null,null):s.copy(null,null,null,null,s.right.insert(e,a,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,a){let r,s=this;if(a(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,a),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),a(e,s.key)===0){if(s.right.isEmpty())return bc.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,a))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,a)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ei();const e=this.left.check();if(e!==this.right.check())throw ei();return e+(this.isRed()?0:1)}}bc.EMPTY=null,bc.RED=!0,bc.BLACK=!1;bc.EMPTY=new class{constructor(){this.size=0}get key(){throw ei()}get value(){throw ei()}get color(){throw ei()}get left(){throw ei()}get right(){throw ei()}copy(t,e,a,r,s){return this}insert(t,e,a){return new bc(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.comparator=e,this.data=new ou(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((a,r)=>(e(a),!1))}forEachInRange(e,a){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;a(s.key)}}forEachWhile(e,a){let r;for(r=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const a=this.data.getIteratorFrom(e);return a.hasNext()?a.getNext().key:null}getIterator(){return new U6(this.data.getIterator())}getIteratorFrom(e){return new U6(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let a=this;return a.size<e.size&&(a=e,e=this),e.forEach(r=>{a=a.add(r)}),a}isEqual(e){if(!(e instanceof fd)||this.size!==e.size)return!1;const a=this.data.getIterator(),r=e.data.getIterator();for(;a.hasNext();){const s=a.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(a=>{e.push(a)}),e}toString(){const e=[];return this.forEach(a=>e.push(a)),"SortedSet("+e.toString()+")"}copy(e){const a=new fd(this.comparator);return a.data=e,a}}class U6{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.fields=e,e.sort(bm.comparator)}static empty(){return new af([])}unionWith(e){let a=new fd(bm.comparator);for(const r of this.fields)a=a.add(r);for(const r of e)a=a.add(r);return new af(a.toArray())}covers(e){for(const a of this.fields)if(a.isPrefixOf(e))return!0;return!1}isEqual(e){return W_(this.fields,e.fields,(a,r)=>a.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e){this.binaryString=e}static fromBase64String(e){const a=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new KH("Invalid base64 string: "+s):s}}(e);return new md(a)}static fromUint8Array(e){const a=function(r){let s="";for(let l=0;l<r.length;++l)s+=String.fromCharCode(r[l]);return s}(e);return new md(a)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const a=new Uint8Array(e.length);for(let r=0;r<e.length;r++)a[r]=e.charCodeAt(r);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}md.EMPTY_BYTE_STRING=new md("");const soe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xg(t){if(Vo(!!t),typeof t=="string"){let e=0;const a=soe.exec(t);if(Vo(!!a),a[1]){let s=a[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nu(t.seconds),nanos:nu(t.nanos)}}function nu(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function r0(t){return typeof t=="string"?md.fromBase64String(t):md.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){var e,a;return((a=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="server_timestamp"}function PI(t){const e=t.mapValue.fields.__previous_value__;return xI(e)?PI(e):e}function aR(t){const e=xg(t.mapValue.fields.__local_write_time__.timestampValue);return new Xd(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ooe{constructor(e,a,r,s,l,h,n,w,T){this.databaseId=e,this.appId=a,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=n,this.longPollingOptions=w,this.useFetchStreams=T}}class rR{constructor(e,a){this.projectId=e,this.database=a||"(default)"}static empty(){return new rR("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof rR&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS={mapValue:{}};function n0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xI(t)?4:loe(t)?9007199254740991:10:ei()}function xm(t,e){if(t===e)return!0;const a=n0(t);if(a!==n0(e))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return aR(t).isEqual(aR(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const l=xg(r.timestampValue),h=xg(s.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return r0(r.bytesValue).isEqual(r0(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return nu(r.geoPointValue.latitude)===nu(s.geoPointValue.latitude)&&nu(r.geoPointValue.longitude)===nu(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return nu(r.integerValue)===nu(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const l=nu(r.doubleValue),h=nu(s.doubleValue);return l===h?nb(l)===nb(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return W_(t.arrayValue.values||[],e.arrayValue.values||[],xm);case 10:return function(r,s){const l=r.mapValue.fields||{},h=s.mapValue.fields||{};if(F6(l)!==F6(h))return!1;for(const n in l)if(l.hasOwnProperty(n)&&(h[n]===void 0||!xm(l[n],h[n])))return!1;return!0}(t,e);default:return ei()}}function nR(t,e){return(t.values||[]).find(a=>xm(a,e))!==void 0}function Y_(t,e){if(t===e)return 0;const a=n0(t),r=n0(e);if(a!==r)return gs(a,r);switch(a){case 0:case 9007199254740991:return 0;case 1:return gs(t.booleanValue,e.booleanValue);case 2:return function(s,l){const h=nu(s.integerValue||s.doubleValue),n=nu(l.integerValue||l.doubleValue);return h<n?-1:h>n?1:h===n?0:isNaN(h)?isNaN(n)?0:-1:1}(t,e);case 3:return k6(t.timestampValue,e.timestampValue);case 4:return k6(aR(t),aR(e));case 5:return gs(t.stringValue,e.stringValue);case 6:return function(s,l){const h=r0(s),n=r0(l);return h.compareTo(n)}(t.bytesValue,e.bytesValue);case 7:return function(s,l){const h=s.split("/"),n=l.split("/");for(let w=0;w<h.length&&w<n.length;w++){const T=gs(h[w],n[w]);if(T!==0)return T}return gs(h.length,n.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,l){const h=gs(nu(s.latitude),nu(l.latitude));return h!==0?h:gs(nu(s.longitude),nu(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,l){const h=s.values||[],n=l.values||[];for(let w=0;w<h.length&&w<n.length;++w){const T=Y_(h[w],n[w]);if(T)return T}return gs(h.length,n.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,l){if(s===KS.mapValue&&l===KS.mapValue)return 0;if(s===KS.mapValue)return 1;if(l===KS.mapValue)return-1;const h=s.fields||{},n=Object.keys(h),w=l.fields||{},T=Object.keys(w);n.sort(),T.sort();for(let E=0;E<n.length&&E<T.length;++E){const z=gs(n[E],T[E]);if(z!==0)return z;const k=Y_(h[n[E]],w[T[E]]);if(k!==0)return k}return gs(n.length,T.length)}(t.mapValue,e.mapValue);default:throw ei()}}function k6(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return gs(t,e);const a=xg(t),r=xg(e),s=gs(a.seconds,r.seconds);return s!==0?s:gs(a.nanos,r.nanos)}function X_(t){return L5(t)}function L5(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=xg(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?r0(t.bytesValue).toBase64():"referenceValue"in t?(a=t.referenceValue,Kn.fromName(a).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",l=!0;for(const h of r.values||[])l?l=!1:s+=",",s+=L5(h);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const n of s)h?h=!1:l+=",",l+=`${n}:${L5(r.fields[n])}`;return l+"}"}(t.mapValue):ei();var e,a}function B6(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function F5(t){return!!t&&"integerValue"in t}function EI(t){return!!t&&"arrayValue"in t}function G6(t){return!!t&&"nullValue"in t}function j6(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function CC(t){return!!t&&"mapValue"in t}function Vw(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return p0(t.mapValue.fields,(a,r)=>e.mapValue.fields[a]=Vw(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let a=0;a<(t.arrayValue.values||[]).length;++a)e.arrayValue.values[a]=Vw(t.arrayValue.values[a]);return e}return Object.assign({},t)}function loe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.value=e}static empty(){return new Sh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let a=this.value;for(let r=0;r<e.length-1;++r)if(a=(a.mapValue.fields||{})[e.get(r)],!CC(a))return null;return a=(a.mapValue.fields||{})[e.lastSegment()],a||null}}set(e,a){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vw(a)}setAll(e){let a=bm.emptyPath(),r={},s=[];e.forEach((h,n)=>{if(!a.isImmediateParentOf(n)){const w=this.getFieldsMap(a);this.applyChanges(w,r,s),r={},s=[],a=n.popLast()}h?r[n.lastSegment()]=Vw(h):s.push(n.lastSegment())});const l=this.getFieldsMap(a);this.applyChanges(l,r,s)}delete(e){const a=this.field(e.popLast());CC(a)&&a.mapValue.fields&&delete a.mapValue.fields[e.lastSegment()]}isEqual(e){return xm(this.value,e.value)}getFieldsMap(e){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=a.mapValue.fields[e.get(r)];CC(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},a.mapValue.fields[e.get(r)]=s),a=s}return a.mapValue.fields}applyChanges(e,a,r){p0(a,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new Sh(Vw(this.value))}}function WH(t){const e=[];return p0(t.fields,(a,r)=>{const s=new bm([a]);if(CC(r)){const l=WH(r.mapValue).fields;if(l.length===0)e.push(s);else for(const h of l)e.push(s.child(h))}else e.push(s)}),new af(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,a,r,s,l,h,n){this.key=e,this.documentType=a,this.version=r,this.readTime=s,this.createTime=l,this.data=h,this.documentState=n}static newInvalidDocument(e){return new od(e,0,Si.min(),Si.min(),Si.min(),Sh.empty(),0)}static newFoundDocument(e,a,r,s){return new od(e,1,a,Si.min(),r,s,0)}static newNoDocument(e,a){return new od(e,2,a,Si.min(),Si.min(),Sh.empty(),0)}static newUnknownDocument(e,a){return new od(e,3,a,Si.min(),Si.min(),Sh.empty(),2)}convertToFoundDocument(e,a){return!this.createTime.isEqual(Si.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Si.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof od&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new od(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,a){this.position=e,this.inclusive=a}}function Z6(t,e,a){let r=0;for(let s=0;s<t.position.length;s++){const l=e[s],h=t.position[s];if(l.field.isKeyField()?r=Kn.comparator(Kn.fromName(h.referenceValue),a.key):r=Y_(h,a.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function q6(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let a=0;a<t.position.length;a++)if(!xm(t.position[a],e.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,a="asc"){this.field=e,this.dir=a}}function uoe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{}class iu extends YH{constructor(e,a,r){super(),this.field=e,this.op=a,this.value=r}static create(e,a,r){return e.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(e,a,r):new doe(e,a,r):a==="array-contains"?new poe(e,r):a==="in"?new moe(e,r):a==="not-in"?new yoe(e,r):a==="array-contains-any"?new goe(e,r):new iu(e,a,r)}static createKeyFieldInFilter(e,a,r){return a==="in"?new hoe(e,r):new foe(e,r)}matches(e){const a=e.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(Y_(a,this.value)):a!==null&&n0(this.value)===n0(a)&&this.matchesComparison(Y_(a,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ei()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Np extends YH{constructor(e,a){super(),this.filters=e,this.op=a,this.lt=null}static create(e,a){return new Np(e,a)}matches(e){return XH(this)?this.filters.find(a=>!a.matches(e))===void 0:this.filters.find(a=>a.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,a)=>e.concat(a.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(a=>a.isInequality());return e!==null?e.field:null}ft(e){for(const a of this.getFlattenedFilters())if(e(a))return a;return null}}function XH(t){return t.op==="and"}function JH(t){return coe(t)&&XH(t)}function coe(t){for(const e of t.filters)if(e instanceof Np)return!1;return!0}function U5(t){if(t instanceof iu)return t.field.canonicalString()+t.op.toString()+X_(t.value);if(JH(t))return t.filters.map(e=>U5(e)).join(",");{const e=t.filters.map(a=>U5(a)).join(",");return`${t.op}(${e})`}}function QH(t,e){return t instanceof iu?function(a,r){return r instanceof iu&&a.op===r.op&&a.field.isEqual(r.field)&&xm(a.value,r.value)}(t,e):t instanceof Np?function(a,r){return r instanceof Np&&a.op===r.op&&a.filters.length===r.filters.length?a.filters.reduce((s,l,h)=>s&&QH(l,r.filters[h]),!0):!1}(t,e):void ei()}function e$(t){return t instanceof iu?function(e){return`${e.field.canonicalString()} ${e.op} ${X_(e.value)}`}(t):t instanceof Np?function(e){return e.op.toString()+" {"+e.getFilters().map(e$).join(" ,")+"}"}(t):"Filter"}class doe extends iu{constructor(e,a,r){super(e,a,r),this.key=Kn.fromName(r.referenceValue)}matches(e){const a=Kn.comparator(e.key,this.key);return this.matchesComparison(a)}}class hoe extends iu{constructor(e,a){super(e,"in",a),this.keys=t$("in",a)}matches(e){return this.keys.some(a=>a.isEqual(e.key))}}class foe extends iu{constructor(e,a){super(e,"not-in",a),this.keys=t$("not-in",a)}matches(e){return!this.keys.some(a=>a.isEqual(e.key))}}function t$(t,e){var a;return(((a=e.arrayValue)===null||a===void 0?void 0:a.values)||[]).map(r=>Kn.fromName(r.referenceValue))}class poe extends iu{constructor(e,a){super(e,"array-contains",a)}matches(e){const a=e.data.field(this.field);return EI(a)&&nR(a.arrayValue,this.value)}}class moe extends iu{constructor(e,a){super(e,"in",a)}matches(e){const a=e.data.field(this.field);return a!==null&&nR(this.value.arrayValue,a)}}class yoe extends iu{constructor(e,a){super(e,"not-in",a)}matches(e){if(nR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=e.data.field(this.field);return a!==null&&!nR(this.value.arrayValue,a)}}class goe extends iu{constructor(e,a){super(e,"array-contains-any",a)}matches(e){const a=e.data.field(this.field);return!(!EI(a)||!a.arrayValue.values)&&a.arrayValue.values.some(r=>nR(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aoe{constructor(e,a=null,r=[],s=[],l=null,h=null,n=null){this.path=e,this.collectionGroup=a,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=h,this.endAt=n,this.dt=null}}function H6(t,e=null,a=[],r=[],s=null,l=null,h=null){return new Aoe(t,e,a,r,s,l,h)}function NI(t){const e=fi(t);if(e.dt===null){let a=e.path.canonicalString();e.collectionGroup!==null&&(a+="|cg:"+e.collectionGroup),a+="|f:",a+=e.filters.map(r=>U5(r)).join(","),a+="|ob:",a+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kx(e.limit)||(a+="|l:",a+=e.limit),e.startAt&&(a+="|lb:",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>X_(r)).join(",")),e.endAt&&(a+="|ub:",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>X_(r)).join(",")),e.dt=a}return e.dt}function VI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<t.orderBy.length;a++)if(!uoe(t.orderBy[a],e.orderBy[a]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let a=0;a<t.filters.length;a++)if(!QH(t.filters[a],e.filters[a]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!q6(t.startAt,e.startAt)&&q6(t.endAt,e.endAt)}function k5(t){return Kn.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,a=null,r=[],s=[],l=null,h="F",n=null,w=null){this.path=e,this.collectionGroup=a,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=h,this.startAt=n,this.endAt=w,this.wt=null,this._t=null,this.startAt,this.endAt}}function _oe(t,e,a,r,s,l,h,n){return new Dv(t,e,a,r,s,l,h,n)}function Bx(t){return new Dv(t)}function $6(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zI(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Gx(t){for(const e of t.filters){const a=e.getFirstInequalityField();if(a!==null)return a}return null}function a$(t){return t.collectionGroup!==null}function M_(t){const e=fi(t);if(e.wt===null){e.wt=[];const a=Gx(e),r=zI(e);if(a!==null&&r===null)a.isKeyField()||e.wt.push(new D_(a)),e.wt.push(new D_(bm.keyField(),"asc"));else{let s=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(s=!0);if(!s){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new D_(bm.keyField(),l))}}}return e.wt}function yy(t){const e=fi(t);if(!e._t)if(e.limitType==="F")e._t=H6(e.path,e.collectionGroup,M_(e),e.filters,e.limit,e.startAt,e.endAt);else{const a=[];for(const l of M_(e)){const h=l.dir==="desc"?"asc":"desc";a.push(new D_(l.field,h))}const r=e.endAt?new ib(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ib(e.startAt.position,e.startAt.inclusive):null;e._t=H6(e.path,e.collectionGroup,a,e.filters,e.limit,r,s)}return e._t}function B5(t,e){e.getFirstInequalityField(),Gx(t);const a=t.filters.concat([e]);return new Dv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),a,t.limit,t.limitType,t.startAt,t.endAt)}function G5(t,e,a){return new Dv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,a,t.startAt,t.endAt)}function jx(t,e){return VI(yy(t),yy(e))&&t.limitType===e.limitType}function r$(t){return`${NI(yy(t))}|lt:${t.limitType}`}function j5(t){return`Query(target=${function(e){let a=e.path.canonicalString();return e.collectionGroup!==null&&(a+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(a+=`, filters: [${e.filters.map(r=>e$(r)).join(", ")}]`),kx(e.limit)||(a+=", limit: "+e.limit),e.orderBy.length>0&&(a+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(a+=", startAt: ",a+=e.startAt.inclusive?"b:":"a:",a+=e.startAt.position.map(r=>X_(r)).join(",")),e.endAt&&(a+=", endAt: ",a+=e.endAt.inclusive?"a:":"b:",a+=e.endAt.position.map(r=>X_(r)).join(",")),`Target(${a})`}(yy(t))}; limitType=${t.limitType})`}function Zx(t,e){return e.isFoundDocument()&&function(a,r){const s=r.key.path;return a.collectionGroup!==null?r.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(s):Kn.isDocumentKey(a.path)?a.path.isEqual(s):a.path.isImmediateParentOf(s)}(t,e)&&function(a,r){for(const s of M_(a))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(a,r){for(const s of a.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(a,r){return!(a.startAt&&!function(s,l,h){const n=Z6(s,l,h);return s.inclusive?n<=0:n<0}(a.startAt,M_(a),r)||a.endAt&&!function(s,l,h){const n=Z6(s,l,h);return s.inclusive?n>=0:n>0}(a.endAt,M_(a),r))}(t,e)}function voe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function n$(t){return(e,a)=>{let r=!1;for(const s of M_(t)){const l=woe(s,e,a);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function woe(t,e,a){const r=t.field.isKeyField()?Kn.comparator(e.key,a.key):function(s,l,h){const n=l.data.field(s),w=h.data.field(s);return n!==null&&w!==null?Y_(n,w):ei()}(t.field,e,a);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ei()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,a){this.mapKeyFn=e,this.equalsFn=a,this.inner={},this.innerSize=0}get(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,a){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,a]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,a]);s.push([e,a]),this.innerSize++}delete(e){const a=this.mapKeyFn(e),r=this.inner[a];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[a]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){p0(this.inner,(a,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return $H(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Roe=new ou(Kn.comparator);function gy(){return Roe}const i$=new ou(Kn.comparator);function Tw(...t){let e=i$;for(const a of t)e=e.insert(a.key,a);return e}function s$(t){let e=i$;return t.forEach((a,r)=>e=e.insert(a,r.overlayedDocument)),e}function UA(){return zw()}function o$(){return zw()}function zw(){return new Mv(t=>t.toString(),(t,e)=>t.isEqual(e))}const Toe=new ou(Kn.comparator),Soe=new fd(Kn.comparator);function Ui(...t){let e=Soe;for(const a of t)e=e.add(a);return e}const Coe=new fd(gs);function boe(){return Coe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l$(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nb(e)?"-0":e}}function u$(t){return{integerValue:""+t}}function xoe(t,e){return ioe(e)?u$(e):l$(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this._=void 0}}function Poe(t,e,a){return t instanceof sb?function(r,s){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&xI(s)&&(s=PI(s)),s&&(l.fields.__previous_value__=s),{mapValue:l}}(a,e):t instanceof iR?d$(t,e):t instanceof sR?h$(t,e):function(r,s){const l=c$(r,s),h=K6(l)+K6(r.gt);return F5(l)&&F5(r.gt)?u$(h):l$(r.serializer,h)}(t,e)}function Eoe(t,e,a){return t instanceof iR?d$(t,e):t instanceof sR?h$(t,e):a}function c$(t,e){return t instanceof ob?F5(a=e)||function(r){return!!r&&"doubleValue"in r}(a)?e:{integerValue:0}:null;var a}class sb extends qx{}class iR extends qx{constructor(e){super(),this.elements=e}}function d$(t,e){const a=f$(e);for(const r of t.elements)a.some(s=>xm(s,r))||a.push(r);return{arrayValue:{values:a}}}class sR extends qx{constructor(e){super(),this.elements=e}}function h$(t,e){let a=f$(e);for(const r of t.elements)a=a.filter(s=>!xm(s,r));return{arrayValue:{values:a}}}class ob extends qx{constructor(e,a){super(),this.serializer=e,this.gt=a}}function K6(t){return nu(t.integerValue||t.doubleValue)}function f$(t){return EI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Noe(t,e){return t.field.isEqual(e.field)&&function(a,r){return a instanceof iR&&r instanceof iR||a instanceof sR&&r instanceof sR?W_(a.elements,r.elements,xm):a instanceof ob&&r instanceof ob?xm(a.gt,r.gt):a instanceof sb&&r instanceof sb}(t.transform,e.transform)}class Voe{constructor(e,a){this.version=e,this.transformResults=a}}class bh{constructor(e,a){this.updateTime=e,this.exists=a}static none(){return new bh}static exists(e){return new bh(void 0,e)}static updateTime(e){return new bh(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bC(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hx{}function p$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $x(t.key,bh.none()):new dT(t.key,t.data,bh.none());{const a=t.data,r=Sh.empty();let s=new fd(bm.comparator);for(let l of e.fields)if(!s.has(l)){let h=a.field(l);h===null&&l.length>1&&(l=l.popLast(),h=a.field(l)),h===null?r.delete(l):r.set(l,h),s=s.add(l)}return new Dg(t.key,r,new af(s.toArray()),bh.none())}}function zoe(t,e,a){t instanceof dT?function(r,s,l){const h=r.value.clone(),n=Y6(r.fieldTransforms,s,l.transformResults);h.setAll(n),s.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,a):t instanceof Dg?function(r,s,l){if(!bC(r.precondition,s))return void s.convertToUnknownDocument(l.version);const h=Y6(r.fieldTransforms,s,l.transformResults),n=s.data;n.setAll(m$(r)),n.setAll(h),s.convertToFoundDocument(l.version,n).setHasCommittedMutations()}(t,e,a):function(r,s,l){s.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,a)}function Ow(t,e,a,r){return t instanceof dT?function(s,l,h,n){if(!bC(s.precondition,l))return h;const w=s.value.clone(),T=X6(s.fieldTransforms,n,l);return w.setAll(T),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),null}(t,e,a,r):t instanceof Dg?function(s,l,h,n){if(!bC(s.precondition,l))return h;const w=X6(s.fieldTransforms,n,l),T=l.data;return T.setAll(m$(s)),T.setAll(w),l.convertToFoundDocument(l.version,T).setHasLocalMutations(),h===null?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(E=>E.field))}(t,e,a,r):function(s,l,h){return bC(s.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,a)}function Ooe(t,e){let a=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),l=c$(r.transform,s||null);l!=null&&(a===null&&(a=Sh.empty()),a.set(r.field,l))}return a||null}function W6(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(a,r){return a===void 0&&r===void 0||!(!a||!r)&&W_(a,r,(s,l)=>Noe(s,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dT extends Hx{constructor(e,a,r,s=[]){super(),this.key=e,this.value=a,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dg extends Hx{constructor(e,a,r,s,l=[]){super(),this.key=e,this.data=a,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function m$(t){const e=new Map;return t.fieldMask.fields.forEach(a=>{if(!a.isEmpty()){const r=t.data.field(a);e.set(a,r)}}),e}function Y6(t,e,a){const r=new Map;Vo(t.length===a.length);for(let s=0;s<a.length;s++){const l=t[s],h=l.transform,n=e.data.field(l.field);r.set(l.field,Eoe(h,n,a[s]))}return r}function X6(t,e,a){const r=new Map;for(const s of t){const l=s.transform,h=a.data.field(s.field);r.set(s.field,Poe(l,h,e))}return r}class $x extends Hx{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Doe extends Hx{constructor(e,a){super(),this.key=e,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Moe{constructor(e,a,r,s){this.batchId=e,this.localWriteTime=a,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,a){const r=a.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&zoe(l,e,r[s])}}applyToLocalView(e,a){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(a=Ow(r,e,a,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(a=Ow(r,e,a,this.localWriteTime));return a}applyToLocalDocumentSet(e,a){const r=o$();return this.mutations.forEach(s=>{const l=e.get(s.key),h=l.overlayedDocument;let n=this.applyToLocalView(h,l.mutatedFields);n=a.has(s.key)?null:n;const w=p$(h,n);w!==null&&r.set(s.key,w),h.isValidDocument()||h.convertToNoDocument(Si.min())}),r}keys(){return this.mutations.reduce((e,a)=>e.add(a.key),Ui())}isEqual(e){return this.batchId===e.batchId&&W_(this.mutations,e.mutations,(a,r)=>W6(a,r))&&W_(this.baseMutations,e.baseMutations,(a,r)=>W6(a,r))}}class OI{constructor(e,a,r,s){this.batch=e,this.commitVersion=a,this.mutationResults=r,this.docVersions=s}static from(e,a,r){Vo(e.mutations.length===r.length);let s=Toe;const l=e.mutations;for(let h=0;h<l.length;h++)s=s.insert(l[h].key,r[h].version);return new OI(e,a,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ioe{constructor(e,a){this.largestBatchId=e,this.mutation=a}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Loe{constructor(e,a){this.count=e,this.unchangedNames=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var au,as;function Foe(t){switch(t){default:return ei();case tr.CANCELLED:case tr.UNKNOWN:case tr.DEADLINE_EXCEEDED:case tr.RESOURCE_EXHAUSTED:case tr.INTERNAL:case tr.UNAVAILABLE:case tr.UNAUTHENTICATED:return!1;case tr.INVALID_ARGUMENT:case tr.NOT_FOUND:case tr.ALREADY_EXISTS:case tr.PERMISSION_DENIED:case tr.FAILED_PRECONDITION:case tr.ABORTED:case tr.OUT_OF_RANGE:case tr.UNIMPLEMENTED:case tr.DATA_LOSS:return!0}}function y$(t){if(t===void 0)return my("GRPC error has no .code"),tr.UNKNOWN;switch(t){case au.OK:return tr.OK;case au.CANCELLED:return tr.CANCELLED;case au.UNKNOWN:return tr.UNKNOWN;case au.DEADLINE_EXCEEDED:return tr.DEADLINE_EXCEEDED;case au.RESOURCE_EXHAUSTED:return tr.RESOURCE_EXHAUSTED;case au.INTERNAL:return tr.INTERNAL;case au.UNAVAILABLE:return tr.UNAVAILABLE;case au.UNAUTHENTICATED:return tr.UNAUTHENTICATED;case au.INVALID_ARGUMENT:return tr.INVALID_ARGUMENT;case au.NOT_FOUND:return tr.NOT_FOUND;case au.ALREADY_EXISTS:return tr.ALREADY_EXISTS;case au.PERMISSION_DENIED:return tr.PERMISSION_DENIED;case au.FAILED_PRECONDITION:return tr.FAILED_PRECONDITION;case au.ABORTED:return tr.ABORTED;case au.OUT_OF_RANGE:return tr.OUT_OF_RANGE;case au.UNIMPLEMENTED:return tr.UNIMPLEMENTED;case au.DATA_LOSS:return tr.DATA_LOSS;default:return ei()}}(as=au||(au={}))[as.OK=0]="OK",as[as.CANCELLED=1]="CANCELLED",as[as.UNKNOWN=2]="UNKNOWN",as[as.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",as[as.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",as[as.NOT_FOUND=5]="NOT_FOUND",as[as.ALREADY_EXISTS=6]="ALREADY_EXISTS",as[as.PERMISSION_DENIED=7]="PERMISSION_DENIED",as[as.UNAUTHENTICATED=16]="UNAUTHENTICATED",as[as.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",as[as.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",as[as.ABORTED=10]="ABORTED",as[as.OUT_OF_RANGE=11]="OUT_OF_RANGE",as[as.UNIMPLEMENTED=12]="UNIMPLEMENTED",as[as.INTERNAL=13]="INTERNAL",as[as.UNAVAILABLE=14]="UNAVAILABLE",as[as.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return WS}static getOrCreateInstance(){return WS===null&&(WS=new DI),WS}onExistenceFilterMismatch(e){const a=Symbol();return this.onExistenceFilterMismatchCallbacks.set(a,e),()=>this.onExistenceFilterMismatchCallbacks.delete(a)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(a=>a(e))}}let WS=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uoe(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const koe=new O_([4294967295,4294967295],0);function J6(t){const e=Uoe().encode(t),a=new Zse;return a.update(e),new Uint8Array(a.digest())}function Q6(t){const e=new DataView(t.buffer),a=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new O_([a,r],0),new O_([s,l],0)]}class MI{constructor(e,a,r){if(this.bitmap=e,this.padding=a,this.hashCount=r,a<0||a>=8)throw new Sw(`Invalid padding: ${a}`);if(r<0)throw new Sw(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Sw(`Invalid hash count: ${r}`);if(e.length===0&&a!==0)throw new Sw(`Invalid padding when bitmap length is 0: ${a}`);this.It=8*e.length-a,this.Tt=O_.fromNumber(this.It)}Et(e,a,r){let s=e.add(a.multiply(O_.fromNumber(r)));return s.compare(koe)===1&&(s=new O_([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const a=J6(e),[r,s]=Q6(a);for(let l=0;l<this.hashCount;l++){const h=this.Et(r,s,l);if(!this.At(h))return!1}return!0}static create(e,a,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new MI(l,s,a);return r.forEach(n=>h.insert(n)),h}insert(e){if(this.It===0)return;const a=J6(e),[r,s]=Q6(a);for(let l=0;l<this.hashCount;l++){const h=this.Et(r,s,l);this.Rt(h)}}Rt(e){const a=Math.floor(e/8),r=e%8;this.bitmap[a]|=1<<r}}class Sw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,a,r,s,l){this.snapshotVersion=e,this.targetChanges=a,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,a,r){const s=new Map;return s.set(e,hT.createSynthesizedTargetChangeForCurrentChange(e,a,r)),new Kx(Si.min(),s,new ou(gs),gy(),Ui())}}class hT{constructor(e,a,r,s,l){this.resumeToken=e,this.current=a,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,a,r){return new hT(r,a,Ui(),Ui(),Ui())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,a,r,s){this.Pt=e,this.removedTargetIds=a,this.key=r,this.bt=s}}let g$=class{constructor(e,a){this.targetId=e,this.Vt=a}};class A${constructor(e,a,r=md.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=a,this.resumeToken=r,this.cause=s}}class eU{constructor(){this.St=0,this.Dt=aU(),this.Ct=md.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Ui(),a=Ui(),r=Ui();return this.Dt.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:a=a.add(s);break;case 1:r=r.add(s);break;default:ei()}}),new hT(this.Ct,this.xt,e,a,r)}Ft(){this.Nt=!1,this.Dt=aU()}Bt(e,a){this.Nt=!0,this.Dt=this.Dt.insert(e,a)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Boe{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=gy(),this.zt=tU(),this.Wt=new ou(gs)}Ht(e){for(const a of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(a,e.bt):this.Yt(a,e.key,e.bt);for(const a of e.removedTargetIds)this.Yt(a,e.key,e.bt)}Xt(e){this.forEachTarget(e,a=>{const r=this.Zt(a);switch(e.state){case 0:this.te(a)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(a);break;case 3:this.te(a)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(a)&&(this.ee(a),r.$t(e.resumeToken));break;default:ei()}})}forEachTarget(e,a){e.targetIds.length>0?e.targetIds.forEach(a):this.Qt.forEach((r,s)=>{this.te(s)&&a(s)})}ne(e){var a;const r=e.targetId,s=e.Vt.count,l=this.se(r);if(l){const h=l.target;if(k5(h))if(s===0){const n=new Kn(h.path);this.Yt(r,n,od.newNoDocument(n,Si.min()))}else Vo(s===1);else{const n=this.ie(r);if(n!==s){const w=this.re(e,n);if(w!==0){this.ee(r);const T=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(r,T)}(a=DI.instance)===null||a===void 0||a.notifyOnExistenceFilterMismatch(function(T,E,z){var k,U,q,H,$,Q;const ne={localCacheCount:E,existenceFilterCount:z.count},de=z.unchangedNames;return de&&(ne.bloomFilter={applied:T===0,hashCount:(k=de==null?void 0:de.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(H=(q=(U=de==null?void 0:de.bits)===null||U===void 0?void 0:U.bitmap)===null||q===void 0?void 0:q.length)!==null&&H!==void 0?H:0,padding:(Q=($=de==null?void 0:de.bits)===null||$===void 0?void 0:$.padding)!==null&&Q!==void 0?Q:0}),ne}(w,n,e.Vt))}}}}re(e,a){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:l="",padding:h=0},hashCount:n=0}=r;let w,T;try{w=r0(l).toUint8Array()}catch(E){if(E instanceof KH)return K_("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw E}try{T=new MI(w,h,n)}catch(E){return K_(E instanceof Sw?"BloomFilter error: ":"Applying bloom filter failed: ",E),1}return T.It===0?1:s!==a-this.oe(e.targetId,T)?2:0}oe(e,a){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(l=>{const h=this.Gt.ue(),n=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;a.vt(n)||(this.Yt(e,l,null),s++)}),s}ce(e){const a=new Map;this.Qt.forEach((l,h)=>{const n=this.se(h);if(n){if(l.current&&k5(n.target)){const w=new Kn(n.target.path);this.jt.get(w)!==null||this.ae(h,w)||this.Yt(h,w,od.newNoDocument(w,e))}l.Mt&&(a.set(h,l.Ot()),l.Ft())}});let r=Ui();this.zt.forEach((l,h)=>{let n=!0;h.forEachWhile(w=>{const T=this.se(w);return!T||T.purpose==="TargetPurposeLimboResolution"||(n=!1,!1)}),n&&(r=r.add(l))}),this.jt.forEach((l,h)=>h.setReadTime(e));const s=new Kx(e,a,this.Wt,this.jt,r);return this.jt=gy(),this.zt=tU(),this.Wt=new ou(gs),s}Jt(e,a){if(!this.te(e))return;const r=this.ae(e,a.key)?2:0;this.Zt(e).Bt(a.key,r),this.jt=this.jt.insert(a.key,a),this.zt=this.zt.insert(a.key,this.he(a.key).add(e))}Yt(e,a,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,a)?s.Bt(a,1):s.Lt(a),this.zt=this.zt.insert(a,this.he(a).delete(e)),r&&(this.jt=this.jt.insert(a,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const a=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+a.addedDocuments.size-a.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let a=this.Qt.get(e);return a||(a=new eU,this.Qt.set(e,a)),a}he(e){let a=this.zt.get(e);return a||(a=new fd(gs),this.zt=this.zt.insert(e,a)),a}te(e){const a=this.se(e)!==null;return a||dn("WatchChangeAggregator","Detected inactive target",e),a}se(e){const a=this.Qt.get(e);return a&&a.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new eU),this.Gt.getRemoteKeysForTarget(e).forEach(a=>{this.Yt(e,a,null)})}ae(e,a){return this.Gt.getRemoteKeysForTarget(e).has(a)}}function tU(){return new ou(Kn.comparator)}function aU(){return new ou(Kn.comparator)}const Goe={asc:"ASCENDING",desc:"DESCENDING"},joe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Zoe={and:"AND",or:"OR"};class qoe{constructor(e,a){this.databaseId=e,this.useProto3Json=a}}function Z5(t,e){return t.useProto3Json||kx(e)?e:{value:e}}function lb(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Hoe(t,e){return lb(t,e.toTimestamp())}function Rm(t){return Vo(!!t),Si.fromTimestamp(function(e){const a=xg(e);return new Xd(a.seconds,a.nanos)}(t))}function II(t,e){return function(a){return new Ml(["projects",a.projectId,"databases",a.database])}(t).child("documents").child(e).canonicalString()}function v$(t){const e=Ml.fromString(t);return Vo(S$(e)),e}function q5(t,e){return II(t.databaseId,e.path)}function SE(t,e){const a=v$(e);if(a.get(1)!==t.databaseId.projectId)throw new Zr(tr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+t.databaseId.projectId);if(a.get(3)!==t.databaseId.database)throw new Zr(tr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+t.databaseId.database);return new Kn(w$(a))}function H5(t,e){return II(t.databaseId,e)}function $oe(t){const e=v$(t);return e.length===4?Ml.emptyPath():w$(e)}function $5(t){return new Ml(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function w$(t){return Vo(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function rU(t,e,a){return{name:q5(t,e),fields:a.value.mapValue.fields}}function Koe(t,e){let a;if("targetChange"in e){e.targetChange;const r=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:ei()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(w,T){return w.useProto3Json?(Vo(T===void 0||typeof T=="string"),md.fromBase64String(T||"")):(Vo(T===void 0||T instanceof Uint8Array),md.fromUint8Array(T||new Uint8Array))}(t,e.targetChange.resumeToken),h=e.targetChange.cause,n=h&&function(w){const T=w.code===void 0?tr.UNKNOWN:y$(w.code);return new Zr(T,w.message||"")}(h);a=new A$(r,s,l,n||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=SE(t,r.document.name),l=Rm(r.document.updateTime),h=r.document.createTime?Rm(r.document.createTime):Si.min(),n=new Sh({mapValue:{fields:r.document.fields}}),w=od.newFoundDocument(s,l,h,n),T=r.targetIds||[],E=r.removedTargetIds||[];a=new xC(T,E,w.key,w)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=SE(t,r.document),l=r.readTime?Rm(r.readTime):Si.min(),h=od.newNoDocument(s,l),n=r.removedTargetIds||[];a=new xC([],n,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=SE(t,r.document),l=r.removedTargetIds||[];a=new xC([],l,s,null)}else{if(!("filter"in e))return ei();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,h=new Loe(s,l),n=r.targetId;a=new g$(n,h)}}return a}function Woe(t,e){let a;if(e instanceof dT)a={update:rU(t,e.key,e.value)};else if(e instanceof $x)a={delete:q5(t,e.key)};else if(e instanceof Dg)a={update:rU(t,e.key,e.data),updateMask:nle(e.fieldMask)};else{if(!(e instanceof Doe))return ei();a={verify:q5(t,e.key)}}return e.fieldTransforms.length>0&&(a.updateTransforms=e.fieldTransforms.map(r=>function(s,l){const h=l.transform;if(h instanceof sb)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof iR)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof sR)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof ob)return{fieldPath:l.field.canonicalString(),increment:h.gt};throw ei()}(0,r))),e.precondition.isNone||(a.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Hoe(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ei()}(t,e.precondition)),a}function Yoe(t,e){return t&&t.length>0?(Vo(e!==void 0),t.map(a=>function(r,s){let l=r.updateTime?Rm(r.updateTime):Rm(s);return l.isEqual(Si.min())&&(l=Rm(s)),new Voe(l,r.transformResults||[])}(a,e))):[]}function Xoe(t,e){return{documents:[H5(t,e.path)]}}function Joe(t,e){const a={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(a.parent=H5(t,r),a.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a.parent=H5(t,r.popLast()),a.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(w.length!==0)return T$(Np.create(w,"and"))}(e.filters);s&&(a.structuredQuery.where=s);const l=function(w){if(w.length!==0)return w.map(T=>function(E){return{field:g_(E.field),direction:tle(E.dir)}}(T))}(e.orderBy);l&&(a.structuredQuery.orderBy=l);const h=Z5(t,e.limit);var n;return h!==null&&(a.structuredQuery.limit=h),e.startAt&&(a.structuredQuery.startAt={before:(n=e.startAt).inclusive,values:n.position}),e.endAt&&(a.structuredQuery.endAt=function(w){return{before:!w.inclusive,values:w.position}}(e.endAt)),a}function Qoe(t){let e=$oe(t.parent);const a=t.structuredQuery,r=a.from?a.from.length:0;let s=null;if(r>0){Vo(r===1);const E=a.from[0];E.allDescendants?s=E.collectionId:e=e.child(E.collectionId)}let l=[];a.where&&(l=function(E){const z=R$(E);return z instanceof Np&&JH(z)?z.getFilters():[z]}(a.where));let h=[];a.orderBy&&(h=a.orderBy.map(E=>function(z){return new D_(A_(z.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(z.direction))}(E)));let n=null;a.limit&&(n=function(E){let z;return z=typeof E=="object"?E.value:E,kx(z)?null:z}(a.limit));let w=null;a.startAt&&(w=function(E){const z=!!E.before,k=E.values||[];return new ib(k,z)}(a.startAt));let T=null;return a.endAt&&(T=function(E){const z=!E.before,k=E.values||[];return new ib(k,z)}(a.endAt)),_oe(e,s,h,l,n,"F",w,T)}function ele(t,e){const a=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ei()}}(e.purpose);return a==null?null:{"goog-listen-tags":a}}function R$(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const a=A_(e.unaryFilter.field);return iu.create(a,"==",{doubleValue:NaN});case"IS_NULL":const r=A_(e.unaryFilter.field);return iu.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=A_(e.unaryFilter.field);return iu.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=A_(e.unaryFilter.field);return iu.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ei()}}(t):t.fieldFilter!==void 0?function(e){return iu.create(A_(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ei()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Np.create(e.compositeFilter.filters.map(a=>R$(a)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ei()}}(e.compositeFilter.op))}(t):ei()}function tle(t){return Goe[t]}function ale(t){return joe[t]}function rle(t){return Zoe[t]}function g_(t){return{fieldPath:t.canonicalString()}}function A_(t){return bm.fromServerFormat(t.fieldPath)}function T$(t){return t instanceof iu?function(e){if(e.op==="=="){if(j6(e.value))return{unaryFilter:{field:g_(e.field),op:"IS_NAN"}};if(G6(e.value))return{unaryFilter:{field:g_(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(j6(e.value))return{unaryFilter:{field:g_(e.field),op:"IS_NOT_NAN"}};if(G6(e.value))return{unaryFilter:{field:g_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:g_(e.field),op:ale(e.op),value:e.value}}}(t):t instanceof Np?function(e){const a=e.getFilters().map(r=>T$(r));return a.length===1?a[0]:{compositeFilter:{op:rle(e.op),filters:a}}}(t):ei()}function nle(t){const e=[];return t.fields.forEach(a=>e.push(a.canonicalString())),{fieldPaths:e}}function S$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,a,r,s,l=Si.min(),h=Si.min(),n=md.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=a,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=n,this.expectedCount=w}withSequenceNumber(e){return new Ag(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,a){return new Ag(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ag(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ag(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ile{constructor(e){this.fe=e}}function sle(t){const e=Qoe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?G5(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ole{constructor(){this.rn=new lle}addToCollectionParentIndex(e,a){return this.rn.add(a),Dr.resolve()}getCollectionParents(e,a){return Dr.resolve(this.rn.getEntries(a))}addFieldIndex(e,a){return Dr.resolve()}deleteFieldIndex(e,a){return Dr.resolve()}getDocumentsMatchingTarget(e,a){return Dr.resolve(null)}getIndexType(e,a){return Dr.resolve(0)}getFieldIndexes(e,a){return Dr.resolve([])}getNextCollectionGroupToUpdate(e){return Dr.resolve(null)}getMinOffset(e,a){return Dr.resolve(tR.min())}getMinOffsetFromCollectionGroup(e,a){return Dr.resolve(tR.min())}updateCollectionGroup(e,a,r){return Dr.resolve()}updateIndexEntries(e,a){return Dr.resolve()}}class lle{constructor(){this.index={}}add(e){const a=e.lastSegment(),r=e.popLast(),s=this.index[a]||new fd(Ml.comparator),l=!s.has(r);return this.index[a]=s.add(r),l}has(e){const a=e.lastSegment(),r=e.popLast(),s=this.index[a];return s&&s.has(r)}getEntries(e){return(this.index[e]||new fd(Ml.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new J_(0)}static Mn(){return new J_(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ule{constructor(){this.changes=new Mv(e=>e.toString(),(e,a)=>e.isEqual(a)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,a){this.assertNotApplied(),this.changes.set(e,od.newInvalidDocument(e).setReadTime(a))}getEntry(e,a){this.assertNotApplied();const r=this.changes.get(a);return r!==void 0?Dr.resolve(r):this.getFromCache(e,a)}getEntries(e,a){return this.getAllFromCache(e,a)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cle{constructor(e,a){this.overlayedDocument=e,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dle{constructor(e,a,r,s){this.remoteDocumentCache=e,this.mutationQueue=a,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,a){let r=null;return this.documentOverlayCache.getOverlay(e,a).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,a))).next(s=>(r!==null&&Ow(r.mutation,s,af.empty(),Xd.now()),s))}getDocuments(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.getLocalViewOfDocuments(e,r,Ui()).next(()=>r))}getLocalViewOfDocuments(e,a,r=Ui()){const s=UA();return this.populateOverlays(e,s,a).next(()=>this.computeViews(e,a,s,r).next(l=>{let h=Tw();return l.forEach((n,w)=>{h=h.insert(n,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,a){const r=UA();return this.populateOverlays(e,r,a).next(()=>this.computeViews(e,a,r,Ui()))}populateOverlays(e,a,r){const s=[];return r.forEach(l=>{a.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((h,n)=>{a.set(h,n)})})}computeViews(e,a,r,s){let l=gy();const h=zw(),n=zw();return a.forEach((w,T)=>{const E=r.get(T.key);s.has(T.key)&&(E===void 0||E.mutation instanceof Dg)?l=l.insert(T.key,T):E!==void 0?(h.set(T.key,E.mutation.getFieldMask()),Ow(E.mutation,T,E.mutation.getFieldMask(),Xd.now())):h.set(T.key,af.empty())}),this.recalculateAndSaveOverlays(e,l).next(w=>(w.forEach((T,E)=>h.set(T,E)),a.forEach((T,E)=>{var z;return n.set(T,new cle(E,(z=h.get(T))!==null&&z!==void 0?z:null))}),n))}recalculateAndSaveOverlays(e,a){const r=zw();let s=new ou((h,n)=>h-n),l=Ui();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,a).next(h=>{for(const n of h)n.keys().forEach(w=>{const T=a.get(w);if(T===null)return;let E=r.get(w)||af.empty();E=n.applyToLocalView(T,E),r.set(w,E);const z=(s.get(n.batchId)||Ui()).add(w);s=s.insert(n.batchId,z)})}).next(()=>{const h=[],n=s.getReverseIterator();for(;n.hasNext();){const w=n.getNext(),T=w.key,E=w.value,z=o$();E.forEach(k=>{if(!l.has(k)){const U=p$(a.get(k),r.get(k));U!==null&&z.set(k,U),l=l.add(k)}}),h.push(this.documentOverlayCache.saveOverlays(e,T,z))}return Dr.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,a){return this.remoteDocumentCache.getEntries(e,a).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,a,r){return function(s){return Kn.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(a)?this.getDocumentsMatchingDocumentQuery(e,a.path):a$(a)?this.getDocumentsMatchingCollectionGroupQuery(e,a,r):this.getDocumentsMatchingCollectionQuery(e,a,r)}getNextDocuments(e,a,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,a,r,s).next(l=>{const h=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,a,r.largestBatchId,s-l.size):Dr.resolve(UA());let n=-1,w=l;return h.next(T=>Dr.forEach(T,(E,z)=>(n<z.largestBatchId&&(n=z.largestBatchId),l.get(E)?Dr.resolve():this.remoteDocumentCache.getEntry(e,E).next(k=>{w=w.insert(E,k)}))).next(()=>this.populateOverlays(e,T,l)).next(()=>this.computeViews(e,w,T,Ui())).next(E=>({batchId:n,changes:s$(E)})))})}getDocumentsMatchingDocumentQuery(e,a){return this.getDocument(e,new Kn(a)).next(r=>{let s=Tw();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,a,r){const s=a.collectionGroup;let l=Tw();return this.indexManager.getCollectionParents(e,s).next(h=>Dr.forEach(h,n=>{const w=function(T,E){return new Dv(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(a,n.child(s));return this.getDocumentsMatchingCollectionQuery(e,w,r).next(T=>{T.forEach((E,z)=>{l=l.insert(E,z)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,a,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,a.path,r.largestBatchId).next(l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,a,r,s))).next(l=>{s.forEach((n,w)=>{const T=w.getKey();l.get(T)===null&&(l=l.insert(T,od.newInvalidDocument(T)))});let h=Tw();return l.forEach((n,w)=>{const T=s.get(n);T!==void 0&&Ow(T.mutation,w,af.empty(),Xd.now()),Zx(a,w)&&(h=h.insert(n,w))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hle{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,a){return Dr.resolve(this.cs.get(a))}saveBundleMetadata(e,a){var r;return this.cs.set(a.id,{id:(r=a).id,version:r.version,createTime:Rm(r.createTime)}),Dr.resolve()}getNamedQuery(e,a){return Dr.resolve(this.hs.get(a))}saveNamedQuery(e,a){return this.hs.set(a.name,function(r){return{name:r.name,query:sle(r.bundledQuery),readTime:Rm(r.readTime)}}(a)),Dr.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fle{constructor(){this.overlays=new ou(Kn.comparator),this.ls=new Map}getOverlay(e,a){return Dr.resolve(this.overlays.get(a))}getOverlays(e,a){const r=UA();return Dr.forEach(a,s=>this.getOverlay(e,s).next(l=>{l!==null&&r.set(s,l)})).next(()=>r)}saveOverlays(e,a,r){return r.forEach((s,l)=>{this.we(e,a,l)}),Dr.resolve()}removeOverlaysForBatchId(e,a,r){const s=this.ls.get(r);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(r)),Dr.resolve()}getOverlaysForCollection(e,a,r){const s=UA(),l=a.length+1,h=new Kn(a.child("")),n=this.overlays.getIteratorFrom(h);for(;n.hasNext();){const w=n.getNext().value,T=w.getKey();if(!a.isPrefixOf(T.path))break;T.path.length===l&&w.largestBatchId>r&&s.set(w.getKey(),w)}return Dr.resolve(s)}getOverlaysForCollectionGroup(e,a,r,s){let l=new ou((T,E)=>T-E);const h=this.overlays.getIterator();for(;h.hasNext();){const T=h.getNext().value;if(T.getKey().getCollectionGroup()===a&&T.largestBatchId>r){let E=l.get(T.largestBatchId);E===null&&(E=UA(),l=l.insert(T.largestBatchId,E)),E.set(T.getKey(),T)}}const n=UA(),w=l.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((T,E)=>n.set(T,E)),!(n.size()>=s)););return Dr.resolve(n)}we(e,a,r){const s=this.overlays.get(r.key);if(s!==null){const h=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Ioe(a,r));let l=this.ls.get(a);l===void 0&&(l=Ui(),this.ls.set(a,l)),this.ls.set(a,l.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.fs=new fd(Xu.ds),this.ws=new fd(Xu._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,a){const r=new Xu(e,a);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,a){e.forEach(r=>this.addReference(r,a))}removeReference(e,a){this.ys(new Xu(e,a))}ps(e,a){e.forEach(r=>this.removeReference(r,a))}Is(e){const a=new Kn(new Ml([])),r=new Xu(a,e),s=new Xu(a,e+1),l=[];return this.ws.forEachInRange([r,s],h=>{this.ys(h),l.push(h.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const a=new Kn(new Ml([])),r=new Xu(a,e),s=new Xu(a,e+1);let l=Ui();return this.ws.forEachInRange([r,s],h=>{l=l.add(h.key)}),l}containsKey(e){const a=new Xu(e,0),r=this.fs.firstAfterOrEqual(a);return r!==null&&e.isEqual(r.key)}}class Xu{constructor(e,a){this.key=e,this.As=a}static ds(e,a){return Kn.comparator(e.key,a.key)||gs(e.As,a.As)}static _s(e,a){return gs(e.As,a.As)||Kn.comparator(e.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ple{constructor(e,a){this.indexManager=e,this.referenceDelegate=a,this.mutationQueue=[],this.vs=1,this.Rs=new fd(Xu.ds)}checkEmpty(e){return Dr.resolve(this.mutationQueue.length===0)}addMutationBatch(e,a,r,s){const l=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Moe(l,a,r,s);this.mutationQueue.push(h);for(const n of s)this.Rs=this.Rs.add(new Xu(n.key,l)),this.indexManager.addToCollectionParentIndex(e,n.key.path.popLast());return Dr.resolve(h)}lookupMutationBatch(e,a){return Dr.resolve(this.Ps(a))}getNextMutationBatchAfterBatchId(e,a){const r=a+1,s=this.bs(r),l=s<0?0:s;return Dr.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Dr.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return Dr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,a){const r=new Xu(a,0),s=new Xu(a,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([r,s],h=>{const n=this.Ps(h.As);l.push(n)}),Dr.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,a){let r=new fd(gs);return a.forEach(s=>{const l=new Xu(s,0),h=new Xu(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,h],n=>{r=r.add(n.As)})}),Dr.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,a){const r=a.path,s=r.length+1;let l=r;Kn.isDocumentKey(l)||(l=l.child(""));const h=new Xu(new Kn(l),0);let n=new fd(gs);return this.Rs.forEachWhile(w=>{const T=w.key.path;return!!r.isPrefixOf(T)&&(T.length===s&&(n=n.add(w.As)),!0)},h),Dr.resolve(this.Vs(n))}Vs(e){const a=[];return e.forEach(r=>{const s=this.Ps(r);s!==null&&a.push(s)}),a}removeMutationBatch(e,a){Vo(this.Ss(a.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Rs;return Dr.forEach(a.mutations,s=>{const l=new Xu(s.key,a.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,a){const r=new Xu(a,0),s=this.Rs.firstAfterOrEqual(r);return Dr.resolve(a.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Dr.resolve()}Ss(e,a){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const a=this.bs(e);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mle{constructor(e){this.Ds=e,this.docs=new ou(Kn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,a){const r=a.key,s=this.docs.get(r),l=s?s.size:0,h=this.Ds(a);return this.docs=this.docs.insert(r,{document:a.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const a=this.docs.get(e);a&&(this.docs=this.docs.remove(e),this.size-=a.size)}getEntry(e,a){const r=this.docs.get(a);return Dr.resolve(r?r.document.mutableCopy():od.newInvalidDocument(a))}getEntries(e,a){let r=gy();return a.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():od.newInvalidDocument(s))}),Dr.resolve(r)}getDocumentsMatchingQuery(e,a,r,s){let l=gy();const h=a.path,n=new Kn(h.child("")),w=this.docs.getIteratorFrom(n);for(;w.hasNext();){const{key:T,value:{document:E}}=w.getNext();if(!h.isPrefixOf(T.path))break;T.path.length>h.length+1||aoe(toe(E),r)<=0||(s.has(E.key)||Zx(a,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Dr.resolve(l)}getAllFromCollectionGroup(e,a,r,s){ei()}Cs(e,a){return Dr.forEach(this.docs,r=>a(r))}newChangeBuffer(e){return new yle(this)}getSize(e){return Dr.resolve(this.size)}}class yle extends ule{constructor(e){super(),this.os=e}applyChanges(e){const a=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?a.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),Dr.waitFor(a)}getFromCache(e,a){return this.os.getEntry(e,a)}getAllFromCache(e,a){return this.os.getEntries(e,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gle{constructor(e){this.persistence=e,this.xs=new Mv(a=>NI(a),VI),this.lastRemoteSnapshotVersion=Si.min(),this.highestTargetId=0,this.Ns=0,this.ks=new LI,this.targetCount=0,this.Ms=J_.kn()}forEachTarget(e,a){return this.xs.forEach((r,s)=>a(s)),Dr.resolve()}getLastRemoteSnapshotVersion(e){return Dr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Dr.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Dr.resolve(this.highestTargetId)}setTargetsMetadata(e,a,r){return r&&(this.lastRemoteSnapshotVersion=r),a>this.Ns&&(this.Ns=a),Dr.resolve()}Fn(e){this.xs.set(e.target,e);const a=e.targetId;a>this.highestTargetId&&(this.Ms=new J_(a),this.highestTargetId=a),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,a){return this.Fn(a),this.targetCount+=1,Dr.resolve()}updateTargetData(e,a){return this.Fn(a),Dr.resolve()}removeTargetData(e,a){return this.xs.delete(a.target),this.ks.Is(a.targetId),this.targetCount-=1,Dr.resolve()}removeTargets(e,a,r){let s=0;const l=[];return this.xs.forEach((h,n)=>{n.sequenceNumber<=a&&r.get(n.targetId)===null&&(this.xs.delete(h),l.push(this.removeMatchingKeysForTargetId(e,n.targetId)),s++)}),Dr.waitFor(l).next(()=>s)}getTargetCount(e){return Dr.resolve(this.targetCount)}getTargetData(e,a){const r=this.xs.get(a)||null;return Dr.resolve(r)}addMatchingKeys(e,a,r){return this.ks.gs(a,r),Dr.resolve()}removeMatchingKeys(e,a,r){this.ks.ps(a,r);const s=this.persistence.referenceDelegate,l=[];return s&&a.forEach(h=>{l.push(s.markPotentiallyOrphaned(e,h))}),Dr.waitFor(l)}removeMatchingKeysForTargetId(e,a){return this.ks.Is(a),Dr.resolve()}getMatchingKeysForTargetId(e,a){const r=this.ks.Es(a);return Dr.resolve(r)}containsKey(e,a){return Dr.resolve(this.ks.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ale{constructor(e,a){this.$s={},this.overlays={},this.Os=new bI(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new gle(this),this.indexManager=new ole,this.remoteDocumentCache=function(r){return new mle(r)}(r=>this.referenceDelegate.Ls(r)),this.serializer=new ile(a),this.qs=new hle(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let a=this.overlays[e.toKey()];return a||(a=new fle,this.overlays[e.toKey()]=a),a}getMutationQueue(e,a){let r=this.$s[e.toKey()];return r||(r=new ple(a,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,a,r){dn("MemoryPersistence","Starting transaction:",e);const s=new _le(this.Os.next());return this.referenceDelegate.Us(),r(s).next(l=>this.referenceDelegate.Ks(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Gs(e,a){return Dr.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,a)))}}class _le extends noe{constructor(e){super(),this.currentSequenceNumber=e}}class FI{constructor(e){this.persistence=e,this.Qs=new LI,this.js=null}static zs(e){return new FI(e)}get Ws(){if(this.js)return this.js;throw ei()}addReference(e,a,r){return this.Qs.addReference(r,a),this.Ws.delete(r.toString()),Dr.resolve()}removeReference(e,a,r){return this.Qs.removeReference(r,a),this.Ws.add(r.toString()),Dr.resolve()}markPotentiallyOrphaned(e,a){return this.Ws.add(a.toString()),Dr.resolve()}removeTarget(e,a){this.Qs.Is(a.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,a.targetId).next(s=>{s.forEach(l=>this.Ws.add(l.toString()))}).next(()=>r.removeTargetData(e,a))}Us(){this.js=new Set}Ks(e){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dr.forEach(this.Ws,r=>{const s=Kn.fromPath(r);return this.Hs(e,s).next(l=>{l||a.removeEntry(s,Si.min())})}).next(()=>(this.js=null,a.apply(e)))}updateLimboDocument(e,a){return this.Hs(e,a).next(r=>{r?this.Ws.delete(a.toString()):this.Ws.add(a.toString())})}Ls(e){return 0}Hs(e,a){return Dr.or([()=>Dr.resolve(this.Qs.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(e,a),()=>this.persistence.Gs(e,a)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,a,r,s){this.targetId=e,this.fromCache=a,this.Fi=r,this.Bi=s}static Li(e,a){let r=Ui(),s=Ui();for(const l of a.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new UI(e,a.fromCache,r,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vle{constructor(){this.qi=!1}initialize(e,a){this.Ui=e,this.indexManager=a,this.qi=!0}getDocumentsMatchingQuery(e,a,r,s){return this.Ki(e,a).next(l=>l||this.Gi(e,a,s,r)).next(l=>l||this.Qi(e,a))}Ki(e,a){if($6(a))return Dr.resolve(null);let r=yy(a);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(a.limit!==null&&s===1&&(a=G5(a,null,"F"),r=yy(a)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const h=Ui(...l);return this.Ui.getDocuments(e,h).next(n=>this.indexManager.getMinOffset(e,r).next(w=>{const T=this.ji(a,n);return this.zi(a,T,h,w.readTime)?this.Ki(e,G5(a,null,"F")):this.Wi(e,T,a,w)}))})))}Gi(e,a,r,s){return $6(a)||s.isEqual(Si.min())?this.Qi(e,a):this.Ui.getDocuments(e,r).next(l=>{const h=this.ji(a,l);return this.zi(a,h,r,s)?this.Qi(e,a):(L6()<=fs.DEBUG&&dn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),j5(a)),this.Wi(e,h,a,eoe(s,-1)))})}ji(e,a){let r=new fd(n$(e));return a.forEach((s,l)=>{Zx(e,l)&&(r=r.add(l))}),r}zi(e,a,r,s){if(e.limit===null)return!1;if(r.size!==a.size)return!0;const l=e.limitType==="F"?a.last():a.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}Qi(e,a){return L6()<=fs.DEBUG&&dn("QueryEngine","Using full collection scan to execute query:",j5(a)),this.Ui.getDocumentsMatchingQuery(e,a,tR.min())}Wi(e,a,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(l=>(a.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wle{constructor(e,a,r,s){this.persistence=e,this.Hi=a,this.serializer=s,this.Ji=new ou(gs),this.Yi=new Mv(l=>NI(l),VI),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dle(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",a=>e.collect(a,this.Ji))}}function Rle(t,e,a,r){return new wle(t,e,a,r)}async function C$(t,e){const a=fi(t);return await a.persistence.runTransaction("Handle user change","readonly",r=>{let s;return a.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,a.tr(e),a.mutationQueue.getAllMutationBatches(r))).next(l=>{const h=[],n=[];let w=Ui();for(const T of s){h.push(T.batchId);for(const E of T.mutations)w=w.add(E.key)}for(const T of l){n.push(T.batchId);for(const E of T.mutations)w=w.add(E.key)}return a.localDocuments.getDocuments(r,w).next(T=>({er:T,removedBatchIds:h,addedBatchIds:n}))})})}function Tle(t,e){const a=fi(t);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=a.Zi.newChangeBuffer({trackRemovals:!0});return function(h,n,w,T){const E=w.batch,z=E.keys();let k=Dr.resolve();return z.forEach(U=>{k=k.next(()=>T.getEntry(n,U)).next(q=>{const H=w.docVersions.get(U);Vo(H!==null),q.version.compareTo(H)<0&&(E.applyToRemoteDocument(q,w),q.isValidDocument()&&(q.setReadTime(w.commitVersion),T.addEntry(q)))})}),k.next(()=>h.mutationQueue.removeMutationBatch(n,E))}(a,r,e,l).next(()=>l.apply(r)).next(()=>a.mutationQueue.performConsistencyCheck(r)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let n=Ui();for(let w=0;w<h.mutationResults.length;++w)h.mutationResults[w].transformResults.length>0&&(n=n.add(h.batch.mutations[w].key));return n}(e))).next(()=>a.localDocuments.getDocuments(r,s))})}function b$(t){const e=fi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",a=>e.Bs.getLastRemoteSnapshotVersion(a))}function Sle(t,e){const a=fi(t),r=e.snapshotVersion;let s=a.Ji;return a.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=a.Zi.newChangeBuffer({trackRemovals:!0});s=a.Ji;const n=[];e.targetChanges.forEach((E,z)=>{const k=s.get(z);if(!k)return;n.push(a.Bs.removeMatchingKeys(l,E.removedDocuments,z).next(()=>a.Bs.addMatchingKeys(l,E.addedDocuments,z)));let U=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(z)!==null?U=U.withResumeToken(md.EMPTY_BYTE_STRING,Si.min()).withLastLimboFreeSnapshotVersion(Si.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,r)),s=s.insert(z,U),function(q,H,$){return q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(k,U,E)&&n.push(a.Bs.updateTargetData(l,U))});let w=gy(),T=Ui();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&n.push(a.persistence.referenceDelegate.updateLimboDocument(l,E))}),n.push(Cle(l,h,e.documentUpdates).next(E=>{w=E.nr,T=E.sr})),!r.isEqual(Si.min())){const E=a.Bs.getLastRemoteSnapshotVersion(l).next(z=>a.Bs.setTargetsMetadata(l,l.currentSequenceNumber,r));n.push(E)}return Dr.waitFor(n).next(()=>h.apply(l)).next(()=>a.localDocuments.getLocalViewOfDocuments(l,w,T)).next(()=>w)}).then(l=>(a.Ji=s,l))}function Cle(t,e,a){let r=Ui(),s=Ui();return a.forEach(l=>r=r.add(l)),e.getEntries(t,r).next(l=>{let h=gy();return a.forEach((n,w)=>{const T=l.get(n);w.isFoundDocument()!==T.isFoundDocument()&&(s=s.add(n)),w.isNoDocument()&&w.version.isEqual(Si.min())?(e.removeEntry(n,w.readTime),h=h.insert(n,w)):!T.isValidDocument()||w.version.compareTo(T.version)>0||w.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(w),h=h.insert(n,w)):dn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",T.version," Watch version:",w.version)}),{nr:h,sr:s}})}function ble(t,e){const a=fi(t);return a.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),a.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xle(t,e){const a=fi(t);return a.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return a.Bs.getTargetData(r,e).next(l=>l?(s=l,Dr.resolve(s)):a.Bs.allocateTargetId(r).next(h=>(s=new Ag(e,h,"TargetPurposeListen",r.currentSequenceNumber),a.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=a.Ji.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(a.Ji=a.Ji.insert(r.targetId,r),a.Yi.set(e,r.targetId)),r})}async function K5(t,e,a){const r=fi(t),s=r.Ji.get(e),l=a?"readwrite":"readwrite-primary";try{a||await r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,s))}catch(h){if(!cT(h))throw h;dn("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}function nU(t,e,a){const r=fi(t);let s=Si.min(),l=Ui();return r.persistence.runTransaction("Execute query","readonly",h=>function(n,w,T){const E=fi(n),z=E.Yi.get(T);return z!==void 0?Dr.resolve(E.Ji.get(z)):E.Bs.getTargetData(w,T)}(r,h,yy(e)).next(n=>{if(n)return s=n.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(h,n.targetId).next(w=>{l=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(h,e,a?s:Si.min(),a?l:Ui())).next(n=>(Ple(r,voe(e),n),{documents:n,ir:l})))}function Ple(t,e,a){let r=t.Xi.get(e)||Si.min();a.forEach((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),t.Xi.set(e,r)}class iU{constructor(){this.activeTargetIds=boe()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ele{constructor(){this.Hr=new iU,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,a,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,a,r){this.Jr[e]=a}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new iU,Promise.resolve()}handleUserChange(e,a,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nle{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){dn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){dn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YS=null;function CE(){return YS===null?YS=268435456+Math.round(2147483648*Math.random()):YS++,"0x"+YS.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vle={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zle{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="WebChannelConnection";class Ole extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const a=e.ssl?"https":"http";this.mo=a+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,a,r,s,l){const h=CE(),n=this.To(e,a);dn("RestConnection",`Sending RPC '${e}' ${h}:`,n,r);const w={};return this.Eo(w,s,l),this.Ao(e,n,w,r).then(T=>(dn("RestConnection",`Received RPC '${e}' ${h}: `,T),T),T=>{throw K_("RestConnection",`RPC '${e}' ${h} failed with error: `,T,"url: ",n,"request:",r),T})}vo(e,a,r,s,l,h){return this.Io(e,a,r,s,l)}Eo(e,a,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ov,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((s,l)=>e[l]=s),r&&r.headers.forEach((s,l)=>e[l]=s)}To(e,a){const r=Vle[e];return`${this.mo}/v1/${a}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,a,r,s){const l=CE();return new Promise((h,n)=>{const w=new jse;w.setWithCredentials(!0),w.listenOnce(kse.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case TE.NO_ERROR:const E=w.getResponseJson();dn(ed,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case TE.TIMEOUT:dn(ed,`RPC '${e}' ${l} timed out`),n(new Zr(tr.DEADLINE_EXCEEDED,"Request time out"));break;case TE.HTTP_ERROR:const z=w.getStatus();if(dn(ed,`RPC '${e}' ${l} failed with status:`,z,"response text:",w.getResponseText()),z>0){let k=w.getResponseJson();Array.isArray(k)&&(k=k[0]);const U=k==null?void 0:k.error;if(U&&U.status&&U.message){const q=function(H){const $=H.toLowerCase().replace(/_/g,"-");return Object.values(tr).indexOf($)>=0?$:tr.UNKNOWN}(U.status);n(new Zr(q,U.message))}else n(new Zr(tr.UNKNOWN,"Server responded with status "+w.getStatus()))}else n(new Zr(tr.UNAVAILABLE,"Connection failed."));break;default:ei()}}finally{dn(ed,`RPC '${e}' ${l} completed.`)}});const T=JSON.stringify(s);dn(ed,`RPC '${e}' ${l} sending request:`,s),w.send(a,"POST",T,r,15)})}Ro(e,a,r){const s=CE(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Fse(),n=Use(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(w.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(w.xmlHttpFactory=new Gse({})),this.Eo(w.initMessageHeaders,a,r),w.encodeInitMessageHeaders=!0;const E=l.join("");dn(ed,`Creating RPC '${e}' stream ${s}: ${E}`,w);const z=h.createWebChannel(E,w);let k=!1,U=!1;const q=new zle({ro:$=>{U?dn(ed,`Not sending because RPC '${e}' stream ${s} is closed:`,$):(k||(dn(ed,`Opening RPC '${e}' stream ${s} transport.`),z.open(),k=!0),dn(ed,`RPC '${e}' stream ${s} sending:`,$),z.send($))},oo:()=>z.close()}),H=($,Q,ne)=>{$.listen(Q,de=>{try{ne(de)}catch(ge){setTimeout(()=>{throw ge},0)}})};return H(z,HS.EventType.OPEN,()=>{U||dn(ed,`RPC '${e}' stream ${s} transport opened.`)}),H(z,HS.EventType.CLOSE,()=>{U||(U=!0,dn(ed,`RPC '${e}' stream ${s} transport closed`),q.wo())}),H(z,HS.EventType.ERROR,$=>{U||(U=!0,K_(ed,`RPC '${e}' stream ${s} transport errored:`,$),q.wo(new Zr(tr.UNAVAILABLE,"The operation could not be completed")))}),H(z,HS.EventType.MESSAGE,$=>{var Q;if(!U){const ne=$.data[0];Vo(!!ne);const de=ne,ge=de.error||((Q=de[0])===null||Q===void 0?void 0:Q.error);if(ge){dn(ed,`RPC '${e}' stream ${s} received error:`,ge);const fe=ge.status;let _e=function(Ae){const Te=au[Ae];if(Te!==void 0)return y$(Te)}(fe),me=ge.message;_e===void 0&&(_e=tr.INTERNAL,me="Unknown error status: "+fe+" with message "+ge.message),U=!0,q.wo(new Zr(_e,me)),z.close()}else dn(ed,`RPC '${e}' stream ${s} received:`,ne),q._o(ne)}}),H(n,Bse.STAT_EVENT,$=>{$.stat===M6.PROXY?dn(ed,`RPC '${e}' stream ${s} detected buffering proxy`):$.stat===M6.NOPROXY&&dn(ed,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{q.fo()},0),q}}function bE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){return new qoe(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,a,r=1e3,s=1.5,l=6e4){this.ii=e,this.timerId=a,this.Po=r,this.bo=s,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const a=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,a-r);s>0&&dn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${a} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,a,r,s,l,h,n,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=n,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new x$(e,a)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,a){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():a&&a.code===tr.RESOURCE_EXHAUSTED?(my(a.toString()),my("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):a&&a.code===tr.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(a)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),a=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===a&&this.Zo(r,s)},r=>{e(()=>{const s=new Zr(tr.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,a){const r=this.Xo(this.Fo);this.stream=this.eu(e,a),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return dn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return a=>{this.ii.enqueueAndForget(()=>this.Fo===e?a():(dn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dle extends P${constructor(e,a,r,s,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,r,s,h),this.serializer=l}eu(e,a){return this.connection.Ro("Listen",e,a)}onMessage(e){this.qo.reset();const a=Koe(this.serializer,e),r=function(s){if(!("targetChange"in s))return Si.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?Si.min():l.readTime?Rm(l.readTime):Si.min()}(e);return this.listener.nu(a,r)}su(e){const a={};a.database=$5(this.serializer),a.addTarget=function(s,l){let h;const n=l.target;if(h=k5(n)?{documents:Xoe(s,n)}:{query:Joe(s,n)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=_$(s,l.resumeToken);const w=Z5(s,l.expectedCount);w!==null&&(h.expectedCount=w)}else if(l.snapshotVersion.compareTo(Si.min())>0){h.readTime=lb(s,l.snapshotVersion.toTimestamp());const w=Z5(s,l.expectedCount);w!==null&&(h.expectedCount=w)}return h}(this.serializer,e);const r=ele(this.serializer,e);r&&(a.labels=r),this.Wo(a)}iu(e){const a={};a.database=$5(this.serializer),a.removeTarget=e,this.Wo(a)}}class Mle extends P${constructor(e,a,r,s,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,r,s,h),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,a){return this.connection.Ro("Write",e,a)}onMessage(e){if(Vo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const a=Yoe(e.writeResults,e.commitTime),r=Rm(e.commitTime);return this.listener.cu(r,a)}return Vo(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=$5(this.serializer),this.Wo(e)}uu(e){const a={streamToken:this.lastStreamToken,writes:e.map(r=>Woe(this.serializer,r))};this.Wo(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ile extends class{}{constructor(e,a,r,s){super(),this.authCredentials=e,this.appCheckCredentials=a,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Zr(tr.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,a,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Io(e,a,r,s,l)).catch(s=>{throw s.name==="FirebaseError"?(s.code===tr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Zr(tr.UNKNOWN,s.toString())})}vo(e,a,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.vo(e,a,r,l,h,s)).catch(l=>{throw l.name==="FirebaseError"?(l.code===tr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Zr(tr.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class Lle{constructor(e,a){this.asyncQueue=e,this.onlineStateHandler=a,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const a=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(my(a),this.mu=!1):dn("OnlineStateTracker",a)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fle{constructor(e,a,r,s,l){this.localStore=e,this.datastore=a,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(h=>{r.enqueueAndForget(async()=>{m0(this)&&(dn("RemoteStore","Restarting streams for network reachability change."),await async function(n){const w=fi(n);w.vu.add(4),await fT(w),w.bu.set("Unknown"),w.vu.delete(4),await Yx(w)}(this))})}),this.bu=new Lle(r,s)}}async function Yx(t){if(m0(t))for(const e of t.Ru)await e(!0)}async function fT(t){for(const e of t.Ru)await e(!1)}function E$(t,e){const a=fi(t);a.Au.has(e.targetId)||(a.Au.set(e.targetId,e),GI(a)?BI(a):Iv(a).Ko()&&kI(a,e))}function N$(t,e){const a=fi(t),r=Iv(a);a.Au.delete(e),r.Ko()&&V$(a,e),a.Au.size===0&&(r.Ko()?r.jo():m0(a)&&a.bu.set("Unknown"))}function kI(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Si.min())>0){const a=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(a)}Iv(t).su(e)}function V$(t,e){t.Vu.qt(e),Iv(t).iu(e)}function BI(t){t.Vu=new Boe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Iv(t).start(),t.bu.gu()}function GI(t){return m0(t)&&!Iv(t).Uo()&&t.Au.size>0}function m0(t){return fi(t).vu.size===0}function z$(t){t.Vu=void 0}async function Ule(t){t.Au.forEach((e,a)=>{kI(t,e)})}async function kle(t,e){z$(t),GI(t)?(t.bu.Iu(e),BI(t)):t.bu.set("Unknown")}async function Ble(t,e,a){if(t.bu.set("Online"),e instanceof A$&&e.state===2&&e.cause)try{await async function(r,s){const l=s.cause;for(const h of s.targetIds)r.Au.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Au.delete(h),r.Vu.removeTarget(h))}(t,e)}catch(r){dn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ub(t,r)}else if(e instanceof xC?t.Vu.Ht(e):e instanceof g$?t.Vu.ne(e):t.Vu.Xt(e),!a.isEqual(Si.min()))try{const r=await b$(t.localStore);a.compareTo(r)>=0&&await function(s,l){const h=s.Vu.ce(l);return h.targetChanges.forEach((n,w)=>{if(n.resumeToken.approximateByteSize()>0){const T=s.Au.get(w);T&&s.Au.set(w,T.withResumeToken(n.resumeToken,l))}}),h.targetMismatches.forEach((n,w)=>{const T=s.Au.get(n);if(!T)return;s.Au.set(n,T.withResumeToken(md.EMPTY_BYTE_STRING,T.snapshotVersion)),V$(s,n);const E=new Ag(T.target,n,w,T.sequenceNumber);kI(s,E)}),s.remoteSyncer.applyRemoteEvent(h)}(t,a)}catch(r){dn("RemoteStore","Failed to raise snapshot:",r),await ub(t,r)}}async function ub(t,e,a){if(!cT(e))throw e;t.vu.add(1),await fT(t),t.bu.set("Offline"),a||(a=()=>b$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{dn("RemoteStore","Retrying IndexedDB access"),await a(),t.vu.delete(1),await Yx(t)})}function O$(t,e){return e().catch(a=>ub(t,a,e))}async function Xx(t){const e=fi(t),a=Pg(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Gle(e);)try{const s=await ble(e.localStore,r);if(s===null){e.Eu.length===0&&a.jo();break}r=s.batchId,jle(e,s)}catch(s){await ub(e,s)}D$(e)&&M$(e)}function Gle(t){return m0(t)&&t.Eu.length<10}function jle(t,e){t.Eu.push(e);const a=Pg(t);a.Ko()&&a.ou&&a.uu(e.mutations)}function D$(t){return m0(t)&&!Pg(t).Uo()&&t.Eu.length>0}function M$(t){Pg(t).start()}async function Zle(t){Pg(t).hu()}async function qle(t){const e=Pg(t);for(const a of t.Eu)e.uu(a.mutations)}async function Hle(t,e,a){const r=t.Eu.shift(),s=OI.from(r,e,a);await O$(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xx(t)}async function $le(t,e){e&&Pg(t).ou&&await async function(a,r){if(s=r.code,Foe(s)&&s!==tr.ABORTED){const l=a.Eu.shift();Pg(a).Qo(),await O$(a,()=>a.remoteSyncer.rejectFailedWrite(l.batchId,r)),await Xx(a)}var s}(t,e),D$(t)&&M$(t)}async function oU(t,e){const a=fi(t);a.asyncQueue.verifyOperationInProgress(),dn("RemoteStore","RemoteStore received new credentials");const r=m0(a);a.vu.add(3),await fT(a),r&&a.bu.set("Unknown"),await a.remoteSyncer.handleCredentialChange(e),a.vu.delete(3),await Yx(a)}async function Kle(t,e){const a=fi(t);e?(a.vu.delete(2),await Yx(a)):e||(a.vu.add(2),await fT(a),a.bu.set("Unknown"))}function Iv(t){return t.Su||(t.Su=function(e,a,r){const s=fi(e);return s.fu(),new Dle(a,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:Ule.bind(null,t),ao:kle.bind(null,t),nu:Ble.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),GI(t)?BI(t):t.bu.set("Unknown")):(await t.Su.stop(),z$(t))})),t.Su}function Pg(t){return t.Du||(t.Du=function(e,a,r){const s=fi(e);return s.fu(),new Mle(a,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{uo:Zle.bind(null,t),ao:$le.bind(null,t),au:qle.bind(null,t),cu:Hle.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Xx(t)):(await t.Du.stop(),t.Eu.length>0&&(dn("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,a,r,s,l){this.asyncQueue=e,this.timerId=a,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new uy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,a,r,s,l){const h=Date.now()+r,n=new jI(e,a,h,s,l);return n.start(r),n}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Zr(tr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ZI(t,e){if(my("AsyncQueue",`${e}: ${t}`),cT(t))return new Zr(tr.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.comparator=e?(a,r)=>e(a,r)||Kn.comparator(a.key,r.key):(a,r)=>Kn.comparator(a.key,r.key),this.keyedMap=Tw(),this.sortedSet=new ou(this.comparator)}static emptySet(e){return new I_(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const a=this.keyedMap.get(e);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((a,r)=>(e(a),!1))}add(e){const a=this.delete(e.key);return a.copy(a.keyedMap.insert(e.key,e),a.sortedSet.insert(e,null))}delete(e){const a=this.get(e);return a?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(a)):this}isEqual(e){if(!(e instanceof I_)||this.size!==e.size)return!1;const a=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;a.hasNext();){const s=a.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(a=>{e.push(a.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,a){const r=new I_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=a,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(){this.Cu=new ou(Kn.comparator)}track(e){const a=e.doc.key,r=this.Cu.get(a);r?e.type!==0&&r.type===3?this.Cu=this.Cu.insert(a,e):e.type===3&&r.type!==1?this.Cu=this.Cu.insert(a,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Cu=this.Cu.insert(a,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Cu=this.Cu.remove(a):e.type===1&&r.type===2?this.Cu=this.Cu.insert(a,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Cu=this.Cu.insert(a,{type:2,doc:e.doc}):ei():this.Cu=this.Cu.insert(a,e)}xu(){const e=[];return this.Cu.inorderTraversal((a,r)=>{e.push(r)}),e}}class Q_{constructor(e,a,r,s,l,h,n,w,T){this.query=e,this.docs=a,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=n,this.excludesMetadataChanges=w,this.hasCachedResults=T}static fromInitialDocuments(e,a,r,s,l){const h=[];return a.forEach(n=>{h.push({type:0,doc:n})}),new Q_(e,a,I_.emptySet(a),h,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const a=this.docChanges,r=e.docChanges;if(a.length!==r.length)return!1;for(let s=0;s<a.length;s++)if(a[s].type!==r[s].type||!a[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wle{constructor(){this.Nu=void 0,this.listeners=[]}}class Yle{constructor(){this.queries=new Mv(e=>r$(e),jx),this.onlineState="Unknown",this.ku=new Set}}async function qI(t,e){const a=fi(t),r=e.query;let s=!1,l=a.queries.get(r);if(l||(s=!0,l=new Wle),s)try{l.Nu=await a.onListen(r)}catch(h){const n=ZI(h,`Initialization of query '${j5(e.query)}' failed`);return void e.onError(n)}a.queries.set(r,l),l.listeners.push(e),e.Mu(a.onlineState),l.Nu&&e.$u(l.Nu)&&$I(a)}async function HI(t,e){const a=fi(t),r=e.query;let s=!1;const l=a.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),s=l.listeners.length===0)}if(s)return a.queries.delete(r),a.onUnlisten(r)}function Xle(t,e){const a=fi(t);let r=!1;for(const s of e){const l=s.query,h=a.queries.get(l);if(h){for(const n of h.listeners)n.$u(s)&&(r=!0);h.Nu=s}}r&&$I(a)}function Jle(t,e,a){const r=fi(t),s=r.queries.get(e);if(s)for(const l of s.listeners)l.onError(a);r.queries.delete(e)}function $I(t){t.ku.forEach(e=>{e.next()})}class KI{constructor(e,a,r){this.query=e,this.Ou=a,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Q_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let a=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),a=!0),a}qu(e,a){if(!e.fromCache)return!0;const r=a!=="Offline";return(!this.options.Ku||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||a==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const a=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}Uu(e){e=Q_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(e){this.key=e}}class L${constructor(e){this.key=e}}class Qle{constructor(e,a){this.query=e,this.Yu=a,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Ui(),this.mutatedKeys=Ui(),this.tc=n$(e),this.ec=new I_(this.tc)}get nc(){return this.Yu}sc(e,a){const r=a?a.ic:new lU,s=a?a.ec:this.ec;let l=a?a.mutatedKeys:this.mutatedKeys,h=s,n=!1;const w=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,T=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((E,z)=>{const k=s.get(E),U=Zx(this.query,z)?z:null,q=!!k&&this.mutatedKeys.has(k.key),H=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let $=!1;k&&U?k.data.isEqual(U.data)?q!==H&&(r.track({type:3,doc:U}),$=!0):this.rc(k,U)||(r.track({type:2,doc:U}),$=!0,(w&&this.tc(U,w)>0||T&&this.tc(U,T)<0)&&(n=!0)):!k&&U?(r.track({type:0,doc:U}),$=!0):k&&!U&&(r.track({type:1,doc:k}),$=!0,(w||T)&&(n=!0)),$&&(U?(h=h.add(U),l=H?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),r.track({type:1,doc:E})}return{ec:h,ic:r,zi:n,mutatedKeys:l}}rc(e,a){return e.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(e,a,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((T,E)=>function(z,k){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ei()}};return U(z)-U(k)}(T.type,E.type)||this.tc(T.doc,E.doc)),this.oc(r);const h=a?this.uc():[],n=this.Zu.size===0&&this.current?1:0,w=n!==this.Xu;return this.Xu=n,l.length!==0||w?{snapshot:new Q_(this.query,e.ec,s,l,e.mutatedKeys,n===0,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:h}:{cc:h}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new lU,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(a=>this.Yu=this.Yu.add(a)),e.modifiedDocuments.forEach(a=>{}),e.removedDocuments.forEach(a=>this.Yu=this.Yu.delete(a)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Ui(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const a=[];return e.forEach(r=>{this.Zu.has(r)||a.push(new L$(r))}),this.Zu.forEach(r=>{e.has(r)||a.push(new I$(r))}),a}hc(e){this.Yu=e.ir,this.Zu=Ui();const a=this.sc(e.documents);return this.applyChanges(a,!0)}lc(){return Q_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class eue{constructor(e,a,r){this.query=e,this.targetId=a,this.view=r}}class tue{constructor(e){this.key=e,this.fc=!1}}class aue{constructor(e,a,r,s,l,h){this.localStore=e,this.remoteStore=a,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.dc={},this.wc=new Mv(n=>r$(n),jx),this._c=new Map,this.mc=new Set,this.gc=new ou(Kn.comparator),this.yc=new Map,this.Ic=new LI,this.Tc={},this.Ec=new Map,this.Ac=J_.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function rue(t,e){const a=fue(t);let r,s;const l=a.wc.get(e);if(l)r=l.targetId,a.sharedClientState.addLocalQueryTarget(r),s=l.view.lc();else{const h=await xle(a.localStore,yy(e)),n=a.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,s=await nue(a,e,r,n==="current",h.resumeToken),a.isPrimaryClient&&E$(a.remoteStore,h)}return s}async function nue(t,e,a,r,s){t.Rc=(z,k,U)=>async function(q,H,$,Q){let ne=H.view.sc($);ne.zi&&(ne=await nU(q.localStore,H.query,!1).then(({documents:fe})=>H.view.sc(fe,ne)));const de=Q&&Q.targetChanges.get(H.targetId),ge=H.view.applyChanges(ne,q.isPrimaryClient,de);return cU(q,H.targetId,ge.cc),ge.snapshot}(t,z,k,U);const l=await nU(t.localStore,e,!0),h=new Qle(e,l.ir),n=h.sc(l.documents),w=hT.createSynthesizedTargetChangeForCurrentChange(a,r&&t.onlineState!=="Offline",s),T=h.applyChanges(n,t.isPrimaryClient,w);cU(t,a,T.cc);const E=new eue(e,a,h);return t.wc.set(e,E),t._c.has(a)?t._c.get(a).push(e):t._c.set(a,[e]),T.snapshot}async function iue(t,e){const a=fi(t),r=a.wc.get(e),s=a._c.get(r.targetId);if(s.length>1)return a._c.set(r.targetId,s.filter(l=>!jx(l,e))),void a.wc.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(r.targetId),a.sharedClientState.isActiveQueryTarget(r.targetId)||await K5(a.localStore,r.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(r.targetId),N$(a.remoteStore,r.targetId),W5(a,r.targetId)}).catch(uT)):(W5(a,r.targetId),await K5(a.localStore,r.targetId,!0))}async function sue(t,e,a){const r=pue(t);try{const s=await function(l,h){const n=fi(l),w=Xd.now(),T=h.reduce((k,U)=>k.add(U.key),Ui());let E,z;return n.persistence.runTransaction("Locally write mutations","readwrite",k=>{let U=gy(),q=Ui();return n.Zi.getEntries(k,T).next(H=>{U=H,U.forEach(($,Q)=>{Q.isValidDocument()||(q=q.add($))})}).next(()=>n.localDocuments.getOverlayedDocuments(k,U)).next(H=>{E=H;const $=[];for(const Q of h){const ne=Ooe(Q,E.get(Q.key).overlayedDocument);ne!=null&&$.push(new Dg(Q.key,ne,WH(ne.value.mapValue),bh.exists(!0)))}return n.mutationQueue.addMutationBatch(k,w,$,h)}).next(H=>{z=H;const $=H.applyToLocalDocumentSet(E,q);return n.documentOverlayCache.saveOverlays(k,H.batchId,$)})}).then(()=>({batchId:z.batchId,changes:s$(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,n){let w=l.Tc[l.currentUser.toKey()];w||(w=new ou(gs)),w=w.insert(h,n),l.Tc[l.currentUser.toKey()]=w}(r,s.batchId,a),await pT(r,s.changes),await Xx(r.remoteStore)}catch(s){const l=ZI(s,"Failed to persist write");a.reject(l)}}async function F$(t,e){const a=fi(t);try{const r=await Sle(a.localStore,e);e.targetChanges.forEach((s,l)=>{const h=a.yc.get(l);h&&(Vo(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?h.fc=!0:s.modifiedDocuments.size>0?Vo(h.fc):s.removedDocuments.size>0&&(Vo(h.fc),h.fc=!1))}),await pT(a,r,e)}catch(r){await uT(r)}}function uU(t,e,a){const r=fi(t);if(r.isPrimaryClient&&a===0||!r.isPrimaryClient&&a===1){const s=[];r.wc.forEach((l,h)=>{const n=h.view.Mu(e);n.snapshot&&s.push(n.snapshot)}),function(l,h){const n=fi(l);n.onlineState=h;let w=!1;n.queries.forEach((T,E)=>{for(const z of E.listeners)z.Mu(h)&&(w=!0)}),w&&$I(n)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oue(t,e,a){const r=fi(t);r.sharedClientState.updateQueryState(e,"rejected",a);const s=r.yc.get(e),l=s&&s.key;if(l){let h=new ou(Kn.comparator);h=h.insert(l,od.newNoDocument(l,Si.min()));const n=Ui().add(l),w=new Kx(Si.min(),new Map,new ou(gs),h,n);await F$(r,w),r.gc=r.gc.remove(l),r.yc.delete(e),WI(r)}else await K5(r.localStore,e,!1).then(()=>W5(r,e,a)).catch(uT)}async function lue(t,e){const a=fi(t),r=e.batch.batchId;try{const s=await Tle(a.localStore,e);k$(a,r,null),U$(a,r),a.sharedClientState.updateMutationState(r,"acknowledged"),await pT(a,s)}catch(s){await uT(s)}}async function uue(t,e,a){const r=fi(t);try{const s=await function(l,h){const n=fi(l);return n.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let T;return n.mutationQueue.lookupMutationBatch(w,h).next(E=>(Vo(E!==null),T=E.keys(),n.mutationQueue.removeMutationBatch(w,E))).next(()=>n.mutationQueue.performConsistencyCheck(w)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(w,T,h)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,T)).next(()=>n.localDocuments.getDocuments(w,T))})}(r.localStore,e);k$(r,e,a),U$(r,e),r.sharedClientState.updateMutationState(e,"rejected",a),await pT(r,s)}catch(s){await uT(s)}}function U$(t,e){(t.Ec.get(e)||[]).forEach(a=>{a.resolve()}),t.Ec.delete(e)}function k$(t,e,a){const r=fi(t);let s=r.Tc[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(a?l.reject(a):l.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function W5(t,e,a=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t._c.get(e))t.wc.delete(r),a&&t.dc.Pc(r,a);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(r=>{t.Ic.containsKey(r)||B$(t,r)})}function B$(t,e){t.mc.delete(e.path.canonicalString());const a=t.gc.get(e);a!==null&&(N$(t.remoteStore,a),t.gc=t.gc.remove(e),t.yc.delete(a),WI(t))}function cU(t,e,a){for(const r of a)r instanceof I$?(t.Ic.addReference(r.key,e),cue(t,r)):r instanceof L$?(dn("SyncEngine","Document no longer in limbo: "+r.key),t.Ic.removeReference(r.key,e),t.Ic.containsKey(r.key)||B$(t,r.key)):ei()}function cue(t,e){const a=e.key,r=a.path.canonicalString();t.gc.get(a)||t.mc.has(r)||(dn("SyncEngine","New document in limbo: "+a),t.mc.add(r),WI(t))}function WI(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const a=new Kn(Ml.fromString(e)),r=t.Ac.next();t.yc.set(r,new tue(a)),t.gc=t.gc.insert(a,r),E$(t.remoteStore,new Ag(yy(Bx(a.path)),r,"TargetPurposeLimboResolution",bI.ct))}}async function pT(t,e,a){const r=fi(t),s=[],l=[],h=[];r.wc.isEmpty()||(r.wc.forEach((n,w)=>{h.push(r.Rc(w,e,a).then(T=>{if((T||a)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,T!=null&&T.fromCache?"not-current":"current"),T){s.push(T);const E=UI.Li(w.targetId,T);l.push(E)}}))}),await Promise.all(h),r.dc.nu(s),await async function(n,w){const T=fi(n);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>Dr.forEach(w,z=>Dr.forEach(z.Fi,k=>T.persistence.referenceDelegate.addReference(E,z.targetId,k)).next(()=>Dr.forEach(z.Bi,k=>T.persistence.referenceDelegate.removeReference(E,z.targetId,k)))))}catch(E){if(!cT(E))throw E;dn("LocalStore","Failed to update sequence numbers: "+E)}for(const E of w){const z=E.targetId;if(!E.fromCache){const k=T.Ji.get(z),U=k.snapshotVersion,q=k.withLastLimboFreeSnapshotVersion(U);T.Ji=T.Ji.insert(z,q)}}}(r.localStore,l))}async function due(t,e){const a=fi(t);if(!a.currentUser.isEqual(e)){dn("SyncEngine","User change. New user:",e.toKey());const r=await C$(a.localStore,e);a.currentUser=e,function(s,l){s.Ec.forEach(h=>{h.forEach(n=>{n.reject(new Zr(tr.CANCELLED,l))})}),s.Ec.clear()}(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pT(a,r.er)}}function hue(t,e){const a=fi(t),r=a.yc.get(e);if(r&&r.fc)return Ui().add(r.key);{let s=Ui();const l=a._c.get(e);if(!l)return s;for(const h of l){const n=a.wc.get(h);s=s.unionWith(n.view.nc)}return s}}function fue(t){const e=fi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=F$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oue.bind(null,e),e.dc.nu=Xle.bind(null,e.eventManager),e.dc.Pc=Jle.bind(null,e.eventManager),e}function pue(t){const e=fi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uue.bind(null,e),e}class dU{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Wx(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,a){return null}createIndexBackfillerScheduler(e,a){return null}createLocalStore(e){return Rle(this.persistence,new vle,e.initialUser,this.serializer)}createPersistence(e){return new Ale(FI.zs,this.serializer)}createSharedClientState(e){return new Ele}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class mue{async initialize(e,a){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=due.bind(null,this.syncEngine),await Kle(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Yle}createDatastore(e){const a=Wx(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new Ole(s));var s;return function(l,h,n,w){return new Ile(l,h,n,w)}(e.authCredentials,e.appCheckCredentials,r,a)}createRemoteStore(e){return a=this.localStore,r=this.datastore,s=e.asyncQueue,l=n=>uU(this.syncEngine,n,0),h=sU.D()?new sU:new Nle,new Fle(a,r,s,l,h);var a,r,s,l,h}createSyncEngine(e,a){return function(r,s,l,h,n,w,T){const E=new aue(r,s,l,h,n,w);return T&&(E.vc=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,a)}terminate(){return async function(e){const a=fi(e);dn("RemoteStore","RemoteStore shutting down."),a.vu.add(5),await fT(a),a.Pu.shutdown(),a.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):my("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,a){this.muted||setTimeout(()=>{this.muted||e(a)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yue{constructor(e,a,r,s){this.authCredentials=e,this.appCheckCredentials=a,this.asyncQueue=r,this.databaseInfo=s,this.user=sd.UNAUTHENTICATED,this.clientId=qH.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async l=>{dn("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(dn("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zr(tr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new uy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(a){const r=ZI(a,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xE(t,e){t.asyncQueue.verifyOperationInProgress(),dn("FirestoreClient","Initializing OfflineComponentProvider");const a=await t.getConfiguration();await e.initialize(a);let r=a.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await C$(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function hU(t,e){t.asyncQueue.verifyOperationInProgress();const a=await Aue(t);dn("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(a,r),t.setCredentialChangeListener(s=>oU(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,l)=>oU(e.remoteStore,l)),t._onlineComponents=e}function gue(t){return t.name==="FirebaseError"?t.code===tr.FAILED_PRECONDITION||t.code===tr.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Aue(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){dn("FirestoreClient","Using user provided OfflineComponentProvider");try{await xE(t,t._uninitializedComponentsProvider._offline)}catch(e){const a=e;if(!gue(a))throw a;K_("Error using user provided cache. Falling back to memory cache: "+a),await xE(t,new dU)}}else dn("FirestoreClient","Using default OfflineComponentProvider"),await xE(t,new dU);return t._offlineComponents}async function G$(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(dn("FirestoreClient","Using user provided OnlineComponentProvider"),await hU(t,t._uninitializedComponentsProvider._online)):(dn("FirestoreClient","Using default OnlineComponentProvider"),await hU(t,new mue))),t._onlineComponents}function _ue(t){return G$(t).then(e=>e.syncEngine)}async function cb(t){const e=await G$(t),a=e.eventManager;return a.onListen=rue.bind(null,e.syncEngine),a.onUnlisten=iue.bind(null,e.syncEngine),a}function vue(t,e,a={}){const r=new uy;return t.asyncQueue.enqueueAndForget(async()=>function(s,l,h,n,w){const T=new YI({next:z=>{l.enqueueAndForget(()=>HI(s,E));const k=z.docs.has(h);!k&&z.fromCache?w.reject(new Zr(tr.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&z.fromCache&&n&&n.source==="server"?w.reject(new Zr(tr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(z)},error:z=>w.reject(z)}),E=new KI(Bx(h.path),T,{includeMetadataChanges:!0,Ku:!0});return qI(s,E)}(await cb(t),t.asyncQueue,e,a,r)),r.promise}function wue(t,e,a={}){const r=new uy;return t.asyncQueue.enqueueAndForget(async()=>function(s,l,h,n,w){const T=new YI({next:z=>{l.enqueueAndForget(()=>HI(s,E)),z.fromCache&&n.source==="server"?w.reject(new Zr(tr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(z)},error:z=>w.reject(z)}),E=new KI(h,T,{includeMetadataChanges:!0,Ku:!0});return qI(s,E)}(await cb(t),t.asyncQueue,e,a,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(t,e,a){if(!a)throw new Zr(tr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Rue(t,e,a,r){if(e===!0&&r===!0)throw new Zr(tr.INVALID_ARGUMENT,`${t} and ${a} cannot be used together.`)}function pU(t){if(!Kn.isDocumentKey(t))throw new Zr(tr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mU(t){if(Kn.isDocumentKey(t))throw new Zr(tr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ei()}function nf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Zr(tr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=Jx(t);throw new Zr(tr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${a}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){var a,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Zr(tr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(a=e.ssl)===null||a===void 0||a;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Zr(tr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j$((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Zr(tr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Zr(tr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Zr(tr.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(a=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,a.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var a,r}}class Qx{constructor(e,a,r,s){this._authCredentials=e,this._appCheckCredentials=a,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zr(tr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Zr(tr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yU(e),e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new qse;switch(a.type){case"firstParty":return new Wse(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Zr(tr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const a=fU.get(e);a&&(dn("ComponentProvider","Removing Datastore"),fU.delete(e),a.terminate())}(this),Promise.resolve()}}function Tue(t,e,a,r={}){var s;const l=(t=nf(t,Qx))._getSettings(),h=`${e}:${a}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&K_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),r.mockUserToken){let n,w;if(typeof r.mockUserToken=="string")n=r.mockUserToken,w=sd.MOCK_USER;else{n=pae(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new Zr(tr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new sd(T)}t._authCredentials=new Hse(new ZH(n,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,a,r){this.converter=a,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jd(this.firestore,e,this._key)}}class Mg{constructor(e,a,r){this.converter=a,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mg(this.firestore,e,this._query)}}class Cg extends Mg{constructor(e,a,r){super(e,a,Bx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jd(this.firestore,null,new Kn(e))}withConverter(e){return new Cg(this.firestore,e,this._path)}}function Wn(t,e,...a){if(t=Iu(t),Z$("collection","path",e),t instanceof Qx){const r=Ml.fromString(e,...a);return mU(r),new Cg(t,null,r)}{if(!(t instanceof Jd||t instanceof Cg))throw new Zr(tr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ml.fromString(e,...a));return mU(r),new Cg(t.firestore,null,r)}}function io(t,e,...a){if(t=Iu(t),arguments.length===1&&(e=qH.A()),Z$("doc","path",e),t instanceof Qx){const r=Ml.fromString(e,...a);return pU(r),new Jd(t,null,new Kn(r))}{if(!(t instanceof Jd||t instanceof Cg))throw new Zr(tr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ml.fromString(e,...a));return pU(r),new Jd(t.firestore,t instanceof Cg?t.converter:null,new Kn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new x$(this,"async_queue_retry"),this.Xc=()=>{const a=bE();a&&dn("AsyncQueue","Visibility state changed to "+a.visibilityState),this.qo.Mo()};const e=bE();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const a=bE();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const a=new uy;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(a.resolve,a.reject),a.promise)).then(()=>a.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!cT(e))throw e;dn("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const a=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{this.Wc=r,this.Hc=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(r);throw my("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Hc=!1,r))));return this.Gc=a,a}enqueueAfterDelay(e,a,r){this.Zc(),this.Yc.indexOf(e)>-1&&(a=0);const s=jI.createAndSchedule(this,e,a,r,l=>this.na(l));return this.zc.push(s),s}Zc(){this.Wc&&ei()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const a of this.zc)if(a.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((a,r)=>a.targetTimeMs-r.targetTimeMs);for(const a of this.zc)if(a.skipDelay(),e!=="all"&&a.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const a=this.zc.indexOf(e);this.zc.splice(a,1)}}function gU(t){return function(e,a){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of a)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ay extends Qx{constructor(e,a,r,s){super(e,a,r,s),this.type="firestore",this._queue=new Sue,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||q$(this),this._firestoreClient.terminate()}}function Cue(t,e){const a=typeof t=="object"?t:oq(),r=typeof t=="string"?t:"(default)",s=KM(a,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=hae("firestore");l&&Tue(s,...l)}return s}function mT(t){return t._firestoreClient||q$(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function q$(t){var e,a,r;const s=t._freezeSettings(),l=function(h,n,w,T){return new ooe(h,n,w,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,j$(T.experimentalLongPollingOptions),T.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new yue(t._authCredentials,t._appCheckCredentials,t._queue,l),!((a=s.cache)===null||a===void 0)&&a._offlineComponentProvider&&(!((r=s.cache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ev(md.fromBase64String(e))}catch(a){throw new Zr(tr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(e){return new ev(md.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(...e){for(let a=0;a<e.length;++a)if(e[a].length===0)throw new Zr(tr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bm(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,a){if(!isFinite(e)||e<-90||e>90)throw new Zr(tr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(a)||a<-180||a>180)throw new Zr(tr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=e,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return gs(this._lat,e._lat)||gs(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bue=/^__.*__$/;class xue{constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return this.fieldMask!==null?new Dg(e,this.data,this.fieldMask,a,this.fieldTransforms):new dT(e,this.data,a,this.fieldTransforms)}}class H${constructor(e,a,r){this.data=e,this.fieldMask=a,this.fieldTransforms=r}toMutation(e,a){return new Dg(e,this.data,this.fieldMask,a,this.fieldTransforms)}}function $$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ei()}}class QI{constructor(e,a,r,s,l,h){this.settings=e,this.databaseId=a,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new QI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var a;const r=(a=this.path)===null||a===void 0?void 0:a.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return db(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(a=>e.isPrefixOf(a))!==void 0||this.fieldTransforms.find(a=>e.isPrefixOf(a.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if($$(this.ca)&&bue.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Pue{constructor(e,a,r){this.databaseId=e,this.ignoreUndefinedProperties=a,this.serializer=r||Wx(e)}ya(e,a,r,s=!1){return new QI({ca:e,methodName:a,ga:r,path:bm.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e2(t){const e=t._freezeSettings(),a=Wx(t._databaseId);return new Pue(t._databaseId,!!e.ignoreUndefinedProperties,a)}function K$(t,e,a,r,s,l={}){const h=t.ya(l.merge||l.mergeFields?2:0,e,a,s);e3("Data must be an object, but it was:",h,r);const n=X$(r,h);let w,T;if(l.merge)w=new af(h.fieldMask),T=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const z of l.mergeFields){const k=Y5(e,z,a);if(!h.contains(k))throw new Zr(tr.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);Q$(E,k)||E.push(k)}w=new af(E),T=h.fieldTransforms.filter(z=>w.covers(z.field))}else w=null,T=h.fieldTransforms;return new xue(new Sh(n),w,T)}class t2 extends XI{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t2}}function W$(t,e,a,r){const s=t.ya(1,e,a);e3("Data must be an object, but it was:",s,r);const l=[],h=Sh.empty();p0(r,(w,T)=>{const E=t3(e,w,a);T=Iu(T);const z=s.da(E);if(T instanceof t2)l.push(E);else{const k=gT(T,z);k!=null&&(l.push(E),h.set(E,k))}});const n=new af(l);return new H$(h,n,s.fieldTransforms)}function Y$(t,e,a,r,s,l){const h=t.ya(1,e,a),n=[Y5(e,r,a)],w=[s];if(l.length%2!=0)throw new Zr(tr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)n.push(Y5(e,l[k])),w.push(l[k+1]);const T=[],E=Sh.empty();for(let k=n.length-1;k>=0;--k)if(!Q$(T,n[k])){const U=n[k];let q=w[k];q=Iu(q);const H=h.da(U);if(q instanceof t2)T.push(U);else{const $=gT(q,H);$!=null&&(T.push(U),E.set(U,$))}}const z=new af(T);return new H$(E,z,h.fieldTransforms)}function Eue(t,e,a,r=!1){return gT(a,t.ya(r?4:3,e))}function gT(t,e){if(J$(t=Iu(t)))return e3("Unsupported field value:",e,t),X$(t,e);if(t instanceof XI)return function(a,r){if(!$$(r.ca))throw r._a(`${a._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${a._methodName}() is not currently supported inside arrays`);const s=a._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(a,r){const s=[];let l=0;for(const h of a){let n=gT(h,r.wa(l));n==null&&(n={nullValue:"NULL_VALUE"}),s.push(n),l++}return{arrayValue:{values:s}}}(t,e)}return function(a,r){if((a=Iu(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return xoe(r.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const s=Xd.fromDate(a);return{timestampValue:lb(r.serializer,s)}}if(a instanceof Xd){const s=new Xd(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:lb(r.serializer,s)}}if(a instanceof JI)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ev)return{bytesValue:_$(r.serializer,a._byteString)};if(a instanceof Jd){const s=r.databaseId,l=a.firestore._databaseId;if(!l.isEqual(s))throw r._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:II(a.firestore._databaseId||r.databaseId,a._key.path)}}throw r._a(`Unsupported field value: ${Jx(a)}`)}(t,e)}function X$(t,e){const a={};return $H(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):p0(t,(r,s)=>{const l=gT(s,e.ha(r));l!=null&&(a[r]=l)}),{mapValue:{fields:a}}}function J$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xd||t instanceof JI||t instanceof ev||t instanceof Jd||t instanceof XI)}function e3(t,e,a){if(!J$(a)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(a)){const r=Jx(a);throw r==="an object"?e._a(t+" a custom object"):e._a(t+" "+r)}}function Y5(t,e,a){if((e=Iu(e))instanceof yT)return e._internalPath;if(typeof e=="string")return t3(t,e);throw db("Field path arguments must be of type string or ",t,!1,void 0,a)}const Nue=new RegExp("[~\\*/\\[\\]]");function t3(t,e,a){if(e.search(Nue)>=0)throw db(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,a);try{return new yT(...e.split("."))._internalPath}catch{throw db(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,a)}}function db(t,e,a,r,s){const l=r&&!r.isEmpty(),h=s!==void 0;let n=`Function ${e}() called with invalid data`;a&&(n+=" (via `toFirestore()`)"),n+=". ";let w="";return(l||h)&&(w+=" (found",l&&(w+=` in field ${r}`),h&&(w+=` in document ${s}`),w+=")"),new Zr(tr.INVALID_ARGUMENT,n+t+w)}function Q$(t,e){return t.some(a=>a.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e,a,r,s,l){this._firestore=e,this._userDataWriter=a,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jd(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const a=this._document.data.field(a2("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a)}}}class Vue extends eK{data(){return super.data()}}function a2(t,e){return typeof e=="string"?t3(t,e):e instanceof yT?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Zr(tr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a3{}class aK extends a3{}function T_(t,e,...a){let r=[];e instanceof a3&&r.push(e),r=r.concat(a),function(s){const l=s.filter(n=>n instanceof r3).length,h=s.filter(n=>n instanceof r2).length;if(l>1||l>0&&h>0)throw new Zr(tr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class r2 extends aK{constructor(e,a,r){super(),this._field=e,this._op=a,this._value=r,this.type="where"}static _create(e,a,r){return new r2(e,a,r)}_apply(e){const a=this._parse(e);return nK(e._query,a),new Mg(e.firestore,e.converter,B5(e._query,a))}_parse(e){const a=e2(e.firestore);return function(s,l,h,n,w,T,E){let z;if(w.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new Zr(tr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){_U(E,T);const k=[];for(const U of E)k.push(AU(n,s,U));z={arrayValue:{values:k}}}else z=AU(n,s,E)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||_U(E,T),z=Eue(h,l,E,T==="in"||T==="not-in");return iu.create(w,T,z)}(e._query,"where",a,e.firestore._databaseId,this._field,this._op,this._value)}}function XS(t,e,a){const r=e,s=a2("where",t);return r2._create(s,r,a)}class r3 extends a3{constructor(e,a){super(),this.type=e,this._queryConstraints=a}static _create(e,a){return new r3(e,a)}_parse(e){const a=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return a.length===1?a[0]:Np.create(a,this._getOperator())}_apply(e){const a=this._parse(e);return a.getFilters().length===0?e:(function(r,s){let l=r;const h=s.getFlattenedFilters();for(const n of h)nK(l,n),l=B5(l,n)}(e._query,a),new Mg(e.firestore,e.converter,B5(e._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class n3 extends aK{constructor(e,a){super(),this._field=e,this._direction=a,this.type="orderBy"}static _create(e,a){return new n3(e,a)}_apply(e){const a=function(r,s,l){if(r.startAt!==null)throw new Zr(tr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Zr(tr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new D_(s,l);return function(n,w){if(zI(n)===null){const T=Gx(n);T!==null&&iK(n,T,w.field)}}(r,h),h}(e._query,this._field,this._direction);return new Mg(e.firestore,e.converter,function(r,s){const l=r.explicitOrderBy.concat([s]);return new Dv(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,a))}}function rK(t,e="asc"){const a=e,r=a2("orderBy",t);return n3._create(r,a)}function AU(t,e,a){if(typeof(a=Iu(a))=="string"){if(a==="")throw new Zr(tr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a$(e)&&a.indexOf("/")!==-1)throw new Zr(tr.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const r=e.path.child(Ml.fromString(a));if(!Kn.isDocumentKey(r))throw new Zr(tr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return B6(t,new Kn(r))}if(a instanceof Jd)return B6(t,a._key);throw new Zr(tr.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jx(a)}.`)}function _U(t,e){if(!Array.isArray(t)||t.length===0)throw new Zr(tr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nK(t,e){if(e.isInequality()){const r=Gx(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new Zr(tr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const l=zI(t);l!==null&&iK(t,s,l)}const a=function(r,s){for(const l of r)for(const h of l.getFlattenedFilters())if(s.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(a!==null)throw a===e.op?new Zr(tr.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Zr(tr.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${a.toString()}' filters.`)}function iK(t,e,a){if(!a.isEqual(e))throw new Zr(tr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${a.toString()}' instead.`)}class zue{convertValue(e,a="none"){switch(n0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,a);case 5:return e.stringValue;case 6:return this.convertBytes(r0(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,a);case 10:return this.convertObject(e.mapValue,a);default:throw ei()}}convertObject(e,a){return this.convertObjectMap(e.fields,a)}convertObjectMap(e,a="none"){const r={};return p0(e,(s,l)=>{r[s]=this.convertValue(l,a)}),r}convertGeoPoint(e){return new JI(nu(e.latitude),nu(e.longitude))}convertArray(e,a){return(e.values||[]).map(r=>this.convertValue(r,a))}convertServerTimestamp(e,a){switch(a){case"previous":const r=PI(e);return r==null?null:this.convertValue(r,a);case"estimate":return this.convertTimestamp(aR(e));default:return null}}convertTimestamp(e){const a=xg(e);return new Xd(a.seconds,a.nanos)}convertDocumentKey(e,a){const r=Ml.fromString(e);Vo(S$(r));const s=new rR(r.get(1),r.get(3)),l=new Kn(r.popFirst(5));return s.isEqual(a)||my(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(t,e,a){let r;return r=t?a&&(a.merge||a.mergeFields)?t.toFirestore(e,a):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,a){this.hasPendingWrites=e,this.fromCache=a}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oK extends eK{constructor(e,a,r,s,l,h){super(e,a,r,s,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const a=new PC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,a={}){if(this._document){const r=this._document.data.field(a2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,a.serverTimestamps)}}}class PC extends oK{data(e={}){return super.data(e)}}class lK{constructor(e,a,r,s){this._firestore=e,this._userDataWriter=a,this._snapshot=s,this.metadata=new Cw(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(a=>e.push(a)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,a){this._snapshot.docs.forEach(r=>{e.call(a,new PC(this._firestore,this._userDataWriter,r.key,r,new Cw(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const a=!!e.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new Zr(tr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>{const n=new PC(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Cw(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:n,oldIndex:-1,newIndex:l++}})}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>s||h.type!==3).map(h=>{const n=new PC(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Cw(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,T=-1;return h.type!==0&&(w=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),T=l.indexOf(h.doc.key)),{type:Oue(h.type),doc:n,oldIndex:w,newIndex:T}})}}(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function Oue(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ei()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){t=nf(t,Jd);const e=nf(t.firestore,Ay);return vue(mT(e),t._key).then(a=>uK(e,t,a))}class i3 extends zue{constructor(e){super(),this.firestore=e}convertBytes(e){return new ev(e)}convertReference(e){const a=this.convertDocumentKey(e,this.firestore._databaseId);return new Jd(this.firestore,null,a)}}function Yi(t){t=nf(t,Mg);const e=nf(t.firestore,Ay),a=mT(e),r=new i3(e);return tK(t._query),wue(a,t._query).then(s=>new lK(e,r,t,s))}function Hd(t,e,a,...r){t=nf(t,Jd);const s=nf(t.firestore,Ay),l=e2(s);let h;return h=typeof(e=Iu(e))=="string"||e instanceof yT?Y$(l,"updateDoc",t._key,e,a,r):W$(l,"updateDoc",t._key,e),n2(s,[h.toMutation(t._key,bh.exists(!0))])}function s3(t){return n2(nf(t.firestore,Ay),[new $x(t._key,bh.none())])}function oR(t,e){const a=nf(t.firestore,Ay),r=io(t),s=sK(t.converter,e);return n2(a,[K$(e2(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,bh.exists(!1))]).then(()=>r)}function Qm(t,...e){var a,r,s;t=Iu(t);let l={includeMetadataChanges:!1},h=0;typeof e[h]!="object"||gU(e[h])||(l=e[h],h++);const n={includeMetadataChanges:l.includeMetadataChanges};if(gU(e[h])){const z=e[h];e[h]=(a=z.next)===null||a===void 0?void 0:a.bind(z),e[h+1]=(r=z.error)===null||r===void 0?void 0:r.bind(z),e[h+2]=(s=z.complete)===null||s===void 0?void 0:s.bind(z)}let w,T,E;if(t instanceof Jd)T=nf(t.firestore,Ay),E=Bx(t._key.path),w={next:z=>{e[h]&&e[h](uK(T,t,z))},error:e[h+1],complete:e[h+2]};else{const z=nf(t,Mg);T=nf(z.firestore,Ay),E=z._query;const k=new i3(T);w={next:U=>{e[h]&&e[h](new lK(T,k,z,U))},error:e[h+1],complete:e[h+2]},tK(t._query)}return function(z,k,U,q){const H=new YI(q),$=new KI(k,H,U);return z.asyncQueue.enqueueAndForget(async()=>qI(await cb(z),$)),()=>{H.Dc(),z.asyncQueue.enqueueAndForget(async()=>HI(await cb(z),$))}}(mT(T),E,n,w)}function n2(t,e){return function(a,r){const s=new uy;return a.asyncQueue.enqueueAndForget(async()=>sue(await _ue(a),r,s)),s.promise}(mT(t),e)}function uK(t,e,a){const r=a.docs.get(e._key),s=new i3(t);return new oK(t,s,e._key,r,new Cw(a.hasPendingWrites,a.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Due{constructor(e,a){this._firestore=e,this._commitHandler=a,this._mutations=[],this._committed=!1,this._dataReader=e2(e)}set(e,a,r){this._verifyNotCommitted();const s=PE(e,this._firestore),l=sK(s.converter,a,r),h=K$(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,r);return this._mutations.push(h.toMutation(s._key,bh.none())),this}update(e,a,r,...s){this._verifyNotCommitted();const l=PE(e,this._firestore);let h;return h=typeof(a=Iu(a))=="string"||a instanceof yT?Y$(this._dataReader,"WriteBatch.update",l._key,a,r,s):W$(this._dataReader,"WriteBatch.update",l._key,a),this._mutations.push(h.toMutation(l._key,bh.exists(!0))),this}delete(e){this._verifyNotCommitted();const a=PE(e,this._firestore);return this._mutations=this._mutations.concat(new $x(a._key,bh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zr(tr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function PE(t,e){if((t=Iu(t)).firestore!==e)throw new Zr(tr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mue(t){return mT(t=nf(t,Ay)),new Due(t,e=>n2(t,e))}(function(t,e=!0){(function(a){Ov=a})(Pv),q_(new QA("firestore",(a,{instanceIdentifier:r,options:s})=>{const l=a.getProvider("app").getImmediate(),h=new Ay(new $se(a.getProvider("auth-internal")),new Xse(a.getProvider("app-check-internal")),function(n,w){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Zr(tr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rR(n.options.projectId,w)}(l,r),l);return s=Object.assign({useFetchStreams:e},s),h._setSettings(s),h},"PUBLIC").setMultipleInstances(!0)),Sg(I6,"3.13.0",t),Sg(I6,"3.13.0","esm2017")})();const Iue={apiKey:"AIzaSyAqEefB5cZ1jVzeqdhxfRYHUzOqgyUqieo",authDomain:"ecp-caps.firebaseapp.com",projectId:"ecp-caps",storageBucket:"ecp-caps.firebasestorage.app",messagingSenderId:"1040391525167",appId:"1:1040391525167:web:c4b9bff139a86daacf47da"},cK=sq(Iue),Lv=Fie(cK),kr=Cue(cK);var dK={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},vU=It.createContext&&It.createContext(dK),Lue=["attr","size","title"];function Fue(t,e){if(t==null)return{};var a=Uue(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Uue(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function hb(){return hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},hb.apply(this,arguments)}function wU(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function fb(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(a),!0).forEach(function(r){kue(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wU(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function kue(t,e,a){return e=Bue(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Bue(t){var e=Gue(t,"string");return typeof e=="symbol"?e:e+""}function Gue(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hK(t){return t&&t.map((e,a)=>It.createElement(e.tag,fb({key:a},e.attr),hK(e.child)))}function lu(t){return e=>It.createElement(jue,hb({attr:fb({},t.attr)},e),hK(t.child))}function jue(t){var e=a=>{var{attr:r,size:s,title:l}=t,h=Fue(t,Lue),n=s||a.size||"1em",w;return a.className&&(w=a.className),t.className&&(w=(w?w+" ":"")+t.className),It.createElement("svg",hb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,r,h,{className:w,style:fb(fb({color:t.color||a.color},a.style),t.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),l&&It.createElement("title",null,l),t.children)};return vU!==void 0?It.createElement(vU.Consumer,null,a=>e(a)):e(dK)}function Zue(t){return lu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function RU(t){return lu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function que(t){return lu({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function Hue(t){return lu({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function $ue(t){return lu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function L_(t){return lu({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function Kue(t){return lu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function o3(t){return lu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function fK(t){return lu({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function pK(t){return lu({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(t)}function TU(t){return lu({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}const Ig=()=>{const[t,e]=rt.useState("Loading..."),[a,r]=rt.useState([]),[s,l]=rt.useState(!1),[h,n]=rt.useState(0),w="https://ecorideupload.s3.ap-southeast-2.amazonaws.com/uploads/profile/1742829316204_image.png";rt.useEffect(()=>{const U=Wn(kr,"notifications"),q=T_(U,rK("timestamp","desc")),H=Qm(q,$=>{const Q=[];$.forEach(ne=>{Q.push({id:ne.id,...ne.data()})}),r(Q),n(Q.filter(ne=>!ne.read).length)});return()=>H()},[]),rt.useEffect(()=>{const U=Lv.onAuthStateChanged(async q=>{if(q)try{const H=io(kr,"users",q.uid),$=await ny(H);$.exists()?e($.data().name):e("Super Admin")}catch(H){console.error("Error fetching user data:",H)}else e("Unknown User")});return()=>U()},[]);const T=()=>{l(!s)},E=async()=>{try{const U=Mue(kr);a.filter(q=>!q.read).forEach(q=>{const H=io(kr,"notifications",q.id);U.update(H,{read:!0})}),await U.commit(),r(a.map(q=>({...q,read:!0}))),n(0)}catch(U){console.error("Error marking notifications as read:",U)}},z=U=>{if(!U)return"";const q=U.toDate();return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(q)},k=U=>{switch(U.type){case"status_update":return X.jsxs("div",{className:"notification-message",children:[X.jsx("p",{children:U.message}),X.jsx("span",{className:`status-badge ${U.status.toLowerCase().replace(" ","-")}`,children:U.status})]});case"battery_update":return X.jsxs("div",{className:"notification-message",children:[X.jsx("p",{children:U.message}),X.jsx("div",{className:"battery-indicator",children:X.jsx("span",{className:"battery-level",style:{width:`${U.batteryLevel}%`}})})]});default:return X.jsx("p",{children:U.message})}};return X.jsx("div",{className:"header",children:X.jsxs("div",{className:"user-profile",children:[X.jsxs("div",{className:"profile",children:[X.jsx("img",{src:w,alt:"Profile",className:"profile-img"}),X.jsxs("div",{className:"profile-name",children:[X.jsx("p",{children:t}),X.jsx("small",{children:"Super Admin"})]})]}),X.jsxs("div",{className:"notification-container",children:[X.jsx(Zue,{className:"icon",onClick:T}),h>0&&X.jsx("span",{className:"notification-badge",children:h}),s&&X.jsxs("div",{className:"notifications-modal",children:[X.jsxs("div",{className:"notifications-header",children:[X.jsx("h3",{children:"Notifications"}),X.jsx("button",{className:"mark-all-read",onClick:E,disabled:h===0,children:"Mark all as read"})]}),X.jsx("div",{className:"notifications-list",children:a.length>0?a.map(U=>X.jsx("div",{className:`notification-item ${U.read?"":"unread"}`,children:X.jsxs("div",{className:"notification-content",children:[k(U),X.jsx("span",{className:"notification-time",children:z(U.timestamp)})]})},U.id)):X.jsx("p",{className:"no-notifications",children:"No notifications"})})]})]})]})})};function Wue(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 2H6c-1.206 0-3 .799-3 3v14c0 2.201 1.794 3 3 3h15v-2H6.012C5.55 19.988 5 19.806 5 19s.55-.988 1.012-1H21V4c0-1.103-.897-2-2-2zm0 14H5V5c0-.806.55-.988 1-1h13v12z"},child:[]}]})(t)}function Yue(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 15.414V20h2v-4.586c0-.526-.214-1.042-.586-1.414l-2-2L13 9.414l2 2c.372.372.888.586 1.414.586H20v-2h-3.586l-3.707-3.707a.999.999 0 0 0-1.414 0L8 9.586c-.378.378-.586.88-.586 1.414s.208 1.036.586 1.414l3 3z"},child:[]},{tag:"circle",attr:{cx:"16",cy:"5",r:"2"},child:[]},{tag:"path",attr:{d:"M18 14c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zM6 22c2.206 0 4-1.794 4-4s-1.794-4-4-4-4 1.794-4 4 1.794 4 4 4zm0-6c1.103 0 2 .897 2 2s-.897 2-2 2-2-.897-2-2 .897-2 2-2z"},child:[]}]})(t)}function Xue(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 13h1v7c0 1.103.897 2 2 2h12c1.103 0 2-.897 2-2v-7h1a1 1 0 0 0 .707-1.707l-9-9a.999.999 0 0 0-1.414 0l-9 9A1 1 0 0 0 3 13zm7 7v-5h4v5h-4zm2-15.586 6 6V15l.001 5H16v-5c0-1.103-.897-2-2-2h-4c-1.103 0-2 .897-2 2v5H6v-9.586l6-6z"},child:[]}]})(t)}function Jue(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 13v-2H7V8l-5 4 5 4v-3z"},child:[]},{tag:"path",attr:{d:"M20 3h-9c-1.103 0-2 .897-2 2v4h2V5h9v14h-9v-4H9v4c0 1.103.897 2 2 2h9c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2z"},child:[]}]})(t)}function Que(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 12a2 2 0 0 0-.703.133l-2.398-1.963c.059-.214.101-.436.101-.67C17 8.114 15.886 7 14.5 7S12 8.114 12 9.5c0 .396.1.765.262 1.097l-2.909 3.438A2.06 2.06 0 0 0 9 14c-.179 0-.348.03-.512.074l-2.563-2.563C5.97 11.348 6 11.179 6 11c0-1.108-.892-2-2-2s-2 .892-2 2 .892 2 2 2c.179 0 .348-.03.512-.074l2.563 2.563A1.906 1.906 0 0 0 7 16c0 1.108.892 2 2 2s2-.892 2-2c0-.237-.048-.46-.123-.671l2.913-3.442c.227.066.462.113.71.113a2.48 2.48 0 0 0 1.133-.281l2.399 1.963A2.077 2.077 0 0 0 18 14c0 1.108.892 2 2 2s2-.892 2-2-.892-2-2-2z"},child:[]}]})(t)}function ece(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M4 21h15.893c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zm0-2v-5h4v5H4zM14 7v5h-4V7h4zM8 7v5H4V7h4zm2 12v-5h4v5h-4zm6 0v-5h3.894v5H16zm3.893-7H16V7h3.893v5z"},child:[]}]})(t)}function tce(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 22h14c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2h-2a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1H5c-1.103 0-2 .897-2 2v15c0 1.103.897 2 2 2zM5 5h2v2h10V5h2v15H5V5z"},child:[]},{tag:"path",attr:{d:"m11 13.586-1.793-1.793-1.414 1.414L11 16.414l5.207-5.207-1.414-1.414z"},child:[]}]})(t)}function ace(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.29 8.29 16 12.58l-1.3-1.29-1.41 1.42 2.7 2.7 5.72-5.7zM4 8a3.91 3.91 0 0 0 4 4 3.91 3.91 0 0 0 4-4 3.91 3.91 0 0 0-4-4 3.91 3.91 0 0 0-4 4zm6 0a1.91 1.91 0 0 1-2 2 1.91 1.91 0 0 1-2-2 1.91 1.91 0 0 1 2-2 1.91 1.91 0 0 1 2 2zM4 18a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1h2v-1a5 5 0 0 0-5-5H7a5 5 0 0 0-5 5v1h2z"},child:[]}]})(t)}function rce(t){return lu({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m20 8-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zM9 19H7v-9h2v9zm4 0h-2v-6h2v6zm4 0h-2v-3h2v3zM14 9h-1V4l5 5h-4z"},child:[]}]})(t)}const mK=()=>{const t=kM(),e=Vg(),a=async()=>{try{await Lv.signOut(),t("/login")}catch(s){console.error("Error signing out: ",s.message)}},r=s=>e.pathname===s;return X.jsxs("div",{className:"sidebar",children:[X.jsx("div",{className:"logo",children:X.jsx("img",{src:"/ecpcaps/assets/ecoridelogo2.png",alt:"EcoRide Logo",style:{width:"100%",maxWidth:"100px",height:"auto"}})}),X.jsxs("div",{className:"menu-list",children:[X.jsxs("div",{className:`menu-item ${r("/dashboard")?"active":""}`,onClick:()=>t("/dashboard"),children:[X.jsx(Xue,{}),X.jsx("span",{children:"Dashboard"})]}),X.jsxs("div",{className:`menu-item ${r("/stations")?"active":""}`,onClick:()=>t("/stations"),children:[X.jsx(Wue,{}),X.jsx("span",{children:"Manage Stations"})]}),X.jsxs("div",{className:`menu-item ${r("/user-management")?"active":""}`,onClick:()=>t("/user-management"),children:[X.jsx(ace,{}),X.jsx("span",{children:"Manage User"})]}),X.jsxs("div",{className:`menu-item ${r("/admin-management")?"active":""}`,onClick:()=>t("/admin-management"),children:[X.jsx(rce,{}),X.jsx("span",{children:"Manage & Create Admin"})]}),X.jsxs("div",{className:`menu-item ${r("/bike-management")?"active":""}`,onClick:()=>t("/bike-management"),children:[X.jsx(Yue,{}),X.jsx("span",{children:"Manage Bikes"})]}),X.jsxs("div",{className:`menu-item ${r("/rate-management")?"active":""}`,onClick:()=>t("/rate-management"),children:[X.jsx(tce,{}),X.jsx("span",{children:"Rate Management"})]}),X.jsxs("div",{className:`menu-item ${r("/system-analytics")?"active":""}`,onClick:()=>t("/system-analytics"),children:[X.jsx(Que,{}),X.jsx("span",{children:"System Analytics"})]}),X.jsxs("div",{className:`menu-item ${r("/ride-details")?"active":""}`,onClick:()=>t("/ride-details"),children:[X.jsx(ece,{}),X.jsx("span",{children:"Ride Details"})]}),X.jsxs("div",{className:"menu-item logout",onClick:a,children:[X.jsx(Jue,{}),X.jsx("span",{children:"Logout"})]})]})]})};var EC={exports:{}},nce=EC.exports,SU;function ice(){return SU||(SU=1,function(t,e){(function(a,r){t.exports=r()})(nce,function(){var a,r,s;function l(n,w){if(!a)a=w;else if(!r)r=w;else{var T="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",E={};a(E),s=w(E),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"})))}}l(["exports"],function(n){function w(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var T,E={},z={};function k(){if(T)return z;T=1,Object.defineProperty(z,"__esModule",{value:!0}),z.setMatrixArrayType=function(y){z.ARRAY_TYPE=i=y},z.toRadian=function(y){return y*f},z.equals=function(y,m){return Math.abs(y-m)<=d*Math.max(1,Math.abs(y),Math.abs(m))},z.RANDOM=z.ARRAY_TYPE=z.EPSILON=void 0;var d=1e-6;z.EPSILON=d;var i=typeof Float32Array<"u"?Float32Array:Array;z.ARRAY_TYPE=i;var u=Math.random;z.RANDOM=u;var f=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var y=0,m=arguments.length;m--;)y+=arguments[m]*arguments[m];return Math.sqrt(y)}),z}var U,q={};function H(){if(U)return q;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}U=1,Object.defineProperty(q,"__esModule",{value:!0}),q.create=function(){var m=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m},q.clone=function(m){var _=new i.ARRAY_TYPE(4);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_},q.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m},q.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m},q.fromValues=function(m,_,b,N){var D=new i.ARRAY_TYPE(4);return D[0]=m,D[1]=_,D[2]=b,D[3]=N,D},q.set=function(m,_,b,N,D){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m},q.transpose=function(m,_){if(m===_){var b=_[1];m[1]=_[2],m[2]=b}else m[0]=_[0],m[1]=_[2],m[2]=_[1],m[3]=_[3];return m},q.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=b*S-D*N;return V?(m[0]=S*(V=1/V),m[1]=-N*V,m[2]=-D*V,m[3]=b*V,m):null},q.adjoint=function(m,_){var b=_[0];return m[0]=_[3],m[1]=-_[1],m[2]=-_[2],m[3]=b,m},q.determinant=function(m){return m[0]*m[3]-m[2]*m[1]},q.multiply=f,q.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=Math.sin(b),O=Math.cos(b);return m[0]=N*O+S*I,m[1]=D*O+V*I,m[2]=N*-I+S*O,m[3]=D*-I+V*O,m},q.scale=function(m,_,b){var N=_[1],D=_[2],S=_[3],V=b[0],I=b[1];return m[0]=_[0]*V,m[1]=N*V,m[2]=D*I,m[3]=S*I,m},q.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=-b,m[3]=N,m},q.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m},q.str=function(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"},q.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3])},q.LDU=function(m,_,b,N){return m[2]=N[2]/N[0],b[0]=N[0],b[1]=N[1],b[3]=N[3]-m[2]*b[1],[m,_,b]},q.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m},q.subtract=y,q.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]},q.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=_[0],I=_[1],O=_[2],M=_[3];return Math.abs(b-V)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(N-I)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(I))&&Math.abs(D-O)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(O))&&Math.abs(S-M)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(M))},q.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m},q.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m},q.sub=q.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=b[0],O=b[1],M=b[2],B=b[3];return m[0]=N*I+S*O,m[1]=D*I+V*O,m[2]=N*M+S*B,m[3]=D*M+V*B,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m}return q.mul=f,q.sub=y,q}var $,Q={};function ne(){if($)return Q;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}$=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.create=function(){var m=new i.ARRAY_TYPE(6);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[4]=0,m[5]=0),m[0]=1,m[3]=1,m},Q.clone=function(m){var _=new i.ARRAY_TYPE(6);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_},Q.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m},Q.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=0,m[5]=0,m},Q.fromValues=function(m,_,b,N,D,S){var V=new i.ARRAY_TYPE(6);return V[0]=m,V[1]=_,V[2]=b,V[3]=N,V[4]=D,V[5]=S,V},Q.set=function(m,_,b,N,D,S,V){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m[4]=S,m[5]=V,m},Q.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=b*S-N*D;return O?(m[0]=S*(O=1/O),m[1]=-N*O,m[2]=-D*O,m[3]=b*O,m[4]=(D*I-S*V)*O,m[5]=(N*V-b*I)*O,m):null},Q.determinant=function(m){return m[0]*m[3]-m[1]*m[2]},Q.multiply=f,Q.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=Math.sin(b),B=Math.cos(b);return m[0]=N*B+S*M,m[1]=D*B+V*M,m[2]=N*-M+S*B,m[3]=D*-M+V*B,m[4]=I,m[5]=O,m},Q.scale=function(m,_,b){var N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=b[0],M=b[1];return m[0]=_[0]*O,m[1]=N*O,m[2]=D*M,m[3]=S*M,m[4]=V,m[5]=I,m},Q.translate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=b[0],B=b[1];return m[0]=N,m[1]=D,m[2]=S,m[3]=V,m[4]=N*M+S*B+I,m[5]=D*M+V*B+O,m},Q.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=-b,m[3]=N,m[4]=0,m[5]=0,m},Q.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=_[1],m[4]=0,m[5]=0,m},Q.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=_[0],m[5]=_[1],m},Q.str=function(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"},Q.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],1)},Q.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m},Q.subtract=y,Q.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m},Q.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m[4]=_[4]+b[4]*N,m[5]=_[5]+b[5]*N,m},Q.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]},Q.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=m[4],I=m[5],O=_[0],M=_[1],B=_[2],Y=_[3],ee=_[4],ue=_[5];return Math.abs(b-O)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(O))&&Math.abs(N-M)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(M))&&Math.abs(D-B)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(B))&&Math.abs(S-Y)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(Y))&&Math.abs(V-ee)<=i.EPSILON*Math.max(1,Math.abs(V),Math.abs(ee))&&Math.abs(I-ue)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(ue))},Q.sub=Q.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=b[0],B=b[1],Y=b[2],ee=b[3],ue=b[4],le=b[5];return m[0]=N*M+S*B,m[1]=D*M+V*B,m[2]=N*Y+S*ee,m[3]=D*Y+V*ee,m[4]=N*ue+S*le+I,m[5]=D*ue+V*le+O,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m}return Q.mul=f,Q.sub=y,Q}var de,ge={};function fe(){if(de)return ge;function d(m){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},d(m)}de=1,Object.defineProperty(ge,"__esModule",{value:!0}),ge.create=function(){var m=new i.ARRAY_TYPE(9);return i.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m},ge.fromMat4=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[4],m[4]=_[5],m[5]=_[6],m[6]=_[8],m[7]=_[9],m[8]=_[10],m},ge.clone=function(m){var _=new i.ARRAY_TYPE(9);return _[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],_[4]=m[4],_[5]=m[5],_[6]=m[6],_[7]=m[7],_[8]=m[8],_},ge.copy=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=_[2],m[3]=_[3],m[4]=_[4],m[5]=_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},ge.fromValues=function(m,_,b,N,D,S,V,I,O){var M=new i.ARRAY_TYPE(9);return M[0]=m,M[1]=_,M[2]=b,M[3]=N,M[4]=D,M[5]=S,M[6]=V,M[7]=I,M[8]=O,M},ge.set=function(m,_,b,N,D,S,V,I,O,M){return m[0]=_,m[1]=b,m[2]=N,m[3]=D,m[4]=S,m[5]=V,m[6]=I,m[7]=O,m[8]=M,m},ge.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ge.transpose=function(m,_){if(m===_){var b=_[1],N=_[2],D=_[5];m[1]=_[3],m[2]=_[6],m[3]=b,m[5]=_[7],m[6]=N,m[7]=D}else m[0]=_[0],m[1]=_[3],m[2]=_[6],m[3]=_[1],m[4]=_[4],m[5]=_[7],m[6]=_[2],m[7]=_[5],m[8]=_[8];return m},ge.invert=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8],Y=B*V-I*M,ee=-B*S+I*O,ue=M*S-V*O,le=b*Y+N*ee+D*ue;return le?(m[0]=Y*(le=1/le),m[1]=(-B*N+D*M)*le,m[2]=(I*N-D*V)*le,m[3]=ee*le,m[4]=(B*b-D*O)*le,m[5]=(-I*b+D*S)*le,m[6]=ue*le,m[7]=(-M*b+N*O)*le,m[8]=(V*b-N*S)*le,m):null},ge.adjoint=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8];return m[0]=V*B-I*M,m[1]=D*M-N*B,m[2]=N*I-D*V,m[3]=I*O-S*B,m[4]=b*B-D*O,m[5]=D*S-b*I,m[6]=S*M-V*O,m[7]=N*O-b*M,m[8]=b*V-N*S,m},ge.determinant=function(m){var _=m[3],b=m[4],N=m[5],D=m[6],S=m[7],V=m[8];return m[0]*(V*b-N*S)+m[1]*(-V*_+N*D)+m[2]*(S*_-b*D)},ge.multiply=f,ge.translate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],Y=_[8],ee=b[0],ue=b[1];return m[0]=N,m[1]=D,m[2]=S,m[3]=V,m[4]=I,m[5]=O,m[6]=ee*N+ue*V+M,m[7]=ee*D+ue*I+B,m[8]=ee*S+ue*O+Y,m},ge.rotate=function(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],Y=_[8],ee=Math.sin(b),ue=Math.cos(b);return m[0]=ue*N+ee*V,m[1]=ue*D+ee*I,m[2]=ue*S+ee*O,m[3]=ue*V-ee*N,m[4]=ue*I-ee*D,m[5]=ue*O-ee*S,m[6]=M,m[7]=B,m[8]=Y,m},ge.scale=function(m,_,b){var N=b[0],D=b[1];return m[0]=N*_[0],m[1]=N*_[1],m[2]=N*_[2],m[3]=D*_[3],m[4]=D*_[4],m[5]=D*_[5],m[6]=_[6],m[7]=_[7],m[8]=_[8],m},ge.fromTranslation=function(m,_){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=_[0],m[7]=_[1],m[8]=1,m},ge.fromRotation=function(m,_){var b=Math.sin(_),N=Math.cos(_);return m[0]=N,m[1]=b,m[2]=0,m[3]=-b,m[4]=N,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ge.fromScaling=function(m,_){return m[0]=_[0],m[1]=0,m[2]=0,m[3]=0,m[4]=_[1],m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},ge.fromMat2d=function(m,_){return m[0]=_[0],m[1]=_[1],m[2]=0,m[3]=_[2],m[4]=_[3],m[5]=0,m[6]=_[4],m[7]=_[5],m[8]=1,m},ge.fromQuat=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=b+b,I=N+N,O=D+D,M=b*V,B=N*V,Y=N*I,ee=D*V,ue=D*I,le=D*O,re=S*V,pe=S*I,Se=S*O;return m[0]=1-Y-le,m[3]=B-Se,m[6]=ee+pe,m[1]=B+Se,m[4]=1-M-le,m[7]=ue-re,m[2]=ee-pe,m[5]=ue+re,m[8]=1-M-Y,m},ge.normalFromMat4=function(m,_){var b=_[0],N=_[1],D=_[2],S=_[3],V=_[4],I=_[5],O=_[6],M=_[7],B=_[8],Y=_[9],ee=_[10],ue=_[11],le=_[12],re=_[13],pe=_[14],Se=_[15],xe=b*I-N*V,Ke=b*O-D*V,Ze=b*M-S*V,He=N*O-D*I,ft=N*M-S*I,Ye=D*M-S*O,gt=B*re-Y*le,bt=B*pe-ee*le,Rt=B*Se-ue*le,Vt=Y*pe-ee*re,Et=Y*Se-ue*re,Ut=ee*Se-ue*pe,Dt=xe*Ut-Ke*Et+Ze*Vt+He*Rt-ft*bt+Ye*gt;return Dt?(m[0]=(I*Ut-O*Et+M*Vt)*(Dt=1/Dt),m[1]=(O*Rt-V*Ut-M*bt)*Dt,m[2]=(V*Et-I*Rt+M*gt)*Dt,m[3]=(D*Et-N*Ut-S*Vt)*Dt,m[4]=(b*Ut-D*Rt+S*bt)*Dt,m[5]=(N*Rt-b*Et-S*gt)*Dt,m[6]=(re*Ye-pe*ft+Se*He)*Dt,m[7]=(pe*Ze-le*Ye-Se*Ke)*Dt,m[8]=(le*ft-re*Ze+Se*xe)*Dt,m):null},ge.projection=function(m,_,b){return m[0]=2/_,m[1]=0,m[2]=0,m[3]=0,m[4]=-2/b,m[5]=0,m[6]=-1,m[7]=1,m[8]=1,m},ge.str=function(m){return"mat3("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+")"},ge.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},ge.add=function(m,_,b){return m[0]=_[0]+b[0],m[1]=_[1]+b[1],m[2]=_[2]+b[2],m[3]=_[3]+b[3],m[4]=_[4]+b[4],m[5]=_[5]+b[5],m[6]=_[6]+b[6],m[7]=_[7]+b[7],m[8]=_[8]+b[8],m},ge.subtract=y,ge.multiplyScalar=function(m,_,b){return m[0]=_[0]*b,m[1]=_[1]*b,m[2]=_[2]*b,m[3]=_[3]*b,m[4]=_[4]*b,m[5]=_[5]*b,m[6]=_[6]*b,m[7]=_[7]*b,m[8]=_[8]*b,m},ge.multiplyScalarAndAdd=function(m,_,b,N){return m[0]=_[0]+b[0]*N,m[1]=_[1]+b[1]*N,m[2]=_[2]+b[2]*N,m[3]=_[3]+b[3]*N,m[4]=_[4]+b[4]*N,m[5]=_[5]+b[5]*N,m[6]=_[6]+b[6]*N,m[7]=_[7]+b[7]*N,m[8]=_[8]+b[8]*N,m},ge.exactEquals=function(m,_){return m[0]===_[0]&&m[1]===_[1]&&m[2]===_[2]&&m[3]===_[3]&&m[4]===_[4]&&m[5]===_[5]&&m[6]===_[6]&&m[7]===_[7]&&m[8]===_[8]},ge.equals=function(m,_){var b=m[0],N=m[1],D=m[2],S=m[3],V=m[4],I=m[5],O=m[6],M=m[7],B=m[8],Y=_[0],ee=_[1],ue=_[2],le=_[3],re=_[4],pe=_[5],Se=_[6],xe=_[7],Ke=_[8];return Math.abs(b-Y)<=i.EPSILON*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(N-ee)<=i.EPSILON*Math.max(1,Math.abs(N),Math.abs(ee))&&Math.abs(D-ue)<=i.EPSILON*Math.max(1,Math.abs(D),Math.abs(ue))&&Math.abs(S-le)<=i.EPSILON*Math.max(1,Math.abs(S),Math.abs(le))&&Math.abs(V-re)<=i.EPSILON*Math.max(1,Math.abs(V),Math.abs(re))&&Math.abs(I-pe)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(pe))&&Math.abs(O-Se)<=i.EPSILON*Math.max(1,Math.abs(O),Math.abs(Se))&&Math.abs(M-xe)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(xe))&&Math.abs(B-Ke)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(Ke))},ge.sub=ge.mul=void 0;var i=function(m,_){if(m&&m.__esModule)return m;if(m===null||d(m)!=="object"&&typeof m!="function")return{default:m};var b=u(void 0);if(b&&b.has(m))return b.get(m);var N={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in m)if(S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)){var V=D?Object.getOwnPropertyDescriptor(m,S):null;V&&(V.get||V.set)?Object.defineProperty(N,S,V):N[S]=m[S]}return N.default=m,b&&b.set(m,N),N}(k());function u(m){if(typeof WeakMap!="function")return null;var _=new WeakMap,b=new WeakMap;return(u=function(N){return N?b:_})(m)}function f(m,_,b){var N=_[0],D=_[1],S=_[2],V=_[3],I=_[4],O=_[5],M=_[6],B=_[7],Y=_[8],ee=b[0],ue=b[1],le=b[2],re=b[3],pe=b[4],Se=b[5],xe=b[6],Ke=b[7],Ze=b[8];return m[0]=ee*N+ue*V+le*M,m[1]=ee*D+ue*I+le*B,m[2]=ee*S+ue*O+le*Y,m[3]=re*N+pe*V+Se*M,m[4]=re*D+pe*I+Se*B,m[5]=re*S+pe*O+Se*Y,m[6]=xe*N+Ke*V+Ze*M,m[7]=xe*D+Ke*I+Ze*B,m[8]=xe*S+Ke*O+Ze*Y,m}function y(m,_,b){return m[0]=_[0]-b[0],m[1]=_[1]-b[1],m[2]=_[2]-b[2],m[3]=_[3]-b[3],m[4]=_[4]-b[4],m[5]=_[5]-b[5],m[6]=_[6]-b[6],m[7]=_[7]-b[7],m[8]=_[8]-b[8],m}return ge.mul=f,ge.sub=y,ge}var _e,me={};function Ae(){if(_e)return me;function d(S){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},d(S)}_e=1,Object.defineProperty(me,"__esModule",{value:!0}),me.create=function(){var S=new i.ARRAY_TYPE(16);return i.ARRAY_TYPE!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0),S[0]=1,S[5]=1,S[10]=1,S[15]=1,S},me.clone=function(S){var V=new i.ARRAY_TYPE(16);return V[0]=S[0],V[1]=S[1],V[2]=S[2],V[3]=S[3],V[4]=S[4],V[5]=S[5],V[6]=S[6],V[7]=S[7],V[8]=S[8],V[9]=S[9],V[10]=S[10],V[11]=S[11],V[12]=S[12],V[13]=S[13],V[14]=S[14],V[15]=S[15],V},me.copy=function(S,V){return S[0]=V[0],S[1]=V[1],S[2]=V[2],S[3]=V[3],S[4]=V[4],S[5]=V[5],S[6]=V[6],S[7]=V[7],S[8]=V[8],S[9]=V[9],S[10]=V[10],S[11]=V[11],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15],S},me.fromValues=function(S,V,I,O,M,B,Y,ee,ue,le,re,pe,Se,xe,Ke,Ze){var He=new i.ARRAY_TYPE(16);return He[0]=S,He[1]=V,He[2]=I,He[3]=O,He[4]=M,He[5]=B,He[6]=Y,He[7]=ee,He[8]=ue,He[9]=le,He[10]=re,He[11]=pe,He[12]=Se,He[13]=xe,He[14]=Ke,He[15]=Ze,He},me.set=function(S,V,I,O,M,B,Y,ee,ue,le,re,pe,Se,xe,Ke,Ze,He){return S[0]=V,S[1]=I,S[2]=O,S[3]=M,S[4]=B,S[5]=Y,S[6]=ee,S[7]=ue,S[8]=le,S[9]=re,S[10]=pe,S[11]=Se,S[12]=xe,S[13]=Ke,S[14]=Ze,S[15]=He,S},me.identity=f,me.transpose=function(S,V){if(S===V){var I=V[1],O=V[2],M=V[3],B=V[6],Y=V[7],ee=V[11];S[1]=V[4],S[2]=V[8],S[3]=V[12],S[4]=I,S[6]=V[9],S[7]=V[13],S[8]=O,S[9]=B,S[11]=V[14],S[12]=M,S[13]=Y,S[14]=ee}else S[0]=V[0],S[1]=V[4],S[2]=V[8],S[3]=V[12],S[4]=V[1],S[5]=V[5],S[6]=V[9],S[7]=V[13],S[8]=V[2],S[9]=V[6],S[10]=V[10],S[11]=V[14],S[12]=V[3],S[13]=V[7],S[14]=V[11],S[15]=V[15];return S},me.invert=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],Y=V[4],ee=V[5],ue=V[6],le=V[7],re=V[8],pe=V[9],Se=V[10],xe=V[11],Ke=V[12],Ze=V[13],He=V[14],ft=V[15],Ye=I*ee-O*Y,gt=I*ue-M*Y,bt=I*le-B*Y,Rt=O*ue-M*ee,Vt=O*le-B*ee,Et=M*le-B*ue,Ut=re*Ze-pe*Ke,Dt=re*He-Se*Ke,jt=re*ft-xe*Ke,ga=pe*He-Se*Ze,ma=pe*ft-xe*Ze,Ya=Se*ft-xe*He,xa=Ye*Ya-gt*ma+bt*ga+Rt*jt-Vt*Dt+Et*Ut;return xa?(S[0]=(ee*Ya-ue*ma+le*ga)*(xa=1/xa),S[1]=(M*ma-O*Ya-B*ga)*xa,S[2]=(Ze*Et-He*Vt+ft*Rt)*xa,S[3]=(Se*Vt-pe*Et-xe*Rt)*xa,S[4]=(ue*jt-Y*Ya-le*Dt)*xa,S[5]=(I*Ya-M*jt+B*Dt)*xa,S[6]=(He*bt-Ke*Et-ft*gt)*xa,S[7]=(re*Et-Se*bt+xe*gt)*xa,S[8]=(Y*ma-ee*jt+le*Ut)*xa,S[9]=(O*jt-I*ma-B*Ut)*xa,S[10]=(Ke*Vt-Ze*bt+ft*Ye)*xa,S[11]=(pe*bt-re*Vt-xe*Ye)*xa,S[12]=(ee*Dt-Y*ga-ue*Ut)*xa,S[13]=(I*ga-O*Dt+M*Ut)*xa,S[14]=(Ze*gt-Ke*Rt-He*Ye)*xa,S[15]=(re*Rt-pe*gt+Se*Ye)*xa,S):null},me.adjoint=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],Y=V[4],ee=V[5],ue=V[6],le=V[7],re=V[8],pe=V[9],Se=V[10],xe=V[11],Ke=V[12],Ze=V[13],He=V[14],ft=V[15];return S[0]=ee*(Se*ft-xe*He)-pe*(ue*ft-le*He)+Ze*(ue*xe-le*Se),S[1]=-(O*(Se*ft-xe*He)-pe*(M*ft-B*He)+Ze*(M*xe-B*Se)),S[2]=O*(ue*ft-le*He)-ee*(M*ft-B*He)+Ze*(M*le-B*ue),S[3]=-(O*(ue*xe-le*Se)-ee*(M*xe-B*Se)+pe*(M*le-B*ue)),S[4]=-(Y*(Se*ft-xe*He)-re*(ue*ft-le*He)+Ke*(ue*xe-le*Se)),S[5]=I*(Se*ft-xe*He)-re*(M*ft-B*He)+Ke*(M*xe-B*Se),S[6]=-(I*(ue*ft-le*He)-Y*(M*ft-B*He)+Ke*(M*le-B*ue)),S[7]=I*(ue*xe-le*Se)-Y*(M*xe-B*Se)+re*(M*le-B*ue),S[8]=Y*(pe*ft-xe*Ze)-re*(ee*ft-le*Ze)+Ke*(ee*xe-le*pe),S[9]=-(I*(pe*ft-xe*Ze)-re*(O*ft-B*Ze)+Ke*(O*xe-B*pe)),S[10]=I*(ee*ft-le*Ze)-Y*(O*ft-B*Ze)+Ke*(O*le-B*ee),S[11]=-(I*(ee*xe-le*pe)-Y*(O*xe-B*pe)+re*(O*le-B*ee)),S[12]=-(Y*(pe*He-Se*Ze)-re*(ee*He-ue*Ze)+Ke*(ee*Se-ue*pe)),S[13]=I*(pe*He-Se*Ze)-re*(O*He-M*Ze)+Ke*(O*Se-M*pe),S[14]=-(I*(ee*He-ue*Ze)-Y*(O*He-M*Ze)+Ke*(O*ue-M*ee)),S[15]=I*(ee*Se-ue*pe)-Y*(O*Se-M*pe)+re*(O*ue-M*ee),S},me.determinant=function(S){var V=S[0],I=S[1],O=S[2],M=S[3],B=S[4],Y=S[5],ee=S[6],ue=S[7],le=S[8],re=S[9],pe=S[10],Se=S[11],xe=S[12],Ke=S[13],Ze=S[14],He=S[15];return(V*Y-I*B)*(pe*He-Se*Ze)-(V*ee-O*B)*(re*He-Se*Ke)+(V*ue-M*B)*(re*Ze-pe*Ke)+(I*ee-O*Y)*(le*He-Se*xe)-(I*ue-M*Y)*(le*Ze-pe*xe)+(O*ue-M*ee)*(le*Ke-re*xe)},me.multiply=y,me.translate=function(S,V,I){var O,M,B,Y,ee,ue,le,re,pe,Se,xe,Ke,Ze=I[0],He=I[1],ft=I[2];return V===S?(S[12]=V[0]*Ze+V[4]*He+V[8]*ft+V[12],S[13]=V[1]*Ze+V[5]*He+V[9]*ft+V[13],S[14]=V[2]*Ze+V[6]*He+V[10]*ft+V[14],S[15]=V[3]*Ze+V[7]*He+V[11]*ft+V[15]):(M=V[1],B=V[2],Y=V[3],ee=V[4],ue=V[5],le=V[6],re=V[7],pe=V[8],Se=V[9],xe=V[10],Ke=V[11],S[0]=O=V[0],S[1]=M,S[2]=B,S[3]=Y,S[4]=ee,S[5]=ue,S[6]=le,S[7]=re,S[8]=pe,S[9]=Se,S[10]=xe,S[11]=Ke,S[12]=O*Ze+ee*He+pe*ft+V[12],S[13]=M*Ze+ue*He+Se*ft+V[13],S[14]=B*Ze+le*He+xe*ft+V[14],S[15]=Y*Ze+re*He+Ke*ft+V[15]),S},me.scale=function(S,V,I){var O=I[0],M=I[1],B=I[2];return S[0]=V[0]*O,S[1]=V[1]*O,S[2]=V[2]*O,S[3]=V[3]*O,S[4]=V[4]*M,S[5]=V[5]*M,S[6]=V[6]*M,S[7]=V[7]*M,S[8]=V[8]*B,S[9]=V[9]*B,S[10]=V[10]*B,S[11]=V[11]*B,S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15],S},me.rotate=function(S,V,I,O){var M,B,Y,ee,ue,le,re,pe,Se,xe,Ke,Ze,He,ft,Ye,gt,bt,Rt,Vt,Et,Ut,Dt,jt,ga,ma=O[0],Ya=O[1],xa=O[2],Oa=Math.hypot(ma,Ya,xa);return Oa<i.EPSILON?null:(ma*=Oa=1/Oa,Ya*=Oa,xa*=Oa,M=Math.sin(I),B=Math.cos(I),ue=V[1],le=V[2],re=V[3],Se=V[5],xe=V[6],Ke=V[7],He=V[9],ft=V[10],Ye=V[11],gt=ma*ma*(Y=1-B)+B,Vt=ma*Ya*Y-xa*M,Et=Ya*Ya*Y+B,Ut=xa*Ya*Y+ma*M,Dt=ma*xa*Y+Ya*M,jt=Ya*xa*Y-ma*M,ga=xa*xa*Y+B,S[0]=(ee=V[0])*gt+(pe=V[4])*(bt=Ya*ma*Y+xa*M)+(Ze=V[8])*(Rt=xa*ma*Y-Ya*M),S[1]=ue*gt+Se*bt+He*Rt,S[2]=le*gt+xe*bt+ft*Rt,S[3]=re*gt+Ke*bt+Ye*Rt,S[4]=ee*Vt+pe*Et+Ze*Ut,S[5]=ue*Vt+Se*Et+He*Ut,S[6]=le*Vt+xe*Et+ft*Ut,S[7]=re*Vt+Ke*Et+Ye*Ut,S[8]=ee*Dt+pe*jt+Ze*ga,S[9]=ue*Dt+Se*jt+He*ga,S[10]=le*Dt+xe*jt+ft*ga,S[11]=re*Dt+Ke*jt+Ye*ga,V!==S&&(S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S)},me.rotateX=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[4],Y=V[5],ee=V[6],ue=V[7],le=V[8],re=V[9],pe=V[10],Se=V[11];return V!==S&&(S[0]=V[0],S[1]=V[1],S[2]=V[2],S[3]=V[3],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[4]=B*M+le*O,S[5]=Y*M+re*O,S[6]=ee*M+pe*O,S[7]=ue*M+Se*O,S[8]=le*M-B*O,S[9]=re*M-Y*O,S[10]=pe*M-ee*O,S[11]=Se*M-ue*O,S},me.rotateY=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[0],Y=V[1],ee=V[2],ue=V[3],le=V[8],re=V[9],pe=V[10],Se=V[11];return V!==S&&(S[4]=V[4],S[5]=V[5],S[6]=V[6],S[7]=V[7],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[0]=B*M-le*O,S[1]=Y*M-re*O,S[2]=ee*M-pe*O,S[3]=ue*M-Se*O,S[8]=B*O+le*M,S[9]=Y*O+re*M,S[10]=ee*O+pe*M,S[11]=ue*O+Se*M,S},me.rotateZ=function(S,V,I){var O=Math.sin(I),M=Math.cos(I),B=V[0],Y=V[1],ee=V[2],ue=V[3],le=V[4],re=V[5],pe=V[6],Se=V[7];return V!==S&&(S[8]=V[8],S[9]=V[9],S[10]=V[10],S[11]=V[11],S[12]=V[12],S[13]=V[13],S[14]=V[14],S[15]=V[15]),S[0]=B*M+le*O,S[1]=Y*M+re*O,S[2]=ee*M+pe*O,S[3]=ue*M+Se*O,S[4]=le*M-B*O,S[5]=re*M-Y*O,S[6]=pe*M-ee*O,S[7]=Se*M-ue*O,S},me.fromTranslation=function(S,V){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=V[0],S[13]=V[1],S[14]=V[2],S[15]=1,S},me.fromScaling=function(S,V){return S[0]=V[0],S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=V[1],S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=V[2],S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromRotation=function(S,V,I){var O,M,B,Y=I[0],ee=I[1],ue=I[2],le=Math.hypot(Y,ee,ue);return le<i.EPSILON?null:(Y*=le=1/le,ee*=le,ue*=le,O=Math.sin(V),M=Math.cos(V),S[0]=Y*Y*(B=1-M)+M,S[1]=ee*Y*B+ue*O,S[2]=ue*Y*B-ee*O,S[3]=0,S[4]=Y*ee*B-ue*O,S[5]=ee*ee*B+M,S[6]=ue*ee*B+Y*O,S[7]=0,S[8]=Y*ue*B+ee*O,S[9]=ee*ue*B-Y*O,S[10]=ue*ue*B+M,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S)},me.fromXRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=O,S[6]=I,S[7]=0,S[8]=0,S[9]=-I,S[10]=O,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromYRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=O,S[1]=0,S[2]=-I,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=I,S[9]=0,S[10]=O,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromZRotation=function(S,V){var I=Math.sin(V),O=Math.cos(V);return S[0]=O,S[1]=I,S[2]=0,S[3]=0,S[4]=-I,S[5]=O,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.fromRotationTranslation=m,me.fromQuat2=function(S,V){var I=new i.ARRAY_TYPE(3),O=-V[0],M=-V[1],B=-V[2],Y=V[3],ee=V[4],ue=V[5],le=V[6],re=V[7],pe=O*O+M*M+B*B+Y*Y;return pe>0?(I[0]=2*(ee*Y+re*O+ue*B-le*M)/pe,I[1]=2*(ue*Y+re*M+le*O-ee*B)/pe,I[2]=2*(le*Y+re*B+ee*M-ue*O)/pe):(I[0]=2*(ee*Y+re*O+ue*B-le*M),I[1]=2*(ue*Y+re*M+le*O-ee*B),I[2]=2*(le*Y+re*B+ee*M-ue*O)),m(S,V,I),S},me.getTranslation=function(S,V){return S[0]=V[12],S[1]=V[13],S[2]=V[14],S},me.getScaling=_,me.getRotation=function(S,V){var I=new i.ARRAY_TYPE(3);_(I,V);var O=1/I[0],M=1/I[1],B=1/I[2],Y=V[0]*O,ee=V[1]*M,ue=V[2]*B,le=V[4]*O,re=V[5]*M,pe=V[6]*B,Se=V[8]*O,xe=V[9]*M,Ke=V[10]*B,Ze=Y+re+Ke,He=0;return Ze>0?(He=2*Math.sqrt(Ze+1),S[3]=.25*He,S[0]=(pe-xe)/He,S[1]=(Se-ue)/He,S[2]=(ee-le)/He):Y>re&&Y>Ke?(He=2*Math.sqrt(1+Y-re-Ke),S[3]=(pe-xe)/He,S[0]=.25*He,S[1]=(ee+le)/He,S[2]=(Se+ue)/He):re>Ke?(He=2*Math.sqrt(1+re-Y-Ke),S[3]=(Se-ue)/He,S[0]=(ee+le)/He,S[1]=.25*He,S[2]=(pe+xe)/He):(He=2*Math.sqrt(1+Ke-Y-re),S[3]=(ee-le)/He,S[0]=(Se+ue)/He,S[1]=(pe+xe)/He,S[2]=.25*He),S},me.fromRotationTranslationScale=function(S,V,I,O){var M=V[0],B=V[1],Y=V[2],ee=V[3],ue=M+M,le=B+B,re=Y+Y,pe=M*ue,Se=M*le,xe=M*re,Ke=B*le,Ze=B*re,He=Y*re,ft=ee*ue,Ye=ee*le,gt=ee*re,bt=O[0],Rt=O[1],Vt=O[2];return S[0]=(1-(Ke+He))*bt,S[1]=(Se+gt)*bt,S[2]=(xe-Ye)*bt,S[3]=0,S[4]=(Se-gt)*Rt,S[5]=(1-(pe+He))*Rt,S[6]=(Ze+ft)*Rt,S[7]=0,S[8]=(xe+Ye)*Vt,S[9]=(Ze-ft)*Vt,S[10]=(1-(pe+Ke))*Vt,S[11]=0,S[12]=I[0],S[13]=I[1],S[14]=I[2],S[15]=1,S},me.fromRotationTranslationScaleOrigin=function(S,V,I,O,M){var B=V[0],Y=V[1],ee=V[2],ue=V[3],le=B+B,re=Y+Y,pe=ee+ee,Se=B*le,xe=B*re,Ke=B*pe,Ze=Y*re,He=Y*pe,ft=ee*pe,Ye=ue*le,gt=ue*re,bt=ue*pe,Rt=O[0],Vt=O[1],Et=O[2],Ut=M[0],Dt=M[1],jt=M[2],ga=(1-(Ze+ft))*Rt,ma=(xe+bt)*Rt,Ya=(Ke-gt)*Rt,xa=(xe-bt)*Vt,Oa=(1-(Se+ft))*Vt,_a=(He+Ye)*Vt,gr=(Ke+gt)*Et,$a=(He-Ye)*Et,or=(1-(Se+Ze))*Et;return S[0]=ga,S[1]=ma,S[2]=Ya,S[3]=0,S[4]=xa,S[5]=Oa,S[6]=_a,S[7]=0,S[8]=gr,S[9]=$a,S[10]=or,S[11]=0,S[12]=I[0]+Ut-(ga*Ut+xa*Dt+gr*jt),S[13]=I[1]+Dt-(ma*Ut+Oa*Dt+$a*jt),S[14]=I[2]+jt-(Ya*Ut+_a*Dt+or*jt),S[15]=1,S},me.fromQuat=function(S,V){var I=V[0],O=V[1],M=V[2],B=V[3],Y=I+I,ee=O+O,ue=M+M,le=I*Y,re=O*Y,pe=O*ee,Se=M*Y,xe=M*ee,Ke=M*ue,Ze=B*Y,He=B*ee,ft=B*ue;return S[0]=1-pe-Ke,S[1]=re+ft,S[2]=Se-He,S[3]=0,S[4]=re-ft,S[5]=1-le-Ke,S[6]=xe+Ze,S[7]=0,S[8]=Se+He,S[9]=xe-Ze,S[10]=1-le-pe,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},me.frustum=function(S,V,I,O,M,B,Y){var ee=1/(I-V),ue=1/(M-O),le=1/(B-Y);return S[0]=2*B*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=2*B*ue,S[6]=0,S[7]=0,S[8]=(I+V)*ee,S[9]=(M+O)*ue,S[10]=(Y+B)*le,S[11]=-1,S[12]=0,S[13]=0,S[14]=Y*B*2*le,S[15]=0,S},me.perspectiveNO=b,me.perspectiveZO=function(S,V,I,O,M){var B,Y=1/Math.tan(V/2);return S[0]=Y/I,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=Y,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,M!=null&&M!==1/0?(S[10]=M*(B=1/(O-M)),S[14]=M*O*B):(S[10]=-1,S[14]=-O),S},me.perspectiveFromFieldOfView=function(S,V,I,O){var M=Math.tan(V.upDegrees*Math.PI/180),B=Math.tan(V.downDegrees*Math.PI/180),Y=Math.tan(V.leftDegrees*Math.PI/180),ee=Math.tan(V.rightDegrees*Math.PI/180),ue=2/(Y+ee),le=2/(M+B);return S[0]=ue,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=le,S[6]=0,S[7]=0,S[8]=-(Y-ee)*ue*.5,S[9]=(M-B)*le*.5,S[10]=O/(I-O),S[11]=-1,S[12]=0,S[13]=0,S[14]=O*I/(I-O),S[15]=0,S},me.orthoNO=N,me.orthoZO=function(S,V,I,O,M,B,Y){var ee=1/(V-I),ue=1/(O-M),le=1/(B-Y);return S[0]=-2*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ue,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=le,S[11]=0,S[12]=(V+I)*ee,S[13]=(M+O)*ue,S[14]=B*le,S[15]=1,S},me.lookAt=function(S,V,I,O){var M,B,Y,ee,ue,le,re,pe,Se,xe,Ke=V[0],Ze=V[1],He=V[2],ft=O[0],Ye=O[1],gt=O[2],bt=I[0],Rt=I[1],Vt=I[2];return Math.abs(Ke-bt)<i.EPSILON&&Math.abs(Ze-Rt)<i.EPSILON&&Math.abs(He-Vt)<i.EPSILON?f(S):(re=Ke-bt,pe=Ze-Rt,Se=He-Vt,M=Ye*(Se*=xe=1/Math.hypot(re,pe,Se))-gt*(pe*=xe),B=gt*(re*=xe)-ft*Se,Y=ft*pe-Ye*re,(xe=Math.hypot(M,B,Y))?(M*=xe=1/xe,B*=xe,Y*=xe):(M=0,B=0,Y=0),ee=pe*Y-Se*B,ue=Se*M-re*Y,le=re*B-pe*M,(xe=Math.hypot(ee,ue,le))?(ee*=xe=1/xe,ue*=xe,le*=xe):(ee=0,ue=0,le=0),S[0]=M,S[1]=ee,S[2]=re,S[3]=0,S[4]=B,S[5]=ue,S[6]=pe,S[7]=0,S[8]=Y,S[9]=le,S[10]=Se,S[11]=0,S[12]=-(M*Ke+B*Ze+Y*He),S[13]=-(ee*Ke+ue*Ze+le*He),S[14]=-(re*Ke+pe*Ze+Se*He),S[15]=1,S)},me.targetTo=function(S,V,I,O){var M=V[0],B=V[1],Y=V[2],ee=O[0],ue=O[1],le=O[2],re=M-I[0],pe=B-I[1],Se=Y-I[2],xe=re*re+pe*pe+Se*Se;xe>0&&(re*=xe=1/Math.sqrt(xe),pe*=xe,Se*=xe);var Ke=ue*Se-le*pe,Ze=le*re-ee*Se,He=ee*pe-ue*re;return(xe=Ke*Ke+Ze*Ze+He*He)>0&&(Ke*=xe=1/Math.sqrt(xe),Ze*=xe,He*=xe),S[0]=Ke,S[1]=Ze,S[2]=He,S[3]=0,S[4]=pe*He-Se*Ze,S[5]=Se*Ke-re*He,S[6]=re*Ze-pe*Ke,S[7]=0,S[8]=re,S[9]=pe,S[10]=Se,S[11]=0,S[12]=M,S[13]=B,S[14]=Y,S[15]=1,S},me.str=function(S){return"mat4("+S[0]+", "+S[1]+", "+S[2]+", "+S[3]+", "+S[4]+", "+S[5]+", "+S[6]+", "+S[7]+", "+S[8]+", "+S[9]+", "+S[10]+", "+S[11]+", "+S[12]+", "+S[13]+", "+S[14]+", "+S[15]+")"},me.frob=function(S){return Math.hypot(S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],S[8],S[9],S[10],S[11],S[12],S[13],S[14],S[15])},me.add=function(S,V,I){return S[0]=V[0]+I[0],S[1]=V[1]+I[1],S[2]=V[2]+I[2],S[3]=V[3]+I[3],S[4]=V[4]+I[4],S[5]=V[5]+I[5],S[6]=V[6]+I[6],S[7]=V[7]+I[7],S[8]=V[8]+I[8],S[9]=V[9]+I[9],S[10]=V[10]+I[10],S[11]=V[11]+I[11],S[12]=V[12]+I[12],S[13]=V[13]+I[13],S[14]=V[14]+I[14],S[15]=V[15]+I[15],S},me.subtract=D,me.multiplyScalar=function(S,V,I){return S[0]=V[0]*I,S[1]=V[1]*I,S[2]=V[2]*I,S[3]=V[3]*I,S[4]=V[4]*I,S[5]=V[5]*I,S[6]=V[6]*I,S[7]=V[7]*I,S[8]=V[8]*I,S[9]=V[9]*I,S[10]=V[10]*I,S[11]=V[11]*I,S[12]=V[12]*I,S[13]=V[13]*I,S[14]=V[14]*I,S[15]=V[15]*I,S},me.multiplyScalarAndAdd=function(S,V,I,O){return S[0]=V[0]+I[0]*O,S[1]=V[1]+I[1]*O,S[2]=V[2]+I[2]*O,S[3]=V[3]+I[3]*O,S[4]=V[4]+I[4]*O,S[5]=V[5]+I[5]*O,S[6]=V[6]+I[6]*O,S[7]=V[7]+I[7]*O,S[8]=V[8]+I[8]*O,S[9]=V[9]+I[9]*O,S[10]=V[10]+I[10]*O,S[11]=V[11]+I[11]*O,S[12]=V[12]+I[12]*O,S[13]=V[13]+I[13]*O,S[14]=V[14]+I[14]*O,S[15]=V[15]+I[15]*O,S},me.exactEquals=function(S,V){return S[0]===V[0]&&S[1]===V[1]&&S[2]===V[2]&&S[3]===V[3]&&S[4]===V[4]&&S[5]===V[5]&&S[6]===V[6]&&S[7]===V[7]&&S[8]===V[8]&&S[9]===V[9]&&S[10]===V[10]&&S[11]===V[11]&&S[12]===V[12]&&S[13]===V[13]&&S[14]===V[14]&&S[15]===V[15]},me.equals=function(S,V){var I=S[0],O=S[1],M=S[2],B=S[3],Y=S[4],ee=S[5],ue=S[6],le=S[7],re=S[8],pe=S[9],Se=S[10],xe=S[11],Ke=S[12],Ze=S[13],He=S[14],ft=S[15],Ye=V[0],gt=V[1],bt=V[2],Rt=V[3],Vt=V[4],Et=V[5],Ut=V[6],Dt=V[7],jt=V[8],ga=V[9],ma=V[10],Ya=V[11],xa=V[12],Oa=V[13],_a=V[14],gr=V[15];return Math.abs(I-Ye)<=i.EPSILON*Math.max(1,Math.abs(I),Math.abs(Ye))&&Math.abs(O-gt)<=i.EPSILON*Math.max(1,Math.abs(O),Math.abs(gt))&&Math.abs(M-bt)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(bt))&&Math.abs(B-Rt)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(Rt))&&Math.abs(Y-Vt)<=i.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Vt))&&Math.abs(ee-Et)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Et))&&Math.abs(ue-Ut)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Ut))&&Math.abs(le-Dt)<=i.EPSILON*Math.max(1,Math.abs(le),Math.abs(Dt))&&Math.abs(re-jt)<=i.EPSILON*Math.max(1,Math.abs(re),Math.abs(jt))&&Math.abs(pe-ga)<=i.EPSILON*Math.max(1,Math.abs(pe),Math.abs(ga))&&Math.abs(Se-ma)<=i.EPSILON*Math.max(1,Math.abs(Se),Math.abs(ma))&&Math.abs(xe-Ya)<=i.EPSILON*Math.max(1,Math.abs(xe),Math.abs(Ya))&&Math.abs(Ke-xa)<=i.EPSILON*Math.max(1,Math.abs(Ke),Math.abs(xa))&&Math.abs(Ze-Oa)<=i.EPSILON*Math.max(1,Math.abs(Ze),Math.abs(Oa))&&Math.abs(He-_a)<=i.EPSILON*Math.max(1,Math.abs(He),Math.abs(_a))&&Math.abs(ft-gr)<=i.EPSILON*Math.max(1,Math.abs(ft),Math.abs(gr))},me.sub=me.mul=me.ortho=me.perspective=void 0;var i=function(S,V){if(S&&S.__esModule)return S;if(S===null||d(S)!=="object"&&typeof S!="function")return{default:S};var I=u(void 0);if(I&&I.has(S))return I.get(S);var O={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var B in S)if(B!=="default"&&Object.prototype.hasOwnProperty.call(S,B)){var Y=M?Object.getOwnPropertyDescriptor(S,B):null;Y&&(Y.get||Y.set)?Object.defineProperty(O,B,Y):O[B]=S[B]}return O.default=S,I&&I.set(S,O),O}(k());function u(S){if(typeof WeakMap!="function")return null;var V=new WeakMap,I=new WeakMap;return(u=function(O){return O?I:V})(S)}function f(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S}function y(S,V,I){var O=V[0],M=V[1],B=V[2],Y=V[3],ee=V[4],ue=V[5],le=V[6],re=V[7],pe=V[8],Se=V[9],xe=V[10],Ke=V[11],Ze=V[12],He=V[13],ft=V[14],Ye=V[15],gt=I[0],bt=I[1],Rt=I[2],Vt=I[3];return S[0]=gt*O+bt*ee+Rt*pe+Vt*Ze,S[1]=gt*M+bt*ue+Rt*Se+Vt*He,S[2]=gt*B+bt*le+Rt*xe+Vt*ft,S[3]=gt*Y+bt*re+Rt*Ke+Vt*Ye,S[4]=(gt=I[4])*O+(bt=I[5])*ee+(Rt=I[6])*pe+(Vt=I[7])*Ze,S[5]=gt*M+bt*ue+Rt*Se+Vt*He,S[6]=gt*B+bt*le+Rt*xe+Vt*ft,S[7]=gt*Y+bt*re+Rt*Ke+Vt*Ye,S[8]=(gt=I[8])*O+(bt=I[9])*ee+(Rt=I[10])*pe+(Vt=I[11])*Ze,S[9]=gt*M+bt*ue+Rt*Se+Vt*He,S[10]=gt*B+bt*le+Rt*xe+Vt*ft,S[11]=gt*Y+bt*re+Rt*Ke+Vt*Ye,S[12]=(gt=I[12])*O+(bt=I[13])*ee+(Rt=I[14])*pe+(Vt=I[15])*Ze,S[13]=gt*M+bt*ue+Rt*Se+Vt*He,S[14]=gt*B+bt*le+Rt*xe+Vt*ft,S[15]=gt*Y+bt*re+Rt*Ke+Vt*Ye,S}function m(S,V,I){var O=V[0],M=V[1],B=V[2],Y=V[3],ee=O+O,ue=M+M,le=B+B,re=O*ee,pe=O*ue,Se=O*le,xe=M*ue,Ke=M*le,Ze=B*le,He=Y*ee,ft=Y*ue,Ye=Y*le;return S[0]=1-(xe+Ze),S[1]=pe+Ye,S[2]=Se-ft,S[3]=0,S[4]=pe-Ye,S[5]=1-(re+Ze),S[6]=Ke+He,S[7]=0,S[8]=Se+ft,S[9]=Ke-He,S[10]=1-(re+xe),S[11]=0,S[12]=I[0],S[13]=I[1],S[14]=I[2],S[15]=1,S}function _(S,V){var I=V[4],O=V[5],M=V[6],B=V[8],Y=V[9],ee=V[10];return S[0]=Math.hypot(V[0],V[1],V[2]),S[1]=Math.hypot(I,O,M),S[2]=Math.hypot(B,Y,ee),S}function b(S,V,I,O,M){var B,Y=1/Math.tan(V/2);return S[0]=Y/I,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=Y,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,M!=null&&M!==1/0?(S[10]=(M+O)*(B=1/(O-M)),S[14]=2*M*O*B):(S[10]=-1,S[14]=-2*O),S}function N(S,V,I,O,M,B,Y){var ee=1/(V-I),ue=1/(O-M),le=1/(B-Y);return S[0]=-2*ee,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*ue,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*le,S[11]=0,S[12]=(V+I)*ee,S[13]=(M+O)*ue,S[14]=(Y+B)*le,S[15]=1,S}function D(S,V,I){return S[0]=V[0]-I[0],S[1]=V[1]-I[1],S[2]=V[2]-I[2],S[3]=V[3]-I[3],S[4]=V[4]-I[4],S[5]=V[5]-I[5],S[6]=V[6]-I[6],S[7]=V[7]-I[7],S[8]=V[8]-I[8],S[9]=V[9]-I[9],S[10]=V[10]-I[10],S[11]=V[11]-I[11],S[12]=V[12]-I[12],S[13]=V[13]-I[13],S[14]=V[14]-I[14],S[15]=V[15]-I[15],S}return me.perspective=b,me.ortho=N,me.mul=y,me.sub=D,me}var Te,Oe={},ie={};function we(){if(Te)return ie;function d(M){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},d(M)}Te=1,Object.defineProperty(ie,"__esModule",{value:!0}),ie.create=f,ie.clone=function(M){var B=new i.ARRAY_TYPE(3);return B[0]=M[0],B[1]=M[1],B[2]=M[2],B},ie.length=y,ie.fromValues=function(M,B,Y){var ee=new i.ARRAY_TYPE(3);return ee[0]=M,ee[1]=B,ee[2]=Y,ee},ie.copy=function(M,B){return M[0]=B[0],M[1]=B[1],M[2]=B[2],M},ie.set=function(M,B,Y,ee){return M[0]=B,M[1]=Y,M[2]=ee,M},ie.add=function(M,B,Y){return M[0]=B[0]+Y[0],M[1]=B[1]+Y[1],M[2]=B[2]+Y[2],M},ie.subtract=m,ie.multiply=_,ie.divide=b,ie.ceil=function(M,B){return M[0]=Math.ceil(B[0]),M[1]=Math.ceil(B[1]),M[2]=Math.ceil(B[2]),M},ie.floor=function(M,B){return M[0]=Math.floor(B[0]),M[1]=Math.floor(B[1]),M[2]=Math.floor(B[2]),M},ie.min=function(M,B,Y){return M[0]=Math.min(B[0],Y[0]),M[1]=Math.min(B[1],Y[1]),M[2]=Math.min(B[2],Y[2]),M},ie.max=function(M,B,Y){return M[0]=Math.max(B[0],Y[0]),M[1]=Math.max(B[1],Y[1]),M[2]=Math.max(B[2],Y[2]),M},ie.round=function(M,B){return M[0]=Math.round(B[0]),M[1]=Math.round(B[1]),M[2]=Math.round(B[2]),M},ie.scale=function(M,B,Y){return M[0]=B[0]*Y,M[1]=B[1]*Y,M[2]=B[2]*Y,M},ie.scaleAndAdd=function(M,B,Y,ee){return M[0]=B[0]+Y[0]*ee,M[1]=B[1]+Y[1]*ee,M[2]=B[2]+Y[2]*ee,M},ie.distance=N,ie.squaredDistance=D,ie.squaredLength=S,ie.negate=function(M,B){return M[0]=-B[0],M[1]=-B[1],M[2]=-B[2],M},ie.inverse=function(M,B){return M[0]=1/B[0],M[1]=1/B[1],M[2]=1/B[2],M},ie.normalize=function(M,B){var Y=B[0],ee=B[1],ue=B[2],le=Y*Y+ee*ee+ue*ue;return le>0&&(le=1/Math.sqrt(le)),M[0]=B[0]*le,M[1]=B[1]*le,M[2]=B[2]*le,M},ie.dot=V,ie.cross=function(M,B,Y){var ee=B[0],ue=B[1],le=B[2],re=Y[0],pe=Y[1],Se=Y[2];return M[0]=ue*Se-le*pe,M[1]=le*re-ee*Se,M[2]=ee*pe-ue*re,M},ie.lerp=function(M,B,Y,ee){var ue=B[0],le=B[1],re=B[2];return M[0]=ue+ee*(Y[0]-ue),M[1]=le+ee*(Y[1]-le),M[2]=re+ee*(Y[2]-re),M},ie.hermite=function(M,B,Y,ee,ue,le){var re=le*le,pe=re*(2*le-3)+1,Se=re*(le-2)+le,xe=re*(le-1),Ke=re*(3-2*le);return M[0]=B[0]*pe+Y[0]*Se+ee[0]*xe+ue[0]*Ke,M[1]=B[1]*pe+Y[1]*Se+ee[1]*xe+ue[1]*Ke,M[2]=B[2]*pe+Y[2]*Se+ee[2]*xe+ue[2]*Ke,M},ie.bezier=function(M,B,Y,ee,ue,le){var re=1-le,pe=re*re,Se=le*le,xe=pe*re,Ke=3*le*pe,Ze=3*Se*re,He=Se*le;return M[0]=B[0]*xe+Y[0]*Ke+ee[0]*Ze+ue[0]*He,M[1]=B[1]*xe+Y[1]*Ke+ee[1]*Ze+ue[1]*He,M[2]=B[2]*xe+Y[2]*Ke+ee[2]*Ze+ue[2]*He,M},ie.random=function(M,B){B=B||1;var Y=2*i.RANDOM()*Math.PI,ee=2*i.RANDOM()-1,ue=Math.sqrt(1-ee*ee)*B;return M[0]=Math.cos(Y)*ue,M[1]=Math.sin(Y)*ue,M[2]=ee*B,M},ie.transformMat4=function(M,B,Y){var ee=B[0],ue=B[1],le=B[2],re=Y[3]*ee+Y[7]*ue+Y[11]*le+Y[15];return M[0]=(Y[0]*ee+Y[4]*ue+Y[8]*le+Y[12])/(re=re||1),M[1]=(Y[1]*ee+Y[5]*ue+Y[9]*le+Y[13])/re,M[2]=(Y[2]*ee+Y[6]*ue+Y[10]*le+Y[14])/re,M},ie.transformMat3=function(M,B,Y){var ee=B[0],ue=B[1],le=B[2];return M[0]=ee*Y[0]+ue*Y[3]+le*Y[6],M[1]=ee*Y[1]+ue*Y[4]+le*Y[7],M[2]=ee*Y[2]+ue*Y[5]+le*Y[8],M},ie.transformQuat=function(M,B,Y){var ee=Y[0],ue=Y[1],le=Y[2],re=B[0],pe=B[1],Se=B[2],xe=ue*Se-le*pe,Ke=le*re-ee*Se,Ze=ee*pe-ue*re,He=ue*Ze-le*Ke,ft=le*xe-ee*Ze,Ye=ee*Ke-ue*xe,gt=2*Y[3];return Ke*=gt,Ze*=gt,ft*=2,Ye*=2,M[0]=re+(xe*=gt)+(He*=2),M[1]=pe+Ke+ft,M[2]=Se+Ze+Ye,M},ie.rotateX=function(M,B,Y,ee){var ue=[],le=[];return ue[0]=B[0]-Y[0],ue[1]=B[1]-Y[1],ue[2]=B[2]-Y[2],le[0]=ue[0],le[1]=ue[1]*Math.cos(ee)-ue[2]*Math.sin(ee),le[2]=ue[1]*Math.sin(ee)+ue[2]*Math.cos(ee),M[0]=le[0]+Y[0],M[1]=le[1]+Y[1],M[2]=le[2]+Y[2],M},ie.rotateY=function(M,B,Y,ee){var ue=[],le=[];return ue[0]=B[0]-Y[0],ue[1]=B[1]-Y[1],ue[2]=B[2]-Y[2],le[0]=ue[2]*Math.sin(ee)+ue[0]*Math.cos(ee),le[1]=ue[1],le[2]=ue[2]*Math.cos(ee)-ue[0]*Math.sin(ee),M[0]=le[0]+Y[0],M[1]=le[1]+Y[1],M[2]=le[2]+Y[2],M},ie.rotateZ=function(M,B,Y,ee){var ue=[],le=[];return ue[0]=B[0]-Y[0],ue[1]=B[1]-Y[1],ue[2]=B[2]-Y[2],le[0]=ue[0]*Math.cos(ee)-ue[1]*Math.sin(ee),le[1]=ue[0]*Math.sin(ee)+ue[1]*Math.cos(ee),le[2]=ue[2],M[0]=le[0]+Y[0],M[1]=le[1]+Y[1],M[2]=le[2]+Y[2],M},ie.angle=function(M,B){var Y=M[0],ee=M[1],ue=M[2],le=B[0],re=B[1],pe=B[2],Se=Math.sqrt(Y*Y+ee*ee+ue*ue)*Math.sqrt(le*le+re*re+pe*pe),xe=Se&&V(M,B)/Se;return Math.acos(Math.min(Math.max(xe,-1),1))},ie.zero=function(M){return M[0]=0,M[1]=0,M[2]=0,M},ie.str=function(M){return"vec3("+M[0]+", "+M[1]+", "+M[2]+")"},ie.exactEquals=function(M,B){return M[0]===B[0]&&M[1]===B[1]&&M[2]===B[2]},ie.equals=function(M,B){var Y=M[0],ee=M[1],ue=M[2],le=B[0],re=B[1],pe=B[2];return Math.abs(Y-le)<=i.EPSILON*Math.max(1,Math.abs(Y),Math.abs(le))&&Math.abs(ee-re)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(re))&&Math.abs(ue-pe)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(pe))},ie.forEach=ie.sqrLen=ie.len=ie.sqrDist=ie.dist=ie.div=ie.mul=ie.sub=void 0;var i=function(M,B){if(M&&M.__esModule)return M;if(M===null||d(M)!=="object"&&typeof M!="function")return{default:M};var Y=u(void 0);if(Y&&Y.has(M))return Y.get(M);var ee={},ue=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var le in M)if(le!=="default"&&Object.prototype.hasOwnProperty.call(M,le)){var re=ue?Object.getOwnPropertyDescriptor(M,le):null;re&&(re.get||re.set)?Object.defineProperty(ee,le,re):ee[le]=M[le]}return ee.default=M,Y&&Y.set(M,ee),ee}(k());function u(M){if(typeof WeakMap!="function")return null;var B=new WeakMap,Y=new WeakMap;return(u=function(ee){return ee?Y:B})(M)}function f(){var M=new i.ARRAY_TYPE(3);return i.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0),M}function y(M){return Math.hypot(M[0],M[1],M[2])}function m(M,B,Y){return M[0]=B[0]-Y[0],M[1]=B[1]-Y[1],M[2]=B[2]-Y[2],M}function _(M,B,Y){return M[0]=B[0]*Y[0],M[1]=B[1]*Y[1],M[2]=B[2]*Y[2],M}function b(M,B,Y){return M[0]=B[0]/Y[0],M[1]=B[1]/Y[1],M[2]=B[2]/Y[2],M}function N(M,B){return Math.hypot(B[0]-M[0],B[1]-M[1],B[2]-M[2])}function D(M,B){var Y=B[0]-M[0],ee=B[1]-M[1],ue=B[2]-M[2];return Y*Y+ee*ee+ue*ue}function S(M){var B=M[0],Y=M[1],ee=M[2];return B*B+Y*Y+ee*ee}function V(M,B){return M[0]*B[0]+M[1]*B[1]+M[2]*B[2]}ie.sub=m,ie.mul=_,ie.div=b,ie.dist=N,ie.sqrDist=D,ie.len=y,ie.sqrLen=S;var I,O=(I=f(),function(M,B,Y,ee,ue,le){var re,pe;for(B||(B=3),Y||(Y=0),pe=ee?Math.min(ee*B+Y,M.length):M.length,re=Y;re<pe;re+=B)I[0]=M[re],I[1]=M[re+1],I[2]=M[re+2],ue(I,I,le),M[re]=I[0],M[re+1]=I[1],M[re+2]=I[2];return M});return ie.forEach=O,ie}var Me,Ve,Ie={};function Ue(){if(Me)return Ie;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}Me=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.create=f,Ie.clone=function(O){var M=new i.ARRAY_TYPE(4);return M[0]=O[0],M[1]=O[1],M[2]=O[2],M[3]=O[3],M},Ie.fromValues=function(O,M,B,Y){var ee=new i.ARRAY_TYPE(4);return ee[0]=O,ee[1]=M,ee[2]=B,ee[3]=Y,ee},Ie.copy=function(O,M){return O[0]=M[0],O[1]=M[1],O[2]=M[2],O[3]=M[3],O},Ie.set=function(O,M,B,Y,ee){return O[0]=M,O[1]=B,O[2]=Y,O[3]=ee,O},Ie.add=function(O,M,B){return O[0]=M[0]+B[0],O[1]=M[1]+B[1],O[2]=M[2]+B[2],O[3]=M[3]+B[3],O},Ie.subtract=y,Ie.multiply=m,Ie.divide=_,Ie.ceil=function(O,M){return O[0]=Math.ceil(M[0]),O[1]=Math.ceil(M[1]),O[2]=Math.ceil(M[2]),O[3]=Math.ceil(M[3]),O},Ie.floor=function(O,M){return O[0]=Math.floor(M[0]),O[1]=Math.floor(M[1]),O[2]=Math.floor(M[2]),O[3]=Math.floor(M[3]),O},Ie.min=function(O,M,B){return O[0]=Math.min(M[0],B[0]),O[1]=Math.min(M[1],B[1]),O[2]=Math.min(M[2],B[2]),O[3]=Math.min(M[3],B[3]),O},Ie.max=function(O,M,B){return O[0]=Math.max(M[0],B[0]),O[1]=Math.max(M[1],B[1]),O[2]=Math.max(M[2],B[2]),O[3]=Math.max(M[3],B[3]),O},Ie.round=function(O,M){return O[0]=Math.round(M[0]),O[1]=Math.round(M[1]),O[2]=Math.round(M[2]),O[3]=Math.round(M[3]),O},Ie.scale=function(O,M,B){return O[0]=M[0]*B,O[1]=M[1]*B,O[2]=M[2]*B,O[3]=M[3]*B,O},Ie.scaleAndAdd=function(O,M,B,Y){return O[0]=M[0]+B[0]*Y,O[1]=M[1]+B[1]*Y,O[2]=M[2]+B[2]*Y,O[3]=M[3]+B[3]*Y,O},Ie.distance=b,Ie.squaredDistance=N,Ie.length=D,Ie.squaredLength=S,Ie.negate=function(O,M){return O[0]=-M[0],O[1]=-M[1],O[2]=-M[2],O[3]=-M[3],O},Ie.inverse=function(O,M){return O[0]=1/M[0],O[1]=1/M[1],O[2]=1/M[2],O[3]=1/M[3],O},Ie.normalize=function(O,M){var B=M[0],Y=M[1],ee=M[2],ue=M[3],le=B*B+Y*Y+ee*ee+ue*ue;return le>0&&(le=1/Math.sqrt(le)),O[0]=B*le,O[1]=Y*le,O[2]=ee*le,O[3]=ue*le,O},Ie.dot=function(O,M){return O[0]*M[0]+O[1]*M[1]+O[2]*M[2]+O[3]*M[3]},Ie.cross=function(O,M,B,Y){var ee=B[0]*Y[1]-B[1]*Y[0],ue=B[0]*Y[2]-B[2]*Y[0],le=B[0]*Y[3]-B[3]*Y[0],re=B[1]*Y[2]-B[2]*Y[1],pe=B[1]*Y[3]-B[3]*Y[1],Se=B[2]*Y[3]-B[3]*Y[2],xe=M[0],Ke=M[1],Ze=M[2],He=M[3];return O[0]=Ke*Se-Ze*pe+He*re,O[1]=-xe*Se+Ze*le-He*ue,O[2]=xe*pe-Ke*le+He*ee,O[3]=-xe*re+Ke*ue-Ze*ee,O},Ie.lerp=function(O,M,B,Y){var ee=M[0],ue=M[1],le=M[2],re=M[3];return O[0]=ee+Y*(B[0]-ee),O[1]=ue+Y*(B[1]-ue),O[2]=le+Y*(B[2]-le),O[3]=re+Y*(B[3]-re),O},Ie.random=function(O,M){var B,Y,ee,ue,le,re;M=M||1;do le=(B=2*i.RANDOM()-1)*B+(Y=2*i.RANDOM()-1)*Y;while(le>=1);do re=(ee=2*i.RANDOM()-1)*ee+(ue=2*i.RANDOM()-1)*ue;while(re>=1);var pe=Math.sqrt((1-le)/re);return O[0]=M*B,O[1]=M*Y,O[2]=M*ee*pe,O[3]=M*ue*pe,O},Ie.transformMat4=function(O,M,B){var Y=M[0],ee=M[1],ue=M[2],le=M[3];return O[0]=B[0]*Y+B[4]*ee+B[8]*ue+B[12]*le,O[1]=B[1]*Y+B[5]*ee+B[9]*ue+B[13]*le,O[2]=B[2]*Y+B[6]*ee+B[10]*ue+B[14]*le,O[3]=B[3]*Y+B[7]*ee+B[11]*ue+B[15]*le,O},Ie.transformQuat=function(O,M,B){var Y=M[0],ee=M[1],ue=M[2],le=B[0],re=B[1],pe=B[2],Se=B[3],xe=Se*Y+re*ue-pe*ee,Ke=Se*ee+pe*Y-le*ue,Ze=Se*ue+le*ee-re*Y,He=-le*Y-re*ee-pe*ue;return O[0]=xe*Se+He*-le+Ke*-pe-Ze*-re,O[1]=Ke*Se+He*-re+Ze*-le-xe*-pe,O[2]=Ze*Se+He*-pe+xe*-re-Ke*-le,O[3]=M[3],O},Ie.zero=function(O){return O[0]=0,O[1]=0,O[2]=0,O[3]=0,O},Ie.str=function(O){return"vec4("+O[0]+", "+O[1]+", "+O[2]+", "+O[3]+")"},Ie.exactEquals=function(O,M){return O[0]===M[0]&&O[1]===M[1]&&O[2]===M[2]&&O[3]===M[3]},Ie.equals=function(O,M){var B=O[0],Y=O[1],ee=O[2],ue=O[3],le=M[0],re=M[1],pe=M[2],Se=M[3];return Math.abs(B-le)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(le))&&Math.abs(Y-re)<=i.EPSILON*Math.max(1,Math.abs(Y),Math.abs(re))&&Math.abs(ee-pe)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(pe))&&Math.abs(ue-Se)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(Se))},Ie.forEach=Ie.sqrLen=Ie.len=Ie.sqrDist=Ie.dist=Ie.div=Ie.mul=Ie.sub=void 0;var i=function(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=u(void 0);if(B&&B.has(O))return B.get(O);var Y={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(Y,ue,le):Y[ue]=O[ue]}return Y.default=O,B&&B.set(O,Y),Y}(k());function u(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(Y){return Y?B:M})(O)}function f(){var O=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0,O[2]=0,O[3]=0),O}function y(O,M,B){return O[0]=M[0]-B[0],O[1]=M[1]-B[1],O[2]=M[2]-B[2],O[3]=M[3]-B[3],O}function m(O,M,B){return O[0]=M[0]*B[0],O[1]=M[1]*B[1],O[2]=M[2]*B[2],O[3]=M[3]*B[3],O}function _(O,M,B){return O[0]=M[0]/B[0],O[1]=M[1]/B[1],O[2]=M[2]/B[2],O[3]=M[3]/B[3],O}function b(O,M){return Math.hypot(M[0]-O[0],M[1]-O[1],M[2]-O[2],M[3]-O[3])}function N(O,M){var B=M[0]-O[0],Y=M[1]-O[1],ee=M[2]-O[2],ue=M[3]-O[3];return B*B+Y*Y+ee*ee+ue*ue}function D(O){return Math.hypot(O[0],O[1],O[2],O[3])}function S(O){var M=O[0],B=O[1],Y=O[2],ee=O[3];return M*M+B*B+Y*Y+ee*ee}Ie.sub=y,Ie.mul=m,Ie.div=_,Ie.dist=b,Ie.sqrDist=N,Ie.len=D,Ie.sqrLen=S;var V,I=(V=f(),function(O,M,B,Y,ee,ue){var le,re;for(M||(M=4),B||(B=0),re=Y?Math.min(Y*M+B,O.length):O.length,le=B;le<re;le+=M)V[0]=O[le],V[1]=O[le+1],V[2]=O[le+2],V[3]=O[le+3],ee(V,V,ue),O[le]=V[0],O[le+1]=V[1],O[le+2]=V[2],O[le+3]=V[3];return O});return Ie.forEach=I,Ie}function Be(){if(Ve)return Oe;function d(Ye){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gt){return typeof gt}:function(gt){return gt&&typeof Symbol=="function"&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt},d(Ye)}Ve=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.create=b,Oe.identity=function(Ye){return Ye[0]=0,Ye[1]=0,Ye[2]=0,Ye[3]=1,Ye},Oe.setAxisAngle=N,Oe.getAxisAngle=function(Ye,gt){var bt=2*Math.acos(gt[3]),Rt=Math.sin(bt/2);return Rt>i.EPSILON?(Ye[0]=gt[0]/Rt,Ye[1]=gt[1]/Rt,Ye[2]=gt[2]/Rt):(Ye[0]=1,Ye[1]=0,Ye[2]=0),bt},Oe.getAngle=function(Ye,gt){var bt=B(Ye,gt);return Math.acos(2*bt*bt-1)},Oe.multiply=D,Oe.rotateX=function(Ye,gt,bt){bt*=.5;var Rt=gt[0],Vt=gt[1],Et=gt[2],Ut=gt[3],Dt=Math.sin(bt),jt=Math.cos(bt);return Ye[0]=Rt*jt+Ut*Dt,Ye[1]=Vt*jt+Et*Dt,Ye[2]=Et*jt-Vt*Dt,Ye[3]=Ut*jt-Rt*Dt,Ye},Oe.rotateY=function(Ye,gt,bt){bt*=.5;var Rt=gt[0],Vt=gt[1],Et=gt[2],Ut=gt[3],Dt=Math.sin(bt),jt=Math.cos(bt);return Ye[0]=Rt*jt-Et*Dt,Ye[1]=Vt*jt+Ut*Dt,Ye[2]=Et*jt+Rt*Dt,Ye[3]=Ut*jt-Vt*Dt,Ye},Oe.rotateZ=function(Ye,gt,bt){bt*=.5;var Rt=gt[0],Vt=gt[1],Et=gt[2],Ut=gt[3],Dt=Math.sin(bt),jt=Math.cos(bt);return Ye[0]=Rt*jt+Vt*Dt,Ye[1]=Vt*jt-Rt*Dt,Ye[2]=Et*jt+Ut*Dt,Ye[3]=Ut*jt-Et*Dt,Ye},Oe.calculateW=function(Ye,gt){var bt=gt[0],Rt=gt[1],Vt=gt[2];return Ye[0]=bt,Ye[1]=Rt,Ye[2]=Vt,Ye[3]=Math.sqrt(Math.abs(1-bt*bt-Rt*Rt-Vt*Vt)),Ye},Oe.exp=S,Oe.ln=V,Oe.pow=function(Ye,gt,bt){return V(Ye,gt),M(Ye,Ye,bt),S(Ye,Ye),Ye},Oe.slerp=I,Oe.random=function(Ye){var gt=i.RANDOM(),bt=i.RANDOM(),Rt=i.RANDOM(),Vt=Math.sqrt(1-gt),Et=Math.sqrt(gt);return Ye[0]=Vt*Math.sin(2*Math.PI*bt),Ye[1]=Vt*Math.cos(2*Math.PI*bt),Ye[2]=Et*Math.sin(2*Math.PI*Rt),Ye[3]=Et*Math.cos(2*Math.PI*Rt),Ye},Oe.invert=function(Ye,gt){var bt=gt[0],Rt=gt[1],Vt=gt[2],Et=gt[3],Ut=bt*bt+Rt*Rt+Vt*Vt+Et*Et,Dt=Ut?1/Ut:0;return Ye[0]=-bt*Dt,Ye[1]=-Rt*Dt,Ye[2]=-Vt*Dt,Ye[3]=Et*Dt,Ye},Oe.conjugate=function(Ye,gt){return Ye[0]=-gt[0],Ye[1]=-gt[1],Ye[2]=-gt[2],Ye[3]=gt[3],Ye},Oe.fromMat3=O,Oe.fromEuler=function(Ye,gt,bt,Rt){var Vt=.5*Math.PI/180;gt*=Vt,bt*=Vt,Rt*=Vt;var Et=Math.sin(gt),Ut=Math.cos(gt),Dt=Math.sin(bt),jt=Math.cos(bt),ga=Math.sin(Rt),ma=Math.cos(Rt);return Ye[0]=Et*jt*ma-Ut*Dt*ga,Ye[1]=Ut*Dt*ma+Et*jt*ga,Ye[2]=Ut*jt*ga-Et*Dt*ma,Ye[3]=Ut*jt*ma+Et*Dt*ga,Ye},Oe.str=function(Ye){return"quat("+Ye[0]+", "+Ye[1]+", "+Ye[2]+", "+Ye[3]+")"},Oe.setAxes=Oe.sqlerp=Oe.rotationTo=Oe.equals=Oe.exactEquals=Oe.normalize=Oe.sqrLen=Oe.squaredLength=Oe.len=Oe.length=Oe.lerp=Oe.dot=Oe.scale=Oe.mul=Oe.add=Oe.set=Oe.copy=Oe.fromValues=Oe.clone=void 0;var i=_(k()),u=_(fe()),f=_(we()),y=_(Ue());function m(Ye){if(typeof WeakMap!="function")return null;var gt=new WeakMap,bt=new WeakMap;return(m=function(Rt){return Rt?bt:gt})(Ye)}function _(Ye,gt){if(Ye&&Ye.__esModule)return Ye;if(Ye===null||d(Ye)!=="object"&&typeof Ye!="function")return{default:Ye};var bt=m(gt);if(bt&&bt.has(Ye))return bt.get(Ye);var Rt={},Vt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Et in Ye)if(Et!=="default"&&Object.prototype.hasOwnProperty.call(Ye,Et)){var Ut=Vt?Object.getOwnPropertyDescriptor(Ye,Et):null;Ut&&(Ut.get||Ut.set)?Object.defineProperty(Rt,Et,Ut):Rt[Et]=Ye[Et]}return Rt.default=Ye,bt&&bt.set(Ye,Rt),Rt}function b(){var Ye=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(Ye[0]=0,Ye[1]=0,Ye[2]=0),Ye[3]=1,Ye}function N(Ye,gt,bt){bt*=.5;var Rt=Math.sin(bt);return Ye[0]=Rt*gt[0],Ye[1]=Rt*gt[1],Ye[2]=Rt*gt[2],Ye[3]=Math.cos(bt),Ye}function D(Ye,gt,bt){var Rt=gt[0],Vt=gt[1],Et=gt[2],Ut=gt[3],Dt=bt[0],jt=bt[1],ga=bt[2],ma=bt[3];return Ye[0]=Rt*ma+Ut*Dt+Vt*ga-Et*jt,Ye[1]=Vt*ma+Ut*jt+Et*Dt-Rt*ga,Ye[2]=Et*ma+Ut*ga+Rt*jt-Vt*Dt,Ye[3]=Ut*ma-Rt*Dt-Vt*jt-Et*ga,Ye}function S(Ye,gt){var bt=gt[0],Rt=gt[1],Vt=gt[2],Et=gt[3],Ut=Math.sqrt(bt*bt+Rt*Rt+Vt*Vt),Dt=Math.exp(Et),jt=Ut>0?Dt*Math.sin(Ut)/Ut:0;return Ye[0]=bt*jt,Ye[1]=Rt*jt,Ye[2]=Vt*jt,Ye[3]=Dt*Math.cos(Ut),Ye}function V(Ye,gt){var bt=gt[0],Rt=gt[1],Vt=gt[2],Et=gt[3],Ut=Math.sqrt(bt*bt+Rt*Rt+Vt*Vt),Dt=Ut>0?Math.atan2(Ut,Et)/Ut:0;return Ye[0]=bt*Dt,Ye[1]=Rt*Dt,Ye[2]=Vt*Dt,Ye[3]=.5*Math.log(bt*bt+Rt*Rt+Vt*Vt+Et*Et),Ye}function I(Ye,gt,bt,Rt){var Vt,Et,Ut,Dt,jt,ga=gt[0],ma=gt[1],Ya=gt[2],xa=gt[3],Oa=bt[0],_a=bt[1],gr=bt[2],$a=bt[3];return(Et=ga*Oa+ma*_a+Ya*gr+xa*$a)<0&&(Et=-Et,Oa=-Oa,_a=-_a,gr=-gr,$a=-$a),1-Et>i.EPSILON?(Vt=Math.acos(Et),Ut=Math.sin(Vt),Dt=Math.sin((1-Rt)*Vt)/Ut,jt=Math.sin(Rt*Vt)/Ut):(Dt=1-Rt,jt=Rt),Ye[0]=Dt*ga+jt*Oa,Ye[1]=Dt*ma+jt*_a,Ye[2]=Dt*Ya+jt*gr,Ye[3]=Dt*xa+jt*$a,Ye}function O(Ye,gt){var bt,Rt=gt[0]+gt[4]+gt[8];if(Rt>0)bt=Math.sqrt(Rt+1),Ye[3]=.5*bt,Ye[0]=(gt[5]-gt[7])*(bt=.5/bt),Ye[1]=(gt[6]-gt[2])*bt,Ye[2]=(gt[1]-gt[3])*bt;else{var Vt=0;gt[4]>gt[0]&&(Vt=1),gt[8]>gt[3*Vt+Vt]&&(Vt=2);var Et=(Vt+1)%3,Ut=(Vt+2)%3;bt=Math.sqrt(gt[3*Vt+Vt]-gt[3*Et+Et]-gt[3*Ut+Ut]+1),Ye[Vt]=.5*bt,Ye[3]=(gt[3*Et+Ut]-gt[3*Ut+Et])*(bt=.5/bt),Ye[Et]=(gt[3*Et+Vt]+gt[3*Vt+Et])*bt,Ye[Ut]=(gt[3*Ut+Vt]+gt[3*Vt+Ut])*bt}return Ye}Oe.clone=y.clone,Oe.fromValues=y.fromValues,Oe.copy=y.copy,Oe.set=y.set,Oe.add=y.add,Oe.mul=D;var M=y.scale;Oe.scale=M;var B=y.dot;Oe.dot=B,Oe.lerp=y.lerp;var Y=y.length;Oe.length=Y,Oe.len=Y;var ee=y.squaredLength;Oe.squaredLength=ee,Oe.sqrLen=ee;var ue=y.normalize;Oe.normalize=ue,Oe.exactEquals=y.exactEquals,Oe.equals=y.equals;var le,re,pe,Se=(le=f.create(),re=f.fromValues(1,0,0),pe=f.fromValues(0,1,0),function(Ye,gt,bt){var Rt=f.dot(gt,bt);return Rt<-.999999?(f.cross(le,re,gt),f.len(le)<1e-6&&f.cross(le,pe,gt),f.normalize(le,le),N(Ye,le,Math.PI),Ye):Rt>.999999?(Ye[0]=0,Ye[1]=0,Ye[2]=0,Ye[3]=1,Ye):(f.cross(le,gt,bt),Ye[0]=le[0],Ye[1]=le[1],Ye[2]=le[2],Ye[3]=1+Rt,ue(Ye,Ye))});Oe.rotationTo=Se;var xe,Ke,Ze=(xe=b(),Ke=b(),function(Ye,gt,bt,Rt,Vt,Et){return I(xe,gt,Vt,Et),I(Ke,bt,Rt,Et),I(Ye,xe,Ke,2*Et*(1-Et)),Ye});Oe.sqlerp=Ze;var He,ft=(He=u.create(),function(Ye,gt,bt,Rt){return He[0]=bt[0],He[3]=bt[1],He[6]=bt[2],He[1]=Rt[0],He[4]=Rt[1],He[7]=Rt[2],He[2]=-gt[0],He[5]=-gt[1],He[8]=-gt[2],ue(Ye,O(Ye,He))});return Oe.setAxes=ft,Oe}var ke,Je={};function Le(){if(ke)return Je;function d(I){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},d(I)}ke=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.create=function(){var I=new i.ARRAY_TYPE(8);return i.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[4]=0,I[5]=0,I[6]=0,I[7]=0),I[3]=1,I},Je.clone=function(I){var O=new i.ARRAY_TYPE(8);return O[0]=I[0],O[1]=I[1],O[2]=I[2],O[3]=I[3],O[4]=I[4],O[5]=I[5],O[6]=I[6],O[7]=I[7],O},Je.fromValues=function(I,O,M,B,Y,ee,ue,le){var re=new i.ARRAY_TYPE(8);return re[0]=I,re[1]=O,re[2]=M,re[3]=B,re[4]=Y,re[5]=ee,re[6]=ue,re[7]=le,re},Je.fromRotationTranslationValues=function(I,O,M,B,Y,ee,ue){var le=new i.ARRAY_TYPE(8);le[0]=I,le[1]=O,le[2]=M,le[3]=B;var re=.5*Y,pe=.5*ee,Se=.5*ue;return le[4]=re*B+pe*M-Se*O,le[5]=pe*B+Se*I-re*M,le[6]=Se*B+re*O-pe*I,le[7]=-re*I-pe*O-Se*M,le},Je.fromRotationTranslation=_,Je.fromTranslation=function(I,O){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=.5*O[0],I[5]=.5*O[1],I[6]=.5*O[2],I[7]=0,I},Je.fromRotation=function(I,O){return I[0]=O[0],I[1]=O[1],I[2]=O[2],I[3]=O[3],I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},Je.fromMat4=function(I,O){var M=u.create();f.getRotation(M,O);var B=new i.ARRAY_TYPE(3);return f.getTranslation(B,O),_(I,M,B),I},Je.copy=b,Je.identity=function(I){return I[0]=0,I[1]=0,I[2]=0,I[3]=1,I[4]=0,I[5]=0,I[6]=0,I[7]=0,I},Je.set=function(I,O,M,B,Y,ee,ue,le,re){return I[0]=O,I[1]=M,I[2]=B,I[3]=Y,I[4]=ee,I[5]=ue,I[6]=le,I[7]=re,I},Je.getDual=function(I,O){return I[0]=O[4],I[1]=O[5],I[2]=O[6],I[3]=O[7],I},Je.setDual=function(I,O){return I[4]=O[0],I[5]=O[1],I[6]=O[2],I[7]=O[3],I},Je.getTranslation=function(I,O){var M=O[4],B=O[5],Y=O[6],ee=O[7],ue=-O[0],le=-O[1],re=-O[2],pe=O[3];return I[0]=2*(M*pe+ee*ue+B*re-Y*le),I[1]=2*(B*pe+ee*le+Y*ue-M*re),I[2]=2*(Y*pe+ee*re+M*le-B*ue),I},Je.translate=function(I,O,M){var B=O[0],Y=O[1],ee=O[2],ue=O[3],le=.5*M[0],re=.5*M[1],pe=.5*M[2],Se=O[4],xe=O[5],Ke=O[6],Ze=O[7];return I[0]=B,I[1]=Y,I[2]=ee,I[3]=ue,I[4]=ue*le+Y*pe-ee*re+Se,I[5]=ue*re+ee*le-B*pe+xe,I[6]=ue*pe+B*re-Y*le+Ke,I[7]=-B*le-Y*re-ee*pe+Ze,I},Je.rotateX=function(I,O,M){var B=-O[0],Y=-O[1],ee=-O[2],ue=O[3],le=O[4],re=O[5],pe=O[6],Se=O[7],xe=le*ue+Se*B+re*ee-pe*Y,Ke=re*ue+Se*Y+pe*B-le*ee,Ze=pe*ue+Se*ee+le*Y-re*B,He=Se*ue-le*B-re*Y-pe*ee;return u.rotateX(I,O,M),I[4]=xe*(ue=I[3])+He*(B=I[0])+Ke*(ee=I[2])-Ze*(Y=I[1]),I[5]=Ke*ue+He*Y+Ze*B-xe*ee,I[6]=Ze*ue+He*ee+xe*Y-Ke*B,I[7]=He*ue-xe*B-Ke*Y-Ze*ee,I},Je.rotateY=function(I,O,M){var B=-O[0],Y=-O[1],ee=-O[2],ue=O[3],le=O[4],re=O[5],pe=O[6],Se=O[7],xe=le*ue+Se*B+re*ee-pe*Y,Ke=re*ue+Se*Y+pe*B-le*ee,Ze=pe*ue+Se*ee+le*Y-re*B,He=Se*ue-le*B-re*Y-pe*ee;return u.rotateY(I,O,M),I[4]=xe*(ue=I[3])+He*(B=I[0])+Ke*(ee=I[2])-Ze*(Y=I[1]),I[5]=Ke*ue+He*Y+Ze*B-xe*ee,I[6]=Ze*ue+He*ee+xe*Y-Ke*B,I[7]=He*ue-xe*B-Ke*Y-Ze*ee,I},Je.rotateZ=function(I,O,M){var B=-O[0],Y=-O[1],ee=-O[2],ue=O[3],le=O[4],re=O[5],pe=O[6],Se=O[7],xe=le*ue+Se*B+re*ee-pe*Y,Ke=re*ue+Se*Y+pe*B-le*ee,Ze=pe*ue+Se*ee+le*Y-re*B,He=Se*ue-le*B-re*Y-pe*ee;return u.rotateZ(I,O,M),I[4]=xe*(ue=I[3])+He*(B=I[0])+Ke*(ee=I[2])-Ze*(Y=I[1]),I[5]=Ke*ue+He*Y+Ze*B-xe*ee,I[6]=Ze*ue+He*ee+xe*Y-Ke*B,I[7]=He*ue-xe*B-Ke*Y-Ze*ee,I},Je.rotateByQuatAppend=function(I,O,M){var B=M[0],Y=M[1],ee=M[2],ue=M[3],le=O[0],re=O[1],pe=O[2],Se=O[3];return I[0]=le*ue+Se*B+re*ee-pe*Y,I[1]=re*ue+Se*Y+pe*B-le*ee,I[2]=pe*ue+Se*ee+le*Y-re*B,I[3]=Se*ue-le*B-re*Y-pe*ee,I[4]=(le=O[4])*ue+(Se=O[7])*B+(re=O[5])*ee-(pe=O[6])*Y,I[5]=re*ue+Se*Y+pe*B-le*ee,I[6]=pe*ue+Se*ee+le*Y-re*B,I[7]=Se*ue-le*B-re*Y-pe*ee,I},Je.rotateByQuatPrepend=function(I,O,M){var B=O[0],Y=O[1],ee=O[2],ue=O[3],le=M[0],re=M[1],pe=M[2],Se=M[3];return I[0]=B*Se+ue*le+Y*pe-ee*re,I[1]=Y*Se+ue*re+ee*le-B*pe,I[2]=ee*Se+ue*pe+B*re-Y*le,I[3]=ue*Se-B*le-Y*re-ee*pe,I[4]=B*(Se=M[7])+ue*(le=M[4])+Y*(pe=M[6])-ee*(re=M[5]),I[5]=Y*Se+ue*re+ee*le-B*pe,I[6]=ee*Se+ue*pe+B*re-Y*le,I[7]=ue*Se-B*le-Y*re-ee*pe,I},Je.rotateAroundAxis=function(I,O,M,B){if(Math.abs(B)<i.EPSILON)return b(I,O);var Y=Math.hypot(M[0],M[1],M[2]);B*=.5;var ee=Math.sin(B),ue=ee*M[0]/Y,le=ee*M[1]/Y,re=ee*M[2]/Y,pe=Math.cos(B),Se=O[0],xe=O[1],Ke=O[2],Ze=O[3];I[0]=Se*pe+Ze*ue+xe*re-Ke*le,I[1]=xe*pe+Ze*le+Ke*ue-Se*re,I[2]=Ke*pe+Ze*re+Se*le-xe*ue,I[3]=Ze*pe-Se*ue-xe*le-Ke*re;var He=O[4],ft=O[5],Ye=O[6],gt=O[7];return I[4]=He*pe+gt*ue+ft*re-Ye*le,I[5]=ft*pe+gt*le+Ye*ue-He*re,I[6]=Ye*pe+gt*re+He*le-ft*ue,I[7]=gt*pe-He*ue-ft*le-Ye*re,I},Je.add=function(I,O,M){return I[0]=O[0]+M[0],I[1]=O[1]+M[1],I[2]=O[2]+M[2],I[3]=O[3]+M[3],I[4]=O[4]+M[4],I[5]=O[5]+M[5],I[6]=O[6]+M[6],I[7]=O[7]+M[7],I},Je.multiply=N,Je.scale=function(I,O,M){return I[0]=O[0]*M,I[1]=O[1]*M,I[2]=O[2]*M,I[3]=O[3]*M,I[4]=O[4]*M,I[5]=O[5]*M,I[6]=O[6]*M,I[7]=O[7]*M,I},Je.lerp=function(I,O,M,B){var Y=1-B;return D(O,M)<0&&(B=-B),I[0]=O[0]*Y+M[0]*B,I[1]=O[1]*Y+M[1]*B,I[2]=O[2]*Y+M[2]*B,I[3]=O[3]*Y+M[3]*B,I[4]=O[4]*Y+M[4]*B,I[5]=O[5]*Y+M[5]*B,I[6]=O[6]*Y+M[6]*B,I[7]=O[7]*Y+M[7]*B,I},Je.invert=function(I,O){var M=V(O);return I[0]=-O[0]/M,I[1]=-O[1]/M,I[2]=-O[2]/M,I[3]=O[3]/M,I[4]=-O[4]/M,I[5]=-O[5]/M,I[6]=-O[6]/M,I[7]=O[7]/M,I},Je.conjugate=function(I,O){return I[0]=-O[0],I[1]=-O[1],I[2]=-O[2],I[3]=O[3],I[4]=-O[4],I[5]=-O[5],I[6]=-O[6],I[7]=O[7],I},Je.normalize=function(I,O){var M=V(O);if(M>0){M=Math.sqrt(M);var B=O[0]/M,Y=O[1]/M,ee=O[2]/M,ue=O[3]/M,le=O[4],re=O[5],pe=O[6],Se=O[7],xe=B*le+Y*re+ee*pe+ue*Se;I[0]=B,I[1]=Y,I[2]=ee,I[3]=ue,I[4]=(le-B*xe)/M,I[5]=(re-Y*xe)/M,I[6]=(pe-ee*xe)/M,I[7]=(Se-ue*xe)/M}return I},Je.str=function(I){return"quat2("+I[0]+", "+I[1]+", "+I[2]+", "+I[3]+", "+I[4]+", "+I[5]+", "+I[6]+", "+I[7]+")"},Je.exactEquals=function(I,O){return I[0]===O[0]&&I[1]===O[1]&&I[2]===O[2]&&I[3]===O[3]&&I[4]===O[4]&&I[5]===O[5]&&I[6]===O[6]&&I[7]===O[7]},Je.equals=function(I,O){var M=I[0],B=I[1],Y=I[2],ee=I[3],ue=I[4],le=I[5],re=I[6],pe=I[7],Se=O[0],xe=O[1],Ke=O[2],Ze=O[3],He=O[4],ft=O[5],Ye=O[6],gt=O[7];return Math.abs(M-Se)<=i.EPSILON*Math.max(1,Math.abs(M),Math.abs(Se))&&Math.abs(B-xe)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(xe))&&Math.abs(Y-Ke)<=i.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ke))&&Math.abs(ee-Ze)<=i.EPSILON*Math.max(1,Math.abs(ee),Math.abs(Ze))&&Math.abs(ue-He)<=i.EPSILON*Math.max(1,Math.abs(ue),Math.abs(He))&&Math.abs(le-ft)<=i.EPSILON*Math.max(1,Math.abs(le),Math.abs(ft))&&Math.abs(re-Ye)<=i.EPSILON*Math.max(1,Math.abs(re),Math.abs(Ye))&&Math.abs(pe-gt)<=i.EPSILON*Math.max(1,Math.abs(pe),Math.abs(gt))},Je.sqrLen=Je.squaredLength=Je.len=Je.length=Je.dot=Je.mul=Je.setReal=Je.getReal=void 0;var i=m(k()),u=m(Be()),f=m(Ae());function y(I){if(typeof WeakMap!="function")return null;var O=new WeakMap,M=new WeakMap;return(y=function(B){return B?M:O})(I)}function m(I,O){if(I&&I.__esModule)return I;if(I===null||d(I)!=="object"&&typeof I!="function")return{default:I};var M=y(O);if(M&&M.has(I))return M.get(I);var B={},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ee in I)if(ee!=="default"&&Object.prototype.hasOwnProperty.call(I,ee)){var ue=Y?Object.getOwnPropertyDescriptor(I,ee):null;ue&&(ue.get||ue.set)?Object.defineProperty(B,ee,ue):B[ee]=I[ee]}return B.default=I,M&&M.set(I,B),B}function _(I,O,M){var B=.5*M[0],Y=.5*M[1],ee=.5*M[2],ue=O[0],le=O[1],re=O[2],pe=O[3];return I[0]=ue,I[1]=le,I[2]=re,I[3]=pe,I[4]=B*pe+Y*re-ee*le,I[5]=Y*pe+ee*ue-B*re,I[6]=ee*pe+B*le-Y*ue,I[7]=-B*ue-Y*le-ee*re,I}function b(I,O){return I[0]=O[0],I[1]=O[1],I[2]=O[2],I[3]=O[3],I[4]=O[4],I[5]=O[5],I[6]=O[6],I[7]=O[7],I}function N(I,O,M){var B=O[0],Y=O[1],ee=O[2],ue=O[3],le=M[4],re=M[5],pe=M[6],Se=M[7],xe=O[4],Ke=O[5],Ze=O[6],He=O[7],ft=M[0],Ye=M[1],gt=M[2],bt=M[3];return I[0]=B*bt+ue*ft+Y*gt-ee*Ye,I[1]=Y*bt+ue*Ye+ee*ft-B*gt,I[2]=ee*bt+ue*gt+B*Ye-Y*ft,I[3]=ue*bt-B*ft-Y*Ye-ee*gt,I[4]=B*Se+ue*le+Y*pe-ee*re+xe*bt+He*ft+Ke*gt-Ze*Ye,I[5]=Y*Se+ue*re+ee*le-B*pe+Ke*bt+He*Ye+Ze*ft-xe*gt,I[6]=ee*Se+ue*pe+B*re-Y*le+Ze*bt+He*gt+xe*Ye-Ke*ft,I[7]=ue*Se-B*le-Y*re-ee*pe+He*bt-xe*ft-Ke*Ye-Ze*gt,I}Je.getReal=u.copy,Je.setReal=u.copy,Je.mul=N;var D=u.dot;Je.dot=D;var S=u.length;Je.length=S,Je.len=S;var V=u.squaredLength;return Je.squaredLength=V,Je.sqrLen=V,Je}var qe,ye,ze={};function We(){if(qe)return ze;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}qe=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.create=f,ze.clone=function(O){var M=new i.ARRAY_TYPE(2);return M[0]=O[0],M[1]=O[1],M},ze.fromValues=function(O,M){var B=new i.ARRAY_TYPE(2);return B[0]=O,B[1]=M,B},ze.copy=function(O,M){return O[0]=M[0],O[1]=M[1],O},ze.set=function(O,M,B){return O[0]=M,O[1]=B,O},ze.add=function(O,M,B){return O[0]=M[0]+B[0],O[1]=M[1]+B[1],O},ze.subtract=y,ze.multiply=m,ze.divide=_,ze.ceil=function(O,M){return O[0]=Math.ceil(M[0]),O[1]=Math.ceil(M[1]),O},ze.floor=function(O,M){return O[0]=Math.floor(M[0]),O[1]=Math.floor(M[1]),O},ze.min=function(O,M,B){return O[0]=Math.min(M[0],B[0]),O[1]=Math.min(M[1],B[1]),O},ze.max=function(O,M,B){return O[0]=Math.max(M[0],B[0]),O[1]=Math.max(M[1],B[1]),O},ze.round=function(O,M){return O[0]=Math.round(M[0]),O[1]=Math.round(M[1]),O},ze.scale=function(O,M,B){return O[0]=M[0]*B,O[1]=M[1]*B,O},ze.scaleAndAdd=function(O,M,B,Y){return O[0]=M[0]+B[0]*Y,O[1]=M[1]+B[1]*Y,O},ze.distance=b,ze.squaredDistance=N,ze.length=D,ze.squaredLength=S,ze.negate=function(O,M){return O[0]=-M[0],O[1]=-M[1],O},ze.inverse=function(O,M){return O[0]=1/M[0],O[1]=1/M[1],O},ze.normalize=function(O,M){var B=M[0],Y=M[1],ee=B*B+Y*Y;return ee>0&&(ee=1/Math.sqrt(ee)),O[0]=M[0]*ee,O[1]=M[1]*ee,O},ze.dot=function(O,M){return O[0]*M[0]+O[1]*M[1]},ze.cross=function(O,M,B){var Y=M[0]*B[1]-M[1]*B[0];return O[0]=O[1]=0,O[2]=Y,O},ze.lerp=function(O,M,B,Y){var ee=M[0],ue=M[1];return O[0]=ee+Y*(B[0]-ee),O[1]=ue+Y*(B[1]-ue),O},ze.random=function(O,M){M=M||1;var B=2*i.RANDOM()*Math.PI;return O[0]=Math.cos(B)*M,O[1]=Math.sin(B)*M,O},ze.transformMat2=function(O,M,B){var Y=M[0],ee=M[1];return O[0]=B[0]*Y+B[2]*ee,O[1]=B[1]*Y+B[3]*ee,O},ze.transformMat2d=function(O,M,B){var Y=M[0],ee=M[1];return O[0]=B[0]*Y+B[2]*ee+B[4],O[1]=B[1]*Y+B[3]*ee+B[5],O},ze.transformMat3=function(O,M,B){var Y=M[0],ee=M[1];return O[0]=B[0]*Y+B[3]*ee+B[6],O[1]=B[1]*Y+B[4]*ee+B[7],O},ze.transformMat4=function(O,M,B){var Y=M[0],ee=M[1];return O[0]=B[0]*Y+B[4]*ee+B[12],O[1]=B[1]*Y+B[5]*ee+B[13],O},ze.rotate=function(O,M,B,Y){var ee=M[0]-B[0],ue=M[1]-B[1],le=Math.sin(Y),re=Math.cos(Y);return O[0]=ee*re-ue*le+B[0],O[1]=ee*le+ue*re+B[1],O},ze.angle=function(O,M){var B=O[0],Y=O[1],ee=M[0],ue=M[1],le=Math.sqrt(B*B+Y*Y)*Math.sqrt(ee*ee+ue*ue);return Math.acos(Math.min(Math.max(le&&(B*ee+Y*ue)/le,-1),1))},ze.zero=function(O){return O[0]=0,O[1]=0,O},ze.str=function(O){return"vec2("+O[0]+", "+O[1]+")"},ze.exactEquals=function(O,M){return O[0]===M[0]&&O[1]===M[1]},ze.equals=function(O,M){var B=O[0],Y=O[1],ee=M[0],ue=M[1];return Math.abs(B-ee)<=i.EPSILON*Math.max(1,Math.abs(B),Math.abs(ee))&&Math.abs(Y-ue)<=i.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ue))},ze.forEach=ze.sqrLen=ze.sqrDist=ze.dist=ze.div=ze.mul=ze.sub=ze.len=void 0;var i=function(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=u(void 0);if(B&&B.has(O))return B.get(O);var Y={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(Y,ue,le):Y[ue]=O[ue]}return Y.default=O,B&&B.set(O,Y),Y}(k());function u(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(u=function(Y){return Y?B:M})(O)}function f(){var O=new i.ARRAY_TYPE(2);return i.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0),O}function y(O,M,B){return O[0]=M[0]-B[0],O[1]=M[1]-B[1],O}function m(O,M,B){return O[0]=M[0]*B[0],O[1]=M[1]*B[1],O}function _(O,M,B){return O[0]=M[0]/B[0],O[1]=M[1]/B[1],O}function b(O,M){return Math.hypot(M[0]-O[0],M[1]-O[1])}function N(O,M){var B=M[0]-O[0],Y=M[1]-O[1];return B*B+Y*Y}function D(O){return Math.hypot(O[0],O[1])}function S(O){var M=O[0],B=O[1];return M*M+B*B}ze.len=D,ze.sub=y,ze.mul=m,ze.div=_,ze.dist=b,ze.sqrDist=N,ze.sqrLen=S;var V,I=(V=f(),function(O,M,B,Y,ee,ue){var le,re;for(M||(M=2),B||(B=0),re=Y?Math.min(Y*M+B,O.length):O.length,le=B;le<re;le+=M)V[0]=O[le],V[1]=O[le+1],ee(V,V,ue),O[le]=V[0],O[le+1]=V[1];return O});return ze.forEach=I,ze}function lt(){if(ye)return E;function d(O){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},d(O)}ye=1,Object.defineProperty(E,"__esModule",{value:!0}),E.vec4=E.vec3=E.vec2=E.quat2=E.quat=E.mat4=E.mat3=E.mat2d=E.mat2=E.glMatrix=void 0;var i=I(k());E.glMatrix=i;var u=I(H());E.mat2=u;var f=I(ne());E.mat2d=f;var y=I(fe());E.mat3=y;var m=I(Ae());E.mat4=m;var _=I(Be());E.quat=_;var b=I(Le());E.quat2=b;var N=I(We());E.vec2=N;var D=I(we());E.vec3=D;var S=I(Ue());function V(O){if(typeof WeakMap!="function")return null;var M=new WeakMap,B=new WeakMap;return(V=function(Y){return Y?B:M})(O)}function I(O,M){if(O&&O.__esModule)return O;if(O===null||d(O)!=="object"&&typeof O!="function")return{default:O};var B=V(M);if(B&&B.has(O))return B.get(O);var Y={},ee=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ue in O)if(ue!=="default"&&Object.prototype.hasOwnProperty.call(O,ue)){var le=ee?Object.getOwnPropertyDescriptor(O,ue):null;le&&(le.get||le.set)?Object.defineProperty(Y,ue,le):Y[ue]=O[ue]}return Y.default=O,B&&B.set(O,Y),Y}return E.vec4=S,E}var vt,Ot,dt,pt,ve=lt(),ea=function(){if(Ot)return vt;function d(i,u,f,y){this.cx=3*i,this.bx=3*(f-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(y-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=u,this.p2x=f,this.p2y=y}return Ot=1,vt=d,d.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,u){if(u===void 0&&(u=1e-6),i<0)return 0;if(i>1)return 1;for(var f=i,y=0;y<8;y++){var m=this.sampleCurveX(f)-i;if(Math.abs(m)<u)return f;var _=this.sampleCurveDerivativeX(f);if(Math.abs(_)<1e-6)break;f-=m/_}var b=0,N=1;for(f=i,y=0;y<20&&(m=this.sampleCurveX(f),!(Math.abs(m-i)<u));y++)i>m?b=f:N=f,f=.5*(N-b)+b;return f},solve:function(i,u){return this.sampleCurveY(this.solveCurveX(i,u))}},vt}(),Kt=w(ea);function Ea(){if(pt)return dt;function d(i,u){this.x=i,this.y=u}return pt=1,dt=d,d.prototype={clone:function(){return new d(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,u){return this.clone()._rotateAround(i,u)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var u=i.x-this.x,f=i.y-this.y;return u*u+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,u){return Math.atan2(this.x*u-this.y*i,this.x*i+this.y*u)},_matMult:function(i){var u=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=u,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var u=Math.cos(i),f=Math.sin(i),y=f*this.x+u*this.y;return this.x=u*this.x-f*this.y,this.y=y,this},_rotateAround:function(i,u){var f=Math.cos(i),y=Math.sin(i),m=u.y+y*(this.x-u.x)+f*(this.y-u.y);return this.x=u.x+f*(this.x-u.x)-y*(this.y-u.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(i){return i instanceof d?i:Array.isArray(i)?new d(i[0],i[1]):i},dt}var Bt=w(Ea());function la(d,i){if(Array.isArray(d)){if(!Array.isArray(i)||d.length!==i.length)return!1;for(let u=0;u<d.length;u++)if(!la(d[u],i[u]))return!1;return!0}if(typeof d=="object"&&d!==null&&i!==null){if(typeof i!="object"||Object.keys(d).length!==Object.keys(i).length)return!1;for(const u in d)if(!la(d[u],i[u]))return!1;return!0}return d===i}const St=Math.PI/180,vr=180/Math.PI;function Va(d){return d*St}function za(d){return d*vr}const nr=[[0,0],[1,0],[1,1],[0,1]];function cr(d){if(d<=0)return 0;if(d>=1)return 1;const i=d*d,u=i*d;return 4*(d<.5?u:3*(d-i)+u-.75)}function ur(d,i,u,f){const y=new Kt(d,i,u,f);return function(m){return y.solve(m)}}const Pr=ur(.25,.1,.25,1);function ka(d,i,u){return Math.min(u,Math.max(i,d))}function jr(d,i,u){return(u=ka((u-d)/(i-d),0,1))*u*(3-2*u)}function pn(d,i,u){const f=u-i,y=((d-i)%f+f)%f+i;return y===i?u:y}function Dn(d,i,u){if(!d.length)return u(null,[]);let f=d.length;const y=new Array(d.length);let m=null;d.forEach((_,b)=>{i(_,(N,D)=>{N&&(m=N),y[b]=D,--f==0&&u(m,y)})})}function Rn(d,...i){for(const u of i)for(const f in u)d[f]=u[f];return d}let va=1;function Wa(){return va++}function ca(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))}function Qa(d,i){d.forEach(u=>{i[u]&&(i[u]=i[u].bind(i))})}function yr(d,i,u){const f={};for(const y in d)f[y]=i.call(this,d[y],y,d);return f}function jn(d,i,u){const f={};for(const y in d)i.call(this,d[y],y,d)&&(f[y]=d[y]);return f}function Mn(d){return Array.isArray(d)?d.map(Mn):typeof d=="object"&&d?yr(d,Mn):d}const mn={};function en(d){mn[d]||(typeof console<"u"&&console.warn(d),mn[d]=!0)}function Er(d,i,u){return(u.y-d.y)*(i.x-d.x)>(i.y-d.y)*(u.x-d.x)}function As(d){let i=0;for(let u,f,y=0,m=d.length,_=m-1;y<m;_=y++)u=d[y],f=d[_],i+=(f.x-u.x)*(u.y+f.y);return i}function ki([d,i,u]){const f=Va(i+90),y=Va(u);return{x:d*Math.cos(f)*Math.sin(y),y:d*Math.sin(f)*Math.sin(y),z:d*Math.cos(y),azimuthal:i,polar:u}}function Ji(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function zo(d){const i={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,y,m)=>{const _=y||m;return i[f]=!_||_.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i}let Ei=null;function hn(d,i){return[d[4*i],d[4*i+1],d[4*i+2],d[4*i+3]]}function ui(d,i,u,f){for(;i<u;){const y=i+u>>1;d[y]<f?i=y+1:u=y}return i}function Ec(d,i,u,f){for(;i<u;){const y=i+u>>1;d[y]<=f?i=y+1:u=y}return i}function Fs(d){return d>0?1/(1.001-d):1+d}function Xt(d){return d>0?1-1/(1.001-d):-d}const be={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!be.API_URL)return null;try{const d=new URL(be.API_URL);return d.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":d.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function De(d){return be.API_URL_REGEX.test(d)}function at(d){return be.API_SPRITE_REGEX.test(d)}let At,mt,Ct,kt,Pt,qt;function Ht(){return At==null&&(At=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),At}const Zt={now:()=>kt!==void 0?kt:performance.now(),setNow(d){kt=d},restoreNow(){kt=void 0},frame(d){const i=requestAnimationFrame(d);return{cancel:()=>cancelAnimationFrame(i)}},getImageData(d,i=0){const{width:u,height:f}=d;Pt||(Pt=document.createElement("canvas"));const y=Pt.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return(u>Pt.width||f>Pt.height)&&(Pt.width=u,Pt.height=f),y.clearRect(-i,-i,u+2*i,f+2*i),y.drawImage(d,0,0,u,f),y.getImageData(-i,-i,u+2*i,f+2*i)},resolveURL:d=>(mt||(mt=document.createElement("a")),mt.href=d,mt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(Ct==null&&(Ct=window.matchMedia("(prefers-reduced-motion: reduce)")),Ct.matches)},hasCanvasFingerprintNoise(){if(qt!==void 0)return qt;if(!Ht())return qt=!1,!1;const d=new OffscreenCanvas(85,1),i=d.getContext("2d",{willReadFrequently:!0});let u=0;for(let y=0;y<d.width;++y)i.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,i.fillRect(y,0,1,1);const f=i.getImageData(0,0,d.width,d.height);u=0;for(let y=0;y<f.data.length;++y)if(y%4!=3&&u++!==f.data[y])return qt=!0,!0;return qt=!1,!1}};function Ra(d,i){const u=d.indexOf("?");if(u<0)return`${d}?${new URLSearchParams(i).toString()}`;const f=new URLSearchParams(d.slice(u));for(const y in i)f.set(y,i[y]);return`${d.slice(0,u)}?${f.toString()}`}function Ma(d,i={persistentParams:[]}){const u=d.indexOf("?");if(u<0)return d;const f=new URLSearchParams,y=new URLSearchParams(d.slice(u));for(const _ of i.persistentParams){const b=y.get(_);b&&f.set(_,b)}const m=f.toString();return`${d.slice(0,u)}${m.length>0?`?${m}`:""}`}const Ba="mapbox-tiles";let Ar=500,Nr=50;const Vr=["language","worldview","jobid"];let Gr,zn;function Xn(){try{return caches}catch{}}function qr(){const d=Xn();d&&Gr==null&&(Gr=d.open(Ba))}let yn=1/0;const Hr={supported:!1,testSupport:function(d){!Bi&&Ni&&(_s?Oo(d):In=d)}};let In,Ni,Bi=!1,_s=!1;const vs=typeof self<"u"?self:{};function Oo(d){const i=d.createTexture();d.bindTexture(d.TEXTURE_2D,i);try{if(d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,Ni),d.isContextLost())return;Hr.supported=!0}catch{}d.deleteTexture(i),Bi=!0}vs.document&&(Ni=vs.document.createElement("img"),Ni.onload=function(){In&&Oo(In),In=null,_s=!0},Ni.onerror=function(){Bi=!0,In=null},Ni.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ws={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(ws);class Us extends Error{constructor(i,u,f){u===401&&De(f)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=u,this.url=f}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const nc=Ji()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Ko=function(d,i){if(!(/^file:/.test(u=d.url)||/^file:/.test(nc())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(f,y){const m=new AbortController,_=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:nc(),referrerPolicy:f.referrerPolicy,signal:m.signal});let b=!1,N=!1;const D=(S=_.url).indexOf("sku=")>0&&De(S);var S;f.type==="json"&&_.headers.set("Accept","application/json");const V=(O,M,B)=>{if(N)return;if(O&&O.message!=="SecurityError"&&en(O.toString()),M&&B)return I(M);const Y=Date.now();fetch(_).then(ee=>{if(ee.ok){const ue=D?ee.clone():null;return I(ee,ue,Y)}return y(new Us(ee.statusText,ee.status,f.url))}).catch(ee=>{ee.name!=="AbortError"&&y(new Error(`${ee.message} ${f.url}`))})},I=(O,M,B)=>{(f.type==="arrayBuffer"?O.arrayBuffer():f.type==="json"?O.json():O.text()).then(Y=>{N||(M&&B&&function(ee,ue,le){if(qr(),Gr==null)return;const re=zo(ue.headers.get("Cache-Control")||"");if(re["no-store"])return;const pe={status:ue.status,statusText:ue.statusText,headers:new Headers};ue.headers.forEach((Ke,Ze)=>pe.headers.set(Ze,Ke)),re["max-age"]&&pe.headers.set("Expires",new Date(le+1e3*re["max-age"]).toUTCString());const Se=pe.headers.get("Expires");if(!Se||new Date(Se).getTime()-le<42e4)return;let xe=Ma(ee.url,{persistentParams:Vr});if(ue.status===206){const Ke=ee.headers.get("Range");if(!Ke)return;pe.status=200,xe=Ra(xe,{range:Ke})}(function(Ke,Ze){if(zn===void 0)try{new Response(new ReadableStream),zn=!0}catch{zn=!1}zn?Ze(Ke.body):Ke.blob().then(Ze)})(ue,Ke=>{const Ze=new Response((He=ue.status)!==200&&He!==404&&[101,103,204,205,304].includes(He)?null:Ke,pe);var He;qr(),Gr!=null&&Gr.then(ft=>ft.put(xe,Ze)).catch(ft=>en(ft.message))})}(_,M,B),b=!0,y(null,Y,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(Y=>{N||y(new Error(Y.message))})};return D?function(O,M){if(qr(),Gr==null)return M(null);Gr.then(B=>{let Y=Ma(O.url,{persistentParams:Vr});const ee=O.headers.get("Range");ee&&(Y=Ra(Y,{range:ee})),B.match(Y).then(ue=>{const le=function(re){if(!re)return!1;const pe=new Date(re.headers.get("Expires")||0),Se=zo(re.headers.get("Cache-Control")||"");return pe>Date.now()&&!Se["no-cache"]}(ue);B.delete(Y),le&&B.put(Y,ue.clone()),M(null,ue,le)}).catch(M)}).catch(M)}(_,V):V(null,null),{cancel:()=>{N=!0,b||m.abort()}}}(d,i);if(Ji()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",d,i,void 0,!0)}var u;return function(f,y){const m=new XMLHttpRequest;m.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const _ in f.headers)m.setRequestHeader(_,f.headers[_]);return f.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=f.credentials==="include",m.onerror=()=>{y(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let _=m.response;if(f.type==="json")try{_=JSON.parse(m.response)}catch(b){return y(b)}y(null,_,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else y(new Us(m.statusText,m.status,f.url))},m.send(f.body),{cancel:()=>m.abort()}}(d,i)},Vi=function(d,i){return Ko(Rn(d,{type:"arrayBuffer"}),i)};function kl(d){const i=document.createElement("a");return i.href=d,i.protocol===location.protocol&&i.host===location.host}const Do="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let yd,Nc;yd=[],Nc=0;const Qd=function(d,i){if(Hr.supported&&(d.headers||(d.headers={}),d.headers.accept="image/webp,*/*"),Nc>=be.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:d,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return yd.push(m),m}Nc++;let u=!1;const f=()=>{if(!u)for(u=!0,Nc--;yd.length&&Nc<be.MAX_PARALLEL_IMAGE_REQUESTS;){const m=yd.shift(),{requestParameters:_,callback:b,cancelled:N}=m;N||(m.cancel=Qd(_,b).cancel)}},y=Vi(d,(m,_,b,N)=>{f(),m?i(m):_&&(self.createImageBitmap?function(D,S){const V=new Blob([new Uint8Array(D)],{type:"image/png"});createImageBitmap(V).then(I=>{S(null,I)}).catch(I=>{S(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(D,S)=>i(D,S,b,N)):function(D,S){const V=new Image;V.onload=()=>{S(null,V),URL.revokeObjectURL(V.src),V.onload=null,requestAnimationFrame(()=>{V.src=Do})},V.onerror=()=>S(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const I=new Blob([new Uint8Array(D)],{type:"image/png"});V.src=D.byteLength?URL.createObjectURL(I):Do}(_,(D,S)=>i(D,S,b,N)))});return{cancel:()=>{y.cancel(),f()}}};var uu,Vc,ul,Ys={exports:{}},Mo={exports:{}},Bl={exports:{}},cu=function(){if(ul)return Ys.exports;ul=1;var d=(uu||(uu=1,Mo.exports=function(u,f){var y,m,_,b,N,D,S,V;for(m=u.length-(y=3&u.length),_=f,N=3432918353,D=461845907,V=0;V<m;)S=255&u.charCodeAt(V)|(255&u.charCodeAt(++V))<<8|(255&u.charCodeAt(++V))<<16|(255&u.charCodeAt(++V))<<24,++V,_=27492+(65535&(b=5*(65535&(_=(_^=S=(65535&(S=(S=(65535&S)*N+(((S>>>16)*N&65535)<<16)&4294967295)<<15|S>>>17))*D+(((S>>>16)*D&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(S=0,y){case 3:S^=(255&u.charCodeAt(V+2))<<16;case 2:S^=(255&u.charCodeAt(V+1))<<8;case 1:_^=S=(65535&(S=(S=(65535&(S^=255&u.charCodeAt(V)))*N+(((S>>>16)*N&65535)<<16)&4294967295)<<15|S>>>17))*D+(((S>>>16)*D&65535)<<16)&4294967295}return _^=u.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Mo.exports),i=(Vc||(Vc=1,Bl.exports=function(u,f){for(var y,m=u.length,_=f^m,b=0;m>=4;)y=1540483477*(65535&(y=255&u.charCodeAt(b)|(255&u.charCodeAt(++b))<<8|(255&u.charCodeAt(++b))<<16|(255&u.charCodeAt(++b))<<24))+((1540483477*(y>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),m-=4,++b;switch(m){case 3:_^=(255&u.charCodeAt(b+2))<<16;case 2:_^=(255&u.charCodeAt(b+1))<<8;case 1:_=1540483477*(65535&(_^=255&u.charCodeAt(b)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Bl.exports);return Ys.exports=d,Ys.exports.murmur3=d,Ys.exports.murmur2=i,Ys.exports}(),oo=w(cu);class Io{constructor(i,...u){Rn(this,u[0]||{}),this.type=i}}class gd extends Io{constructor(i,u={}){super("error",Rn({error:i},u))}}function Fu(d,i,u){u[d]&&u[d].indexOf(i)!==-1||(u[d]=u[d]||[],u[d].push(i))}function cf(d,i,u){if(u&&u[d]){const f=u[d].indexOf(i);f!==-1&&u[d].splice(f,1)}}class Gl{on(i,u){return this._listeners=this._listeners||{},Fu(i,u,this._listeners),this}off(i,u){return cf(i,u,this._listeners),cf(i,u,this._oneTimeListeners),this}once(i,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},Fu(i,u,this._oneTimeListeners),this):new Promise(f=>{this.once(i,f)})}fire(i,u){const f=typeof i=="string"?new Io(i,u):i,y=f.type;if(this.listens(y)){f.target=this;const m=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const N of m)N.call(this,f);const _=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const N of _)cf(y,N,this._oneTimeListeners),N.call(this,f);const b=this._eventedParent;b&&(Rn(f,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(f))}else f instanceof gd&&console.error(f.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}class Lo{constructor(i){typeof i=="string"?this.name=i:(this.name=i.name,this.iconsetId=i.iconsetId)}static from(i){return new Lo(i)}static toString(i){return i.iconsetId?`${i.name}${i.iconsetId}`:i.name}static parse(i){const[u,f]=i.split("");return new Lo({name:u,iconsetId:f})}static isEqual(i,u){return i.name===u.name&&i.iconsetId===u.iconsetId}toString(){return Lo.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var Uu,eh={},Wo=function(){if(Uu)return eh;Uu=1;var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(m){return(m=Math.round(m))<0?0:m>255?255:m}function u(m){return i(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function f(m){return(_=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:_>1?1:_;var _}function y(m,_,b){return b<0?b+=1:b>1&&(b-=1),6*b<1?m+(_-m)*b*6:2*b<1?_:3*b<2?m+(_-m)*(2/3-b)*6:m}try{eh.parseCSSColor=function(m){var _,b=m.replace(/ /g,"").toLowerCase();if(b in d)return d[b].slice();if(b[0]==="#")return b.length===4?(_=parseInt(b.substr(1),16))>=0&&_<=4095?[(3840&_)>>4|(3840&_)>>8,240&_|(240&_)>>4,15&_|(15&_)<<4,1]:null:b.length===7&&(_=parseInt(b.substr(1),16))>=0&&_<=16777215?[(16711680&_)>>16,(65280&_)>>8,255&_,1]:null;var N=b.indexOf("("),D=b.indexOf(")");if(N!==-1&&D+1===b.length){var S=b.substr(0,N),V=b.substr(N+1,D-(N+1)).split(","),I=1;switch(S){case"rgba":if(V.length!==4)return null;I=f(V.pop());case"rgb":return V.length!==3?null:[u(V[0]),u(V[1]),u(V[2]),I];case"hsla":if(V.length!==4)return null;I=f(V.pop());case"hsl":if(V.length!==3)return null;var O=(parseFloat(V[0])%360+360)%360/360,M=f(V[1]),B=f(V[2]),Y=B<=.5?B*(M+1):B+M-B*M,ee=2*B-Y;return[i(255*y(ee,Y,O+1/3)),i(255*y(ee,Y,O)),i(255*y(ee,Y,O-1/3)),I];default:return null}}return null}}catch{}return eh}();class bn{constructor(i,u,f,y=1){this.r=i,this.g=u,this.b=f,this.a=y}static parse(i){if(!i)return;if(i instanceof bn)return i;if(typeof i!="string")return;const u=Wo.parseCSSColor(i);return u?new bn(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toStringPremultipliedAlpha(){const[i,u,f,y]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(i)},${Math.round(u)},${Math.round(f)},${y})`}toString(){const[i,u,f,y]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*i)},${Math.round(255*u)},${Math.round(255*f)},${y})`}toRenderColor(i){const{r:u,g:f,b:y,a:m}=this;return new lo(i,u,f,y,m)}clone(){return new bn(this.r,this.g,this.b,this.a)}}class lo{constructor(i,u,f,y,m){if(i){const _=i.image.height,b=_*_;u=m===0?0:u/m*(_-1),f=m===0?0:f/m*(_-1),y=m===0?0:y/m*(_-1);const N=Math.floor(u),D=Math.floor(f),S=Math.floor(y),V=Math.ceil(u),I=Math.ceil(f),O=Math.ceil(y),M=u-N,B=f-D,Y=y-S,ee=i.image.data,ue=4*(N+D*b+S*_),le=4*(N+D*b+O*_),re=4*(N+I*b+S*_),pe=4*(N+I*b+O*_),Se=4*(V+D*b+S*_),xe=4*(V+D*b+O*_),Ke=4*(V+I*b+S*_),Ze=4*(V+I*b+O*_);if(ue<0||Ze>=ee.length)throw new Error("out of range");this.r=hr(hr(hr(ee[ue],ee[le],Y),hr(ee[re],ee[pe],Y),B),hr(hr(ee[Se],ee[xe],Y),hr(ee[Ke],ee[Ze],Y),B),M)/255*m,this.g=hr(hr(hr(ee[ue+1],ee[le+1],Y),hr(ee[re+1],ee[pe+1],Y),B),hr(hr(ee[Se+1],ee[xe+1],Y),hr(ee[Ke+1],ee[Ze+1],Y),B),M)/255*m,this.b=hr(hr(hr(ee[ue+2],ee[le+2],Y),hr(ee[re+2],ee[pe+2],Y),B),hr(hr(ee[Se+2],ee[xe+2],Y),hr(ee[Ke+2],ee[Ze+2],Y),B),M)/255*m,this.a=m}else this.r=u,this.g=f,this.b=y,this.a=m}toArray(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[255*i/y,255*u/y,255*f/y,y]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:i,g:u,b:f,a:y}=this,m=Math.min(Math.max(i/y,0),1),_=Math.min(Math.max(u/y,0),1),b=Math.min(Math.max(f/y,0),1),N=Math.min(m,_,b),D=Math.max(m,_,b),S=(N+D)/2;if(N===D)return[0,0,100*S,y];const V=D-N,I=S>.5?V/(2-D-N):V/(D+N);let O=0;return D===m?O=(_-b)/V+(_<b?6:0):D===_?O=(b-m)/V+2:D===b&&(O=(m-_)/V+4),O*=60,[Math.min(Math.max(O,0),360),Math.min(Math.max(100*I,0),100),Math.min(Math.max(100*S,0),100),y]}toArray01(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[i/y,u/y,f/y,y]}toArray01Scaled(i){const{r:u,g:f,b:y,a:m}=this;return m===0?[0,0,0]:[u/m*i,f/m*i,y/m*i]}toArray01PremultipliedAlpha(){const{r:i,g:u,b:f,a:y}=this;return[i,u,f,y]}toArray01Linear(){const{r:i,g:u,b:f,a:y}=this;return y===0?[0,0,0,0]:[Math.pow(i/y,2.2),Math.pow(u/y,2.2),Math.pow(f/y,2.2),y]}}function hr(d,i,u){return d*(1-u)+i*u}function zc(d,i,u){return d.map((f,y)=>hr(f,i[y],u))}function gn(d){return d*d*d*d*d}bn.black=new bn(0,0,0,1),bn.white=new bn(1,1,1,1),bn.transparent=new bn(0,0,0,0),bn.red=new bn(1,0,0,1),bn.blue=new bn(0,0,1,1);var th=Object.freeze({__proto__:null,array:zc,color:function(d,i,u){return new bn(hr(d.r,i.r,u),hr(d.g,i.g,u),hr(d.b,i.b,u),hr(d.a,i.a,u))},easeIn:gn,number:hr});function Tn(d,...i){for(const u of i)for(const f in u)d[f]=u[f];return d}class ks extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}class ic{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[f,y]of u)this.bindings[f]=y}concat(i){return new ic(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const sc={kind:"null"},Xa={kind:"number"},an={kind:"string"},An={kind:"boolean"},Bs={kind:"color"},Ad={kind:"object"},ln={kind:"value"},Fo={kind:"collator"},du={kind:"formatted"},Rs={kind:"resolvedImage"};function Li(d,i){return{kind:"array",itemType:d,N:i}}function Ci(d){if(d.kind==="array"){const i=Ci(d.itemType);return typeof d.N=="number"?`array<${i}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${i}>`}return d.kind}const uo=[sc,Xa,an,An,Bs,du,Ad,Li(ln),Rs];function _d(d,i){if(i.kind==="error")return null;if(d.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!_d(d.itemType,i.itemType))&&(typeof d.N!="number"||d.N===i.N))return null}else{if(d.kind===i.kind)return null;if(d.kind==="value"){for(const u of uo)if(!_d(u,i))return null}}return`Expected ${Ci(d)} but found ${Ci(i)} instead.`}function ah(d,i){return i.some(u=>u.kind===d.kind)}function oc(d,i){return i.some(u=>u==="null"?d===null:u==="array"?Array.isArray(d):u==="object"?d&&!Array.isArray(d)&&typeof d=="object":u===typeof d)}class lc{constructor(i,u,f){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Yo{constructor(i,u,f,y,m){this.text=i.normalize?i.normalize():i,this.image=u,this.scale=f,this.fontStack=y,this.textColor=m}}class us{constructor(i){this.sections=i}static fromString(i){return new us([new Yo(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||!!i.image&&i.image.hasPrimary())}static factory(i){return i instanceof us?i:us.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const u of this.sections){if(u.image){const y=u.image.getPrimary().id.toString();i.push(["image",y]);continue}i.push(u.text);const f={};u.fontStack&&(f["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(f["font-scale"]=u.scale),u.textColor&&(f["text-color"]=["rgba"].concat(u.textColor.toRenderColor(null).toArray())),i.push(f)}return i}}class ku{constructor(i,u={}){if(this.id=Lo.from(i),this.options=Object.assign({},u),u.transform){const{a:f,b:y,c:m,d:_,e:b,f:N}=u.transform;this.options.transform=new DOMMatrix([f,y,m,_,b,N])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:i,b:u,c:f,d:y,e:m,f:_}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:i,b:u,c:f,d:y,e:m,f:_}})}static parse(i){let u,f,y,m;try{({name:u,iconsetId:f,params:y,transform:m}=JSON.parse(i)||{})}catch{return null}if(!u)return null;const{a:_,b,c:N,d:D,e:S,f:V}=m||{};return new ku({name:u,iconsetId:f},{params:y,transform:new DOMMatrix([_,b,N,D,S,V])})}scaleSelf(i){return this.options.transform.scaleSelf(i),this}}class Ts{constructor(i,u,f,y,m=!1){this.primaryId=Lo.from(i),this.primaryOptions=u,f&&(this.secondaryId=Lo.from(f)),this.secondaryOptions=y,this.available=m}toString(){return this.primaryId&&this.secondaryId?`[${this.primaryId.name},${this.secondaryId.name}]`:this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new ku(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new ku(this.secondaryId,this.secondaryOptions):null}static from(i){return typeof i=="string"?Ts.build({name:i}):i}static build(i,u,f,y){return!i||typeof i=="object"&&!("name"in i)?null:new Ts(i,f,u,y)}}function Rl(d,i,u,f){return typeof d=="number"&&d>=0&&d<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[d,i,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[d,i,u,f]:[d,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Xo(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof bn||d instanceof lc||d instanceof us||d instanceof Ts)return!0;if(Array.isArray(d)){for(const i of d)if(!Xo(i))return!1;return!0}if(typeof d=="object"){for(const i in d)if(!Xo(d[i]))return!1;return!0}return!1}function Gi(d){if(d===null)return sc;if(typeof d=="string")return an;if(typeof d=="boolean")return An;if(typeof d=="number")return Xa;if(d instanceof bn)return Bs;if(d instanceof lc)return Fo;if(d instanceof us)return du;if(d instanceof Ts)return Rs;if(Array.isArray(d)){const i=d.length;let u;for(const f of d){const y=Gi(f);if(u){if(u===y)continue;u=ln;break}u=y}return Li(u||ln,i)}return Ad}function Gs(d){const i=typeof d;return d===null?"":i==="string"||i==="number"||i==="boolean"?String(d):d instanceof bn?d.toStringPremultipliedAlpha():d instanceof us||d instanceof Ts?d.toString():JSON.stringify(d)}class jl{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Xo(i[1]))return u.error("invalid value");const f=i[1];let y=Gi(f);const m=u.expectedType;return y.kind!=="array"||y.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(y=m),new jl(y,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof bn?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof us?this.value.serialize():this.value}}class rs{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const Nh={string:an,number:Xa,boolean:An,object:Ad};class Uo{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let f,y=1;const m=i[0];if(m==="array"){let b,N;if(i.length>2){const D=i[1];if(typeof D!="string"||!(D in Nh)||D==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);b=Nh[D],y++}else b=ln;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);N=i[2],y++}f=Li(b,N)}else f=Nh[m];const _=[];for(;y<i.length;y++){const b=u.parse(i[y],y,ln);if(!b)return null;_.push(b)}return new Uo(f,_)}evaluate(i){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(i);if(!_d(this.type,Gi(f)))return f;if(u===this.args.length-1)throw new rs(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${Ci(Gi(f))} but was expected to be of type ${Ci(this.type)}.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,u=[i.kind];if(i.kind==="array"){const f=i.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){u.push(f.kind);const y=i.N;(typeof y=="number"||this.args.length>1)&&u.push(y)}}return u.concat(this.args.map(f=>f.serialize()))}}class vd{constructor(i){this.type=du,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const f=i[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const y=[];let m=!1;for(let _=1;_<=i.length-1;++_){const b=i[_];if(m&&typeof b=="object"&&!Array.isArray(b)){m=!1;let N=null;if(b["font-scale"]&&(N=u.parseObjectValue(b["font-scale"],_,"font-scale",Xa),!N))return null;let D=null;if(b["text-font"]&&(D=u.parseObjectValue(b["text-font"],_,"text-font",Li(an)),!D))return null;let S=null;if(b["text-color"]&&(S=u.parseObjectValue(b["text-color"],_,"text-color",Bs),!S))return null;const V=y[y.length-1];V.scale=N,V.font=D,V.textColor=S}else{const N=u.parse(i[_],_,ln);if(!N)return null;const D=N.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,y.push({content:N,scale:null,font:null,textColor:null})}}return new vd(y)}evaluate(i){return new us(this.sections.map(u=>{const f=u.content.evaluate(i);return Gi(f)===Rs?new Yo("",f,null,null,null):new Yo(Gs(f),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const u of this.sections){i.push(u.content.serialize());const f={};u.scale&&(f["font-scale"]=u.scale.serialize()),u.font&&(f["text-font"]=u.font.serialize()),u.textColor&&(f["text-color"]=u.textColor.serialize()),i.push(f)}return i}}class hu{constructor(i,u,f,y){this._imageWarnHistory={},this.type=Rs,this.namePrimary=i,this.nameSecondary=u,f&&(this.paramsPrimary=f.params,this.iconsetIdPrimary=f.iconset?f.iconset.id:void 0),y&&(this.paramsSecondary=y.params,this.iconsetIdSecondary=y.iconset?y.iconset.id:void 0)}static parse(i,u){if(i.length<2)return u.error("Expected two or more arguments.");let f=1;const y=[];function m(){if(f<i.length){const b=u.parse(i[f],f++,an);return b?(y.push({image:b,options:{}}),!0):(u.error(y.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function _(){if(f<i.length){const N=i[f];if((b=N)===null||typeof b!="object"||Array.isArray(b))return!0;const D=N.params,S=N.iconset,V=u.concat(f);if(!D&&!S)return f++,!0;if(D){if(typeof D!="object"||D.constructor!==Object)return V.error('Image options "params" should be an object'),!1;const I={},O=V.concat(void 0,"params");for(const M in D){if(!M)return O.error("Image parameter name should be non-empty"),!1;const B=O.concat(void 0,M).parse(D[M],void 0,Bs,void 0,{typeAnnotation:"coerce"});if(!B)return!1;I[M]=B}y[y.length-1].options.params=I}if(S){if(typeof S!="object"||S.constructor!==Object)return V.error('Image options "iconset" should be an object'),!1;if(!S.id)return V.error('Image options "iconset" should have an "id" property'),!1;y[y.length-1].options.iconset=S}return f++,!0}var b;return!0}for(let b=0;b<2;b++)if(!m()||!_())return;return new hu(y[0].image,y[1]?y[1].image:void 0,y[0].options,y[1]?y[1].options:void 0)}evaluateParams(i,u){const f={};if(u){for(const y in u)if(u[y])try{f[y]=u[y].evaluate(i)}catch{continue}if(Object.keys(f).length!==0)return{params:f}}}evaluate(i){const u={name:this.namePrimary.evaluate(i),iconsetId:this.iconsetIdPrimary},f=this.nameSecondary?{name:this.nameSecondary.evaluate(i),iconsetId:this.iconsetIdSecondary}:void 0,y=Ts.build(u,f,this.paramsPrimary?this.evaluateParams(i,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(i,this.paramsSecondary):void 0);if(y&&i.availableImages){const m=y.getPrimary().id;if(y.available=i.availableImages.some(_=>Lo.isEqual(_,m)),y.available){const _=y.getSecondary()?y.getSecondary().id:null;_&&(y.available=i.availableImages.some(b=>Lo.isEqual(b,_)))}}return y}eachChild(i){if(i(this.namePrimary),this.paramsPrimary)for(const u in this.paramsPrimary)this.paramsPrimary[u]&&i(this.paramsPrimary[u]);if(this.nameSecondary&&(i(this.nameSecondary),this.paramsSecondary))for(const u in this.paramsSecondary)this.paramsSecondary[u]&&i(this.paramsSecondary[u])}outputDefined(){return!1}serializeOptions(i,u){const f={};if(u&&(f.iconset={id:u}),i){f.params={};for(const y in i)i[y]&&(f.params[y]=i[y].serialize())}return Object.keys(f).length>0?f:void 0}serialize(){const i=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const u=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);u&&i.push(u)}if(this.nameSecondary&&(i.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const u=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);u&&i.push(u)}return i}}function fu(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}const jf={"to-boolean":An,"to-color":Bs,"to-number":Xa,"to-string":an};class Zl{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const f=i[0],y=[];let m=sc;if(f==="to-array"){if(!Array.isArray(i[1]))return null;const _=i[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);m=Li(u.expectedType.itemType,_)}else{if(!(_>0&&Xo(i[1][0])))return null;m=Li(Gi(i[1][0]),_)}for(let b=0;b<_;b++){const N=i[1][b];let D;if(fu(N)==="array")D=u.parse(N,void 0,m.itemType);else{const S=fu(N);if(S!==m.itemType.kind)return u.error(`Expected ${m.itemType.kind} but found ${S}.`);D=u.registry.literal.parse(["literal",N===void 0?null:N],u)}if(!D)return null;y.push(D)}}else{if((f==="to-boolean"||f==="to-string")&&i.length!==2)return u.error("Expected one argument.");m=jf[f];for(let _=1;_<i.length;_++){const b=u.parse(i[_],_,ln);if(!b)return null;y.push(b)}}return new Zl(m,y)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let u,f;for(const y of this.args){if(u=y.evaluate(i),f=null,u instanceof bn)return u;if(typeof u=="string"){const m=i.parseColor(u);if(m)return m}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Rl(u[0],u[1],u[2],u[3]),!f))return new bn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new rs(f||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const f of this.args){if(u=f.evaluate(i),u===null)return 0;const y=Number(u);if(!isNaN(y))return y}throw new rs(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?us.fromString(Gs(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Ts.build(Gs(this.args[0].evaluate(i))):this.type.kind==="array"?this.args.map(u=>u.evaluate(i)):Gs(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new vd([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new hu(this.args[0]).serialize();const i=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{i.push(u.serialize())}),i}}const Om=["Unknown","Point","LineString","Polygon"];class wd{constructor(i,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=i,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Om[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(i){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:f,y}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(f*u-i[0])+this.featureDistanceData.bearing[1]*(y*u-i[1])}return 0}parseColor(i){let u=this._parseColorCache[i];return u||(u=this._parseColorCache[i]=bn.parse(i)),u}getConfig(i){return this.options?this.options.get(i):null}}class js{constructor(i,u,f,y,m){this.name=i,this.type=u,this._evaluate=f,this.args=y,this._overloadIndex=m}evaluate(i){if(!this._evaluate){const u=js.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,u){const f=i[0],y=js.definitions[f];if(!y)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(y)?y[0]:y.type,_=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,b=[];let N=null,D=-1;for(const[S,V]of _){if(Array.isArray(S)&&S.length!==i.length-1)continue;b.push(S),D++,N=new Wl(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const I=[];let O=!1;for(let M=1;M<i.length;M++){const B=i[M],Y=Array.isArray(S)?S[M-1]:S.type,ee=N.parse(B,1+I.length,Y);if(!ee){O=!0;break}I.push(ee)}if(!O)if(Array.isArray(S)&&S.length!==I.length)N.error(`Expected ${S.length} arguments, but found ${I.length} instead.`);else{for(let M=0;M<I.length;M++){const B=Array.isArray(S)?S[M]:S.type,Y=I[M];N.concat(M+1).checkSubtype(B,Y.type)}if(N.errors.length===0)return new js(f,m,V,I,D)}}if(b.length===1)u.errors.push(...N.errors);else{const S=(b.length?b:_.map(([I])=>I)).map(df).join(" | "),V=[];for(let I=1;I<i.length;I++){const O=u.parse(i[I],1+V.length);if(!O)return null;V.push(Ci(O.type))}u.error(`Expected arguments of type ${S}, but found (${V.join(", ")}) instead.`)}return null}static register(i,u){js.definitions=u;for(const f in u)i[f]=js}}function df(d){return Array.isArray(d)?`(${d.map(Ci).join(", ")})`:`(${Ci(d.type)}...)`}class ql{constructor(i,u,f){this.type=Fo,this.locale=f,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const f=i[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const y=f["case-sensitive"]===void 0?u.parse(!1,1,An):u.parseObjectValue(f["case-sensitive"],1,"case-sensitive",An);if(!y)return null;const m=f["diacritic-sensitive"]===void 0?u.parse(!1,1,An):u.parseObjectValue(f["diacritic-sensitive"],1,"diacritic-sensitive",An);if(!m)return null;let _=null;return f.locale&&(_=u.parseObjectValue(f.locale,1,"locale",an),!_)?null:new ql(y,m,_)}evaluate(i){return new lc(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}function hf(d,i,u=0,f=d.length-1,y=$e){for(;f>u;){if(f-u>600){const N=f-u+1,D=i-u+1,S=Math.log(N),V=.5*Math.exp(2*S/3),I=.5*Math.sqrt(S*V*(N-V)/N)*(D-N/2<0?-1:1);hf(d,i,Math.max(u,Math.floor(i-D*V/N+I)),Math.min(f,Math.floor(i+(N-D)*V/N+I)),y)}const m=d[i];let _=u,b=f;for(oe(d,u,i),y(d[f],m)>0&&oe(d,u,f);_<b;){for(oe(d,_,b),_++,b--;y(d[_],m)<0;)_++;for(;y(d[b],m)>0;)b--}y(d[u],m)===0?oe(d,u,b):(b++,oe(d,b,f)),b<=i&&(u=b+1),i<=b&&(f=b-1)}}function oe(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}function $e(d,i){return d<i?-1:d>i?1:0}function zt(d){let i=0;for(let u,f,y=0,m=d.length,_=m-1;y<m;_=y++)u=d[y],f=d[_],i+=(f.x-u.x)*(u.y+f.y);return i}function Wt(d,i){d[0]=Math.min(d[0],i[0]),d[1]=Math.min(d[1],i[1]),d[2]=Math.max(d[2],i[0]),d[3]=Math.max(d[3],i[1])}function ha(d,i){return!(d[0]<=i[0]||d[2]>=i[2]||d[1]<=i[1]||d[3]>=i[3])}function Da(d,i,u){const f=d[0]-i[0],y=d[1]-i[1],m=d[0]-u[0],_=d[1]-u[1];return f*_-m*y==0&&f*m<=0&&y*_<=0}function ar(d,i,u=!1){let f=!1;for(let b=0,N=i.length;b<N;b++){const D=i[b];for(let S=0,V=D.length,I=V-1;S<V;I=S++){const O=D[I],M=D[S];if(Da(d,O,M))return u;(m=O)[1]>(y=d)[1]!=(_=M)[1]>y[1]&&y[0]<(_[0]-m[0])*(y[1]-m[1])/(_[1]-m[1])+m[0]&&(f=!f)}}var y,m,_;return f}function wr(d,i,u,f){const y=f[0]-u[0],m=f[1]-u[1],_=(d[0]-u[0])*m-y*(d[1]-u[1]),b=(i[0]-u[0])*m-y*(i[1]-u[1]);return _>0&&b<0||_<0&&b>0}function $r(d,i,u,f){return(y=[f[0]-u[0],f[1]-u[1]])[0]*(m=[i[0]-d[0],i[1]-d[1]])[1]-y[1]*m[0]!=0&&!(!wr(d,i,u,f)||!wr(u,f,d,i));var y,m}const Sn=8192;function Nn(d,i){const u=(180+d[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,y=Math.pow(2,i.z);return[Math.round(u*y*Sn),Math.round(f*y*Sn)]}function pi(d,i){for(let u=0;u<i.length;u++)if(ar(d,i[u]))return!0;return!1}function Ss(d,i,u){for(const f of u)for(let y=0,m=f.length,_=m-1;y<m;_=y++)if($r(d,i,f[_],f[y]))return!0;return!1}function Cs(d,i){for(let u=0;u<d.length;++u)if(!ar(d[u],i))return!1;for(let u=0;u<d.length-1;++u)if(Ss(d[u],d[u+1],i))return!1;return!0}function Xs(d,i){for(let u=0;u<i.length;u++)if(Cs(d,i[u]))return!0;return!1}function Qi(d,i,u){const f=[];for(let y=0;y<d.length;y++){const m=[];for(let _=0;_<d[y].length;_++){const b=Nn(d[y][_],u);Wt(i,b),m.push(b)}f.push(m)}return f}function br(d,i,u){const f=[];for(let y=0;y<d.length;y++){const m=Qi(d[y],i,u);f.push(m)}return f}function ir(d,i,u,f){if(d[0]<u[0]||d[0]>u[2]){const y=.5*f;let m=d[0]-u[0]>y?-f:u[0]-d[0]>y?f:0;m===0&&(m=d[0]-u[2]>y?-f:u[2]-d[0]>y?f:0),d[0]+=m}Wt(i,d)}function cl(d,i,u,f){const y=Math.pow(2,f.z)*Sn,m=[f.x*Sn,f.y*Sn],_=[];if(!d)return _;for(const b of d)for(const N of b){const D=[N.x+m[0],N.y+m[1]];ir(D,i,u,y),_.push(D)}return _}function Rr(d,i,u,f){const y=Math.pow(2,f.z)*Sn,m=[f.x*Sn,f.y*Sn],_=[];if(!d)return _;for(const N of d){const D=[];for(const S of N){const V=[S.x+m[0],S.y+m[1]];Wt(i,V),D.push(V)}_.push(D)}if(i[2]-i[0]<=y/2){(b=i)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const N of _)for(const D of N)ir(D,i,u,y)}var b;return _}class pu{constructor(i,u){this.type=An,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Xo(i[1])){const f=i[1];if(f.type==="FeatureCollection")for(let y=0;y<f.features.length;++y){const m=f.features[y].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new pu(f,f.features[y].geometry)}else if(f.type==="Feature"){const y=f.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new pu(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new pu(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,f){const y=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=Qi(f.coordinates,m,_),N=cl(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!ar(D,b))return!1}if(f.type==="MultiPolygon"){const b=br(f.coordinates,m,_),N=cl(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!pi(D,b))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,f){const y=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],_=u.canonicalID();if(!_)return!1;if(f.type==="Polygon"){const b=Qi(f.coordinates,m,_),N=Rr(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!Cs(D,b))return!1}if(f.type==="MultiPolygon"){const b=br(f.coordinates,m,_),N=Rr(u.geometry(),y,m,_);if(!ha(y,m))return!1;for(const D of N)if(!Xs(D,b))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Hl={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},_r=1/298.257223563,rh=_r*(2-_r),$l=Math.PI/180;class uc{static fromTile(i,u,f){const y=Math.PI*(1-2*(i+.5)/Math.pow(2,u)),m=Math.atan(.5*(Math.exp(y)-Math.exp(-y)))/$l;return new uc(m,f)}static get units(){return Hl}constructor(i,u){if(i===void 0)throw new Error("No latitude given.");if(u&&!Hl[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(Hl).join(", ")}`);const f=6378.137*$l*(u?Hl[u]:1),y=Math.cos(i*$l),m=1/(1-rh*(1-y*y)),_=Math.sqrt(m);this.kx=f*_*y,this.ky=f*_*m*(1-rh)}distance(i,u){const f=gi(i[0]-u[0])*this.kx,y=(i[1]-u[1])*this.ky;return Math.sqrt(f*f+y*y)}bearing(i,u){const f=gi(u[0]-i[0])*this.kx;return Math.atan2(f,(u[1]-i[1])*this.ky)/$l}destination(i,u,f){const y=f*$l;return this.offset(i,Math.sin(y)*u,Math.cos(y)*u)}offset(i,u,f){return[i[0]+u/this.kx,i[1]+f/this.ky]}lineDistance(i){let u=0;for(let f=0;f<i.length-1;f++)u+=this.distance(i[f],i[f+1]);return u}area(i){let u=0;for(let f=0;f<i.length;f++){const y=i[f];for(let m=0,_=y.length,b=_-1;m<_;b=m++)u+=gi(y[m][0]-y[b][0])*(y[m][1]+y[b][1])*(f?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(i,u){let f=0;if(u<=0)return i[0];for(let y=0;y<i.length-1;y++){const m=i[y],_=i[y+1],b=this.distance(m,_);if(f+=b,f>u)return bs(m,_,(u-(f-b))/b)}return i[i.length-1]}pointToSegmentDistance(i,u,f){let[y,m]=u,_=gi(f[0]-y)*this.kx,b=(f[1]-m)*this.ky;if(_!==0||b!==0){const N=(gi(i[0]-y)*this.kx*_+(i[1]-m)*this.ky*b)/(_*_+b*b);N>1?(y=f[0],m=f[1]):N>0&&(y+=_/this.kx*N,m+=b/this.ky*N)}return _=gi(i[0]-y)*this.kx,b=(i[1]-m)*this.ky,Math.sqrt(_*_+b*b)}pointOnLine(i,u){let f=1/0,y=i[0][0],m=i[0][1],_=0,b=0;for(let N=0;N<i.length-1;N++){let D=i[N][0],S=i[N][1],V=gi(i[N+1][0]-D)*this.kx,I=(i[N+1][1]-S)*this.ky,O=0;V===0&&I===0||(O=(gi(u[0]-D)*this.kx*V+(u[1]-S)*this.ky*I)/(V*V+I*I),O>1?(D=i[N+1][0],S=i[N+1][1]):O>0&&(D+=V/this.kx*O,S+=I/this.ky*O)),V=gi(u[0]-D)*this.kx,I=(u[1]-S)*this.ky;const M=V*V+I*I;M<f&&(f=M,y=D,m=S,_=N,b=O)}return{point:[y,m],index:_,t:Math.max(0,Math.min(1,b))}}lineSlice(i,u,f){let y=this.pointOnLine(f,i),m=this.pointOnLine(f,u);if(y.index>m.index||y.index===m.index&&y.t>m.t){const D=y;y=m,m=D}const _=[y.point],b=y.index+1,N=m.index;!Rd(f[b],_[0])&&b<=N&&_.push(f[b]);for(let D=b+1;D<=N;D++)_.push(f[D]);return Rd(f[N],m.point)||_.push(m.point),_}lineSliceAlong(i,u,f){let y=0;const m=[];for(let _=0;_<f.length-1;_++){const b=f[_],N=f[_+1],D=this.distance(b,N);if(y+=D,y>i&&m.length===0&&m.push(bs(b,N,(i-(y-D))/D)),y>=u)return m.push(bs(b,N,(u-(y-D))/D)),m;y>i&&m.push(N)}return m}bufferPoint(i,u){const f=u/this.ky,y=u/this.kx;return[i[0]-y,i[1]-f,i[0]+y,i[1]+f]}bufferBBox(i,u){const f=u/this.ky,y=u/this.kx;return[i[0]-y,i[1]-f,i[2]+y,i[3]+f]}insideBBox(i,u){return gi(i[0]-u[0])>=0&&gi(i[0]-u[2])<=0&&i[1]>=u[1]&&i[1]<=u[3]}}function Rd(d,i){return d[0]===i[0]&&d[1]===i[1]}function bs(d,i,u){const f=gi(i[0]-d[0]);return[d[0]+f*u,d[1]+(i[1]-d[1])*u]}function gi(d){for(;d<-180;)d+=360;for(;d>180;)d-=360;return d}class cc{constructor(i=[],u=(f,y)=>f<y?-1:f>y?1:0){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:f}=this,y=u[i];for(;i>0;){const m=i-1>>1,_=u[m];if(f(y,_)>=0)break;u[i]=_,i=m}u[i]=y}_down(i){const{data:u,compare:f}=this,y=this.length>>1,m=u[i];for(;i<y;){let _=1+(i<<1);const b=_+1;if(b<this.length&&f(u[b],u[_])<0&&(_=b),f(u[_],m)>=0)break;u[i]=u[_],i=_}u[i]=m}}var Na=8192;function Td(d,i){return i.dist-d.dist}const Zs=100,co=50;function ff(d){const i=[1/0,1/0,-1/0,-1/0];if(i.length!==d.length)return!1;for(let u=0;u<i.length;u++)if(i[u]!==d[u])return!1;return!0}function Vh(d){return d[1]-d[0]+1}function ho(d,i){const u=d[1]>=d[0]&&d[1]<i;return u||console.warn("Distance Expression: Index is out of range"),u}function Os(d,i){if(d[0]>d[1])return[null,null];const u=Vh(d);if(i){if(u===2)return[d,null];const f=Math.floor(u/2);return[[d[0],d[0]+f],[d[0]+f,d[1]]]}{if(u===1)return[d,null];const f=Math.floor(u/2)-1;return[[d[0],d[0]+f],[d[0]+f+1,d[1]]]}}function Tl(d,i){const u=[1/0,1/0,-1/0,-1/0];if(!ho(i,d.length))return u;for(let f=i[0];f<=i[1];++f)Wt(u,d[f]);return u}function Oc(d){const i=[1/0,1/0,-1/0,-1/0];for(let u=0;u<d.length;++u)for(let f=0;f<d[u].length;++f)Wt(i,d[u][f]);return i}function Kl(d,i,u){if(ff(d)||ff(i))return NaN;let f=0,y=0;return d[2]<i[0]&&(f=i[0]-d[2]),d[0]>i[2]&&(f=d[0]-i[2]),d[1]>i[3]&&(y=d[1]-i[3]),d[3]<i[1]&&(y=i[1]-d[3]),u.distance([0,0],[f,y])}function nh(d){return 360*d-180}function Sl(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function Ro(d,i){const u=Math.pow(2,i.z),f=(d.y/Na+i.y)/u;return[nh((d.x/Na+i.x)/u),Sl(f)]}function Sd(d,i){const u=[];for(let f=0;f<d.length;++f)u.push(Ro(d[f],i));return u}function Dc(d,i,u){const f=u.pointOnLine(i,d).point;return u.distance(d,f)}function Cl(d,i,u,f,y){const m=u.slice(f[0],f[1]+1);let _=1/0;for(let b=i[0];b<=i[1];++b)if((_=Math.min(_,Dc(d[b],m,y)))===0)return 0;return _}function dc(d,i,u,f,y){const m=Math.min(y.pointToSegmentDistance(d,u,f),y.pointToSegmentDistance(i,u,f)),_=Math.min(y.pointToSegmentDistance(u,d,i),y.pointToSegmentDistance(f,d,i));return Math.min(m,_)}function mu(d,i,u,f,y){if(!ho(i,d.length)||!ho(f,u.length))return NaN;let m=1/0;for(let _=i[0];_<i[1];++_)for(let b=f[0];b<f[1];++b){if($r(d[_],d[_+1],u[b],u[b+1]))return 0;m=Math.min(m,dc(d[_],d[_+1],u[b],u[b+1],y))}return m}function ji(d,i,u,f,y){if(!ho(i,d.length)||!ho(f,u.length))return NaN;let m=1/0;for(let _=i[0];_<=i[1];++_)for(let b=f[0];b<=f[1];++b)if((m=Math.min(m,y.distance(d[_],u[b])))===0)return m;return m}function pf(d,i,u){if(ar(d,i,!0))return 0;let f=1/0;for(const y of i){const m=y.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(y[0]!==y[m-1]&&(f=Math.min(f,u.pointToSegmentDistance(d,y[m-1],y[0])))===0||(f=Math.min(f,Dc(d,y,u)))===0)return f}return f}function Js(d,i,u,f){if(!ho(i,d.length))return NaN;for(let m=i[0];m<=i[1];++m)if(ar(d[m],u,!0))return 0;let y=1/0;for(let m=i[0];m<i[1];++m)for(const _ of u)for(let b=0,N=_.length,D=N-1;b<N;D=b++){if($r(d[m],d[m+1],_[D],_[b]))return 0;y=Math.min(y,dc(d[m],d[m+1],_[D],_[b],f))}return y}function fo(d,i){for(const u of d)for(let f=0;f<=u.length-1;++f)if(ar(u[f],i,!0))return!0;return!1}function Cd(d,i,u,f=1/0){const y=Oc(d),m=Oc(i);if(f!==1/0&&Kl(y,m,u)>=f)return f;if(ha(y,m)){if(fo(d,i))return 0}else if(fo(i,d))return 0;let _=f;for(const b of d)for(let N=0,D=b.length,S=D-1;N<D;S=N++)for(const V of i)for(let I=0,O=V.length,M=O-1;I<O;M=I++){if($r(b[S],b[N],V[M],V[I]))return 0;_=Math.min(_,dc(b[S],b[N],V[M],V[I],u))}return _}function bd(d,i,u,f,y,m,_){if(m===null||_===null)return;const b=Kl(Tl(f,m),Tl(y,_),u);b<i&&d.push({dist:b,range1:m,range2:_})}function Qs(d,i,u,f,y=1/0){let m=Math.min(f.distance(d[0],u[0][0]),y);if(m===0)return m;const _=new cc([{dist:0,range1:[0,d.length-1],range2:[0,0]}],Td),b=i?co:Zs,N=Oc(u);for(;_.length;){const D=_.pop();if(D.dist>=m)continue;const S=D.range1;if(Vh(S)<=b){if(!ho(S,d.length))return NaN;if(i){const V=Js(d,S,u,f);if((m=Math.min(m,V))===0)return m}else for(let V=S[0];V<=S[1];++V){const I=pf(d[V],u,f);if((m=Math.min(m,I))===0)return m}}else{const V=Os(S,i);if(V[0]!==null){const I=Kl(Tl(d,V[0]),N,f);I<m&&_.push({dist:I,range1:V[0],range2:[0,0]})}if(V[1]!==null){const I=Kl(Tl(d,V[1]),N,f);I<m&&_.push({dist:I,range1:V[1],range2:[0,0]})}}}return m}function Mc(d,i,u,f,y,m=1/0){let _=Math.min(m,y.distance(d[0],u[0]));if(_===0)return _;const b=new cc([{dist:0,range1:[0,d.length-1],range2:[0,u.length-1]}],Td),N=i?co:Zs,D=f?co:Zs;for(;b.length;){const S=b.pop();if(S.dist>=_)continue;const V=S.range1,I=S.range2;if(Vh(V)<=N&&Vh(I)<=D){if(!ho(V,d.length)||!ho(I,u.length))return NaN;if(i&&f?_=Math.min(_,mu(d,V,u,I,y)):i||f?i&&!f?_=Math.min(_,Cl(u,I,d,V,y)):!i&&f&&(_=Math.min(_,Cl(d,V,u,I,y))):_=Math.min(_,ji(d,V,u,I,y)),_===0)return _}else{const O=Os(V,i),M=Os(I,f);bd(b,_,y,d,u,O[0],M[0]),bd(b,_,y,d,u,O[0],M[1]),bd(b,_,y,d,u,O[1],M[0]),bd(b,_,y,d,u,O[1],M[1])}}return _}function hc(d,i,u,f,y=1/0){let m=y;const _=Tl(d,[0,d.length-1]);for(const b of u)if(!(m!==1/0&&Kl(_,Tl(b,[0,b.length-1]),f)>=m)&&(m=Math.min(m,Mc(d,i,b,!0,f,m)),m===0))return m;return m}function yu(d,i,u,f,y=1/0){let m=y;const _=Tl(d,[0,d.length-1]);for(const b of u){if(m!==1/0&&Kl(_,Oc(b),f)>=m)continue;const N=Qs(d,i,b,f,m);if(isNaN(N))return N;if((m=Math.min(m,N))===0)return m}return m}function Ic(d){return d==="Point"||d==="MultiPoint"||d==="LineString"||d==="MultiLineString"||d==="Polygon"||d==="MultiPolygon"}class gu{constructor(i,u){this.type=Xa,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${i.length-1} instead.`);if(Xo(i[1])){const f=i[1];if(f.type==="FeatureCollection"){for(let y=0;y<f.features.length;++y)if(Ic(f.features[y].geometry.type))return new gu(f,f.features[y].geometry)}else if(f.type==="Feature"){if(Ic(f.geometry.type))return new gu(f,f.geometry)}else if(Ic(f.type))return new gu(f,f)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(i){const u=i.geometry(),f=i.canonicalID();if(u!=null&&f!=null){if(i.geometryType()==="Point")return function(y,m,_){const b=[];for(const D of y)for(const S of D)b.push(Ro(S,m));const N=new uc(b[0][1],"meters");return _.type==="Point"||_.type==="MultiPoint"||_.type==="LineString"?Mc(b,!1,_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",N):_.type==="MultiLineString"?hc(b,!1,_.coordinates,N):_.type==="Polygon"||_.type==="MultiPolygon"?yu(b,!1,_.type==="Polygon"?[_.coordinates]:_.coordinates,N):null}(u,f,this.geometries);if(i.geometryType()==="LineString")return function(y,m,_){const b=[];for(const D of y){const S=[];for(const V of D)S.push(Ro(V,m));b.push(S)}const N=new uc(b[0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return hc(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,N);if(_.type==="MultiLineString"){let D=1/0;for(let S=0;S<_.coordinates.length;S++){const V=hc(_.coordinates[S],!0,b,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}if(_.type==="Polygon"||_.type==="MultiPolygon"){let D=1/0;for(let S=0;S<b.length;S++){const V=yu(b[S],!0,_.type==="Polygon"?[_.coordinates]:_.coordinates,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return null}(u,f,this.geometries);if(i.geometryType()==="Polygon")return function(y,m,_){const b=[];for(const D of function(S,V){const I=S.length;if(I<=1)return[S];const O=[];let M,B;for(let Y=0;Y<I;Y++){const ee=zt(S[Y]);ee!==0&&(S[Y].area=Math.abs(ee),B===void 0&&(B=ee<0),B===ee<0?(M&&O.push(M),M=[S[Y]]):M.push(S[Y]))}return M&&O.push(M),O}(y)){const S=[];for(let V=0;V<D.length;++V)S.push(Sd(D[V],m));b.push(S)}const N=new uc(b[0][0][0][1],"meters");if(_.type==="Point"||_.type==="MultiPoint"||_.type==="LineString")return yu(_.type==="Point"?[_.coordinates]:_.coordinates,_.type==="LineString",b,N);if(_.type==="MultiLineString"){let D=1/0;for(let S=0;S<_.coordinates.length;S++){const V=yu(_.coordinates[S],!0,b,N,D);if(isNaN(V))return V;if((D=Math.min(D,V))===0)return D}return D}return _.type==="Polygon"||_.type==="MultiPolygon"?function(D,S,V){let I=1/0;for(const O of D)for(const M of S){const B=Cd(O,M,V,I);if(isNaN(B))return B;if((I=Math.min(I,B))===0)return I}return I}(_.type==="Polygon"?[_.coordinates]:_.coordinates,b,N):null}(u,f,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Lc(d,i){switch(d){case"string":return Gs(i);case"number":return+i;case"boolean":return!!i;case"color":return bn.parse(i);case"formatted":return us.fromString(Gs(i));case"resolvedImage":return Ts.build(Gs(i))}return i}function fc(d,i,u,f){return f!==void 0&&(d=f*Math.round(d/f)),i!==void 0&&d<i&&(d=i),u!==void 0&&d>u&&(d=u),d}class Bu{constructor(i,u,f){this.type=i,this.key=u,this.scope=f}static parse(i,u){let f=u.expectedType;if(f==null&&(f=ln),i.length<2||i.length>3)return u.error("Invalid number of arguments for 'config' expression.");const y=u.parse(i[1],1);if(!(y instanceof jl))return u.error("Key name of 'config' expression must be a string literal.");if(i.length>=3){const m=u.parse(i[2],2);return m instanceof jl?new Bu(f,Gs(y.value),Gs(m.value)):u.error("Scope of 'config' expression must be a string literal.")}return new Bu(f,Gs(y.value))}evaluate(i){const u=[this.key,this.scope,i.scope].filter(Boolean).join(""),f=i.getConfig(u);if(!f)return null;const{type:y,value:m,values:_,minValue:b,maxValue:N,stepValue:D}=f,S=f.default.evaluate(i);let V=S;if(m){const I=i.scope;i.scope=(I||"").split("").slice(1).join(""),V=m.evaluate(i),i.scope=I}return y&&(V=Lc(y,V)),V===void 0||b===void 0&&N===void 0&&D===void 0||(typeof V=="number"?V=fc(V,b,N,D):Array.isArray(V)&&(V=V.map(I=>typeof I=="number"?fc(I,b,N,D):I))),m!==void 0&&V!==void 0&&_&&!_.includes(V)&&(V=S,y&&(V=Lc(y,V))),(y&&y!==this.type||V!==void 0&&Gi(V)!==this.type)&&(V=Lc(this.type.kind,V)),V}eachChild(){}outputDefined(){return!1}serialize(){const i=["config",this.key];return this.scope&&i.concat(this.key),i}}function ko(d){if(d instanceof js&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof pu||d instanceof gu)return!1;let i=!0;return d.eachChild(u=>{i&&!ko(u)&&(i=!1)}),i}function cs(d){if(d instanceof js&&d.name==="feature-state")return!1;let i=!0;return d.eachChild(u=>{i&&!cs(u)&&(i=!1)}),i}function Yn(d){if(d instanceof Bu)return new Set([d.key]);let i=new Set;return d.eachChild(u=>{i=new Set([...i,...Yn(u)])}),i}function ti(d,i){if(d instanceof js&&i.indexOf(d.name)>=0)return!1;let u=!0;return d.eachChild(f=>{u&&!ti(f,i)&&(u=!1)}),u}class Zi{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=i[1];return u.scope.has(f)?new Zi(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class ns{constructor(i,u=[],f,y=new ic,m=[],_,b){this.registry=i,this.path=u,this.key=u.map(N=>typeof N=="string"?`['${N}']`:`[${N}]`).join(""),this.scope=y,this.errors=m,this.expectedType=f,this._scope=_,this.options=b}parse(i,u,f,y,m={}){return u||f?this.concat(u,null,f,y)._parse(i,m):this._parse(i,m)}parseObjectValue(i,u,f,y,m,_={}){return this.concat(u,f,y,m)._parse(i,_)}_parse(i,u){function f(y,m,_){return _==="assert"?new Uo(m,[y]):_==="coerce"?new Zl(m,[y]):y}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=typeof i[0]=="string"?this.registry[i[0]]:void 0;if(y){let m=y.parse(i,this);if(!m)return null;if(this.expectedType){const _=this.expectedType,b=m.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||b.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(_,b))return null}else m=f(m,_,u.typeAnnotation||"coerce");else m=f(m,_,u.typeAnnotation||"assert")}if(!(m instanceof jl)&&m.type.kind!=="resolvedImage"&&Fc(m)){const _=new wd(this._scope,this.options);try{m=new jl(m.type,m.evaluate(_))}catch(b){return this.error(b.message),null}}return m}return Zl.parse(["to-array",i],this)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,f,y){let m=typeof i=="number"?this.path.concat(i):this.path;m=typeof u=="string"?m.concat(u):m;const _=y?this.scope.concat(y):this.scope;return new ns(this.registry,m,f||null,_,this.errors,this._scope,this.options)}error(i,...u){const f=`${this.key}${u.map(y=>`[${y}]`).join("")}`;this.errors.push(new ks(f,i))}checkSubtype(i,u){const f=_d(i,u);return f&&this.error(f),f}}var Wl=ns;function Fc(d){if(d instanceof Zi)return Fc(d.boundExpression);if(d instanceof js&&d.name==="error"||d instanceof ql||d instanceof pu||d instanceof gu||d instanceof Bu)return!1;const i=d instanceof Zl||d instanceof Uo;let u=!0;return d.eachChild(f=>{u=i?u&&Fc(f):u&&f instanceof jl}),!!u&&ko(d)&&ti(d,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Jo(d,i){const u=d.length-1;let f,y,m=0,_=u,b=0;for(;m<=_;)if(b=Math.floor((m+_)/2),f=d[b],y=d[b+1],f<=i){if(b===u||i<y)return b;m=b+1}else{if(!(f>i))throw new rs("Input is not a number.");_=b-1}return 0}class Yl{constructor(i,u,f){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[y,m]of f)this.labels.push(y),this.outputs.push(m)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(i[1],1,Xa);if(!f)return null;const y=[];let m=null;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);for(let _=1;_<i.length;_+=2){const b=_===1?-1/0:i[_],N=i[_+1],D=_,S=_+1;if(typeof b!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(y.length&&y[y.length-1][0]>=b)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=u.parse(N,S,m);if(!V)return null;m=m||V.type,y.push([b,V])}return new Yl(m,f,y)}evaluate(i){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(i);const y=this.input.evaluate(i);if(y<=u[0])return f[0].evaluate(i);const m=u.length;return y>=u[m-1]?f[m-1].evaluate(i):f[Jo(u,y)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&i.push(this.labels[u]),i.push(this.outputs[u].serialize());return i}}const tn=.95047,Uc=1.08883,bl=4/29,es=6/29,pc=3*es*es,xd=es*es*es,ci=Math.PI/180,zh=180/Math.PI;function Qo(d){return d>xd?Math.pow(d,1/3):d/pc+bl}function dl(d){return d>es?d*d*d:pc*(d-bl)}function kc(d){return 255*(d<=.0031308?12.92*d:1.055*Math.pow(d,1/2.4)-.055)}function Au(d){return(d/=255)<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Gu(d){const i=Au(d.r),u=Au(d.g),f=Au(d.b),y=Qo((.4124564*i+.3575761*u+.1804375*f)/tn),m=Qo((.2126729*i+.7151522*u+.072175*f)/1);return{l:116*m-16,a:500*(y-m),b:200*(m-Qo((.0193339*i+.119192*u+.9503041*f)/Uc)),alpha:d.a}}function mc(d){let i=(d.l+16)/116,u=isNaN(d.a)?i:i+d.a/500,f=isNaN(d.b)?i:i-d.b/200;return i=1*dl(i),u=tn*dl(u),f=Uc*dl(f),new bn(kc(3.2404542*u-1.5371385*i-.4985314*f),kc(-.969266*u+1.8760108*i+.041556*f),kc(.0556434*u-.2040259*i+1.0572252*f),d.alpha)}function Ip(d,i,u){const f=i-d;return d+u*(f>180||f<-180?f-360*Math.round(f/360):f)}const Oh={forward:Gu,reverse:mc,interpolate:function(d,i,u){return{l:hr(d.l,i.l,u),a:hr(d.a,i.a,u),b:hr(d.b,i.b,u),alpha:hr(d.alpha,i.alpha,u)}}},Dh={forward:function(d){const{l:i,a:u,b:f}=Gu(d),y=Math.atan2(f,u)*zh;return{h:y<0?y+360:y,c:Math.sqrt(u*u+f*f),l:i,alpha:d.a}},reverse:function(d){const i=d.h*ci,u=d.c;return mc({l:d.l,a:Math.cos(i)*u,b:Math.sin(i)*u,alpha:d.alpha})},interpolate:function(d,i,u){return{h:Ip(d.h,i.h,u),c:hr(d.c,i.c,u),l:hr(d.l,i.l,u),alpha:hr(d.alpha,i.alpha,u)}}};var el=Object.freeze({__proto__:null,hcl:Dh,lab:Oh});class qi{constructor(i,u,f,y,m){this.type=i,this.operator=u,this.interpolation=f,this.input=y,this.labels=[],this.outputs=[];for(const[_,b]of m)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(i,u,f,y){let m=0;if(i.name==="exponential")m=Ai(u,i.base,f,y);else if(i.name==="linear")m=Ai(u,1,f,y);else if(i.name==="cubic-bezier"){const _=i.controlPoints;m=new Kt(_[0],_[1],_[2],_[3]).solve(Ai(u,1,f,y))}return m}static parse(i,u){let[f,y,m,..._]=i;if(!Array.isArray(y)||y.length===0)return u.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const D=y[1];if(typeof D!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:D}}else{if(y[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const D=y.slice(1);if(D.length!==4||D.some(S=>typeof S!="number"||S<0||S>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:D}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length-1>3&&(i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(m=u.parse(m,2,Xa),!m)return null;const b=[];let N=null;f==="interpolate-hcl"||f==="interpolate-lab"?N=Bs:u.expectedType&&u.expectedType.kind!=="value"&&(N=u.expectedType);for(let D=0;D<_.length;D+=2){const S=_[D],V=_[D+1],I=D+3,O=D+4;if(typeof S!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(b.length&&b[b.length-1][0]>=S)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const M=u.parse(V,O,N);if(!M)return null;N=N||M.type,b.push([S,M])}return N.kind==="number"||N.kind==="color"||N.kind==="array"&&N.itemType.kind==="number"&&typeof N.N=="number"?new qi(N,f,y,m,b):u.error(`Type ${Ci(N)} is not interpolatable.`)}evaluate(i){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(i);const y=this.input.evaluate(i);if(y<=u[0])return f[0].evaluate(i);const m=u.length;if(y>=u[m-1])return f[m-1].evaluate(i);const _=Jo(u,y),b=qi.interpolationFactor(this.interpolation,y,u[_],u[_+1]),N=f[_].evaluate(i),D=f[_+1].evaluate(i);return this.operator==="interpolate"?th[this.type.kind.toLowerCase()](N,D,b):this.operator==="interpolate-hcl"?Dh.reverse(Dh.interpolate(Dh.forward(N),Dh.forward(D),b)):Oh.reverse(Oh.interpolate(Oh.forward(N),Oh.forward(D),b))}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const u=[this.operator,i,this.input.serialize()];for(let f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u}}function Ai(d,i,u,f){const y=f-u,m=d-u;return y===0?0:i===1?m/y:(Math.pow(i,m)-1)/(Math.pow(i,y)-1)}class Xl{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let f=null;const y=u.expectedType;y&&y.kind!=="value"&&(f=y);const m=[];for(const b of i.slice(1)){const N=u.parse(b,1+m.length,f,void 0,{typeAnnotation:"omit"});if(!N)return null;f=f||N.type,m.push(N)}const _=y&&m.some(b=>_d(y,b.type));return new Xl(_?ln:f,m)}evaluate(i){let u,f=null,y=0;for(const m of this.args){if(y++,f=m.evaluate(i),f&&f instanceof Ts&&!f.available&&(u||(u=f),f=null,y===this.args.length))return u;if(f!==null)break}return f}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class _u{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const f=[];for(let m=1;m<i.length-1;m+=2){const _=i[m];if(typeof _!="string")return u.error(`Expected string, but found ${typeof _} instead.`,m);if(/[^a-zA-Z0-9_]/.test(_))return u.error("Variable names must contain only alphanumeric characters or '_'.",m);const b=u.parse(i[m+1],m+1);if(!b)return null;f.push([_,b])}const y=u.parse(i[i.length-1],i.length-1,u.expectedType,f);return y?new _u(f,y):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[u,f]of this.bindings)i.push(u,f.serialize());return i.push(this.result.serialize()),i}}class Zf{constructor(i,u,f){this.type=i,this.index=u,this.input=f}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,Xa),y=u.parse(i[2],2,Li(u.expectedType||ln));return f&&y?new Zf(y.type.itemType,f,y):null}evaluate(i){const u=this.index.evaluate(i),f=this.input.evaluate(i);if(u<0)throw new rs(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new rs(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new rs(`Array index must be an integer, but found ${u} instead. Use at-interpolated to retrieve interpolated result with a fractional index.`);return f[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class yc{constructor(i,u,f){this.type=i,this.index=u,this.input=f}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,Xa),y=u.parse(i[2],2,Li(u.expectedType||ln));return f&&y?new yc(y.type.itemType,f,y):null}evaluate(i){const u=this.index.evaluate(i),f=this.input.evaluate(i);if(u<0)throw new rs(`Array index out of bounds: ${u} < 0.`);if(u>f.length-1)throw new rs(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u===Math.floor(u))return f[u];const y=Math.floor(u),m=Math.ceil(u),_=f[y],b=f[m];if(typeof _!="number"||typeof b!="number")throw new rs(`Cannot interpolate between non-number values at index ${u}.`);const N=u-y;return _*(1-N)+b*N}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class mf{constructor(i,u){this.type=An,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,ln),y=u.parse(i[2],2,ln);return f&&y?ah(f.type,[An,an,Xa,sc,ln])?new mf(f,y):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ci(f.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(f==null)return!1;if(!oc(u,["boolean","string","number","null"]))throw new rs(`Expected first argument to be of type boolean, string, number or null, but found ${Ci(Gi(u))} instead.`);if(!oc(f,["string","array"]))throw new rs(`Expected second argument to be of type array or string, but found ${Ci(Gi(f))} instead.`);return f.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Pd{constructor(i,u,f){this.type=Xa,this.needle=i,this.haystack=u,this.fromIndex=f}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,ln),y=u.parse(i[2],2,ln);if(!f||!y)return null;if(!ah(f.type,[An,an,Xa,sc,ln]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ci(f.type)} instead`);if(i.length===4){const m=u.parse(i[3],3,Xa);return m?new Pd(f,y,m):null}return new Pd(f,y)}evaluate(i){const u=this.needle.evaluate(i),f=this.haystack.evaluate(i);if(!oc(u,["boolean","string","number","null"]))throw new rs(`Expected first argument to be of type boolean, string, number or null, but found ${Ci(Gi(u))} instead.`);if(!oc(f,["string","array"]))throw new rs(`Expected second argument to be of type array or string, but found ${Ci(Gi(f))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(i);return f.indexOf(u,y)}return f.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Mh{constructor(i,u,f,y,m,_){this.inputType=i,this.type=u,this.input=f,this.cases=y,this.outputs=m,this.otherwise=_}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let f,y;u.expectedType&&u.expectedType.kind!=="value"&&(y=u.expectedType);const m={},_=[];for(let D=2;D<i.length-1;D+=2){let S=i[D];const V=i[D+1];Array.isArray(S)||(S=[S]);const I=u.concat(D);if(S.length===0)return I.error("Expected at least one branch label.");for(const M of S){if(typeof M!="number"&&typeof M!="string")return I.error("Branch labels must be numbers or strings.");if(typeof M=="number"&&Math.abs(M)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof M=="number"&&Math.floor(M)!==M)return I.error("Numeric branch labels must be integer values.");if(f){if(I.checkSubtype(f,Gi(M)))return null}else f=Gi(M);if(m[String(M)]!==void 0)return I.error("Branch labels must be unique.");m[String(M)]=_.length}const O=u.parse(V,D,y);if(!O)return null;y=y||O.type,_.push(O)}const b=u.parse(i[1],1,ln);if(!b)return null;const N=u.parse(i[i.length-1],i.length-1,y);return N?b.type.kind!=="value"&&u.concat(1).checkSubtype(f,b.type)?null:new Mh(f,y,b,m,_,N):null}evaluate(i){const u=this.input.evaluate(i);return(Gi(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),f=[],y={};for(const _ of u){const b=y[this.cases[_]];b===void 0?(y[this.cases[_]]=f.length,f.push([this.cases[_],[_]])):f[b][1].push(_)}const m=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of f)i.push(b.length===1?m(b[0]):b.map(m)),i.push(this.outputs[_].serialize());return i.push(this.otherwise.serialize()),i}}class Ih{constructor(i,u,f){this.type=i,this.branches=u,this.otherwise=f}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const y=[];for(let _=1;_<i.length-1;_+=2){const b=u.parse(i[_],_,An);if(!b)return null;const N=u.parse(i[_+1],_+1,f);if(!N)return null;y.push([b,N]),f=f||N.type}const m=u.parse(i[i.length-1],i.length-1,f);return m?new Ih(f,y,m):null}evaluate(i){for(const[u,f]of this.branches)if(u.evaluate(i))return f.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,f]of this.branches)i(u),i(f);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(u=>{i.push(u.serialize())}),i}}class Ed{constructor(i,u,f,y){this.type=i,this.input=u,this.beginIndex=f,this.endIndex=y}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const f=u.parse(i[1],1,ln),y=u.parse(i[2],2,Xa);if(!f||!y)return null;if(!ah(f.type,[Li(ln),an,ln]))return u.error(`Expected first argument to be of type array or string, but found ${Ci(f.type)} instead`);if(i.length===4){const m=u.parse(i[3],3,Xa);return m?new Ed(f.type,f,y,m):null}return new Ed(f.type,f,y)}evaluate(i){const u=this.input.evaluate(i),f=this.beginIndex.evaluate(i);if(!oc(u,["string","array"]))throw new rs(`Expected first argument to be of type array or string, but found ${Ci(Gi(u))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(i);return u.slice(f,y)}return u.slice(f)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function yf(d,i){return d==="=="||d==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Dm(d,i,u,f){return f.compare(i,u)===0}function ih(d,i,u){const f=d!=="=="&&d!=="!=";return class yK{constructor(m,_,b){this.type=An,this.lhs=m,this.rhs=_,this.collator=b,this.hasUntypedArgument=m.type.kind==="value"||_.type.kind==="value"}static parse(m,_){if(m.length!==3&&m.length!==4)return _.error("Expected two or three arguments.");const b=m[0];let N=_.parse(m[1],1,ln);if(!N)return null;if(!yf(b,N.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${Ci(N.type)}'.`);let D=_.parse(m[2],2,ln);if(!D)return null;if(!yf(b,D.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${Ci(D.type)}'.`);if(N.type.kind!==D.type.kind&&N.type.kind!=="value"&&D.type.kind!=="value")return _.error(`Cannot compare types '${Ci(N.type)}' and '${Ci(D.type)}'.`);f&&(N.type.kind==="value"&&D.type.kind!=="value"?N=new Uo(D.type,[N]):N.type.kind!=="value"&&D.type.kind==="value"&&(D=new Uo(N.type,[D])));let S=null;if(m.length===4){if(N.type.kind!=="string"&&D.type.kind!=="string"&&N.type.kind!=="value"&&D.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(S=_.parse(m[3],3,Fo),!S)return null}return new yK(N,D,S)}evaluate(m){const _=this.lhs.evaluate(m),b=this.rhs.evaluate(m);if(f&&this.hasUntypedArgument){const N=Gi(_),D=Gi(b);if(N.kind!==D.kind||N.kind!=="string"&&N.kind!=="number")throw new rs(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${N.kind}, ${D.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const N=Gi(_),D=Gi(b);if(N.kind!=="string"||D.kind!=="string")return i(m,_,b)}return this.collator?u(m,_,b,this.collator.evaluate(m)):i(m,_,b)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[d];return this.eachChild(_=>{m.push(_.serialize())}),m}}}const Ey=ih("==",function(d,i,u){return i===u},Dm),gc=ih("!=",function(d,i,u){return i!==u},function(d,i,u,f){return!Dm(0,i,u,f)}),ju=ih("<",function(d,i,u){return i<u},function(d,i,u,f){return f.compare(i,u)<0}),vu=ih(">",function(d,i,u){return i>u},function(d,i,u,f){return f.compare(i,u)>0}),Ny=ih("<=",function(d,i,u){return i<=u},function(d,i,u,f){return f.compare(i,u)<=0}),Lh=ih(">=",function(d,i,u){return i>=u},function(d,i,u,f){return f.compare(i,u)>=0});class hl{constructor(i,u,f,y,m,_){this.type=an,this.number=i,this.locale=u,this.currency=f,this.unit=y,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const f=u.parse(i[1],1,Xa);if(!f)return null;const y=i[2];if(typeof y!="object"||Array.isArray(y))return u.error("NumberFormat options argument must be an object.");let m=null;if(y.locale&&(m=u.parseObjectValue(y.locale,2,"locale",an),!m))return null;let _=null;if(y.currency&&(_=u.parseObjectValue(y.currency,2,"currency",an),!_))return null;let b=null;if(y.unit&&(b=u.parseObjectValue(y.unit,2,"unit",an),!b))return null;let N=null;if(y["min-fraction-digits"]&&(N=u.parseObjectValue(y["min-fraction-digits"],2,"min-fraction-digits",Xa),!N))return null;let D=null;return y["max-fraction-digits"]&&(D=u.parseObjectValue(y["max-fraction-digits"],2,"max-fraction-digits",Xa),!D)?null:new hl(f,m,_,b,N,D)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class tl{constructor(i){this.type=Xa,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const f=u.parse(i[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${Ci(f.type)} instead.`):new tl(f):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new rs(`Expected value to be of type string or array, but found ${Ci(Gi(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(u=>{i.push(u.serialize())}),i}}function Fh(d){return function(){d=1831565813+(d|=0)|0;let i=Math.imul(d^d>>>15,1|d);return i=i+Math.imul(i^i>>>7,61|i)^i,((i^i>>>14)>>>0)/4294967296}}const Nd={"==":Ey,"!=":gc,">":vu,"<":ju,">=":Lh,"<=":Ny,array:Uo,at:Zf,"at-interpolated":yc,boolean:Uo,case:Ih,coalesce:Xl,collator:ql,format:vd,image:hu,in:mf,"index-of":Pd,interpolate:qi,"interpolate-hcl":qi,"interpolate-lab":qi,length:tl,let:_u,literal:jl,match:Mh,number:Uo,"number-format":hl,object:Uo,slice:Ed,step:Yl,string:Uo,"to-boolean":Zl,"to-color":Zl,"to-number":Zl,"to-string":Zl,var:Zi,within:pu,distance:gu,config:Bu};function Lp(d,[i,u,f,y]){i=i.evaluate(d),u=u.evaluate(d),f=f.evaluate(d);const m=y?y.evaluate(d):1,_=Rl(i,u,f,m);if(_)throw new rs(_);return new bn(i/255*m,u/255*m,f/255*m,m)}function Fp(d,[i,u,f,y]){i=i.evaluate(d),u=u.evaluate(d),f=f.evaluate(d);const m=y?y.evaluate(d):1,_=function(D,S,V,I){return typeof D=="number"&&D>=0&&D<=360?typeof S=="number"&&S>=0&&S<=100&&typeof V=="number"&&V>=0&&V<=100?I===void 0||typeof I=="number"&&I>=0&&I<=1?null:`Invalid hsla value [${[D,S,V,I].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof I=="number"?[D,S,V,I]:[D,S,V]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof I=="number"?[D,S,V,I]:[D,S,V]).join(", ")}]: 'h' must be between 0 and 360.`}(i,u,f,m);if(_)throw new rs(_);const b=`hsla(${i}, ${u}%, ${f}%, ${m})`,N=bn.parse(b);if(!N)throw new rs(`Failed to parse HSLA color: ${b}`);return N}function Bc(d,i){return d in i}function gf(d,i){const u=i[d];return u===void 0?null:u}function al(d){return{type:d}}function Vd(d){return{result:"success",value:d}}function wu(d){return{result:"error",value:d}}function zd(d,i){return!!d&&!!d.parameters&&d.parameters.indexOf(i)>-1}function Gc(d){return d["property-type"]==="data-driven"}function xl(d){return zd(d.expression,"measure-light")}function Zu(d){return zd(d.expression,"zoom")}function jc(d){return!!d.expression&&d.expression.interpolated}function qf(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function Od(d){return d}function Zc(d,i){const u=i.type==="color",f=d.stops&&typeof d.stops[0][0]=="object",y=f||!(f||d.property!==void 0),m=d.type||(jc(i)?"exponential":"interval");if(u&&((d=Tn({},d)).stops&&(d.stops=d.stops.map(D=>[D[0],bn.parse(D[1])])),d.default=bn.parse(d.default?d.default:i.default)),d.colorSpace&&d.colorSpace!=="rgb"&&!el[d.colorSpace])throw new Error(`Unknown color space: ${d.colorSpace}`);let _,b,N;if(m==="exponential")_=Af;else if(m==="interval")_=Mm;else if(m==="categorical"){_=Up,b=Object.create(null);for(const D of d.stops)b[D[0]]=D[1];N=typeof d.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);_=kp}if(f){const D={},S=[];for(let O=0;O<d.stops.length;O++){const M=d.stops[O],B=M[0].zoom;D[B]===void 0&&(D[B]={zoom:B,type:d.type,property:d.property,default:d.default,stops:[]},S.push(B)),D[B].stops.push([M[0].value,M[1]])}const V=[];for(const O of S)V.push([D[O].zoom,Zc(D[O],i)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:qi.interpolationFactor.bind(void 0,I),zoomStops:V.map(O=>O[0]),evaluate:({zoom:O},M)=>Af({stops:V,base:d.base},i,O).evaluate(O,M)}}if(y){const D=m==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:qi.interpolationFactor.bind(void 0,D),zoomStops:d.stops.map(S=>S[0]),evaluate:({zoom:S})=>_(d,i,S,b,N)}}return{kind:"source",evaluate(D,S){const V=S&&S.properties?S.properties[d.property]:void 0;return V===void 0?Ds(d.default,i.default):_(d,i,V,b,N)}}}function Ds(d,i,u){return d!==void 0?d:i!==void 0?i:u!==void 0?u:void 0}function Up(d,i,u,f,y){return Ds(typeof u===y?f[u]:void 0,d.default,i.default)}function Mm(d,i,u){if(fu(u)!=="number")return Ds(d.default,i.default);const f=d.stops.length;if(f===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[f-1][0])return d.stops[f-1][1];const y=Jo(d.stops.map(m=>m[0]),u);return d.stops[y][1]}function Af(d,i,u){const f=d.base!==void 0?d.base:1;if(fu(u)!=="number")return Ds(d.default,i.default);const y=d.stops.length;if(y===1||u<=d.stops[0][0])return d.stops[0][1];if(u>=d.stops[y-1][0])return d.stops[y-1][1];const m=Jo(d.stops.map(S=>S[0]),u),_=function(S,V,I,O){const M=O-I,B=S-I;return M===0?0:V===1?B/M:(Math.pow(V,B)-1)/(Math.pow(V,M)-1)}(u,f,d.stops[m][0],d.stops[m+1][0]),b=d.stops[m][1],N=d.stops[m+1][1];let D=th[i.type]||Od;if(d.colorSpace&&d.colorSpace!=="rgb"){const S=el[d.colorSpace];D=(V,I)=>S.reverse(S.interpolate(S.forward(V),S.forward(I),_))}return typeof b.evaluate=="function"?{evaluate(...S){const V=b.evaluate.apply(void 0,S),I=N.evaluate.apply(void 0,S);if(V!==void 0&&I!==void 0)return D(V,I,_)}}:D(b,N,_)}function kp(d,i,u){return i.type==="color"?u=bn.parse(u):i.type==="formatted"?u=us.fromString(u.toString()):i.type==="resolvedImage"?u=Ts.build(u.toString()):fu(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0),Ds(u,d.default,i.default)}js.register(Nd,{error:[{kind:"error"},[an],(d,[i])=>{throw new rs(i.evaluate(d))}],typeof:[an,[ln],(d,[i])=>Ci(Gi(i.evaluate(d)))],"to-rgba":[Li(Xa,4),[Bs],(d,[i])=>i.evaluate(d).toRenderColor(null).toArray()],"to-hsla":[Li(Xa,4),[Bs],(d,[i])=>i.evaluate(d).toRenderColor(null).toHslaArray()],rgb:[Bs,[Xa,Xa,Xa],Lp],rgba:[Bs,[Xa,Xa,Xa,Xa],Lp],hsl:[Bs,[Xa,Xa,Xa],Fp],hsla:[Bs,[Xa,Xa,Xa,Xa],Fp],has:{type:An,overloads:[[[an],(d,[i])=>Bc(i.evaluate(d),d.properties())],[[an,Ad],(d,[i,u])=>Bc(i.evaluate(d),u.evaluate(d))]]},get:{type:ln,overloads:[[[an],(d,[i])=>gf(i.evaluate(d),d.properties())],[[an,Ad],(d,[i,u])=>gf(i.evaluate(d),u.evaluate(d))]]},"feature-state":[ln,[an],(d,[i])=>gf(i.evaluate(d),d.featureState||{})],properties:[Ad,[],d=>d.properties()],"geometry-type":[an,[],d=>d.geometryType()],id:[ln,[],d=>d.id()],zoom:[Xa,[],d=>d.globals.zoom],pitch:[Xa,[],d=>d.globals.pitch||0],"distance-from-center":[Xa,[],d=>d.distanceFromCenter()],"measure-light":[Xa,[an],(d,[i])=>d.measureLight(i.evaluate(d))],"heatmap-density":[Xa,[],d=>d.globals.heatmapDensity||0],"line-progress":[Xa,[],d=>d.globals.lineProgress||0],"raster-value":[Xa,[],d=>d.globals.rasterValue||0],"raster-particle-speed":[Xa,[],d=>d.globals.rasterParticleSpeed||0],"sky-radial-progress":[Xa,[],d=>d.globals.skyRadialProgress||0],accumulated:[ln,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[Xa,al(Xa),(d,i)=>{let u=0;for(const f of i)u+=f.evaluate(d);return u}],"*":[Xa,al(Xa),(d,i)=>{let u=1;for(const f of i)u*=f.evaluate(d);return u}],"-":{type:Xa,overloads:[[[Xa,Xa],(d,[i,u])=>i.evaluate(d)-u.evaluate(d)],[[Xa],(d,[i])=>-i.evaluate(d)]]},"/":[Xa,[Xa,Xa],(d,[i,u])=>i.evaluate(d)/u.evaluate(d)],"%":[Xa,[Xa,Xa],(d,[i,u])=>i.evaluate(d)%u.evaluate(d)],ln2:[Xa,[],()=>Math.LN2],pi:[Xa,[],()=>Math.PI],e:[Xa,[],()=>Math.E],"^":[Xa,[Xa,Xa],(d,[i,u])=>Math.pow(i.evaluate(d),u.evaluate(d))],sqrt:[Xa,[Xa],(d,[i])=>Math.sqrt(i.evaluate(d))],log10:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))/Math.LN10],ln:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))],log2:[Xa,[Xa],(d,[i])=>Math.log(i.evaluate(d))/Math.LN2],sin:[Xa,[Xa],(d,[i])=>Math.sin(i.evaluate(d))],cos:[Xa,[Xa],(d,[i])=>Math.cos(i.evaluate(d))],tan:[Xa,[Xa],(d,[i])=>Math.tan(i.evaluate(d))],asin:[Xa,[Xa],(d,[i])=>Math.asin(i.evaluate(d))],acos:[Xa,[Xa],(d,[i])=>Math.acos(i.evaluate(d))],atan:[Xa,[Xa],(d,[i])=>Math.atan(i.evaluate(d))],min:[Xa,al(Xa),(d,i)=>Math.min(...i.map(u=>u.evaluate(d)))],max:[Xa,al(Xa),(d,i)=>Math.max(...i.map(u=>u.evaluate(d)))],abs:[Xa,[Xa],(d,[i])=>Math.abs(i.evaluate(d))],round:[Xa,[Xa],(d,[i])=>{const u=i.evaluate(d);return u<0?-Math.round(-u):Math.round(u)}],floor:[Xa,[Xa],(d,[i])=>Math.floor(i.evaluate(d))],ceil:[Xa,[Xa],(d,[i])=>Math.ceil(i.evaluate(d))],"filter-==":[An,[an,ln],(d,[i,u])=>d.properties()[i.value]===u.value],"filter-id-==":[An,[ln],(d,[i])=>d.id()===i.value],"filter-type-==":[An,[an],(d,[i])=>d.geometryType()===i.value],"filter-<":[An,[an,ln],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f<y}],"filter-id-<":[An,[ln],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u<f}],"filter->":[An,[an,ln],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f>y}],"filter-id->":[An,[ln],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u>f}],"filter-<=":[An,[an,ln],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f<=y}],"filter-id-<=":[An,[ln],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u<=f}],"filter->=":[An,[an,ln],(d,[i,u])=>{const f=d.properties()[i.value],y=u.value;return typeof f==typeof y&&f>=y}],"filter-id->=":[An,[ln],(d,[i])=>{const u=d.id(),f=i.value;return typeof u==typeof f&&u>=f}],"filter-has":[An,[ln],(d,[i])=>i.value in d.properties()],"filter-has-id":[An,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[An,[Li(an)],(d,[i])=>i.value.indexOf(d.geometryType())>=0],"filter-id-in":[An,[Li(ln)],(d,[i])=>i.value.indexOf(d.id())>=0],"filter-in-small":[An,[an,Li(ln)],(d,[i,u])=>u.value.indexOf(d.properties()[i.value])>=0],"filter-in-large":[An,[an,Li(ln)],(d,[i,u])=>function(f,y,m,_){for(;m<=_;){const b=m+_>>1;if(y[b]===f)return!0;y[b]>f?_=b-1:m=b+1}return!1}(d.properties()[i.value],u.value,0,u.value.length-1)],all:{type:An,overloads:[[[An,An],(d,[i,u])=>i.evaluate(d)&&u.evaluate(d)],[al(An),(d,i)=>{for(const u of i)if(!u.evaluate(d))return!1;return!0}]]},any:{type:An,overloads:[[[An,An],(d,[i,u])=>i.evaluate(d)||u.evaluate(d)],[al(An),(d,i)=>{for(const u of i)if(u.evaluate(d))return!0;return!1}]]},"!":[An,[An],(d,[i])=>!i.evaluate(d)],"is-supported-script":[An,[an],(d,[i])=>{const u=d.globals&&d.globals.isSupportedScript;return!u||u(i.evaluate(d))}],upcase:[an,[an],(d,[i])=>i.evaluate(d).toUpperCase()],downcase:[an,[an],(d,[i])=>i.evaluate(d).toLowerCase()],concat:[an,al(ln),(d,i)=>i.map(u=>Gs(u.evaluate(d))).join("")],"resolved-locale":[an,[Fo],(d,[i])=>i.evaluate(d).resolvedLocale()],random:[Xa,[Xa,Xa,ln],(d,i)=>{const[u,f,y]=i.map(_=>_.evaluate(d));if(u>f||u===f)return u;let m;if(typeof y=="string")m=function(_){let b=0;if(_.length===0)return b;for(let N=0;N<_.length;N++)b=(b<<5)-b+_.charCodeAt(N),b|=0;return b}(y);else{if(typeof y!="number")throw new rs(`Invalid seed input: ${y}`);m=y}return u+Fh(m)()*(f-u)}]});class eo{constructor(i,u,f,y){this.expression=i,this._warningHistory={},this._evaluator=new wd(f,y),this._defaultValue=u?function(m){return m.type==="color"&&(qf(m.default)||Array.isArray(m.default))?new bn(0,0,0,0):m.type==="color"?bn.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=Yn(i)}evaluateWithoutErrorHandling(i,u,f,y,m,_,b,N){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=y||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=N||null,this.expression.evaluate(this._evaluator)}evaluate(i,u,f,y,m,_,b,N){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=y||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=N||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new rs(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${D.message}`)),this._defaultValue}}}function Uh(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Nd}function G(d,i,u,f){const y=new Wl(Nd,[],i?function(_){const b={color:Bs,string:an,number:Xa,enum:an,boolean:An,formatted:du,resolvedImage:Rs};return _.type==="array"?Li(b[_.value]||ln,_.length):b[_.type]}(i):void 0,void 0,void 0,u,f),m=y.parse(d,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Vd(new eo(m,i,u,f)):wu(y.errors)}class J{constructor(i,u,f,y){this.kind=i,this._styleExpression=u,this.isLightConstant=f,this.isLineProgressConstant=y,this.isStateDependent=i!=="constant"&&!cs(u.expression),this.configDependencies=Yn(u.expression)}evaluateWithoutErrorHandling(i,u,f,y,m,_){return this._styleExpression.evaluateWithoutErrorHandling(i,u,f,y,m,_)}evaluate(i,u,f,y,m,_){return this._styleExpression.evaluate(i,u,f,y,m,_)}}class he{constructor(i,u,f,y,m,_){this.kind=i,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!cs(u.expression),this.isLightConstant=m,this.isLineProgressConstant=_,this.configDependencies=Yn(u.expression),this.interpolationType=y}evaluateWithoutErrorHandling(i,u,f,y,m,_){return this._styleExpression.evaluateWithoutErrorHandling(i,u,f,y,m,_)}evaluate(i,u,f,y,m,_){return this._styleExpression.evaluate(i,u,f,y,m,_)}interpolationFactor(i,u,f){return this.interpolationType?qi.interpolationFactor(this.interpolationType,i,u,f):0}}function Ee(d,i,u,f){if((d=G(d,i,u,f)).result==="error")return d;const y=d.value.expression,m=ko(y);if(!m&&!Gc(i))return wu([new ks("","data expressions not supported")]);const _=ti(y,["zoom","pitch","distance-from-center"]);if(!_&&!Zu(i))return wu([new ks("","zoom expressions not supported")]);const b=ti(y,["measure-light"]);if(!b&&!xl(i))return wu([new ks("","measure-light expression not supported")]);const N=ti(y,["line-progress"]);if(!N&&!function(V){return zd(V.expression,"line-progress")}(i))return wu([new ks("","line-progress expression not supported")]);const D=i.expression&&i.expression.relaxZoomRestriction,S=Qe(y);return S||_||D?S instanceof ks?wu([S]):S instanceof qi&&!jc(i)?wu([new ks("",'"interpolate" expressions cannot be used with this property')]):Vd(S?new he(m&&N?"camera":"composite",d.value,S.labels,S instanceof qi?S.interpolation:void 0,b,N):new J(m&&N?"constant":"source",d.value,b,N)):wu([new ks("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class je{constructor(i,u){this._parameters=i,this._specification=u,Tn(this,Zc(this._parameters,this._specification))}static deserialize(i){return new je(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Qe(d){let i=null;if(d instanceof _u)i=Qe(d.result);else if(d instanceof Xl){for(const u of d.args)if(i=Qe(u),i)break}else(d instanceof Yl||d instanceof qi)&&d.input instanceof js&&d.input.name==="zoom"&&(i=d);return i instanceof ks||d.eachChild(u=>{const f=Qe(u);f instanceof ks?i=f:i&&f&&i!==f&&(i=new ks("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}var tt,ot,ht=function(){if(ot)return tt;ot=1,tt=i;var d=3;function i(u,f,y){var m=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var _=new Int32Array(this.arrayBuffer);u=_[0],this.d=(f=_[1])+2*(y=_[2]);for(var b=0;b<this.d*this.d;b++){var N=_[d+b],D=_[d+b+1];m.push(N===D?null:_.subarray(N,D))}var S=_[d+m.length+1];this.keys=_.subarray(_[d+m.length],S),this.bboxes=_.subarray(S),this.insert=this._insertReadonly}else{this.d=f+2*y;for(var V=0;V<this.d*this.d;V++)m.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=u,this.padding=y,this.scale=f/u,this.uid=0;var I=y/f*u;this.min=-I,this.max=u+I}return i.prototype.insert=function(u,f,y,m,_){this._forEachCell(f,y,m,_,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(m),this.bboxes.push(_)},i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},i.prototype._insertCell=function(u,f,y,m,_,b){this.cells[_].push(b)},i.prototype.query=function(u,f,y,m,_){var b=this.min,N=this.max;if(u<=b&&f<=b&&N<=y&&N<=m&&!_)return Array.prototype.slice.call(this.keys);var D=[];return this._forEachCell(u,f,y,m,this._queryCell,D,{},_),D},i.prototype._queryCell=function(u,f,y,m,_,b,N,D){var S=this.cells[_];if(S!==null)for(var V=this.keys,I=this.bboxes,O=0;O<S.length;O++){var M=S[O];if(N[M]===void 0){var B=4*M;(D?D(I[B+0],I[B+1],I[B+2],I[B+3]):u<=I[B+2]&&f<=I[B+3]&&y>=I[B+0]&&m>=I[B+1])?(N[M]=!0,b.push(V[M])):N[M]=!1}}},i.prototype._forEachCell=function(u,f,y,m,_,b,N,D){for(var S=this._convertToCellCoord(u),V=this._convertToCellCoord(f),I=this._convertToCellCoord(y),O=this._convertToCellCoord(m),M=S;M<=I;M++)for(var B=V;B<=O;B++){var Y=this.d*B+M;if((!D||D(this._convertFromCellCoord(M),this._convertFromCellCoord(B),this._convertFromCellCoord(M+1),this._convertFromCellCoord(B+1)))&&_.call(this,u,f,y,m,Y,b,N,D))return}},i.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},i.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,f=d+this.cells.length+1+1,y=0,m=0;m<this.cells.length;m++)y+=this.cells[m].length;var _=new Int32Array(f+y+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;for(var b=f,N=0;N<u.length;N++){var D=u[N];_[d+N]=b,_.set(D,b),b+=D.length}return _[d+u.length]=b,_.set(this.keys,b),_[d+u.length+1]=b+=this.keys.length,_.set(this.bboxes,b),b+=this.bboxes.length,_.buffer},tt}(),Tt=w(ht);const Jt={};function xt(d,i,u={}){Object.defineProperty(d,"_classRegistryKey",{value:i,writable:!1}),Jt[i]={klass:d,omit:u.omit||[]}}xt(Object,"Object"),Tt.serialize=function(d,i){const u=d.toArrayBuffer();return i&&i.add(u),{buffer:u}},Tt.deserialize=function(d){return new Tt(d.buffer)},Object.defineProperty(Tt,"name",{value:"Grid"}),xt(Tt,"Grid"),typeof DOMMatrix<"u"&&xt(DOMMatrix,"DOMMatrix"),xt(bn,"Color"),xt(Error,"Error"),xt(us,"Formatted"),xt(Yo,"FormattedSection"),xt(Us,"AJAXError"),xt(Ts,"ResolvedImage"),xt(je,"StylePropertyFunction"),xt(eo,"StyleExpression",{omit:["_evaluator"]}),xt(Lo,"ImageId"),xt(ku,"ImageVariant"),xt(he,"ZoomDependentExpression"),xt(J,"ZoomConstantExpression"),xt(js,"CompoundExpression",{omit:["_evaluate"]});for(const d in Nd)Jt[Nd[d]._classRegistryKey]||xt(Nd[d],`Expression${d}`);function Aa(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function ra(d){return self.ImageBitmap&&d instanceof ImageBitmap}function wa(d,i){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp)return d;if(Aa(d)||ra(d))return i&&i.add(d),d;if(ArrayBuffer.isView(d))return i&&i.add(d.buffer),d;if(d instanceof ImageData)return i&&i.add(d.data.buffer),d;if(Array.isArray(d)){const u=[];for(const f of d)u.push(wa(f,i));return u}if(d instanceof Map){const u={$name:"Map",entries:[]};for(const[f,y]of d.entries())u.entries.push(wa(f),wa(y));return u}if(d instanceof Set){const u={$name:"Set"};let f=0;for(const y of d.values())u[++f]=wa(y);return u}if(d instanceof DOMMatrix){const u={$name:"DOMMatrix"},f=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const y of f)u[y]=d[y];return u}if(typeof d=="bigint")return{$name:"BigInt",value:d.toString()};if(typeof d=="object"){const u=d.constructor,f=u._classRegistryKey;if(!f)throw new Error(`Can't serialize object of unregistered class "${u.name}".`);const y=u.serialize?u.serialize(d,i):{};if(!u.serialize){for(const m in d)d.hasOwnProperty(m)&&(Jt[f].omit.indexOf(m)>=0||(y[m]=wa(d[m],i)));d instanceof Error&&(y.message=d.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(y.$name=f),y}throw new Error("can't serialize object of type "+typeof d)}function fa(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||Aa(d)||ra(d)||ArrayBuffer.isView(d)||d instanceof ImageData)return d;if(Array.isArray(d))return d.map(fa);if(typeof d=="object"){const i=d.$name||"Object";if(i==="Map"){const y=d.entries||[],m=new Map;for(let _=0;_<y.length;_+=2)m.set(fa(y[_]),fa(y[_+1]));return m}if(i==="Set"){const y=new Set;for(const m of Object.keys(d))m!=="$name"&&y.add(fa(d[m]));return y}if(i==="DOMMatrix"){let y;return y=d.is2D?[d.a,d.b,d.c,d.d,d.e,d.f]:[d.m11,d.m12,d.m13,d.m14,d.m21,d.m22,d.m23,d.m24,d.m31,d.m32,d.m33,d.m34,d.m41,d.m42,d.m43,d.m44],new DOMMatrix(y)}if(i==="BigInt")return BigInt(d.value);const{klass:u}=Jt[i];if(!u)throw new Error(`Can't deserialize unregistered class "${i}".`);if(u.deserialize)return u.deserialize(d);const f=Object.create(u.prototype);for(const y of Object.keys(d))y!=="$name"&&(f[y]=fa(d[y]));return f}throw new Error("can't deserialize object of type "+typeof d)}const _t={"Latin-1 Supplement":d=>d>=128&&d<=255,Arabic:d=>d>=1536&&d<=1791,"Arabic Supplement":d=>d>=1872&&d<=1919,"Arabic Extended-A":d=>d>=2208&&d<=2303,"Hangul Jamo":d=>d>=4352&&d<=4607,"Unified Canadian Aboriginal Syllabics":d=>d>=5120&&d<=5759,Khmer:d=>d>=6016&&d<=6143,"Unified Canadian Aboriginal Syllabics Extended":d=>d>=6320&&d<=6399,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"CJK Radicals Supplement":d=>d>=11904&&d<=12031,"Kangxi Radicals":d=>d>=12032&&d<=12255,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Bopomofo:d=>d>=12544&&d<=12591,"Hangul Compatibility Jamo":d=>d>=12592&&d<=12687,Kanbun:d=>d>=12688&&d<=12703,"Bopomofo Extended":d=>d>=12704&&d<=12735,"CJK Strokes":d=>d>=12736&&d<=12783,"Katakana Phonetic Extensions":d=>d>=12784&&d<=12799,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"CJK Unified Ideographs Extension A":d=>d>=13312&&d<=19903,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Yi Syllables":d=>d>=40960&&d<=42127,"Yi Radicals":d=>d>=42128&&d<=42191,"Hangul Jamo Extended-A":d=>d>=43360&&d<=43391,"Hangul Syllables":d=>d>=44032&&d<=55215,"Hangul Jamo Extended-B":d=>d>=55216&&d<=55295,"Private Use Area":d=>d>=57344&&d<=63743,"CJK Compatibility Ideographs":d=>d>=63744&&d<=64255,"Arabic Presentation Forms-A":d=>d>=64336&&d<=65023,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Arabic Presentation Forms-B":d=>d>=65136&&d<=65279,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519,Osage:d=>d>=66736&&d<=66815,"CJK Unified Ideographs Extension B":d=>d>=131072&&d<=173791};function ta(d){for(const i of d)if(qa(i.charCodeAt(0)))return!0;return!1}function Ga(d){for(const i of d)if(!Ka(i.charCodeAt(0)))return!1;return!0}function Ka(d){return!(_t.Arabic(d)||_t["Arabic Supplement"](d)||_t["Arabic Extended-A"](d)||_t["Arabic Presentation Forms-A"](d)||_t["Arabic Presentation Forms-B"](d))}function qa(d){return!(d!==746&&d!==747&&(d<4352||!(_t["Bopomofo Extended"](d)||_t.Bopomofo(d)||_t["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||_t["CJK Compatibility Ideographs"](d)||_t["CJK Compatibility"](d)||_t["CJK Radicals Supplement"](d)||_t["CJK Strokes"](d)||!(!_t["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||_t["CJK Unified Ideographs Extension A"](d)||_t["CJK Unified Ideographs"](d)||_t["Enclosed CJK Letters and Months"](d)||_t["Hangul Compatibility Jamo"](d)||_t["Hangul Jamo Extended-A"](d)||_t["Hangul Jamo Extended-B"](d)||_t["Hangul Jamo"](d)||_t["Hangul Syllables"](d)||_t.Hiragana(d)||_t["Ideographic Description Characters"](d)||_t.Kanbun(d)||_t["Kangxi Radicals"](d)||_t["Katakana Phonetic Extensions"](d)||_t.Katakana(d)&&d!==12540||!(!_t["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!_t["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||_t["Unified Canadian Aboriginal Syllabics"](d)||_t["Unified Canadian Aboriginal Syllabics Extended"](d)||_t["Vertical Forms"](d)||_t["Yijing Hexagram Symbols"](d)||_t["Yi Syllables"](d)||_t["Yi Radicals"](d))))}function Sr(d){return!(qa(d)||function(i){return!!(_t["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||_t["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||_t["Letterlike Symbols"](i)||_t["Number Forms"](i)||_t["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||_t["Control Pictures"](i)&&i!==9251||_t["Optical Character Recognition"](i)||_t["Enclosed Alphanumerics"](i)||_t["Geometric Shapes"](i)||_t["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||_t["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||_t["CJK Symbols and Punctuation"](i)||_t.Katakana(i)||_t["Private Use Area"](i)||_t["CJK Compatibility Forms"](i)||_t["Small Form Variants"](i)||_t["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(d))}function fr(d){return _t.Arabic(d)||_t["Arabic Supplement"](d)||_t["Arabic Extended-A"](d)||_t["Arabic Presentation Forms-A"](d)||_t["Arabic Presentation Forms-B"](d)}function rn(d){return d>=1424&&d<=2303||_t["Arabic Presentation Forms-A"](d)||_t["Arabic Presentation Forms-B"](d)}function lr(d,i){return!(!i&&rn(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||_t.Khmer(d))}function _i(d){for(const i of d)if(rn(i.charCodeAt(0)))return!0;return!1}const bi="deferred",Zn="loading",ai="loaded";let Hi=null,Fn="unavailable",_n=null;const ds=function(d){d&&typeof d=="string"&&d.indexOf("NetworkError")>-1&&(Fn="error"),Hi&&Hi(d)};function Fi(){Un.fire(new Io("pluginStateChange",{pluginStatus:Fn,pluginURL:_n}))}const Un=new Gl,po=function(){return Fn},vi=function(){if(Fn!==bi||!_n)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fn=Zn,Fi(),_n&&Vi({url:_n},d=>{d?ds(d):(Fn=ai,Fi())})},is={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Fn===ai||is.applyArabicShaping!=null,isLoading:()=>Fn===Zn,setState(d){Fn=d.pluginStatus,_n=d.pluginURL},isParsed:()=>is.applyArabicShaping!=null&&is.processBidirectionalText!=null&&is.processStyledBidirectionalText!=null,getPluginURL:()=>_n};class vn{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(i){return function(u,f){for(const y of u)if(!lr(y.charCodeAt(0),f))return!1;return!0}(i,is.isLoaded())}}class Mi{constructor(i,u,f,y){this.property=i,this.value=u,this.expression=function(m,_,b,N){if(qf(m))return new je(m,_);if(Uh(m)||Array.isArray(m)&&m.length>0){const D=Ee(m,_,b,N);if(D.result==="error")throw new Error(D.value.map(S=>`${S.key}: ${S.message}`).join(", "));return D.value}{let D=m;return typeof m=="string"&&_.type==="color"&&(D=bn.parse(m)),{kind:"constant",configDependencies:new Set,evaluate:()=>D}}}(u===void 0?i.specification.default:u,i.specification,f,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,f){return this.property.possiblyEvaluate(this,i,u,f)}}class qs{constructor(i,u,f){this.property=i,this.value=new Mi(i,void 0,u,f)}transitioned(i,u){return new rl(this.property,this.value,u,Rn({},i.transition,this.transition),i.now)}untransitioned(){return new rl(this.property,this.value,null,{},0)}}class To{constructor(i,u,f){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(i){return Mn(this._values[i].value.value)}setValue(i,u){this._values.hasOwnProperty(i)||(this._values[i]=new qs(this._values[i].property,this._scope,this._options)),this._values[i].value=new Mi(this._values[i].property,u===null?void 0:Mn(u),this._scope,this._options),this._values[i].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].value.expression.configDependencies]))}setTransitionOrValue(i,u){u&&(this._options=u);const f=this._properties.properties;if(i)for(const y in i){const m=i[y];if(y.endsWith("-transition")){const _=y.slice(0,-11);f[_]&&this.setTransition(_,m)}else f.hasOwnProperty(y)&&this.setValue(y,m)}}getTransition(i){return Mn(this._values[i].transition)}setTransition(i,u){this._values.hasOwnProperty(i)||(this._values[i]=new qs(this._values[i].property)),this._values[i].transition=Mn(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(i[u]=f);const y=this.getTransition(u);y!==void 0&&(i[`${u}-transition`]=y)}return i}transitioned(i,u){const f=new Pl(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].transitioned(i,u._values[y]);return f}untransitioned(){const i=new Pl(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class rl{constructor(i,u,f,y,m){const _=y.delay||0,b=y.duration||0;m=m||0,this.property=i,this.value=u,this.begin=m+_,this.end=this.begin+b,i.specification.transition&&(y.delay||y.duration)&&(this.prior=f)}possiblyEvaluate(i,u,f){const y=i.now||0,m=this.value.possiblyEvaluate(i,u,f),_=this.prior;if(_){if(y>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(y<this.begin)return _.possiblyEvaluate(i,u,f);{const b=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(i,u,f),m,cr(b))}}return m}}class Pl{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,f){const y=new Ru(this._properties);for(const m of Object.keys(this._values))y._values[m]=this._values[m].possiblyEvaluate(i,u,f);return y}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class xs{constructor(i,u,f){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._scope=u,this._options=f,this.configDependencies=new Set}getValue(i){return Mn(this._values[i].value)}setValue(i,u){this._values[i]=new Mi(this._values[i].property,u===null?void 0:Mn(u),this._scope,this._options),this._values[i].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[i].expression.configDependencies]))}serialize(){const i={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(i[u]=f)}return i}possiblyEvaluate(i,u,f){const y=new Ru(this._properties);for(const m of Object.keys(this._values))y._values[m]=this._values[m].possiblyEvaluate(i,u,f);return y}}class El{constructor(i,u,f){this.property=i,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,f,y){return this.property.evaluate(this.value,this.parameters,i,u,f,y)}}class Ru{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Ca{constructor(i){this.specification=i}possiblyEvaluate(i,u){return i.expression.evaluate(u)}interpolate(i,u,f){const y=th[this.specification.type];return y?y(i,u,f):i}}class Ua{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,f,y){return new El(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},f,y)}:i.expression,u)}interpolate(i,u,f){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new El(this,{kind:"constant",value:void 0},i.parameters);const y=th[this.specification.type];return y?new El(this,{kind:"constant",value:y(i.value.value,u.value.value,f)},i.parameters):i}evaluate(i,u,f,y,m,_){return i.kind==="constant"?i.value:i.evaluate(u,f,y,m,_)}}class $i{constructor(i){this.specification=i}possiblyEvaluate(i,u,f,y){return!!i.expression.evaluate(u,null,{},f,y)}interpolate(){return!1}}class zi{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new vn(0,{});for(const f in i){const y=i[f];y.specification.overridable&&this.overridableProperties.push(f);const m=this.defaultPropertyValues[f]=new Mi(y,void 0),_=this.defaultTransitionablePropertyValues[f]=new qs(y);this.defaultTransitioningPropertyValues[f]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=m.possiblyEvaluate(u)}}}xt(Ua,"DataDrivenProperty"),xt(Ca,"DataConstantProperty"),xt($i,"ColorRampProperty");var Gt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"iconsets":{"experimental":true,"type":"iconsets"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*"},"selectors":{"experimental":true,"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false},"featureNamespace":{"experimental":true,"type":"string","required":false},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"required":true,"type":"enum","values":{"sprite":1}},"url":{"required":true,"type":"string"}},"iconset_source":{"type":{"required":true,"type":"enum","values":{"source":1}},"source":{"required":true,"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","experimental":true,"private":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","experimental":true,"private":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","transition":true,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"*"}}}');function Bp(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function sh(d){if(Array.isArray(d))return d.map(sh);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const i={};for(const u in d)i[u]=sh(d[u]);return i}return Bp(d)}function oh(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const i of d.slice(1))if(!oh(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function lh(d,i="",u=null,f="fill"){if(d==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};oh(d)||(d=ch(d));const y=d;let m=!0;try{m=function(S){if(!qu(S))return S;let V=sh(S);return uh(V),V=Tu(V),V}(y)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(y,null,2)}
        `)}let _=null,b=null;if(f!=="background"&&f!=="sky"&&f!=="slot"){b=Gt[`filter_${f}`];const S=G(m,b,i,u);if(S.result==="error")throw new Error(S.value.map(V=>`${V.key}: ${V.message}`).join(", "));_=(V,I,O)=>S.value.evaluate(V,I,{},O)}let N=null,D=null;if(m!==y){const S=G(y,b,i,u);if(S.result==="error")throw new Error(S.value.map(V=>`${V.key}: ${V.message}`).join(", "));N=(V,I,O,M,B)=>S.value.evaluate(V,I,{},O,void 0,void 0,M,B),D=!ko(S.value.expression)}return{filter:_,dynamicFilter:N||void 0,needGeometry:Lm(m),needFeature:!!D}}function Tu(d){if(!Array.isArray(d))return d;const i=function(u){if(Im.has(u[0])){for(let f=1;f<u.length;f++)if(qu(u[f]))return!0}return u}(d);return i===!0?i:i.map(u=>Tu(u))}function uh(d){let i=!1;const u=[];if(d[0]==="case"){for(let f=1;f<d.length-1;f+=2)i=i||qu(d[f]),u.push(d[f+1]);u.push(d[d.length-1])}else if(d[0]==="match"){i=i||qu(d[1]);for(let f=2;f<d.length-1;f+=2)u.push(d[f+1]);u.push(d[d.length-1])}else if(d[0]==="step"){i=i||qu(d[1]);for(let f=1;f<d.length-1;f+=2)u.push(d[f+1])}i&&(d.length=0,d.push("any",...u));for(let f=1;f<d.length;f++)uh(d[f])}function qu(d){if(!Array.isArray(d))return!1;if((i=d[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let u=1;u<d.length;u++)if(qu(d[u]))return!0;return!1}const Im=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Hf(d,i){return d<i?-1:d>i?1:0}function Lm(d){if(!Array.isArray(d))return!1;if(d[0]==="within"||d[0]==="distance")return!0;for(let i=1;i<d.length;i++)if(Lm(d[i]))return!0;return!1}function ch(d){if(!d)return!0;const i=d[0];return d.length<=1?i!=="any":i==="=="?Nl(d[1],d[2],"=="):i==="!="?Hc(Nl(d[1],d[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Nl(d[1],d[2],i):i==="any"?(u=d.slice(1),["any"].concat(u.map(ch))):i==="all"?["all"].concat(d.slice(1).map(ch)):i==="none"?["all"].concat(d.slice(1).map(ch).map(Hc)):i==="in"?kh(d[1],d.slice(2)):i==="!in"?Hc(kh(d[1],d.slice(2))):i==="has"?qc(d[1]):i!=="!has"||Hc(qc(d[1]));var u}function Nl(d,i,u){switch(d){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,d,i]}}function kh(d,i){if(i.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",d,["literal",i.sort(Hf)]]:["filter-in-small",d,["literal",i]]}}function qc(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function Hc(d){return["!",d]}const $f="";function $c(d,i){return i?`${d}${$f}${i}`:d}const nl="-transition",Fm=new Set(["fill","line","background","hillshade","raster"]);class to extends Gl{constructor(i,u,f,y,m){if(super(),this.id=i.id,this.fqid=$c(this.id,f),this.type=i.type,this.scope=f,this.lut=y,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,i.type!=="custom"){if(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type&&i.type!=="background"&&i.type!=="sky"&&i.type!=="slot"){this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter;const _=G(this.filter,Gt[`filter_${i.type}`]);_.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,..._.value.configDependencies]))}if(i.slot&&(this.slot=i.slot),u.layout&&(this._unevaluatedLayout=new xs(u.layout,this.scope,m),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new To(u.paint,this.scope,m);for(const _ in i.paint)this.setPaintProperty(_,i.paint[_]);for(const _ in i.layout)this.setLayoutProperty(_,i.layout[_]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ru(u.paint)}}}onAdd(i){}onRemove(i){}isDraped(i){return!this.is3D(!0)&&Fm.has(this.type)}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u){if(this.type==="custom"&&i==="visibility")return void(this.visibility=u);const f=this._unevaluatedLayout;f._properties.properties[i]&&(f.setValue(i,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),i==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(i){return i.endsWith(nl)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u){const f=this._transitionablePaint,y=f._properties.properties;if(i.endsWith(nl)){const V=i.slice(0,-11);return y[V]&&f.setTransition(V,u||void 0),!1}if(!y[i])return!1;const m=f._values[i],_=m.value.isDataDriven(),b=m.value;f.setValue(i,u),this.configDependencies=new Set([...this.configDependencies,...f.configDependencies]),this._handleSpecialPaintPropertyUpdate(i);const N=f._values[i].value,D=N.isDataDriven(),S=i.endsWith("pattern")||i==="line-dasharray";return D||_||S||this._handleOverridablePaintPropertyUpdate(i,b,N)}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getDefaultProgramParams(i,u,f){return null}_handleOverridablePaintPropertyUpdate(i,u,f){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){return jn({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(i,u)=>!(i===void 0||u==="layout"&&!Object.keys(i).length||u==="paint"&&!Object.keys(i).length))}is3D(i){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof El&&Gc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(i){this._filterCompiled||(this._featureFilter=lh(this.filter,this.scope,i),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(i){this._stats&&(i.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(i){}queryIntersectsFeature(i,u,f,y,m,_,b,N,D){}}const Vy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class dh{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ri{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.add(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...i){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...i){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function xn(d,i=1){let u=0,f=0;return{members:d.map(y=>{const m=Vy[y.type].BYTES_PER_ELEMENT,_=u=Kf(u,Math.max(i,m)),b=y.components||1;return f=Math.max(f,m),u+=m*b,{name:y.name,type:y.type,components:b,offset:_}}),size:Kf(u,Math.max(f,i)),alignment:i}}function Kf(d,i){return Math.ceil(d/i)*i}class Su extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.int16[y+0]=u,this.int16[y+1]=f,i}}Su.prototype.bytesPerElement=4,xt(Su,"StructArrayLayout2i4");class Dd extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=y,i}}Dd.prototype.bytesPerElement=6,xt(Dd,"StructArrayLayout3i6");class Cu extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.int16[_+0]=u,this.int16[_+1]=f,this.int16[_+2]=y,this.int16[_+3]=m,i}}Cu.prototype.bytesPerElement=8,xt(Cu,"StructArrayLayout4i8");class Kc extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}Kc.prototype.bytesPerElement=4,xt(Kc,"StructArrayLayout1f4");class _f extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=4*i,_=2*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.float32[_+1]=y,i}}_f.prototype.bytesPerElement=8,xt(_f,"StructArrayLayout2i1f8");class Bh extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=4*i;return this.int16[m+0]=u,this.int16[m+1]=f,this.int16[m+2]=y,i}}Bh.prototype.bytesPerElement=8,xt(Bh,"StructArrayLayout3i8");class Vl extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=5*i;return this.int16[b+0]=u,this.int16[b+1]=f,this.int16[b+2]=y,this.int16[b+3]=m,this.int16[b+4]=_,i}}Vl.prototype.bytesPerElement=10,xt(Vl,"StructArrayLayout5i10");class vf extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=6*i,S=12*i,V=3*i;return this.int16[D+0]=u,this.int16[D+1]=f,this.uint8[S+4]=y,this.uint8[S+5]=m,this.uint8[S+6]=_,this.uint8[S+7]=b,this.float32[V+2]=N,i}}vf.prototype.bytesPerElement=12,xt(vf,"StructArrayLayout2i4ub1f12");class So extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.float32[m+0]=u,this.float32[m+1]=f,this.float32[m+2]=y,i}}So.prototype.bytesPerElement=12,xt(So,"StructArrayLayout3f12");class Md extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=6*i,N=3*i;return this.uint16[b+0]=u,this.uint16[b+1]=f,this.uint16[b+2]=y,this.uint16[b+3]=m,this.float32[N+2]=_,i}}Md.prototype.bytesPerElement=12,xt(Md,"StructArrayLayout4ui1f12");class Wf extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.uint16[_+0]=u,this.uint16[_+1]=f,this.uint16[_+2]=y,this.uint16[_+3]=m,i}}Wf.prototype.bytesPerElement=8,xt(Wf,"StructArrayLayout4ui8");class Yf extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=6*i;return this.int16[N+0]=u,this.int16[N+1]=f,this.int16[N+2]=y,this.int16[N+3]=m,this.int16[N+4]=_,this.int16[N+5]=b,i}}Yf.prototype.bytesPerElement=12,xt(Yf,"StructArrayLayout6i12");class hh extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I){const O=this.length;return this.resize(O+1),this.emplace(O,i,u,f,y,m,_,b,N,D,S,V,I)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O){const M=12*i;return this.int16[M+0]=u,this.int16[M+1]=f,this.int16[M+2]=y,this.int16[M+3]=m,this.uint16[M+4]=_,this.uint16[M+5]=b,this.uint16[M+6]=N,this.uint16[M+7]=D,this.int16[M+8]=S,this.int16[M+9]=V,this.int16[M+10]=I,this.int16[M+11]=O,i}}hh.prototype.bytesPerElement=24,xt(hh,"StructArrayLayout4i4ui4i24");class Wc extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=10*i,D=5*i;return this.int16[N+0]=u,this.int16[N+1]=f,this.int16[N+2]=y,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,i}}Wc.prototype.bytesPerElement=20,xt(Wc,"StructArrayLayout3i3f20");class Yc extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=4*i;return this.float32[_+0]=u,this.float32[_+1]=f,this.float32[_+2]=y,this.float32[_+3]=m,i}}Yc.prototype.bytesPerElement=16,xt(Yc,"StructArrayLayout4f16");class Xf extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}Xf.prototype.bytesPerElement=4,xt(Xf,"StructArrayLayout1ul4");class Id extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.uint16[y+0]=u,this.uint16[y+1]=f,i}}Id.prototype.bytesPerElement=4,xt(Id,"StructArrayLayout2ui4");class bu extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O){const M=this.length;return this.resize(M+1),this.emplace(M,i,u,f,y,m,_,b,N,D,S,V,I,O)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M){const B=20*i,Y=10*i;return this.int16[B+0]=u,this.int16[B+1]=f,this.int16[B+2]=y,this.int16[B+3]=m,this.int16[B+4]=_,this.float32[Y+3]=b,this.float32[Y+4]=N,this.float32[Y+5]=D,this.float32[Y+6]=S,this.int16[B+14]=V,this.uint32[Y+8]=I,this.uint16[B+18]=O,this.uint16[B+19]=M,i}}bu.prototype.bytesPerElement=40,xt(bu,"StructArrayLayout5i4f1i1ul2ui40");class Ac extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=8*i;return this.int16[D+0]=u,this.int16[D+1]=f,this.int16[D+2]=y,this.int16[D+4]=m,this.int16[D+5]=_,this.int16[D+6]=b,this.int16[D+7]=N,i}}Ac.prototype.bytesPerElement=16,xt(Ac,"StructArrayLayout3i2i2i16");class Jl extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=4*i,N=8*i;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=y,this.int16[N+6]=m,this.int16[N+7]=_,i}}Jl.prototype.bytesPerElement=16,xt(Jl,"StructArrayLayout2f1f2i16");class _c extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_){const b=this.length;return this.resize(b+1),this.emplace(b,i,u,f,y,m,_)}emplace(i,u,f,y,m,_,b){const N=20*i,D=5*i;return this.uint8[N+0]=u,this.uint8[N+1]=f,this.float32[D+1]=y,this.float32[D+2]=m,this.float32[D+3]=_,this.float32[D+4]=b,i}}_c.prototype.bytesPerElement=20,xt(_c,"StructArrayLayout2ub4f20");class Ps extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,u,f)}emplace(i,u,f,y){const m=3*i;return this.uint16[m+0]=u,this.uint16[m+1]=f,this.uint16[m+2]=y,i}}Ps.prototype.bytesPerElement=6,xt(Ps,"StructArrayLayout3ui6");class Ql extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee,ue,le,re,pe){const Se=this.length;return this.resize(Se+1),this.emplace(Se,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee,ue,le,re,pe)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee,ue,le,re,pe,Se){const xe=30*i,Ke=15*i,Ze=60*i;return this.int16[xe+0]=u,this.int16[xe+1]=f,this.int16[xe+2]=y,this.float32[Ke+2]=m,this.float32[Ke+3]=_,this.uint16[xe+8]=b,this.uint16[xe+9]=N,this.uint32[Ke+5]=D,this.uint32[Ke+6]=S,this.uint32[Ke+7]=V,this.uint16[xe+16]=I,this.uint16[xe+17]=O,this.uint16[xe+18]=M,this.float32[Ke+10]=B,this.float32[Ke+11]=Y,this.uint8[Ze+48]=ee,this.uint8[Ze+49]=ue,this.uint8[Ze+50]=le,this.uint32[Ke+13]=re,this.int16[xe+28]=pe,this.uint8[Ze+58]=Se,i}}Ql.prototype.bytesPerElement=60,xt(Ql,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Hu extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee,ue,le,re,pe,Se,xe,Ke,Ze,He,ft,Ye,gt,bt,Rt,Vt,Et){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee,ue,le,re,pe,Se,xe,Ke,Ze,He,ft,Ye,gt,bt,Rt,Vt,Et)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee,ue,le,re,pe,Se,xe,Ke,Ze,He,ft,Ye,gt,bt,Rt,Vt,Et,Ut){const Dt=20*i,jt=40*i,ga=80*i;return this.float32[Dt+0]=u,this.float32[Dt+1]=f,this.int16[jt+4]=y,this.int16[jt+5]=m,this.int16[jt+6]=_,this.int16[jt+7]=b,this.int16[jt+8]=N,this.int16[jt+9]=D,this.int16[jt+10]=S,this.int16[jt+11]=V,this.int16[jt+12]=I,this.uint16[jt+13]=O,this.uint16[jt+14]=M,this.uint16[jt+15]=B,this.uint16[jt+16]=Y,this.uint16[jt+17]=ee,this.uint16[jt+18]=ue,this.uint16[jt+19]=le,this.uint16[jt+20]=re,this.uint16[jt+21]=pe,this.uint16[jt+22]=Se,this.uint16[jt+23]=xe,this.uint16[jt+24]=Ke,this.uint16[jt+25]=Ze,this.uint16[jt+26]=He,this.uint16[jt+27]=ft,this.uint32[Dt+14]=Ye,this.float32[Dt+15]=gt,this.float32[Dt+16]=bt,this.float32[Dt+17]=Rt,this.float32[Dt+18]=Vt,this.uint8[ga+76]=Et,this.uint16[jt+39]=Ut,i}}Hu.prototype.bytesPerElement=80,xt(Hu,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class Hs extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m){const _=this.length;return this.resize(_+1),this.emplace(_,i,u,f,y,m)}emplace(i,u,f,y,m,_){const b=5*i;return this.float32[b+0]=u,this.float32[b+1]=f,this.float32[b+2]=y,this.float32[b+3]=m,this.float32[b+4]=_,i}}Hs.prototype.bytesPerElement=20,xt(Hs,"StructArrayLayout5f20");class xu extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=7*i;return this.float32[D+0]=u,this.float32[D+1]=f,this.float32[D+2]=y,this.float32[D+3]=m,this.float32[D+4]=_,this.float32[D+5]=b,this.float32[D+6]=N,i}}xu.prototype.bytesPerElement=28,xt(xu,"StructArrayLayout7f28");class fh extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V){const I=this.length;return this.resize(I+1),this.emplace(I,i,u,f,y,m,_,b,N,D,S,V)}emplace(i,u,f,y,m,_,b,N,D,S,V,I){const O=11*i;return this.float32[O+0]=u,this.float32[O+1]=f,this.float32[O+2]=y,this.float32[O+3]=m,this.float32[O+4]=_,this.float32[O+5]=b,this.float32[O+6]=N,this.float32[O+7]=D,this.float32[O+8]=S,this.float32[O+9]=V,this.float32[O+10]=I,i}}fh.prototype.bytesPerElement=44,xt(fh,"StructArrayLayout11f44");class Jf extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D){const S=this.length;return this.resize(S+1),this.emplace(S,i,u,f,y,m,_,b,N,D)}emplace(i,u,f,y,m,_,b,N,D,S){const V=9*i;return this.float32[V+0]=u,this.float32[V+1]=f,this.float32[V+2]=y,this.float32[V+3]=m,this.float32[V+4]=_,this.float32[V+5]=b,this.float32[V+6]=N,this.float32[V+7]=D,this.float32[V+8]=S,i}}Jf.prototype.bytesPerElement=36,xt(Jf,"StructArrayLayout9f36");class Gh extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const f=this.length;return this.resize(f+1),this.emplace(f,i,u)}emplace(i,u,f){const y=2*i;return this.float32[y+0]=u,this.float32[y+1]=f,i}}Gh.prototype.bytesPerElement=8,xt(Gh,"StructArrayLayout2f8");class ph extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,f,y){const m=this.length;return this.resize(m+1),this.emplace(m,i,u,f,y)}emplace(i,u,f,y,m){const _=6*i;return this.uint32[3*i+0]=u,this.uint16[_+2]=f,this.uint16[_+3]=y,this.uint16[_+4]=m,i}}ph.prototype.bytesPerElement=12,xt(ph,"StructArrayLayout1ul3ui12");class Ld extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}Ld.prototype.bytesPerElement=2,xt(Ld,"StructArrayLayout1ui2");class Um extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y){const ee=this.length;return this.resize(ee+1),this.emplace(ee,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y)}emplace(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee){const ue=16*i;return this.float32[ue+0]=u,this.float32[ue+1]=f,this.float32[ue+2]=y,this.float32[ue+3]=m,this.float32[ue+4]=_,this.float32[ue+5]=b,this.float32[ue+6]=N,this.float32[ue+7]=D,this.float32[ue+8]=S,this.float32[ue+9]=V,this.float32[ue+10]=I,this.float32[ue+11]=O,this.float32[ue+12]=M,this.float32[ue+13]=B,this.float32[ue+14]=Y,this.float32[ue+15]=ee,i}}Um.prototype.bytesPerElement=64,xt(Um,"StructArrayLayout16f64");class Gp extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,f,y,m,_,b){const N=this.length;return this.resize(N+1),this.emplace(N,i,u,f,y,m,_,b)}emplace(i,u,f,y,m,_,b,N){const D=10*i,S=5*i;return this.uint16[D+0]=u,this.uint16[D+1]=f,this.uint16[D+2]=y,this.uint16[D+3]=m,this.float32[S+2]=_,this.float32[S+3]=b,this.float32[S+4]=N,i}}Gp.prototype.bytesPerElement=20,xt(Gp,"StructArrayLayout4ui3f20");class km extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.int16[1*i+0]=u,i}}km.prototype.bytesPerElement=2,xt(km,"StructArrayLayout1i2");class zy extends ri{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint8[1*i+0]=u,i}}zy.prototype.bytesPerElement=1,xt(zy,"StructArrayLayout1ub1");class Gg extends dh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Gg.prototype.size=40;class jp extends bu{get(i){return new Gg(this,i)}}xt(jp,"CollisionBoxArray");class il extends dh{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}il.prototype.size=60;class fl extends Ql{get(i){return new il(this,i)}}xt(fl,"PlacedSymbolArray");class jg extends dh{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(i){this._structArray.uint32[this._pos4+14]=i}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(i){this._structArray.float32[this._pos4+18]=i}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}jg.prototype.size=80;class Zg extends Hu{get(i){return new jg(this,i)}}xt(Zg,"SymbolInstanceArray");class qg extends Kc{getoffsetX(i){return this.float32[1*i+0]}}xt(qg,"GlyphOffsetArray");class Zp extends Su{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}xt(Zp,"SymbolLineVertexArray");class qp extends dh{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}qp.prototype.size=12;class pl extends ph{get(i){return new qp(this,i)}}xt(pl,"FeatureIndexArray");class Qf extends Id{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}xt(Qf,"FillExtrusionCentroidArray");class Hg extends dh{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Hg.prototype.size=6;class $g extends Dd{get(i){return new Hg(this,i)}}xt($g,"FillExtrusionWallArray");const C0=xn([{name:"a_pos",components:2,type:"Int16"}],4),Kg=xn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Oi{constructor(i=[]){this.segments=i}_prepareSegment(i,u,f,y){let m=this.segments[this.segments.length-1];return i>Oi.MAX_VERTEX_ARRAY_LENGTH&&en(`Max vertices per segment is ${Oi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!m||m.vertexLength+i>Oi.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==y)&&(m={vertexOffset:u,primitiveOffset:f,vertexLength:0,primitiveLength:0},y!==void 0&&(m.sortKey=y),this.segments.push(m)),m}prepareSegment(i,u,f,y){return this._prepareSegment(i,u.length,f.length,y)}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,f,y){return new Oi([{vertexOffset:i,primitiveOffset:u,vertexLength:f,primitiveLength:y,vaos:{},sortKey:0}])}}function Oy(d,i){return 256*(d=ka(Math.floor(d),0,255))+ka(Math.floor(i),0,255)}Oi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xt(Oi,"SegmentVector");const Dy=xn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Wg=xn([{name:"a_dash",components:4,type:"Uint16"}]);class ep{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(i,u,f,y){this.ids.push(Bm(i)),this.positions.push(u,f,y)}eachPosition(i,u){const f=Bm(i);let y=0,m=this.ids.length-1;for(;y<m;){const _=y+m>>1;this.ids[_]>=f?m=_:y=_+1}for(;this.ids[y]===f;)u(this.positions[3*y],this.positions[3*y+1],this.positions[3*y+2]),y++}static serialize(i,u){const f=new Float64Array(i.ids),y=new Uint32Array(i.positions);return Hp(f,y,0,f.length-1),u&&(u.add(f.buffer),u.add(y.buffer)),{ids:f,positions:y}}static deserialize(i){const u=new ep;let f;u.ids=i.ids,u.positions=i.positions;for(const y of u.ids)y!==f&&u.uniqueIds.push(y),f=y;return u.indexed=!0,u}}function Bm(d){const i=+d;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:oo(String(d))}function Hp(d,i,u,f){for(;u<f;){const y=d[u+f>>1];let m=u-1,_=f+1;for(;;){do m++;while(d[m]<y);do _--;while(d[_]>y);if(m>=_)break;$p(d,m,_),$p(i,3*m,3*_),$p(i,3*m+1,3*_+1),$p(i,3*m+2,3*_+2)}_-u<f-_?(Hp(d,i,u,_),u=_+1):(Hp(d,i,_+1,f),f=_)}}function $p(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}xt(ep,"FeaturePositionMap");class Fd{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,u),this.initialized=!0),!!this.location}set(i,u,f){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class vc extends Fd{constructor(i){super(i),this.current=0}set(i,u,f){this.fetchUniformLocation(i,u)&&this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}}class ms extends Fd{constructor(i){super(i),this.current=0}set(i,u,f){this.fetchUniformLocation(i,u)&&this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))}}class Xc extends Fd{constructor(i){super(i),this.current=[0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1])))}}class tp extends Fd{constructor(i){super(i),this.current=[0,0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2])))}}class ap extends Fd{constructor(i){super(i),this.current=[0,0,0,0]}set(i,u,f){this.fetchUniformLocation(i,u)&&(f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3])))}}class wf extends Fd{constructor(i){super(i),this.current=bn.transparent.toRenderColor(null)}set(i,u,f){this.fetchUniformLocation(i,u)&&(f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a)))}}const mh=new Float32Array(16);class Jc extends Fd{constructor(i){super(i),this.current=mh}set(i,u,f){if(this.fetchUniformLocation(i,u)){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let y=1;y<16;y++)if(f[y]!==this.current[y]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}}}const Ud=new Float32Array(9),Yg=new Float32Array(4);class Gm extends Fd{constructor(i){super(i),this.current=Yg}set(i,u,f){if(this.fetchUniformLocation(i,u)){for(let y=0;y<4;y++)if(f[y]!==this.current[y]){this.current=f,this.gl.uniformMatrix2fv(this.location,!1,f);break}}}}function rp(d){return[Oy(255*d.r,255*d.g),Oy(255*d.b,255*d.a)]}class Rf{constructor(i,u,f,y){this.value=i,this.uniformNames=u.map(m=>`u_${m}`),this.type=f,this.context=y}setUniform(i,u,f,y,m){const _=y.constantOr(this.value);u.set(i,m,_ instanceof bn?_.toRenderColor(this.lutExpression&&this.lutExpression.value==="none"?null:this.context.lut):_)}getBinding(i,u){return this.type==="color"?new wf(i):new ms(i)}}class wc{constructor(i,u){this.uniformNames=u.map(f=>`u_${f}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,u,f,y,m){const _=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;_&&u.set(i,m,_)}getBinding(i,u){return u==="u_pattern"||u==="u_dash"?new ap(i):new ms(i)}}class $s{constructor(i,u,f,y){this.expression=i,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(m=>({name:`a_${m}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(i,u,f,y,m,_,b){const N=this.paintVertexArray.length,D=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.expression.kind==="constant"&&this.expression.value,S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.lutExpression.value)==="none";this.paintVertexArray.resize(i),this._setPaintValue(N,i,D,S?null:this.context.lut)}updatePaintArray(i,u,f,y,m,_,b){const N=this.expression.kind==="composite"||this.expression.kind==="source"?this.expression.evaluate({zoom:0,brightness:b},f,y,void 0,m):this.expression.kind==="constant"&&this.expression.value,D=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:b}),f,y,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(i,u,N,D?null:this.context.lut)}_setPaintValue(i,u,f,y){if(this.type==="color"){const m=rp(f.toRenderColor(y));for(let _=i;_<u;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let m=i;m<u;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&this.lutExpression.kind!=="constant"&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||this.expression.kind!=="constant"&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class $u{constructor(i,u,f,y,m,_){this.expression=i,this.uniformNames=u.map(b=>`u_${b}_t`),this.type=f,this.useIntegerZoom=y,this.context=m,this.maxValue=0,this.paintVertexAttributes=u.map(b=>({name:`a_${b}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(i,u,f,y,m,_,b){const N=this.expression.evaluate(new vn(this.context.zoom,{brightness:_}),u,{},m,y,b),D=this.expression.evaluate(new vn(this.context.zoom+1,{brightness:_}),u,{},m,y,b),S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:_}),u,{},m,y,b):this.lutExpression.value)==="none",V=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(V,i,N,D,S?null:this.context.lut)}updatePaintArray(i,u,f,y,m,_,b){const N=this.expression.evaluate({zoom:this.context.zoom,brightness:b},f,y,void 0,m),D=this.expression.evaluate({zoom:this.context.zoom+1,brightness:b},f,y,void 0,m),S=!!this.lutExpression&&(this.lutExpression.kind==="composite"||this.lutExpression.kind==="source"?this.lutExpression.evaluate(new vn(0,{brightness:b}),f,y,void 0,m):this.lutExpression.value)==="none";this._setPaintValue(i,u,N,D,S?null:this.context.lut)}_setPaintValue(i,u,f,y,m){if(this.type==="color"){const _=rp(f.toRenderColor(m)),b=rp(f.toRenderColor(m));for(let N=i;N<u;N++)this.paintVertexArray.emplace(N,_[0],_[1],b[0],b[1])}else{for(let _=i;_<u;_++)this.paintVertexArray.emplace(_,f,y);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(y))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u,f,y,m){const _=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,b=ka(this.expression.interpolationFactor(_,this.context.zoom,this.context.zoom+1),0,1);u.set(i,m,b)}getBinding(i,u){return new ms(i)}}class jh{constructor(i,u,f,y,m){this.expression=i,this.layerId=m,this.paintVertexAttributes=(f==="array"?Wg:Dy).members;for(let _=0;_<u.length;++_);this.paintVertexArray=new y}populatePaintArray(i,u,f,y){const m=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(m,i,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(i,u,f,y,m,_,b){this._setPaintValues(i,u,f.patterns&&f.patterns[this.layerId],_)}_setPaintValues(i,u,f,y){if(!y||!f)return;const m=y[f];if(!m)return;const{tl:_,br:b,pixelRatio:N}=m;for(let D=i;D<u;D++)this.paintVertexArray.emplace(D,_[0],_[1],b[0],b[1],N)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ku{constructor(i,u,f=()=>!0){this.binders={},this._buffers=[],this.context=u;const y=[];for(const m in i.paint._values){const _=i.paint.get(m);if(m.endsWith("-use-theme")||!f(m)||!(_ instanceof El&&Gc(_.property.specification)))continue;const b=Tf(m,i.type),N=_.value,D=_.property.specification.type,S=!!_.property.useIntegerZoom,V=m==="line-dasharray"||m.endsWith("pattern"),I=i.paint.get(`${m}-use-theme`),O=m==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant"||I&&I.value.kind!=="constant";if(N.kind!=="constant"||O)if(N.kind==="source"||O||V){const M=My(m,D,"source");this.binders[m]=V?new jh(N,b,D,M,i.id):new $s(N,b,D,M),y.push(`/a_${m}`)}else{const M=My(m,D,"composite");this.binders[m]=new $u(N,b,D,S,u,M),y.push(`/z_${m}`)}else this.binders[m]=V?new wc(N.value,b):new Rf(N.value,b,D,u),y.push(`/u_${m}`);I&&(this.binders[m].lutExpression=I.value)}this.cacheKey=y.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof $s||u instanceof $u?u.maxValue:0}populatePaintArrays(i,u,f,y,m,_,b){for(const N in this.binders){const D=this.binders[N];D.context=this.context,(D instanceof $s||D instanceof $u||D instanceof jh)&&D.populatePaintArray(i,u,f,y,m,_,b)}}setConstantPatternPositions(i){for(const u in this.binders){const f=this.binders[u];f instanceof wc&&f.setConstantPatternPositions(i)}}updatePaintArrays(i,u,f,y,m,_,b,N,D){let S=!1;const V=Object.keys(i),I=V.length!==0&&!N,O=I?V:u.uniqueIds;this.context.lut=m.lut;for(const M in this.binders){const B=this.binders[M];if(B.context=this.context,(B instanceof $s||B instanceof $u||B instanceof jh)&&B.expression&&B.expression.kind&&B.expression.kind!=="constant"&&(B.expression.isStateDependent===!0||B.expression.isLightConstant===!1)){const Y=m.paint.get(M);B.expression=Y.value;for(const ee of O){const ue=i[ee.toString()];u.eachPosition(ee,(le,re,pe)=>{const Se=y.feature(le);B.updatePaintArray(re,pe,Se,ue,_,b,D)})}if(!I)for(const ee of f.uniqueIds){const ue=i[ee.toString()];f.eachPosition(ee,(le,re,pe)=>{const Se=y.feature(le);B.updatePaintArray(re,pe,Se,ue,_,b,D)})}S=!0}}return S}defines(){const i=[];for(const u in this.binders){const f=this.binders[u];(f instanceof Rf||f instanceof wc)&&i.push(...f.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof $s||f instanceof $u||f instanceof jh)for(let y=0;y<f.paintVertexAttributes.length;y++)i.push(f.paintVertexAttributes[y].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Rf||f instanceof wc||f instanceof $u)for(const y of f.uniformNames)i.push(y)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const u=[];for(const f in this.binders){const y=this.binders[f];if(y instanceof Rf||y instanceof wc||y instanceof $u)for(const m of y.uniformNames)u.push({name:m,property:f,binding:y.getBinding(i,m)})}return u}setUniforms(i,u,f,y,m){for(const{name:_,property:b,binding:N}of f)this.binders[b].setUniform(i,N,m,y.get(b),_)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const u=this.binders[i];(u instanceof $s||u instanceof $u||u instanceof jh)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(i){for(const u in this.binders){const f=this.binders[u];(f instanceof $s||f instanceof $u||f instanceof jh)&&f.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof $s||u instanceof $u||u instanceof jh)&&u.destroy()}}}class yh{constructor(i,u,f=()=>!0){this.programConfigurations={};for(const y of i)this.programConfigurations[y.id]=new Ku(y,u,f);this.needsUpload=!1,this._featureMap=new ep,this._featureMapWithoutIds=new ep,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(i,u,f,y,m,_,b,N){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(i,u,y,m,_,b,N);u.id!==void 0?this._featureMap.add(u.id,f,this._bufferOffset,i):(this._featureMapWithoutIds.add(this._idlessCounter,f,this._bufferOffset,i),this._idlessCounter+=1),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,f,y,m,_,b){for(const N of f)this.needsUpload=this.programConfigurations[N.id].updatePaintArrays(i,this._featureMap,this._featureMapWithoutIds,u,N,y,m,_,b||0)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const Xg={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Tf(d,i){return Xg[d]||[d.replace(`${i}-`,"").replace(/-/g,"_")]}const Sf={"line-pattern":{source:Md,composite:Md},"fill-pattern":{source:Md,composite:Md},"fill-extrusion-pattern":{source:Md,composite:Md},"line-dasharray":{source:Wf,composite:Wf}},Cf={color:{source:Gh,composite:Yc},number:{source:Kc,composite:Gh}};function My(d,i,u){const f=Sf[d];return f&&f[u]||Cf[i][u]}xt(Rf,"ConstantBinder"),xt(wc,"PatternConstantBinder"),xt($s,"SourceExpressionBinder"),xt(jh,"PatternCompositeBinder"),xt($u,"CompositeExpressionBinder"),xt(Ku,"ProgramConfiguration",{omit:["_buffers"]}),xt(yh,"ProgramConfigurationSet");const ml=Na/Math.PI/2,gh=5,Kp=6,Jg=16383,np=64,bf=[np,32,16],Bo=-ml,Wu=ml;function ip(d,i,u,f=ml){return u=Va(u),[d*Math.sin(u)*f,-i*f,d*Math.cos(u)*f]}function Rc(d,i,u){return ip(Math.cos(Va(d)),Math.sin(Va(d)),i,u)}const sl=63710088e-1,Iy=2*Math.PI*sl;class Ln{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ln(pn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,f=this.lat*u,y=i.lat*u,m=Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos((i.lng-this.lng)*u);return sl*Math.acos(Math.min(m,1))}toBounds(i=0){const u=360*i/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new Zh({lng:this.lng-f,lat:this.lat-u},{lng:this.lng+f,lat:this.lat+u})}toEcef(i){return Rc(this.lat,this.lng,ml+i*ml/sl)}static convert(i){if(i instanceof Ln)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Ln(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Ln(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Zh{constructor(i,u){if(i)if(u)this.setSouthWest(i).setNorthEast(u);else if(i.length===4){const f=i;this.setSouthWest([f[0],f[1]]).setNorthEast([f[2],f[3]])}else{const f=i;this.setSouthWest(f[0]).setNorthEast(f[1])}}setNorthEast(i){return this._ne=i instanceof Ln?new Ln(i.lng,i.lat):Ln.convert(i),this}setSouthWest(i){return this._sw=i instanceof Ln?new Ln(i.lng,i.lat):Ln.convert(i),this}extend(i){const u=this._sw,f=this._ne;let y,m;if(i instanceof Ln)y=i,m=i;else{if(!(i instanceof Zh))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Zh.convert(i)):this.extend(Ln.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(Ln.convert(i)):this;if(y=i._sw,m=i._ne,!y||!m)return this}return u||f?(u.lng=Math.min(y.lng,u.lng),u.lat=Math.min(y.lat,u.lat),f.lng=Math.max(m.lng,f.lng),f.lat=Math.max(m.lat,f.lat)):(this._sw=new Ln(y.lng,y.lat),this._ne=new Ln(m.lng,m.lat)),this}getCenter(){return new Ln((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ln(this.getWest(),this.getNorth())}getSouthEast(){return new Ln(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:f}=Ln.convert(i);let y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(i){if(i)return i instanceof Zh?i:new Zh(i)}}const Qg=0,eA=25.5;function sp(d){return Iy*Math.cos(d*Math.PI/180)}function yl(d){return(180+d)/360}function xi(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function Go(d,i){return d/sp(i)}function Pu(d){return 360*d-180}function wi(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}function Ly(d,i){return d*sp(wi(i))}const Eu=85.051129;function tA(d){return Math.cos(Va(ka(d,-85.051129,Eu)))}function qh(d,i){const u=ka(i,Qg,eA),f=Math.pow(2,u);return tA(d)*Iy/(512*f)}function jo(d){return 1/Math.cos(d*Math.PI/180)}function g(d,i=0){const u=Math.exp(Math.PI*(1-(d.y+i/Na)/(1<<d.z)*2));return 80150034*u/(u*u+1)/Na/(1<<d.z)}class o{constructor(i,u,f=0){this.x=+i,this.y=+u,this.z=+f}static fromLngLat(i,u=0){const f=Ln.convert(i);return new o(yl(f.lng),xi(f.lat),Go(u,f.lat))}toLngLat(){return new Ln(Pu(this.x),wi(this.y))}toAltitude(){return Ly(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Iy*jo(wi(this.y))}}function c(d,i,u,f,y,m,_,b,N){const D=(i+f)/2,S=(u+y)/2,V=new Bt(D,S);b(V),function(I,O,M,B,Y,ee){const ue=M-Y,le=B-ee;return Math.abs((B-O)*ue-(M-I)*le)/Math.hypot(ue,le)}(V.x,V.y,m.x,m.y,_.x,_.y)>=N?(c(d,i,u,D,S,m,V,b,N),c(d,D,S,f,y,V,_,b,N)):d.push(_)}function A(d,i,u){let f=d[0],y=f.x,m=f.y;i(f);const _=[f];for(let b=1;b<d.length;b++){const N=d[b],{x:D,y:S}=N;i(N),c(_,y,m,D,S,f,N,i,u),y=D,m=S,f=N}return _}function R(d,i,u,f){if(f(i,u)){const y=i.add(u)._mult(.5);R(d,i,y,f),R(d,y,u,f)}else d.push(u)}function C(d,i){let u=d[0];const f=[u];for(let y=1;y<d.length;y++){const m=d[y];R(f,u,m,i),u=m}return f}const P=Math.pow(2,14)-1,L=-P-1;function j(d,i){const u=Math.round(d.x*i),f=Math.round(d.y*i);return d.x=ka(u,L,P),d.y=ka(f,L,P),(u<d.x||u>d.x+1||f<d.y||f>d.y+1)&&en("Geometry exceeds allowed extent, reduce your vector tile buffer size"),d}function Z(d,i,u){const f=d.loadGeometry(),y=d.extent,m=Na/y;if(i&&u&&u.projection.isReprojectedInTileSpace){const _=1<<i.z,{scale:b,x:N,y:D,projection:S}=u,V=I=>{const O=Pu((i.x+I.x/y)/_),M=wi((i.y+I.y/y)/_),B=S.project(O,M);I.x=(B.x*b-N)*y,I.y=(B.y*b-D)*y};for(let I=0;I<f.length;I++)if(d.type!==1)f[I]=A(f[I],V,1);else{const O=[];for(const M of f[I])M.x<0||M.x>=y||M.y<0||M.y>=y||(V(M),O.push(M));f[I]=O}}for(const _ of f)for(const b of _)j(b,m);return f}function K(d,i){return{type:d.type,id:d.id,properties:d.properties,geometry:i?Z(d):[]}}function te(d,i,u,f,y){d.emplaceBack(2*i+(f+1)/2,2*u+(y+1)/2)}function ae(d,i,u){d.emplaceBack(i.x,i.y,i.z,u[0]*16384,u[1]*16384,u[2]*16384)}class ce{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new Su,this.indexArray=new Ps,this.segments=new Oi,this.programConfigurations=new yh(i.layers,{zoom:i.zoom,lut:i.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}updateFootprints(i,u){}populate(i,u,f,y){const m=this.layers[0],_=[];let b=null;m.type==="circle"&&(b=m.layout.get("circle-sort-key"));for(const{feature:D,id:S,index:V,sourceLayerIndex:I}of i){const O=this.layers[0]._featureFilter.needGeometry,M=K(D,O);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),M,f))continue;const B=b?b.evaluate(M,{},f):void 0,Y={id:S,properties:D.properties,type:D.type,sourceLayerIndex:I,index:V,geometry:O?M.geometry:Z(D,f,y),patterns:{},sortKey:B};_.push(Y)}b&&_.sort((D,S)=>D.sortKey-S.sortKey);let N=null;y.projection.name==="globe"&&(this.globeExtVertexArray=new Yf,N=y.projection);for(const D of _){const{geometry:S,index:V,sourceLayerIndex:I}=D,O=i[V].feature;this.addFeature(D,S,V,u.availableImages,f,N,u.brightness),u.featureIndex.insert(O,S,V,I,this.index)}}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,C0.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,Kg.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,u,f,y,m,_,b){for(const N of u)for(const D of N){const S=D.x,V=D.y;if(S<0||S>=Na||V<0||V>=Na)continue;if(_){const M=_.projectTilePoint(S,V,m),B=_.upVector(m,S,V),Y=this.globeExtVertexArray;ae(Y,M,B),ae(Y,M,B),ae(Y,M,B),ae(Y,M,B)}const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),O=I.vertexLength;te(this.layoutVertexArray,S,V,-1,-1),te(this.layoutVertexArray,S,V,1,-1),te(this.layoutVertexArray,S,V,1,1),te(this.layoutVertexArray,S,V,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,{},y,m,b)}}function Ce(d,i){for(let u=0;u<d.length;u++)if(it(i,d[u]))return!0;for(let u=0;u<i.length;u++)if(it(d,i[u]))return!0;return!!Ge(d,i)}function Re(d,i,u){return!!it(d,i)||!!Xe(i,d,u)}function Pe(d,i){if(d.length===1)return nt(i,d[0]);for(let u=0;u<i.length;u++){const f=i[u];for(let y=0;y<f.length;y++)if(it(d,f[y]))return!0}for(let u=0;u<d.length;u++)if(nt(i,d[u]))return!0;for(let u=0;u<i.length;u++)if(Ge(d,i[u]))return!0;return!1}function Ne(d,i,u){if(d.length>1){if(Ge(d,i))return!0;for(let f=0;f<i.length;f++)if(Xe(i[f],d,u))return!0}for(let f=0;f<d.length;f++)if(Xe(d[f],i,u))return!0;return!1}function Ge(d,i){if(d.length===0||i.length===0)return!1;for(let u=0;u<d.length-1;u++){const f=d[u],y=d[u+1];for(let m=0;m<i.length-1;m++)if(et(f,y,i[m],i[m+1]))return!0}return!1}function et(d,i,u,f){return Er(d,u,f)!==Er(i,u,f)&&Er(d,i,u)!==Er(d,i,f)}function Xe(d,i,u){const f=u*u;if(i.length===1)return d.distSqr(i[0])<f;for(let y=1;y<i.length;y++)if(ct(d,i[y-1],i[y])<f)return!0;return!1}function ct(d,i,u){const f=i.distSqr(u);if(f===0)return d.distSqr(i);const y=((d.x-i.x)*(u.x-i.x)+(d.y-i.y)*(u.y-i.y))/f;return d.distSqr(y<0?i:y>1?u:u.sub(i)._mult(y)._add(i))}function nt(d,i){let u,f,y,m=!1;for(let _=0;_<d.length;_++){u=d[_];for(let b=0,N=u.length-1;b<u.length;N=b++)f=u[b],y=u[N],f.y>i.y!=y.y>i.y&&i.x<(y.x-f.x)*(i.y-f.y)/(y.y-f.y)+f.x&&(m=!m)}return m}function it(d,i){let u=!1;for(let f=0,y=d.length-1;f<d.length;y=f++){const m=d[f],_=d[y];m.y>i.y!=_.y>i.y&&i.x<(_.x-m.x)*(i.y-m.y)/(_.y-m.y)+m.x&&(u=!u)}return u}function st(d,i,u,f,y){for(const _ of d)if(i<=_.x&&u<=_.y&&f>=_.x&&y>=_.y)return!0;const m=[new Bt(i,u),new Bt(i,y),new Bt(f,y),new Bt(f,u)];if(d.length>2){for(const _ of m)if(it(d,_))return!0}for(let _=0;_<d.length-1;_++)if(yt(d[_],d[_+1],m))return!0;return!1}function yt(d,i,u){const f=u[0],y=u[2];if(d.x<f.x&&i.x<f.x||d.x>y.x&&i.x>y.x||d.y<f.y&&i.y<f.y||d.y>y.y&&i.y>y.y)return!1;const m=Er(d,i,u[0]);return m!==Er(d,i,u[1])||m!==Er(d,i,u[2])||m!==Er(d,i,u[3])}function wt(d,i,u,f,y,m){let _=i.y-d.y,b=d.x-i.x;if(m=m||0){const N=_*_+b*b;if(N===0)return!0;const D=Math.sqrt(N);_/=D,b/=D}return!((u.x-d.x)*_+(u.y-d.y)*b-m<0||(f.x-d.x)*_+(f.y-d.y)*b-m<0||(y.x-d.x)*_+(y.y-d.y)*b-m<0)}function Yt(d,i,u,f,y,m,_){return!(wt(d,i,f,y,m,_)||wt(i,u,f,y,m,_)||wt(u,d,f,y,m,_)||wt(f,y,d,i,u,_)||wt(y,m,d,i,u,_)||wt(m,f,d,i,u,_))}function Lt(d,i,u){const f=i.paint.get(d).value;return f.kind==="constant"?f.value:u.programConfigurations.get(i.id).getMaxValue(d)}function aa(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function ua(d,i,u,f,y){if(!i[0]&&!i[1])return d;const m=Bt.convert(i)._mult(y);u==="viewport"&&m._rotate(-f);const _=[];for(let b=0;b<d.length;b++)_.push(d[b].sub(m));return _}function Sa(d,i,u,f){const y=Bt.convert(d)._mult(f);return i==="viewport"&&y._rotate(-u),y}let Mt,ia;xt(ce,"CircleBucket",{omit:["layers"]});var Nt,sa={exports:{}},Qt=(Nt||(Nt=1,function(d,i){(function(u){function f(m,_,b){var N=y(256*m,256*(_=Math.pow(2,b)-_-1),b),D=y(256*(m+1),256*(_+1),b);return N[0]+","+N[1]+","+D[0]+","+D[1]}function y(m,_,b){var N=2*Math.PI*6378137/256/Math.pow(2,b);return[m*N-2*Math.PI*6378137/2,_*N-2*Math.PI*6378137/2]}u.getURL=function(m,_,b,N,D,S){return S=S||{},m+"?"+["bbox="+f(b,N,D),"format="+(S.format||"image/png"),"service="+(S.service||"WMS"),"version="+(S.version||"1.1.1"),"request="+(S.request||"GetMap"),"srs="+(S.srs||"EPSG:3857"),"width="+(S.width||256),"height="+(S.height||256),"layers="+_].join("&")},u.getTileBBox=f,u.getMercCoords=y,Object.defineProperty(u,"__esModule",{value:!0})})(i)}(0,sa.exports)),sa.exports);class da{constructor(i,u,f){this.z=i,this.x=u,this.y=f,this.key=Ia(0,i,i,u,f)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u){const f=Qt.getTileBBox(this.x,this.y,this.z),y=function(m,_,b){let N,D="";for(let S=m;S>0;S--)N=1<<S-1,D+=(_&N?1:0)+(b&N?2:0);return D}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",y).replace("{bbox-epsg-3857}",f)}toString(){return`${this.z}/${this.x}/${this.y}`}}class $t{constructor(i,u){this.wrap=i,this.canonical=u,this.key=Ia(i,u.z,u.z,u.x,u.y)}}class pa{constructor(i,u,f,y,m){this.overscaledZ=i,this.wrap=u,this.canonical=new da(f,+y,+m),this.key=u===0&&i===f?this.canonical.key:Ia(u,i,f,y,m)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const u=this.canonical.z-i;return i>this.canonical.z?new pa(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pa(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u=!0){if(this.overscaledZ===i&&u)return this.key;if(i>this.canonical.z)return Ia(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y);{const f=this.canonical.z-i;return Ia(this.wrap*+u,i,i,this.canonical.x>>f,this.canonical.y>>f)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.z<this.canonical.z&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new pa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,y=2*this.canonical.y;return[new pa(u,this.wrap,u,f,y),new pa(u,this.wrap,u,f+1,y),new pa(u,this.wrap,u,f,y+1),new pa(u,this.wrap,u,f+1,y+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new pa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new pa(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new $t(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ia(d,i,u,f,y){const m=1<<Math.min(u,22);let _=m*(y%m)+f%m;return d&&u<22&&(_+=m*m*((d<0?-2*d-1:2*d)%(1<<2*(22-u)))),16*(32*_+u)+(i-u)}const La=[d=>{let i=d.canonical.x-1,u=d.wrap;return i<0&&(i=(1<<d.canonical.z)-1,u--),new pa(d.overscaledZ,u,d.canonical.z,i,d.canonical.y)},d=>{let i=d.canonical.x+1,u=d.wrap;return i===1<<d.canonical.z&&(i=0,u++),new pa(d.overscaledZ,u,d.canonical.z,i,d.canonical.y)},d=>new pa(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,(d.canonical.y===0?1<<d.canonical.z:d.canonical.y)-1),d=>new pa(d.overscaledZ,d.wrap,d.canonical.z,d.canonical.x,d.canonical.y===(1<<d.canonical.z)-1?0:d.canonical.y+1)];xt(da,"CanonicalTileID"),xt(pa,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Pa=xn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:sr}=Pa,Lr=xn([{name:"a_pos_3",components:3,type:"Int16"}]);var pr=xn([{name:"a_pos",type:"Int16",components:2}]);class zr{constructor(i,u){this.pos=i,this.dir=u}intersectsPlane(i,u,f){const y=ve.vec2.dot(u,this.dir);if(Math.abs(y)<1e-6)return!1;const m=((i[0]-this.pos[0])*u[0]+(i[1]-this.pos[1])*u[1])/y;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,!0}}class Cr{constructor(i,u){this.pos=i,this.dir=u}intersectsPlane(i,u,f){const y=ve.vec3.dot(u,this.dir);if(Math.abs(y)<1e-6)return!1;const m=((i[0]-this.pos[0])*u[0]+(i[1]-this.pos[1])*u[1]+(i[2]-this.pos[2])*u[2])/y;return f[0]=this.pos[0]+this.dir[0]*m,f[1]=this.pos[1]+this.dir[1]*m,f[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(i,u,f){if(ve.vec3.equals(this.pos,i)||u===0)return f[0]=f[1]=f[2]=0,!1;const[y,m,_]=this.dir,b=this.pos[0]-i[0],N=this.pos[1]-i[1],D=this.pos[2]-i[2],S=y*y+m*m+_*_,V=2*(b*y+N*m+D*_),I=V*V-4*S*(b*b+N*N+D*D-u*u);if(I<0){const O=Math.max(-V/2,0),M=b+y*O,B=N+m*O,Y=D+_*O,ee=Math.hypot(M,B,Y);return f[0]=M*u/ee,f[1]=B*u/ee,f[2]=Y*u/ee,!1}{const O=(-V-Math.sqrt(I))/(2*S);if(O<0){const M=Math.hypot(b,N,D);return f[0]=b*u/M,f[1]=N*u/M,f[2]=D*u/M,!1}return f[0]=b+y*O,f[1]=N+m*O,f[2]=D+_*O,!0}}}class xr{constructor(i,u,f,y,m){this.TL=i,this.TR=u,this.BR=f,this.BL=y,this.horizon=m}static fromInvProjectionMatrix(i,u,f){const y=[-1,1,1],m=[1,1,1],_=[1,-1,1],b=[-1,-1,1],N=ve.vec3.transformMat4(y,y,i),D=ve.vec3.transformMat4(m,m,i),S=ve.vec3.transformMat4(_,_,i),V=ve.vec3.transformMat4(b,b,i);return new xr(N,D,S,V,u/f)}}function Fr(d,i,u){let f=1/0,y=-1/0;const m=[];for(const _ of d){ve.vec3.sub(m,_,i);const b=ve.vec3.dot(m,u);f=Math.min(f,b),y=Math.max(y,b)}return[f,y]}function Mr(d,i){let u=!0;for(let f=0;f<d.planes.length;f++){const y=d.planes[f];let m=0;for(let _=0;_<i.length;_++)m+=ve.vec3.dot(y,i[_])+y[3]>=0;if(m===0)return 0;m!==i.length&&(u=!1)}return u?2:1}function dr(d,i){for(const u of d.projections){const f=Fr(i,d.points[0],u.axis);if(u.projection[1]<f[0]||u.projection[0]>f[1])return 0}return 1}function nn(d,i){let u=0;const f=[0,0,0,0];for(let y=0;y<d.length;y++)f[0]=d[y][0],f[1]=d[y][1],f[2]=d[y][2],f[3]=1,ve.vec4.dot(f,i)>=0&&u++;return u}class Tr{constructor(i,u){this.points=i||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=er.fromPoints(this.points),this.projections=[],this.frustumEdges=[ve.vec3.sub([],this.points[2],this.points[3]),ve.vec3.sub([],this.points[0],this.points[3]),ve.vec3.sub([],this.points[4],this.points[0]),ve.vec3.sub([],this.points[5],this.points[1]),ve.vec3.sub([],this.points[6],this.points[2]),ve.vec3.sub([],this.points[7],this.points[3])];for(const f of this.frustumEdges){const y=[0,-f[2],f[1]],m=[f[2],0,-f[0]];this.projections.push({axis:y,projection:Fr(this.points,this.points[0],y)}),this.projections.push({axis:m,projection:Fr(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(i,u,f,y){const m=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const S=ve.vec4.transformMat4([],D,i),V=1/S[3]/u*m;return ve.vec4.mul(S,S,[V,V,y?1/S[3]:V,V])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const S=ve.vec3.sub([],_[D[0]],_[D[1]]),V=ve.vec3.sub([],_[D[2]],_[D[1]]),I=ve.vec3.normalize([],ve.vec3.cross([],S,V)),O=-ve.vec3.dot(I,_[D[1]]);return I.concat(O)}),N=[];for(let D=0;D<_.length;D++)N.push([_[D][0],_[D][1],_[D][2]]);return new Tr(N,b)}intersectsPrecise(i,u,f){for(let y=0;y<u.length;y++)if(!nn(i,u[y]))return 0;for(let y=0;y<this.planes.length;y++)if(!nn(i,this.planes[y]))return 0;for(const y of f)for(const m of this.frustumEdges){const _=ve.vec3.cross([],y,m),b=ve.vec3.length(_);if(b===0)continue;ve.vec3.scale(_,_,1/b);const N=Fr(this.points,this.points[0],_),D=Fr(i,this.points[0],_);if(N[0]>D[1]||D[0]>N[1])return 0}return 1}containsPoint(i){for(const u of this.planes){const f=u[3];if(ve.vec3.dot([u[0],u[1],u[2]],i)+f<0)return!1}return!0}}class er{static fromPoints(i){const u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0];for(const y of i)ve.vec3.min(u,u,y),ve.vec3.max(f,f,y);return new er(u,f)}static fromTileIdAndHeight(i,u,f){const y=1<<i.canonical.z,m=i.canonical.x,_=i.canonical.y;return new er([m/y,_/y,u],[(m+1)/y,(_+1)/y,f])}static applyTransform(i,u){const f=i.getCorners();for(let y=0;y<f.length;++y)ve.vec3.transformMat4(f[y],f[y],u);return er.fromPoints(f)}static applyTransformFast(i,u){const f=[u[12],u[13],u[14]],y=[...f];for(let m=0;m<3;m++)for(let _=0;_<3;_++){const b=u[4*_+m],N=b*i.min[_],D=b*i.max[_];f[m]+=Math.min(N,D),y[m]+=Math.max(N,D)}return new er(f,y)}static projectAabbCorners(i,u){const f=i.getCorners();for(let y=0;y<f.length;++y)ve.vec3.transformMat4(f[y],f[y],u);return f}constructor(i,u){this.min=i,this.max=u,this.center=ve.vec3.scale([],ve.vec3.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],f=ve.vec3.clone(this.min),y=ve.vec3.clone(this.max);for(let m=0;m<u.length;m++)f[m]=u[m]?this.min[m]:this.center[m],y[m]=u[m]?this.center[m]:this.max[m];return y[2]=this.max[2],new er(f,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,u=this.max;return[[i[0],i[1],i[2]],[u[0],i[1],i[2]],[u[0],u[1],i[2]],[i[0],u[1],i[2]],[i[0],i[1],u[2]],[u[0],i[1],u[2]],[u[0],u[1],u[2]],[i[0],u[1],u[2]]]}intersects(i){return this.intersectsAabb(i.bounds)?Mr(i,this.getCorners()):0}intersectsFlat(i){return this.intersectsAabb(i.bounds)?Mr(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(i,u){return u||this.intersects(i)?dr(i,this.getCorners()):0}intersectsPreciseFlat(i,u){return u||this.intersectsFlat(i)?dr(i,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(i){for(let u=0;u<3;++u)if(this.min[u]>i.max[u]||i.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(i){return!(this.min[0]>i.max[0]||i.min[0]>this.max[0]||this.min[1]>i.max[1]||i.min[1]>this.max[1])}encapsulate(i){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],i.min[u]),this.max[u]=Math.max(this.max[u],i.max[u])}encapsulatePoint(i){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],i[u]),this.max[u]=Math.max(this.max[u],i[u])}closestPoint(i){return[Math.max(Math.min(this.max[0],i[0]),this.min[0]),Math.max(Math.min(this.max[1],i[1]),this.min[1]),Math.max(Math.min(this.max[2],i[2]),this.min[2])]}}function sn(d){return d*ml/sl}xt(er,"Aabb");const qn=[new er([Bo,Bo,Bo],[Wu,Wu,Wu]),new er([Bo,Bo,Bo],[0,0,Wu]),new er([0,Bo,Bo],[Wu,0,Wu]),new er([Bo,0,Bo],[0,Wu,Wu]),new er([0,0,Bo],[Wu,Wu,Wu])];function un(d,i,u,f=!0){const y=ve.vec3.scale([],d._camera.position,d.worldSize),m=[i,u,1,1];ve.vec4.transformMat4(m,m,d.pixelMatrixInverse),ve.vec4.scale(m,m,1/m[3]);const _=ve.vec3.sub([],m,y),b=ve.vec3.normalize([],_),N=d.globeMatrix,D=[N[12],N[13],N[14]],S=ve.vec3.sub([],D,y),V=ve.vec3.length(S),I=ve.vec3.normalize([],S),O=d.worldSize/(2*Math.PI),M=ve.vec3.dot(I,b),B=Math.asin(O/V);if(B<Math.acos(M)){if(!f)return null;const ft=[],Ye=[];ve.vec3.scale(ft,b,V/M),ve.vec3.normalize(Ye,ve.vec3.sub(Ye,ft,S)),ve.vec3.normalize(b,ve.vec3.add(b,S,ve.vec3.scale(b,Ye,Math.tan(B)*V)))}const Y=[];new Cr(y,b).closestPointOnSphere(D,O,Y);const ee=ve.vec3.normalize([],hn(N,0)),ue=ve.vec3.normalize([],hn(N,1)),le=ve.vec3.normalize([],hn(N,2)),re=ve.vec3.dot(ee,Y),pe=ve.vec3.dot(ue,Y),Se=ve.vec3.dot(le,Y),xe=za(Math.asin(-pe/O));let Ke=za(Math.atan2(re,Se));Ke=d.center.lng+function(ft,Ye){const gt=(Ye-ft+180)%360-180;return gt<-180?gt+360:gt}(d.center.lng,Ke);const Ze=yl(Ke),He=ka(xi(xe),0,1);return new o(Ze,He)}class Vn{constructor(i,u,f){this.a=ve.vec3.sub([],i,f),this.b=ve.vec3.sub([],u,f),this.center=f;const y=ve.vec3.normalize([],this.a),m=ve.vec3.normalize([],this.b);this.angle=Math.acos(ve.vec3.dot(y,m))}}function Ki(d,i){if(d.angle===0)return null;let u;return u=d.a[i]===0?1/d.angle*.5*Math.PI:1/d.angle*Math.atan(d.b[i]/d.a[i]/Math.sin(d.angle)-1/Math.tan(d.angle)),u<0||u>1?null:function(f,y,m,_){const b=Math.sin(m);return f*(Math.sin((1-_)*m)/b)+y*(Math.sin(_*m)/b)}(d.a[i],d.b[i],d.angle,ka(u,0,1))+d.center[i]}function hs(d){if(d.z<=1)return qn[d.z+2*d.y+d.x];const i=ni(Cn(d));return er.fromPoints(i)}function ao(d,i,u){return ve.vec3.scale(d,d,1-u),ve.vec3.scaleAndAdd(d,d,i,u)}function Ks(d,i,u){for(const f of d)ve.vec3.transformMat4(f,f,i),ve.vec3.scale(f,f,u)}function mo(d,i,u,f){const y=i/d.worldSize,m=d.globeMatrix;if(u.z<=1){const Ze=hs(u).getCorners();return Ks(Ze,m,y),er.fromPoints(Ze)}const _=Cn(u,f),b=ni(_,ml+sn(d._tileCoverLift));Ks(b,m,y);const N=Number.MAX_VALUE,D=[-N,-N,-N],S=[N,N,N];if(_.contains(d.center)){for(const ft of b)ve.vec3.min(S,S,ft),ve.vec3.max(D,D,ft);D[2]=0;const Ze=d.point,He=[Ze.x*y,Ze.y*y,0];return ve.vec3.min(S,S,He),ve.vec3.max(D,D,He),new er(S,D)}if(d._tileCoverLift>0){for(const Ze of b)ve.vec3.min(S,S,Ze),ve.vec3.max(D,D,Ze);return new er(S,D)}const V=[m[12]*y,m[13]*y,m[14]*y],I=_.getCenter(),O=ka(d.center.lat,-85.051129,Eu),M=ka(I.lat,-85.051129,Eu),B=yl(d.center.lng),Y=xi(O);let ee=B-yl(I.lng);const ue=Y-xi(M);ee>.5?ee-=1:ee<-.5&&(ee+=1);let le=0;if(Math.abs(ee)>Math.abs(ue))le=ee>=0?1:3;else{le=ue>=0?0:2;const Ze=[m[4]*y,m[5]*y,m[6]*y],He=-Math.sin(Va(ue>=0?_.getSouth():_.getNorth()))*ml;ve.vec3.scaleAndAdd(V,V,Ze,He)}const re=b[le],pe=b[(le+1)%4],Se=new Vn(re,pe,V),xe=[Ki(Se,0)||re[0],Ki(Se,1)||re[1],Ki(Se,2)||re[2]],Ke=zl(d.zoom);if(Ke>0){const Ze=function({x:ft,y:Ye,z:gt},bt,Rt,Vt,Et){const Ut=1/(1<<gt);let Dt=ft*Ut,jt=Dt+Ut,ga=Ye*Ut,ma=ga+Ut,Ya=0;const xa=(Dt+jt)/2-Vt;return xa>.5?Ya=-1:xa<-.5&&(Ya=1),Dt=((Dt+Ya)*bt-(Vt*=bt))*Rt+Vt,jt=((jt+Ya)*bt-Vt)*Rt+Vt,ga=(ga*bt-(Et*=bt))*Rt+Et,ma=(ma*bt-Et)*Rt+Et,[[Dt,ma,0],[jt,ma,0],[jt,ga,0],[Dt,ga,0]]}(u,i,d._pixelsPerMercatorPixel,B,Y);for(let ft=0;ft<b.length;ft++)ao(b[ft],Ze[ft],Ke);const He=ve.vec3.add([],Ze[le],Ze[(le+1)%4]);ve.vec3.scale(He,He,.5),ao(xe,He,Ke)}for(const Ze of b)ve.vec3.min(S,S,Ze),ve.vec3.max(D,D,Ze);return S[2]=Math.min(re[2],pe[2]),ve.vec3.min(S,S,xe),ve.vec3.max(D,D,xe),new er(S,D)}function Cn({x:d,y:i,z:u},f=!1){const y=1/(1<<u),m=new Ln(Pu(d*y),i===(1<<u)-1&&f?-90:wi((i+1)*y)),_=new Ln(Pu((d+1)*y),i===0&&f?90:wi(i*y));return new Zh(m,_)}function ni(d,i=ml){const u=Va(d.getNorth()),f=Va(d.getSouth()),y=Math.cos(u),m=Math.cos(f),_=Math.sin(u),b=Math.sin(f),N=d.getWest(),D=d.getEast();return[ip(m,b,N,i),ip(m,b,D,i),ip(y,_,D,i),ip(y,_,N,i)]}function On(d,i,u,f){const y=1<<u.z,m=(d/Na+u.x)/y;return Rc(wi((i/Na+u.y)/y),Pu(m),f)}function oi({min:d,max:i}){return Jg/Math.max(i[0]-d[0],i[1]-d[1],i[2]-d[2])}const yo=new Float64Array(16);function Ri(d){const i=oi(d),u=ve.mat4.fromScaling(yo,[i,i,i]);return ve.mat4.translate(u,u,ve.vec3.negate([],d.min))}function ss(d){const i=ve.mat4.fromTranslation(yo,d.min),u=1/oi(d);return ve.mat4.scale(i,i,[u,u,u])}function Tc(d){const i=Na/(2*Math.PI);return d/(2*Math.PI)/i}function Zo(d,i){return Na/(512*Math.pow(2,d))*oi(hs(i))}function eu(d,i,u,f,y){const m=Tc(u),_=[d,i,-u/(2*Math.PI)],b=ve.mat4.identity(new Float64Array(16));return ve.mat4.translate(b,b,_),ve.mat4.scale(b,b,[m,m,m]),ve.mat4.rotateX(b,b,Va(-y)),ve.mat4.rotateY(b,b,Va(-f)),b}function zl(d){return jr(gh,Kp,d)}function Yu(d,i){const u=Rc(i.lat,i.lng),f=function(m){const _=Rc(m._center.lat,m._center.lng),b=ve.vec3.fromValues(0,1,0);let N=ve.vec3.cross([],b,_);const D=ve.mat4.fromRotation([],-m.angle,_);N=ve.vec3.transformMat4(N,N,D),ve.mat4.fromRotation(D,-m._pitch,N);const S=ve.vec3.normalize([],_);return ve.vec3.scale(S,S,sn(m.cameraToCenterDistance/m.pixelsPerMeter)),ve.vec3.transformMat4(S,S,D),ve.vec3.add([],_,S)}(d),y=ve.vec3.subtract([],f,u);return ve.vec3.angle(y,u)}function gl(d,i){return Yu(d,i)>Math.PI/2*1.01}const kd=Va(85),go=Math.cos(kd),Ah=Math.sin(kd),Ol=ve.mat4.create(),op=d=>{const i=[];return d.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),d.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i};function Wp(d,i,u,f,y,m,_,b,N){if(m&&d.queryGeometry.isAboveHorizon)return!1;m&&(N*=d.pixelToTileUnitsFactor);const D=d.tileID.canonical,S=u.projection.upVectorScale(D,u.center.lat,u.worldSize).metersToTile;for(const V of i)for(const I of V){const O=I.add(b),M=y&&u.elevation?u.elevation.exaggeration()*y.getElevationAt(O.x,O.y,!0):0,B=u.projection.projectTilePoint(O.x,O.y,D);if(M>0){const le=u.projection.upVector(D,O.x,O.y);B.x+=le[0]*S*M,B.y+=le[1]*S*M,B.z+=le[2]*S*M}const Y=m?O:Fy(B.x,B.y,B.z,f),ee=m?d.tilespaceRays.map(le=>b0(le,M)):d.queryGeometry.screenGeometry,ue=ve.vec4.transformMat4([],[B.x,B.y,B.z,1],f);if(!_&&m?N*=ue[3]/u.cameraToCenterDistance:_&&!m&&(N*=u.cameraToCenterDistance/ue[3]),m){const le=wi((I.y/Na+D.y)/(1<<D.z));N/=u.projection.pixelsPerMeter(le,1)/Go(1,le)}if(Re(ee,Y,N))return!0}return!1}function Fy(d,i,u,f){const y=ve.vec4.transformMat4([],[d,i,u,1],f);return new Bt(y[0]/y[3],y[1]/y[3])}const NT=ve.vec3.fromValues(0,0,0),lp=ve.vec3.fromValues(0,0,1);function b0(d,i){const u=ve.vec3.create();return NT[2]=i,d.intersectsPlane(NT,lp,u),new Bt(u[0],u[1])}class x0 extends ce{}let jm,Kv,Wv,Yv;function P0(d,{width:i,height:u},f,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==i*u*f)throw new RangeError("mismatched image size")}else y=new Uint8Array(i*u*f);return d.width=i,d.height=u,d.data=y,d}function E0(d,i,u){const{width:f,height:y}=i;f===d.width&&y===d.height||(Xv(d,i,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,f),height:Math.min(d.height,y)},u,null),d.width=f,d.height=y,d.data=i.data)}function Xv(d,i,u,f,y,m,_,b){if(y.width===0||y.height===0)return i;if(y.width>d.width||y.height>d.height||u.x>d.width-y.width||u.y>d.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>i.width||y.height>i.height||f.x>i.width-y.width||f.y>i.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const N=d.data,D=i.data,S=m===4&&b;for(let V=0;V<y.height;V++){const I=((u.y+V)*d.width+u.x)*m,O=((f.y+V)*i.width+f.x)*m;if(S)for(let M=0;M<y.width;M++){const B=I+M*m+3,Y=O+M*m;D[Y+0]=255,D[Y+1]=255,D[Y+2]=255,D[Y+3]=N[B]}else if(_)for(let M=0;M<y.width;M++){const B=I+M*m,Y=O+M*m,ee=N[B+3],ue=new bn(N[B+0]/255*ee,N[B+1]/255*ee,N[B+2]/255*ee,ee).toRenderColor(_).toArray();D[Y+0]=ue[0],D[Y+1]=ue[1],D[Y+2]=ue[2],D[Y+3]=ue[3]}else for(let M=0;M<y.width*m;M++)D[O+M]=N[I+M]}return i}xt(x0,"HeatmapBucket",{omit:["layers"]});class Yp{constructor(i,u){P0(this,i,1,u)}resize(i){E0(this,new Yp(i),1)}clone(){return new Yp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,f,y,m){Xv(i,u,f,y,m,1,null)}}class Al{constructor(i,u){P0(this,i,4,u)}resize(i){E0(this,new Al(i),4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Al({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,f,y,m,_,b){Xv(i,u,f,y,m,4,_,b)}}class Jv{constructor(i,u){this.width=i.width,this.height=i.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function Uy(d){const i={},u=d.resolution||256,f=d.clips?d.clips.length:1,y=d.image||new Al({width:u,height:f}),m=(_,b,N)=>{i[d.evaluationKey]=N;const D=d.expression.evaluate(i);D&&(y.data[_+b+0]=Math.floor(255*D.r/D.a),y.data[_+b+1]=Math.floor(255*D.g/D.a),y.data[_+b+2]=Math.floor(255*D.b/D.a),y.data[_+b+3]=Math.floor(255*D.a))};if(d.clips)for(let _=0,b=0;_<f;++_,b+=4*u)for(let N=0,D=0;N<u;N++,D+=4){const S=N/(u-1),{start:V,end:I}=d.clips[_];m(b,D,V*(1-S)+I*S)}else for(let _=0,b=0;_<u;_++,b+=4)m(0,b,_/(u-1));return y}xt(Yp,"AlphaImage"),xt(Al,"RGBAImage");const ky=xn([{name:"a_pos",components:2,type:"Int16"}],4),N0=xn([{name:"a_road_z_offset",components:1,type:"Float32"}],4),VT=xn([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),zT=xn([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function aA(d,i,u=2){const f=i&&i.length,y=f?i[0]*u:d.length;let m=Qv(d,0,y,u,!0);const _=[];if(!m||m.next===m.prev)return _;let b,N,D;if(f&&(m=function(S,V,I,O){const M=[];for(let B=0,Y=V.length;B<Y;B++){const ee=Qv(S,V[B]*O,B<Y-1?V[B+1]*O:S.length,O,!1);ee===ee.next&&(ee.steiner=!0),M.push(jy(ee))}M.sort(Y2);for(let B=0;B<M.length;B++)I=X2(M[B],I);return I}(d,i,m,u)),d.length>80*u){b=1/0,N=1/0;let S=-1/0,V=-1/0;for(let I=u;I<y;I+=u){const O=d[I],M=d[I+1];O<b&&(b=O),M<N&&(N=M),O>S&&(S=O),M>V&&(V=M)}D=Math.max(S-b,V-N),D=D!==0?32767/D:0}return By(m,_,u,b,N,D,0),_}function Qv(d,i,u,f,y){let m;if(y===function(_,b,N,D){let S=0;for(let V=b,I=N-D;V<N;V+=D)S+=(_[I]-_[V])*(_[V+1]+_[I+1]),I=V;return S}(d,i,u,f)>0)for(let _=i;_<u;_+=f)m=a1(_/f|0,d[_],d[_+1],m);else for(let _=u-f;_>=i;_-=f)m=a1(_/f|0,d[_],d[_+1],m);return m&&xf(m,m.next)&&(rA(m),m=m.next),m}function _h(d,i){if(!d)return d;i||(i=d);let u,f=d;do if(u=!1,f.steiner||!xf(f,f.next)&&ro(f.prev,f,f.next)!==0)f=f.next;else{if(rA(f),f=i=f.prev,f===f.next)break;u=!0}while(u||f!==i);return i}function By(d,i,u,f,y,m,_){if(!d)return;!_&&m&&function(N,D,S,V){let I=N;do I.z===0&&(I.z=Gy(I.x,I.y,D,S,V)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==N);I.prevZ.nextZ=null,I.prevZ=null,function(O){let M,B=1;do{let Y,ee=O;O=null;let ue=null;for(M=0;ee;){M++;let le=ee,re=0;for(let Se=0;Se<B&&(re++,le=le.nextZ,le);Se++);let pe=B;for(;re>0||pe>0&&le;)re!==0&&(pe===0||!le||ee.z<=le.z)?(Y=ee,ee=ee.nextZ,re--):(Y=le,le=le.nextZ,pe--),ue?ue.nextZ=Y:O=Y,Y.prevZ=ue,ue=Y;ee=le}ue.nextZ=null,B*=2}while(M>1)}(I)}(d,f,y,m);let b=d;for(;d.prev!==d.next;){const N=d.prev,D=d.next;if(m?e1(d,f,y,m):Ms(d))i.push(N.i,d.i,D.i),rA(d),d=D.next,b=D.next;else if((d=D)===b){_?_===1?By(d=W2(_h(d),i),i,u,f,y,m,2):_===2&&OT(d,i,u,f,y,m):By(_h(d),i,u,f,y,m,1);break}}}function Ms(d){const i=d.prev,u=d,f=d.next;if(ro(i,u,f)>=0)return!1;const y=i.x,m=u.x,_=f.x,b=i.y,N=u.y,D=f.y,S=y<m?y<_?y:_:m<_?m:_,V=b<N?b<D?b:D:N<D?N:D,I=y>m?y>_?y:_:m>_?m:_,O=b>N?b>D?b:D:N>D?N:D;let M=f.next;for(;M!==i;){if(M.x>=S&&M.x<=I&&M.y>=V&&M.y<=O&&Xp(y,b,m,N,_,D,M.x,M.y)&&ro(M.prev,M,M.next)>=0)return!1;M=M.next}return!0}function e1(d,i,u,f){const y=d.prev,m=d,_=d.next;if(ro(y,m,_)>=0)return!1;const b=y.x,N=m.x,D=_.x,S=y.y,V=m.y,I=_.y,O=b<N?b<D?b:D:N<D?N:D,M=S<V?S<I?S:I:V<I?V:I,B=b>N?b>D?b:D:N>D?N:D,Y=S>V?S>I?S:I:V>I?V:I,ee=Gy(O,M,i,u,f),ue=Gy(B,Y,i,u,f);let le=d.prevZ,re=d.nextZ;for(;le&&le.z>=ee&&re&&re.z<=ue;){if(le.x>=O&&le.x<=B&&le.y>=M&&le.y<=Y&&le!==y&&le!==_&&Xp(b,S,N,V,D,I,le.x,le.y)&&ro(le.prev,le,le.next)>=0||(le=le.prevZ,re.x>=O&&re.x<=B&&re.y>=M&&re.y<=Y&&re!==y&&re!==_&&Xp(b,S,N,V,D,I,re.x,re.y)&&ro(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;le&&le.z>=ee;){if(le.x>=O&&le.x<=B&&le.y>=M&&le.y<=Y&&le!==y&&le!==_&&Xp(b,S,N,V,D,I,le.x,le.y)&&ro(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;re&&re.z<=ue;){if(re.x>=O&&re.x<=B&&re.y>=M&&re.y<=Y&&re!==y&&re!==_&&Xp(b,S,N,V,D,I,re.x,re.y)&&ro(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function W2(d,i){let u=d;do{const f=u.prev,y=u.next.next;!xf(f,y)&&Hh(f,u,u.next,y)&&Zy(f,y)&&Zy(y,f)&&(i.push(f.i,u.i,y.i),rA(u),rA(u.next),u=d=y),u=u.next}while(u!==d);return _h(u)}function OT(d,i,u,f,y,m){let _=d;do{let b=_.next.next;for(;b!==_.prev;){if(_.i!==b.i&&V0(_,b)){let N=t1(_,b);return _=_h(_,_.next),N=_h(N,N.next),By(_,i,u,f,y,m,0),void By(N,i,u,f,y,m,0)}b=b.next}_=_.next}while(_!==d)}function Y2(d,i){return d.x-i.x}function X2(d,i){const u=function(y,m){let _=m;const b=y.x,N=y.y;let D,S=-1/0;do{if(N<=_.y&&N>=_.next.y&&_.next.y!==_.y){const B=_.x+(N-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(B<=b&&B>S&&(S=B,D=_.x<_.next.x?_:_.next,B===b))return D}_=_.next}while(_!==m);if(!D)return null;const V=D,I=D.x,O=D.y;let M=1/0;_=D;do{if(b>=_.x&&_.x>=I&&b!==_.x&&Xp(N<O?b:S,N,I,O,N<O?S:b,N,_.x,_.y)){const B=Math.abs(N-_.y)/(b-_.x);Zy(_,y)&&(B<M||B===M&&(_.x>D.x||_.x===D.x&&J2(D,_)))&&(D=_,M=B)}_=_.next}while(_!==V);return D}(d,i);if(!u)return i;const f=t1(u,d);return _h(f,f.next),_h(u,u.next)}function J2(d,i){return ro(d.prev,d,i.prev)<0&&ro(i.next,d,d.next)<0}function Gy(d,i,u,f,y){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-u)*y|0)|d<<8))|d<<4))|d<<2))|d<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-f)*y|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function jy(d){let i=d,u=d;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==d);return u}function Xp(d,i,u,f,y,m,_,b){return(y-_)*(i-b)>=(d-_)*(m-b)&&(d-_)*(f-b)>=(u-_)*(i-b)&&(u-_)*(m-b)>=(y-_)*(f-b)}function V0(d,i){return d.next.i!==i.i&&d.prev.i!==i.i&&!function(u,f){let y=u;do{if(y.i!==u.i&&y.next.i!==u.i&&y.i!==f.i&&y.next.i!==f.i&&Hh(y,y.next,u,f))return!0;y=y.next}while(y!==u);return!1}(d,i)&&(Zy(d,i)&&Zy(i,d)&&function(u,f){let y=u,m=!1;const _=(u.x+f.x)/2,b=(u.y+f.y)/2;do y.y>b!=y.next.y>b&&y.next.y!==y.y&&_<(y.next.x-y.x)*(b-y.y)/(y.next.y-y.y)+y.x&&(m=!m),y=y.next;while(y!==u);return m}(d,i)&&(ro(d.prev,d,i.prev)||ro(d,i.prev,i))||xf(d,i)&&ro(d.prev,d,d.next)>0&&ro(i.prev,i,i.next)>0)}function ro(d,i,u){return(i.y-d.y)*(u.x-i.x)-(i.x-d.x)*(u.y-i.y)}function xf(d,i){return d.x===i.x&&d.y===i.y}function Hh(d,i,u,f){const y=z0(ro(d,i,u)),m=z0(ro(d,i,f)),_=z0(ro(u,f,d)),b=z0(ro(u,f,i));return y!==m&&_!==b||!(y!==0||!Jp(d,u,i))||!(m!==0||!Jp(d,f,i))||!(_!==0||!Jp(u,d,f))||!(b!==0||!Jp(u,i,f))}function Jp(d,i,u){return i.x<=Math.max(d.x,u.x)&&i.x>=Math.min(d.x,u.x)&&i.y<=Math.max(d.y,u.y)&&i.y>=Math.min(d.y,u.y)}function z0(d){return d>0?1:d<0?-1:0}function Zy(d,i){return ro(d.prev,d,d.next)<0?ro(d,i,d.next)>=0&&ro(d,d.prev,i)>=0:ro(d,i,d.prev)<0||ro(d,d.next,i)<0}function t1(d,i){const u=nA(d.i,d.x,d.y),f=nA(i.i,i.x,i.y),y=d.next,m=i.prev;return d.next=i,i.prev=d,u.next=y,y.prev=u,f.next=u,u.prev=f,m.next=f,f.prev=m,f}function a1(d,i,u,f){const y=nA(d,i,u);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function rA(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function nA(d,i,u){return{i:d,x:i,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function iA(d,i){const u=d.length;if(u<=1)return[d];const f=[];let y,m;for(let _=0;_<u;_++){const b=As(d[_]);b!==0&&(d[_].area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(y&&f.push(y),y=[d[_]]):y.push(d[_]))}if(y&&f.push(y),i>1)for(let _=0;_<f.length;_++)f[_].length<=i||(hf(f[_],i,1,f[_].length-1,DT),f[_]=f[_].slice(0,i));return f}function DT(d,i){return i.area-d.area}function MT(d,i,u=1){if(!d)return null;const f=typeof d=="string"?Ts.from(d).getPrimary():d.getPrimary(),y=f.id.toString();return i.has(y)||i.set(y,[]),f.scaleSelf(u),i.get(y).push(f),f.toString()}function sA(d,i,u,f){const y=f.patternDependencies;let m=!1;for(const _ of i){const b=_.paint.get(`${d}-pattern`);b.isConstant()||(m=!0),MT(b.constantOr(null),y,u)&&(m=!0)}return m}function oA(d,i,u,f,y,m){const _=m.patternDependencies;for(const b of i){const N=b.paint.get(`${d}-pattern`).value;if(N.kind!=="constant"){let D=N.evaluate({zoom:f},u,{},m.availableImages);D=D&&D.name?D.name:D;const S=MT(D,_,y);S&&(u.patterns[b.id]=S)}}return u}var r1,IT,Zm,LT,O0,Di,D0,qm={};function M0(){if(IT)return r1;IT=1;var d=Ea();function i(y,m,_,b,N){this.properties={},this.extent=_,this.type=0,this._pbf=y,this._geometry=-1,this._keys=b,this._values=N,y.readFields(u,this,m)}function u(y,m,_){y==1?m.id=_.readVarint():y==2?function(b,N){for(var D=b.readVarint()+b.pos;b.pos<D;){var S=N._keys[b.readVarint()],V=N._values[b.readVarint()];N.properties[S]=V}}(_,m):y==3?m.type=_.readVarint():y==4&&(m._geometry=_.pos)}function f(y){for(var m,_,b=0,N=0,D=y.length,S=D-1;N<D;S=N++)b+=((_=y[S]).x-(m=y[N]).x)*(m.y+_.y);return b}return r1=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var m,_=y.readVarint()+y.pos,b=1,N=0,D=0,S=0,V=[];y.pos<_;){if(N<=0){var I=y.readVarint();b=7&I,N=I>>3}if(N--,b===1||b===2)D+=y.readSVarint(),S+=y.readSVarint(),b===1&&(m&&V.push(m),m=[]),m.push(new d(D,S));else{if(b!==7)throw new Error("unknown command "+b);m&&m.push(m[0].clone())}}return m&&V.push(m),V},i.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,_=1,b=0,N=0,D=0,S=1/0,V=-1/0,I=1/0,O=-1/0;y.pos<m;){if(b<=0){var M=y.readVarint();_=7&M,b=M>>3}if(b--,_===1||_===2)(N+=y.readSVarint())<S&&(S=N),N>V&&(V=N),(D+=y.readSVarint())<I&&(I=D),D>O&&(O=D);else if(_!==7)throw new Error("unknown command "+_)}return[S,I,V,O]},i.prototype.toGeoJSON=function(y,m,_){var b,N,D=this.extent*Math.pow(2,_),S=this.extent*y,V=this.extent*m,I=this.loadGeometry(),O=i.types[this.type];function M(ee){for(var ue=0;ue<ee.length;ue++){var le=ee[ue];ee[ue]=[360*(le.x+S)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+V)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(b=0;b<I.length;b++)B[b]=I[b][0];M(I=B);break;case 2:for(b=0;b<I.length;b++)M(I[b]);break;case 3:for(I=function(ee){var ue=ee.length;if(ue<=1)return[ee];for(var le,re,pe=[],Se=0;Se<ue;Se++){var xe=f(ee[Se]);xe!==0&&(re===void 0&&(re=xe<0),re===xe<0?(le&&pe.push(le),le=[ee[Se]]):le.push(ee[Se]))}return le&&pe.push(le),pe}(I),b=0;b<I.length;b++)for(N=0;N<I[b].length;N++)M(I[b][N])}I.length===1?I=I[0]:O="Multi"+O;var Y={type:"Feature",geometry:{type:O,coordinates:I},properties:this.properties};return"id"in this&&(Y.id=this.id),Y},r1}function n1(){if(LT)return Zm;LT=1;var d=M0();function i(f,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(u,this,y),this.length=this._features.length}function u(f,y,m){f===15?y.version=m.readVarint():f===1?y.name=m.readString():f===5?y.extent=m.readVarint():f===2?y._features.push(m.pos):f===3?y._keys.push(m.readString()):f===4&&y._values.push(function(_){for(var b=null,N=_.readVarint()+_.pos;_.pos<N;){var D=_.readVarint()>>3;b=D===1?_.readString():D===2?_.readFloat():D===3?_.readDouble():D===4?_.readVarint64():D===5?_.readVarint():D===6?_.readSVarint():D===7?_.readBoolean():null}return b}(m))}return Zm=i,i.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var y=this._pbf.readVarint()+this._pbf.pos;return new d(this._pbf,y,this.extent,this._keys,this._values)},Zm}function I0(){return D0||(D0=1,qm.VectorTile=function(){if(Di)return O0;Di=1;var d=n1();function i(u,f,y){if(u===3){var m=new d(y,y.readVarint()+y.pos);m.length&&(f[m.name]=m)}}return O0=function(u,f){this.layers=u.readFields(i,{},f)},O0}(),qm.VectorTileFeature=M0(),qm.VectorTileLayer=n1()),qm}var vh=I0();const Pf="3d_elevation_id",Hm="level";class FT{constructor(){this._valid=!1}reset(i){return this.feature=i,this._valid=!0,this._geometry=i.loadGeometry(),this._geometry.length!==0&&this._geometry[0].length!==0||(this._valid=!1),this}geometry(i,u){return this._valid&&i(u(this._geometry)),this}require(i,u,f){return this.get(i,!0,u,f)}optional(i,u,f){return this.get(i,!1,u,f)}success(){return this._valid}get(i,u,f,y){const m=this.feature.properties.hasOwnProperty(i)?+this.feature.properties[i]:void 0;return this._valid&&m!==void 0?f(y?y(m):m):u&&(this._valid=!1),this}}class UT{constructor(i,u){this.featureFunc=i,this.vertexFunc=u}parseFeature(i,u,f){return this.featureFunc(i,u,f)}parseVertex(i,u,f){return this.vertexFunc(i,u,f)}}const Q2=new UT((d,i,u)=>d.reset(i).require(Pf,f=>{u.id=f}).optional("fixed_height_relative",f=>{u.constantHeight=f},Ef.decodeRelativeHeight).geometry(f=>{u.bounds=f},Ef.computeBounds).success(),(d,i,u)=>d.reset(i).require(Pf,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height_relative",f=>{u.height=f},Ef.decodeRelativeHeight).geometry(f=>{u.position=f},Ef.getPoint).success()),kT=new UT((d,i,u)=>d.reset(i).require(Pf,f=>{u.id=f}).optional("fixed_height",f=>{u.constantHeight=f},Ef.decodeMetricHeight).geometry(f=>{u.bounds=f},Ef.computeBounds).success(),(d,i,u)=>d.reset(i).require(Pf,f=>{u.id=f}).require("elevation_idx",f=>{u.idx=f}).require("extent",f=>{u.extent=f}).require("height",f=>{u.height=f},Ef.decodeMetricHeight).geometry(f=>{u.position=f},Ef.getPoint).success());class Ef{static computeBounds(i){const u=new Bt(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),f=new Bt(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const y of i[0])u.x>y.x&&(u.x=y.x),u.y>y.y&&(u.y=y.y),f.x<y.x&&(f.x=y.x),f.y<y.y&&(f.y=y.y);return{min:u,max:f}}static getPoint(i){return ve.vec2.fromValues(i[0][0].x,i[0][0].y)}static decodeRelativeHeight(i){return 1e-4*i*5}static decodeMetricHeight(i){return 1e-4*i}static parse(i){const u=[],f=[],y=i.length,m=new FT;for(let b=0;b<y;b++){const N=i.feature(b),D=N.properties.hasOwnProperty("version")?String(N.properties.version):void 0,S=(_=D)?_==="1.0.1"?kT:void 0:Q2;if(S===void 0){en(`Unknown elevation feature version number ${D||"(unknown)"}`);continue}const V=N.properties.hasOwnProperty("type")?N.properties.type:void 0;if(V){if(vh.VectorTileFeature.types[N.type]==="Point"&&V==="curve_point"){const I={};S.parseVertex(m,N,I)&&u.push(I)}else if(vh.VectorTileFeature.types[N.type]==="Polygon"&&V==="curve_meta"){const I={};S.parseFeature(m,N,I)&&f.push(I)}}}var _;return{vertices:u,features:f}}}class qy{constructor(i,u,f,y,m,_){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=i,this.heightRange={min:f,max:f},this.safeArea=u,this.constantHeight=f,this.constantHeight==null&&(this.constantHeight!=null||y.length!==0)){this.vertices=y,this.edges=m,this.edges=this.edges.filter(b=>b.a<this.vertices.length&&b.b<this.vertices.length&&!ve.vec2.exactEquals(this.vertices[b.a].position,this.vertices[b.b].position)),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const b of this.vertices)this.vertexProps.push({dir:ve.vec2.fromValues(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,b.height),this.heightRange.max=Math.max(this.heightRange.max,b.height);for(const b of this.edges){const N=this.vertices[b.a].position,D=this.vertices[b.b].position,S=ve.vec2.subtract(ve.vec2.create(),D,N),V=ve.vec2.length(S),I=ve.vec2.scale(ve.vec2.create(),S,1/V);this.edgeProps.push({vec:S,dir:I,len:V});const O=this.vertexProps[b.a].dir,M=this.vertexProps[b.b].dir;ve.vec2.add(O,O,I),ve.vec2.add(M,M,I)}for(const b of this.vertexProps)b.dir[0]===0&&b.dir[1]===0||ve.vec2.normalize(b.dir,b.dir);this.tessellate(_)}}pointElevation(i){if(this.constantHeight!=null)return this.constantHeight;const u=this.getClosestEdge(i);if(u==null)return 0;const[f,y]=u;return((m,_,b)=>(1-b)*m+b*_)(this.vertices[this.edges[f].a].height,this.vertices[this.edges[f].b].height,y)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(i){if(this.edges.length===0)return;let u=0,f=Number.POSITIVE_INFINITY,y=0;const m=ve.vec2.fromValues(i.x,i.y);for(let _=0;_<this.edges.length;_++){const b=this.edges[_],N=this.edgeProps[_].dir,D=new zr(m,this.edgeProps[_].dir),S=this.vertices[b.a].position,V=this.vertices[b.b].position,I=ve.vec2.create(),O=ve.vec2.create(),M=D.intersectsPlane(S,this.vertexProps[b.a].dir,I),B=D.intersectsPlane(V,this.vertexProps[b.b].dir,O);if(!M||!B)continue;const Y=ve.vec2.subtract(ve.vec2.create(),O,I),ee=ve.vec2.subtract(ve.vec2.create(),m,I),ue=ve.vec2.dot(Y,Y),le=ue>0?ve.vec2.dot(ee,Y)/ue:0,re=ka(le,0,1),pe=Math.abs((le-re)*this.edgeProps[_].len),Se=ve.vec2.subtract(ve.vec2.create(),m,S),xe=pe+Math.abs(ve.vec2.dot(Se,ve.vec2.fromValues(N[1],-N[0])));xe<f&&(u=_,f=xe,y=re)}return[u,y]}tessellate(i){for(let u=this.edges.length-1;u>=0;--u){const f=this.edges[u].a,y=this.edges[u].b,{position:m,height:_,extent:b}=this.vertices[f],{position:N,height:D,extent:S}=this.vertices[y],V=this.vertexProps[f].dir,I=this.vertexProps[y].dir,O=ve.vec3.fromValues(m[0]/i,m[1]/i,_),M=ve.vec3.fromValues(N[0]/i,N[1]/i,D),B=ve.vec3.fromValues(V[1],-V[0],0);ve.vec3.scale(B,B,b);const Y=ve.vec3.fromValues(I[1],-I[0],0);if(ve.vec3.scale(Y,Y,S),this.distSqLines(ve.vec3.fromValues(O[0]+.5*B[0],O[1]+.5*B[1],O[2]+.5*B[2]),ve.vec3.fromValues(M[0]-.5*Y[0],M[1]-.5*Y[1],M[2]-.5*Y[2]),ve.vec3.fromValues(O[0]-.5*B[0],O[1]-.5*B[1],O[2]-.5*B[2]),ve.vec3.fromValues(M[0]+.5*Y[0],M[1]+.5*Y[1],M[2]+.5*Y[2]))<=.05*.05)continue;const ee=this.vertices.length,ue=ve.vec2.add(ve.vec2.create(),m,N);this.vertices.push({position:ve.vec2.scale(ue,ue,.5),height:.5*(_+D),extent:.5*(b+S)});const le=ve.vec2.add(ve.vec2.create(),V,I);this.vertexProps.push({dir:ve.vec2.normalize(le,le)}),this.edges.splice(u,1),this.edgeProps.splice(u,1),this.edges.push({a:f,b:ee}),this.edges.push({a:ee,b:y});const re=ve.vec2.subtract(ve.vec2.create(),this.vertices[ee].position,m),pe=ve.vec2.length(re),Se={vec:re,dir:ve.vec2.scale(ve.vec2.create(),re,1/pe),len:pe};this.edgeProps.push(Se),this.edgeProps.push(Se)}}distSqLines(i,u,f,y){const m=ve.vec3.subtract(ve.vec3.create(),u,i),_=ve.vec3.subtract(ve.vec3.create(),y,f),b=ve.vec3.subtract(ve.vec3.create(),i,f),N=ve.vec3.dot(m,m),D=ve.vec3.dot(m,_),S=ve.vec3.dot(m,b),V=ve.vec3.dot(_,_),I=ve.vec3.dot(_,b),O=N*V-D*D;if(O===0){const ue=ve.vec3.dot(b,_)/ve.vec3.dot(_,_),le=ve.vec3.lerp(ve.vec3.create(),f,y,ue);return ve.vec3.squaredDistance(le,i)}const M=(D*I-S*V)/O,B=(N*I-D*S)/O,Y=ve.vec3.lerp(ve.vec3.create(),i,u,M),ee=ve.vec3.lerp(ve.vec3.create(),f,y,B);return ve.vec3.squaredDistance(Y,ee)}}class Es{constructor(i,u){this.zScale=1,this.xOffset=0,this.yOffset=0,i.equals(u)||(this.zScale=Math.pow(2,u.z-i.z),this.xOffset=(i.x*this.zScale-u.x)*Na,this.yOffset=(i.y*this.zScale-u.y)*Na)}constantElevation(i,u){if(i.constantHeight!=null)return this.computeBiasedHeight(i.constantHeight,u)}pointElevation(i,u,f){const y=this.constantElevation(u,f);return y??(i.x=i.x*this.zScale+this.xOffset,i.y=i.y*this.zScale+this.yOffset,this.computeBiasedHeight(u.pointElevation(i),f))}computeBiasedHeight(i,u){return u<=0?i:i+u*jr(0,u,i>=0?i:Math.abs(.5*i))}}xt(qy,"ElevationFeature");class L0{constructor(){this.polygons=new Map}add(i,...u){this.polygons.has(i)?this.polygons.get(i).push(...u):this.polygons.set(i,u)}merge(i){for(const[u,f]of i.polygons)this.add(u,...f)}}class Co{constructor(){this.portals=[]}static evaluate(i){if(i.length===0)return new Co;let u=[];for(const D of i)u.push(...D.portals);if(u.length===0)return new Co;const f=(D,S)=>D<=0&&S<=0||D>=Na&&S>=Na;for(const D of u){const S=D.va,V=D.vb;(f(S.x,V.x)||f(S.y,V.y))&&(D.type="border")}const y=u.filter(D=>D.type!=="unevaluated"),m=u.filter(D=>D.type==="unevaluated");if(m.length===0)return new Co;m.sort((D,S)=>D.hash===S.hash?D.isTunnel===S.isTunnel?0:D.isTunnel?-1:1:D.hash<S.hash?1:-1),u=y.concat(m);let _=y.length,b=_,N=_;do if(b++,b===u.length||u[_].hash!==u[b].hash){if(b-_==2){N<_&&(u[N]=u[_],u[_]=null);const D=u[N],S=u[b-1];D.type=D.isTunnel!==S.isTunnel?"tunnel":"polygon",D.connection={a:D.connection.a,b:S.connection.a},N++}_=b}while(_!==u.length);return u.splice(N),u.sort((D,S)=>D.hash<S.hash?1:-1),{portals:u}}}xt(Co,"ElevationPortalGraph"),xt(L0,"ElevationPolygons");class eP{constructor(i,u,f){this.outPositions=i,this.outNormals=u,this.outIndices=f,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(i,u,f){let y=i[2];f!=null&&(y*=f);const m=this.getVec3Bits(i)<<96n|this.getVec3Bits(u),_=this.vertexLookup.get(m);if(_!=null)return _;const b=this.outPositions.length;this.vertexLookup.set(m,b);const N=Math.trunc(16384*u[0]),D=Math.trunc(16384*u[1]),S=Math.trunc(16384*u[2]);return this.outPositions.emplaceBack(i[0],i[1],y),this.outNormals.emplaceBack(N,D,S),b}addVertices(i,u,...f){const y=[];for(const m of f){const _=this.addVertex(m,i,u);y.push(_)}return y}addTriangles(i,u,f){if(u&&f){const y=f.length===1,m=ve.vec3.fromValues(0,0,0);for(let _=0;_<i.length;_+=3){const b=u[i[_+0]],N=u[i[_+1]],D=u[i[_+2]],S=y?f[0]:f[i[_+1]],V=y?f[0]:f[i[_+2]],I=this.addVertex(ve.vec3.fromValues(b.x,b.y,y?f[0]:f[i[_+0]]),m),O=this.addVertex(ve.vec3.fromValues(N.x,N.y,S),m),M=this.addVertex(ve.vec3.fromValues(D.x,D.y,V),m);this.outIndices.emplaceBack(I,O,M)}}else for(let y=0;y<i.length;y+=3)this.outIndices.emplaceBack(i[y+0],i[y+1],i[y+2])}addQuad(i,u){const f=this.addVertices(u,void 0,...i.map(N=>ve.vec3.fromValues(N.coord.x,N.coord.y,N.height))),[y,m,_,b]=f;this.addTriangles([y,m,_,_,b,y])}getBits(i){return this.view.setFloat32(0,i),BigInt(this.view.getUint32(0))}getVec3Bits(i){return this.getBits(i[0])<<64n|this.getBits(i[1])<<32n|this.getBits(i[2])}}class Bd{constructor(i){this.unevaluatedPortals=new Co,this.portalPolygons=new L0,this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new _f,this.vertexNormals=new Bh,this.indexArray=new Ps,this.tileToMeters=g(i)}addVertices(i,u){const f=this.unevalVertices.length;for(let y=0;y<i.length;y++)this.unevalVertices.push(i[y]),this.unevalHeights.push(u[y]);return f}addTriangles(i,u,f){const y=f?this.unevalTunnelTriangles:this.unevalTriangles;for(const m of i)y.push(m+u)}addRenderableRing(i,u,f,y,m){const _=[new Bt(m.min.x,m.min.y),new Bt(m.max.x,m.min.y),new Bt(m.max.x,m.max.y),new Bt(m.min.x,m.max.y)];for(let b=0;b<f-1;b++){const N=u+b,D=N+1,S=this.unevalVertices[N],V=this.unevalVertices[D];if(!(S.x>=m.min.x&&S.x<=m.max.x&&S.y>=m.min.y&&S.y<=m.max.y||V.x>=m.min.x&&V.x<=m.max.x&&V.y>=m.min.y&&V.y<=m.max.y||yt(S,V,_))||this.isOnBorder(S.x,V.x)||this.isOnBorder(S.y,V.y))continue;const I=Bd.computeEdgeHash(this.unevalVertices[N],this.unevalVertices[D]);let O,M=this.vertexHashLookup.get(Bd.computePosHash(S));M!=null?O=M.next:(M=this.vertexHashLookup.get(Bd.computePosHash(V)),O=M!=null?M.prev:I),this.unevalEdges.push({polygonIdx:i,a:N,b:D,hash:I,portalHash:O,isTunnel:y,type:"unevaluated"})}}addPortalCandidates(i,u,f,y,m){if(u.length===0)return;this.portalPolygons.add(i,{geometry:u,zLevel:m});const _=u[0];this.vertexHashLookup.clear();let b=Bd.computeEdgeHash(_[_.length-2],_[_.length-1]);for(let N=0;N<_.length-1;N++){const D=_[N+0],S=_[N+1],V=ve.vec2.fromValues(S.x-D.x,S.y-D.y),I=ve.vec2.length(V);if(I===0)continue;let O="unevaluated";const M=y.pointElevation(D),B=y.pointElevation(S);Math.abs(M)<.01&&Math.abs(B)<.01?O="entrance":(this.isOnBorder(D.x,S.x)||this.isOnBorder(D.y,S.y))&&(O="border");const Y=Bd.computeEdgeHash(D,S);this.unevaluatedPortals.portals.push({connection:{a:i,b:void 0},va:D,vb:S,vab:V,length:I,hash:Y,isTunnel:f,type:O});const ee=Bd.computePosHash(D);this.vertexHashLookup.set(ee,{prev:b,next:Y}),b=Y}}construct(i){if(this.unevalVertices.length===0)return;const u=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),f=V=>{V.primitiveLength=this.indexArray.length-V.primitiveOffset},y=new eP(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(i.portals,this.unevalEdges);const m=u(),_=u(),b=u(),N=(V,I)=>{V.sort((M,B)=>M.type===I&&B.type!==I?-1:M.type!==I&&B.type===I?1:0);const O=V.findIndex(M=>M.type!==I);return O>=0?O:V.length};let D=0;this.unevalEdges.length>0&&(D=N(this.unevalEdges,"none"),this.constructBridgeStructures(y,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},this.tileToMeters));const S=u();if(this.unevalEdges.length>0){const V=this.unevalEdges.splice(D),I=N(V,"tunnel")+D;this.unevalEdges.push(...V),this.constructTunnelStructures(y,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:D},{min:D,max:I})}f(b),y.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),f(S),y.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),f(_),y.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),f(m),this.maskSegments=Oi.simpleSegment(0,S.primitiveOffset,0,S.primitiveLength),this.depthSegments=Oi.simpleSegment(0,_.primitiveOffset,0,_.primitiveLength),this.renderableSegments=Oi.simpleSegment(0,b.primitiveOffset,0,b.primitiveLength),this.shadowCasterSegments=Oi.simpleSegment(0,m.primitiveOffset,0,m.primitiveLength)}upload(i){this.vertexBuffer||this.vertexPositions.length===0||this.vertexNormals.length===0||this.indexArray.length===0||(this.vertexBuffer=i.createVertexBuffer(this.vertexPositions,VT.members),this.vertexBufferNormal=i.createVertexBuffer(this.vertexNormals,zT.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableSegments.destroy(),this.shadowCasterSegments.destroy())}computeVertexConnections(i,u,f,y){const m=new Map;for(let _=f;_<y;_++){const b=u[_],N=b.a,D=b.b;m.has(N)||m.set(N,{}),m.has(D)||m.set(D,{});const S=m.get(N),V=m.get(D);i[D]>0&&(S.to=D),i[N]>0&&(V.from=N)}return m}constructBridgeStructures(i,u,f,y,m,_){const b=this.computeVertexConnections(f,y,m.min,m.max),N=1/_,D=.5*N,S=I=>ve.vec3.fromValues(u[I].x,u[I].y,f[I]*N),V=I=>{const O=b.get(I),M=O.from,B=O.to;if(!M||!B)return;const Y=S(M),ee=S(I),ue=S(B),le=ve.vec3.fromValues(0,0,0);if(!ve.vec3.exactEquals(Y,ee)){const pe=ve.vec3.sub(ve.vec3.create(),ee,Y);ve.vec3.add(le,le,ve.vec3.normalize(pe,pe))}if(!ve.vec3.exactEquals(ue,ee)){const pe=ve.vec3.sub(ve.vec3.create(),ue,ee);ve.vec3.add(le,le,ve.vec3.normalize(pe,pe))}const re=ve.vec3.len(le);return re>0?ve.vec3.scale(le,le,1/re):void 0};for(let I=m.min;I<m.max;I++){const O=y[I],M=this.prepareEdgePoints(u,f,O,(_a,gr)=>_a>=gr);if(M==null)continue;const B=M[0],Y=M[1],ee=ve.vec3.fromValues(B.coord.x,B.coord.y,N*B.height),ue=ve.vec3.fromValues(Y.coord.x,Y.coord.y,N*Y.height);if(ve.vec3.exactEquals(ee,ue))continue;const le=ve.vec3.sub(ve.vec3.create(),ue,ee);ve.vec3.normalize(le,le);const re=_a=>ve.vec3.normalize(_a,_a),pe=V(O.a)||le,Se=V(O.b)||le,xe=re(ve.vec3.fromValues(pe[1],-pe[0],0)),Ke=re(ve.vec3.fromValues(Se[1],-Se[0],0)),Ze=re(ve.vec3.cross(ve.vec3.create(),xe,pe)),He=re(ve.vec3.cross(ve.vec3.create(),Ke,Se)),ft=ve.vec3.create(),Ye=[ve.vec3.add(ve.vec3.create(),ee,ve.vec3.scale(ft,ve.vec3.sub(ft,xe,Ze),D)),ve.vec3.add(ve.vec3.create(),ee,ve.vec3.scale(ft,ve.vec3.add(ft,xe,Ze),D)),ve.vec3.add(ve.vec3.create(),ee,ve.vec3.scale(ft,Ze,D)),ee],gt=[ve.vec3.add(ve.vec3.create(),ue,ve.vec3.scale(ft,ve.vec3.sub(ft,Ke,He),D)),ve.vec3.add(ve.vec3.create(),ue,ve.vec3.scale(ft,ve.vec3.add(ft,Ke,He),D)),ve.vec3.add(ve.vec3.create(),ue,ve.vec3.scale(ft,He,D)),ue],[bt,Rt]=i.addVertices(xe,_,Ye[0],Ye[1]),[Vt,Et]=i.addVertices(Ke,_,gt[0],gt[1]);i.addTriangles([bt,Rt,Vt,Rt,Et,Vt]);const[Ut,Dt]=i.addVertices(Ze,_,Ye[1],Ye[2]),[jt,ga]=i.addVertices(He,_,gt[1],gt[2]);i.addTriangles([Ut,Dt,jt,Dt,ga,jt]);const[ma,Ya]=i.addVertices(ve.vec3.negate(xe,xe),_,Ye[2],Ye[3]),[xa,Oa]=i.addVertices(ve.vec3.negate(Ke,Ke),_,gt[2],gt[3]);i.addTriangles([ma,Ya,xa,Ya,Oa,xa])}}constructTunnelStructures(i,u,f,y,m,_){const b=N=>ve.vec3.normalize(N,N);for(let N=m.min;N<m.max;N++){const D=this.prepareEdgePoints(u,f,y[N],(O,M)=>O<=M);if(D==null)continue;const[S,V]=D,I=b(ve.vec3.fromValues(V.coord.y-S.coord.y,-(V.coord.x-S.coord.x),0));i.addQuad([S,V,{coord:V.coord,height:y[N].isTunnel?-.1:0},{coord:S.coord,height:y[N].isTunnel?-.1:0}],I)}for(let N=_.min;N<_.max;N++){const D=y[N],S=u[D.a],V=u[D.b],I=b(ve.vec3.fromValues(V.y-S.y,-(V.x-S.x),0));i.addQuad([{coord:V,height:0},{coord:S,height:0},{coord:S,height:f[D.a]+4},{coord:V,height:f[D.b]+4}],I),i.addQuad([{coord:S,height:0},{coord:V,height:0},{coord:V,height:f[D.b]+4},{coord:S,height:f[D.a]+4}],I)}}prepareEdgePoints(i,u,f,y){const m=i[f.a],_=i[f.b];let b=u[f.a],N=u[f.b];if(!(b!==0&&y(b,0)||N!==0&&y(N,0)))return;const D=m.clone(),S=_.clone();if(y(b,0)){if(!y(N,0)){const V=N/(N-b);S.x=hr(S.x,D.x,V),S.y=hr(S.y,D.y,V),N=hr(N,b,V)}}else{const V=b/(b-N);D.x=hr(D.x,S.x,V),D.y=hr(D.y,S.y,V),b=hr(b,N,V)}return[{coord:D,height:b},{coord:S,height:N}]}prepareEdges(i,u){if(u.length===0)return;u.sort((b,N)=>b.hash===N.hash?N.polygonIdx-b.polygonIdx:N.hash>b.hash?1:-1);let f=0,y=0,m=0,_=u[f].polygonIdx;do y++,(y===u.length||u[f].hash!==u[y].hash)&&((y-f==1||u[y-1].polygonIdx!==_)&&(m<f&&(u[m]=u[f],u[f]=null),u[m].type="none",m++),f=y,f!==u.length&&(_=u[f].polygonIdx));while(f!==u.length);if(u.splice(m),u.length!==0&&i.length!==0){u.sort((D,S)=>D.hash<S.hash?1:-1);let b=0,N=0;for(;b!==u.length&&N!==i.length;){const D=u[b],S=i[N];D.portalHash>S.hash?b++:S.hash>D.portalHash?N++:(D.type=S.type,b++)}}}isOnBorder(i,u){return i<=0&&u<=0||i>=Na&&u>=Na}static computeEdgeHash(i,u){return(i.y===u.y&&i.x>u.x||i.y>u.y)&&([i,u]=[u,i]),BigInt(Bd.computePosHash(i))<<32n|BigInt(Bd.computePosHash(u))}static computePosHash(i){return((65535&i.x)<<16|65535&i.y)>>>0}}class lA{constructor(i,u){this.layoutVertexArray=new Su,this.indexArray=new Ps,this.lineIndexArray=new Id,this.triangleSegments=new Oi,this.lineSegments=new Oi,this.programConfigurations=new yh(i.layers,{zoom:i.zoom,lut:i.lut}),this.uploaded=!1,u&&(this.elevatedLayoutVertexArray=new Kc)}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}needsUpload(){return this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ky.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.lineIndexBuffer=i.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=i.createVertexBuffer(this.elevatedLayoutVertexArray,N0.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(i,u,f,y,m,_){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,u,f,y,m,_)}}class Hy{constructor(i){this.zoom=i.zoom,this.pixelRatio=i.pixelRatio,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.bufferData=new lA(i,!1),this.elevationBufferData=new lA(i,!0),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=i.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference")}updateFootprints(i,u){}populate(i,u,f,y){this.hasPattern=sA("fill",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:b,id:N,index:D,sourceLayerIndex:S}of i){const V=this.layers[0]._featureFilter.needGeometry,I=K(b,V);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),I,f))continue;const O=m?m.evaluate(I,{},f,u.availableImages):void 0,M={id:N,properties:b.properties,type:b.type,sourceLayerIndex:S,index:D,geometry:V?I.geometry:Z(b,f,y),patterns:{},sortKey:O};_.push(M)}m&&_.sort((b,N)=>b.sortKey-N.sortKey);for(const b of _){const{geometry:N,index:D,sourceLayerIndex:S}=b;if(this.hasPattern){const V=oA("fill",this.layers,b,this.zoom,this.pixelRatio,u);this.patternFeatures.push(V)}else this.addFeature(b,N,D,f,{},u.availableImages,u.brightness,u.elevationFeatures);u.featureIndex.insert(i[D].feature,N,D,S,this.index)}}update(i,u,f,y,m,_,b){this.bufferData.update(i,u,f,y,m,_,b),this.elevationBufferData.update(i,u,f,y,m,_,b)}addFeatures(i,u,f,y,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,y,_,i.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(i){this.bufferData.upload(i),this.elevationBufferData.upload(i),this.elevatedStructures&&this.elevatedStructures.upload(i)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(i,u,f,y,m,_=[],b,N){const D=iA(u,500);this.elevationMode!=="none"?this.addElevatedRoadFeature(i,D,y,f,N):this.addGeometry(D,this.bufferData),this.bufferData.populatePaintArrays(i,f,m,_,y,b),this.elevationBufferData.populatePaintArrays(i,f,m,_,y,b)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(i){this.elevatedStructures&&this.elevatedStructures.construct(i)}addElevatedRoadFeature(i,u,f,y,m){const _=new Array,b=this.getElevationFeature(i,m);if(b){_.push({polygons:u,elevationFeature:b,elevationTileID:f});for(const N of _)if(N.elevationFeature){if(this.elevationMode==="hd-road-base"){this.elevatedStructures||(this.elevatedStructures=new Bd(N.elevationTileID));const S=N.elevationFeature.isTunnel();let V=0;i.properties.hasOwnProperty(Hm)&&(V=+i.properties[Hm]);for(const I of N.polygons)this.elevatedStructures.addPortalCandidates(N.elevationFeature.id,I,S,N.elevationFeature,V)}const D=new Es(f,N.elevationTileID);this.addElevatedGeometry(N.polygons,D,N.elevationFeature,this.elevationMode==="hd-road-base"?0:.05,y)}}else this.addGeometry(u,this.bufferData)}addElevatedGeometry(i,u,f,y,m){const _={elevation:f,elevationSampler:u,bias:y,index:m},[b,N]=this.addGeometry(i,this.elevationBufferData,_);this.elevationBufferData.heightRange==null?this.elevationBufferData.heightRange={min:b,max:N}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,b),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,N))}addGeometry(i,u,f){let y=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,_=null;f&&(_=f.elevationSampler.constantElevation(f.elevation,f.bias),_!=null&&(y=_,m=_));const b=(N,D,S)=>{if(f!=null)if(D.push(N),_!=null)u.elevatedLayoutVertexArray.emplaceBack(_),S.push(_);else{const V=f.elevationSampler.pointElevation(N,f.elevation,f.bias);u.elevatedLayoutVertexArray.emplaceBack(V),S.push(V),y=Math.min(y,V),m=Math.max(m,V)}};for(const N of i){let D=0;for(const le of N)D+=le.length;const S=u.triangleSegments.prepareSegment(D,u.layoutVertexArray,u.indexArray),V=S.vertexLength,I=[],O=[],M=[],B=[],Y=[],ee=u.layoutVertexArray.length;for(const le of N){if(le.length===0)continue;le!==N[0]&&O.push(I.length/2);const re=u.lineSegments.prepareSegment(le.length,u.layoutVertexArray,u.lineIndexArray),pe=re.vertexLength;f&&Y.push(u.layoutVertexArray.length-ee),b(le[0],M,B),u.layoutVertexArray.emplaceBack(le[0].x,le[0].y),u.lineIndexArray.emplaceBack(pe+le.length-1,pe),I.push(le[0].x),I.push(le[0].y);for(let Se=1;Se<le.length;Se++)b(le[Se],M,B),u.layoutVertexArray.emplaceBack(le[Se].x,le[Se].y),u.lineIndexArray.emplaceBack(pe+Se-1,pe+Se),I.push(le[Se].x),I.push(le[Se].y);re.vertexLength+=le.length,re.primitiveLength+=le.length}const ue=aA(I,O);for(let le=0;le<ue.length;le+=3)u.indexArray.emplaceBack(V+ue[le],V+ue[le+1],V+ue[le+2]);if(f&&this.elevationMode==="hd-road-base"){const le=f.elevation.isTunnel(),re=f.elevation.safeArea,pe=this.elevatedStructures.addVertices(M,B);this.elevatedStructures.addTriangles(ue,pe,le);const Se=Y.length;if(Se>0){for(let xe=0;xe<Se-1;xe++)this.elevatedStructures.addRenderableRing(f.index,Y[xe]+pe,Y[xe+1]-Y[xe],le,re);this.elevatedStructures.addRenderableRing(f.index,Y[Se-1]+pe,M.length-Y[Se-1],le,re)}}S.vertexLength+=D,S.primitiveLength+=ue.length/3}return[y,m]}getElevationFeature(i,u){if(!u)return;const f=+i.properties[Pf];return f!=null?u.find(y=>y.id===f):void 0}}let i1,s1,F0,U0;xt(Hy,"FillBucket",{omit:["layers","patternFeatures"]}),xt(lA,"FillBufferData"),xt(Bd,"ElevatedStructures");class o1{constructor(i,u,f,y){if(this.triangleCount=u.length/3,this.min=new Bt(0,0),this.max=new Bt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||i.length===0)return;const[m,_]=[i[0].clone(),i[0].clone()];for(let V=1;V<i.length;++V){const I=i[V];m.x=Math.min(m.x,I.x),m.y=Math.min(m.y,I.y),_.x=Math.max(_.x,I.x),_.y=Math.max(_.y,I.y)}if(y){const V=Math.ceil(Math.max(_.x-m.x,_.y-m.y)/y);f=Math.max(f,V)}if(f===0)return;this.min=m,this.max=_;const b=this.max.sub(this.min);b.x=Math.max(b.x,1),b.y=Math.max(b.y,1);const N=Math.max(b.x,b.y)/f;this.cellsX=Math.max(1,Math.ceil(b.x/N)),this.cellsY=Math.max(1,Math.ceil(b.y/N)),this.xScale=1/N,this.yScale=1/N;const D=[];for(let V=0;V<this.triangleCount;V++){const I=i[u[3*V+0]].sub(this.min),O=i[u[3*V+1]].sub(this.min),M=i[u[3*V+2]].sub(this.min),B=$h(Math.floor(Math.min(I.x,O.x,M.x)),this.xScale,this.cellsX),Y=$h(Math.floor(Math.max(I.x,O.x,M.x)),this.xScale,this.cellsX),ee=$h(Math.floor(Math.min(I.y,O.y,M.y)),this.yScale,this.cellsY),ue=$h(Math.floor(Math.max(I.y,O.y,M.y)),this.yScale,this.cellsY),le=new Bt(0,0),re=new Bt(0,0),pe=new Bt(0,0),Se=new Bt(0,0);for(let xe=ee;xe<=ue;++xe){le.y=re.y=xe*N,pe.y=Se.y=(xe+1)*N;for(let Ke=B;Ke<=Y;++Ke)le.x=pe.x=Ke*N,re.x=Se.x=(Ke+1)*N,(Yt(I,O,M,le,re,Se)||Yt(I,O,M,le,Se,pe))&&D.push({cellIdx:xe*this.cellsX+Ke,triIdx:V})}}if(D.length===0)return;D.sort((V,I)=>V.cellIdx-I.cellIdx||V.triIdx-I.triIdx);let S=0;for(;S<D.length;){const V=D[S].cellIdx,I={start:this.payload.length,len:0};for(;S<D.length&&D[S].cellIdx===V;)++I.len,this.payload.push(D[S++].triIdx);this.cells[V]=I}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(i,u){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>i.x||i.y>this.max.y||this.min.y>i.y)return;const f=$h(i.x-this.min.x,this.xScale,this.cellsX),y=$h(i.y-this.min.y,this.yScale,this.cellsY),m=this.cells[y*this.cellsX+f];if(m){this._lazyInitLookup();for(let _=0;_<m.len;_++){const b=this.payload[m.start+_],N=Math.floor(b/8),D=1<<b%8;if(!(this.lookup[N]&D)&&(this.lookup[N]|=D,u.push(b),u.length===this.triangleCount))return}}}query(i,u,f){if(this.triangleCount===0||this.cells.length===0||i.x>this.max.x||this.min.x>u.x||i.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const y=$h(i.x-this.min.x,this.xScale,this.cellsX),m=$h(u.x-this.min.x,this.xScale,this.cellsX),_=$h(i.y-this.min.y,this.yScale,this.cellsY),b=$h(u.y-this.min.y,this.yScale,this.cellsY);for(let N=_;N<=b;N++)for(let D=y;D<=m;D++){const S=this.cells[N*this.cellsX+D];if(S)for(let V=0;V<S.len;V++){const I=this.payload[S.start+V],O=Math.floor(I/8),M=1<<I%8;if(!(this.lookup[O]&M)&&(this.lookup[O]|=M,f.push(I),f.length===this.triangleCount))return}}}}function $h(d,i,u){return Math.max(0,Math.min(u-1,Math.floor(d*i)))}xt(o1,"TriangleGridIndex");class BT{constructor(i){this.zoom=i.zoom,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[]}updateFootprints(i,u){for(const f of this.footprints)u.push({footprint:f,id:i})}populate(i,u,f,y){const m=[];for(const{feature:_,id:b,index:N,sourceLayerIndex:D}of i){const S=this.layers[0]._featureFilter.needGeometry,V=K(_,S);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),V,f))continue;const I={id:b,properties:_.properties,type:_.type,sourceLayerIndex:D,index:N,geometry:S?V.geometry:Z(_,f,y),patterns:{}};m.push(I)}for(const _ of m){const{geometry:b,index:N,sourceLayerIndex:D}=_;this.addFeature(_,b,N,f,{},u.availableImages,u.brightness),u.featureIndex.insert(i[N].feature,b,N,D,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(i){}update(i,u,f,y,m,_,b){}destroy(){}addFeature(i,u,f,y,m,_=[],b){for(const N of iA(u,2)){const D=[],S=[],V=[],I=new Bt(1/0,1/0),O=new Bt(-1/0,-1/0);for(const Y of N)if(Y.length!==0){Y!==N[0]&&V.push(S.length/2);for(let ee=0;ee<Y.length;ee++)S.push(Y[ee].x),S.push(Y[ee].y),D.push(Y[ee]),I.x=Math.min(I.x,Y[ee].x),I.y=Math.min(I.y,Y[ee].y),O.x=Math.max(O.x,Y[ee].x),O.y=Math.max(O.y,Y[ee].y)}const M=aA(S,V),B=new o1(D,M,8,256);this.footprints.push({vertices:D,indices:M,grid:B,min:I,max:O})}}}xt(BT,"ClipBucket",{omit:["layers"]});const GT=xn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),tP=xn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),aP=xn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),l1=xn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),u1=xn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),rP=xn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:nP}=GT;class Nu extends Bt{constructor(i,u,f){super(i,u),this.z=f}}class c1 extends Nu{constructor(i,u,f,y){super(i,u,f),this.w=y}}function uA(d,i,u,f){const y=[],m=f===0?(_,b,N,D,S,V)=>{_.push(new Bt(V,N+(V-b)/(D-b)*(S-N)))}:(_,b,N,D,S,V)=>{_.push(new Bt(b+(V-N)/(S-N)*(D-b),V))};for(const _ of d){const b=[];for(const N of _){if(N.length<=2)continue;const D=[];for(let I=0;I<N.length-1;I++){const O=N[I].x,M=N[I].y,B=N[I+1].x,Y=N[I+1].y,ee=f===0?O:M,ue=f===0?B:Y;ee<i?ue>i&&m(D,O,M,B,Y,i):ee>u?ue<u&&m(D,O,M,B,Y,u):D.push(N[I]),ue<i&&ee>=i&&m(D,O,M,B,Y,i),ue>u&&ee<=u&&m(D,O,M,B,Y,u)}let S=N[N.length-1];const V=f===0?S.x:S.y;V>=i&&V<=u&&D.push(S),D.length&&(S=D[D.length-1],D[0].x===S.x&&D[0].y===S.y||D.push(D[0]),b.push(D))}b.length&&y.push(b)}return y}function Gd(d,i,u,f){const y=u==="x"?"y":"x",m=(f-d[u])/(i[u]-d[u]);d[y]=d[y]+(i[y]-d[y])*m,d[u]=f,d.hasOwnProperty("z")&&(d.z=hr(d.z,i.z,m)),d.hasOwnProperty("w")&&(d.w=hr(d.w,i.w,m))}function d1(d,i,u,f){const y=u,m=f;for(const _ of["x","y"]){let b=d,N=i;b[_]>=N[_]&&(b=i,N=d),b[_]<y&&N[_]>y&&Gd(b,N,_,y),b[_]<m&&N[_]>m&&Gd(N,b,_,m)}}const $m=Number.MAX_SAFE_INTEGER;function Nf(d,i,u,f){return d.order<i||d.order===$m||!(d.clipMask&u)||function(y,m){return m.length!==0&&m.find(_=>_===y)===void 0}(f,d.clipScope)}function k0(d,i){return d.x-i.x||d.y-i.y}function jT(d,i){return k0(d.min,i.min)===0&&k0(d.max,i.max)===0}function Qp(d,i){return!(d.min.x>i.max.x||d.max.x<i.min.x||d.min.y>i.max.y||d.max.y<i.min.y)}function B0(d,i){if(d.length!==i.length)return!1;for(let u=0;u<d.length;u++)if(d[u].sourceId!==i[u].sourceId||!jT(d[u],i[u])||d[u].order!==i[u].order||d[u].clipMask!==i[u].clipMask||!la(d[u].clipScope,i[u].clipScope))return!1;return!0}function ZT(d,i,u){const f=1/Na,y=1/(1<<u.canonical.z),m=(i.x*f+u.canonical.x)*y+u.wrap,_=(i.y*f+u.canonical.y)*y;return{min:new Bt((d.x*f+u.canonical.x)*y+u.wrap,(d.y*f+u.canonical.y)*y),max:new Bt(m,_)}}function iP(d,i,u){const f=1<<u.canonical.z,y=((i.x-u.wrap)*f-u.canonical.x)*Na,m=(i.y*f-u.canonical.y)*Na;return{min:new Bt(((d.x-u.wrap)*f-u.canonical.x)*Na,(d.y*f-u.canonical.y)*Na),max:new Bt(y,m)}}function qT(d,i,u,f,y,m,_){const b=d.indices,N=d.vertices,D=[];for(let S=f;S<f+y;S+=3){const V=i[u[S+0]+m],I=i[u[S+1]+m],O=i[u[S+2]+m],M=Math.min(V.x,I.x,O.x),B=Math.max(V.x,I.x,O.x),Y=Math.min(V.y,I.y,O.y),ee=Math.max(V.y,I.y,O.y);D.length=0,d.grid.query(new Bt(M,Y),new Bt(B,ee),D);for(let ue=0;ue<D.length;ue++){const le=D[ue];if(Yt(N[b[3*le+0]],N[b[3*le+1]],N[b[3*le+2]],V,I,O,_))return!0}}return!1}function HT(d,i,u,f){if(!d||!u)return!1;let y=d.vertices;if(!i.canonical.equals(f.canonical)||i.wrap!==f.wrap){if(u.vertices.length<d.vertices.length)return HT(u,f,d,i);const m=i.canonical,_=f.canonical,b=Math.pow(2,_.z-m.z);y=d.vertices.map(N=>new Bt((N.x+m.x*Na)*b-_.x*Na,(N.y+m.y*Na)*b-_.y*Na))}return qT(u,y,d.indices,0,d.indices.length,0,0)}function $T(d,i,u,f){const y=Math.pow(2,f.z-u.z);return new Bt((d+u.x*Na)*y-f.x*Na,(i+u.y*Na)*y-f.y*Na)}function KT(d,i){const u=[];i.grid.queryPoint(d,u);const f=i.indices,y=i.vertices;for(let m=0;m<u.length;m++){const _=u[m];if(it([y[f[3*_+0]],y[f[3*_+1]],y[f[3*_+2]]],d))return!0}return!1}const h1=[new Bt(0,0),new Bt(Na,0),new Bt(Na,Na),new Bt(0,Na)];function f1(d,i){const u=[];let f=[];if(!i||d.length<2)return[d];if(d.length===2)return yt(d[0],d[1],h1)?[d]:[];for(let y=0;y<d.length+2;y++){const m=d[y%d.length],_=d[(y+1)%d.length],b=yt(y===0?d[d.length-1]:d[(y-1)%d.length],m,h1),N=yt(m,_,h1),D=b||N;D&&f.push(m),D&&N||f.length>0&&(f.length>1&&u.push(f),f=[])}return f.length>1&&u.push(f),u}const em=vh.VectorTileFeature.types,cA=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],WT=["fill-extrusion-flood-light-ground-radius"],sP=Math.pow(2,13),$y=Math.pow(2,15)-1,Ky=new Bt(0,1),up=2147483648;function tm(d,i,u,f,y,m,_,b){d.emplaceBack((i<<1)+_,(u<<1)+m,(Math.floor(f*sP)<<1)+y,Math.round(b))}function Km(d,i,u){d.emplaceBack(i.x*Na,i.y*Na,u?1:0)}function Wy(d,i,u,f,y,m){d.emplaceBack(i.x,i.y,(u.x<<1)+f,(u.y<<1)+y,m)}function am(d,i,u){d.emplaceBack(i.x,i.y,i.z,u[0]*16384,u[1]*16384,u[2]*16384)}class p1{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class m1{constructor(){this.centroidXY=new Bt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Bt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Bt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Bt(this.max.x-this.min.x,this.max.y-this.min.y)}}class YT{constructor(){this.acc=new Bt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(i,u){i.min.x===Number.MAX_VALUE&&(i.min.x=i.max.x=u.x,i.min.y=i.max.y=u.y)}appendEdge(i,u,f){this.accCount++,this.acc._add(u);let y=!!this.borders;u.x<i.min.x?(i.min.x=u.x,y=!0):u.x>i.max.x&&(i.max.x=u.x,y=!0),u.y<i.min.y?(i.min.y=u.y,y=!0):u.y>i.max.y&&(i.max.y=u.y,y=!0),((u.x===0||u.x===Na)&&u.x===f.x)!=((u.y===0||u.y===Na)&&u.y===f.y)&&this.processBorderOverlap(u,f),y&&this.checkBorderIntersection(u,f)}checkBorderIntersection(i,u){u.x<0!=i.x<0&&this.addBorderIntersection(0,hr(u.y,i.y,(0-u.x)/(i.x-u.x))),u.x>Na!=i.x>Na&&this.addBorderIntersection(1,hr(u.y,i.y,(Na-u.x)/(i.x-u.x))),u.y<0!=i.y<0&&this.addBorderIntersection(2,hr(u.x,i.x,(0-u.y)/(i.y-u.y))),u.y>Na!=i.y>Na&&this.addBorderIntersection(3,hr(u.x,i.x,(Na-u.y)/(i.y-u.y)))}addBorderIntersection(i,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const f=this.borders[i];u<f[0]&&(f[0]=u),u>f[1]&&(f[1]=u)}processBorderOverlap(i,u){if(i.x===u.x){if(i.y===u.y)return;const f=i.x===0?0:1;this.addBorderIntersection(f,u.y),this.addBorderIntersection(f,i.y)}else{const f=i.y===0?2:3;this.addBorderIntersection(f,u.x),this.addBorderIntersection(f,i.x)}}centroid(){return this.accCount===0?new Bt(0,0):new Bt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((i,u)=>i+ +(u[0]!==Number.MAX_VALUE),0):0}}function y1(d,i){const u=d.add(i)._unit(),f=ka(d.x*u.x+d.y*u.y,-1,1);var y,m,_;return _=Math.acos(f),Math.min(4,Math.max(-4,Math.tan(_)))/4*$y*((y=d).x*(m=i).y-y.y*m.x<0?-1:1)}const dA=[d=>d.x<0,d=>d.x>Na,d=>d.y<0,d=>d.y>Na];function oP(d,i,u,f){const y=[4];if(f===0)return y;u._mult(f);const m=d.sub(u),_=i.sub(u),b=[d,i,m,_];for(let N=0;N<4;N++)for(const D of b)if(dA[N](D)){y.push(N);break}return y}class XT{constructor(i){this.vertexArray=new Vl,this.indexArray=new Ps,this.programConfigurations=new yh(i.layers,{zoom:i.zoom,lut:i.lut},u=>WT.includes(u)),this._segments=new Oi,this.hiddenByLandmarkVertexArray=new zy,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Oi}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(i,u,f,y=!1){const m=i.length;if(m>2){let _=Math.max(0,this._segments.get().length-1);const b=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[_].length);let N;_!==this._segments.get().length-1&&(_++,this._segmentToGroundQuads[_]=[],this._segmentToRegionTriCounts[_]=[0,0,0,0,0]);{const D=i[0],S=i[1];N=y1(D.sub(i[m-1])._perp()._unit(),S.sub(D)._perp()._unit())}for(let D=0;D<m;D++){const S=D===m-1?0:D+1,V=i[D],I=i[S],O=i[S===m-1?0:S+1],M=I.sub(V)._perp()._unit(),B=y1(M,O.sub(I)._perp()._unit()),Y=N,ee=B;if(g1(V,I,u)||y&&Yy(V,u)&&Yy(I,u)){N=B;continue}const ue=b.vertexLength;Wy(this.vertexArray,V,I,1,1,Y),Wy(this.vertexArray,V,I,1,0,Y),Wy(this.vertexArray,V,I,0,1,ee),Wy(this.vertexArray,V,I,0,0,ee),b.vertexLength+=4;const le=oP(V,I,M,f);for(const re of le)this._segmentToGroundQuads[_].push({id:ue,region:re}),this._segmentToRegionTriCounts[_][re]+=2,b.primitiveLength+=2;N=B}}}prepareBorderSegments(){if(!this.hasData())return;const i=this._segments.get(),u=i.length;for(let f=0;f<u;f++)this._segmentToGroundQuads[f].sort((y,m)=>y.region-m.region);for(let f=0;f<u;f++){const y=this._segmentToGroundQuads[f],m=i[f],_=this._segmentToRegionTriCounts[f];_.reduce((N,D)=>N+D,0);let b=0;for(let N=0;N<=4;N++){const D=_[N];if(D!==0){let S=this.regionSegments[N];S||(S=this.regionSegments[N]=new Oi);const V={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+b,vertexLength:m.vertexLength,primitiveLength:D};S.get().push(V)}b+=D}for(let N=0;N<y.length;N++){const D=y[N].id;this.indexArray.emplaceBack(D,D+1,D+3),this.indexArray.emplaceBack(D,D+3,D+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(i,u,f,y,m,_){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,i,u,f,y,m,_)}upload(i){this.hasData()&&(this.vertexBuffer=i.createVertexBuffer(this.vertexArray,tP.members),this.indexBuffer=i.createIndexBuffer(this.indexArray))}uploadPaintProperties(i){this.hasData()&&this.programConfigurations.upload(i)}update(i,u,f,y,m,_,b){this.hasData()&&this.programConfigurations.updatePaintArrays(i,u,f,y,m,_,b)}updateHiddenByLandmark(i){if(!this.hasData())return;const u=i.groundVertexCount+i.groundVertexArrayOffset;if(i.groundVertexCount===0)return;const f=i.flags&up?1:0;for(let y=i.groundVertexArrayOffset;y<u;++y)this.hiddenByLandmarkVertexArray.emplace(y,f);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(i){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=i.createVertexBuffer(this.hiddenByLandmarkVertexArray,u1.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let i=0;i<=4;i++){const u=this.regionSegments[i];u&&u.destroy()}}}}class G0{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.pixelRatio=i.pixelRatio,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Ps,this.footprintVertices=new Su,this.footprintSegments=[],this.layoutVertexArray=new Cu,this.centroidVertexArray=new Qf,this.wallVertexArray=new $g,this.indexArray=new Ps,this.programConfigurations=new yh(i.layers,{zoom:i.zoom,lut:i.lut},u=>cA.includes(u)),this.segments=new Oi,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new XT(i),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(i,u){}populate(i,u,f,y){this.features=[],this.hasPattern=sA("fill-extrusion",this.layers,this.pixelRatio,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=g(f),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:m,id:_,index:b,sourceLayerIndex:N}of i){const D=this.layers[0]._featureFilter.needGeometry,S=K(m,D);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),S,f))continue;const V={id:_,sourceLayerIndex:N,index:b,geometry:D?S.geometry:Z(m,f,y),properties:m.properties,type:m.type,patterns:{}},I=this.layoutVertexArray.length,O=em[V.type]==="Polygon";if(this.hasPattern)this.features.push(oA("fill-extrusion",this.layers,V,this.zoom,this.pixelRatio,u));else if(this.wallMode)for(const M of V.geometry)for(const B of f1(M,O))this.addFeature(V,[B],b,f,{},u.availableImages,y,u.brightness);else this.addFeature(V,V.geometry,b,f,{},u.availableImages,y,u.brightness);u.featureIndex.insert(m,V.geometry,b,N,this.index,I)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(i,u,f,y,m,_){for(const b of this.features){const N=em[b.type]==="Polygon",{geometry:D}=b;if(this.wallMode)for(const S of D)for(const V of f1(S,N))this.addFeature(b,[V],b.index,u,f,y,m,_);else this.addFeature(b,D,b.index,u,f,y,m,_)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b),this.groundEffect.update(i,u,m,f,y,_,b)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,nP),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.wallVertexBuffer=i.createVertexBuffer(this.wallVertexArray,l1.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,rP.members,!0)),this.groundEffect.upload(i)),this.groundEffect.uploadPaintProperties(i),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.groundEffect.uploadHiddenByLandmark(i),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,aP.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,f,y,m,_,b,N){const D=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(i,{})/this.tileToMeter,S=[new Bt(0,0),new Bt(Na,Na)],V=b.projection,I=V.name==="globe",O=this.wallMode||em[i.type]==="Polygon",M=new YT;M.centroidDataIndex=this.centroidData.length;const B=new m1,Y=this.layers[0].paint.get("fill-extrusion-base").evaluate(i,{},y)<=0,ee=this.layers[0].paint.get("fill-extrusion-height").evaluate(i,{},y);let ue;if(B.height=ee,B.vertexArrayOffset=this.layoutVertexArray.length,B.groundVertexArrayOffset=this.groundEffect.vertexArray.length,I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Yf),this.wallMode){if(I)return void en("Non zero fill-extrusion-line-width is not yet supported on globe.");if(u.length!==1)return;ue=function(He){const ft=He[0].x===He[He.length-1].x&&He[0].y===He[He.length-1].y;(function(Oa){let _a=0;const gr=Oa.length;for(let $a=0;$a<gr;$a++)_a+=(Oa[($a+1)%gr].x-Oa[$a].x)*(Oa[($a+1)%gr].y+Oa[$a].y);return _a>=0})(He)||(He=He.reverse());const gt={geometry:[],joinNormals:[],indices:[]},bt=[],Rt=[],Vt=[];let Et=He.length;for(;Et>=2&&He[Et-1].equals(He[Et-2]);)Et--;if(Et<(ft?3:2))return gt;let Ut,Dt,jt,ga,ma,Ya=0;for(;Ya<Et-1&&He[Ya].equals(He[Ya+1]);)Ya++;ft&&(Ut=He[Et-2],ma=He[Ya].sub(Ut)._unit()._perp());for(let Oa=Ya;Oa<Et;Oa++){if(jt=Oa===Et-1?ft?He[Ya+1]:void 0:He[Oa+1],jt&&He[Oa].equals(jt))continue;ma&&(ga=ma),Ut&&(Dt=Ut),Ut=He[Oa],ma=jt?jt.sub(Ut)._unit()._perp():ga,ga=ga||ma;let _a=ga.add(ma);_a.x===0&&_a.y===0||_a._unit();const gr=_a.x*ma.x+_a.y*ma.y,$a=gr!==0?1/gr:1/0,or=ga.x*ma.y-ga.y*ma.x>0;let Or="miter";const Jr=2;Or==="miter"&&$a>Jr&&(Or="bevel"),Or==="bevel"&&($a>100&&(Or="flipbevel"),$a<Jr&&(Or="miter"));const Ur=(cn,Xr,wn,Hn)=>{const Pi=new Bt(cn.x,cn.y),Ir=new Bt(cn.x,cn.y);Pi.x+=Xr.x*Hn,Pi.y+=Xr.y*Hn,Ir.x-=Xr.x*Math.max(wn,1),Ir.y-=Xr.y*Math.max(wn,1),Vt.push(Xr),bt.push(Pi),Rt.push(Ir)};if(Or==="miter")_a._mult($a),Ur(Ut,_a,0,0);else if(Or==="flipbevel")_a=ma.mult(-1),Ur(Ut,_a,0,0),Ur(Ut,_a.mult(-1),0,0);else{const cn=-Math.sqrt($a*$a-1),Xr=or?cn:0,wn=or?0:cn;Dt&&Ur(Ut,ga,Xr,wn),jt&&Ur(Ut,ma,Xr,wn)}}gt.geometry=[...bt,...Rt.reverse(),bt[0]],gt.joinNormals=[...Vt,...Vt.reverse(),Vt[Vt.length-1]];const xa=gt.geometry.length-1;for(let Oa=0;Oa<xa/2;Oa++)if(Oa+1<xa/2){let _a=Oa,gr=Oa+1,$a=xa-1-Oa,or=xa-2-Oa;_a=_a===0?xa-1:_a-1,gr=gr===0?xa-1:gr-1,$a=$a===0?xa-1:$a-1,or=or===0?xa-1:or-1,gt.indices.push($a),gt.indices.push(gr),gt.indices.push(_a),gt.indices.push($a),gt.indices.push(or),gt.indices.push(gr)}return gt}(u[0]),u=[ue.geometry]}const le=(He,ft)=>He<(ft.length-1)/2||He===ft.length-1,re=this.wallMode?[u]:iA(u,500);for(let He=re.length-1;He>=0;He--){const ft=re[He];(ft.length===0||(pe=ft[0]).every(Ye=>Ye.x<=0)||pe.every(Ye=>Ye.x>=Na)||pe.every(Ye=>Ye.y<=0)||pe.every(Ye=>Ye.y>=Na))&&re.splice(He,1)}var pe;let Se;if(I)Se=v1(re,S,y);else{Se=[];for(const He of re)Se.push({polygon:He,bounds:S})}const xe=O?this.edgeRadius:0,Ke=xe>0&&this.zoom<17,Ze=(He,ft)=>{if(He.length===0)return!1;const Ye=He[He.length-1];return ft.x===Ye.x&&ft.y===Ye.y};for(const{polygon:He,bounds:ft}of Se){let Ye=0,gt=0;for(const Et of He)O&&!Et[0].equals(Et[Et.length-1])&&Et.push(Et[0]),gt+=O?Et.length-1:Et.length;const bt=this.segments.prepareSegment((O?5:4)*gt,this.layoutVertexArray,this.indexArray);B.footprintSegIdx<0&&(B.footprintSegIdx=this.footprintSegments.length),B.polygonSegIdx<0&&(B.polygonSegIdx=this.polygonSegments.length);const Rt={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Vt=new p1;if(Vt.vertexOffset=this.footprintVertices.length,Vt.indexOffset=3*this.footprintIndices.length,Vt.ringIndices=[],O){const Et=[],Ut=[];Ye=bt.vertexLength;for(let jt=0;jt<He.length;jt++){const ga=He[jt];ga.length&&jt!==0&&Ut.push(Et.length/2);const ma=[];let Ya,xa;Ya=ga[1].sub(ga[0])._perp()._unit(),Vt.ringIndices.push(ga.length-1);for(let Oa=1;Oa<ga.length;Oa++){const _a=ga[Oa],gr=ga[Oa===ga.length-1?1:Oa+1],$a=_a.clone();if(xe){xa=gr.sub(_a)._perp()._unit();const or=Ya.add(xa)._unit(),Or=xe*Math.min(4,1/(Ya.x*or.x+Ya.y*or.y));$a.x+=Or*or.x,$a.y+=Or*or.y,$a.x=Math.round($a.x),$a.y=Math.round($a.y),Ya=xa}if(!Y||xe!==0&&!Ke||Ze(ma,$a)||ma.push($a),tm(this.layoutVertexArray,$a.x,$a.y,0,0,1,1,0),this.wallMode){const or=le(Oa,ga);Km(this.wallVertexArray,ue.joinNormals[Oa],!or)}bt.vertexLength++,this.footprintVertices.emplaceBack(_a.x,_a.y),Et.push(_a.x,_a.y),I&&am(this.layoutVertexExtArray,V.projectTilePoint($a.x,$a.y,y),V.upVector(y,$a.x,$a.y))}Y&&(xe===0||Ke)&&(ma.length!==0&&Ze(ma,ma[0])&&ma.pop(),this.groundEffect.addData(ma,ft,D))}const Dt=this.wallMode?ue.indices:aA(Et,Ut);for(let jt=0;jt<Dt.length;jt+=3)this.footprintIndices.emplaceBack(Vt.vertexOffset+Dt[jt+0],Vt.vertexOffset+Dt[jt+1],Vt.vertexOffset+Dt[jt+2]),this.indexArray.emplaceBack(Ye+Dt[jt],Ye+Dt[jt+2],Ye+Dt[jt+1]),bt.primitiveLength++;Vt.indexCount+=Dt.length,Vt.vertexCount+=this.footprintVertices.length-Vt.vertexOffset}for(let Et=0;Et<He.length;Et++){const Ut=He[Et];M.startRing(B,Ut[0]);let Dt=Ut.length>4&&JT(Ut[Ut.length-2],Ut[0],Ut[1]),jt=xe?j0(Ut[Ut.length-2],Ut[0],Ut[1],xe):0;const ga=[];let ma,Ya,xa;Ya=Ut[1].sub(Ut[0])._perp()._unit();let Oa=!0;for(let _a=1,gr=0;_a<Ut.length;_a++){let $a=Ut[_a-1],or=Ut[_a];const Or=Ut[_a===Ut.length-1?1:_a+1];if(M.appendEdge(B,or,$a),g1(or,$a,ft)){xe&&(Ya=Or.sub(or)._perp()._unit(),Oa=!Oa);continue}const Jr=or.sub($a)._perp(),Ur=Jr.x/(Math.abs(Jr.x)+Math.abs(Jr.y)),cn=Jr.y>0?1:0,Xr=$a.dist(or);if(gr+Xr>32768&&(gr=0),xe){xa=Or.sub(or)._perp()._unit();let Ir=Z0($a,or,Or,hA(Ya,xa),xe);isNaN(Ir)&&(Ir=0);const En=or.sub($a)._unit();$a=$a.add(En.mult(jt))._round(),or=or.add(En.mult(-Ir))._round(),jt=Ir,Ya=xa,Y&&this.zoom>=17&&(Ze(ga,$a)||ga.push($a),Ze(ga,or)||ga.push(or))}const wn=bt.vertexLength,Hn=Ut.length>4&&JT($a,or,Or);let Pi=A1(gr,Dt,Oa);if(tm(this.layoutVertexArray,$a.x,$a.y,Ur,cn,0,0,Pi),tm(this.layoutVertexArray,$a.x,$a.y,Ur,cn,0,1,Pi),this.wallMode){const Ir=le(_a-1,Ut),En=ue.joinNormals[_a-1];Km(this.wallVertexArray,En,Ir),Km(this.wallVertexArray,En,Ir)}if(gr+=Xr,Pi=A1(gr,Hn,!Oa),Dt=Hn,tm(this.layoutVertexArray,or.x,or.y,Ur,cn,0,0,Pi),tm(this.layoutVertexArray,or.x,or.y,Ur,cn,0,1,Pi),this.wallMode){const Ir=le(_a,Ut),En=ue.joinNormals[_a];Km(this.wallVertexArray,En,Ir),Km(this.wallVertexArray,En,Ir)}if(bt.vertexLength+=4,this.indexArray.emplaceBack(wn+0,wn+1,wn+2),this.indexArray.emplaceBack(wn+1,wn+3,wn+2),bt.primitiveLength+=2,xe){const Ir=Ye+(_a===1?Ut.length-2:_a-2),En=_a===1?Ye:Ir+1;if(this.indexArray.emplaceBack(wn+1,Ir,wn+3),this.indexArray.emplaceBack(Ir,En,wn+3),bt.primitiveLength+=2,ma===void 0&&(ma=wn),!g1(Or,Ut[_a],ft)){const Wi=_a===Ut.length-1?ma:bt.vertexLength;this.indexArray.emplaceBack(wn+2,wn+3,Wi),this.indexArray.emplaceBack(wn+3,Wi+1,Wi),this.indexArray.emplaceBack(wn+3,En,Wi+1),bt.primitiveLength+=3}Oa=!Oa}if(I){const Ir=this.layoutVertexExtArray,En=V.projectTilePoint($a.x,$a.y,y),Wi=V.projectTilePoint(or.x,or.y,y),os=V.upVector(y,$a.x,$a.y),ys=V.upVector(y,or.x,or.y);am(Ir,En,os),am(Ir,En,os),am(Ir,Wi,ys),am(Ir,Wi,ys)}}O&&(Ye+=Ut.length-1),Y&&xe&&this.zoom>=17&&(ga.length!==0&&Ze(ga,ga[0])&&ga.pop(),this.groundEffect.addData(ga,ft,D,xe>0))}this.footprintSegments.push(Vt),Rt.triangleCount=this.indexArray.length-Rt.triangleArrayOffset,this.polygonSegments.push(Rt),++B.footprintSegLen,++B.polygonSegLen}if(B.vertexCount=this.layoutVertexArray.length-B.vertexArrayOffset,B.groundVertexCount=this.groundEffect.vertexArray.length-B.groundVertexArrayOffset,B.vertexCount!==0){if(B.centroidXY=M.borders?Ky:this.encodeCentroid(M,B),this.centroidData.push(B),M.borders){this.featuresOnBorder.push(M);const He=this.featuresOnBorder.length-1;for(let ft=0;ft<M.borders.length;ft++)M.borders[ft][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[ft].push(He)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,m,_,y,N),this.groundEffect.addPaintPropertiesData(i,f,m,_,y,N),this.maxHeight=Math.max(this.maxHeight,ee)}}sortBorders(){for(let i=0;i<this.borderFeatureIndices.length;i++)this.borderFeatureIndices[i].sort((u,f)=>this.featuresOnBorder[u].borders[i][0]-this.featuresOnBorder[f].borders[i][0])}splitToSubtiles(){const i=[];for(let b=0;b<this.centroidData.length;b++){const N=this.centroidData[b],D=+(N.min.y+N.max.y>Na),S=2*D+(+(N.min.x+N.max.x>Na)^D);for(let V=0;V<N.polygonSegLen;V++){const I=N.polygonSegIdx+V;i.push({centroidIdx:b,subtile:S,polygonSegmentIdx:I,triangleSegmentIdx:this.polygonSegments[I].triangleSegIdx})}}const u=new Ps;i.sort((b,N)=>b.triangleSegmentIdx===N.triangleSegmentIdx?b.subtile-N.subtile:b.triangleSegmentIdx-N.triangleSegmentIdx);let f=0,y=0,m=0;for(const b of i){if(b.triangleSegmentIdx!==f)break;m++}const _=i.length;for(;y!==i.length;){f=i[y].triangleSegmentIdx;let b=0,N=y,D=y;for(let S=N;S<m&&i[S].subtile===b;S++)D++;for(;N!==m;){const S=i[N];b=S.subtile;const V=this.centroidData[S.centroidIdx].min.clone(),I=this.centroidData[S.centroidIdx].max.clone(),O={vertexOffset:this.segments.segments[f].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[f].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let M=N;M<D;M++){const B=i[M],Y=this.polygonSegments[B.polygonSegmentIdx],ee=this.centroidData[B.centroidIdx].min,ue=this.centroidData[B.centroidIdx].max,le=this.indexArray.uint16;for(let re=Y.triangleArrayOffset;re<Y.triangleArrayOffset+Y.triangleCount;re++)u.emplaceBack(le[3*re],le[3*re+1],le[3*re+2]);O.primitiveLength+=Y.triangleCount,V.x=Math.min(V.x,ee.x),V.y=Math.min(V.y,ee.y),I.x=Math.max(I.x,ue.x),I.y=Math.max(I.y,ue.y)}O.primitiveLength>0&&this.triangleSubSegments.push({segment:O,min:V,max:I}),N=D;for(let M=N;M<m&&i[M].subtile===i[N].subtile;M++)D++}y=m;for(let S=y;S<_&&i[S].triangleSegmentIdx===i[y].triangleSegmentIdx;S++)m++}u._trim(),this.indexArray=u}getVisibleSegments(i,u,f){const y=new Oi;if(this.wallMode){for(const B of this.triangleSubSegments)y.segments.push(B.segment);return y}let m=0,_=0;const b=1<<i.canonical.z;if(u){const B=u.getMinMaxForTile(i);B&&(m=B.min,_=B.max)}_+=this.maxHeight;const N=i.toUnwrapped();let D;const S=[N.canonical.x/b+N.wrap,N.canonical.y/b],V=[(N.canonical.x+1)/b+N.wrap,(N.canonical.y+1)/b],I=(B,Y,ee)=>[B[0]*(1-ee[0])+Y[0]*ee[0],B[1]*(1-ee[1])+Y[1]*ee[1]],O=[],M=[];for(const B of this.triangleSubSegments){O[0]=B.min.x/Na,O[1]=B.min.y/Na,M[0]=B.max.x/Na,M[1]=B.max.y/Na;const Y=I(S,V,O),ee=I(S,V,M);if(new er([Y[0],Y[1],m],[ee[0],ee[1],_]).intersectsPrecise(f)===0){D&&(y.segments.push(D),D=void 0);continue}const ue=B.segment;D&&D.vertexOffset!==ue.vertexOffset&&(y.segments.push(D),D=void 0),D?(D.vertexLength+=ue.vertexLength,D.primitiveLength+=ue.primitiveLength):D={vertexOffset:ue.vertexOffset,primitiveLength:ue.primitiveLength,vertexLength:ue.vertexLength,primitiveOffset:ue.primitiveOffset,sortKey:void 0,vaos:{}}}return D&&y.segments.push(D),y}encodeCentroid(i,u){const f=i.centroid(),y=u.span(),m=Math.min(7,Math.round(y.x*this.tileToMeter/10)),_=Math.min(7,Math.round(y.y*this.tileToMeter/10));return new Bt(ka(f.x,1,Na-1)<<3|m,ka(f.y,1,Na-1)<<3|_)}encodeBorderCentroid(i){if(!i.borders)return new Bt(0,0);const u=i.borders,f=Number.MAX_VALUE;if(u[0][0]!==f||u[1][0]!==f){const y=u[0][0]!==f?0:1;return new Bt(6|(u[0][0]!==f?0:65528),(u[y][0]+u[y][1])/2<<3|6)}{const y=u[2][0]!==f?2:3;return new Bt((u[y][0]+u[y][1])/2<<3|6,6|(u[2][0]!==f?0:65528))}}showCentroid(i){const u=this.centroidData[i.centroidDataIndex];u.flags&=up,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(i){this.groundEffect.updateHiddenByLandmark(i);const u=i.vertexArrayOffset,f=i.vertexCount+i.vertexArrayOffset,y=i.flags&up?Ky:i.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==y.y||m!==y.x){for(let _=u;_<f;++_)this.centroidVertexArray.emplace(_,y.x,y.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const i of this.centroidData)this.writeCentroidToBuffer(i)}updateReplacement(i,u,f){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const y=u.getReplacementRegionsForTile(i.toUnwrapped());if(B0(this.activeReplacements,y))return;if(this.activeReplacements=y,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const _ of this.centroidData)_.flags&=2147483647;const m=[];for(const _ of this.activeReplacements){if(_.order<f)continue;const b=Math.max(1,Math.pow(2,_.footprintTileId.canonical.z-i.canonical.z));for(const N of this.centroidData)if(!(N.flags&up||_.min.x>N.max.x||N.min.x>_.max.x||_.min.y>N.max.y||N.min.y>_.max.y))for(let D=0;D<N.footprintSegLen;D++){const S=this.footprintSegments[N.footprintSegIdx+D];if(m.length=0,QT(this.footprintVertices,S.vertexOffset,S.vertexCount,_.footprintTileId.canonical,i.canonical,m),qT(_.footprint,m,this.footprintIndices.uint16,S.indexOffset,S.indexCount,-S.vertexOffset,-b)){N.flags|=up;break}}}for(const _ of this.centroidData)this.writeCentroidToBuffer(_);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(i,u,f){let y=!1;for(let m=0;m<f.footprintSegLen;m++){const _=this.footprintSegments[f.footprintSegIdx+m];let b=0;for(const N of _.ringIndices){for(let D=b,S=N+b-1;D<N+b;S=D++){const V=this.footprintVertices.int16[2*(D+_.vertexOffset)+0],I=this.footprintVertices.int16[2*(D+_.vertexOffset)+1],O=this.footprintVertices.int16[2*(S+_.vertexOffset)+1];I>u!=O>u&&i<(this.footprintVertices.int16[2*(S+_.vertexOffset)+0]-V)*(u-I)/(O-I)+V&&(y=!y)}b=N}}return y}getHeightAtTileCoord(i,u){let f=Number.NEGATIVE_INFINITY,y=!0;const m=4*(i+Na)*Na+(u+Na);if(this.partLookup.hasOwnProperty(m)){const _=this.partLookup[m];return _?{height:_.height,hidden:!!(_.flags&up)}:void 0}for(const _ of this.centroidData)i>_.max.x||_.min.x>i||u>_.max.y||_.min.y>u||this.footprintContainsPoint(i,u,_)&&_&&_.height>f&&(f=_.height,this.partLookup[m]=_,y=!!(_.flags&up));if(f!==Number.NEGATIVE_INFINITY)return{height:f,hidden:y};this.partLookup[m]=void 0}}function hA(d,i){const u=d.add(i)._unit();return d.x*u.x+d.y*u.y}function j0(d,i,u,f){const y=i.sub(d)._perp()._unit(),m=u.sub(i)._perp()._unit();return Z0(d,i,u,hA(y,m),f)}function Z0(d,i,u,f,y){const m=Math.sqrt(1-f*f);return Math.min(d.dist(i)/3,i.dist(u)/3,y*m/f)}function g1(d,i,u){return d.x<u[0].x&&i.x<u[0].x||d.x>u[1].x&&i.x>u[1].x||d.y<u[0].y&&i.y<u[0].y||d.y>u[1].y&&i.y>u[1].y}function Yy(d,i){return d.x<i[0].x||d.x>i[1].x||d.y<i[0].y||d.y>i[1].y}function JT(d,i,u){if(d.x<0||d.x>=Na||i.x<0||i.x>=Na||u.x<0||u.x>=Na)return!1;const f=u.sub(i),y=f.perp(),m=d.sub(i);return(f.x*m.x+f.y*m.y)/Math.sqrt((f.x*f.x+f.y*f.y)*(m.x*m.x+m.y*m.y))>-.866&&y.x*m.x+y.y*m.y<0}function A1(d,i,u){const f=i?2|d:-3&d;return u?1|f:-2&f}function _1(){const d=Math.PI/32,i=Math.tan(d),u=sl;return u*Math.sqrt(1+2*i*i)-u}function v1(d,i,u){const f=1<<u.z,y=Pu(u.x/f),m=Pu((u.x+1)/f),_=wi(u.y/f),b=wi((u.y+1)/f);return function(N,D,S,V,I=0,O){const M=[];if(!N.length||!S||!V)return M;const B=(Se,xe)=>{for(const Ke of Se)M.push({polygon:Ke,bounds:xe})},Y=Math.ceil(Math.log2(S)),ee=Math.ceil(Math.log2(V)),ue=Y-ee,le=[];for(let Se=0;Se<Math.abs(ue);Se++)le.push(ue>0?0:1);for(let Se=0;Se<Math.min(Y,ee);Se++)le.push(0),le.push(1);let re=N;if(re=uA(re,D[0].y-I,D[1].y+I,1),re=uA(re,D[0].x-I,D[1].x+I,0),!re.length)return M;const pe=[];for(le.length?pe.push({polygons:re,bounds:D,depth:0}):B(re,D);pe.length;){const Se=pe.pop(),xe=Se.depth,Ke=le[xe],Ze=Se.bounds[0],He=Se.bounds[1],ft=Ke===0?Ze.x:Ze.y,Ye=Ke===0?He.x:He.y,gt=O?O(Ke,ft,Ye):.5*(ft+Ye),bt=uA(Se.polygons,ft-I,gt+I,Ke),Rt=uA(Se.polygons,gt-I,Ye+I,Ke);if(bt.length){const Vt=[Ze,new Bt(Ke===0?gt:He.x,Ke===1?gt:He.y)];le.length>xe+1?pe.push({polygons:bt,bounds:Vt,depth:xe+1}):B(bt,Vt)}if(Rt.length){const Vt=[new Bt(Ke===0?gt:Ze.x,Ke===1?gt:Ze.y),He];le.length>xe+1?pe.push({polygons:Rt,bounds:Vt,depth:xe+1}):B(Rt,Vt)}}return M}(d,i,Math.ceil((m-y)/11.25),Math.ceil((_-b)/11.25),1,(N,D,S)=>{if(N===0)return .5*(D+S);{const V=wi((u.y+D/Na)/f);return(xi(.5*(wi((u.y+S/Na)/f)+V))*f-u.y)*Na}})}function QT(d,i,u,f,y,m){const _=Math.pow(2,f.z-y.z);for(let b=0;b<u;b++){let N=d.int16[2*(b+i)+0],D=d.int16[2*(b+i)+1];N=(N+y.x*Na)*_-f.x*Na,D=(D+y.y*Na)*_-f.y*Na,m.push(new Bt(N,D))}}let q0,w1;function rm(d,i){return d.x*i.x+d.y*i.y}function eS(d,i){if(d.length===1){let u=0;const f=i[u++];let y;for(;!y||f.equals(y);)if(y=i[u++],!y)return 1/0;for(;u<i.length;u++){const m=i[u],_=d[0],b=y.sub(f),N=m.sub(f),D=_.sub(f),S=rm(b,b),V=rm(b,N),I=rm(N,N),O=rm(D,b),M=rm(D,N),B=S*I-V*V,Y=(I*O-V*M)/B,ee=(S*M-V*O)/B,ue=f.z*(1-Y-ee)+y.z*Y+m.z*ee;if(isFinite(ue))return ue}return 1/0}{let u=1/0;for(const f of i)u=Math.min(u,f.z);return u}}function tS(d,i,u,f,y,m,_,b){const N=_*y.getElevationAt(d,i,!0,!0),D=m[0]!==0,S=D?m[1]===0?_*(m[0]/7-450):_*function(V,I,O){const M=Math.floor(I[0]/8),B=Math.floor(I[1]/8),Y=10*(I[0]-8*M),ee=10*(I[1]-8*B),ue=V.getElevationAt(M,B,!0,!0),le=V.getMeterToDEM(O),re=Math.floor(.5*(Y*le-1)),pe=Math.floor(.5*(ee*le-1)),Se=V.tileCoordToPixel(M,B),xe=2*re+1,Ke=2*pe+1,Ze=function(Rt,Vt,Et,Ut,Dt){return[Rt.getElevationAtPixel(Vt,Et,!0),Rt.getElevationAtPixel(Vt+Dt,Et,!0),Rt.getElevationAtPixel(Vt,Et+Dt,!0),Rt.getElevationAtPixel(Vt+Ut,Et+Dt,!0)]}(V,Se.x-re,Se.y-pe,xe,Ke),He=Math.abs(Ze[0]-Ze[1]),ft=Math.abs(Ze[2]-Ze[3]),Ye=Math.abs(Ze[0]-Ze[2])+Math.abs(Ze[1]-Ze[3]),gt=Math.min(.25,.5*le*(He+ft)/xe),bt=Math.min(.25,.5*le*Ye/Ke);return ue+Math.max(gt*Y,bt*ee)}(y,m,b):N;return{base:N+(u===0?-1:u),top:D?Math.max(S+f,N+u+2):N+f}}xt(G0,"FillExtrusionBucket",{omit:["layers","features"]}),xt(m1,"PartData"),xt(p1,"FootprintSegment"),xt(YT,"BorderCentroidData"),xt(XT,"GroundEffect");const R1=xn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),T1=xn([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:H0}=R1,S1=xn([{name:"a_packed",components:3,type:"Float32"}]),{members:aS}=S1,C1=xn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:nm}=C1;class cp{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.image=new Yp({width:i,height:u}),this.positions={},this.uploaded=!1}getDash(i,u){const f=this.getKey(i,u);return this.positions[f]}trim(){const i=this.width,u=this.height=ca(this.nextRow);this.image.resize({width:i,height:u})}getKey(i,u){return i.join(",")+u}getDashRanges(i,u,f){const y=[];let m=i.length%2==1?-i[i.length-1]*f:0,_=i[0]*f,b=!0;y.push({left:m,right:_,isDash:b,zeroLength:i[0]===0});let N=i[0];for(let D=1;D<i.length;D++){b=!b;const S=i[D];m=N*f,N+=S,_=N*f,y.push({left:m,right:_,isDash:b,zeroLength:S===0})}return y}addRoundDash(i,u,f){const y=u/2;for(let m=-f;m<=f;m++){const _=this.width*(this.nextRow+f+m);let b=0,N=i[b];for(let D=0;D<this.width;D++){D/N.right>1&&(N=i[++b]);const S=Math.abs(D-N.left),V=Math.abs(D-N.right),I=Math.min(S,V);let O;const M=m/f*(y+1);if(N.isDash){const B=y-Math.abs(M);O=Math.sqrt(I*I+B*B)}else O=y-Math.sqrt(I*I+M*M);this.image.data[_+D]=Math.max(0,Math.min(255,O+128))}}}addRegularDash(i,u){for(let N=i.length-1;N>=0;--N){const D=i[N],S=i[N+1];D.zeroLength?i.splice(N,1):S&&S.isDash===D.isDash&&(S.left=D.left,i.splice(N,1))}const f=i[0],y=i[i.length-1];f.isDash===y.isDash&&(f.left=y.left-this.width,y.right=f.right+this.width);const m=this.width*this.nextRow;let _=0,b=i[_];for(let N=0;N<this.width;N++){N/b.right>1&&(b=i[++_]);const D=Math.abs(N-b.left),S=Math.abs(N-b.right),V=Math.min(D,S);this.image.data[m+N]=Math.max(0,Math.min(255,(b.isDash?V:-V)+u+128))}}addDash(i,u){const f=this.getKey(i,u);if(this.positions[f])return this.positions[f];const y=u==="round",m=y?7:0,_=2*m+1;if(this.nextRow+_>this.height)return en("LineAtlas out of space"),null;i.length===0&&i.push(1);let b=0;for(let S=0;S<i.length;S++)i[S]<0&&(en("Negative value is found in line dasharray, replacing values with 0"),i[S]=0),b+=i[S];if(b!==0){const S=this.width/b,V=this.getDashRanges(i,this.width,S);y?this.addRoundDash(V,S,m):this.addRegularDash(V,u==="square"?.5*S:0)}const N=this.nextRow+m;this.nextRow+=_;const D={tl:[N,m],br:[b,0]};return this.positions[f]=D,D}}xt(cp,"LineAtlas");const im=vh.VectorTileFeature.types,fA=Math.cos(Math.PI/180*37.5),pA=Math.cos(Math.PI/180*5);class Vf{constructor(i){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=i.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=i.overscaling,this.pixelRatio=i.pixelRatio,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new vf,this.layoutVertexArray2=new So,this.patternVertexArray=new So,this.indexArray=new Ps,this.programConfigurations=new yh(i.layers,{zoom:i.zoom,lut:i.lut}),this.segments=new Oi,this.maxLineLength=0,this.zOffsetVertexArray=new So,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=i.tessellationStep?i.tessellationStep:Na/64}updateFootprints(i,u){}populate(i,u,f,y){this.hasPattern=sA("line",this.layers,this.pixelRatio,u);const m=this.layers[0].layout.get("line-sort-key");this.tileToMeter=g(f);const _=this.layers[0].layout.get("line-z-offset"),b=_.isConstant()&&!_.constantOr(0),N=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset=N==="sea"||N==="ground"||!b&&N==="none",this.hasZOffset&&N==="none"&&en(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const D=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&D!==void 0;const S=[];for(const{feature:M,id:B,index:Y,sourceLayerIndex:ee}of i){const ue=this.layers[0]._featureFilter.needGeometry,le=K(M,ue);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),le,f))continue;const re=m?m.evaluate(le,{},f):void 0,pe={id:B,properties:M.properties,type:M.type,sourceLayerIndex:ee,index:Y,geometry:ue?le.geometry:Z(M,f,y),patterns:{},sortKey:re};S.push(pe)}m&&S.sort((M,B)=>M.sortKey-B.sortKey);const{lineAtlas:V,featureIndex:I}=u,O=this.addConstantDashes(V);for(const M of S){const{geometry:B,index:Y,sourceLayerIndex:ee}=M;if(O&&this.addFeatureDashes(M,V),this.hasPattern){const ue=oA("line",this.layers,M,this.zoom,this.pixelRatio,u);this.patternFeatures.push(ue)}else this.addFeature(M,B,Y,f,V.positions,u.availableImages,u.brightness);I.insert(i[Y].feature,B,Y,ee,this.index)}}addConstantDashes(i){let u=!1;for(const f of this.layers){const y=f.paint.get("line-dasharray").value,m=f.layout.get("line-cap").value;if(y.kind!=="constant"||m.kind!=="constant")u=!0;else{const _=m.value,b=y.value;if(!b)continue;i.addDash(b,_)}}return u}addFeatureDashes(i,u){const f=this.zoom;for(const y of this.layers){const m=y.paint.get("line-dasharray").value,_=y.layout.get("line-cap").value;if(m.kind==="constant"&&_.kind==="constant")continue;let b,N;if(m.kind==="constant"){if(b=m.value,!b)continue}else b=m.evaluate({zoom:f},i);N=_.kind==="constant"?_.value:_.evaluate({zoom:f},i),u.addDash(b,N),i.patterns[y.id]=u.getKey(b,N)}}update(i,u,f,y,m,_,b){this.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}addFeatures(i,u,f,y,m,_){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,u,f,y,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,aS)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=i.createVertexBuffer(this.patternVertexArray,nm)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,T1.members,!0)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,H0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,f,y,m,_,b){const N=this.layers[0].layout,D=N.get("line-join").evaluate(i,{}),S=N.get("line-cap").evaluate(i,{}),V=N.get("line-miter-limit"),I=N.get("line-round-limit");this.lineClips=this.lineFeatureClips(i),this.lineFeature=i,this.zOffsetValue=N.get("line-z-offset").value;const O=this.layers[0].paint.get("line-width").value;O.kind!=="constant"&&O.isLineProgressConstant===!1&&(this.variableWidthValue=O);for(const M of u)this.addLine(M,i,y,D,S,V,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,f,m,_,y,b)}addLine(i,u,f,y,m,_,b){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const N=y==="none";if(this.patternJoinNone=this.hasPattern&&N,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<i.length-1;le++)this.totalDistance+=i[le].dist(i[le+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=im[u.type]==="Polygon";let S=i.length;for(;S>=2&&i[S-1].equals(i[S-2]);)S--;let V=0;for(;V<S-1&&i[V].equals(i[V+1]);)V++;if(S<(D?3:2))return;y==="bevel"&&(_=1.05);const I=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let O,M,B,Y,ee,ue;this.e1=this.e2=-1,D&&(O=i[S-2],ee=i[V].sub(O)._unit()._perp());for(let le=V;le<S;le++){if(B=le===S-1?D?i[V+1]:void 0:i[le+1],B&&i[le].equals(B))continue;ee&&(Y=ee),O&&(M=O),O=i[le],ue=this.evaluateLineProgressFeatures(M?M.dist(O):0),ee=B?B.sub(O)._unit()._perp():Y,Y=Y||ee;const re=M&&B;let pe=re?y:D||N?"butt":m;const Se=Y.x*ee.x+Y.y*ee.y;if(N){const bt=function(Rt){if(Rt.patternJoinNone){const Vt=Rt.segmentPoints.length/2,Et=Rt.lineSoFar-Rt.segmentStart;for(let Ut=0;Ut<Vt;++Ut){const Dt=Rt.segmentPoints[2*Ut+1],jt=Math.round(Rt.segmentPoints[2*Ut])+.5+.25*Dt;Rt.patternVertexArray.emplaceBack(jt,Et,Rt.segmentStart),Rt.patternVertexArray.emplaceBack(jt,Et,Rt.segmentStart)}Rt.segmentPoints.length=0}Rt.e1=Rt.e2=-1};if(re&&Se<pA){this.updateDistance(M,O),this.addCurrentVertex(O,Y,1,1,I,ue),bt(this),this.addCurrentVertex(O,ee,-1,-1,I,ue);continue}if(M){if(!B){this.updateDistance(M,O),this.addCurrentVertex(O,Y,1,1,I,ue),bt(this);continue}pe="miter"}}let xe=Y.add(ee);xe.x===0&&xe.y===0||xe._unit();const Ke=xe.x*ee.x+xe.y*ee.y,Ze=Ke!==0?1/Ke:1/0,He=2*Math.sqrt(2-2*Ke),ft=Ke<fA&&M&&B,Ye=Y.x*ee.y-Y.y*ee.x>0,gt=this.overscaling<=16?15*Na/(512*this.overscaling):0;if(re&&pe==="round"){if(Ze<b)pe="miter";else if(Ze<=2){const bt=b1(O,-10,Na+10);pe=this.hasZOffset&&(bt||this.hasCrossSlope)?"miter":"fakeround"}}if(pe==="miter"&&Ze>_&&(pe="bevel"),pe==="bevel"&&(Ze>2&&(pe="flipbevel"),Ze<_&&(pe="miter")),M&&!(pe==="miter"&&ft)&&this.updateDistance(M,O),pe==="miter")if(ft){const bt=O.dist(M);if(bt>2*gt){const Vt=O.sub(O.sub(M)._mult(gt/bt)._round());this.updateDistance(M,Vt),this.addCurrentVertex(Vt,Y,0,0,I,ue),M=Vt}this.updateDistance(M,O),xe._mult(Ze),this.addCurrentVertex(O,xe,0,0,I,ue);const Rt=O.dist(B);if(Rt>2*gt){const Vt=O.add(B.sub(O)._mult(gt/Rt)._round());this.updateDistance(O,Vt),this.addCurrentVertex(Vt,ee,0,0,I,ue),O=Vt}}else xe._mult(Ze),this.addCurrentVertex(O,xe,0,0,I,ue);else if(pe==="flipbevel"){if(Ze>100)xe=ee.mult(-1);else{const bt=Ze*Y.add(ee).mag()/Y.sub(ee).mag();xe._perp()._mult(bt*(Ye?-1:1))}this.addCurrentVertex(O,xe,0,0,I,ue),this.addCurrentVertex(O,xe.mult(-1),0,0,I,ue)}else if(pe==="bevel"||pe==="fakeround"){ue!=null&&M&&this.addCurrentVertex(O,Y,-1,-1,I,ue);const bt=O.dist(M)<=2*gt&&pe!=="bevel",Rt=xe.mult(Ye?1:-1);Rt._mult(Ze);const Vt=ee.mult(Ye?-1:1),Et=Y.mult(Ye?-1:1),Ut=this.evaluateLineProgressFeatures(this.distance);if(ue==null&&(this.addHalfVertex(O,Rt.x,Rt.y,!1,!Ye,0,I,Ut),bt||this.addHalfVertex(O,Rt.x+2*Et.x,Rt.y+2*Et.y,!1,Ye,0,I,Ut)),pe==="fakeround"){const Dt=Math.round(180*He/Math.PI/20);this.addHalfVertex(O,Et.x,Et.y,!1,Ye,0,I,Ut);for(let jt=0;jt<Dt;jt++){let ga=jt/Dt;if(ga!==.5){const Ya=ga-.5;ga+=ga*Ya*(ga-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*Ya*Ya+(.848013+Se*(.215638*Se-1.06021)))}const ma=Vt.sub(Et)._mult(ga)._add(Et)._unit();this.addHalfVertex(O,ma.x,ma.y,!1,Ye,0,I,Ut)}this.addHalfVertex(O,Vt.x,Vt.y,!1,Ye,0,I,Ut)}bt||ue!=null||this.addHalfVertex(O,Rt.x+2*Vt.x,Rt.y+2*Vt.y,!1,Ye,0,I,Ut),ue!=null&&B&&this.addCurrentVertex(O,ee,1,1,I,ue)}else pe==="butt"?this.addCurrentVertex(O,xe,0,0,I,ue):pe==="square"?(M||this.addCurrentVertex(O,xe,-1,-1,I,ue),this.addCurrentVertex(O,xe,0,0,I,ue),M&&this.addCurrentVertex(O,xe,1,1,I,ue)):pe==="round"&&(M&&(this.addCurrentVertex(O,Y,0,0,I,ue),this.addCurrentVertex(O,Y,1,1,I,ue,!0)),B&&(this.addCurrentVertex(O,ee,-1,-1,I,ue,!0),this.addCurrentVertex(O,ee,0,0,I,ue)))}}addVerticesTo(i,u,f,y,m,_,b,N,D,S){const V=(u.w-i.w)/this.tessellationStep|0;let I=0;const O=this.scaledDistance;if(V>1){this.lineSoFar=i.w;const B=(u.x-i.x)/V,Y=(u.y-i.y)/V,ee=(u.z-i.z)/V,ue=(u.w-i.w)/V;for(let le=1;le<V;++le){i.x+=B,i.y+=Y,i.z+=ee,this.lineSoFar+=ue,I+=ue;const re=this.evaluateLineProgressFeatures(this.prevDistance+I);this.scaledDistance=(this.prevDistance+I)/this.totalDistance,this.addHalfVertex(i,f,y,S,!1,b,D,re),this.addHalfVertex(i,m,_,S,!0,-N,D,re)}}this.lineSoFar=u.w,this.scaledDistance=O;const M=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,f,y,S,!1,b,D,M),this.addHalfVertex(u,m,_,S,!0,-N,D,M)}evaluateLineProgressFeatures(i){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+i)/this.totalFeatureLength):en(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}:{zOffset:0,variableWidth:u}}addCurrentVertex(i,u,f,y,m,_,b=!1){const N=u.x+u.y*f,D=u.y-u.x*f,S=u.y*y-u.x,V=-u.y-u.x*y;if(_!=null){const I=this.hasZOffset,O=-10,M=Na+10,B=_.zOffset,Y=new c1(i.x,i.y,B,this.lineSoFar),ee=!!I&&b1(i,O,M),ue=this.lineSoFar,le=this.distance;if(this.currentVertex)if(ee){const re=this.currentVertexIsOutside,pe=this.currentVertex,Se=new c1(i.x,i.y,B,this.lineSoFar);if(d1(pe,Se,O,M),!b1(Se,O,M)){if(re){this.e1=this.e2=-1,this.distance-=pe.dist(Y),this.lineSoFar=pe.w;const xe=this.evaluateLineProgressFeatures(pe.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(pe,N,D,b,!1,f,m,xe),this.addHalfVertex(pe,S,V,b,!0,-y,m,xe),this.prevDistance=this.distance}this.distance=this.prevDistance+pe.dist(Se),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(pe,Se,N,D,S,V,f,y,m,b),this.distance=le,this.scaledDistance=this.distance/this.totalDistance}}else{const re=this.currentVertex;if(this.currentVertexIsOutside){d1(re,Y,O,M),this.e1=this.e2=-1,this.distance-=re.dist(Y),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=re.w;const pe=this.evaluateLineProgressFeatures(re.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(re,N,D,b,!1,f,m,pe),this.addHalfVertex(re,S,V,b,!0,-y,m,pe),this.prevDistance=this.distance,this.distance=le,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(re,Y,N,D,S,V,f,y,m,b)}else ee||(this.addHalfVertex(i,N,D,b,!1,f,m,_),this.addHalfVertex(i,S,V,b,!0,-y,m,_));this.currentVertex=Y,this.currentVertexIsOutside=ee,this.lineSoFar=ue}else this.addHalfVertex(i,N,D,b,!1,f,m,_),this.addHalfVertex(i,S,V,b,!0,-y,m,_)}addHalfVertex({x:i,y:u},f,y,m,_,b,N,D){if(this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),_||this.segmentPoints.push(this.lineSoFar-this.segmentStart,b)),this.layoutVertexArray.emplaceBack((i<<1)+(m?1:0),(u<<1)+(_?1:0),Math.round(63*f)+128,Math.round(63*y)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const V=hr(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,V)}const S=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,S),N.primitiveLength++),_?this.e2=S:this.e1=S,D!=null&&this.zOffsetVertexArray.emplaceBack(D.zOffset,D.variableWidth,D.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(i,u){this.prevDistance=this.distance,this.distance+=i.dist(u),this.updateScaledDistance()}}function b1(d,i,u){return d.x<i||d.x>u||d.y<i||d.y>u}let x1,Xy;function rS(d,i,u){return i*(Na/(d.tileSize*Math.pow(2,u-d.tileID.overscaledZ)))}xt(Vf,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const P1=(d,i,u)=>(1-u)*d+u*i;function mA(d,i){return 1/rS(d,1,i.tileZoom)}function E1(d,i,u,f){return d.translatePosMatrix(f||i.tileID.projMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const nS=d=>{const i=[];yA(d)&&i.push("RENDER_LINE_DASH"),d.paint.get("line-gradient")&&i.push("RENDER_LINE_GRADIENT");const u=d.paint.get("line-trim-offset");u[0]===0&&u[1]===0||i.push("RENDER_LINE_TRIM_OFFSET"),d.paint.get("line-border-width").constantOr(1)!==0&&i.push("RENDER_LINE_BORDER");const f=d.layout.get("line-join").constantOr("miter")==="none",y=!!d.paint.get("line-pattern").constantOr(1);return f&&y&&i.push("LINE_JOIN_NONE"),i};function yA(d){const i=d.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}let Jy;const N1=()=>Jy||(Jy={layout:x1||(x1=new zi({"line-cap":new Ua(Gt.layout_line["line-cap"]),"line-join":new Ua(Gt.layout_line["line-join"]),"line-miter-limit":new Ca(Gt.layout_line["line-miter-limit"]),"line-round-limit":new Ca(Gt.layout_line["line-round-limit"]),"line-sort-key":new Ua(Gt.layout_line["line-sort-key"]),"line-z-offset":new Ua(Gt.layout_line["line-z-offset"]),"line-elevation-reference":new Ca(Gt.layout_line["line-elevation-reference"]),"line-cross-slope":new Ca(Gt.layout_line["line-cross-slope"]),visibility:new Ca(Gt.layout_line.visibility),"line-width-unit":new Ca(Gt.layout_line["line-width-unit"])})),paint:Xy||(Xy=new zi({"line-opacity":new Ua(Gt.paint_line["line-opacity"]),"line-color":new Ua(Gt.paint_line["line-color"]),"line-translate":new Ca(Gt.paint_line["line-translate"]),"line-translate-anchor":new Ca(Gt.paint_line["line-translate-anchor"]),"line-width":new Ua(Gt.paint_line["line-width"]),"line-gap-width":new Ua(Gt.paint_line["line-gap-width"]),"line-offset":new Ua(Gt.paint_line["line-offset"]),"line-blur":new Ua(Gt.paint_line["line-blur"]),"line-dasharray":new Ua(Gt.paint_line["line-dasharray"]),"line-pattern":new Ua(Gt.paint_line["line-pattern"]),"line-gradient":new $i(Gt.paint_line["line-gradient"]),"line-trim-offset":new Ca(Gt.paint_line["line-trim-offset"]),"line-trim-fade-range":new Ca(Gt.paint_line["line-trim-fade-range"]),"line-trim-color":new Ca(Gt.paint_line["line-trim-color"]),"line-emissive-strength":new Ca(Gt.paint_line["line-emissive-strength"]),"line-border-width":new Ua(Gt.paint_line["line-border-width"]),"line-border-color":new Ua(Gt.paint_line["line-border-color"]),"line-occlusion-opacity":new Ca(Gt.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},Jy);class gA extends Ua{possiblyEvaluate(i,u){return u=new vn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition}),super.possiblyEvaluate(i,u)}evaluate(i,u,f,y){return u=Rn({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(i,u,f,y)}}let Wm;function AA(d,i){return i>0?i+2*d:d}const iS=xn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),lP=xn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),$0=xn([{name:"a_projected_pos",components:4,type:"Float32"}],4);xn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const p=xn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),v=xn([{name:"a_texb",components:2,type:"Uint16"}]),x=xn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),F=xn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const W=xn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),se=xn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);xn([{name:"triangle",components:3,type:"Uint16"}]),xn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),xn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),xn([{type:"Float32",name:"offsetX"}]),xn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Fe=24;const ut=128;function Ft(d,i,u,f,y){if(d.kind==="camera")return d.maxSize;if(d.kind==="composite"){const m=i.possiblyEvaluate(new vn(d.maxZoom),u).evaluate(y,{},u),_=i.possiblyEvaluate(new vn(d.minZoom),u).evaluate(y,{},u);return Math.max(m,_)}return i.possiblyEvaluate(new vn(f)).evaluate(y,{},u)}function oa(d,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new vn(d+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:y}=u;let m=0;for(;m<f.length&&f[m]<=d;)m++;m=Math.max(0,m-1);let _=m;for(;_<f.length&&f[_]<d+1;)_++;_=Math.min(f.length-1,_);const b=f[m],N=f[_];return u.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:N,interpolationType:y}:{kind:"camera",minZoom:b,maxZoom:N,minSize:u.evaluate(new vn(b)),maxSize:u.evaluate(new vn(N)),interpolationType:y}}}function ja(d,{uSize:i,uSizeT:u},{lowerSize:f,upperSize:y}){return d.kind==="source"?f/ut:d.kind==="composite"?hr(f/ut,y/ut,u):i}function rr(d,i,u=1){let f=0,y=0;if(d.kind==="constant")y=d.layoutSize*u;else if(d.kind!=="source"){const{interpolationType:m,minZoom:_,maxZoom:b}=d,N=m?ka(qi.interpolationFactor(m,i,_,b),0,1):0;d.kind==="camera"?y=hr(d.minSize,d.maxSize,N)*u:f=N*u}return{uSizeT:f,uSize:y}}var ba=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ut,evaluateSizeForFeature:ja,evaluateSizeForZoom:rr,getRasterizedIconSize:Ft,getSizeData:oa});function Za(d,i,u){return d.sections.forEach(f=>{f.text=function(y,m,_){const b=m.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?y=y.toLocaleUpperCase():b==="lowercase"&&(y=y.toLocaleLowerCase()),is.applyArabicShaping&&(y=is.applyArabicShaping(y)),y}(f.text,i,u)}),d}const Yr={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function Jn(d){return d==="︶"||d==="﹈"||d==="︸"||d==="﹄"||d==="﹂"||d==="︾"||d==="︼"||d==="︺"||d==="︘"||d==="﹀"||d==="︐"||d==="︓"||d==="︔"||d==="｀"||d==="￣"||d==="︑"||d==="︒"}function qo(d){return d==="︵"||d==="﹇"||d==="︷"||d==="﹃"||d==="﹁"||d==="︽"||d==="︻"||d==="︹"||d==="︗"||d==="︿"}var ya,na,Ta,Ja={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Kr(){return ya||(ya=1,Ja.read=function(d,i,u,f,y){var m,_,b=8*y-f-1,N=(1<<b)-1,D=N>>1,S=-7,V=u?y-1:0,I=u?-1:1,O=d[i+V];for(V+=I,m=O&(1<<-S)-1,O>>=-S,S+=b;S>0;m=256*m+d[i+V],V+=I,S-=8);for(_=m&(1<<-S)-1,m>>=-S,S+=f;S>0;_=256*_+d[i+V],V+=I,S-=8);if(m===0)m=1-D;else{if(m===N)return _?NaN:1/0*(O?-1:1);_+=Math.pow(2,f),m-=D}return(O?-1:1)*_*Math.pow(2,m-f)},Ja.write=function(d,i,u,f,y,m){var _,b,N,D=8*m-y-1,S=(1<<D)-1,V=S>>1,I=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=f?0:m-1,M=f?1:-1,B=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(b=isNaN(i)?1:0,_=S):(_=Math.floor(Math.log(i)/Math.LN2),i*(N=Math.pow(2,-_))<1&&(_--,N*=2),(i+=_+V>=1?I/N:I*Math.pow(2,1-V))*N>=2&&(_++,N/=2),_+V>=S?(b=0,_=S):_+V>=1?(b=(i*N-1)*Math.pow(2,y),_+=V):(b=i*Math.pow(2,V-1)*Math.pow(2,y),_=0));y>=8;d[u+O]=255&b,O+=M,b/=256,y-=8);for(_=_<<y|b,D+=y;D>0;d[u+O]=255&_,O+=M,_/=256,D-=8);d[u+O-M]|=128*B}),Ja}function mi(){if(Ta)return na;Ta=1,na=i;var d=Kr();function i(re){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(re)?re:new Uint8Array(re||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var u=4294967296,f=1/u,y=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function m(re){return re.type===i.Bytes?re.readVarint()+re.pos:re.pos+1}function _(re,pe,Se){return Se?4294967296*pe+(re>>>0):4294967296*(pe>>>0)+(re>>>0)}function b(re,pe,Se){var xe=pe<=16383?1:pe<=2097151?2:pe<=268435455?3:Math.floor(Math.log(pe)/(7*Math.LN2));Se.realloc(xe);for(var Ke=Se.pos-1;Ke>=re;Ke--)Se.buf[Ke+xe]=Se.buf[Ke]}function N(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeVarint(re[Se])}function D(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeSVarint(re[Se])}function S(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeFloat(re[Se])}function V(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeDouble(re[Se])}function I(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeBoolean(re[Se])}function O(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeFixed32(re[Se])}function M(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeSFixed32(re[Se])}function B(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeFixed64(re[Se])}function Y(re,pe){for(var Se=0;Se<re.length;Se++)pe.writeSFixed64(re[Se])}function ee(re,pe){return(re[pe]|re[pe+1]<<8|re[pe+2]<<16)+16777216*re[pe+3]}function ue(re,pe,Se){re[Se]=pe,re[Se+1]=pe>>>8,re[Se+2]=pe>>>16,re[Se+3]=pe>>>24}function le(re,pe){return(re[pe]|re[pe+1]<<8|re[pe+2]<<16)+(re[pe+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(re,pe,Se){for(Se=Se||this.length;this.pos<Se;){var xe=this.readVarint(),Ke=xe>>3,Ze=this.pos;this.type=7&xe,re(Ke,pe,this),this.pos===Ze&&this.skip(xe)}return pe},readMessage:function(re,pe){return this.readFields(re,pe,this.readVarint()+this.pos)},readFixed32:function(){var re=ee(this.buf,this.pos);return this.pos+=4,re},readSFixed32:function(){var re=le(this.buf,this.pos);return this.pos+=4,re},readFixed64:function(){var re=ee(this.buf,this.pos)+ee(this.buf,this.pos+4)*u;return this.pos+=8,re},readSFixed64:function(){var re=ee(this.buf,this.pos)+le(this.buf,this.pos+4)*u;return this.pos+=8,re},readFloat:function(){var re=d.read(this.buf,this.pos,!0,23,4);return this.pos+=4,re},readDouble:function(){var re=d.read(this.buf,this.pos,!0,52,8);return this.pos+=8,re},readVarint:function(re){var pe,Se,xe=this.buf;return pe=127&(Se=xe[this.pos++]),Se<128?pe:(pe|=(127&(Se=xe[this.pos++]))<<7,Se<128?pe:(pe|=(127&(Se=xe[this.pos++]))<<14,Se<128?pe:(pe|=(127&(Se=xe[this.pos++]))<<21,Se<128?pe:function(Ke,Ze,He){var ft,Ye,gt=He.buf;if(ft=(112&(Ye=gt[He.pos++]))>>4,Ye<128||(ft|=(127&(Ye=gt[He.pos++]))<<3,Ye<128)||(ft|=(127&(Ye=gt[He.pos++]))<<10,Ye<128)||(ft|=(127&(Ye=gt[He.pos++]))<<17,Ye<128)||(ft|=(127&(Ye=gt[He.pos++]))<<24,Ye<128)||(ft|=(1&(Ye=gt[He.pos++]))<<31,Ye<128))return _(Ke,ft,Ze);throw new Error("Expected varint not more than 10 bytes")}(pe|=(15&(Se=xe[this.pos]))<<28,re,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var re=this.readVarint();return re%2==1?(re+1)/-2:re/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var re=this.readVarint()+this.pos,pe=this.pos;return this.pos=re,re-pe>=12&&y?function(Se,xe,Ke){return y.decode(Se.subarray(xe,Ke))}(this.buf,pe,re):function(Se,xe,Ke){for(var Ze="",He=xe;He<Ke;){var ft,Ye,gt,bt=Se[He],Rt=null,Vt=bt>239?4:bt>223?3:bt>191?2:1;if(He+Vt>Ke)break;Vt===1?bt<128&&(Rt=bt):Vt===2?(192&(ft=Se[He+1]))==128&&(Rt=(31&bt)<<6|63&ft)<=127&&(Rt=null):Vt===3?(Ye=Se[He+2],(192&(ft=Se[He+1]))==128&&(192&Ye)==128&&((Rt=(15&bt)<<12|(63&ft)<<6|63&Ye)<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null)):Vt===4&&(Ye=Se[He+2],gt=Se[He+3],(192&(ft=Se[He+1]))==128&&(192&Ye)==128&&(192&gt)==128&&((Rt=(15&bt)<<18|(63&ft)<<12|(63&Ye)<<6|63&gt)<=65535||Rt>=1114112)&&(Rt=null)),Rt===null?(Rt=65533,Vt=1):Rt>65535&&(Rt-=65536,Ze+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|1023&Rt),Ze+=String.fromCharCode(Rt),He+=Vt}return Ze}(this.buf,pe,re)},readBytes:function(){var re=this.readVarint()+this.pos,pe=this.buf.subarray(this.pos,re);return this.pos=re,pe},readPackedVarint:function(re,pe){if(this.type!==i.Bytes)return re.push(this.readVarint(pe));var Se=m(this);for(re=re||[];this.pos<Se;)re.push(this.readVarint(pe));return re},readPackedSVarint:function(re){if(this.type!==i.Bytes)return re.push(this.readSVarint());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readSVarint());return re},readPackedBoolean:function(re){if(this.type!==i.Bytes)return re.push(this.readBoolean());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readBoolean());return re},readPackedFloat:function(re){if(this.type!==i.Bytes)return re.push(this.readFloat());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readFloat());return re},readPackedDouble:function(re){if(this.type!==i.Bytes)return re.push(this.readDouble());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readDouble());return re},readPackedFixed32:function(re){if(this.type!==i.Bytes)return re.push(this.readFixed32());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readFixed32());return re},readPackedSFixed32:function(re){if(this.type!==i.Bytes)return re.push(this.readSFixed32());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readSFixed32());return re},readPackedFixed64:function(re){if(this.type!==i.Bytes)return re.push(this.readFixed64());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readFixed64());return re},readPackedSFixed64:function(re){if(this.type!==i.Bytes)return re.push(this.readSFixed64());var pe=m(this);for(re=re||[];this.pos<pe;)re.push(this.readSFixed64());return re},skip:function(re){var pe=7&re;if(pe===i.Varint)for(;this.buf[this.pos++]>127;);else if(pe===i.Bytes)this.pos=this.readVarint()+this.pos;else if(pe===i.Fixed32)this.pos+=4;else{if(pe!==i.Fixed64)throw new Error("Unimplemented type: "+pe);this.pos+=8}},writeTag:function(re,pe){this.writeVarint(re<<3|pe)},realloc:function(re){for(var pe=this.length||16;pe<this.pos+re;)pe*=2;if(pe!==this.length){var Se=new Uint8Array(pe);Se.set(this.buf),this.buf=Se,this.length=pe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(re){this.realloc(4),ue(this.buf,re,this.pos),this.pos+=4},writeSFixed32:function(re){this.realloc(4),ue(this.buf,re,this.pos),this.pos+=4},writeFixed64:function(re){this.realloc(8),ue(this.buf,-1&re,this.pos),ue(this.buf,Math.floor(re*f),this.pos+4),this.pos+=8},writeSFixed64:function(re){this.realloc(8),ue(this.buf,-1&re,this.pos),ue(this.buf,Math.floor(re*f),this.pos+4),this.pos+=8},writeVarint:function(re){(re=+re||0)>268435455||re<0?function(pe,Se){var xe,Ke;if(pe>=0?(xe=pe%4294967296|0,Ke=pe/4294967296|0):(Ke=~(-pe/4294967296),4294967295^(xe=~(-pe%4294967296))?xe=xe+1|0:(xe=0,Ke=Ke+1|0)),pe>=18446744073709552e3||pe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Se.realloc(10),function(Ze,He,ft){ft.buf[ft.pos++]=127&Ze|128,Ze>>>=7,ft.buf[ft.pos++]=127&Ze|128,Ze>>>=7,ft.buf[ft.pos++]=127&Ze|128,Ze>>>=7,ft.buf[ft.pos++]=127&Ze|128,ft.buf[ft.pos]=127&(Ze>>>=7)}(xe,0,Se),function(Ze,He){var ft=(7&Ze)<<4;He.buf[He.pos++]|=ft|((Ze>>>=3)?128:0),Ze&&(He.buf[He.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(He.buf[He.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(He.buf[He.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(He.buf[He.pos++]=127&Ze|((Ze>>>=7)?128:0),Ze&&(He.buf[He.pos++]=127&Ze)))))}(Ke,Se)}(re,this):(this.realloc(4),this.buf[this.pos++]=127&re|(re>127?128:0),re<=127||(this.buf[this.pos++]=127&(re>>>=7)|(re>127?128:0),re<=127||(this.buf[this.pos++]=127&(re>>>=7)|(re>127?128:0),re<=127||(this.buf[this.pos++]=re>>>7&127))))},writeSVarint:function(re){this.writeVarint(re<0?2*-re-1:2*re)},writeBoolean:function(re){this.writeVarint(!!re)},writeString:function(re){re=String(re),this.realloc(4*re.length),this.pos++;var pe=this.pos;this.pos=function(xe,Ke,Ze){for(var He,ft,Ye=0;Ye<Ke.length;Ye++){if((He=Ke.charCodeAt(Ye))>55295&&He<57344){if(!ft){He>56319||Ye+1===Ke.length?(xe[Ze++]=239,xe[Ze++]=191,xe[Ze++]=189):ft=He;continue}if(He<56320){xe[Ze++]=239,xe[Ze++]=191,xe[Ze++]=189,ft=He;continue}He=ft-55296<<10|He-56320|65536,ft=null}else ft&&(xe[Ze++]=239,xe[Ze++]=191,xe[Ze++]=189,ft=null);He<128?xe[Ze++]=He:(He<2048?xe[Ze++]=He>>6|192:(He<65536?xe[Ze++]=He>>12|224:(xe[Ze++]=He>>18|240,xe[Ze++]=He>>12&63|128),xe[Ze++]=He>>6&63|128),xe[Ze++]=63&He|128)}return Ze}(this.buf,re,this.pos);var Se=this.pos-pe;Se>=128&&b(pe,Se,this),this.pos=pe-1,this.writeVarint(Se),this.pos+=Se},writeFloat:function(re){this.realloc(4),d.write(this.buf,re,this.pos,!0,23,4),this.pos+=4},writeDouble:function(re){this.realloc(8),d.write(this.buf,re,this.pos,!0,52,8),this.pos+=8},writeBytes:function(re){var pe=re.length;this.writeVarint(pe),this.realloc(pe);for(var Se=0;Se<pe;Se++)this.buf[this.pos++]=re[Se]},writeRawMessage:function(re,pe){this.pos++;var Se=this.pos;re(pe,this);var xe=this.pos-Se;xe>=128&&b(Se,xe,this),this.pos=Se-1,this.writeVarint(xe),this.pos+=xe},writeMessage:function(re,pe,Se){this.writeTag(re,i.Bytes),this.writeRawMessage(pe,Se)},writePackedVarint:function(re,pe){pe.length&&this.writeMessage(re,N,pe)},writePackedSVarint:function(re,pe){pe.length&&this.writeMessage(re,D,pe)},writePackedBoolean:function(re,pe){pe.length&&this.writeMessage(re,I,pe)},writePackedFloat:function(re,pe){pe.length&&this.writeMessage(re,S,pe)},writePackedDouble:function(re,pe){pe.length&&this.writeMessage(re,V,pe)},writePackedFixed32:function(re,pe){pe.length&&this.writeMessage(re,O,pe)},writePackedSFixed32:function(re,pe){pe.length&&this.writeMessage(re,M,pe)},writePackedFixed64:function(re,pe){pe.length&&this.writeMessage(re,B,pe)},writePackedSFixed64:function(re,pe){pe.length&&this.writeMessage(re,Y,pe)},writeBytesField:function(re,pe){this.writeTag(re,i.Bytes),this.writeBytes(pe)},writeFixed32Field:function(re,pe){this.writeTag(re,i.Fixed32),this.writeFixed32(pe)},writeSFixed32Field:function(re,pe){this.writeTag(re,i.Fixed32),this.writeSFixed32(pe)},writeFixed64Field:function(re,pe){this.writeTag(re,i.Fixed64),this.writeFixed64(pe)},writeSFixed64Field:function(re,pe){this.writeTag(re,i.Fixed64),this.writeSFixed64(pe)},writeVarintField:function(re,pe){this.writeTag(re,i.Varint),this.writeVarint(pe)},writeSVarintField:function(re,pe){this.writeTag(re,i.Varint),this.writeSVarint(pe)},writeStringField:function(re,pe){this.writeTag(re,i.Bytes),this.writeString(pe)},writeFloatField:function(re,pe){this.writeTag(re,i.Fixed32),this.writeFloat(pe)},writeDoubleField:function(re,pe){this.writeTag(re,i.Fixed64),this.writeDouble(pe)},writeBooleanField:function(re,pe){this.writeVarintField(re,!!pe)}},na}var on=w(mi());const Pn=3;function tu(d,i,u){i.glyphs=[],d===1&&u.readMessage(ts,i)}function ts(d,i,u){if(d===3){const{id:f,bitmap:y,width:m,height:_,left:b,top:N,advance:D}=u.readMessage(sm,{});i.glyphs.push({id:f,bitmap:new Yp({width:m+2*Pn,height:_+2*Pn},y),metrics:{width:m,height:_,left:b,top:N,advance:D}})}else d===4?i.ascender=u.readSVarint():d===5&&(i.descender=u.readSVarint())}function sm(d,i,u){d===1?i.id=u.readVarint():d===2?i.bitmap=u.readBytes():d===3?i.width=u.readVarint():d===4?i.height=u.readVarint():d===5?i.left=u.readSVarint():d===6?i.top=u.readSVarint():d===7&&(i.advance=u.readVarint())}const uP=Pn,jd={horizontal:1,vertical:2,horizontalOnly:3};class V1{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(i,u){const f=new V1;return f.scale=i||1,f.fontStack=u,f}static forImage(i){const u=new V1;return u.image=i,u}}class K0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u,f){const y=new K0;for(let m=0;m<i.sections.length;m++){const _=i.sections[m];_.image?y.addImageSection(_,f):y.addTextSection(_,u)}return y}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCodePoint(i){return this.text.codePointAt(i)}verticalizePunctuation(i){this.text=function(u,f){let y="";for(let m=0;m<u.length;m++){const _=u.charCodeAt(m+1)||null,b=u.charCodeAt(m-1)||null;y+=!f&&(_&&Sr(_)&&!Yr[u[m+1]]||b&&Sr(b)&&!Yr[u[m-1]])||!Yr[u[m]]?u[m]:Yr[u[m]]}return y}(this.text,i)}trim(){let i=0;for(let f=0;f<this.text.length&&sS[this.text.charCodeAt(f)];f++)i++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=i&&sS[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const f=new K0;return f.text=this.text.substring(i,u),f.sectionIndex=this.sectionIndex.slice(i,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(V1.forText(i.scale,i.fontStack||u));const f=this.sections.length-1;for(let y=0;y<i.text.length;++y)this.sectionIndex.push(f)}addImageSection(i,u){const f=i.image?i.image.getPrimary():null;if(!f)return void en("Can't add FormattedSection with an empty image.");f.scaleSelf(u);const y=this.getNextImageSectionCharCode();y?(this.text+=String.fromCodePoint(y),this.sections.push(V1.forImage(f)),this.sectionIndex.push(this.sections.length-1)):en("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function cP(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B=1){const Y=K0.fromFeature(d,y,B);V===jd.vertical&&Y.verticalizePunctuation(I);let ee=[];const ue=function(xe,Ke,Ze,He,ft,Ye){if(!xe)return[];const gt=[],bt=function(Ut,Dt,jt,ga,ma,Ya){let xa=0;for(let Oa=0;Oa<Ut.length();Oa++){const _a=Ut.getSection(Oa);xa+=_4(Ut.getCodePoint(Oa),_a,ga,ma,Dt,Ya)}return xa/Math.max(1,Math.ceil(xa/jt))}(xe,Ke,Ze,He,ft,Ye),Rt=xe.text.indexOf("​")>=0;let Vt=0;for(let Ut=0;Ut<xe.length();Ut++){const Dt=xe.getSection(Ut),jt=xe.getCodePoint(Ut);if(sS[jt]||(Vt+=_4(jt,Dt,He,ft,Ke,Ye)),Ut<xe.length()-1){const ga=!((Et=jt)<11904||!(_t["Bopomofo Extended"](Et)||_t.Bopomofo(Et)||_t["CJK Compatibility Forms"](Et)||_t["CJK Compatibility Ideographs"](Et)||_t["CJK Compatibility"](Et)||_t["CJK Radicals Supplement"](Et)||_t["CJK Strokes"](Et)||_t["CJK Symbols and Punctuation"](Et)||_t["CJK Unified Ideographs Extension A"](Et)||_t["CJK Unified Ideographs"](Et)||_t["Enclosed CJK Letters and Months"](Et)||_t["Halfwidth and Fullwidth Forms"](Et)||_t.Hiragana(Et)||_t["Ideographic Description Characters"](Et)||_t["Kangxi Radicals"](Et)||_t["Katakana Phonetic Extensions"](Et)||_t.Katakana(Et)||_t["Vertical Forms"](Et)||_t["Yi Radicals"](Et)||_t["Yi Syllables"](Et)));(LJ[jt]||ga||Dt.image)&&gt.push(w4(Ut+1,Vt,bt,gt,FJ(jt,xe.getCodePoint(Ut+1),ga&&Rt),!1))}}var Et;return R4(w4(xe.length(),Vt,bt,gt,0,!0))}(Y,D,m,i,f,O),{processBidirectionalText:le,processStyledBidirectionalText:re}=is;if(le&&Y.sections.length===1){const xe=le(Y.toString(),ue);for(const Ke of xe){const Ze=new K0;Ze.text=Ke,Ze.sections=Y.sections;for(let He=0;He<Ke.length;He++)Ze.sectionIndex.push(0);ee.push(Ze)}}else if(re){const xe=re(Y.text,Y.sectionIndex,ue);for(const Ke of xe){const Ze=new K0;Ze.text=Ke[0],Ze.sectionIndex=Ke[1],Ze.sections=Y.sections,ee.push(Ze)}}else ee=function(xe,Ke){const Ze=[],He=xe.text;let ft=0;for(const Ye of Ke)Ze.push(xe.substring(ft,Ye)),ft=Ye;return ft<He.length&&Ze.push(xe.substring(ft,He.length)),Ze}(Y,ue);const pe=[],Se={positionedLines:pe,text:Y.toString(),top:S[1],bottom:S[1],left:S[0],right:S[0],writingMode:V,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(xe,Ke,Ze,He,ft,Ye,gt,bt,Rt,Vt,Et,Ut){let Dt=0,jt=0,ga=0;const ma=bt==="right"?1:bt==="left"?0:.5;let Ya=!1;for(const or of ft){const Or=or.getSections();for(const Jr of Or){if(Jr.image)continue;const Ur=Ke[Jr.fontStack];if(Ur&&(Ya=Ur.ascender!==void 0&&Ur.descender!==void 0,!Ya))break}if(!Ya)break}let xa=0;for(const or of ft){or.trim();const Or=or.getMaxScale(),Jr=(Or-1)*Fe,Ur={positionedGlyphs:[],lineOffset:0};xe.positionedLines[xa]=Ur;const cn=Ur.positionedGlyphs;let Xr=0;if(!or.length()){jt+=Ye,++xa;continue}let wn=0,Hn=0;for(let Ir=0;Ir<or.length();Ir++){const En=or.getSection(Ir),Wi=or.getSectionIndex(Ir),os=or.getCodePoint(Ir);let ys=En.scale,Ns=null,Ti=null,ol=null,Sc=Fe,Ao=0;Rt===jd.vertical&&((Oa=os)===12312||Oa===12313||Oa===12316||Oa===12540||Oa===12448)&&(Rt=jd.horizontal);const xo=!(Rt===jd.horizontal||!Et&&!qa(os)||Et&&(sS[os]||fr(os)));if(En.image){const Vu=He.get(En.image.toString());if(!Vu)continue;ol=En.image,xe.iconsInText=xe.iconsInText||!0,Ti=Vu.paddedRect;const Dl=Vu.displaySize;ys=ys*Fe/Ut,Ns={width:Dl[0],height:Dl[1],left:0,top:-3,advance:xo?Dl[1]:Dl[0],localGlyph:!1},Ao=Ya?-Ns.height*ys:Or*Fe-17-Dl[1]*ys,Sc=Ns.advance;const Wh=(xo?Dl[0]:Dl[1])*ys-Fe*Or;Wh>0&&Wh>Xr&&(Xr=Wh)}else{const Vu=Ze[En.fontStack];if(!Vu)continue;Vu[os]&&(Ti=Vu[os]);const Dl=Ke[En.fontStack];if(!Dl)continue;const Wh=Dl.glyphs[os];if(!Wh)continue;if(Ns=Wh.metrics,Sc=os!==8203?Fe:0,Ya){const rg=Dl.ascender!==void 0?Math.abs(Dl.ascender):0,Of=Dl.descender!==void 0?Math.abs(Dl.descender):0,mp=(rg+Of)*ys;wn<mp&&(wn=mp,Hn=(rg-Of)/2*ys),Ao=-rg*ys}else Ao=(Or-ys)*Fe-17}xo?(xe.verticalizable=!0,cn.push({glyph:os,image:ol,x:Dt,y:jt+Ao,vertical:xo,scale:ys,localGlyph:Ns.localGlyph,fontStack:En.fontStack,sectionIndex:Wi,metrics:Ns,rect:Ti}),Dt+=Sc*ys+Vt):(cn.push({glyph:os,image:ol,x:Dt,y:jt+Ao,vertical:xo,scale:ys,localGlyph:Ns.localGlyph,fontStack:En.fontStack,sectionIndex:Wi,metrics:Ns,rect:Ti}),Dt+=Ns.advance*ys+Vt)}cn.length!==0&&(ga=Math.max(Dt-Vt,ga),Ya?T4(cn,ma,Xr,Hn,Ye*Or/2):T4(cn,ma,Xr,0,Ye/2)),Dt=0;const Pi=Ye*Or+Xr;Ur.lineOffset=Math.max(Xr,Jr),jt+=Pi,++xa}var Oa;const _a=jt,{horizontalAlign:gr,verticalAlign:$a}=dP(gt);(function(or,Or,Jr,Ur,cn,Xr){const wn=(Or-Jr)*cn,Hn=-Xr*Ur;for(const Pi of or)for(const Ir of Pi.positionedGlyphs)Ir.x+=wn,Ir.y+=Hn})(xe.positionedLines,ma,gr,$a,ga,_a),xe.top+=-$a*_a,xe.bottom=xe.top+_a,xe.left+=-gr*ga,xe.right=xe.left+ga,xe.hasBaseline=Ya}(Se,i,u,f,ee,_,b,N,V,D,I,M),!function(xe){for(const Ke of xe)if(Ke.positionedGlyphs.length!==0)return!1;return!0}(pe))return Se}const sS={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},LJ={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _4(d,i,u,f,y,m){if(i.image){const _=f.get(i.image.toString());return _?_.displaySize[0]*i.scale*Fe/m+y:0}{const _=u[i.fontStack],b=_&&_.glyphs[d];return b?b.metrics.advance*i.scale+y:0}}function v4(d,i,u,f){const y=Math.pow(d-i,2);return f?d<i?y/2:2*y:y+Math.abs(u)*u}function FJ(d,i,u){let f=0;return d===10&&(f-=1e4),u&&(f+=150),d!==40&&d!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function w4(d,i,u,f,y,m){let _=null,b=v4(i,u,y,m);for(const N of f){const D=v4(i-N.x,u,y,m)+N.badness;D<=b&&(_=N,b=D)}return{index:d,x:i,priorBreak:_,badness:b}}function R4(d){return d?R4(d.priorBreak).concat(d.index):[]}function dP(d){let i=.5,u=.5;switch(d){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function T4(d,i,u,f,y){if(!(i||u||f||y))return;const m=d.length-1,_=d[m],b=(_.x+_.metrics.advance*_.scale)*i;for(let N=0;N<=m;N++)d[N].x-=b,d[N].y+=u+f+y}function UJ(d,i,u,f){const{horizontalAlign:y,verticalAlign:m}=dP(f),_=u[0]-d.displaySize[0]*y,b=u[1]-d.displaySize[1]*m;return{imagePrimary:d,imageSecondary:i,top:b,bottom:b+d.displaySize[1],left:_,right:_+d.displaySize[0]}}function S4(d,i,u,f,y,m){const _=d.imagePrimary;let b;if(_.content){const Y=_.content,ee=_.pixelRatio||1;b=[Y[0]/ee,Y[1]/ee,_.displaySize[0]-Y[2]/ee,_.displaySize[1]-Y[3]/ee]}const N=i.left*m,D=i.right*m;let S,V,I,O;u==="width"||u==="both"?(O=y[0]+N-f[3],V=y[0]+D+f[1]):(O=y[0]+(N+D-_.displaySize[0])/2,V=O+_.displaySize[0]);const M=i.top*m,B=i.bottom*m;return u==="height"||u==="both"?(S=y[1]+M-f[0],I=y[1]+B+f[2]):(S=y[1]+(M+B-_.displaySize[1])/2,I=S+_.displaySize[1]),{imagePrimary:_,imageSecondary:void 0,top:S,right:V,bottom:I,left:O,collisionPadding:b}}class Ym extends Bt{constructor(i,u,f,y,m){super(i,u),this.angle=y,this.z=f,m!==void 0&&(this.segment=m)}clone(){return new Ym(this.x,this.y,this.z,this.angle,this.segment)}}function C4(d,i,u,f,y){if(i.segment===void 0)return!0;let m=i,_=i.segment+1,b=0;for(;b>-u/2;){if(_--,_<0)return!1;b-=d[_].dist(m),m=d[_]}b+=d[_].dist(d[_+1]),_++;const N=[];let D=0;for(;b<u/2;){const S=d[_],V=d[_+1];if(!V)return!1;let I=d[_-1].angleTo(S)-S.angleTo(V);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:b,angleDelta:I}),D+=I;b-N[0].distance>f;)D-=N.shift().angleDelta;if(D>y)return!1;_++,b+=S.dist(V)}return!0}function b4(d){let i=0;for(let u=0;u<d.length-1;u++)i+=d[u].dist(d[u+1]);return i}function x4(d,i,u){return d?.6*i*u:0}function P4(d,i){return Math.max(d?d.right-d.left:0,i?i.right-i.left:0)}function kJ(d,i,u,f,y,m){const _=x4(u,y,m),b=P4(u,f)*m;let N=0;const D=b4(d)/2;for(let S=0;S<d.length-1;S++){const V=d[S],I=d[S+1],O=V.dist(I);if(N+O>D){const M=(D-N)/O,B=hr(V.x,I.x,M),Y=hr(V.y,I.y,M),ee=new Ym(B,Y,0,I.angleTo(V),S);return!_||C4(d,ee,b,_,i)?ee:void 0}N+=O}}function BJ(d,i,u,f,y,m,_,b,N){const D=x4(f,m,_),S=P4(f,y),V=S*_,I=d[0].x===0||d[0].x===N||d[0].y===0||d[0].y===N;return i-V<i/4&&(i=V+i/4),E4(d,I?i/2*b%i:(S/2+2*m)*_*b%i,i,D,u,V,I,!1,N)}function E4(d,i,u,f,y,m,_,b,N){const D=m/2,S=b4(d);let V=0,I=i-u,O=[];for(let M=0;M<d.length-1;M++){const B=d[M],Y=d[M+1],ee=B.dist(Y),ue=Y.angleTo(B);for(;I+u<V+ee;){I+=u;const le=(I-V)/ee,re=hr(B.x,Y.x,le),pe=hr(B.y,Y.y,le);if(re>=0&&re<N&&pe>=0&&pe<N&&I-D>=0&&I+D<=S){const Se=new Ym(re,pe,0,ue,M);f&&!C4(d,Se,m,f,y)||O.push(Se)}}V+=ee}return b||O.length||_||(O=E4(d,V/2,u,f,y,m,_,!0,N)),O}function N4(d,i,u,f,y){const m=[];for(let _=0;_<d.length;_++){const b=d[_];let N;for(let D=0;D<b.length-1;D++){let S=b[D],V=b[D+1];S.x<i&&V.x<i||(S.x<i?S=new Bt(i,S.y+(i-S.x)/(V.x-S.x)*(V.y-S.y))._round():V.x<i&&(V=new Bt(i,S.y+(i-S.x)/(V.x-S.x)*(V.y-S.y))._round()),S.y<u&&V.y<u||(S.y<u?S=new Bt(S.x+(u-S.y)/(V.y-S.y)*(V.x-S.x),u)._round():V.y<u&&(V=new Bt(S.x+(u-S.y)/(V.y-S.y)*(V.x-S.x),u)._round()),S.x>=f&&V.x>=f||(S.x>=f?S=new Bt(f,S.y+(f-S.x)/(V.x-S.x)*(V.y-S.y))._round():V.x>=f&&(V=new Bt(f,S.y+(f-S.x)/(V.x-S.x)*(V.y-S.y))._round()),S.y>=y&&V.y>=y||(S.y>=y?S=new Bt(S.x+(y-S.y)/(V.y-S.y)*(V.x-S.x),y)._round():V.y>=y&&(V=new Bt(S.x+(y-S.y)/(V.y-S.y)*(V.x-S.x),y)._round()),N&&S.equals(N[N.length-1])||(N=[S],m.push(N)),N.push(V)))))}}return m}function V4(d){let i=0,u=0;for(const _ of d)i+=_.w*_.h,u=Math.max(u,_.w);d.sort((_,b)=>b.h-_.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let y=0,m=0;for(const _ of d)for(let b=f.length-1;b>=0;b--){const N=f[b];if(!(_.w>N.w||_.h>N.h)){if(_.x=N.x,_.y=N.y,m=Math.max(m,_.y+_.h),y=Math.max(y,_.x+_.w),_.w===N.w&&_.h===N.h){const D=f.pop();b<f.length&&(f[b]=D)}else _.h===N.h?(N.x+=_.w,N.w-=_.w):_.w===N.w?(N.y+=_.h,N.h-=_.h):(f.push({x:N.x+_.w,y:N.y,w:N.w-_.w,h:_.h}),N.y+=_.h,N.h-=_.h);break}}return{w:y,h:m,fill:i/(y*m)||0}}xt(Ym,"Anchor");const W0=1;class z1{static getImagePositionScale(i,u,f){if(u&&i&&i.options&&i.options.transform){const y=i.options.transform;return{x:y.a,y:y.d}}return{x:f,y:f}}constructor(i,u,f,y){this.paddedRect=i;const{pixelRatio:m,version:_,stretchX:b,stretchY:N,content:D,sdf:S,usvg:V}=u;this.pixelRatio=m,this.stretchX=b,this.stretchY=N,this.content=D,this.version=_,this.padding=f,this.sdf=S,this.scale=z1.getImagePositionScale(y,V,m)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function z4(d,i,u){const f=ku.parse(d),y=function(m,_,b=[1,1]){return{x:0,y:0,w:(m.data?m.data.width:m.width*b[0])+2*_,h:(m.data?m.data.height:m.height*b[1])+2*_}}(i,u,[f.options.transform.a,f.options.transform.d]);return{bin:y,imagePosition:new z1(y,i,u,f),imageVariant:f}}class O4{constructor(i,u,f){const y=new Map,m=new Map;this.haveRenderCallbacks=[];const _=[];this.addImages(i,y,W0,_),this.addImages(u,m,2,_);const{w:b,h:N}=V4(_),D=new Al({width:b||1,height:N||1});for(const[S,V]of i.entries()){const I=y.get(S).paddedRect;Al.copy(V.data,D,{x:0,y:0},{x:I.x+W0,y:I.y+W0},V.data,f,V.sdf)}for(const[S,V]of u.entries()){const I=m.get(S),O=I.paddedRect;let M=I.padding;const B=O.x+M,Y=O.y+M,ee=V.data.width,ue=V.data.height;M=M>1?M-1:M,Al.copy(V.data,D,{x:0,y:0},{x:B,y:Y},V.data,f),Al.copy(V.data,D,{x:0,y:ue-M},{x:B,y:Y-M},{width:ee,height:M},f),Al.copy(V.data,D,{x:0,y:0},{x:B,y:Y+ue},{width:ee,height:M},f),Al.copy(V.data,D,{x:ee-M,y:0},{x:B-M,y:Y},{width:M,height:ue},f),Al.copy(V.data,D,{x:0,y:0},{x:B+ee,y:Y},{width:M,height:ue},f),Al.copy(V.data,D,{x:ee-M,y:ue-M},{x:B-M,y:Y-M},{width:M,height:M},f),Al.copy(V.data,D,{x:0,y:ue-M},{x:B+ee,y:Y-M},{width:M,height:M},f),Al.copy(V.data,D,{x:0,y:0},{x:B+ee,y:Y+ue},{width:M,height:M},f),Al.copy(V.data,D,{x:ee-M,y:0},{x:B-M,y:Y+ue},{width:M,height:M},f)}this.lut=f,this.image=D,this.iconPositions=y,this.patternPositions=m}addImages(i,u,f,y){for(const[m,_]of i.entries()){const{bin:b,imagePosition:N,imageVariant:D}=z4(m,_,f);u.set(m,N),y.push(b),_.hasRenderCallback&&this.haveRenderCallbacks.push(D.id)}}patchUpdatedImages(i,u,f){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(y=>i.hasImage(y,f)),i.dispatchRenderCallbacks(this.haveRenderCallbacks,f);for(const y of i.getUpdatedImages(f)){for(const m of this.iconPositions.keys()){const _=ku.parse(m);if(Lo.isEqual(_.id,y)){const b=i.getImage(y,f);this.patchUpdatedImage(this.iconPositions.get(m),b,u)}}for(const m of this.patternPositions.keys()){const _=ku.parse(m);if(Lo.isEqual(_.id,y)){const b=i.getImage(y,f);this.patchUpdatedImage(this.patternPositions.get(m),b,u)}}}}patchUpdatedImage(i,u,f){if(!i||!u||i.version===u.version)return;i.version=u.version;const[y,m]=i.tl,_=i.sdf;if(this.lut||_){const b={width:u.data.width,height:u.data.height},N=new Al(b);Al.copy(u.data,N,{x:0,y:0},{x:0,y:0},b,this.lut,_),f.update(N,{position:{x:y,y:m}})}else f.update(u.data,{position:{x:y,y:m}})}}xt(z1,"ImagePosition"),xt(O4,"ImageAtlas");const oS=1e20;function D4(d,i,u,f,y,m,_,b,N){for(let D=i;D<i+f;D++)M4(d,u*m+D,m,y,_,b,N);for(let D=u;D<u+y;D++)M4(d,D*m+i,1,f,_,b,N)}function M4(d,i,u,f,y,m,_){m[0]=0,_[0]=-1e20,_[1]=oS,y[0]=d[i];for(let b=1,N=0,D=0;b<f;b++){y[b]=d[i+b*u];const S=b*b;do{const V=m[N];D=(y[b]-y[V]+S-V*V)/(b-V)/2}while(D<=_[N]&&--N>-1);N++,m[N]=b,_[N]=D,_[N+1]=oS}for(let b=0,N=0;b<f;b++){for(;_[N+1]<b;)N++;const D=m[N],S=b-D;d[i+b*u]=y[D]+S*S}}const dp=2,hP={none:0,ideographs:1,all:2};class Y0{constructor(i,u,f){this.requestManager=i,this.localGlyphMode=u,this.localFontFamily=f,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i,u){this.urls[u]=i}getGlyphs(i,u,f){const y=[],m=this.urls[u]||be.GLYPHS_URL;for(const _ in i)for(const b of i[_])y.push({stack:_,id:b});Dn(y,({stack:_,id:b},N)=>{let D=this.entries[_];D||(D=this.entries[_]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=D.glyphs[b];if(S!==void 0)return void N(null,{stack:_,id:b,glyph:S});if(S=this._tinySDF(D,_,b),S)return D.glyphs[b]=S,void N(null,{stack:_,id:b,glyph:S});const V=Math.floor(b/256);if(256*V>65535)return en("glyphs > 65535 not supported"),void N(null,{stack:_,id:b,glyph:S});if(D.ranges[V])return void N(null,{stack:_,id:b,glyph:S});let I=D.requests[V];I||(I=D.requests[V]=[],Y0.loadGlyphRange(_,V,m,this.requestManager,(O,M)=>{if(M){D.ascender=M.ascender,D.descender=M.descender;for(const B in M.glyphs)this._doesCharSupportLocalGlyph(+B)||(D.glyphs[+B]=M.glyphs[+B]);D.ranges[V]=!0}for(const B of I)B(O,M);delete D.requests[V]})),I.push((O,M)=>{O?N(O):M&&N(null,{stack:_,id:b,glyph:M.glyphs[b]||null})})},(_,b)=>{if(_)f(_);else if(b){const N={};for(const{stack:D,id:S,glyph:V}of b)N[D]===void 0&&(N[D]={}),N[D].glyphs===void 0&&(N[D].glyphs={}),N[D].glyphs[S]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics},N[D].ascender=this.entries[D].ascender,N[D].descender=this.entries[D].descender;f(null,N)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==hP.none&&(this.localGlyphMode===hP.all?!!this.localFontFamily:!!this.localFontFamily&&(_t["CJK Unified Ideographs"](i)||_t["Hangul Syllables"](i)||_t.Hiragana(i)||_t.Katakana(i)||_t["CJK Symbols and Punctuation"](i)||_t["CJK Unified Ideographs Extension A"](i)||_t["CJK Unified Ideographs Extension B"](i)||_t.Osage(i)))}_tinySDF(i,u,f){const y=this.localFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let m=i.tinySDF;if(!m){let B="400";/bold/i.test(u)?B="900":/medium/i.test(u)?B="500":/light/i.test(u)&&(B="200"),m=i.tinySDF=new Y0.TinySDF({fontFamily:y,fontWeight:B,fontSize:24*dp,buffer:3*dp,radius:8*dp}),m.fontWeight=B}if(this.localGlyphs[m.fontWeight][f])return this.localGlyphs[m.fontWeight][f];const _=String.fromCodePoint(f),{data:b,width:N,height:D,glyphWidth:S,glyphHeight:V,glyphLeft:I,glyphTop:O,glyphAdvance:M}=m.draw(_);return this.localGlyphs[m.fontWeight][f]={id:f,bitmap:new Yp({width:N,height:D},b),metrics:{width:S/dp,height:V/dp,left:I/dp,top:O/dp-27,advance:M/dp,localGlyph:!0}}}}Y0.loadGlyphRange=function(d,i,u,f,y){const m=256*i,_=m+255,b=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",d).replace("{range}",`${m}-${_}`),ws.Glyphs);Vi(b,(N,D)=>{if(N)y(N);else if(D){const S={},V=function(I){return new on(I).readFields(tu,{})}(D);for(const I of V.glyphs)S[I.id]=I;y(null,{glyphs:S,ascender:V.ascender,descender:V.descender})}})},Y0.TinySDF=class{constructor({fontSize:d=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:m="normal",fontStyle:_="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const b=this.size=d+4*i,N=this._createCanvas(b),D=this.ctx=N.getContext("2d",{willReadFrequently:!0});D.font=`${_} ${m} ${d}px ${y}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(d){const i=document.createElement("canvas");return i.width=i.height=d,i}draw(d){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:m}=this.ctx.measureText(d),_=Math.ceil(u),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-y))),N=Math.min(this.size-this.buffer,_+Math.ceil(f)),D=b+2*this.buffer,S=N+2*this.buffer,V=Math.max(D*S,0),I=new Uint8ClampedArray(V),O={data:I,width:D,height:S,glyphWidth:b,glyphHeight:N,glyphTop:_,glyphLeft:0,glyphAdvance:i};if(b===0||N===0)return O;const{ctx:M,buffer:B,gridInner:Y,gridOuter:ee}=this;M.clearRect(B,B,b,N),M.fillText(d,B,B+_);const ue=M.getImageData(B,B,b,N);ee.fill(oS,0,V),Y.fill(0,0,V);for(let le=0;le<N;le++)for(let re=0;re<b;re++){const pe=ue.data[4*(le*b+re)+3]/255;if(pe===0)continue;const Se=(le+B)*D+re+B;if(pe===1)ee[Se]=0,Y[Se]=oS;else{const xe=.5-pe;ee[Se]=xe>0?xe*xe:0,Y[Se]=xe<0?xe*xe:0}}D4(ee,0,0,D,S,D,this.f,this.v,this.z),D4(Y,B,B,b,N,D,this.f,this.v,this.z);for(let le=0;le<V;le++){const re=Math.sqrt(ee[le])-Math.sqrt(Y[le]);I[le]=Math.round(255-255*(re/this.radius+this.cutoff))}return O}};const _A=W0;function I4(d,i){return d+i[1]-i[0]}function L4(d,i,u,f,y=1){const m=[],_=d.imagePrimary,b=_.pixelRatio,N=_.paddedRect.w-2*_A,D=_.paddedRect.h-2*_A,S=(d.right-d.left)*y,V=(d.bottom-d.top)*y,I=_.stretchX||[[0,N]],O=_.stretchY||[[0,D]],M=I.reduce(I4,0),B=O.reduce(I4,0),Y=N-M,ee=D-B;let ue=0,le=M,re=0,pe=B,Se=0,xe=Y,Ke=0,Ze=ee;if(_.content&&f){const ft=_.content;ue=lS(I,0,ft[0]),re=lS(O,0,ft[1]),le=lS(I,ft[0],ft[2]),pe=lS(O,ft[1],ft[3]),Se=ft[0]-ue,Ke=ft[1]-re,xe=ft[2]-ft[0]-le,Ze=ft[3]-ft[1]-pe}const He=(ft,Ye,gt,bt)=>{const Rt=uS(ft.stretch-ue,le,S,d.left*y),Vt=cS(ft.fixed-Se,xe,ft.stretch,M),Et=uS(Ye.stretch-re,pe,V,d.top*y),Ut=cS(Ye.fixed-Ke,Ze,Ye.stretch,B),Dt=uS(gt.stretch-ue,le,S,d.left*y),jt=cS(gt.fixed-Se,xe,gt.stretch,M),ga=uS(bt.stretch-re,pe,V,d.top*y),ma=cS(bt.fixed-Ke,Ze,bt.stretch,B),Ya=new Bt(Rt,Et),xa=new Bt(Dt,Et),Oa=new Bt(Dt,ga),_a=new Bt(Rt,ga),gr=new Bt(Vt/b,Ut/b),$a=new Bt(jt/b,ma/b),or=i*Math.PI/180;if(or){const wn=Math.sin(or),Hn=Math.cos(or),Pi=[Hn,-wn,wn,Hn];Ya._matMult(Pi),xa._matMult(Pi),_a._matMult(Pi),Oa._matMult(Pi)}const Or=ft.stretch+ft.fixed,Jr=gt.stretch+gt.fixed,Ur=Ye.stretch+Ye.fixed,cn=bt.stretch+bt.fixed,Xr=d.imageSecondary;return{tl:Ya,tr:xa,bl:_a,br:Oa,texPrimary:{x:_.paddedRect.x+_A+Or,y:_.paddedRect.y+_A+Ur,w:Jr-Or,h:cn-Ur},texSecondary:Xr?{x:Xr.paddedRect.x+_A+Or,y:Xr.paddedRect.y+_A+Ur,w:Jr-Or,h:cn-Ur}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gr,pixelOffsetBR:$a,minFontScaleX:xe/b/S,minFontScaleY:Ze/b/V,isSDF:u}};if(f&&(_.stretchX||_.stretchY)){const ft=F4(I,Y,M),Ye=F4(O,ee,B);for(let gt=0;gt<ft.length-1;gt++){const bt=ft[gt],Rt=ft[gt+1];for(let Vt=0;Vt<Ye.length-1;Vt++)m.push(He(bt,Ye[Vt],Rt,Ye[Vt+1]))}}else m.push(He({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:N+1},{fixed:0,stretch:D+1}));return m}function lS(d,i,u){let f=0;for(const y of d)f+=Math.max(i,Math.min(u,y[1]))-Math.max(i,Math.min(u,y[0]));return f}function F4(d,i,u){const f=[{fixed:-1,stretch:0}];for(const[y,m]of d){const _=f[f.length-1];f.push({fixed:y-_.stretch,stretch:_.stretch}),f.push({fixed:y-_.stretch,stretch:_.stretch+(m-y)})}return f.push({fixed:i+_A,stretch:u}),f}function uS(d,i,u,f){return d/i*u+f}function cS(d,i,u,f){return d-i*u/f}function GJ(d,i,u,f){const y=i+d.positionedLines[f].lineOffset;return f===0?u+y/2:u+(y+(i+d.positionedLines[f-1].lineOffset))/2}function jJ(d,i=1,u=!1){let f=1/0,y=1/0,m=-1/0,_=-1/0;const b=d[0];for(let O=0;O<b.length;O++){const M=b[O];(!O||M.x<f)&&(f=M.x),(!O||M.y<y)&&(y=M.y),(!O||M.x>m)&&(m=M.x),(!O||M.y>_)&&(_=M.y)}const N=Math.min(m-f,_-y);let D=N/2;const S=new cc([],ZJ);if(N===0)return new Bt(f,y);for(let O=f;O<m;O+=N)for(let M=y;M<_;M+=N)S.push(new X0(O+D,M+D,D,d));let V=function(O){let M=0,B=0,Y=0;const ee=O[0];for(let ue=0,le=ee.length,re=le-1;ue<le;re=ue++){const pe=ee[ue],Se=ee[re],xe=pe.x*Se.y-Se.x*pe.y;B+=(pe.x+Se.x)*xe,Y+=(pe.y+Se.y)*xe,M+=3*xe}return new X0(B/M,Y/M,0,O)}(d),I=S.length;for(;S.length;){const O=S.pop();(O.d>V.d||!V.d)&&(V=O,u&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,I)),O.max-V.d<=i||(D=O.h/2,S.push(new X0(O.p.x-D,O.p.y-D,D,d)),S.push(new X0(O.p.x+D,O.p.y-D,D,d)),S.push(new X0(O.p.x-D,O.p.y+D,D,d)),S.push(new X0(O.p.x+D,O.p.y+D,D,d)),I+=4)}return u&&(console.log(`num probes: ${I}`),console.log(`best distance: ${V.d}`)),V.p}function ZJ(d,i){return i.max-d.max}class X0{constructor(i,u,f,y){this.p=new Bt(i,u),this.h=f,this.d=function(m,_){let b=!1,N=1/0;for(let D=0;D<_.length;D++){const S=_[D];for(let V=0,I=S.length,O=I-1;V<I;O=V++){const M=S[V],B=S[O];M.y>m.y!=B.y>m.y&&m.x<(B.x-M.x)*(m.y-M.y)/(B.y-M.y)+M.x&&(b=!b),N=Math.min(N,ct(m,M,B))}}return(b?1:-1)*Math.sqrt(N)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}}const fP=Number.POSITIVE_INFINITY,qJ=Math.sqrt(2);function U4(d,[i,u]){let f=0,y=0;if(u===fP){i<0&&(i=0);const m=i/qJ;switch(d){case"top-right":case"top-left":y=m-7;break;case"bottom-right":case"bottom-left":y=7-m;break;case"bottom":y=7-i;break;case"top":y=i-7}switch(d){case"top-right":case"bottom-right":f=-m;break;case"top-left":case"bottom-left":f=m;break;case"left":f=i;break;case"right":f=-i}}else{switch(i=Math.abs(i),u=Math.abs(u),d){case"top-right":case"top-left":case"top":y=u-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-u}switch(d){case"top-right":case"bottom-right":case"right":f=-i;break;case"top-left":case"bottom-left":case"left":f=i}}return[f,y]}function k4(d,i,u,f,y,m,_,b){if(!d)return;const N=Ft(i,u,f,y,m);return d.scaleSelf(N*b*_)}function B4(d,i,u,f,y,m,_,b){return{iconPrimary:k4(d.getPrimary(),i,u,f,y,m,_,b),iconSecondary:k4(d.getSecondary(),i,u,f,y,m,_,b)}}function G4(d,i,u,f){if(!d)return;const y=i.get(u.toString());if(d.imagePrimary=y,f){const m=i.get(f.toString());d.imageSecondary=m}}function HJ(d,i){for(const u in d.horizontal)j4(d.horizontal[u],i);j4(d.vertical,i)}function j4(d,i){if(d){for(const u of d.positionedLines)for(const f of u.positionedGlyphs)if(f.image!==null){const y=f.image.toString();f.rect=i.get(y).paddedRect}}}function pP(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function $J(d,i,u,f,y,m,_,b,N){const D=mP(m.horizontal)||m.vertical,S=u.get("icon-text-fit-padding").evaluate(f,{},y);let V,I=i;return i&&N!=="none"&&(d.allowVerticalPlacement&&m.vertical&&(V=S4(i,m.vertical,N,S,b,_)),D&&(I=S4(i,D,N,S,b,_))),{defaultShapedIcon:I,verticallyShapedIcon:V}}function KJ(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee,ue,le){let re=_.textMaxSize.evaluate(i,{},I);re===void 0?re=b*_.textScaleFactor:re*=_.textScaleFactor;const pe=d.layers[0].layout,Se=mP(u.horizontal)||u.vertical,xe=O.name==="globe",Ke=Fe,Ze=d.tilePixelRatio*re/Ke,He=(Vt=d.overscaling,d.zoom>18&&Vt>2&&(Vt>>=1),Math.max(Na/(512*Vt),1)*pe.get("symbol-spacing")),ft=pe.get("text-padding")*d.tilePixelRatio,Ye=pe.get("icon-padding")*d.tilePixelRatio,gt=Va(pe.get("text-max-angle")),bt=pe.get("icon-rotation-alignment")==="map"&&le!=="point",Rt=He/2;var Vt;d.hasAnyIconTextFit===!1&&Y!=="none"&&(d.hasAnyIconTextFit=!0);const Et=i.properties?+i.properties[Pf]:null,Ut=Et&&d.elevationFeatureIdToIndex?d.elevationFeatureIdToIndex.get(Et):65535,Dt=(jt,ga,ma)=>{if(ga.x<0||ga.x>=Na||ga.y<0||ga.y>=Na)return;let Ya=null;if(xe){const{x:xa,y:Oa,z:_a}=O.projectTilePoint(ga.x,ga.y,ma);Ya={anchor:new Ym(xa,Oa,_a,0,void 0),up:O.upVector(ma,ga.x,ga.y)}}(function(xa,Oa,_a,gr,$a,or,Or,Jr,Ur,cn,Xr,wn,Hn,Pi,Ir,En,Wi,os,ys,Ns,Ti,ol,Sc,Ao,xo,Vu,Dl,Wh,rg){const Of=xa.addToLineVertexArray(Oa,gr);let mp,ng,ig,SA,CF,bF,xF,PF=0,EF=0,NF=0,VF=0,KP=-1,WP=-1;const om={};let zF=oo("");const CA=_a?_a.anchor:Oa,YP=Wh!=="none";let XP=0,JP=0;if(Ur._unevaluatedLayout.getValue("text-radial-offset")===void 0?[XP,JP]=Ur.layout.get("text-offset").evaluate(Ti,{},xo).map(Yh=>Yh*Fe):(XP=Ur.layout.get("text-radial-offset").evaluate(Ti,{},xo)*Fe,JP=fP),xa.allowVerticalPlacement&&$a.vertical){const Yh=$a.vertical;if(Ir)bF=yP(Yh),Jr&&(xF=yP(Jr));else{const Zd=Ur.layout.get("text-rotate").evaluate(Ti,{},xo)+90;ig=dS(cn,CA,Oa,Xr,wn,Hn,Yh,Pi,Zd,En),Jr&&(SA=dS(cn,CA,Oa,Xr,wn,Hn,Jr,os,Zd))}}if(or){const Yh=xa.iconSizeData,Zd=Ur.layout.get("icon-rotate").evaluate(Ti,{},xo),X1=L4(or,Zd,Sc,YP,ol.iconScaleFactor),eE=Jr?L4(Jr,Zd,Sc,YP,ol.iconScaleFactor):void 0;ng=dS(cn,CA,Oa,Xr,wn,Hn,or,os,Zd,null),PF=4*X1.length;let bA=null;Yh.kind==="source"?(bA=[ut*Ur.layout.get("icon-size").evaluate(Ti,{},xo)*ol.iconScaleFactor],bA[0]>Qy&&en(`${xa.layerIds[0]}: Value for "icon-size" is >= ${O1}. Reduce your "icon-size".`)):Yh.kind==="composite"&&(bA=[ut*ol.compositeIconSizes[0].evaluate(Ti,{},xo)*ol.iconScaleFactor,ut*ol.compositeIconSizes[1].evaluate(Ti,{},xo)*ol.iconScaleFactor],(bA[0]>Qy||bA[1]>Qy)&&en(`${xa.layerIds[0]}: Value for "icon-size" is >= ${O1}. Reduce your "icon-size".`)),xa.addSymbols(xa.icon,X1,bA,Ns,ys,Ti,!1,_a,Oa,Of.lineStartIndex,Of.lineLength,-1,Ao,xo,Vu,Dl),KP=xa.icon.placedSymbolArray.length-1,eE&&(EF=4*eE.length,xa.addSymbols(xa.icon,eE,bA,Ns,ys,Ti,jd.vertical,_a,Oa,Of.lineStartIndex,Of.lineLength,-1,Ao,xo,Vu,Dl),WP=xa.icon.placedSymbolArray.length-1)}for(const Yh in $a.horizontal){const Zd=$a.horizontal[Yh];mp||(zF=oo(Zd.text),Ir?CF=yP(Zd):mp=dS(cn,CA,Oa,Xr,wn,Hn,Zd,Pi,Ur.layout.get("text-rotate").evaluate(Ti,{},xo),En));const X1=Zd.positionedLines.length===1;if(NF+=Z4(xa,_a,Oa,Zd,Or,Ur,Ir,Ti,En,Of,$a.vertical?jd.horizontal:jd.horizontalOnly,X1?Object.keys($a.horizontal):[Yh],om,KP,ol,Ao,xo,Vu),X1)break}$a.vertical&&(VF+=Z4(xa,_a,Oa,$a.vertical,Or,Ur,Ir,Ti,En,Of,jd.vertical,["vertical"],om,WP,ol,Ao,xo,Vu));let sg=-1;const QP=(Yh,Zd)=>Yh?Math.max(Yh,Zd):Zd;sg=QP(CF,sg),sg=QP(bF,sg),sg=QP(xF,sg);const bee=sg>-1?1:0;xa.glyphOffsetArray.length>=65535&&en("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ti.sortKey!==void 0&&xa.addToSortKeyRanges(xa.symbolInstances.length,Ti.sortKey),xa.symbolInstances.emplaceBack(Oa.x,Oa.y,CA.x,CA.y,CA.z,om.right>=0?om.right:-1,om.center>=0?om.center:-1,om.left>=0?om.left:-1,om.vertical>=0?om.vertical:-1,KP,WP,zF,mp!==void 0?mp:xa.collisionBoxArray.length,mp!==void 0?mp+1:xa.collisionBoxArray.length,ig!==void 0?ig:xa.collisionBoxArray.length,ig!==void 0?ig+1:xa.collisionBoxArray.length,ng!==void 0?ng:xa.collisionBoxArray.length,ng!==void 0?ng+1:xa.collisionBoxArray.length,SA||xa.collisionBoxArray.length,SA?SA+1:xa.collisionBoxArray.length,Xr,NF,VF,PF,EF,bee,0,XP,JP,sg,0,YP?1:0,rg)})(d,ga,Ya,jt,u,f,m,y,d.layers[0],d.collisionBoxArray,i.index,i.sourceLayerIndex,d.index,ft,ue,D,0,Ye,bt,ee,i,_,S,V,I,M,B,Y,Ut)};if(le==="line")for(const jt of N4(i.geometry,0,0,Na,Na)){const ga=BJ(jt,He,gt,u.vertical||Se,f,Ke,Ze,d.overscaling,Na);for(const ma of ga)Se&&WJ(d,Se.text,Rt,ma)||Dt(jt,ma,I)}else if(le==="line-center"){for(const jt of i.geometry)if(jt.length>1){const ga=kJ(jt,gt,u.vertical||Se,f,Ke,Ze);ga&&Dt(jt,ga,I)}}else if(i.type==="Polygon")for(const jt of iA(i.geometry,0)){const ga=jJ(jt,16);Dt(jt[0],new Ym(ga.x,ga.y,0,0,void 0),I)}else if(i.type==="LineString")for(const jt of i.geometry)Dt(jt,new Ym(jt[0].x,jt[0].y,0,0,void 0),I);else if(i.type==="Point")for(const jt of i.geometry)for(const ga of jt)Dt([ga],new Ym(ga.x,ga.y,0,0,void 0),I)}const O1=255,Qy=O1*ut;function Z4(d,i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y,ee){const ue=function(pe,Se,xe,Ke,Ze,He,ft,Ye){const gt=[];if(Se.positionedLines.length===0)return gt;const bt=Ke.layout.get("text-rotate").evaluate(He,{})*Math.PI/180,Rt=function(jt){const ga=jt[0],ma=jt[1],Ya=ga*ma;return Ya>0?[ga,-ma]:Ya<0?[-ga,ma]:ga===0?[ma,ga]:[ma,-ga]}(xe);let Vt=Math.abs(Se.top-Se.bottom);for(const jt of Se.positionedLines)Vt-=jt.lineOffset;const Et=Se.positionedLines.length,Ut=Vt/Et;let Dt=Se.top-xe[1];for(let jt=0;jt<Et;++jt){const ga=Se.positionedLines[jt];Dt=GJ(Se,Ut,Dt,jt);for(const ma of ga.positionedGlyphs){if(!ma.rect)continue;const Ya=ma.rect||{};let xa=uP+1,Oa=!0,_a=1,gr=0;if(ma.image){const Ti=ft.get(ma.image.toString());if(!Ti)continue;if(Ti.sdf){en("SDF images are not supported in formatted text and will be ignored.");continue}Oa=!1,_a=Ti.pixelRatio,xa=W0/_a}const $a=(Ze||Ye)&&ma.vertical,or=ma.metrics.advance*ma.scale/2,Or=ma.metrics,Jr=ma.rect;if(Jr===null)continue;Ye&&Se.verticalizable&&(gr=ma.image?or-ma.metrics.width*ma.scale/2:0);const Ur=Ze?[ma.x+or,ma.y]:[0,0];let cn=[0,0],Xr=[0,0],wn=!1;Ze||($a?(Xr=[ma.x+or+Rt[0],ma.y+Rt[1]-gr],wn=!0):cn=[ma.x+or+xe[0],ma.y+xe[1]-gr]);const Hn=Jr.w*ma.scale/(_a*(ma.localGlyph?dp:1)),Pi=Jr.h*ma.scale/(_a*(ma.localGlyph?dp:1));let Ir,En,Wi,os;if($a){const Ti=ma.y-Dt,ol=new Bt(-or,or-Ti),Sc=-Math.PI/2,Ao=new Bt(...Xr);Ir=new Bt(-or+cn[0],cn[1]),Ir._rotateAround(Sc,ol)._add(Ao),Ir.x+=-Ti+or,Ir.y-=(Or.left-xa)*ma.scale;const xo=ma.image?Or.advance*ma.scale:Fe*ma.scale,Vu=String.fromCodePoint(ma.glyph);Jn(Vu)?Ir.x+=(1-xa)*ma.scale:qo(Vu)?Ir.x+=xo-Or.height*ma.scale+(-xa-1)*ma.scale:Ir.x+=ma.image||Or.width+2*xa===Jr.w&&Or.height+2*xa===Jr.h?(xo-Pi)/2:(xo-(Or.height+2*xa)*ma.scale)/2,En=new Bt(Ir.x,Ir.y-Hn),Wi=new Bt(Ir.x+Pi,Ir.y),os=new Bt(Ir.x+Pi,Ir.y-Hn)}else{const Ti=(Or.left-xa)*ma.scale-or+cn[0],ol=(-Or.top-xa)*ma.scale+cn[1],Sc=Ti+Hn,Ao=ol+Pi;Ir=new Bt(Ti,ol),En=new Bt(Sc,ol),Wi=new Bt(Ti,Ao),os=new Bt(Sc,Ao)}if(bt){let Ti;Ti=Ze?new Bt(0,0):wn?new Bt(Rt[0],Rt[1]):new Bt(xe[0],xe[1]),Ir._rotateAround(bt,Ti),En._rotateAround(bt,Ti),Wi._rotateAround(bt,Ti),os._rotateAround(bt,Ti)}const ys=new Bt(0,0),Ns=new Bt(0,0);gt.push({tl:Ir,tr:En,bl:Wi,br:os,texPrimary:Ya,texSecondary:void 0,writingMode:Se.writingMode,glyphOffset:Ur,sectionIndex:ma.sectionIndex,isSDF:Oa,pixelOffsetTL:ys,pixelOffsetBR:Ns,minFontScaleX:0,minFontScaleY:0})}}return gt}(0,f,N,m,_,b,y,d.allowVerticalPlacement),le=d.textSizeData;let re=null;le.kind==="source"?(re=[ut*m.layout.get("text-size").evaluate(b,{},Y)*M.textScaleFactor],re[0]>Qy&&en(`${d.layerIds[0]}: Value for "text-size" is >= ${O1}. Reduce your "text-size".`)):le.kind==="composite"&&(re=[ut*M.compositeTextSizes[0].evaluate(b,{},Y)*M.textScaleFactor,ut*M.compositeTextSizes[1].evaluate(b,{},Y)*M.textScaleFactor],(re[0]>Qy||re[1]>Qy)&&en(`${d.layerIds[0]}: Value for "text-size" is >= ${O1}. Reduce your "text-size".`)),d.addSymbols(d.text,ue,re,N,_,b,S,i,u,D.lineStartIndex,D.lineLength,O,B,Y,ee,!1);for(const pe of V)I[pe]=d.text.placedSymbolArray.length-1;return 4*ue.length}function mP(d){for(const i in d)return d[i];return null}function dS(d,i,u,f,y,m,_,b,N,D){let S=_.top,V=_.bottom,I=_.left,O=_.right;const M=_.collisionPadding;if(M&&(I-=M[0],S-=M[1],O+=M[2],V+=M[3]),N){const B=new Bt(I,S),Y=new Bt(O,S),ee=new Bt(I,V),ue=new Bt(O,V),le=Va(N);let re=new Bt(0,0);D&&(re=new Bt(D[0],D[1])),B._rotateAround(le,re),Y._rotateAround(le,re),ee._rotateAround(le,re),ue._rotateAround(le,re),I=Math.min(B.x,Y.x,ee.x,ue.x),O=Math.max(B.x,Y.x,ee.x,ue.x),S=Math.min(B.y,Y.y,ee.y,ue.y),V=Math.max(B.y,Y.y,ee.y,ue.y)}return d.emplaceBack(i.x,i.y,i.z,u.x,u.y,I,S,O,V,b,f,y,m),d.length-1}function yP(d){d.collisionPadding&&(d.top-=d.collisionPadding[1],d.bottom+=d.collisionPadding[3]);const i=d.bottom-d.top;return i>0?Math.max(10,i):null}function WJ(d,i,u,f){const y=d.compareText;if(i in y){const m=y[i];for(let _=m.length-1;_>=0;_--)if(f.dist(m[_])<u)return!0}else y[i]=[];return y[i].push(f),!1}function q4(d,i){const u=d.fovAboveCenter,f=d.elevation?d.elevation.getMinElevationBelowMSL()*i:0,y=(d._camera.position[2]*d.worldSize-f)/Math.cos(d._pitch),m=Math.sin(u)*y/Math.sin(Math.max(Math.PI/2-d._pitch-u,.01));let _=Math.sin(d._pitch)*m+y;const b=y*(1/d._horizonShift);if(!d.elevation||d.elevation.exaggeration()===0){let N=Math.max(d.zoom-17,0);d.isOrthographic&&(N/=10),_*=1+N}return Math.min(1.01*_,b)}function D1(d,i){if(!i.isReprojectedInTileSpace)return{scale:1<<d.z,x:d.x,y:d.y,x2:d.x+1,y2:d.y+1,projection:i};const u=Math.pow(2,-d.z),f=d.x*u,y=(d.x+1)*u,m=d.y*u,_=(d.y+1)*u,b=Pu(f),N=Pu(y),D=wi(m),S=wi(_),V=i.project(b,D),I=i.project(N,D),O=i.project(N,S),M=i.project(b,S);let B=Math.min(V.x,I.x,O.x,M.x),Y=Math.min(V.y,I.y,O.y,M.y),ee=Math.max(V.x,I.x,O.x,M.x),ue=Math.max(V.y,I.y,O.y,M.y);const le=u/16;function re(Se,xe,Ke,Ze,He,ft){const Ye=(Ke+He)/2,gt=(Ze+ft)/2,bt=i.project(Pu(Ye),wi(gt)),Rt=Math.max(0,B-bt.x,Y-bt.y,bt.x-ee,bt.y-ue);B=Math.min(B,bt.x),ee=Math.max(ee,bt.x),Y=Math.min(Y,bt.y),ue=Math.max(ue,bt.y),Rt>le&&(re(Se,bt,Ke,Ze,Ye,gt),re(bt,xe,Ye,gt,He,ft))}re(V,I,f,m,y,m),re(I,O,y,m,y,_),re(O,M,y,_,f,_),re(M,V,f,_,f,m),B-=le,Y-=le,ee+=le,ue+=le;const pe=1/Math.max(ee-B,ue-Y);return{scale:pe,x:B*pe,y:Y*pe,x2:ee*pe,y2:ue*pe,projection:i}}function H4(d,{x:i,y:u},f=0){return new Bt(((i-f)*d.scale-d.x)*Na,(u*d.scale-d.y)*Na)}const YJ=ve.mat4.identity(new Float32Array(16));class eg{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,u){return{x:0,y:0,z:0}}unproject(i,u){return new Ln(0,0)}projectTilePoint(i,u,f){return{x:i,y:u,z:0}}locationPoint(i,u,f,y=!0){return i._coordinatePoint(i.locationCoordinate(u,f),y)}pixelsPerMeter(i,u){return Go(1,i)*u}pixelSpaceConversion(i,u,f){return 1}farthestPixelDistance(i){return q4(i,i.pixelsPerMeter)}pointCoordinate(i,u,f,y){const m=i.horizonLineFromTop(!1),_=new Bt(u,Math.max(m,f));return i.rayIntersectionCoordinate(i.pointRayIntersection(_,y))}pointCoordinate3D(i,u,f){const y=new Bt(u,f);if(i.elevation)return i.elevation.pointCoordinate(y);{const m=this.pointCoordinate(i,y.x,y.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(i,u){if(i.elevation&&i.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(i,u.x,u.y);const f=i.horizonLineFromTop();return u.y<f}createInversionMatrix(i,u){return YJ}createTileMatrix(i,u,f){let y,m,_;const b=f.canonical,N=ve.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=D1(b,this);y=1,m=D.x+f.wrap*D.scale,_=D.y,ve.mat4.scale(N,N,[y/D.scale,y/D.scale,i.pixelsPerMeter/u])}else y=u/i.zoomScale(b.z),m=(b.x+Math.pow(2,b.z)*f.wrap)*y,_=b.y*y;return ve.mat4.translate(N,N,[m,_,0]),ve.mat4.scale(N,N,[y/Na,y/Na,1]),N}upVector(i,u,f){return[0,0,1]}upVectorScale(i,u,f){return{metersToTile:1}}}class XJ extends eg{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[u,f]=this.parallels=i.parallels||[29.5,45.5],y=Math.sin(Va(u));this.n=(y+Math.sin(Va(f)))/2,this.c=1+y*(2*this.n-y),this.r0=Math.sqrt(this.c)/this.n}project(i,u){const{n:f,c:y,r0:m}=this,_=Va(i-this.center[0]),b=Va(u),N=Math.sqrt(y-2*f*Math.sin(b))/f;return{x:N*Math.sin(_*f),y:N*Math.cos(_*f)-m,z:0}}unproject(i,u){const{n:f,c:y,r0:m}=this,_=m+u;let b=Math.atan2(i,Math.abs(_))*Math.sign(_);_*f<0&&(b-=Math.PI*Math.sign(i)*Math.sign(_));const N=Va(this.center[0])*f;b=pn(b,-Math.PI-N,Math.PI-N);const D=ka(za(b/f)+this.center[0],-180,180),S=Math.asin(ka((y-(i*i+_*_)*f*f)/(2*f),-1,1)),V=ka(za(S),-85.051129,Eu);return new Ln(D,V)}}const M1=1.340264,I1=-.081106,L1=893e-6,F1=.003796,hS=Math.sqrt(3)/2;class JJ extends eg{project(i,u){u=u/180*Math.PI,i=i/180*Math.PI;const f=Math.asin(hS*Math.sin(u)),y=f*f,m=y*y*y;return{x:.5*(i*Math.cos(f)/(hS*(M1+3*I1*y+m*(7*L1+9*F1*y)))/Math.PI+.5),y:1-.5*(f*(M1+I1*y+m*(L1+F1*y))/Math.PI+1),z:0}}unproject(i,u){i=(2*i-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,y=f*f,m=y*y*y;for(let S,V,I,O=0;O<12&&(V=f*(M1+I1*y+m*(L1+F1*y))-u,I=M1+3*I1*y+m*(7*L1+9*F1*y),S=V/I,f=ka(f-S,-Math.PI/3,Math.PI/3),y=f*f,m=y*y*y,!(Math.abs(S)<1e-12));++O);const _=hS*i*(M1+3*I1*y+m*(7*L1+9*F1*y))/Math.cos(f),b=Math.asin(Math.sin(f)/hS),N=ka(180*_/Math.PI,-180,180),D=ka(180*b/Math.PI,-85.051129,Eu);return new Ln(N,D)}}class QJ extends eg{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,u){return{x:.5+i/360,y:.5-u/360,z:0}}unproject(i,u){const f=360*(i-.5),y=ka(360*(.5-u),-85.051129,Eu);return new Ln(f,y)}}const J0=Math.PI/2;function fS(d){return Math.tan((J0+d)/2)}class eQ extends eg{constructor(i){super(i),this.center=i.center||[0,30];const[u,f]=this.parallels=i.parallels||[30,30];let y=Va(u),m=Va(f);this.southernCenter=y+m<0,this.southernCenter&&(y=-y,m=-m);const _=Math.cos(y),b=fS(y);this.n=y===m?Math.sin(y):Math.log(_/Math.cos(m))/Math.log(fS(m)/b),this.f=_*Math.pow(fS(y),this.n)/this.n}project(i,u){u=Va(u),this.southernCenter&&(u=-u),i=Va(i-this.center[0]);const f=1e-6,{n:y,f:m}=this;m>0?u<-J0+f&&(u=-J0+f):u>J0-f&&(u=J0-f);const _=m/Math.pow(fS(u),y);let b=_*Math.sin(y*i),N=m-_*Math.cos(y*i);return b=.5*(b/Math.PI+.5),N=.5*(N/Math.PI+.5),{x:b,y:this.southernCenter?N:1-N,z:0}}unproject(i,u){i=(2*i-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:f,f:y}=this,m=y-u,_=Math.sign(m),b=Math.sign(f)*Math.sqrt(i*i+m*m);let N=Math.atan2(i,Math.abs(m))*_;m*f<0&&(N-=Math.PI*Math.sign(i)*_);const D=ka(za(N/f)+this.center[0],-180,180),S=ka(za(2*Math.atan(Math.pow(y/b,1/f))-J0),-85.051129,Eu);return new Ln(D,this.southernCenter?-S:S)}}class $4 extends eg{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,u){return{x:yl(i),y:xi(u),z:0}}unproject(i,u){const f=Pu(i),y=wi(u);return new Ln(f,y)}}const K4=Va(Eu);class tQ extends eg{project(i,u){const f=(u=Va(u))*u,y=f*f;return{x:.5*((i=Va(i))*(.8707-.131979*f+y*(y*(.003971*f-.001529*y)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+f*(.015085+y*(.028874*f-.044475-.005916*y)))/Math.PI+1),z:0}}unproject(i,u){i=(2*i-.5)*Math.PI;let f=u=(2*(1-u)-1)*Math.PI,y=25,m=0,_=f*f;do{_=f*f;const D=_*_;m=(f*(1.007226+_*(.015085+D*(.028874*_-.044475-.005916*D)))-u)/(1.007226+_*(.045255+D*(.259866*_-.311325-.005916*11*D))),f=ka(f-m,-K4,K4)}while(Math.abs(m)>1e-6&&--y>0);_=f*f;const b=ka(za(i/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),N=za(f);return new Ln(b,N)}}const W4=Va(Eu);class aQ extends eg{project(i,u){u=Va(u),i=Va(i);const f=Math.cos(u),y=2/Math.PI,m=Math.acos(f*Math.cos(i/2)),_=Math.sin(m)/m,b=.5*(i*y+2*f*Math.sin(i/2)/_)||0,N=.5*(u+Math.sin(u)/_)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(N/Math.PI+1),z:0}}unproject(i,u){let f=i=(2*i-.5)*Math.PI,y=u=(2*(1-u)-1)*Math.PI,m=25;const _=1e-6;let b=0,N=0;do{const D=Math.cos(y),S=Math.sin(y),V=2*S*D,I=S*S,O=D*D,M=Math.cos(f/2),B=Math.sin(f/2),Y=2*M*B,ee=B*B,ue=1-O*M*M,le=ue?1/ue:0,re=ue?Math.acos(D*M)*Math.sqrt(1/ue):0,pe=.5*(2*re*D*B+2*f/Math.PI)-i,Se=.5*(re*S+y)-u,xe=.5*le*(O*ee+re*D*M*I)+1/Math.PI,Ke=le*(Y*V/4-re*S*B),Ze=.125*le*(V*B-re*S*O*Y),He=.5*le*(I*M+re*ee*D)+.5,ft=Ke*Ze-He*xe;b=(Se*Ke-pe*He)/ft,N=(pe*Ze-Se*xe)/ft,f=ka(f-b,-Math.PI,Math.PI),y=ka(y-N,-W4,W4)}while((Math.abs(b)>_||Math.abs(N)>_)&&--m>0);return new Ln(za(f),za(y))}}class Y4 extends eg{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Va(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,u){const{scale:f,cosPhi:y}=this;return{x:Va(i)*y*f+.5,y:-Math.sin(Va(u))/y*f+.5,z:0}}unproject(i,u){const{scale:f,cosPhi:y}=this,m=-(u-.5)/f,_=ka(za((i-.5)/f)/y,-180,180),b=Math.asin(ka(m*y,-1,1)),N=ka(za(b),-85.051129,Eu);return new Ln(_,N)}}class rQ extends $4{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,u,f){const y=On(i,u,f),m=Ri(hs(f));return ve.vec3.transformMat4(y,y,m),{x:y[0],y:y[1],z:y[2]}}locationPoint(i,u,f){const y=Rc(u.lat,u.lng),m=ve.vec3.normalize([],y),_=f?i._centerAltitude+f:i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(u),i._centerAltitude):i._centerAltitude,b=Go(1,0)*Na*_;ve.vec3.scaleAndAdd(y,y,m,b);const N=ve.mat4.identity(new Float64Array(16));return ve.mat4.multiply(N,i.pixelMatrix,i.globeMatrix),ve.vec3.transformMat4(y,y,N),new Bt(y[0],y[1])}pixelsPerMeter(i,u){return Go(1,0)*u}pixelSpaceConversion(i,u,f){const y=Go(1,i)*u,m=hr(Go(1,45)*u,y,f);return this.pixelsPerMeter(i,u)/m}createTileMatrix(i,u,f){const y=ss(hs(f.canonical));return ve.mat4.multiply(new Float64Array(16),i.globeMatrix,y)}createInversionMatrix(i,u){const{center:f}=i,y=Ri(hs(u));return ve.mat4.rotateY(y,y,Va(f.lng)),ve.mat4.rotateX(y,y,Va(f.lat)),ve.mat4.scale(y,y,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(y)}pointCoordinate(i,u,f,y){return un(i,u,f,!0)||new o(0,0)}pointCoordinate3D(i,u,f){const y=this.pointCoordinate(i,u,f,0);return[y.x,y.y,y.z]}isPointAboveHorizon(i,u){return!un(i,u.x,u.y,!1)}farthestPixelDistance(i){const u=function(y,m){const _=y.cameraToCenterDistance,b=y._centerAltitude*m,N=y._camera,D=y._camera.forward(),S=ve.vec3.add([],ve.vec3.scale([],D,-_),[0,0,b]),V=y.worldSize/(2*Math.PI),I=[0,0,-V],O=y.width/y.height,M=Math.tan(y.fovAboveCenter),B=ve.vec3.scale([],N.up(),M),Y=ve.vec3.scale([],N.right(),M*O),ee=ve.vec3.normalize([],ve.vec3.add([],ve.vec3.add([],D,B),Y)),ue=[];let le;if(new Cr(S,ee).closestPointOnSphere(I,V,ue)){const re=ve.vec3.add([],ue,I),pe=ve.vec3.sub([],re,S);le=Math.cos(y.fovAboveCenter)*ve.vec3.length(pe)}else{const re=ve.vec3.sub([],S,I),pe=ve.vec3.sub([],I,S);ve.vec3.normalize(pe,pe);const Se=ve.vec3.length(re)-V;le=Math.sqrt(Se*(Se+2*V));const xe=Math.acos(le/(V+Se))-Math.acos(ve.vec3.dot(D,pe));le*=Math.cos(xe)}return 1.01*le}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),f=zl(i.zoom);if(f>0){const y=q4(i,Go(1,i.center.lat)*i.worldSize),m=i.worldSize/(2*Math.PI),_=Math.max(i.width,i.height)/i.worldSize*Math.PI;return hr(u,y+m*(1-Math.cos(_)),Math.pow(f,10))}return u}upVector(i,u,f){return On(u,f,i,1)}upVectorScale(i){return{metersToTile:sn(oi(hs(i)))}}}function X4(d){const i=d.parallels,u=!!i&&Math.abs(i[0]+i[1])<.01;switch(d.name){case"mercator":return new $4(d);case"equirectangular":return new QJ(d);case"naturalEarth":return new tQ(d);case"equalEarth":return new JJ(d);case"winkelTripel":return new aQ(d);case"albers":return u?new Y4(d):new XJ(d);case"lambertConformalConic":return u?new Y4(d):new eQ(d);case"globe":return new rQ(d)}throw new Error(`Invalid projection name: ${d.name}`)}const nQ=vh.VectorTileFeature.types,iQ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pS(d,i,u,f,y,m,_,b,N,D,S,V,I){const O=b?Math.min(Qy,Math.round(b[0])):0,M=b?Math.min(Qy,Math.round(b[1])):0;d.emplaceBack(i,u,Math.round(32*f),Math.round(32*y),m,_,(O<<1)+(N?1:0),M,16*D,16*S,256*V,256*I)}function mS(d,i,u){d.emplaceBack(i,u)}function yS(d,i,u,f,y,m,_){d.emplaceBack(i,u,f,y,m,_)}function gS(d,i,u,f,y){d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y),d.emplaceBack(i,u,f,y)}function sQ(d){for(const i of d.sections)if(_i(i.text))return!0;return!1}class gP{constructor(i){this.layoutVertexArray=new hh,this.indexArray=new Ps,this.programConfigurations=i,this.segments=new Oi,this.dynamicLayoutVertexArray=new Yc,this.opacityVertexArray=new Xf,this.placedSymbolArray=new fl,this.iconTransitioningVertexArray=new Id,this.globeExtVertexArray=new Wc,this.zOffsetVertexArray=new Kc}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(i,u,f,y,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,iS.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,$0.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,iQ,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=i.createVertexBuffer(this.iconTransitioningVertexArray,v.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,lP.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=i.createVertexBuffer(this.zOffsetVertexArray,p.members,!0)),this.opacityVertexBuffer.itemSize=1),(f||y)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}xt(gP,"SymbolBuffers");class AP{constructor(i,u,f){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Oi,this.collisionVertexArray=new _c,this.collisionVertexArrayExt=new Yc}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,x.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,F.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}xt(AP,"CollisionBuffers");class AS{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.lut=i.lut,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(_=>_.fqid),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ve.mat4.identity([]),this.placementViewportMatrix=ve.mat4.identity([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oa(this.zoom,u["text-size"]),this.iconSizeData=oa(this.zoom,u["icon-size"]);const f=this.layers[0].layout,y=f.get("symbol-sort-key"),m=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=f.get("text-writing-mode").map(_=>jd[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=i.sourceID,this.projection=i.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new gP(new yh(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("text")||i.startsWith("symbol"))),this.icon=new gP(new yh(this.layers,{zoom:this.zoom,lut:this.lut},i=>i.startsWith("icon")||i.startsWith("symbol"))),this.glyphOffsetArray=new qg,this.lineVertexArray=new Zp,this.symbolInstances=new Zg}calculateGlyphDependencies(i,u,f,y,m){for(const _ of i){const b=_.codePointAt(0);if(b===void 0)break;if(u[b]=!0,y&&m&&b<=65535){const N=Yr[_];N&&(u[N.charCodeAt(0)]=!0)}}}updateFootprints(i,u){}updateReplacement(i,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(i.toUnwrapped(),!0);return!B0(this.activeReplacements,f)&&(this.activeReplacements=f,!0)}populate(i,u,f,y){const m=this.layers[0],_=m.layout,b=this.projection.name==="globe",N=_.get("text-font"),D=_.get("text-field"),S=_.get("icon-image"),[V,I]=_.get("icon-size-scale-range"),O=ka(u.scaleFactor||1,V,I),M=(D.value.kind!=="constant"||D.value.value instanceof us&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(N.value.kind!=="constant"||N.value.value.length>0),B=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,Y=_.get("symbol-sort-key");if(this.features=[],!M&&!B)return;const ee=u.iconDependencies,ue=u.glyphDependencies,le=u.availableImages,re=new vn(this.zoom);for(const{feature:pe,id:Se,index:xe,sourceLayerIndex:Ke}of i){const Ze=m._featureFilter.needGeometry,He=K(pe,Ze);if(!m._featureFilter.filter(re,He,f))continue;if(Ze||(He.geometry=Z(pe,f,y)),b&&pe.type!==1&&f.z<=5){const Rt=He.geometry,Vt=.98078528056,Et=(Ut,Dt)=>{const jt=On(Ut.x,Ut.y,f,1),ga=On(Dt.x,Dt.y,f,1);return ve.vec3.dot(jt,ga)<Vt};for(let Ut=0;Ut<Rt.length;Ut++)Rt[Ut]=C(Rt[Ut],Et)}let ft,Ye;if(M){const Rt=m.getValueAndResolveTokens("text-field",He,f,le),Vt=us.factory(Rt);sQ(Vt)&&(this.hasRTLText=!0),(!this.hasRTLText||po()==="unavailable"||this.hasRTLText&&is.isParsed())&&(ft=Za(Vt,m,He))}if(B){const Rt=m.getValueAndResolveTokens("icon-image",He,f,le);Ye=Rt instanceof Ts?Rt:Ts.build(Rt)}if(!ft&&!Ye)continue;const gt=this.sortFeaturesByKey?Y.evaluate(He,{},f):void 0,bt={id:Se,text:ft,icon:Ye,index:xe,sourceLayerIndex:Ke,geometry:He.geometry,properties:pe.properties,type:nQ[pe.type],sortKey:gt};if(this.features.push(bt),Ye){const Rt=this.layers[0]._unevaluatedLayout._values,{iconPrimary:Vt,iconSecondary:Et}=B4(Ye,this.iconSizeData,Rt["icon-size"],f,this.zoom,bt,this.pixelRatio,O),Ut=Vt.id.toString();if(ee.has(Ut)?ee.get(Ut).push(Vt):ee.set(Ut,[Vt]),Et){const Dt=Et.id.toString();ee.has(Dt)?ee.get(Dt).push(Et):ee.set(Dt,[Et])}}if(ft){const Rt=N.evaluate(He,{},f).join(","),Vt=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(jd.vertical)>=0;for(const Et of ft.sections)if(Et.image){const Ut=Et.image.getPrimary().scaleSelf(this.pixelRatio),Dt=Ut.id.toString(),jt=ee.get(Dt)||[];jt.push(Ut),ee.set(Dt,jt)}else{const Ut=ta(ft.toString()),Dt=Et.fontStack||Rt,jt=ue[Dt]=ue[Dt]||{};this.calculateGlyphDependencies(Et.text,jt,Vt,this.allowVerticalPlacement,Ut)}}}if(_.get("symbol-placement")==="line"&&(this.features=function(pe){const Se={},xe={},Ke=[];let Ze=0;function He(bt){Ke.push(pe[bt]),Ze++}function ft(bt,Rt,Vt){const Et=xe[bt];return delete xe[bt],xe[Rt]=Et,Ke[Et].geometry[0].pop(),Ke[Et].geometry[0]=Ke[Et].geometry[0].concat(Vt[0]),Et}function Ye(bt,Rt,Vt){const Et=Se[Rt];return delete Se[Rt],Se[bt]=Et,Ke[Et].geometry[0].shift(),Ke[Et].geometry[0]=Vt[0].concat(Ke[Et].geometry[0]),Et}function gt(bt,Rt,Vt){const Et=Vt?Rt[0][Rt[0].length-1]:Rt[0][0];return`${bt}:${Et.x}:${Et.y}`}for(let bt=0;bt<pe.length;bt++){const Rt=pe[bt],Vt=Rt.geometry,Et=Rt.text?Rt.text.toString():null;if(!Et){He(bt);continue}const Ut=gt(Et,Vt),Dt=gt(Et,Vt,!0);if(Ut in xe&&Dt in Se&&xe[Ut]!==Se[Dt]){const jt=Ye(Ut,Dt,Vt),ga=ft(Ut,Dt,Ke[jt].geometry);delete Se[Ut],delete xe[Dt],xe[gt(Et,Ke[ga].geometry,!0)]=ga,Ke[jt].geometry=null}else Ut in xe?ft(Ut,Dt,Vt):Dt in Se?Ye(Ut,Dt,Vt):(He(bt),Se[Ut]=Ze-1,xe[Dt]=Ze-1)}return Ke.filter(bt=>bt.geometry)}(this.features)),_.get("symbol-elevation-reference")==="hd-road-markup"){if(this.elevationType="road",u.elevationFeatures){!this.elevationFeatures&&u.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const pe of u.elevationFeatures)this.elevationFeatureIdToIndex.set(pe.id,this.elevationFeatures.length),this.elevationFeatures.push(pe)}}else _.get("symbol-z-elevate")&&(this.elevationType="offset");this.elevationType!=="none"&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((pe,Se)=>pe.sortKey-Se.sortKey)}update(i,u,f,y,m,_,b){this.text.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b),this.icon.programConfigurations.updatePaintArrays(i,u,m,f,y,_,b)}updateRoadElevation(){if(this.elevationType!=="road"||!this.elevationFeatures||this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let i=!1;for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);if(f.elevationFeatureIndex===65535)continue;const y=this.elevationFeatures[f.elevationFeatureIndex];if(y){const m=.05+y.pointElevation(new Bt(f.tileAnchorX,f.tileAnchorY));f.zOffset!==m&&(i=!0,f.zOffset=m)}}i&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const i=(m,_,b)=>{f+=_,f>m.length&&m.resize(f);for(let N=-_;N<0;N++)m.emplace(N+f,b)},u=(m,_,b)=>{y+=_,y>m.length&&m.resize(y);for(let N=-_;N<0;N++)m.emplace(N+y,b)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let f=0,y=0;for(let m=0;m<this.symbolInstances.length;m++){const _=this.symbolInstances.get(m),{numHorizontalGlyphVertices:b,numVerticalGlyphVertices:N,numIconVertices:D}=_,S=_.zOffset,V=D>0;if((b>0||N>0)&&(i(this.text.zOffsetVertexArray,b,S),i(this.text.zOffsetVertexArray,N,S)),V){const{placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:O}=_;I>=0&&u(this.icon.zOffsetVertexArray,D,S),O>=0&&u(this.icon.zOffsetVertexArray,_.numVerticalIconVertices,S)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=X4(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const f=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:y,y:m}of u)this.lineVertexArray.emplaceBack(y,m);return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(i,u,f,y,m,_,b,N,D,S,V,I,O,M,B,Y){const ee=i.indexArray,ue=i.layoutVertexArray,le=i.globeExtVertexArray,re=i.segments.prepareSegment(4*u.length,ue,ee,this.canOverlap?_.sortKey:void 0),pe=this.glyphOffsetArray.length,Se=re.vertexLength,xe=this.allowVerticalPlacement&&b===jd.vertical?Math.PI/2:0,Ke=_.text&&_.text.sections;for(let He=0;He<u.length;He++){const{tl:ft,tr:Ye,bl:gt,br:bt,texPrimary:Rt,texSecondary:Vt,pixelOffsetTL:Et,pixelOffsetBR:Ut,minFontScaleX:Dt,minFontScaleY:jt,glyphOffset:ga,isSDF:ma,sectionIndex:Ya}=u[He],xa=re.vertexLength,Oa=ga[1];if(pS(ue,D.x,D.y,ft.x,Oa+ft.y,Rt.x,Rt.y,f,ma,Et.x,Et.y,Dt,jt),pS(ue,D.x,D.y,Ye.x,Oa+Ye.y,Rt.x+Rt.w,Rt.y,f,ma,Ut.x,Et.y,Dt,jt),pS(ue,D.x,D.y,gt.x,Oa+gt.y,Rt.x,Rt.y+Rt.h,f,ma,Et.x,Ut.y,Dt,jt),pS(ue,D.x,D.y,bt.x,Oa+bt.y,Rt.x+Rt.w,Rt.y+Rt.h,f,ma,Ut.x,Ut.y,Dt,jt),N){const{x:_a,y:gr,z:$a}=N.anchor,[or,Or,Jr]=N.up;yS(le,_a,gr,$a,or,Or,Jr),yS(le,_a,gr,$a,or,Or,Jr),yS(le,_a,gr,$a,or,Or,Jr),yS(le,_a,gr,$a,or,Or,Jr),gS(i.dynamicLayoutVertexArray,_a,gr,$a,xe)}else gS(i.dynamicLayoutVertexArray,D.x,D.y,D.z,xe);if(Y){const _a=Vt||Rt;mS(i.iconTransitioningVertexArray,_a.x,_a.y),mS(i.iconTransitioningVertexArray,_a.x+_a.w,_a.y),mS(i.iconTransitioningVertexArray,_a.x,_a.y+_a.h),mS(i.iconTransitioningVertexArray,_a.x+_a.w,_a.y+_a.h)}ee.emplaceBack(xa,xa+1,xa+2),ee.emplaceBack(xa+1,xa+2,xa+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ga[0]),He!==u.length-1&&Ya===u[He+1].sectionIndex||i.programConfigurations.populatePaintArrays(ue.length,_,_.index,{},O,M,B,Ke&&Ke[Ya])}const Ze=N?N.anchor:D;i.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Ze.z,D.x,D.y,pe,this.glyphOffsetArray.length-pe,Se,S,V,D.segment,f?f[0]:0,f?f[1]:0,y[0],y[1],b,0,!1,0,I,0)}_commitLayoutVertex(i,u,f,y,m,_,b){i.emplaceBack(u,f,y,m,_,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(i,u,f,y,m,_,b){const N=f.segments.prepareSegment(4,f.layoutVertexArray,f.indexArray),D=N.vertexLength,S=b.tileAnchorX,V=b.tileAnchorY;for(let O=0;O<4;O++)f.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(f.collisionVertexArrayExt,u,i.padding,b.zOffset),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new Bt(i.x1,i.y1)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new Bt(i.x2,i.y1)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new Bt(i.x2,i.y2)),this._commitLayoutVertex(f.layoutVertexArray,y,m,_,S,V,new Bt(i.x1,i.y2)),N.vertexLength+=4;const I=f.indexArray;I.emplaceBack(D,D+1),I.emplaceBack(D+1,D+2),I.emplaceBack(D+2,D+3),I.emplaceBack(D+3,D),N.primitiveLength+=4}_addTextDebugCollisionBoxes(i,u,f,y,m,_){for(let b=y;b<m;b++){const N=f.get(b),D=this.getSymbolInstanceTextSize(i,_,u,b);this._addCollisionDebugVertices(N,D,this.textCollisionBox,N.projectedAnchorX,N.projectedAnchorY,N.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(i,u,f,y,m,_){for(let b=y;b<m;b++){const N=f.get(b),D=this.getSymbolInstanceIconSize(i,u,_.placedIconSymbolIndex);this._addCollisionDebugVertices(N,D,this.iconCollisionBox,N.projectedAnchorX,N.projectedAnchorY,N.projectedAnchorZ,_)}}generateCollisionDebugBuffers(i,u,f){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new AP(Ac,W.members,Id),this.iconCollisionBox=new AP(Ac,W.members,Id);const y=rr(this.iconSizeData,i),m=rr(this.textSizeData,i,f);for(let _=0;_<this.symbolInstances.length;_++){const b=this.symbolInstances.get(_);this._addTextDebugCollisionBoxes(m,i,u,b.textBoxStartIndex,b.textBoxEndIndex,b),this._addTextDebugCollisionBoxes(m,i,u,b.verticalTextBoxStartIndex,b.verticalTextBoxEndIndex,b),this._addIconDebugCollisionBoxes(y,i,u,b.iconBoxStartIndex,b.iconBoxEndIndex,b),this._addIconDebugCollisionBoxes(y,i,u,b.verticalIconBoxStartIndex,b.verticalIconBoxEndIndex,b)}}getSymbolInstanceTextSize(i,u,f,y){const m=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:y),_=ja(this.textSizeData,i,m)/Fe;return this.tilePixelRatio*_}getSymbolInstanceIconSize(i,u,f){const y=this.icon.placedSymbolArray.get(f),m=ja(this.iconSizeData,i,y);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(i,u,f,y){i.emplaceBack(u,-f,-f,y),i.emplaceBack(u,f,-f,y),i.emplaceBack(u,f,f,y),i.emplaceBack(u,-f,f,y)}_updateTextDebugCollisionBoxes(i,u,f,y,m,_,b){for(let N=y;N<m;N++){const D=f.get(N),S=this.getSymbolInstanceTextSize(i,_,u,N);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,S,D.padding,_.zOffset)}}_updateIconDebugCollisionBoxes(i,u,f,y,m,_,b){for(let N=y;N<m;N++){const D=f.get(N),S=this.getSymbolInstanceIconSize(i,u,_.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,S,D.padding,_.zOffset)}}updateCollisionDebugBuffers(i,u,f,y){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=rr(this.iconSizeData,i,y),_=rr(this.textSizeData,i,f);for(let b=0;b<this.symbolInstances.length;b++){const N=this.symbolInstances.get(b);this._updateTextDebugCollisionBoxes(_,i,u,N.textBoxStartIndex,N.textBoxEndIndex,N,f),this._updateTextDebugCollisionBoxes(_,i,u,N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,f),this._updateIconDebugCollisionBoxes(m,i,u,N.iconBoxStartIndex,N.iconBoxEndIndex,N,y),this._updateIconDebugCollisionBoxes(m,i,u,N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,y)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,u,f,y,m,_,b,N,D){const S={};if(u<f){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:Y,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re,featureIndex:pe}=i.get(u);S.textBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:Y,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re},S.textFeatureIndex=pe}if(y<m){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:Y,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re,featureIndex:pe}=i.get(y);S.verticalTextBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:Y,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re},S.verticalTextFeatureIndex=pe}if(_<b){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:Y,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re,featureIndex:pe}=i.get(_);S.iconBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:Y,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re},S.iconFeatureIndex=pe}if(N<D){const{x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:Y,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re,featureIndex:pe}=i.get(N);S.verticalIconBox={x1:V,y1:I,x2:O,y2:M,padding:B,projectedAnchorX:Y,projectedAnchorY:ee,projectedAnchorZ:ue,tileAnchorX:le,tileAnchorY:re},S.verticalIconFeatureIndex=pe}return S}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(i,u){const f=i.placedSymbolArray.get(u),y=f.vertexStartIndex+4*f.numGlyphs;for(let m=f.vertexStartIndex;m<y;m+=4)i.indexArray.emplaceBack(m,m+1,m+2),i.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),f=Math.cos(i),y=[],m=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const N=this.symbolInstances.get(b);y.push(0|Math.round(u*N.tileAnchorX+f*N.tileAnchorY)),m.push(N.featureIndex)}return _.sort((b,N)=>y[b]-y[N]||m[N]-m[b]),_}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let i=0;i<this.symbolInstances.length;++i)this.symbolInstanceIndexesSortedZOffset.push(i)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((i,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(i).zOffset)}addToSortKeyRanges(i,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex);const{rightJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:N,verticalPlacedIconSymbolIndex:D}=f;y>=0&&this.addIndicesForPlacedSymbol(this.text,y),m>=0&&m!==y&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&_!==m&&_!==y&&this.addIndicesForPlacedSymbol(this.text,_),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),N>=0&&this.addIndicesForPlacedSymbol(this.icon,N),D>=0&&this.addIndicesForPlacedSymbol(this.icon,D)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let J4,Q4,_P;xt(AS,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),AS.addDynamicAttributes=gS;class eL{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:sc,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xt(eL,"FormatSectionOverride",{omit:["defaultValue"]});const vP=()=>_P||(_P={layout:J4||(J4=new zi({"symbol-placement":new Ca(Gt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ca(Gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ca(Gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ua(Gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ca(Gt.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ca(Gt.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Ca(Gt.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Ca(Gt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ca(Gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ca(Gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ca(Gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ua(Gt.layout_symbol["icon-size"]),"icon-size-scale-range":new Ca(Gt.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ua(Gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ua(Gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ua(Gt.layout_symbol["icon-image"]),"icon-rotate":new Ua(Gt.layout_symbol["icon-rotate"]),"icon-padding":new Ca(Gt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ca(Gt.layout_symbol["icon-keep-upright"]),"icon-offset":new Ua(Gt.layout_symbol["icon-offset"]),"icon-anchor":new Ua(Gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ca(Gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ca(Gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ca(Gt.layout_symbol["text-rotation-alignment"]),"text-field":new Ua(Gt.layout_symbol["text-field"]),"text-font":new Ua(Gt.layout_symbol["text-font"]),"text-size":new Ua(Gt.layout_symbol["text-size"]),"text-size-scale-range":new Ca(Gt.layout_symbol["text-size-scale-range"]),"text-max-width":new Ua(Gt.layout_symbol["text-max-width"]),"text-line-height":new Ua(Gt.layout_symbol["text-line-height"]),"text-letter-spacing":new Ua(Gt.layout_symbol["text-letter-spacing"]),"text-justify":new Ua(Gt.layout_symbol["text-justify"]),"text-radial-offset":new Ua(Gt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ca(Gt.layout_symbol["text-variable-anchor"]),"text-anchor":new Ua(Gt.layout_symbol["text-anchor"]),"text-max-angle":new Ca(Gt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ca(Gt.layout_symbol["text-writing-mode"]),"text-rotate":new Ua(Gt.layout_symbol["text-rotate"]),"text-padding":new Ca(Gt.layout_symbol["text-padding"]),"text-keep-upright":new Ca(Gt.layout_symbol["text-keep-upright"]),"text-transform":new Ua(Gt.layout_symbol["text-transform"]),"text-offset":new Ua(Gt.layout_symbol["text-offset"]),"text-allow-overlap":new Ca(Gt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ca(Gt.layout_symbol["text-ignore-placement"]),"text-optional":new Ca(Gt.layout_symbol["text-optional"]),visibility:new Ca(Gt.layout_symbol.visibility)})),paint:Q4||(Q4=new zi({"icon-opacity":new Ua(Gt.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ua(Gt.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ua(Gt.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ua(Gt.paint_symbol["text-emissive-strength"]),"icon-color":new Ua(Gt.paint_symbol["icon-color"]),"icon-halo-color":new Ua(Gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ua(Gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ua(Gt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ca(Gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ca(Gt.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ua(Gt.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ua(Gt.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ua(Gt.paint_symbol["text-occlusion-opacity"]),"text-color":new Ua(Gt.paint_symbol["text-color"],{runtimeType:Bs,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new Ua(Gt.paint_symbol["text-halo-color"]),"text-halo-width":new Ua(Gt.paint_symbol["text-halo-width"]),"text-halo-blur":new Ua(Gt.paint_symbol["text-halo-blur"]),"text-translate":new Ca(Gt.paint_symbol["text-translate"]),"text-translate-anchor":new Ca(Gt.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Ca(Gt.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Ca(Gt.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Ca(Gt.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Ca(Gt.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ua(Gt.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},_P);class _S extends to{constructor(i,u,f,y){super(i,vP(),u,f,y),this._colorAdjustmentMatrix=ve.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=i.paint!==void 0&&("icon-occlusion-opacity"in i.paint||"text-occlusion-opacity"in i.paint)}recalculate(i,u){super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const f=this.layout.get("text-writing-mode");if(f){const y=[];for(const m of f)y.indexOf(m)<0&&y.push(m);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(i,u,f,y){return this._saturation===i&&this._contrast===u&&this._brightnessMin===f&&this._brightnessMax===y||(this._colorAdjustmentMatrix=function(m,_,b,N){m=Xt(m),_=Fs(_);const D=ve.mat4.create(),S=m/3,V=1-2*S,I=[V,S,S,0,S,V,S,0,S,S,V,0,0,0,0,1],O=.5-.5*_,M=N-b;return ve.mat4.multiply(D,[M,0,0,0,0,M,0,0,0,0,M,0,b,b,b,1],[_,0,0,0,0,_,0,0,0,0,_,0,O,O,O,1]),ve.mat4.multiply(D,D,I),D}(i,u,f,y),this._saturation=i,this._contrast=u,this._brightnessMin=f,this._brightnessMax=y),this._colorAdjustmentMatrix}getValueAndResolveTokens(i,u,f,y){const m=this.layout.get(i).evaluate(u,{},f,y),_=this._unevaluatedLayout._values[i];return _.isDataDriven()||Uh(_.value)||!m?m:function(b,N){return N.replace(/{([^{}]+)}/g,(D,S)=>S in b?String(b[S]):"")}(u.properties,m)}createBucket(i){return new AS(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of vP().paint.overridableProperties){if(!_S.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),f=new eL(u),y=new eo(f,u.property.specification,this.scope,this.options);let m=null;m=u.value.kind==="constant"||u.value.kind==="source"?new J("source",y):new he("composite",y,u.value.zoomStops,u.value._interpolationType),this.paint._values[i]=new El(u.property,m,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&_S.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const f=i.get("text-field"),y=vP().paint.properties[u];let m=!1;const _=b=>{for(const N of b)if(y.overrides&&y.overrides.hasOverride(N))return void(m=!0)};if(f.value.kind==="constant"&&f.value.value instanceof us)_(f.value.value.sections);else if(f.value.kind==="source"){const b=D=>{m||(D instanceof jl&&Gi(D.value)===du?_(D.value.sections):D instanceof vd?_(D.sections):D.eachChild(b))},N=f.value;N._styleExpression&&b(N._styleExpression.expression)}return m}getProgramIds(){return["symbol"]}getDefaultProgramParams(i,u,f){return{config:new Ku(this,{zoom:u,lut:f}),overrideFog:!1}}}let tL,aL,rL,nL;var wP=xn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function RP(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function TP(d){switch(d){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class SP{constructor(i,u,f,y){this.context=i,this.format=f,this.useMipmap=y&&y.useMipmap,this.texture=i.gl.createTexture(),this.update(u,{premultiply:y&&y.premultiply})}update(i,u){const f=i&&i instanceof HTMLVideoElement&&i.width===0?i.videoWidth:i.width,y=i&&i instanceof HTMLVideoElement&&i.height===0?i.videoHeight:i.height,{context:m}=this,{gl:_}=m,{x:b,y:N}=u&&u.position?u.position:{x:0,y:0},D=b+f,S=N+y;!this.size||this.size[0]===D&&this.size[1]===S||(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(this.texture),this.texture=_.createTexture(),this.size=null),_.bindTexture(_.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA8&&(!u||u.premultiply!==!1));const V=i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||ImageBitmap&&i instanceof ImageBitmap;if(!this.size&&D>0&&S>0){const I=this.useMipmap?Math.floor(Math.log2(Math.max(D,S)))+1:1;_.texStorage2D(_.TEXTURE_2D,I,this.format,D,S),this.size=[D,S]}if(this.size)if(V)_.texSubImage2D(_.TEXTURE_2D,0,b,N,RP(this.format),TP(this.format),i);else{const I=i.data;I&&_.texSubImage2D(_.TEXTURE_2D,0,b,N,f,y,RP(this.format),TP(this.format),I)}this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(i,u,f=!1){const{context:y}=this,{gl:m}=y;m.bindTexture(m.TEXTURE_2D,this.texture),i!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,i),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!f?i===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),u!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(i,u,f,y){const{context:m}=this,{gl:_}=m;_.bindTexture(_.TEXTURE_2D,this.texture),u!==this.magFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,u),this.magFilter=u),i!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,this.useMipmap?i===_.NEAREST?_.NEAREST_MIPMAP_NEAREST:_.LINEAR_MIPMAP_LINEAR:i),this.minFilter=i),f!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,f),this.wrapS=f),y!==this.wrapT&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,y),this.wrapT=y)}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class vS{constructor(i,u){this.context=i,this.texture=u}bind(i,u){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),i!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,i),this.minFilter=i),u!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,u),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,u),this.wrapS=u)}}function wS(d,i,u,f,y,m,_,b){const N=[d,i,1,u,f,1,y,m,1],D=[_,b,1],S=ve.mat3.adjoint([],N),[V,I,O]=ve.vec3.transformMat3(D,D,S);return ve.mat3.multiply(N,N,[V,0,0,0,I,0,0,0,O])}function iL(d,i,u,f,y,m,_,b){const N=function(D,S,V,I,O,M,B,Y){const ee=wS(0,0,1,0,1,1,0,1),ue=wS(D,S,V,I,O,M,B,Y),le=ve.mat3.adjoint([],ee);return ve.mat3.multiply(ue,ue,le)}(d,i,u,f,y,m,_,b);return[N[2]/N[8]/Na,N[5]/N[8]/Na]}function RS(d){return[d[0],Math.min(Math.max(d[1],-85.051129),Eu)]}class sL extends Gl{constructor(i,u,f,y){super(),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(y),this.options=u,this._dirty=!1}load(i,u){if(this._loaded=u||!1,this.fire(new Io("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return i&&(this.coordinates=i),this._loaded=!0,void this._finishLoading();this._imageRequest=Qd(this.map._requestManager.transformRequest(this.url,ws.Image),(f,y)=>{this._imageRequest=null,this._loaded=!0,f?this.fire(new gd(f)):y&&(this.image=y instanceof HTMLImageElement?Zt.getImageData(y):y,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}setTexture(i){if(!(i.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new vS(this.map.painter.context,i.handle),this.width=i.dimensions[0],this.height=i.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Io("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(i){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof vS||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(i){if(this.coordinates=i,this._boundsArray=void 0,this._unsupportedCoords=!1,!i.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=i[0][1],f=i[0][1];for(const m of i)m[1]>f&&(f=m[1]),m[1]<u&&(u=m[1]);const y=(f+u)/2;if(y>Eu?this.onNorthPole=!0:y<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=i.map(o.fromLngLat);this.tileID=function(_){let b=1/0,N=1/0,D=-1/0,S=-1/0;for(const B of _)b=Math.min(b,B.x),N=Math.min(N,B.y),D=Math.max(D,B.x),S=Math.max(S,B.y);const V=Math.max(D-b,S-N),I=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),O=Math.pow(2,I);let M=Math.floor((b+D)/2*O);return M>1&&(M-=1),new da(I,M,Math.floor((N+S)/2*O))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Io("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(i){for(const ee in this.tiles){const ue=this.tiles[ee];ue.state!=="loaded"&&(ue.state="loaded",ue.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=D1(new da(0,0,0),this.map.transform.projection),f=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ee){const ue=ee[1].x-ee[0].x,le=ee[1].y-ee[0].y,re=ee[2].x-ee[1].x,pe=ee[2].y-ee[1].y,Se=ee[3].x-ee[2].x,xe=ee[3].y-ee[2].y,Ke=ee[0].x-ee[3].x,Ze=ee[0].y-ee[3].y,He=ue*pe-re*le,ft=re*xe-Se*pe,Ye=Se*Ze-Ke*xe,gt=Ke*le-ue*Ze;return He>0&&ft>0&&Ye>0&&gt>0||He<0&&ft<0&&Ye<0&&gt<0}(f))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const y=D1(this.tileID,this.map.transform.projection),[m,_,b,N]=this.coordinates.map(ee=>{const ue=y.projection.project(ee[0],ee[1]);return H4(y,ue)._round()});this.perspectiveTransform=iL(m.x,m.y,_.x,_.y,b.x,b.y,N.x,N.y);const D=this._boundsArray=new Cu;D.emplaceBack(m.x,m.y,0,0),D.emplaceBack(_.x,_.y,Na,0),D.emplaceBack(N.x,N.y,0,Na),D.emplaceBack(b.x,b.y,Na,Na),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=i.createVertexBuffer(D,wP.members),this.boundsSegments=Oi.simpleSegment(0,0,4,2);const S=[],V=[RS((I=this.coordinates)[0]),RS(I[1]),RS(I[2]),RS(I[3])];var I;const[O,M,B,Y]=function(ee){let ue=ee[0][0],le=ue,re=ee[0][1],pe=re;for(let Se=1;Se<ee.length;Se++)ee[Se][0]<ue?ue=ee[Se][0]:ee[Se][0]>le&&(le=ee[Se][0]),ee[Se][1]<re?re=ee[Se][1]:ee[Se][1]>pe&&(pe=ee[Se][1]);return[ue,re,le-ue,pe-re]}(V);{const ee=new Cu,[ue,le,re,pe]=function(Et){let Ut=Et[0].x,Dt=Ut,jt=Et[0].y,ga=jt;for(let ma=1;ma<Et.length;ma++)Et[ma].x<Ut?Ut=Et[ma].x:Et[ma].x>Dt&&(Dt=Et[ma].x),Et[ma].y<jt?jt=Et[ma].y:Et[ma].y>ga&&(ga=Et[ma].y);return[Ut,jt,Dt-Ut,ga-jt]}(f),Se=Et=>[(Et.x-ue)/re,(Et.y-le)/pe],[xe,Ke,Ze,He]=f.map(Se),ft=function(Et,Ut,Dt,jt,ga,ma,Ya,xa){const Oa=wS(0,0,1,0,1,1,0,1),_a=wS(Et,Ut,Dt,jt,ga,ma,Ya,xa),gr=ve.mat3.adjoint([],_a);return ve.mat3.multiply(Oa,Oa,gr)}(xe[0],xe[1],Ke[0],Ke[1],Ze[0],Ze[1],He[0],He[1]);this.elevatedGlobePerspectiveTransform=iL(xe[0],xe[1],Ke[0],Ke[1],Ze[0],Ze[1],He[0],He[1]);const Ye=(Et,Ut)=>{S.push(Et.lng);const Dt=Math.round((Et.lng-O)/B*Na),jt=Math.round((Et.lat-M)/Y*Na),ga=Se(Ut),ma=ve.vec3.transformMat3([],[ga[0],ga[1],1],ft),Ya=Math.round(ma[0]/ma[2]*Na),xa=Math.round(ma[1]/ma[2]*Na);ee.emplaceBack(Dt,jt,Ya,xa)},gt=f[3].x-f[0].x,bt=f[3].y-f[0].y,Rt=f[2].x-f[1].x,Vt=f[2].y-f[1].y;for(let Et=0;Et<65;Et++){const Ut=Et/64,Dt=[f[0].x+Ut*gt,f[0].y+Ut*bt],jt=[f[1].x+Ut*Rt,f[1].y+Ut*Vt],ga=jt[0]-Dt[0],ma=jt[1]-Dt[1];for(let Ya=0;Ya<65;Ya++){const xa=Ya/64,Oa={x:Dt[0]+ga*xa,y:Dt[1]+ma*xa};Ye(u.projection.unproject(Oa.x,Oa.y),Oa)}}this.elevatedGlobeVertexBuffer=i.createVertexBuffer(ee,wP.members)}{this.maxLongitudeTriangleSize=0;let ee=[],ue=new Ps;const le=(re,pe,Se)=>{ue.emplaceBack(re,pe,Se);const xe=S[re],Ke=S[pe],Ze=S[Se],He=Math.min(Math.min(xe,Ke),Ze),ft=Math.max(Math.max(xe,Ke),Ze)-He;ft>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=ft),ee.push(He+ft/2)};for(let re=0;re<64;re++)for(let pe=0;pe<64;pe++){const Se=65*re+pe,xe=Se+1,Ke=Se+65,Ze=Ke+1;le(Se,Ke,xe),le(xe,Ke,Ze)}[ee,ue]=function(re,pe){const Se=Array.from({length:re.length},(Ze,He)=>He);Se.sort((Ze,He)=>re[Ze]-re[He]);const xe=[],Ke=new Ps;for(let Ze=0;Ze<Se.length;Ze++){const He=Se[Ze];xe.push(re[He]);const ft=3*He,Ye=ft+1;Ke.emplaceBack(pe.uint16[ft],pe.uint16[Ye],pe.uint16[Ye+1])}return[xe,Ke]}(ee,ue),this.elevatedGlobeTrianglesCenterLongitudes=ee,this.elevatedGlobeIndexBuffer=i.createIndexBuffer(ue)}this.elevatedGlobeSegments=Oi.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,B/Na,0,Y/Na,0,0,M,O,0])}prepare(){const i=Object.keys(this.tiles).length!==0;if(this.tileID&&!i)return;const u=this.map.painter.context,f=u.gl;!this._dirty||this.texture instanceof vS||(this.texture?this.texture.update(this.image):(this.texture=new SP(u,this.image,f.RGBA8),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),i&&this._prepareData(u)}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(i){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const f=this.elevatedGlobeTrianglesCenterLongitudes;let y=(m=i+180)+360*Math.round((f[0]-m)/360);var m;const _=new Oi,b=(V,I)=>{_.segments.push({vertexOffset:0,primitiveOffset:V,vertexLength:u.segments[0].vertexLength,primitiveLength:I,sortKey:void 0,vaos:{}})},N=.51*this.maxLongitudeTriangleSize;if(Math.abs(f[0]-y)<=N){const V=Ec(f,0,f.length,y+N);return V===f.length||b(V,ui(f,V+1,f.length,y+360-N)-V),_}y<f[0]&&(y+=360);const D=ui(f,0,f.length,y-N);if(D===f.length)return b(0,f.length),_;b(0,D-0);const S=Ec(f,D+1,f.length,y+N);return S!==f.length&&b(S,f.length-S),_}}const oQ=(Math.pow(256,2)-1)/16907520;class oL extends to{constructor(i,u,f,y){super(i,{layout:rL||(rL=new zi({visibility:new Ca(Gt.layout_raster.visibility)})),paint:nL||(nL=new zi({"raster-opacity":new Ca(Gt.paint_raster["raster-opacity"]),"raster-color":new $i(Gt.paint_raster["raster-color"]),"raster-color-mix":new Ca(Gt.paint_raster["raster-color-mix"]),"raster-color-range":new Ca(Gt.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ca(Gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ca(Gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ca(Gt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ca(Gt.paint_raster["raster-saturation"]),"raster-contrast":new Ca(Gt.paint_raster["raster-contrast"]),"raster-resampling":new Ca(Gt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ca(Gt.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Ca(Gt.paint_raster["raster-emissive-strength"]),"raster-array-band":new Ca(Gt.paint_raster["raster-array-band"]),"raster-elevation":new Ca(Gt.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},u,f,y),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(i){return!(i&&i._source instanceof sL&&(i._source.onNorthPole||i._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(i){i!=="raster-color"&&i!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(i){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[f,y]=i||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(f)&&isNaN(y)||f===this._curRampRange[0]&&y===this._curRampRange[1]||(this.colorRamp=Uy({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:f,end:y}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[f,y])}}let lL,uL,cL,dL,hL;class fL extends to{constructor(i,u,f,y){super(i,{layout:lL||(lL=new zi({visibility:new Ca(Gt["layout_raster-particle"].visibility)})),paint:uL||(uL=new zi({"raster-particle-array-band":new Ca(Gt["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Ca(Gt["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new $i(Gt["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Ca(Gt["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Ca(Gt["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Ca(Gt["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Ca(Gt["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Ca(Gt["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},u,f,y),this._updateColorRamp(),this.lastInvalidatedAt=Zt.now()}onRemove(i){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(i){return!1}_handleSpecialPaintPropertyUpdate(i){i!=="raster-particle-color"&&i!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),i==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const i=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=Uy({expression:i,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Zt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class lQ extends to{constructor(i,u){super(i,{},u,null),this.implementation=i,i.slot&&(this.slot=i.slot)}is3D(i){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(i){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}function CP(d,i,u){const f=[0,0,1],y=ve.quat.identity([]);return ve.quat.rotateY(y,y,u?-Va(d)+Math.PI:Va(d)),ve.quat.rotateX(y,y,-Va(i)),ve.vec3.transformQuat(f,f,y),ve.vec3.normalize(f,f)}function pL(d,i){const u=TS(d.projection,d.zoom,d.width,d.height),f=function(m,_,b,N,D){const S=new Ln(b.lng-180*tg,b.lat),V=new Ln(b.lng+180*tg,b.lat),I=m.project(S.lng,S.lat),O=m.project(V.lng,V.lat),M=-Math.atan2(O.y-I.y,O.x-I.x),B=o.fromLngLat(b);B.y=ka(B.y,-1+tg,1-tg);const Y=B.toLngLat(),ee=m.project(Y.lng,Y.lat),ue=o.fromLngLat(Y);ue.x+=tg;const le=ue.toLngLat(),re=m.project(le.lng,le.lat),pe=yL(re.x-ee.x,re.y-ee.y,M),Se=o.fromLngLat(Y);Se.y+=tg;const xe=Se.toLngLat(),Ke=m.project(xe.lng,xe.lat),Ze=yL(Ke.x-ee.x,Ke.y-ee.y,M),He=Math.abs(pe.x)/Math.abs(Ze.y),ft=ve.mat4.identity([]);ve.mat4.rotateZ(ft,ft,-M*(1-(D?0:N)));const Ye=ve.mat4.identity([]);return ve.mat4.scale(Ye,Ye,[1,1-(1-He)*N,1]),Ye[4]=-Ze.x/Ze.y*N,ve.mat4.rotateZ(Ye,Ye,M),ve.mat4.multiply(Ye,ft,Ye),Ye}(d.projection,0,d.center,u,i),y=mL(d);return ve.mat4.scale(f,f,[y,y,1]),f}function mL(d){const i=d.projection,u=TS(d.projection,d.zoom,d.width,d.height),f=bP(i,d.center),y=bP(i,Ln.convert(i.center));return Math.pow(2,f*u+(1-u)*y)}function TS(d,i,u,f,y=1/0){const m=d.range;if(!m)return 0;const _=Math.min(y,Math.max(u,f)),b=Math.log(_/1024)/Math.LN2;return jr(m[0]+b,m[1]+b,i)}const tg=1/4e4;function bP(d,i){const u=ka(i.lat,-85.051129,Eu),f=new Ln(i.lng-180*tg,u),y=new Ln(i.lng+180*tg,u),m=d.project(f.lng,u),_=d.project(y.lng,u),b=o.fromLngLat(f),N=o.fromLngLat(y),D=_.x-m.x,S=_.y-m.y,V=N.x-b.x,I=N.y-b.y,O=Math.sqrt((V*V+I*I)/(D*D+S*S));return Math.log(O)/Math.LN2}function yL(d,i,u){const f=Math.cos(u),y=Math.sin(u);return{x:d*f-i*y,y:d*y+i*f}}function gL(d,i,u){ve.mat4.identity(d),ve.mat4.rotateZ(d,d,Va(i[2])),ve.mat4.rotateX(d,d,Va(i[0])),ve.mat4.rotateY(d,d,Va(i[1])),ve.mat4.scale(d,d,u),ve.mat4.multiply(d,d,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function SS(d,i,u,f,y,m,_,b){const N=[u[0]-i[0],u[1]-i[1],0],D=[f[0]-i[0],f[1]-i[1],0];if(ve.vec3.length(N)<1e-12||ve.vec3.length(D)<1e-12)return ve.quat.identity(d);const S=ve.vec3.cross([],N,D);ve.vec3.normalize(S,S),ve.vec3.subtract(D,f,i),N[2]=(m-y)*b,D[2]=(_-y)*b;const V=N;return ve.vec3.cross(V,N,D),ve.vec3.normalize(V,V),ve.quat.rotationTo(d,S,V)}function xP(d,i,u=!1){const f=zl(i.zoom),y=function(m,_,b){const N=_.worldSize,D=[m[12],m[13],m[14]],S=wi(D[1]/N),V=Pu(D[0]/N),I=ve.mat4.identity([]),O=Go(1,S)*N,M=Go(1,0)*N*qh(S,_.zoom),B=1/Tc(N);let Y=M*B;if(b){const re=TS(_.projection,_.zoom,_.width,_.height,1024);Y=B*_.projection.pixelSpaceConversion(_.center.lat,N,re)}const ee=Rc(S,V);ve.vec3.add(ee,ee,ve.vec3.scale([],ve.vec3.normalize([],ee),O*Y*D[2]));const ue=function(re){const pe=[re[0],re[1],re[2]];let Se=[0,1,0];const xe=ve.vec3.cross([],Se,pe);return ve.vec3.cross(Se,pe,xe),ve.vec3.squaredLength(Se)===0&&(Se=[0,1,0],ve.vec3.cross(xe,pe,Se)),ve.vec3.normalize(xe,xe),ve.vec3.normalize(Se,Se),ve.vec3.normalize(pe,pe),[xe[0],xe[1],xe[2],0,Se[0],Se[1],Se[2],0,pe[0],pe[1],pe[2],0,re[0],re[1],re[2],1]}(ee);ve.mat4.scale(I,I,[Y,Y,Y*O]),ve.mat4.translate(I,I,[-D[0],-D[1],-D[2]]);const le=ve.mat4.multiply([],_.globeMatrix,ue);return ve.mat4.multiply(le,le,I),ve.mat4.multiply(le,le,m),le}(d,i,u);if(f>0){const m=function(_,b){const N=b.worldSize,D=Go(1,0)*N*qh(b.center.lat,b.zoom)/Tc(N),S=Go(1,b.center.lat)*N,V=ve.mat4.identity([]);return ve.mat4.rotateY(V,V,Va(b.center.lng)),ve.mat4.rotateX(V,V,Va(b.center.lat)),ve.mat4.translate(V,V,[0,0,ml]),ve.mat4.scale(V,V,[D,D,D*S]),ve.mat4.translate(V,V,[b.point.x-.5*N,b.point.y-.5*N,0]),ve.mat4.multiply(V,V,_),ve.mat4.multiply(V,b.globeMatrix,V)}(d,i);return function(_,b,N){const D=(M,B,Y)=>{const ee=ve.vec3.length(M),ue=ve.vec3.length(B),le=ao(M,B,Y);return ve.vec3.scale(le,le,1/ve.vec3.length(le)*hr(ee,ue,Y))},S=D([_[0],_[1],_[2]],[b[0],b[1],b[2]],N),V=D([_[4],_[5],_[6]],[b[4],b[5],b[6]],N),I=D([_[8],_[9],_[10]],[b[8],b[9],b[10]],N),O=ao([_[12],_[13],_[14]],[b[12],b[13],b[14]],N);return[S[0],S[1],S[2],0,V[0],V[1],V[2],0,I[0],I[1],I[2],0,O[0],O[1],O[2],1]}(y,m,f)}return y}function AL(d,i,u,f){const y=er.projectAabbCorners(f,u);let m=Number.MAX_VALUE,_=-1;for(let D=0;D<y.length;++D){const S=y[D];S[0]=(.5*S[0]+.5)*i.width,S[1]=(.5-.5*S[1])*i.height,S[2]<m&&(_=D,m=S[2])}const b=D=>new Bt(y[D][0],y[D][1]);let N;switch(_){case 0:case 6:N=[b(1),b(5),b(4),b(7),b(3),b(2),b(1)];break;case 1:case 7:N=[b(0),b(4),b(5),b(6),b(2),b(3),b(0)];break;case 3:case 5:N=[b(1),b(0),b(4),b(7),b(6),b(2),b(1)];break;default:N=[b(1),b(5),b(6),b(7),b(3),b(0),b(1)]}if(Ce(d,N))return m}const uQ=xn([{name:"a_pos_3f",components:3,type:"Float32"}]),cQ=xn([{name:"a_color_3f",components:3,type:"Float32"}]),dQ=xn([{name:"a_color_4f",components:4,type:"Float32"}]),hQ=xn([{name:"a_uv_2f",components:2,type:"Float32"}]),fQ=xn([{name:"a_normal_3f",components:3,type:"Float32"}]),pQ=xn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),mQ=xn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),_L={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class CS{constructor(i,u,f,y){this.message=(i?`${i}: `:"")+f,y&&(this.identifier=y),u!=null&&u.__line__&&(this.line=u.__line__)}}function vL(d,i){const u=d.indexOf("://")===-1;try{return new URL(d,u&&i?"http://example.com":void 0),!0}catch{return!1}}class wL{constructor(i,u){this.feature=i,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class RL{constructor(){this.instancedDataArray=new Um,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class PP{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=i.projection,this.index=i.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(i,u){}populate(i,u,f,y){this.tileToMeter=g(f);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:_,id:b,index:N,sourceLayerIndex:D}of i){const S=b??(_.properties&&_.properties.hasOwnProperty("id")?_.properties.id:void 0),V=K(_,m);if(!this.layers[0]._featureFilter.filter(new vn(this.zoom),V,f))continue;const I={id:S,sourceLayerIndex:D,index:N,geometry:m?V.geometry:Z(_,f,y),properties:_.properties,type:_.type,patterns:{}},O=this.addFeature(I,I.geometry,V);O&&u.featureIndex.insert(_,I.geometry,N,D,this.index,this.instancesPerModel[O].instancedDataArray.length,Na/32)}this.lookup=null}update(i,u,f,y){for(const m in this.instancesPerModel){const _=this.instancesPerModel[m];for(const b in i)_.idToFeaturesIndex.hasOwnProperty(b)&&(this.evaluate(_.features[_.idToFeaturesIndex[b]],i[b],_,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let i=!1;for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];for(const y of f.features){const m=this.layers[0],_=y.feature,b=this.canonical,N=m.paint.get("model-rotation").evaluate(_,{},b),D=m.paint.get("model-scale").evaluate(_,{},b),S=m.paint.get("model-translation").evaluate(_,{},b);ve.vec3.exactEquals(y.rotation,N)&&ve.vec3.exactEquals(y.scale,D)&&ve.vec3.exactEquals(y.translation,S)||(this.evaluate(y,y.featureStates,f,!0),i=!0)}}return i}updateReplacement(i,u,f,y){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const m=u.getReplacementRegionsForTile(i.toUnwrapped(),!0);if(B0(this.activeReplacements,m))return!1;this.activeReplacements=m;let _=!1;for(const b in this.instancesPerModel){const N=this.instancesPerModel[b],D=N.instancedDataArray;for(const S of N.features){const V=S.instancedDataOffset,I=S.instancedDataCount;for(let O=0;O<I;O++){const M=16*(O+V);let B=D.float32[M+0];const Y=B>Na;B=Y?B-Na:B;const ee=Math.floor(B),ue=D.float32[M+1];let le=!1;for(const re of this.activeReplacements)if(!Nf(re,f,_L.Model,y)&&!(re.min.x>ee||ee>re.max.x||re.min.y>ue||ue>re.max.y)&&(le=KT($T(ee,ue,i.canonical,re.footprintTileId.canonical),re.footprint),le))break;D.float32[M]=le?B+Na:B,_=_||le!==Y}}}return _}isEmpty(){for(const i in this.instancesPerModel)if(this.instancesPerModel[i].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(i){if(!this.uploaded)for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length<0||f.instancedDataArray.length===0||(f.instancedDataBuffer?f.instancedDataBuffer.updateData(f.instancedDataArray):f.instancedDataBuffer=i.createVertexBuffer(f.instancedDataArray,pQ.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const f=this.instancesPerModel[u];f.instancedDataArray.length!==0&&f.instancedDataBuffer&&f.instancedDataBuffer.destroy()}const i=this.layers[0].modelManager;if(i&&this.modelUris)for(const u of this.modelUris)i.removeModel(u,"")}addFeature(i,u,f){const y=this.layers[0],m=y.layout.get("model-id").evaluate(f,{},this.canonical);if(!m)return en(`modelId is not evaluated for layer ${y.id} and it is not going to get rendered.`),m;vL(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new RL);const _=this.instancesPerModel[m],b=_.instancedDataArray,N=new wL(f,b.length);for(const D of u)for(const S of D){if(S.x<0||S.x>=Na||S.y<0||S.y>=Na)continue;const V=(this.lookupDim-1)/Na,I=this.lookupDim*(S.y*V|0)+S.x*V|0;if(this.lookup){if(this.lookup[I]!==0)continue;this.lookup[I]=1}this.instanceCount++;const O=b.length;b.resize(O+1),_.instancesEvaluatedElevation.push(0),b.float32[16*O]=S.x,b.float32[16*O+1]=S.y}return N.instancedDataCount=_.instancedDataArray.length-N.instancedDataOffset,N.instancedDataCount>0&&(i.id&&(_.idToFeaturesIndex[i.id]=_.features.length),_.features.push(N),this.evaluate(N,{},_,!1)),m}getModelUris(){return this.modelUris}evaluate(i,u,f,y){const m=this.layers[0],_=i.feature,b=this.canonical,N=i.rotation=m.paint.get("model-rotation").evaluate(_,u,b),D=i.scale=m.paint.get("model-scale").evaluate(_,u,b),S=i.translation=m.paint.get("model-translation").evaluate(_,u,b),V=m.paint.get("model-color").evaluate(_,u,b);V.a=m.paint.get("model-color-mix-intensity").evaluate(_,u,b);const I=[];this.maxVerticalOffset<S[2]&&(this.maxVerticalOffset=S[2]),this.maxScale=Math.max(Math.max(this.maxScale,D[0]),Math.max(D[1],D[2])),gL(I,N,D);const O=Math.round(100*V.a)+V.b/1.05;for(let M=0;M<i.instancedDataCount;++M){const B=i.instancedDataOffset+M,Y=16*B,ee=f.instancedDataArray.float32;let ue=0;y&&(ue=ee[Y+6]-f.instancesEvaluatedElevation[B]);const le=0|ee[Y+1];ee[Y]=(0|ee[Y])+V.r/1.05,ee[Y+1]=le+V.g/1.05,ee[Y+2]=O,ee[Y+3]=1/(b.z>10?this.tileToMeter:g(b,le)),ee[Y+4]=S[0],ee[Y+5]=S[1],ee[Y+6]=S[2]+ue,ee[Y+7]=I[0],ee[Y+8]=I[1],ee[Y+9]=I[2],ee[Y+10]=I[4],ee[Y+11]=I[5],ee[Y+12]=I[6],ee[Y+13]=I[8],ee[Y+14]=I[9],ee[Y+15]=I[10],f.instancesEvaluatedElevation[B]=S[2]}}}let TL,SL;xt(PP,"ModelBucket",{omit:["layers"]}),xt(RL,"PerModelAttributes"),xt(wL,"ModelFeature");const vA=64,Q0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function CL(d,i,u,f,y,m,_,b,N,D=!1){const S=u.zoom,V=u.project(f),I=qh(f.lat,S),O=1/I;ve.mat4.identity(d),ve.mat4.translate(d,d,[V.x+_[0]*O,V.y+_[1]*O,_[2]]);let M=1,B=1;const Y=u.worldSize;if(D){if(u.projection.name==="mercator"){let re=0;u.elevation&&(re=u.elevation.getAtPointOrZero(new o(V.x/Y,V.y/Y),0));const pe=ve.vec4.transformMat4([],[V.x,V.y,re,1],u.projMatrix)[3]/u.cameraToCenterDistance;M=pe,B=pe*qh(u.center.lat,S)}else if(u.projection.name==="globe"){const re=xP(d,u),pe=ve.mat4.multiply([],u.projMatrix,re),Se=[0,0,0,1];ve.vec4.transformMat4(Se,Se,pe);const xe=Se[3]/u.cameraToCenterDistance,Ke=zl(S),Ze=u.projection.pixelsPerMeter(f.lat,Y)*qh(f.lat,S),He=u.projection.pixelsPerMeter(u.center.lat,Y)*qh(u.center.lat,S);M=xe/hr(Ze,tA(u.center.lat),Ke),B=xe*I/Ze,M*=He,B*=He}}else M=O;ve.mat4.scale(d,d,[M,M,B]);const ee=[...d],ue=i.orientation,le=[];if(gL(le,[ue[0]+y[0],ue[1]+y[1],ue[2]+y[2]],m),ve.mat4.multiply(d,ee,le),b&&u.elevation){let re=0;const pe=[];if(N&&u.elevation){re=function(Ke,Ze,He,ft,Ye){const gt=Ze.elevation;if(!gt)return 0;const bt=er.projectAabbCorners(He,ft),Rt=Go(1,Ye.lat)*Ze.worldSize,Vt=function(gr,$a){const or=[0,0,1],Or=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Jr of Or){const Ur=gr[Jr.corners[0]],cn=gr[Jr.corners[1]],Xr=gr[Jr.corners[2]],wn=[cn[0]-Ur[0],cn[1]-Ur[1],$a*(cn[2]-Ur[2])],Hn=ve.vec3.cross(wn,wn,[Xr[0]-Ur[0],Xr[1]-Ur[1],$a*(Xr[2]-Ur[2])]);ve.vec3.normalize(Hn,Hn),Jr.dotProductWithUp=ve.vec3.dot(Hn,or)}return Or.sort((Jr,Ur)=>Jr.dotProductWithUp-Ur.dotProductWithUp),Or[0].corners}(bt,Rt),Et=bt[Vt[0]],Ut=bt[Vt[1]],Dt=bt[Vt[2]],jt=bt[Vt[3]],ga=gt.getAtPointOrZero(new o(Et[0]/Ze.worldSize,Et[1]/Ze.worldSize),0),ma=gt.getAtPointOrZero(new o(Ut[0]/Ze.worldSize,Ut[1]/Ze.worldSize),0),Ya=gt.getAtPointOrZero(new o(Dt[0]/Ze.worldSize,Dt[1]/Ze.worldSize),0),xa=gt.getAtPointOrZero(new o(jt[0]/Ze.worldSize,jt[1]/Ze.worldSize),0),Oa=(ga+xa)/2,_a=(ma+Ya)/2;return Oa>_a?ma<Ya?SS(Ke,Ut,jt,Et,ma,xa,ga,Rt):SS(Ke,Dt,Et,jt,Ya,ga,xa,Rt):ga<xa?SS(Ke,Et,Ut,Dt,ga,ma,Ya,Rt):SS(Ke,jt,Dt,Ut,xa,Ya,ma,Rt),Math.max(Oa,_a)}(pe,u,i.aabb,d,f);const Se=ve.mat4.fromQuat([],pe),xe=ve.mat4.multiply([],Se,le);ve.mat4.multiply(d,ee,xe)}else re=u.elevation.getAtPointOrZero(new o(V.x/Y,V.y/Y),0);re!==0&&(d[14]+=re)}}function U1(d,i,u=!1){d.uploaded||(d.gfxTexture=new SP(i,d.image,u?i.gl.R8:i.gl.RGBA8,{useMipmap:d.sampler.minFilter>=i.gl.NEAREST_MIPMAP_NEAREST}),d.uploaded=!0,d.image=null)}function yQ(d,i,u){d.indexBuffer=i.createIndexBuffer(d.indexArray,!1,!0),d.vertexBuffer=i.createVertexBuffer(d.vertexArray,uQ.members,!1,!0),d.normalArray&&(d.normalBuffer=i.createVertexBuffer(d.normalArray,fQ.members,!1,!0)),d.texcoordArray&&(d.texcoordBuffer=i.createVertexBuffer(d.texcoordArray,hQ.members,!1,!0)),d.colorArray&&(d.colorBuffer=i.createVertexBuffer(d.colorArray,(d.colorArray.bytesPerElement===12?cQ:dQ).members,!1,!0)),d.featureArray&&(d.pbrBuffer=i.createVertexBuffer(d.featureArray,mQ.members,!0)),d.segments=Oi.simpleSegment(0,0,d.vertexArray.length,d.indexArray.length);const f=d.material;f.pbrMetallicRoughness.baseColorTexture&&U1(f.pbrMetallicRoughness.baseColorTexture,i),f.pbrMetallicRoughness.metallicRoughnessTexture&&U1(f.pbrMetallicRoughness.metallicRoughnessTexture,i),f.normalTexture&&U1(f.normalTexture,i),f.occlusionTexture&&U1(f.occlusionTexture,i,u),f.emissionTexture&&U1(f.emissionTexture,i)}function EP(d,i,u){if(d.meshes)for(const f of d.meshes)yQ(f,i,u);if(d.children)for(const f of d.children)EP(f,i,u)}function bS(d){if(d.meshes)for(const i of d.meshes)i.indexArray.destroy(),i.vertexArray.destroy(),i.colorArray&&i.colorArray.destroy(),i.normalArray&&i.normalArray.destroy(),i.texcoordArray&&i.texcoordArray.destroy(),i.featureArray&&i.featureArray.destroy();if(d.children)for(const i of d.children)bS(i)}function NP(d){if(d.meshes)for(const u of d.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((i=u.material).pbrMetallicRoughness.baseColorTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture&&i.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),i.pbrMetallicRoughness.metallicRoughnessTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&i.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),i.normalTexture&&i.normalTexture.gfxTexture&&i.normalTexture.gfxTexture.destroy(),i.emissionTexture&&i.emissionTexture.gfxTexture&&i.emissionTexture.gfxTexture.destroy(),i.occlusionTexture&&i.occlusionTexture.gfxTexture&&i.occlusionTexture.gfxTexture.destroy()));var i;if(d.children)for(const u of d.children)NP(u)}class e_{constructor(i,u,f){this._demTile=i,this._dem=this._demTile.dem,this._scale=u,this._offset=f}static create(i,u,f){const y=f||i.findDEMTileFor(u);if(!y||!y.dem)return;const m=y.dem,_=y.tileID,b=1<<u.canonical.z-_.canonical.z;return new e_(y,m.dim/Na/b,[(u.canonical.x/b-_.canonical.x)*m.dim,(u.canonical.y/b-_.canonical.y)*m.dim])}tileCoordToPixel(i,u){const f=u*this._scale+this._offset[1],y=Math.floor(i*this._scale+this._offset[0]),m=Math.floor(f);return new Bt(y,m)}getElevationAt(i,u,f,y){const m=i*this._scale+this._offset[0],_=u*this._scale+this._offset[1],b=Math.floor(m),N=Math.floor(_),D=this._dem;return y=!!y,f?hr(hr(D.get(b,N,y),D.get(b,N+1,y),_-N),hr(D.get(b+1,N,y),D.get(b+1,N+1,y),_-N),m-b):D.get(b,N,y)}getElevationAtPixel(i,u,f){return this._dem.get(i,u,!!f)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*Go(1,i)*this._dem.stride}}const VP=new Float32Array(262144),wA=new Uint8Array(262144);function bL(d){let i=0;if(d.meshes)for(const u of d.meshes)i=Math.max(i,u.aabb.max[2]);if(d.children)for(const u of d.children)i=Math.max(i,bL(u));return i}function xL(d,i,u){if(d.meshes)for(const f of d.meshes){if(f.aabb.min[0]===1/0)continue;const y=er.applyTransform(f.aabb,d.matrix);u.insert(i,y.min[0],y.min[1],y.max[0],y.max[1])}if(d.children)for(const f of d.children)xL(f,i,u)}const PL=["","wall","door","roof","window","lamp","logo"];class EL{constructor(i){this.node=i,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:i.id,geometry:[],properties:{height:bL(i)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new er([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let i=0;const u=new er([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const f of this.node.meshes)this.node.lightMeshIndex!==i&&(f.transformedAabb=er.applyTransformFast(f.aabb,this.node.matrix),u.encapsulate(f.transformedAabb)),i++;this.aabb=u}return this.aabb}}class xS{constructor(i,u,f,y,m,_,b){this.id=f,this.layers=i,this.layerIds=this.layers.map(N=>N.fqid),this.stateDependentLayerIds=this.layers.filter(N=>N.isStateDependent()).map(N=>N.id),this.modelTraits|=Q0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,y&&(this.modelTraits|=Q0.HasMapboxMeshFeatures),m&&(this.modelTraits|=Q0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=_,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const N of u)this.nodesInfo.push(new EL(N)),xL(N,b.featureIndexArray.length,b.grid),b.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,b.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(i,u){for(const f of this.getNodesInfo()){const y=f.node;y.footprint&&u.push({footprint:y.footprint,id:i})}}update(i){const u=Object.keys(i).length!==0;if(u&&!this.stateDependentLayers.length)return;const f=u?this.stateDependentLayers:this.layers;if(!la(i,this.states))for(const y of f)this.evaluate(y,i);this.states=structuredClone(i)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(i){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const f of u){const y=f.node;this.uploaded?this.updatePbrBuffer(y):EP(y,i,!0)}for(const f of u)bS(f.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(i){let u=!1;if(!i.meshes)return u;for(const f of i.meshes)f.pbrBuffer&&(f.pbrBuffer.updateData(f.featureArray),u=!0);return u}needsReEvaluation(i,u,f){const y=i.transform.projectionOptions,m=i.style.getBrightness(),_=this.brightness!==m;if(!this.uploaded||this.dirty||y.name!==this.projection.name||k1(f.paint.get("model-color").value,_)||k1(f.paint.get("model-color-mix-intensity").value,_)||k1(f.paint.get("model-roughness").value,_)||k1(f.paint.get("model-emissive-strength").value,_)||k1(f.paint.get("model-height-based-emissive-strength-multiplier").value,_)){this.projection=y,this.brightness=m;const b=this.getNodesInfo();for(const N of b)N.state=null;return!0}return!1}evaluateScale(i,u){if(i.transform.zoom===this.zoom)return;this.zoom=i.transform.zoom;const f=this.getNodesInfo(),y=this.id.canonical;for(const m of f){const _=m.feature;m.evaluatedScale=u.paint.get("model-scale").evaluate(_,{},y)}}evaluate(i,u){const f=this.getNodesInfo();for(const y of f){if(!y.node.meshes)continue;const m=y.feature,_=u&&u[m.id];if(la(_,y.state))continue;y.state=structuredClone(_);const b=y.node.meshes&&y.node.meshes[0].featureData,N=y.evaluatedColor[2],D=y.evaluatedRMEA[2],S=this.id.canonical;if(y.hasTranslucentParts=!1,b){for(let V=0;V<PL.length;V++){const I=PL[V];I.length&&(m.properties.part=I);const O=i.paint.get("model-color").evaluate(m,_,S).toRenderColor(null),M=i.paint.get("model-color-mix-intensity").evaluate(m,_,S);y.evaluatedColor[V]=[O.r,O.g,O.b,M],y.evaluatedRMEA[V][0]=i.paint.get("model-roughness").evaluate(m,_,S),y.evaluatedRMEA[V][2]=i.paint.get("model-emissive-strength").evaluate(m,_,S),y.evaluatedRMEA[V][3]=O.a,y.emissionHeightBasedParams[V]=i.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,_,S),!y.hasTranslucentParts&&O.a<1&&(y.hasTranslucentParts=!0)}delete m.properties.part,AQ(y,N!==y.evaluatedColor[2]||D!==y.evaluatedRMEA[2],this.modelTraits)}else y.evaluatedRMEA[0][2]=i.paint.get("model-emissive-strength").evaluate(m,_,S);y.evaluatedScale=i.paint.get("model-scale").evaluate(m,_,S),this.updatePbrBuffer(y.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(i,u,f,y){const m=i.findDEMTileFor(f);if(m&&(m.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const _=e_.create(i,f,m);if(!_)return;this.modelTraits&Q0.HasMapboxMeshFeatures&&this.updateDEM(i,_,f,y);for(const b of this.getNodesInfo()){const N=b.node;if(!N.footprint||!N.footprint.vertices||!N.footprint.vertices.length)continue;const D=N.footprint.vertices;let S=_.getElevationAt(D[0].x,D[0].y,!0,!0);for(let V=1;V<D.length;V++)S=Math.min(S,_.getElevationAt(D[V].x,D[V].y,!0,!0));N.elevation=S}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=u}}updateDEM(i,u,f,y){let m=u._dem._modifiedForSources[y];if(m===void 0&&(u._dem._modifiedForSources[y]=[],m=u._dem._modifiedForSources[y]),m.includes(f.canonical))return;const _=u._dem.dim;m.push(f.canonical);let b=!1;for(const N of this.getNodesInfo()){const D=N.node;if(!D.footprint||!D.footprint.grid)continue;const S=D.footprint.grid,V=u.tileCoordToPixel(S.min.x,S.min.y),I=u.tileCoordToPixel(S.max.x,S.max.y),O=Math.min(Math.min(_-I.y,V.x),Math.min(V.y,_-I.x));if(O<0)continue;const M=ka(O,2,5);let B=Math.max(0,V.x-M),Y=Math.max(0,V.y-M),ee=Math.min(I.x+M,_-1),ue=Math.min(I.y+M,_-1);for(let Se=Y;Se<=ue;++Se)for(let xe=B;xe<=ee;++xe)wA[Se*_+xe]=255;let le=0,re=0;for(let Se=0;Se<S.cellsY;++Se)for(let xe=0;xe<S.cellsX;++xe){if(!S.cells[Se*S.cellsX+xe])continue;const Ke=u.tileCoordToPixel(S.min.x+xe/S.xScale,S.min.y+Se/S.yScale),Ze=u.tileCoordToPixel(S.min.x+(xe+1)/S.xScale,S.min.y+(Se+1)/S.yScale);for(let He=Ke.y;He<=Math.min(Ze.y+1,_-1);++He)for(let ft=Ke.x;ft<=Math.min(Ze.x+1,_-1);++ft)wA[He*_+ft]===255&&(wA[He*_+ft]=0,le+=u.getElevationAtPixel(ft,He),re++)}const pe=le/re;B=Math.max(1,V.x-M),Y=Math.max(1,V.y-M),ee=Math.min(I.x+M,_-2),ue=Math.min(I.y+M,_-2),b=!0;for(let Se=Y;Se<=ue;++Se)for(let xe=B;xe<=ee;++xe)wA[Se*_+xe]===0&&(VP[Se*_+xe]=u._dem.set(xe,Se,pe));for(let Se=1;Se<M;++Se){B=Math.max(1,V.x-Se),Y=Math.max(1,V.y-Se),ee=Math.min(I.x+Se,_-2),ue=Math.min(I.y+Se,_-2);for(let xe=Y;xe<=ue;++xe)for(let Ke=B;Ke<=ee;++Ke){const Ze=xe*_+Ke;if(wA[Ze]===255){let He=0,ft=0,Ye=-1,gt=-1;for(let bt=-1;bt<=1;++bt)for(let Rt=-1;Rt<=1;++Rt){const Vt=(xe+bt)*_+Ke+Rt;if(wA[Vt]>=Se)continue;const Et=VP[Vt],Ut=Math.abs(Et);Ut>ft&&(He=Et,ft=Ut,Ye=Rt,gt=bt)}if(ft>.1){const bt=1-(Se+.5*Math.abs(Ye*gt))/M;let Rt=u._dem.get(Ke,xe)+He*bt;const Vt=u._dem.get(Ke+Ye,xe+gt),Et=u._dem.get(Ke-Ye,xe-gt,!0);(Rt-Vt)*(Rt-Et)>0&&(Rt=(Vt+Et)/2),VP[Ze]=u._dem.set(Ke,xe,Rt),wA[Ze]=Se}}}}}b&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=Zt.now())}setFilter(i){this.filter=i?lh(i):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(i=>this.filter.filter(new vn(this.id.overscaledZ),i.feature,this.id.canonical)):this.nodesInfo}destroy(){const i=this.getNodesInfo();for(const u of i)bS(u.node),NP(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(i,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const f=u.getReplacementRegionsForTile(i.toUnwrapped()),y=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const _=y[m].node;y[m].hiddenByReplacement=!!_.footprint&&!f.find(b=>b.footprint===_.footprint)}}getHeightAtTileCoord(i,u){const f=this.getNodesInfo(),y=[],m=[0,0,0],_=ve.mat4.identity([]);for(let b=0;b<this.nodesInfo.length;b++){const N=f[b],D=N.node.meshes[0],S=D.transformedAabb;if(i<S.min[0]||u<S.min[1]||i>S.max[0]||u>S.max[1])continue;if(N.node.hidden===!0)return{height:1/0,maxHeight:N.feature.properties.height,hidden:!1,verticalScale:N.evaluatedScale[2]};ve.mat4.invert(_,N.node.matrix),m[0]=i,m[1]=u,ve.vec3.transformMat4(m,m,_);const V=(m[0]-D.aabb.min[0])/(D.aabb.max[0]-D.aabb.min[0])*vA|0,I=Math.min(63,(m[1]-D.aabb.min[1])/(D.aabb.max[1]-D.aabb.min[1])*vA|0)*vA+Math.min(63,V),O=D.heightmap[I];if(!(O<0&&N.node.footprint))return N.hiddenByReplacement?void 0:{height:O,maxHeight:N.feature.properties.height,hidden:!1,verticalScale:N.evaluatedScale[2]};if(N.node.footprint.grid.query(new Bt(i,u),new Bt(i,u),y),y.length>0)return{height:void 0,maxHeight:N.feature.properties.height,hidden:N.hiddenByReplacement,verticalScale:N.evaluatedScale[2]}}}}function k1(d,i){return!d.isLightConstant&&i}function gQ(d,i,u,f,y,m,_,b){let N=(61440&i|(61440&i)>>4)>>8,D=(3840&i|(3840&i)>>4)>>4,S=240&i|(240&i)>>4;u[3]>0&&(N=hr(N,255*u[0],u[3]),D=hr(D,255*u[1],u[3]),S=hr(S,255*u[2],u[3]));const V=N<<8|D,I=S<<8|Math.floor(255*f[3]),O=function(Se){const xe=ka(Se,0,2);return Math.min(Math.round(.5*xe*255),255)}(f[2])<<8|15*f[0]<<4|15*f[1],M=ka(y[0],0,1),B=ka(y[1],0,1),Y=ka(y[2],0,1),ee=ka(y[3],0,1);let ue,le,re,pe;if(M!==B&&_!==m&&B!==M){const Se=_-m;le=1/(Se*(B-M)),re=-(m+Se*M)/(Se*(B-M));const xe=ka(y[4],-1,1);pe=Math.pow(10,xe),ue=255*Y<<8|255*ee}else ue=65535,le=0,re=1,pe=1;if(d.emplaceBack(V,I,O,ue,le,re,pe),b){const Se=b.length;b.clear();for(let xe=0;xe<Se;xe++)b.emplaceBack(V,I,O,ue,le,re,pe)}}function AQ(d,i,u){const f=d.node;let y=0;const m=u&Q0.HasMeshoptCompression;for(const _ of f.meshes){if(f.lights&&f.lightMeshIndex===y||!_.featureData)continue;_.featureArray=new Gp,_.featureArray.reserve(_.featureData.length);let b=i;for(const N of _.featureData){const D=m?65535&N:N>>16&65535,S=m?N>>16&65535:65535&N,V=(15&S)<8?15&S:0,I=d.evaluatedRMEA[V],O=d.evaluatedColor[V],M=d.emissionHeightBasedParams[V];let B;if(b&&V===2&&f.lights&&(B=new Gp,B.resize(10*f.lights.length)),gQ(_.featureArray,D,O,I,M,_.aabb.min[2],_.aabb.max[2],B),B&&b){b=!1;const Y=f.meshes[f.lightMeshIndex];Y.featureArray=B,Y.featureArray._trim()}}_.featureArray._trim(),y++}}function NL(d,i,u,f){const y=1<<d.z;i.lat=wi((f/Na+d.y)/y),i.lng=Pu((u/Na+d.x)/y)}xt(xS,"Tiled3dModelBucket",{omit:["layers"]}),xt(EL,"Tiled3dModelFeature");const _Q={circle:class extends to{constructor(d,i,u,f){super(d,{layout:Mt||(Mt=new zi({"circle-sort-key":new Ua(Gt.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Ca(Gt.layout_circle["circle-elevation-reference"]),visibility:new Ca(Gt.layout_circle.visibility)})),paint:ia||(ia=new zi({"circle-radius":new Ua(Gt.paint_circle["circle-radius"]),"circle-color":new Ua(Gt.paint_circle["circle-color"]),"circle-blur":new Ua(Gt.paint_circle["circle-blur"]),"circle-opacity":new Ua(Gt.paint_circle["circle-opacity"]),"circle-translate":new Ca(Gt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ca(Gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ca(Gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ca(Gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ua(Gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ua(Gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ua(Gt.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ca(Gt.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}createBucket(d){return new ce(d)}queryRadius(d){const i=d;return Lt("circle-radius",this,i)+Lt("circle-stroke-width",this,i)+aa(this.paint.get("circle-translate"))}queryIntersectsFeature(d,i,u,f,y,m,_,b){const N=Sa(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(i,u)+this.paint.get("circle-stroke-width").evaluate(i,u);return Wp(d,f,m,_,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",N,D)}getProgramIds(){return["circle"]}getDefaultProgramParams(d,i,u){const f=op(this);return{config:new Ku(this,{zoom:i,lut:u}),defines:f,overrideFog:!1}}},heatmap:class extends to{createBucket(d){return new x0(d)}constructor(d,i,u,f){super(d,{layout:jm||(jm=new zi({visibility:new Ca(Gt.layout_heatmap.visibility)})),paint:Kv||(Kv=new zi({"heatmap-radius":new Ua(Gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ua(Gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ca(Gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $i(Gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ca(Gt.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Uy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(d){return Lt("heatmap-radius",this,d)}queryIntersectsFeature(d,i,u,f,y,m,_,b){const N=this.paint.get("heatmap-radius").evaluate(i,u);return Wp(d,f,m,_,b,!0,!0,new Bt(0,0),N)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(d,i,u){return d==="heatmap"?{config:new Ku(this,{zoom:i,lut:u}),overrideFog:!1}:{}}},hillshade:class extends to{constructor(d,i,u,f){super(d,{layout:Wv||(Wv=new zi({visibility:new Ca(Gt.layout_hillshade.visibility)})),paint:Yv||(Yv=new zi({"hillshade-illumination-direction":new Ca(Gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ca(Gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ca(Gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ca(Gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ca(Gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ca(Gt.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ca(Gt.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(d,i,u){return{overrideFog:!1}}},fill:class extends to{constructor(d,i,u,f){super(d,{layout:i1||(i1=new zi({"fill-sort-key":new Ua(Gt.layout_fill["fill-sort-key"]),visibility:new Ca(Gt.layout_fill.visibility),"fill-elevation-reference":new Ca(Gt.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Ua(Gt.layout_fill["fill-construct-bridge-guard-rail"])})),paint:s1||(s1=new zi({"fill-antialias":new Ca(Gt.paint_fill["fill-antialias"]),"fill-opacity":new Ua(Gt.paint_fill["fill-opacity"]),"fill-color":new Ua(Gt.paint_fill["fill-color"]),"fill-outline-color":new Ua(Gt.paint_fill["fill-outline-color"]),"fill-translate":new Ca(Gt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ca(Gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ua(Gt.paint_fill["fill-pattern"]),"fill-emissive-strength":new Ca(Gt.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ua(Gt.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Ua(Gt.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Ua(Gt.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}getProgramIds(){const d=this.paint.get("fill-pattern"),i=d&&d.constantOr(1),u=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(d,i,u){return{config:new Ku(this,{zoom:i,lut:u}),overrideFog:!1}}recalculate(d,i){super.recalculate(d,i);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(d){return new Hy(d)}queryRadius(){return aa(this.paint.get("fill-translate"))}queryIntersectsFeature(d,i,u,f,y,m){return!d.queryGeometry.isAboveHorizon&&Pe(ua(d.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),f)}isTileClipped(){return this.paint.get("fill-z-offset").constantOr(1)===0}is3D(d){if(this.paint.get("fill-z-offset").constantOr(1)!==0)return!0;const i=this.layout&&this.layout.get("fill-elevation-reference")!=="none";return d!=null?i&&!d:i}},"fill-extrusion":class extends to{constructor(d,i,u,f){super(d,{layout:q0||(q0=new zi({visibility:new Ca(Gt["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ca(Gt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:w1||(w1=new zi({"fill-extrusion-opacity":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ua(Gt["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Ca(Gt["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new G0(d)}queryRadius(){return aa(this.paint.get("fill-extrusion-translate"))}is3D(d){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(d,i,u,f,y,m,_,b,N){const D=Sa(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),S=this.paint.get("fill-extrusion-height").evaluate(i,u),V=this.paint.get("fill-extrusion-base").evaluate(i,u),I=[0,0],O=b&&m.elevation,M=m.elevation?m.elevation.exaggeration():1,B=d.tile.getBucket(this);if(O&&B instanceof G0){const re=B.centroidVertexArray,pe=N+1;pe<re.length&&(I[0]=re.geta_centroid_pos0(pe),I[1]=re.geta_centroid_pos1(pe))}if(I[0]===0&&I[1]===1)return!1;m.projection.name==="globe"&&(f=v1([f],[new Bt(0,0),new Bt(Na,Na)],d.tileID.canonical).map(re=>re.polygon).flat());const Y=O?b:null,[ee,ue]=function(re,pe,Se,xe,Ke,Ze,He,ft,Ye,gt,bt){return re.projection.name==="globe"?function(Rt,Vt,Et,Ut,Dt,jt,ga,ma,Ya,xa,Oa){const _a=[],gr=[],$a=Rt.projection.upVectorScale(Oa,Rt.center.lat,Rt.worldSize).metersToTile,or=[0,0,0,1],Or=[0,0,0,1],Jr=(cn,Xr,wn,Hn)=>{cn[0]=Xr,cn[1]=wn,cn[2]=Hn,cn[3]=1},Ur=_1();Et>0&&(Et+=Ur),Ut+=Ur;for(const cn of Vt){const Xr=[],wn=[];for(const Hn of cn){const Pi=Hn.x+Dt.x,Ir=Hn.y+Dt.y,En=Rt.projection.projectTilePoint(Pi,Ir,Oa),Wi=Rt.projection.upVector(Oa,Hn.x,Hn.y);let os=Et,ys=Ut;if(ga){const Ns=tS(Pi,Ir,Et,Ut,ga,ma,Ya,xa);os+=Ns.base,ys+=Ns.top}Et!==0?Jr(or,En.x+Wi[0]*$a*os,En.y+Wi[1]*$a*os,En.z+Wi[2]*$a*os):Jr(or,En.x,En.y,En.z),Jr(Or,En.x+Wi[0]*$a*ys,En.y+Wi[1]*$a*ys,En.z+Wi[2]*$a*ys),ve.vec3.transformMat4(or,or,jt),ve.vec3.transformMat4(Or,Or,jt),Xr.push(new Nu(or[0],or[1],or[2])),wn.push(new Nu(Or[0],Or[1],Or[2]))}_a.push(Xr),gr.push(wn)}return[_a,gr]}(re,pe,Se,xe,Ke,Ze,He,ft,Ye,gt,bt):He?function(Rt,Vt,Et,Ut,Dt,jt,ga,ma,Ya){const xa=[],Oa=[],_a=[0,0,0,1];for(const gr of Rt){const $a=[],or=[];for(const Or of gr){const Jr=Or.x+Ut.x,Ur=Or.y+Ut.y,cn=tS(Jr,Ur,Vt,Et,jt,ga,ma,Ya);_a[0]=Jr,_a[1]=Ur,_a[2]=cn.base,_a[3]=1,ve.vec4.transformMat4(_a,_a,Dt),_a[3]=Math.max(_a[3],1e-5);const Xr=new Nu(_a[0]/_a[3],_a[1]/_a[3],_a[2]/_a[3]);_a[0]=Jr,_a[1]=Ur,_a[2]=cn.top,_a[3]=1,ve.vec4.transformMat4(_a,_a,Dt),_a[3]=Math.max(_a[3],1e-5);const wn=new Nu(_a[0]/_a[3],_a[1]/_a[3],_a[2]/_a[3]);$a.push(Xr),or.push(wn)}xa.push($a),Oa.push(or)}return[xa,Oa]}(pe,Se,xe,Ke,Ze,He,ft,Ye,gt):function(Rt,Vt,Et,Ut,Dt){const jt=[],ga=[],ma=Dt[8]*Vt,Ya=Dt[9]*Vt,xa=Dt[10]*Vt,Oa=Dt[11]*Vt,_a=Dt[8]*Et,gr=Dt[9]*Et,$a=Dt[10]*Et,or=Dt[11]*Et;for(const Or of Rt){const Jr=[],Ur=[];for(const cn of Or){const Xr=cn.x+Ut.x,wn=cn.y+Ut.y,Hn=Dt[0]*Xr+Dt[4]*wn+Dt[12],Pi=Dt[1]*Xr+Dt[5]*wn+Dt[13],Ir=Dt[2]*Xr+Dt[6]*wn+Dt[14],En=Dt[3]*Xr+Dt[7]*wn+Dt[15],Wi=Hn+ma,os=Pi+Ya,ys=Ir+xa,Ns=Math.max(En+Oa,1e-5),Ti=Hn+_a,ol=Pi+gr,Sc=Ir+$a,Ao=Math.max(En+or,1e-5);Jr.push(new Nu(Wi/Ns,os/Ns,ys/Ns)),Ur.push(new Nu(Ti/Ao,ol/Ao,Sc/Ao))}jt.push(Jr),ga.push(Ur)}return[jt,ga]}(pe,Se,xe,Ke,Ze)}(m,f,V,S,D,_,Y,I,M,m.center.lat,d.tileID.canonical),le=d.queryGeometry;return function(re,pe,Se){let xe=1/0;Pe(Se,pe)&&(xe=eS(Se,pe[0]));for(let Ke=0;Ke<pe.length;Ke++){const Ze=pe[Ke],He=re[Ke];for(let ft=0;ft<Ze.length-1;ft++){const Ye=Ze[ft],gt=[Ye,Ze[ft+1],He[ft+1],He[ft],Ye];Ce(Se,gt)&&(xe=Math.min(xe,eS(Se,gt)))}}return xe!==1/0&&xe}(ee,ue,le.isPointQuery()?le.screenBounds:le.screenGeometry)}},line:class extends to{constructor(d,i,u,f){const y=N1();super(d,y,i,u,f),y.layout&&(this.layout=new Ru(y.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(d){if(d==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Yl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(d,i){super.recalculate(d,i),this.paint._values["line-floorwidth"]=(()=>{if(Wm)return Wm;const u=N1();return Wm=new gA(u.paint.properties["line-width"].specification),Wm.useIntegerZoom=!0,Wm})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)}createBucket(d){return new Vf(d)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(d,i,u){const f=nS(this);return{config:new Ku(this,{zoom:i,lut:u}),defines:f,overrideFog:!1}}queryRadius(d){const i=d,u=AA(Lt("line-width",this,i),Lt("line-gap-width",this,i)),f=Lt("line-offset",this,i);return u/2+Math.abs(f)+aa(this.paint.get("line-translate"))}queryIntersectsFeature(d,i,u,f,y,m){if(d.queryGeometry.isAboveHorizon)return!1;const _=ua(d.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,d.pixelToTileUnitsFactor),b=d.pixelToTileUnitsFactor/2*AA(this.paint.get("line-width").evaluate(i,u),this.paint.get("line-gap-width").evaluate(i,u)),N=this.paint.get("line-offset").evaluate(i,u);return N&&(f=function(D,S){const V=[],I=new Bt(0,0);for(let O=0;O<D.length;O++){const M=D[O],B=[];for(let Y=0;Y<M.length;Y++){const ee=M[Y],ue=M[Y+1],le=Y===0?I:ee.sub(M[Y-1])._unit()._perp(),re=Y===M.length-1?I:ue.sub(ee)._unit()._perp(),pe=le._add(re)._unit();pe._mult(1/(pe.x*re.x+pe.y*re.y)),B.push(pe._mult(S)._add(ee))}V.push(B)}return V}(f,N*d.pixelToTileUnitsFactor)),function(D,S,V){for(let I=0;I<S.length;I++){const O=S[I];if(D.length>=3){for(let M=0;M<O.length;M++)if(it(D,O[M]))return!0}if(Ne(D,O,V))return!0}return!1}(_,f,b)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(d){return!this.hasElevatedBuckets}},symbol:_S,background:class extends to{constructor(d,i,u,f){super(d,{layout:tL||(tL=new zi({visibility:new Ca(Gt.layout_background.visibility)})),paint:aL||(aL=new zi({"background-pitch-alignment":new Ca(Gt.paint_background["background-pitch-alignment"]),"background-color":new Ca(Gt.paint_background["background-color"]),"background-pattern":new Ca(Gt.paint_background["background-pattern"]),"background-opacity":new Ca(Gt.paint_background["background-opacity"]),"background-emissive-strength":new Ca(Gt.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(d,i,u){return{overrideFog:!1}}is3D(d){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:oL,"raster-particle":fL,sky:class extends to{constructor(d,i,u,f){super(d,{layout:cL||(cL=new zi({visibility:new Ca(Gt.layout_sky.visibility)})),paint:dL||(dL=new zi({"sky-type":new Ca(Gt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ca(Gt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ca(Gt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ca(Gt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ca(Gt.paint_sky["sky-gradient-radius"]),"sky-gradient":new $i(Gt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ca(Gt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ca(Gt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ca(Gt.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(d){d==="sky-gradient"?this._updateColorRamp():d!=="sky-atmosphere-sun"&&d!=="sky-atmosphere-halo-color"&&d!=="sky-atmosphere-color"&&d!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Uy({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(d){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=d.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(d,i){if(this.paint.get("sky-type")==="atmosphere"){const f=this.paint.get("sky-atmosphere-sun"),y=!f,m=d.style.light,_=m.properties.get("position");return y&&m.properties.get("anchor")==="viewport"&&en("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),y?CP(_.azimuthal,90-_.polar,i):CP(f[0],90-f[1],i)}const u=this.paint.get("sky-gradient-center");return CP(u[0],90-u[1],i)}isSky(){return!0}markSkyboxValid(d){this._skyboxInvalidated=!1,this._lightPosition=d.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const d=this.paint.get("sky-type");return d==="atmosphere"?["skyboxCapture","skybox"]:d==="gradient"?["skyboxGradient"]:null}},slot:class extends to{constructor(d,i,u,f){super(d,{paint:hL||(hL=new zi({}))},i,null)}},model:class extends to{constructor(d,i,u,f){super(d,{layout:TL||(TL=new zi({visibility:new Ca(Gt.layout_model.visibility),"model-id":new Ua(Gt.layout_model["model-id"])})),paint:SL||(SL=new zi({"model-opacity":new Ua(Gt.paint_model["model-opacity"]),"model-rotation":new Ua(Gt.paint_model["model-rotation"]),"model-scale":new Ua(Gt.paint_model["model-scale"]),"model-translation":new Ua(Gt.paint_model["model-translation"]),"model-color":new Ua(Gt.paint_model["model-color"]),"model-color-mix-intensity":new Ua(Gt.paint_model["model-color-mix-intensity"]),"model-type":new Ca(Gt.paint_model["model-type"]),"model-cast-shadows":new Ca(Gt.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ca(Gt.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ca(Gt.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ua(Gt.paint_model["model-emissive-strength"]),"model-roughness":new Ua(Gt.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ua(Gt.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ca(Gt.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Ca(Gt.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ua({type:"string",default:"default","property-type":"data-driven"})}))},i,u,f),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(d){return new PP(d)}getProgramIds(){return["model"]}is3D(d){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(d){return d instanceof xS?Na-1:0}queryIntersectsFeature(d,i,u,f,y,m){if(!this.modelManager)return!1;const _=this.modelManager,b=d.tile.getBucket(this);if(!(b&&b instanceof PP))return!1;for(const N in b.instancesPerModel){const D=b.instancesPerModel[N],S=i.id!==void 0?i.id:i.properties&&i.properties.hasOwnProperty("id")?i.properties.id:void 0;if(D.idToFeaturesIndex.hasOwnProperty(S)){const V=D.features[D.idToFeaturesIndex[S]],I=_.getModel(N,this.scope);if(!I)return!1;let O=ve.mat4.create();const M=new Ln(0,0),B=b.canonical;let Y=Number.MAX_VALUE;for(let ee=0;ee<V.instancedDataCount;++ee){const ue=16*(V.instancedDataOffset+ee),le=D.instancedDataArray.float32,re=[le[ue+4],le[ue+5],le[ue+6]];NL(B,M,le[ue],0|le[ue+1]),CL(O,I,m,M,V.rotation,V.scale,re,!1,!1,!1),m.projection.name==="globe"&&(O=xP(O,m));const pe=ve.mat4.multiply([],m.projMatrix,O),Se=d.queryGeometry,xe=AL(Se.isPointQuery()?Se.screenBounds:Se.screenGeometry,m,pe,I.aabb);xe!=null&&(Y=Math.min(xe,Y))}return Y!==Number.MAX_VALUE&&Y}}return!1}_handleOverridablePaintPropertyUpdate(d,i,u){return!(!this.layout||i.isDataDriven()||u.isDataDriven()||d!=="model-color"&&d!=="model-color-mix-intensity"&&d!=="model-rotation"&&d!=="model-scale"&&d!=="model-translation"&&d!=="model-emissive-strength")}_isPropertyZoomDependent(d){const i=this._transitionablePaint._values[d];return i!=null&&i.value!=null&&i.value.expression!=null&&i.value.expression instanceof he}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends to{constructor(d,i,u,f){super(d,{layout:F0||(F0=new zi({"clip-layer-types":new Ca(Gt.layout_clip["clip-layer-types"]),"clip-layer-scope":new Ca(Gt.layout_clip["clip-layer-scope"])})),paint:U0||(U0=new zi({}))},i,u,f)}recalculate(d,i){super.recalculate(d,i)}createBucket(d){return new BT(d)}is3D(d){return!0}}};class vQ{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class wQ{constructor(){this.tasks={},this.taskQueue=[],Qa(["process"],this),this.invoker=new vQ(this.process),this.nextId=0}add(i,u){const f=this.nextId++,y=function({type:m,isSymbolTile:_,zoom:b}){return b=b||0,m==="message"?0:m!=="maybePrepare"||_?m!=="parseTile"||_?m==="parseTile"&&_?300-b:m==="maybePrepare"&&_?400-b:500:200-b:100-b}(u);if(y===0){try{i()}finally{}return null}return this.tasks[f]={fn:i,metadata:u,priority:y,id:f},this.taskQueue.push(f),this.invoker.trigger(),{cancel:()=>{delete this.tasks[f]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(f=>!!this.tasks[f]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const u=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let i=null,u=1/0;for(let y=0;y<this.taskQueue.length;y++){const m=this.tasks[this.taskQueue[y]];m.priority<u&&(u=m.priority,i=y)}if(i===null)return null;const f=this.taskQueue[i];return this.taskQueue.splice(i,1),f}remove(){this.invoker.remove()}}class VL{constructor(i,u,f){this.target=i,this.parent=u,this.mapId=f,this.callbacks={},this.cancelCallbacks={},Qa(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new wQ}send(i,u,f,y,m=!1,_){const b=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(f.metadata=_,this.callbacks[b]=f);const N=new Set;return this.target.postMessage({id:b,type:i,hasCallback:!!f,targetMapId:y,mustQueue:m,sourceMapId:this.mapId,data:wa(u,N)},N),{cancel:()=>{f&&delete this.callbacks[b],this.target.postMessage({id:b,type:"<cancel>",targetMapId:y,sourceMapId:this.mapId})}}}receive(i){const u=i.data;if(!u)return;const f=u.id;if(f&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const y=this.cancelCallbacks[f];delete this.cancelCallbacks[f],y&&y.cancel()}else if(u.mustQueue||Ji()){const y=this.callbacks[f],m=this.scheduler.add(()=>this.processTask(f,u),y&&y.metadata||{type:"message"});m&&(this.cancelCallbacks[f]=m)}else this.processTask(f,u)}processTask(i,u){if(delete this.cancelCallbacks[i],u.type==="<response>"){const f=this.callbacks[i];delete this.callbacks[i],f&&(u.error?f(fa(u.error)):f(null,fa(u.data)))}else{const f=new Set,y=u.hasCallback?(_,b)=>{this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:_?wa(_):null,data:wa(b,f)},f)}:()=>{},m=fa(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,m,y);else if(this.parent.getWorkerSource){const _=u.type.split(".");this.parent.getWorkerSource(u.sourceMapId,_[0],m.source,m.scope)[_[1]](m,y)}else y(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var B1={workerUrl:"",workerClass:null,workerParams:void 0};const zP="mapboxgl_preloaded_worker_pool";class RA{constructor(){this.active={}}acquire(i,u=RA.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(B1.workerClass!=null?new B1.workerClass:new self.Worker(B1.workerUrl,B1.workerParams));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zP]}numActive(){return Object.keys(this.active).length}}RA.workerCount=2;class t_{constructor(i,u,f="Worker",y=RA.workerCount){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=Wa();const m=this.workerPool.acquire(this.id,y);for(let _=0;_<m.length;_++){const b=new t_.Actor(m[_],u,this.id);b.name=`${f} ${_}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,u,f){Dn(this.actors,(y,m)=>{y.send(i,u,m)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}let G1,OP;function PS(){return G1||(G1=new RA),G1}t_.Actor=VL;const DP=new bn(0,0,0);var MP=(d=>(d[d.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",d[d.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",d[d.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",d))(MP||{}),ES=(d=>(d[d.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",d[d.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",d[d.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",d[d.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",d))(ES||{}),j1=(d=>(d[d.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",d[d.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",d[d.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",d[d.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",d[d.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",d))(j1||{}),zL=(d=>(d[d.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",d[d.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",d[d.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",d))(zL||{}),a_=(d=>(d[d.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",d[d.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",d[d.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",d[d.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",d[d.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",d[d.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",d))(a_||{}),OL=(d=>(d[d.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",d[d.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",d[d.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",d))(OL||{});function RQ(d,i,u){d===1&&i.icons.push(function(f,y){return function(m){if(m.usvg_tree.height||(m.usvg_tree.height=m.usvg_tree.width),!m.metadata)return m;const{metadata:_}=m;if(_.content_area){const{content_area:b}=_;b.top==null&&(b.top=b.left),b.width==null&&(b.width=m.usvg_tree.width),b.height==null&&(b.height=b.width)}return _.stretch_x&&_.stretch_x.length&&DL(_,"x"),_.stretch_y&&_.stretch_y.length&&DL(_,"y"),m}(f.readFields(TQ,{name:void 0},y))}(u,u.readVarint()+u.pos))}function DL(d,i){const u=[],f=d[`stretch_${i}`];let y=null;for(let m=0;m<f.length;m++)y===null?y=u.length===0?f[0]:u[u.length-1][1]+f[m]:(u.push([y,y+f[m]]),y=null);d[`stretch_${i}_areas`]=u}function TQ(d,i,u){d===1?i.name=u.readString():d===2?i.metadata=function(f,y){return f.readFields(SQ,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},y)}(u,u.readVarint()+u.pos):d===3&&(i.usvg_tree=function(f,y){return f.readFields(xQ,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},y)}(u,u.readVarint()+u.pos),i.data="usvg_tree")}function SQ(d,i,u){d===1?i.stretch_x=u.readPackedVarint():d===2?i.stretch_y=u.readPackedVarint():d===3?i.content_area=function(f,y){return f.readFields(CQ,{left:0},y)}(u,u.readVarint()+u.pos):d===4&&i.variables.push(function(f,y){return f.readFields(bQ,{name:void 0},y)}(u,u.readVarint()+u.pos))}function CQ(d,i,u){d===1?i.left=u.readVarint():d===2?i.width=u.readVarint():d===3?i.top=u.readVarint():d===4&&(i.height=u.readVarint())}function bQ(d,i,u){d===1?i.name=u.readString():d===2&&(i.rgb_color=zS(u.readVarint()),i.value="rgb_color")}function xQ(d,i,u){d===1?i.width=i.height=u.readVarint():d===2?i.height=u.readVarint():d===3?i.children.push(NS(u,u.readVarint()+u.pos)):d===4?i.linear_gradients.push(function(f,y){return f.readFields(DQ,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},y)}(u,u.readVarint()+u.pos)):d===5?i.radial_gradients.push(function(f,y){return f.readFields(IQ,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},y)}(u,u.readVarint()+u.pos)):d===7?i.clip_paths.push(function(f,y){return f.readFields(LQ,{children:[]},y)}(u,u.readVarint()+u.pos)):d===8&&i.masks.push(function(f,y){const m=f.readFields(FQ,{left:0,width:20,mask_type:1,children:[]},y);return m.height==null&&(m.height=m.width),m.top==null&&(m.top=m.left),m}(u,u.readVarint()+u.pos))}function NS(d,i){return d.readFields(PQ,{},i)}function PQ(d,i,u){d===1?(i.group=function(f,y){return f.readFields(EQ,{opacity:255,children:[]},y)}(u,u.readVarint()+u.pos),i.node="group"):d===2&&(i.path=function(f,y){return f.readFields(VQ,{paint_order:1,commands:[],step:1,diffs:[],rule:1},y)}(u,u.readVarint()+u.pos),i.node="path")}function EQ(d,i,u){d===1?i.transform=VS(u,u.readVarint()+u.pos):d===2?i.opacity=u.readVarint():d===5?i.clip_path_idx=u.readVarint():d===6?i.mask_idx=u.readVarint():d===7&&i.children.push(NS(u,u.readVarint()+u.pos))}function VS(d,i){return d.readFields(NQ,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},i)}function NQ(d,i,u){d===1?i.sx=u.readFloat():d===2?i.ky=u.readFloat():d===3?i.kx=u.readFloat():d===4?i.sy=u.readFloat():d===5?i.tx=u.readFloat():d===6&&(i.ty=u.readFloat())}function VQ(d,i,u){d===1?i.fill=function(f,y){return f.readFields(zQ,{rgb_color:DP,paint:"rgb_color",opacity:255},y)}(u,u.readVarint()+u.pos):d===2?i.stroke=function(f,y){return f.readFields(OQ,{rgb_color:DP,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},y)}(u,u.readVarint()+u.pos):d===3?i.paint_order=u.readVarint():d===5?u.readPackedVarint(i.commands):d===6?i.step=u.readFloat():d===7?u.readPackedSVarint(i.diffs):d===8&&(i.rule=u.readVarint())}function zQ(d,i,u){d===1?(i.rgb_color=zS(u.readVarint()),i.paint="rgb_color"):d===2?(i.linear_gradient_idx=u.readVarint(),i.paint="linear_gradient_idx"):d===3?(i.radial_gradient_idx=u.readVarint(),i.paint="radial_gradient_idx"):d===5&&(i.opacity=u.readVarint())}function zS(d){return new bn((d>>16&255)/255,(d>>8&255)/255,(255&d)/255,1)}function OQ(d,i,u){d===1?(i.rgb_color=zS(u.readVarint()),i.paint="rgb_color"):d===2?(i.linear_gradient_idx=u.readVarint(),i.paint="linear_gradient_idx"):d===3?(i.radial_gradient_idx=u.readVarint(),i.paint="radial_gradient_idx"):d===5?u.readPackedFloat(i.dasharray):d===6?i.dashoffset=u.readFloat():d===7?i.miterlimit=u.readFloat():d===8?i.opacity=u.readVarint():d===9?i.width=u.readFloat():d===10?i.linecap=u.readVarint():d===11&&(i.linejoin=u.readVarint())}function DQ(d,i,u){d===1?i.transform=VS(u,u.readVarint()+u.pos):d===2?i.spread_method=u.readVarint():d===3?i.stops.push(ML(u,u.readVarint()+u.pos)):d===4?i.x1=u.readFloat():d===5?i.y1=u.readFloat():d===6?i.x2=u.readFloat():d===7&&(i.y2=u.readFloat())}function ML(d,i){return d.readFields(MQ,{offset:0,opacity:255,rgb_color:DP},i)}function MQ(d,i,u){d===1?i.offset=u.readFloat():d===2?i.opacity=u.readVarint():d===3&&(i.rgb_color=zS(u.readVarint()))}function IQ(d,i,u){d===1?i.transform=VS(u,u.readVarint()+u.pos):d===2?i.spread_method=u.readVarint():d===3?i.stops.push(ML(u,u.readVarint()+u.pos)):d===4?i.cx=u.readFloat():d===5?i.cy=u.readFloat():d===6?i.r=u.readFloat():d===7?i.fx=u.readFloat():d===8?i.fy=u.readFloat():d===9&&(i.fr=u.readFloat())}function LQ(d,i,u){d===1?i.transform=VS(u,u.readVarint()+u.pos):d===2?i.clip_path_idx=u.readVarint():d===3&&i.children.push(NS(u,u.readVarint()+u.pos))}function FQ(d,i,u){d===1?i.left=i.top=u.readFloat():d===2?i.width=i.height=u.readFloat():d===3?i.top=u.readFloat():d===4?i.height=u.readFloat():d===5?i.mask_type=u.readVarint():d===6?i.mask_idx=u.readVarint():d===7&&i.children.push(NS(u,u.readVarint()+u.pos))}class UQ{static calculate(i={},u=[]){const f=new Map,y=new Map;if(Object.keys(i).length===0)return f;u.forEach(m=>{y.set(m.name,m.rgb_color||new bn(0,0,0))});for(const[m,_]of Object.entries(i))y.has(m)?f.set(y.get(m).toStringPremultipliedAlpha(),_):console.warn(`Ignoring unknown image variable "${m}"`);return f}}function r_(d,i=255,u){const f=i/255,y=d.toStringPremultipliedAlpha(),m=u.has(y)?u.get(y).clone():d.clone();return m.a*=f,m.toString()}function Z1(d,i){if(!Ht()){const u=document.createElement("canvas");return u.width=d,u.height=i,u}return new OffscreenCanvas(d,i)}function kQ(d,i){const u=UQ.calculate(i.params,d.metadata?d.metadata.variables:[]),f=d.usvg_tree,y=f.width,m=f.height,_=i.transform?i.transform:new DOMMatrix,b=Math.max(1,Math.round(y*_.a)),N=Math.max(1,Math.round(m*_.d)),D=new DOMMatrix([b/y,0,0,N/m,0,0]),S=Z1(b,N).getContext("2d");return IP(S,D,f,f,u),S.getImageData(0,0,b,N)}function IP(d,i,u,f,y){for(const m of f.children)IL(d,i,u,m,y)}function IL(d,i,u,f,y){f.group?(d.save(),function(m,_,b,N,D){const S=N.mask_idx!=null?b.masks[N.mask_idx]:null,V=N.clip_path_idx!=null?b.clip_paths[N.clip_path_idx]:null;if(N.transform&&(_=OS(N.transform).preMultiplySelf(_)),!function(M,B,Y){return M.opacity!==255||B||Y}(N,V!=null,S!=null))return void IP(m,_,b,N,D);const I=Z1(m.canvas.width,m.canvas.height),O=I.getContext("2d");IP(O,_,b,N,D),V&&jL(O,_,b,V),S&&ZL(O,_,b,S,D),m.globalAlpha=N.opacity/255,m.drawImage(I,0,0)}(d,i,u,f.group,y),d.restore()):f.path&&(d.save(),function(m,_,b,N,D){const S=qL(N);m.setTransform(_),N.paint_order===zL.PAINT_ORDER_FILL_AND_STROKE?(LL(m,b,N,S,D),UL(m,b,N,S,D)):(UL(m,b,N,S,D),LL(m,b,N,S,D))}(d,i,u,f.path,y),d.restore())}function LL(d,i,u,f,y){const m=u.fill;if(!m)return;const _=m.opacity/255;switch(m.paint){case"rgb_color":d.fillStyle=r_(m.rgb_color,m.opacity,y);break;case"linear_gradient_idx":d.fillStyle=kL(d,i.linear_gradients[m.linear_gradient_idx],_,y);break;case"radial_gradient_idx":d.fillStyle=BL(d,i.radial_gradients[m.radial_gradient_idx],_,y)}d.fill(f,FL(u))}function FL(d){return d.rule===MP.PATH_RULE_NON_ZERO?"nonzero":d.rule===MP.PATH_RULE_EVEN_ODD?"evenodd":void 0}function UL(d,i,u,f,y){const m=u.stroke;if(!m)return;d.lineWidth=m.width,d.miterLimit=m.miterlimit,d.setLineDash(m.dasharray),d.lineDashOffset=m.dashoffset;const _=m.opacity/255;switch(m.paint){case"rgb_color":d.strokeStyle=r_(m.rgb_color,m.opacity,y);break;case"linear_gradient_idx":d.strokeStyle=kL(d,i.linear_gradients[m.linear_gradient_idx],_,y);break;case"radial_gradient_idx":d.strokeStyle=BL(d,i.radial_gradients[m.radial_gradient_idx],_,y)}switch(m.linejoin){case j1.LINE_JOIN_MITER_CLIP:case j1.LINE_JOIN_MITER:d.lineJoin="miter";break;case j1.LINE_JOIN_ROUND:d.lineJoin="round";break;case j1.LINE_JOIN_BEVEL:d.lineJoin="bevel"}switch(m.linecap){case ES.LINE_CAP_BUTT:d.lineCap="butt";break;case ES.LINE_CAP_ROUND:d.lineCap="round";break;case ES.LINE_CAP_SQUARE:d.lineCap="square"}d.stroke(f)}function kL(d,i,u,f){if(i.stops.length===1){const I=i.stops[0];return r_(I.rgb_color,I.opacity*u,f)}const y=OS(i.transform),{x1:m,y1:_,x2:b,y2:N}=i,D=y.transformPoint(new DOMPoint(m,_)),S=y.transformPoint(new DOMPoint(b,N)),V=d.createLinearGradient(D.x,D.y,S.x,S.y);for(const I of i.stops)V.addColorStop(I.offset,r_(I.rgb_color,I.opacity*u,f));return V}function BL(d,i,u,f){if(i.stops.length===1){const I=i.stops[0];return r_(I.rgb_color,I.opacity*u,f)}const y=OS(i.transform),{fx:m,fy:_,cx:b,cy:N}=i,D=y.transformPoint(new DOMPoint(m,_)),S=y.transformPoint(new DOMPoint(b,N)),V=d.createRadialGradient(D.x,D.y,0,S.x,S.y,i.r*((y.a+y.d)/2));for(const I of i.stops)V.addColorStop(I.offset,r_(I.rgb_color,I.opacity*u,f));return V}function GL(d,i,u,f){const y=f.transform?OS(f.transform).preMultiplySelf(i):i,m=Z1(d.canvas.width,d.canvas.height),_=m.getContext("2d");for(const N of f.children)if(N.group)GL(_,y,u,N.group);else if(N.path){const D=N.path,S=new Path2D;S.addPath(qL(D),y),_.fill(S,FL(D))}const b=f.clip_path_idx!=null?u.clip_paths[f.clip_path_idx]:null;b&&jL(_,y,u,b),d.globalCompositeOperation="source-over",d.drawImage(m,0,0)}function jL(d,i,u,f){const y=Z1(d.canvas.width,d.canvas.height);GL(y.getContext("2d"),i,u,f),d.globalCompositeOperation="destination-in",d.drawImage(y,0,0)}function ZL(d,i,u,f,y){if(f.children.length===0)return;const m=f.mask_idx!=null?u.masks[f.mask_idx]:null;m&&ZL(d,i,u,m,y);const _=d.canvas.width,b=d.canvas.height,N=Z1(_,b),D=N.getContext("2d"),S=f.width,V=f.height,I=f.left,O=f.top,M=new Path2D,B=new Path2D;B.rect(I,O,S,V),M.addPath(B,i),D.clip(M);for(const ue of f.children)IL(D,i,u,ue,y);const Y=D.getImageData(0,0,_,b),ee=Y.data;if(f.mask_type===OL.MASK_TYPE_LUMINANCE)for(let ue=0;ue<ee.length;ue+=4)ee[ue+3]=ee[ue+3]/255*(.2126*ee[ue]+.7152*ee[ue+1]+.0722*ee[ue+2]);D.putImageData(Y,0,0),d.globalCompositeOperation="destination-in",d.drawImage(N,0,0)}function OS(d){return d?new DOMMatrix([d.sx,d.ky,d.kx,d.sy,d.tx,d.ty]):new DOMMatrix}function qL(d){const i=new Path2D,u=d.step;let f=d.diffs[0]*u,y=d.diffs[1]*u;i.moveTo(f,y);for(let m=0,_=2;m<d.commands.length;m++)switch(d.commands[m]){case a_.PATH_COMMAND_MOVE:f+=d.diffs[_++]*u,y+=d.diffs[_++]*u,i.moveTo(f,y);break;case a_.PATH_COMMAND_LINE:f+=d.diffs[_++]*u,y+=d.diffs[_++]*u,i.lineTo(f,y);break;case a_.PATH_COMMAND_QUAD:{const b=f+d.diffs[_++]*u,N=y+d.diffs[_++]*u;f=b+d.diffs[_++]*u,y=N+d.diffs[_++]*u,i.quadraticCurveTo(b,N,f,y);break}case a_.PATH_COMMAND_CUBIC:{const b=f+d.diffs[_++]*u,N=y+d.diffs[_++]*u,D=b+d.diffs[_++]*u,S=N+d.diffs[_++]*u;f=D+d.diffs[_++]*u,y=S+d.diffs[_++]*u,i.bezierCurveTo(b,N,D,S,f,y);break}case a_.PATH_COMMAND_CLOSE:i.closePath()}return i}class DS{constructor(i){this.capacity=i,this.cache=new Map}get(i){if(!this.cache.has(i))return;const u=this.cache.get(i);return this.cache.delete(i),this.cache.set(i,u),u}put(i,u){this.cache.has(i)?this.cache.delete(i):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(i,u)}delete(i){this.cache.delete(i)}}xt(DS,"LRUCache");class LP{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(i){return new Al(i,i.data)}getFromCache(i,u,f){return this.cacheMap.has(f)||this.cacheMap.set(f,new DS(150)),this.cacheMap.get(f).get($c(i.toString(),u))}setInCache(i,u,f,y){this.cacheDependenciesMap.has(y)||this.cacheDependenciesMap.set(y,new Map),this.cacheMap.has(y)||this.cacheMap.set(y,new DS(150));const m=this.cacheDependenciesMap.get(y),_=$c(i.id.toString(),f);m.get(_)||m.set(_,new Set);const b=this.cacheMap.get(y),N=i.toString();m.get(_).add(N),b.put($c(i.toString(),f),u)}removeImagesFromCacheByIds(i,u,f=0){if(!this.cacheMap.has(f)||!this.cacheDependenciesMap.has(f))return;const y=this.cacheMap.get(f),m=this.cacheDependenciesMap.get(f);for(const _ of i){const b=$c(_.toString(),u);if(m.has(b)){for(const N of m.get(b))y.delete(N);m.delete(b)}}}rasterize(i,u,f,y,m=kQ){const _=this.getFromCache(i,f,y);if(_)return _.clone();const b=m(u.icon,i.options),N=LP._getImage(b);return this.setInCache(i,N,f,y),N.clone()}}class HL{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,u){const f=this.toIdx(i,u);return{min:this.minimums[f],max:this.maximums[f]}}isLeaf(i,u){return this.leaves[this.toIdx(i,u)]}toIdx(i,u){return u*this.size+i}}function $L(d,i,u,f){let y=0,m=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(f[_])<1e-15){if(u[_]<d[_]||u[_]>i[_])return null}else{const b=1/f[_];let N=(d[_]-u[_])*b,D=(i[_]-u[_])*b;if(N>D){const S=N;N=D,D=S}if(N>y&&(y=N),D<m&&(m=D),y>m)return null}return y}function KL(d,i,u,f,y,m,_,b,N,D,S){const V=f-d,I=y-i,O=m-u,M=_-d,B=b-i,Y=N-u,ee=S[1]*Y-S[2]*B,ue=S[2]*M-S[0]*Y,le=S[0]*B-S[1]*M,re=V*ee+I*ue+O*le;if(Math.abs(re)<1e-15)return null;const pe=1/re,Se=D[0]-d,xe=D[1]-i,Ke=D[2]-u,Ze=(Se*ee+xe*ue+Ke*le)*pe;if(Ze<0||Ze>1)return null;const He=xe*O-Ke*I,ft=Ke*V-Se*O,Ye=Se*I-xe*V,gt=(S[0]*He+S[1]*ft+S[2]*Ye)*pe;return gt<0||Ze+gt>1?null:(M*He+B*ft+Y*Ye)*pe}function WL(d,i,u){return(d-i)/(u-i)}function YL(d,i,u,f,y,m,_,b,N){const D=1<<u,S=m-f,V=_-y,I=(d+1)/D*S+f,O=(i+0)/D*V+y,M=(i+1)/D*V+y;b[0]=(d+0)/D*S+f,b[1]=O,N[0]=I,N[1]=M}class XL{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(m){const _=Math.ceil(Math.log2(m.dim/8)),b=[];let N=Math.ceil(Math.pow(2,_));const D=1/N,S=(O,M,B,Y,ee)=>{const ue=Y?1:0,le=(O+1)*B-ue,re=M*B,pe=(M+1)*B-ue;ee[0]=O*B,ee[1]=re,ee[2]=le,ee[3]=pe};let V=new HL(N);const I=[];for(let O=0;O<N*N;O++){S(O%N,Math.floor(O/N),D,!1,I);const M=ag(I[0],I[1],m),B=ag(I[2],I[1],m),Y=ag(I[2],I[3],m),ee=ag(I[0],I[3],m);V.minimums.push(Math.min(M,B,Y,ee)),V.maximums.push(Math.max(M,B,Y,ee)),V.leaves.push(1)}for(b.push(V),N/=2;N>=1;N/=2){const O=b[b.length-1];V=new HL(N);for(let M=0;M<N*N;M++){S(M%N,Math.floor(M/N),2,!0,I);const B=O.getElevation(I[0],I[1]),Y=O.getElevation(I[2],I[1]),ee=O.getElevation(I[2],I[3]),ue=O.getElevation(I[0],I[3]),le=O.isLeaf(I[0],I[1]),re=O.isLeaf(I[2],I[1]),pe=O.isLeaf(I[2],I[3]),Se=O.isLeaf(I[0],I[3]),xe=Math.min(B.min,Y.min,ee.min,ue.min),Ke=Math.max(B.max,Y.max,ee.max,ue.max),Ze=le&&re&&pe&&Se;V.maximums.push(Ke),V.minimums.push(xe),V.leaves.push(Ke-xe<=5&&Ze?1:0)}b.push(V)}return b}(this.dem),f=u.length-1,y=u[f];this._addNode(y.minimums[0],y.maximums[0],y.leaves[0]),this._construct(u,0,0,f,0)}raycastRoot(i,u,f,y,m,_,b=1){return $L([i,u,-100],[f,y,this.maximums[0]*b],m,_)}raycast(i,u,f,y,m,_,b=1){if(!this.nodeCount)return null;const N=this.raycastRoot(i,u,f,y,m,_,b);if(N==null)return null;const D=[],S=[],V=[],I=[],O=[{idx:0,t:N,nodex:0,nodey:0,depth:0}];for(;O.length>0;){const{idx:M,t:B,nodex:Y,nodey:ee,depth:ue}=O.pop();if(this.leaves[M]){YL(Y,ee,ue,i,u,f,y,V,I);const re=1<<ue,pe=(Y+0)/re,Se=(Y+1)/re,xe=(ee+0)/re,Ke=(ee+1)/re,Ze=ag(pe,xe,this.dem)*b,He=ag(Se,xe,this.dem)*b,ft=ag(Se,Ke,this.dem)*b,Ye=ag(pe,Ke,this.dem)*b,gt=KL(V[0],V[1],Ze,I[0],V[1],He,I[0],I[1],ft,m,_),bt=KL(I[0],I[1],ft,V[0],I[1],Ye,V[0],V[1],Ze,m,_),Rt=Math.min(gt!==null?gt:Number.MAX_VALUE,bt!==null?bt:Number.MAX_VALUE);if(Rt!==Number.MAX_VALUE)return Rt;{const Vt=ve.vec3.scaleAndAdd([],m,_,B);if(JL(Ze,He,Ye,ft,WL(Vt[0],V[0],I[0]),WL(Vt[1],V[1],I[1]))>=Vt[2])return B}continue}let le=0;for(let re=0;re<this._siblingOffset.length;re++){YL((Y<<1)+this._siblingOffset[re][0],(ee<<1)+this._siblingOffset[re][1],ue+1,i,u,f,y,V,I),V[2]=-100,I[2]=this.maximums[this.childOffsets[M]+re]*b;const pe=$L(V,I,m,_);if(pe!=null){const Se=pe;D[re]=Se;let xe=!1;for(let Ke=0;Ke<le&&!xe;Ke++)Se>=D[S[Ke]]&&(S.splice(Ke,0,re),xe=!0);xe||(S[le]=re),le++}}for(let re=0;re<le;re++){const pe=S[re];O.push({idx:this.childOffsets[M]+pe,t:D[pe],nodex:(Y<<1)+this._siblingOffset[pe][0],nodey:(ee<<1)+this._siblingOffset[pe][1],depth:ue+1})}}return null}_addNode(i,u,f){return this.minimums.push(i),this.maximums.push(u),this.leaves.push(f),this.childOffsets.push(0),this.nodeCount++}_construct(i,u,f,y,m){if(i[y].isLeaf(u,f)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const _=y-1,b=i[_];let N=0,D=0;for(let S=0;S<this._siblingOffset.length;S++){const V=2*u+this._siblingOffset[S][0],I=2*f+this._siblingOffset[S][1],O=b.getElevation(V,I),M=b.isLeaf(V,I),B=this._addNode(O.min,O.max,M);M&&(N|=1<<S),D||(D=B)}for(let S=0;S<this._siblingOffset.length;S++)N&1<<S||this._construct(i,2*u+this._siblingOffset[S][0],2*f+this._siblingOffset[S][1],_,D+S)}}function JL(d,i,u,f,y,m){return hr(hr(d,u,m),hr(i,f,m),y)}function ag(d,i,u){const f=u.dim,y=ka(d*f-.5,0,f-1),m=ka(i*f-.5,0,f-1),_=Math.floor(y),b=Math.floor(m),N=Math.min(_+1,f-1),D=Math.min(b+1,f-1);return JL(u.get(_,b),u.get(N,b),u.get(_,D),u.get(N,D),y-_,m-b)}const BQ={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function GQ(d,i,u){return(256*d*256+256*i+u)/10-1e4}function jQ(d,i,u){return 256*d+i+u/256-32768}class MS{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,u,f,y=!1){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void en(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const m=this.dim=u.height-2,_=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=y,this._modifiedForSources={},!y){for(let N=0;N<m;N++)_[this._idx(-1,N)]=_[this._idx(0,N)],_[this._idx(m,N)]=_[this._idx(m-1,N)],_[this._idx(N,-1)]=_[this._idx(N,0)],_[this._idx(N,m)]=_[this._idx(N,m-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(m,-1)]=_[this._idx(m-1,0)],_[this._idx(-1,m)]=_[this._idx(0,m-1)],_[this._idx(m,m)]=_[this._idx(m-1,m-1)]}const b=f==="terrarium"?jQ:GQ;for(let N=0;N<_.length;++N){const D=4*N;this.floatView[N]=b(this.pixels[D],this.pixels[D+1],this.pixels[D+2])}this._timestamp=Zt.now()}_buildQuadTree(){this._tree=new XL(this)}get(i,u,f=!1){f&&(i=ka(i,-1,this.dim),u=ka(u,-1,this.dim));const y=this._idx(i,u);return this.floatView[y]}set(i,u,f){const y=this._idx(i,u),m=this.floatView[y];return this.floatView[y]=f,f-m}static getUnpackVector(i){return BQ[i]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}static pack(i,u){const f=[0,0,0,0],y=MS.getUnpackVector(u);let m=Math.floor((i+y[3])/y[2]);return f[2]=m%256,m=Math.floor(m/256),f[1]=m%256,m=Math.floor(m/256),f[0]=m,f}getPixels(){return new Jv({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,u,f){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let y=u*this.dim,m=u*this.dim+this.dim,_=f*this.dim,b=f*this.dim+this.dim;switch(u){case-1:y=m-1;break;case 1:m=y+1}switch(f){case-1:_=b-1;break;case 1:b=_+1}const N=-u*this.dim,D=-f*this.dim;for(let S=_;S<b;S++)for(let V=y;V<m;V++){const I=4*this._idx(V,S),O=4*this._idx(V+N,S+D);this.pixels[I+0]=i.pixels[O+0],this.pixels[I+1]=i.pixels[O+1],this.pixels[I+2]=i.pixels[O+2],this.pixels[I+3]=i.pixels[O+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function ZQ(d,i,u){d===1?i.headerLength=u.readFixed32():d===2?i.x=u.readVarint():d===3?i.y=u.readVarint():d===4?i.z=u.readVarint():d===5&&i.layers.push(function(f,y){return f.readFields(WQ,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},y)}(u,u.readVarint()+u.pos))}function qQ(d,i,u){d===1?(i.delta_filter=function(f,y){return f.readFields(HQ,{blockSize:0},y)}(u,u.readVarint()+u.pos),i.filter="delta_filter"):d===2?(u.readVarint(),i.filter="zigzag_filter"):d===3?(u.readVarint(),i.filter="bitshuffle_filter"):d===4&&(u.readVarint(),i.filter="byteshuffle_filter")}function HQ(d,i,u){d===1&&(i.blockSize=u.readVarint())}function $Q(d,i,u){d===1?(u.readVarint(),i.codec="gzip_data"):d===2?(u.readVarint(),i.codec="jpeg_image"):d===3?(u.readVarint(),i.codec="webp_image"):d===4&&(u.readVarint(),i.codec="png_image")}function KQ(d,i,u){let f=0,y=0;d===1?i.firstByte=u.readFixed64():d===2?i.lastByte=u.readFixed64():d===3?i.filters.push(function(m,_){return m.readFields(qQ,{},_)}(u,u.readVarint()+u.pos)):d===4?i.codec=function(m,_){return m.readFields($Q,{},_)}(u,u.readVarint()+u.pos):d===5?y=u.readFloat():d===6?f=u.readFloat():d===7?i.bands.push(u.readString()):d===8?i.offset=u.readDouble():d===9&&(i.scale=u.readDouble()),i.offset===0&&(i.offset=y),i.scale===0&&(i.scale=f)}function WQ(d,i,u){d===1?i.version=u.readVarint():d===2?i.name=u.readString():d===3?i.units=u.readString():d===4?i.tileSize=u.readVarint():d===5?i.buffer=u.readVarint():d===6?i.pixelFormat=u.readVarint():d===7&&i.dataIndex.push(function(f,y){return f.readFields(KQ,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},y)}(u,u.readVarint()+u.pos))}function YQ(d,i,u){if(d===2)(function(f,y,m){f.readFields(XQ,m,y)})(u,u.readVarint()+u.pos,i);else if(d===3)throw new Error("Not implemented")}function XQ(d,i,u){if(d===1){let f=0;const y=u.readVarint()+u.pos;for(;u.pos<y;)i[f++]=u.readVarint()}}function JQ(d,i){if(i.length!==4)throw new Error(`Expected data of dimension 4 but got ${i.length}.`);let u=i[3];for(let f=2;f>=1;f--){const y=f===1?1:0,m=f===2?1:0;for(let _=0;_<i[0];_++){const b=i[1]*_;for(let N=y;N<i[1];N++){const D=i[2]*(N+b);for(let S=m;S<i[2];S++){const V=i[3]*(S+D);for(let I=0;I<i[3];I++){const O=V+I;d[O]+=d[O-u]}}}}u*=i[f]}return d}function QQ(d){for(let i=0,u=d.length;i<u;i++)d[i]=d[i]>>>1^-(1&d[i]);return d}function eee(d,i){switch(i){case"uint32":return d;case"uint16":for(let u=0;u<d.length;u+=2){const f=d[u],y=d[u+1];d[u]=(240&f)>>4|(61440&f)>>8|(240&y)<<4|61440&y,d[u+1]=15&f|(3840&f)>>4|(15&y)<<8|(3840&y)<<4}return d;case"uint8":for(let u=0;u<d.length;u+=4){const f=d[u],y=d[u+1],m=d[u+2],_=d[u+3];d[u+0]=(192&f)>>6|(192&y)>>4|(192&m)>>2|192&_,d[u+1]=(48&f)>>4|(48&y)>>2|48&m|(48&_)<<2,d[u+2]=(12&f)>>2|12&y|(12&m)<<2|(12&_)<<4,d[u+3]=3&f|(3&y)<<2|(3&m)<<4|(3&_)<<6}return d;default:throw new Error(`Invalid pixel format, "${i}"`)}}xt(MS,"DEMData"),xt(XL,"DemMinMaxQuadTree",{omit:["dem"]});var Kh=Uint8Array,q1=Uint16Array,tee=Int32Array,QL=new Kh([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eF=new Kh([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aee=new Kh([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tF=function(d,i){for(var u=new q1(31),f=0;f<31;++f)u[f]=i+=1<<d[f-1];var y=new tee(u[30]);for(f=1;f<30;++f)for(var m=u[f];m<u[f+1];++m)y[m]=m-u[f]<<5|f;return{b:u,r:y}},aF=tF(QL,2),rF=aF.b,ree=aF.r;rF[28]=258,ree[258]=28;for(var nee=tF(eF,0).b,nF=new q1(32768),bo=0;bo<32768;++bo){var n_=(43690&bo)>>1|(21845&bo)<<1;nF[bo]=((65280&(n_=(61680&(n_=(52428&n_)>>2|(13107&n_)<<2))>>4|(3855&n_)<<4))>>8|(255&n_)<<8)>>1}var H1=function(d,i,u){for(var f=d.length,y=0,m=new q1(i);y<f;++y)d[y]&&++m[d[y]-1];var _,b=new q1(i);for(y=1;y<i;++y)b[y]=b[y-1]+m[y-1]<<1;_=new q1(1<<i);var N=15-i;for(y=0;y<f;++y)if(d[y])for(var D=y<<4|d[y],S=i-d[y],V=b[d[y]-1]++<<S,I=V|(1<<S)-1;V<=I;++V)_[nF[V]>>N]=D;return _},$1=new Kh(288);for(bo=0;bo<144;++bo)$1[bo]=8;for(bo=144;bo<256;++bo)$1[bo]=9;for(bo=256;bo<280;++bo)$1[bo]=7;for(bo=280;bo<288;++bo)$1[bo]=8;var iF=new Kh(32);for(bo=0;bo<32;++bo)iF[bo]=5;var iee=H1($1,9),see=H1(iF,5),FP=function(d){for(var i=d[0],u=1;u<d.length;++u)d[u]>i&&(i=d[u]);return i},hp=function(d,i,u){var f=i/8|0;return(d[f]|d[f+1]<<8)>>(7&i)&u},UP=function(d,i){var u=i/8|0;return(d[u]|d[u+1]<<8|d[u+2]<<16)>>(7&i)},oee=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],fp=function(d,i,u){var f=new Error(i||oee[d]);if(f.code=d,Error.captureStackTrace&&Error.captureStackTrace(f,fp),!u)throw f;return f},lee=new Kh(0),uee=typeof TextDecoder<"u"&&new TextDecoder;try{uee.decode(lee,{stream:!0})}catch{}const cee={gzip_data:"gzip"};class zf extends Error{constructor(i){super(i),this.name="MRTError"}}const dee={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},sF={uint32:1,uint16:2,uint8:4},hee={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let kP;class IS{constructor(i=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=i}getLayer(i){const u=this.layers[i];if(!u)throw new zf(`Layer '${i}' not found`);return u}getHeaderLength(i){const u=new Uint8Array(i),f=new DataView(i);if(u[0]!==13)throw new zf("File is not a valid MRT.");return f.getUint32(1,!0)}parseHeader(i){const u=new Uint8Array(i),f=this.getHeaderLength(i);if(u.length<f)throw new zf(`Expected header with length >= ${f} but got buffer of length ${u.length}`);const y=function(m,_){return m.readFields(ZQ,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new kP(u.subarray(0,f)));if(!isNaN(this.x)&&(this.x!==y.x||this.y!==y.y||this.z!==y.z))throw new zf(`Invalid attempt to parse header ${y.z}/${y.x}/${y.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=y.x,this.y=y.y,this.z=y.z;for(const m of y.layers)this.layers[m.name]=new oF(m,{cacheSize:this._cacheSize});return this}createDecodingTask(i){const u=[],f=this.getLayer(i.layerName);for(let y of i.blockIndices){const m=f.dataIndex[y],_=m.firstByte-i.firstByte,b=m.lastByte-i.firstByte;if(f._blocksInProgress.has(y))continue;const N={layerName:f.name,firstByte:_,lastByte:b,pixelFormat:f.pixelFormat,blockIndex:y,blockShape:[m.bands.length].concat(f.bandShape),buffer:f.buffer,codec:m.codec.codec,filters:m.filters.map(D=>D.filter)};f._blocksInProgress.add(y),u.push(N)}return new lF(u,()=>{u.forEach(y=>f._blocksInProgress.delete(y.blockIndex))},(y,m)=>{if(u.forEach(_=>f._blocksInProgress.delete(_.blockIndex)),y)throw y;m.forEach(_=>{this.getLayer(_.layerName).processDecodedData(_)})})}}class oF{constructor({version:i,name:u,units:f,tileSize:y,pixelFormat:m,buffer:_,dataIndex:b},N){if(this.version=i,this.version!==1)throw new zf(`Cannot parse raster layer encoded with MRT version ${i}`);this.name=u,this.units=f,this.tileSize=y,this.buffer=_,this.pixelFormat=dee[m],this.dataIndex=b,this.bandShape=[y+2*_,y+2*_,sF[this.pixelFormat]],this._decodedBlocks=new DS(N?N.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return sF[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:i})=>i).flat()}processDecodedData(i){const u=i.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,i.data)}getBlockForBand(i){let u=0;switch(typeof i){case"string":for(const[f,y]of this.dataIndex.entries()){for(const[m,_]of y.bands.entries())if(_===i)return{bandIndex:u+m,blockIndex:f,blockBandIndex:m};u+=y.bands.length}break;case"number":for(const[f,y]of this.dataIndex.entries()){if(i>=u&&i<u+y.bands.length)return{bandIndex:i,blockIndex:f,blockBandIndex:i-u};u+=y.bands.length}break;default:throw new zf(`Invalid band \`${JSON.stringify(i)}\`. Expected string or integer.`)}throw new zf(`Band not found: ${JSON.stringify(i)}`)}getDataRange(i){let u=1/0,f=-1/0;const y=[],m=new Set;for(const _ of i){const{blockIndex:b}=this.getBlockForBand(_);if(b<0)throw new zf(`Invalid band: ${JSON.stringify(_)}`);const N=this.dataIndex[b];y.includes(b)||y.push(b),m.add(b),u=Math.min(u,N.firstByte),f=Math.max(f,N.lastByte)}if(m.size>this.cacheSize)throw new zf(`Number of blocks to decode (${m.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:f,blockIndices:y}}hasBand(i){const{blockIndex:u}=this.getBlockForBand(i);return u>=0}hasDataForBand(i){const{blockIndex:u}=this.getBlockForBand(i);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(i){const{blockIndex:u,blockBandIndex:f}=this.getBlockForBand(i),y=this._decodedBlocks.get(u.toString());if(!y)throw new zf(`Data for band ${JSON.stringify(i)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[u],_=this.bandShape.reduce((D,S)=>D*S,1),b=f*_,N=y.subarray(b,b+_);return{data:N,bytes:new Uint8Array(N.buffer).subarray(N.byteOffset,N.byteOffset+N.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:m.offset,scale:m.scale}}}IS.setPbf=function(d){kP=d};class lF{constructor(i,u,f){this.tasks=i,this._onCancel=u,this._onComplete=f,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(i,u){this._finalized||(this._onComplete(i,u),this._finalized=!0)}}IS.performDecoding=function(d,i){const u=new Uint8Array(d);return Promise.all(i.tasks.map(f=>{const{layerName:y,firstByte:m,lastByte:_,pixelFormat:b,blockShape:N,blockIndex:D,filters:S,codec:V}=f,I=u.subarray(m,_+1),O=new Uint32Array(N[0]*N[1]*N[2]);let M;if(V!=="gzip_data")throw new zf(`Unhandled codec: ${V}`);return M=function(B,Y){if(!globalThis.DecompressionStream&&Y==="gzip_data")return Promise.resolve(((re=function(xe){xe[0]==31&&xe[1]==139&&xe[2]==8||fp(6,"invalid gzip data");var Ke=xe[3],Ze=10;4&Ke&&(Ze+=2+(xe[10]|xe[11]<<8));for(var He=(Ke>>3&1)+(Ke>>4&1);He>0;He-=!xe[Ze++]);return Ze+(2&Ke)}(le=B))+8>le.length&&fp(6,"invalid gzip data"),function(xe,Ke,Ze,He){var ft=xe.length;if(!ft||Ke.f&&!Ke.l)return Ze||new Kh(0);var Ye=!Ze,gt=Ye||Ke.i!=2,bt=Ke.i;Ye&&(Ze=new Kh(3*ft));var Rt,Vt,Et=function(ng){var ig=Ze.length;if(ng>ig){var SA=new Kh(Math.max(2*ig,ng));SA.set(Ze),Ze=SA}},Ut=Ke.f||0,Dt=Ke.p||0,jt=Ke.b||0,ga=Ke.l,ma=Ke.d,Ya=Ke.m,xa=Ke.n,Oa=8*ft;do{if(!ga){Ut=hp(xe,Dt,1);var _a=hp(xe,Dt+1,3);if(Dt+=3,!_a){var gr=xe[(Ir=4+((Dt+7)/8|0))-4]|xe[Ir-3]<<8,$a=Ir+gr;if($a>ft){bt&&fp(0);break}gt&&Et(jt+gr),Ze.set(xe.subarray(Ir,$a),jt),Ke.b=jt+=gr,Ke.p=Dt=8*$a,Ke.f=Ut;continue}if(_a==1)ga=iee,ma=see,Ya=9,xa=5;else if(_a==2){var or=hp(xe,Dt,31)+257,Or=hp(xe,Dt+10,15)+4,Jr=or+hp(xe,Dt+5,31)+1;Dt+=14;for(var Ur=new Kh(Jr),cn=new Kh(19),Xr=0;Xr<Or;++Xr)cn[aee[Xr]]=hp(xe,Dt+3*Xr,7);Dt+=3*Or;var wn=FP(cn),Hn=(1<<wn)-1,Pi=H1(cn,wn);for(Xr=0;Xr<Jr;){var Ir,En=Pi[hp(xe,Dt,Hn)];if(Dt+=15&En,(Ir=En>>4)<16)Ur[Xr++]=Ir;else{var Wi=0,os=0;for(Ir==16?(os=3+hp(xe,Dt,3),Dt+=2,Wi=Ur[Xr-1]):Ir==17?(os=3+hp(xe,Dt,7),Dt+=3):Ir==18&&(os=11+hp(xe,Dt,127),Dt+=7);os--;)Ur[Xr++]=Wi}}var ys=Ur.subarray(0,or),Ns=Ur.subarray(or);Ya=FP(ys),xa=FP(Ns),ga=H1(ys,Ya),ma=H1(Ns,xa)}else fp(1);if(Dt>Oa){bt&&fp(0);break}}gt&&Et(jt+131072);for(var Ti=(1<<Ya)-1,ol=(1<<xa)-1,Sc=Dt;;Sc=Dt){var Ao=(Wi=ga[UP(xe,Dt)&Ti])>>4;if((Dt+=15&Wi)>Oa){bt&&fp(0);break}if(Wi||fp(2),Ao<256)Ze[jt++]=Ao;else{if(Ao==256){Sc=Dt,ga=null;break}var xo=Ao-254;Ao>264&&(xo=hp(xe,Dt,(1<<(Wh=QL[Xr=Ao-257]))-1)+rF[Xr],Dt+=Wh);var Vu=ma[UP(xe,Dt)&ol],Dl=Vu>>4;if(Vu||fp(3),Dt+=15&Vu,Ns=nee[Dl],Dl>3){var Wh=eF[Dl];Ns+=UP(xe,Dt)&(1<<Wh)-1,Dt+=Wh}if(Dt>Oa){bt&&fp(0);break}gt&&Et(jt+131072);var rg=jt+xo;if(jt<Ns){var Of=0-Ns,mp=Math.min(Ns,rg);for(Of+jt<0&&fp(3);jt<mp;++jt)Ze[jt]=(void 0)[Of+jt]}for(;jt<rg;++jt)Ze[jt]=Ze[jt-Ns]}}Ke.l=ga,Ke.p=Sc,Ke.b=jt,Ke.f=Ut,ga&&(Ut=1,Ke.m=Ya,Ke.d=ma,Ke.n=xa)}while(!Ut);return jt!=Ze.length&&Ye?(Rt=Ze,((Vt=jt)==null||Vt>Rt.length)&&(Vt=Rt.length),new Kh(Rt.subarray(0,Vt))):Ze.subarray(0,jt)}(le.subarray(re,-8),{i:2},new Kh(((ee=le)[(ue=ee.length)-4]|ee[ue-3]<<8|ee[ue-2]<<16|ee[ue-1]<<24)>>>0))));var ee,ue,le,re;const pe=cee[Y];if(!pe)throw new Error(`Unhandled codec: ${Y}`);const Se=new globalThis.DecompressionStream(pe);return new Response(new Blob([B]).stream().pipeThrough(Se)).arrayBuffer().then(xe=>new Uint8Array(xe))}(I,V).then(B=>(function(Y,ee){Y.readFields(YQ,ee)}(new kP(B),O),new hee[b](O.buffer))),M.then(B=>{for(let Y=S.length-1;Y>=0;Y--)switch(S[Y]){case"delta_filter":JQ(B,N);break;case"zigzag_filter":QQ(B);break;case"bitshuffle_filter":eee(B,b);break;default:throw new zf(`Unhandled filter "${S[Y]}"`)}return{layerName:y,blockIndex:D,data:B}}).catch(B=>{throw B})}))},xt(lF,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),xt(IS,"MapboxRasterTile"),xt(oF,"MapboxRasterLayer",{omit:["_blocksInProgress"]});let K1,BP,pp,i_,GP,s_=null;function uF(){return Ji()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:BP||be.DRACO_URL}function cF(){if(Ji()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(i_)return i_;const d=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return i_=WebAssembly.validate(d)?be.MESHOPT_SIMD_URL:be.MESHOPT_URL,i_}const LS={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fee={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},W1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function dF(d,i,u){const f=u.json.bufferViews.length,y=u.buffers.length;i.bufferView=f,u.json.bufferViews[f]={buffer:y,byteLength:d.byteLength},u.buffers[y]=d}const jP="KHR_draco_mesh_compression";function pee(d,i){const u=d.extensions&&d.extensions[jP];if(!u)return;const f=new pp.Decoder,y=mF(i,u.bufferView),m=new pp.Mesh;if(!f.DecodeArrayToMesh(y,y.byteLength,m))throw new Error("Failed to decode Draco mesh");const _=i.json.accessors[d.indices],b=LS[_.componentType],N=_.count*b.BYTES_PER_ELEMENT,D=pp._malloc(N);b===Uint16Array?f.GetTrianglesUInt16Array(m,N,D):f.GetTrianglesUInt32Array(m,N,D),dF(pp.memory.buffer.slice(D,D+N),_,i),pp._free(D);for(const S of Object.keys(u.attributes)){const V=f.GetAttributeByUniqueId(m,u.attributes[S]),I=i.json.accessors[d.attributes[S]],O=fee[I.componentType],M=I.count*W1[I.type]*LS[I.componentType].BYTES_PER_ELEMENT,B=pp._malloc(M);f.GetAttributeDataArrayForAllPoints(m,V,pp[O],M,B),dF(pp.memory.buffer.slice(B,B+M),I,i),pp._free(B)}f.destroy(),m.destroy(),delete d.extensions[jP]}const FS="EXT_meshopt_compression";function mee(d,i){if(!d.extensions||!d.extensions[FS])return;const u=d.extensions[FS],f=new Uint8Array(i.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),y=new Uint8Array(u.count*u.byteStride);GP.decodeGltfBuffer(y,u.count,u.byteStride,f,u.mode,u.filter),d.buffer=i.buffers.length,d.byteOffset=0,i.buffers[d.buffer]=y.buffer,delete d.extensions[FS]}const hF=1179937895,fF=new TextDecoder("utf8");function pF(d,i){return new URL(d,i).href}function yee(d,i,u,f){return fetch(pF(d.uri,f)).then(y=>y.arrayBuffer()).then(y=>{i.buffers[u]=y})}function mF(d,i){const u=d.json.bufferViews[i];return new Uint8Array(d.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function gee(d,i,u,f){if(d.uri){const y=pF(d.uri,f);return fetch(y).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{i.images[u]=m})}if(d.bufferView!==void 0){const y=mF(i,d.bufferView),m=new Blob([y],{type:d.mimeType});return createImageBitmap(m).then(_=>{i.images[u]=_})}}function yF(d,i=0,u){const f={json:null,images:[],buffers:[]};if(new Uint32Array(d,i,1)[0]===hF){const S=new Uint32Array(d,i);let V=2;const I=(S[V++]>>2)-3,O=S[V++]>>2;if(V++,f.json=JSON.parse(fF.decode(S.subarray(V,V+O))),V+=O,V<I){const M=S[V++];V++;const B=i+(V<<2);f.buffers[0]=d.slice(B,B+M)}}else f.json=JSON.parse(fF.decode(new Uint8Array(d,i)));const{buffers:y,images:m,meshes:_,extensionsUsed:b,bufferViews:N}=f.json;let D=Promise.resolve();if(y){const S=[];for(let V=0;V<y.length;V++){const I=y[V];I.uri?S.push(yee(I,f,V,u)):f.buffers[V]||(f.buffers[V]=null)}D=Promise.all(S)}return D.then(()=>{const S=[],V=b&&b.includes(jP),I=b&&b.includes(FS);if(V&&S.push(function(){if(!pp)return K1??(K1=function(O){let M,B=null;function Y(){M=new Uint8Array(B.buffer)}function ee(){throw new Error("Unexpected Draco error.")}const ue={a:{a:ee,d:function(le,re,pe){return M.copyWithin(le,re,re+pe)},c:function(le){const re=M.length,pe=Math.max(le>>>0,Math.ceil(1.2*re)),Se=Math.ceil((pe-re)/65536);try{return B.grow(Se),Y(),!0}catch{return!1}},b:ee}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(O,ue):O.then(le=>le.arrayBuffer()).then(le=>WebAssembly.instantiate(le,ue))).then(le=>{const{Rb:re,Qb:pe,P:Se,T:xe,X:Ke,Ja:Ze,La:He,Qa:ft,Va:Ye,Wa:gt,eb:bt,jb:Rt,f:Vt,e:Et,yb:Ut,zb:Dt,Ab:jt,Bb:ga,Db:ma,Gb:Ya}=le.instance.exports;B=Et;const xa=(()=>{let Oa=0,_a=0,gr=0,$a=0;return or=>{gr&&(re($a),re(Oa),_a+=gr,gr=Oa=0),Oa||(_a+=128,Oa=pe(_a));const Or=or.length+7&-8;let Jr=Oa;Or>=_a&&(gr=Or,Jr=$a=pe(Or));for(let Ur=0;Ur<or.length;Ur++)M[Jr+Ur]=or[Ur];return Jr}})();return Y(),Vt(),{memory:Et,_free:re,_malloc:pe,Mesh:class{constructor(){this.ptr=Se()}destroy(){xe(this.ptr)}},Decoder:class{constructor(){this.ptr=Ze()}destroy(){Rt(this.ptr)}DecodeArrayToMesh(Oa,_a,gr){const $a=xa(Oa),or=He(this.ptr,$a,_a,gr.ptr);return!!Ke(or)}GetAttributeByUniqueId(Oa,_a){return{ptr:ft(this.ptr,Oa.ptr,_a)}}GetTrianglesUInt16Array(Oa,_a,gr){Ye(this.ptr,Oa.ptr,_a,gr)}GetTrianglesUInt32Array(Oa,_a,gr){gt(this.ptr,Oa.ptr,_a,gr)}GetAttributeDataArrayForAllPoints(Oa,_a,gr,$a,or){bt(this.ptr,Oa.ptr,_a.ptr,gr,$a,or)}},DT_INT8:Ut(),DT_UINT8:Dt(),DT_INT16:jt(),DT_UINT16:ga(),DT_UINT32:ma(),DT_FLOAT32:Ya()}})}(fetch(uF())),K1.then(O=>{pp=O,K1=void 0}))}()),I&&S.push(function(){if(GP)return;const O=function(M){let B;const Y=WebAssembly.instantiateStreaming(M,{}).then(le=>{B=le.instance,B.exports.__wasm_call_ctors()}),ee={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},ue={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:Y,supported:!0,decodeGltfBuffer(le,re,pe,Se,xe,Ke){(function(Ze,He,ft,Ye,gt,bt,Rt){const Vt=Ze.exports.sbrk,Et=Ye+3&-4,Ut=Vt(Et*gt),Dt=Vt(bt.length),jt=new Uint8Array(Ze.exports.memory.buffer);jt.set(bt,Dt);const ga=He(Ut,Ye,gt,Dt,bt.length);if(ga===0&&Rt&&Rt(Ut,Et,gt),ft.set(jt.subarray(Ut,Ut+Ye*gt)),Vt(Ut-Vt(0)),ga!==0)throw new Error(`Malformed buffer data: ${ga}`)})(B,B.exports[ue[xe]],le,re,pe,Se,B.exports[ee[Ke]])}}}(fetch(cF()));return O.ready.then(()=>{GP=O})}()),m)for(let O=0;O<m.length;O++)S.push(gee(m[O],f,O,u));return(S.length?Promise.all(S):Promise.resolve()).then(()=>{if(V&&_)for(const{primitives:O}of _)for(const M of O)pee(M,f);if(I&&_&&N)for(const O of N)mee(O,f);return f})})}function TA(d,i){const u=d.json.bufferViews[i.bufferView],f=LS[i.componentType];return new f(d.buffers[u.buffer],(i.byteOffset||0)+(u.byteOffset||0),i.count*(u.byteStride&&u.byteStride!==W1[i.type]*f.BYTES_PER_ELEMENT?u.byteStride/f.BYTES_PER_ELEMENT:W1[i.type]))}function ZP(d,i,u,f){const y=LS[i.componentType],m=function(S){switch(S){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(y),_=d.json.bufferViews[i.bufferView],b=_.byteStride?_.byteStride/y.BYTES_PER_ELEMENT:W1[i.type],N=u.float32,D=N.length/u.capacity;for(let S=0,V=0;S<i.count*b;S+=b,V+=D)for(let I=0;I<D;I++)N[V+I]=f[S+I]*m;u._trim()}function Aee(d,i,u){const f=d.indices,y=d.attributes,m={};m.indexArray=new Ps;const _=i.json.accessors[f],b=_.count/3;m.indexArray.reserve(b);const N=TA(i,_);for(let I=0;I<b;I++)m.indexArray.emplaceBack(N[3*I],N[3*I+1],N[3*I+2]);m.indexArray._trim(),m.vertexArray=new So;const D=i.json.accessors[y.POSITION];m.vertexArray.reserve(D.count);const S=TA(i,D);for(let I=0;I<D.count;I++)m.vertexArray.emplaceBack(S[3*I],S[3*I+1],S[3*I+2]);if(m.vertexArray._trim(),m.aabb=new er(D.min,D.max),m.centroid=function(I,O){const M=[0,0,0],B=I.length;if(B>0){for(let Y=0;Y<B;Y++){const ee=3*I[Y];M[0]+=O[ee],M[1]+=O[ee+1],M[2]+=O[ee+2]}M[0]/=B,M[1]/=B,M[2]/=B}return M}(N,S),y.COLOR_0!==void 0){const I=i.json.accessors[y.COLOR_0],O=W1[I.type],M=TA(i,I);m.colorArray=O===3?new So:new Yc,m.colorArray.resize(I.count),ZP(i,I,m.colorArray,M)}if(y.NORMAL!==void 0){m.normalArray=new So;const I=i.json.accessors[y.NORMAL];m.normalArray.resize(I.count);const O=TA(i,I);ZP(i,I,m.normalArray,O)}if(y.TEXCOORD_0!==void 0&&u.length>0){m.texcoordArray=new Gh;const I=i.json.accessors[y.TEXCOORD_0];m.texcoordArray.resize(I.count);const O=TA(i,I);ZP(i,I,m.texcoordArray,O)}if(y._FEATURE_ID_RGBA4444!==void 0){const I=i.json.accessors[y._FEATURE_ID_RGBA4444];i.json.extensionsUsed&&i.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=TA(i,I))}y._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(TA(i,i.json.accessors[y._FEATURE_RGBA4444]).buffer));const V=d.material;return m.material=function(I,O){const{emissiveFactor:M=[0,0,0],alphaMode:B="OPAQUE",alphaCutoff:Y=.5,normalTexture:ee,occlusionTexture:ue,emissiveTexture:le,doubleSided:re}=I,{baseColorFactor:pe=[1,1,1,1],metallicFactor:Se=1,roughnessFactor:xe=1,baseColorTexture:Ke,metallicRoughnessTexture:Ze}=I.pbrMetallicRoughness||{},He=ue?O[ue.index]:void 0;if(ue&&ue.extensions&&ue.extensions.KHR_texture_transform&&He){const ft=ue.extensions.KHR_texture_transform;He.offsetScale=[ft.offset[0],ft.offset[1],ft.scale[0],ft.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new bn(...pe),metallicFactor:Se,roughnessFactor:xe,baseColorTexture:Ke?O[Ke.index]:void 0,metallicRoughnessTexture:Ze?O[Ze.index]:void 0},doubleSided:re,emissiveFactor:M,alphaMode:B,alphaCutoff:Y,normalTexture:ee?O[ee.index]:void 0,occlusionTexture:He,emissionTexture:le?O[le.index]:void 0,defined:I.defined===void 0}}(V!==void 0?i.json.materials[V]:{defined:!1},u),m}function gF(d,i,u){const{matrix:f,rotation:y,translation:m,scale:_,mesh:b,extras:N,children:D}=d,S={};if(S.matrix=f||ve.mat4.fromRotationTranslationScale([],y||[0,0,0,1],m||[0,0,0],_||[1,1,1]),b!==void 0){S.meshes=u[b];const V=S.anchor=[0,0];for(const I of S.meshes){const{min:O,max:M}=I.aabb;V[0]+=O[0]+M[0],V[1]+=O[1]+M[1]}V[0]=Math.floor(V[0]/S.meshes.length/2),V[1]=Math.floor(V[1]/S.meshes.length/2)}if(N&&(N.id&&(S.id=N.id),N.lights&&(S.lights=function(V){if(!V.length)return[];const I=function(ee){const ue=atob(ee),le=new Uint8Array(ue.length);for(let re=0;re<ue.length;re++)le[re]=ue.codePointAt(re);return le}(V),O=[],M=I.length/24,B=new Uint16Array(I.buffer),Y=new Float32Array(I.buffer);for(let ee=0;ee<M;ee++){const ue=B[2*ee*6]/30,le=B[2*ee*6+1]/30,re=B[2*ee*6+10]/100,pe=Y[6*ee+1],Se=Y[6*ee+2],xe=Y[6*ee+3],Ke=Y[6*ee+4],Ze=xe-pe,He=Ke-Se,ft=Math.hypot(Ze,He);O.push({pos:[pe+.5*Ze,Se+.5*He,le],normal:[He/ft,-Ze/ft,0],width:ft,height:ue,depth:re,points:[pe,Se,xe,Ke]})}return O}(N.lights))),D){const V=[];for(const I of D)V.push(gF(i.json.nodes[I],i,u));S.children=V}return S}function _ee(d){if(d.vertices.length===0||d.indices.length===0)return null;const i=new o1(d.vertices,d.indices,8,256),[u,f]=[i.min.clone(),i.max.clone()];return{vertices:d.vertices,indices:d.indices,grid:i,min:u,max:f}}function vee(d){if(!d.extras||!d.extras.ground)return null;const i=d.extras.ground;if(!i||!Array.isArray(i)||i.length===0)return null;const u=i[0];if(!u||!Array.isArray(u)||u.length===0)return null;const f=[];for(const _ of u){if(!Array.isArray(_)||_.length!==2)continue;const b=_[0],N=_[1];typeof b=="number"&&typeof N=="number"&&f.push(new Bt(b,N))}if(f.length<3)return null;f.length>1&&f[f.length-1].equals(f[0])&&f.pop();let y=0;for(let _=0;_<f.length;_++){const b=f[_],N=f[(_+1)%f.length],D=f[(_+2)%f.length];y+=(b.x-N.x)*(D.y-N.y)-(D.x-N.x)*(b.y-N.y)}y>0&&f.reverse();const m=aA(f.flatMap(_=>[_.x,_.y]),[]);return m.length===0?null:{vertices:f,indices:m}}function wee(d,i){const u=[],f=[];let y=0;const m=[];for(const _ of d){y=u.length;const b=_.vertexArray.float32,N=_.indexArray.uint16;for(let D=0;D<_.vertexArray.length;D++)m[0]=b[3*D+0],m[1]=b[3*D+1],m[2]=b[3*D+2],ve.vec3.transformMat4(m,m,i),u.push(new Bt(m[0],m[1]));for(let D=0;D<3*_.indexArray.length;D++)f.push(N[D]+y)}if(f.length%3!=0)return null;for(let _=0;_<f.length;_+=3){const b=u[f[_+0]],N=u[f[_+1]],D=u[f[_+2]];(b.x-N.x)*(D.y-N.y)-(D.x-N.x)*(b.y-N.y)>0&&([f[_+1],f[_+2]]=[f[_+2],f[_+1]])}return{vertices:u,indices:f}}function AF(d){const i=function(N,D){const S=[],V=WebGL2RenderingContext;if(N.json.textures)for(const I of N.json.textures){const O={magFilter:V.LINEAR,minFilter:V.NEAREST,wrapS:V.REPEAT,wrapT:V.REPEAT};I.sampler!==void 0&&Object.assign(O,N.json.samplers[I.sampler]),S.push({image:D[I.source],sampler:O,uploaded:!1})}return S}(d,d.images),u=function(N,D){const S=[];for(const V of N.json.meshes){const I=[];for(const O of V.primitives)I.push(Aee(O,N,D));S.push(I)}return S}(d,i),{scenes:f,scene:y,nodes:m}=d.json,_=f?f[y||0].nodes:m,b=[];for(const N of _)b.push(gF(m[N],d,u));return function(N,D,S){const V={},I=new Set;for(let O=0;O<N.length;O++){const M=S[D[O]];if(!M.extras)continue;const B=M.extras["mapbox:footprint:version"],Y=M.extras["mapbox:footprint:id"];(B||Y)&&I.add(O),B==="1.0.0"&&Y&&(V[Y]=O)}for(let O=0;O<N.length;O++){if(I.has(O))continue;const M=N[O],B=S[D[O]];if(!B.extras)continue;let Y=null;M.id in V&&(Y=wee(N[V[M.id]].meshes,M.matrix)),Y||(Y=vee(B)),Y&&(M.footprint=_ee(Y))}if(I.size>0){const O=Array.from(I.values()).sort((M,B)=>M-B);for(let M=O.length-1;M>=0;M--)N.splice(O[M],1)}}(b,_,d.json.nodes),b}function Ree(d){d.heightmap=new Float32Array(4096),d.heightmap.fill(-1);const i=d.vertexArray.float32,u=d.aabb.min[0]-1,f=d.aabb.min[1]-1,y=vA/(d.aabb.max[0]-u+2),m=vA/(d.aabb.max[1]-f+2);for(let _=0;_<i.length;_+=3){const b=i[_+2],N=(i[_+0]-u)*y|0,D=(i[_+1]-f)*m|0;b>d.heightmap[D*vA+N]&&(d.heightmap[D*vA+N]=b)}}function Tee(d,i){const u={};u.indexArray=new Ps,u.indexArray.reserve(4*d.length),u.vertexArray=new So,u.vertexArray.reserve(10*d.length),u.colorArray=new Yc,u.vertexArray.reserve(10*d.length);let f=0;for(const _ of d){const b=Math.min(10,Math.max(4,1.3*_.height))*i,N=[-_.normal[1],_.normal[0],0],D=Math.min(.29,.1*_.width/_.depth),S=_.width-2*_.depth*i*(D+.01),V=ve.vec3.scaleAndAdd([],_.pos,N,S/2),I=ve.vec3.scaleAndAdd([],_.pos,N,-S/2),O=[V[0],V[1],V[2]+_.height],M=[I[0],I[1],I[2]+_.height],B=ve.vec3.scaleAndAdd([],_.normal,N,D);ve.vec3.scale(B,B,b);const Y=ve.vec3.scaleAndAdd([],_.normal,N,-D);ve.vec3.scale(Y,Y,b),ve.vec3.add(B,V,B),ve.vec3.add(Y,I,Y),V[2]+=.1,I[2]+=.1,u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(Y[0],Y[1],Y[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(O[0],O[1],O[2]),u.vertexArray.emplaceBack(M[0],M[1],M[2]),u.vertexArray.emplaceBack(V[0],V[1],V[2]),u.vertexArray.emplaceBack(I[0],I[1],I[2]),u.vertexArray.emplaceBack(B[0],B[1],B[2]),u.vertexArray.emplaceBack(Y[0],Y[1],Y[2]);const ee=S/b/2;u.colorArray.emplaceBack(-ee-D,-1,ee,.8),u.colorArray.emplaceBack(ee+D,-1,ee,.8),u.colorArray.emplaceBack(-ee,0,ee,1.3),u.colorArray.emplaceBack(ee,0,ee,1.3),u.colorArray.emplaceBack(ee+D,-.8,ee,.7),u.colorArray.emplaceBack(ee+D,-.8,ee,.7),u.colorArray.emplaceBack(0,0,ee,1.3),u.colorArray.emplaceBack(0,0,ee,1.3),u.colorArray.emplaceBack(ee+D,-1.2,ee,.8),u.colorArray.emplaceBack(ee+D,-1.2,ee,.8),u.indexArray.emplaceBack(6+f,4+f,8+f),u.indexArray.emplaceBack(7+f,9+f,5+f),u.indexArray.emplaceBack(0+f,1+f,2+f),u.indexArray.emplaceBack(1+f,3+f,2+f),f+=10}const y={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=bn.white,y.pbrMetallicRoughness=m,u.material=y,u.aabb=new er([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}class _F{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const f=i[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const See=["id","tile","layer","source","sourceLayer","state"];class o_{constructor(i,u,f,y,m){this.type="Feature",this._vectorTileFeature=i,this._z=u,this._x=f,this._y=y,this.properties=i.properties,this.id=m}clone(){const i=new o_(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(i.state=Object.assign({},this.state)),this.layer&&(i.layer=Object.assign({},this.layer)),this.source&&(i.source=this.source),this.sourceLayer&&(i.sourceLayer=this.sourceLayer),i}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of See)this[u]!==void 0&&(i[u]=this[u]);return i}}class vF{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Tt(Na,16,0),this.featureIndexArray=new pl,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(i,u,f,y,m,_=0,b=0){const N=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,y,m,_);const D=this.grid;for(let S=0;S<u.length;S++){const V=u[S],I=[1/0,1/0,-1/0,-1/0];for(let O=0;O<V.length;O++){const M=V[O];I[0]=Math.min(I[0],M.x),I[1]=Math.min(I[1],M.y),I[2]=Math.max(I[2],M.x),I[3]=Math.max(I[3],M.y)}b!==0&&(I[0]-=b,I[1]-=b,I[2]+=b,I[3]+=b),I[0]<Na&&I[1]<Na&&I[2]>=0&&I[3]>=0&&D.insert(N,I[0],I[1],I[2],I[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new vh.VectorTile(new on(this.rawTileData)).layers,this.sourceLayerCoder=new _F(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,u){const{tilespaceGeometry:f,transform:y,tileTransform:m,pixelPosMatrix:_,availableImages:b}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const N=f.bufferedTilespaceBounds,D=this.grid.query(N.min.x,N.min.y,N.max.x,N.max.y,(O,M,B,Y)=>st(f.bufferedTilespaceGeometry,O,M,B,Y));D.sort(Cee);let S=null;y.elevation&&D.length>0&&(S=e_.create(y.elevation,this.tileID));const V={};let I;for(let O=0;O<D.length;O++){const M=D[O];if(M===I)continue;I=M;const B=this.featureIndexArray.get(M);let Y=null;this.is3DTile?this.loadMatchingModelFeature(V,B,i,f,y):this.loadMatchingFeature(V,B,i,b,(ee,ue,le,re=0)=>(Y||(Y=Z(ee,this.tileID.canonical,m)),ue.queryIntersectsFeature(f,ee,le,Y,this.z,y,_,S,re)))}return V}loadMatchingFeature(i,u,f,y,m){const{featureIndex:_,bucketIndex:b,sourceLayerIndex:N,layoutVertexArrayOffset:D}=u,S=this.bucketLayerIDs[b],V=f.layers,I=Object.keys(V);if(I.length&&!function(ee,ue){for(let le=0;le<ee.length;le++)if(ue.indexOf(ee[le])>=0)return!0;return!1}(I,S))return;const O=f.sourceCache,M=this.sourceLayerCoder.decode(N),B=this.vtLayers[M].feature(_),Y=this.getId(B,M);for(let ee=0;ee<S.length;ee++){const ue=S[ee];if(!V[ue])continue;const{styleLayer:le,targets:re}=V[ue];let pe={};Y!==void 0&&(pe=O.getFeatureState(le.sourceLayer,Y));const Se=!m||m(B,le,pe,D);if(!Se)continue;const xe=new o_(B,this.z,this.x,this.y,Y);xe.tile=this.tileID.canonical,xe.state=pe;let Ke=this.serializedLayersCache.get(ue);Ke||(Ke=le.serialize(),Ke.id=ue,this.serializedLayersCache.set(ue,Ke)),xe.source=Ke.source,xe.sourceLayer=Ke["source-layer"],xe.layer=Rn({},Ke),xe.layer.paint=wF(Ke.paint,le.paint,B,pe,y),xe.layer.layout=wF(Ke.layout,le.layout,B,pe,y);let Ze=!1;for(const He of re){this.updateFeatureProperties(xe,He);const{filter:ft}=He;if(ft){if(B.properties=xe.properties,ft.needGeometry){const Ye=K(B,!0);if(!ft.filter(new vn(this.tileID.overscaledZ),Ye,this.tileID.canonical))continue}else if(!ft.filter(new vn(this.tileID.overscaledZ),B))continue}Ze=!0,He.targetId&&this.addFeatureVariant(xe,He)}Ze&&this.appendToResult(i,ue,_,xe,Se)}}loadMatchingModelFeature(i,u,f,y,m){const _=this.bucketLayerIDs[0][0],b=f.layers;if(!b[_])return;const{styleLayer:N,targets:D}=b[_];if(N.type!=="model")return;const S=y.tile,V=u.featureIndex,I=S.getBucket(N);if(!(I&&I instanceof xS))return;const O=function(Ke,Ze,He,ft){const Ye=Ke.getNodesInfo()[Ze];if(Ye.hiddenByReplacement||!Ye.node.meshes)return;let gt=Number.MAX_VALUE;const bt=Ye.node,Rt=He.tile,Vt=ft.calculatePosMatrix(Rt.tileID.toUnwrapped(),ft.worldSize),Et=Ye.evaluatedScale;let Ut=0;ft.elevation&&bt.elevation&&(Ut=bt.elevation*ft.elevation.exaggeration()),ve.mat4.translate(Vt,Vt,[(bt.anchor?bt.anchor[0]:0)*(Et[0]-1),(bt.anchor?bt.anchor[1]:0)*(Et[1]-1),Ut]),ve.mat4.scale(Vt,Vt,Et);const Dt=He.queryGeometry,jt=Dt.isPointQuery()?Dt.screenBounds:Dt.screenGeometry,ga=function(Ya){const xa=ve.mat4.multiply([],Vt,Ya.matrix);ve.mat4.multiply(xa,ft.expandedFarZProjMatrix,xa);for(let Oa=0;Oa<Ya.meshes.length;++Oa){const _a=Ya.meshes[Oa];if(Oa===Ya.lightMeshIndex)continue;const gr=AL(jt,ft,xa,_a.aabb);gr!=null&&(gt=Math.min(gr,gt))}if(Ya.children)for(const Oa of Ya.children)ga(Oa)};if(ga(bt),gt===Number.MAX_VALUE)return;const ma=new Ln(0,0);return NL(Rt.tileID.canonical,ma,Ye.node.anchor[0],Ye.node.anchor[1]),{intersectionZ:gt,position:ma,feature:Ye.feature}}(I,V,y,m);if(!O)return;const{z:M,x:B,y:Y}=S.tileID.canonical,{feature:ee,intersectionZ:ue,position:le}=O;let re={};ee.id!==void 0&&(re=f.sourceCache.getFeatureState(N.sourceLayer,ee.id));const pe=new o_({},M,B,Y,ee.id);pe.tile=this.tileID.canonical,pe.state=re,pe.properties=ee.properties,pe.geometry={type:"Point",coordinates:[le.lng,le.lat]};let Se=this.serializedLayersCache.get(_);Se||(Se=N.serialize(),Se.id=_,this.serializedLayersCache.set(_,Se)),pe.source=Se.source,pe.sourceLayer=Se["source-layer"],pe.layer=Rn({},Se);let xe=!1;for(const Ke of D){this.updateFeatureProperties(pe,Ke);const{filter:Ze}=Ke;if(Ze){if(ee.properties=pe.properties,Ze.needGeometry){if(!Ze.filter(new vn(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!Ze.filter(new vn(this.tileID.overscaledZ),ee))continue}xe=!0,Ke.targetId&&this.addFeatureVariant(pe,Ke)}xe&&this.appendToResult(i,_,V,pe,ue)}updateFeatureProperties(i,u,f){if(u.properties){const y={};for(const m in u.properties){const _=u.properties[m].evaluate({zoom:this.z},i._vectorTileFeature,i.state,i.tile,f);_!=null&&(y[m]=_)}i.properties=y}}addFeatureVariant(i,u,f){const y={target:u.target,namespace:u.namespace,uniqueFeatureID:u.uniqueFeatureID};u.properties&&(y.properties=i.properties),i.variants=i.variants||{},i.variants[u.targetId]=i.variants[u.targetId]||[],i.variants[u.targetId].push(y)}appendToResult(i,u,f,y,m){let _=i[u];_===void 0&&(_=i[u]=[]),_.push({featureIndex:f,feature:y,intersectionZ:m})}lookupSymbolFeatures(i,u,f,y,m){const _={};this.loadVTLayers();for(const b of i)this.loadMatchingFeature(_,{bucketIndex:u,sourceLayerIndex:f,featureIndex:b,layoutVertexArrayOffset:0},y,m);return _}loadFeature(i){const{featureIndex:u,sourceLayerIndex:f}=i;this.loadVTLayers();const y=this.sourceLayerCoder.decode(f),m=this.vtFeatures[y];if(m[u])return m[u];const _=this.vtLayers[y].feature(u);return m[u]=_,_}hasLayer(i){for(const u of this.bucketLayerIDs)for(const f of u)if(i===f)return!0;return!1}getId(i,u){let f=i.id;if(this.promoteId){const y=Array.isArray(this.promoteId)||typeof this.promoteId!="object"?this.promoteId:this.promoteId[u];if(y!=null)if(Array.isArray(y)){if(!this.promoteIdExpression){const m=G(y);if(m.result!=="success"){const _=m.value.map(b=>`${b.key}: ${b.message}`).join(", ");return void en(`Failed to create expression for promoteId: ${_}`)}this.promoteIdExpression=m.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new wd),f=this.promoteIdExpression.evaluate({zoom:0},i)}else f=i.properties[y];typeof f=="boolean"&&(f=Number(f))}return f}}function wF(d,i,u,f,y){return yr(d,(m,_)=>{const b=i instanceof Ru?i.get(_):null;return b&&b.evaluate?b.evaluate(u,f,y):b})}function Cee(d,i){return i-d}xt(vF,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const RF=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class qP{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(i,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=f>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const m=RF[15&f];if(!m)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(i,2,1),[b]=new Uint32Array(i,4,1);return new qP(b,_,m,i)}constructor(i,u=64,f=Float64Array,y){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const m=RF.indexOf(this.ArrayType),_=2*i*this.ArrayType.BYTES_PER_ELEMENT,b=i*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-b%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${f}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+b+N,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+_+b+N),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+b+N,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=i)}add(i,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=i,this.coords[this._pos++]=u,f}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return HP(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,u,f,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:_,nodeSize:b}=this,N=[0,m.length-1,0],D=[];for(;N.length;){const S=N.pop()||0,V=N.pop()||0,I=N.pop()||0;if(V-I<=b){for(let Y=I;Y<=V;Y++){const ee=_[2*Y],ue=_[2*Y+1];ee>=i&&ee<=f&&ue>=u&&ue<=y&&D.push(m[Y])}continue}const O=I+V>>1,M=_[2*O],B=_[2*O+1];M>=i&&M<=f&&B>=u&&B<=y&&D.push(m[O]),(S===0?i<=M:u<=B)&&(N.push(I),N.push(O-1),N.push(1-S)),(S===0?f>=M:y>=B)&&(N.push(O+1),N.push(V),N.push(1-S))}return D}within(i,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:m,nodeSize:_}=this,b=[0,y.length-1,0],N=[],D=f*f;for(;b.length;){const S=b.pop()||0,V=b.pop()||0,I=b.pop()||0;if(V-I<=_){for(let Y=I;Y<=V;Y++)SF(m[2*Y],m[2*Y+1],i,u)<=D&&N.push(y[Y]);continue}const O=I+V>>1,M=m[2*O],B=m[2*O+1];SF(M,B,i,u)<=D&&N.push(y[O]),(S===0?i-f<=M:u-f<=B)&&(b.push(I),b.push(O-1),b.push(1-S)),(S===0?i+f>=M:u+f>=B)&&(b.push(O+1),b.push(V),b.push(1-S))}return N}}function HP(d,i,u,f,y,m){if(y-f<=u)return;const _=f+y>>1;TF(d,i,_,f,y,m),HP(d,i,u,f,_-1,1-m),HP(d,i,u,_+1,y,1-m)}function TF(d,i,u,f,y,m){for(;y>f;){if(y-f>600){const D=y-f+1,S=u-f+1,V=Math.log(D),I=.5*Math.exp(2*V/3),O=.5*Math.sqrt(V*I*(D-I)/D)*(S-D/2<0?-1:1);TF(d,i,u,Math.max(f,Math.floor(u-S*I/D+O)),Math.min(y,Math.floor(u+(D-S)*I/D+O)),m)}const _=i[2*u+m];let b=f,N=y;for(Y1(d,i,f,u),i[2*y+m]>_&&Y1(d,i,f,y);b<N;){for(Y1(d,i,b,N),b++,N--;i[2*b+m]<_;)b++;for(;i[2*N+m]>_;)N--}i[2*f+m]===_?Y1(d,i,f,N):(N++,Y1(d,i,N,y)),N<=u&&(f=N+1),u<=N&&(y=N-1)}}function Y1(d,i,u,f){$P(d,u,f),$P(i,2*u,2*f),$P(i,2*u+1,2*f+1)}function $P(d,i,u){const f=d[i];d[i]=d[u],d[u]=f}function SF(d,i,u,f){const y=d-u,m=i-f;return y*y+m*m}n.$=js,n.A=Io,n.B=ku,n.C=$c,n.D=t_,n.E=Gl,n.F=2,n.G=z1,n.H=V4,n.I=Lo,n.J=class extends CS{},n.K=fu,n.L=Tn,n.M=Bp,n.N=jc,n.O=Gc,n.P=Bt,n.Q=Zu,n.R=ws,n.S=Uh,n.T=SP,n.U=sh,n.V=CS,n.W=Ee,n.X=G,n.Y=cs,n.Z=ti,n._=ko,n.a=function(d){return be.API_CDN_URL_REGEX.test(d)},n.a$=K,n.a0=Wo,n.a1=oh,n.a2=qf,n.a3=xl,n.a4=function(d){const i=d.value;let u=[];if(!i)return u;const f=fu(i);return f!=="string"?(u=u.concat([new CS(d.key,i,`string expected, "${f}" found`)]),u):(vL(i,!0)||(u=u.concat([new CS(d.key,i,`invalid url "${i}"`)])),u)},n.a5=Gt,n.a6=To,n.a7=zi,n.a8=Ca,n.a9=class{constructor(d){this.specification=d}possiblyEvaluate(d,i){return ki(d.expression.evaluate(i))}interpolate(d,i,u){return{x:hr(d.x,i.x,u),y:hr(d.y,i.y,u),z:hr(d.z,i.z,u),azimuthal:hr(d.azimuthal,i.azimuthal,u),polar:hr(d.polar,i.polar,u)}}},n.aA=function(d,i){const u={};for(let f=0;f<i.length;f++){const y=i[f];y in d&&(u[y]=d[y])}return u},n.aB=Zh,n.aC=xi,n.aD=class{constructor(d){this.entries={},this.scheduler=d}request(d,i,u,f){const y=this.entries[d]=this.entries[d]||{callbacks:[]};if(y.result){const[m,_]=y.result;return this.scheduler?this.scheduler.add(()=>{f(m,_)},i):f(m,_),()=>{}}return y.callbacks.push(f),y.cancel||(y.cancel=u((m,_)=>{y.result=[m,_];for(const b of y.callbacks)this.scheduler?this.scheduler.add(()=>{b(m,_)},i):b(m,_);setTimeout(()=>delete this.entries[d],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(m=>m!==f),y.callbacks.length||(y.cancel(),delete this.entries[d]))}}},n.aE=function(d,i,u){const f=JSON.stringify(d.request);return d.data&&(this.deduped.entries[f]={result:[null,d.data]}),this.deduped.request(f,{type:"parseTile",isSymbolTile:d.isSymbolTile,zoom:d.tileZoom},y=>{const m=Vi(d.request,(_,b,N,D)=>{_?y(_):b&&y(null,{vectorTile:u?void 0:new vh.VectorTile(new on(b)),rawData:b,cacheControl:N,expires:D})});return()=>{m.cancel(),y()}},i)},n.aF=function(d){yn++,yn>Nr&&(d.getActor().send("enforceCacheSizeLimit",Ar),yn=0)},n.aG=function(d){return d<=1?1:Math.pow(2,Math.floor(Math.log(d)/Math.LN2))},n.aH=pa,n.aI=oL,n.aJ=fL,n.aK=sL,n.aL=function(d,i){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let f=0;f<d.length;f++){const y=document.createElement("source");kl(d[f])||(u.crossOrigin="Anonymous"),y.src=d[f],u.appendChild(y)}return{cancel:()=>{}}},n.aM=vS,n.aN=function(d){return fetch(d).then(i=>i.arrayBuffer()).then(i=>yF(i,0,d))},n.aO=AF,n.aP=class{constructor(d,i,u,f){this.id=d,this.position=i!=null?new Ln(i[0],i[1]):new Ln(0,0),this.orientation=u??[0,0,0],this.nodes=f,this.uploaded=!1,this.aabb=new er([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(d,i){if(ve.mat4.multiply(d.matrix,i,d.matrix),d.meshes)for(const u of d.meshes){const f=er.applyTransformFast(u.aabb,d.matrix);this.aabb.encapsulate(f)}if(d.children)for(const u of d.children)this._applyTransformations(u,d.matrix)}computeBoundsAndApplyParent(){const d=ve.mat4.identity([]);for(const i of this.nodes)this._applyTransformations(i,d)}computeModelMatrix(d,i,u,f,y,m,_=!1){CL(this.matrix,this,d.transform,this.position,i,u,f,y,m,_)}upload(d){if(!this.uploaded){for(const i of this.nodes)EP(i,d);for(const i of this.nodes)bS(i);this.uploaded=!0}}destroy(){for(const d of this.nodes)NP(d)}},n.aQ=Qa,n.aR=D1,n.aS=Pu,n.aT=wi,n.aU=Cu,n.aV=Ps,n.aW=Wa,n.aX=jp,n.aY=AS,n.aZ=function(){is.isLoading()||is.isLoaded()||po()!=="deferred"||vi()},n.a_=lh,n.aa=vn,n.ab=he,n.ac=o,n.ad=ve,n.ae=jr,n.af=Ru,n.ag=zl,n.ah=hr,n.ai=Na,n.aj=zc,n.ak=Va,n.al=bn,n.am=class{constructor(d){this.specification=d}possiblyEvaluate(d,i){return function([u,f]){const y=ki([1,u,f]);return{x:y.x,y:y.y,z:y.z}}(d.expression.evaluate(i))}interpolate(d,i,u){return{x:hr(d.x,i.x,u),y:hr(d.y,i.y,u),z:hr(d.z,i.z,u)}}},n.an=function(d,i,u=0,f=!0){const y=new Bt(u,u),m=d.sub(y),_=i.add(y),b=[m,new Bt(_.x,m.y),_,new Bt(m.x,_.y)];return f&&b.push(m.clone()),b},n.ao=function(d,i){const u=[];for(let f=0;f<d.length;f++){const y=pn(f-1,-1,d.length-1),m=pn(f+1,-1,d.length-1),_=d[f],b=d[m],N=d[y].sub(_).unit(),D=b.sub(_).unit(),S=D.angleWithSep(N.x,N.y),V=N.add(D).unit().mult(-1*i/Math.sin(S/2));u.push(_.add(V))}return u},n.ap=H4,n.aq=st,n.ar=function(d,i,u=0){return ve.vec3.fromValues(((i.x-u)*d.scale-d.x)*Na,(i.y*d.scale-d.y)*Na,Ly(i.z,i.y))},n.as=Cr,n.at=rS,n.au=function(d){let i=1/0,u=1/0,f=-1/0,y=-1/0;for(const m of d)i=Math.min(i,m.x),u=Math.min(u,m.y),f=Math.max(f,m.x),y=Math.max(y,m.y);return{min:new Bt(i,u),max:new Bt(f,y)}},n.av=yl,n.aw=it,n.ax=A,n.ay=ka,n.az=ml,n.b=function(d){return be.API_FONTS_REGEX.test(d)},n.b$=TS,n.b0=o_,n.b1=zo,n.b2=Vf,n.b3=Hy,n.b4=Z,n.b5=Su,n.b6=Ld,n.b7=pr,n.b8=Oi,n.b9=aA,n.bA=KT,n.bB=pP,n.bC=U4,n.bD=dP,n.bE=qP,n.bF=pn,n.bG=hn,n.bH=Go,n.bI=function(d,i,u){d[4*i+0]=u[0],d[4*i+1]=u[1],d[4*i+2]=u[2],d[4*i+3]=u[3]},n.bJ=Jc,n.bK=Xc,n.bL=tp,n.bM=ms,n.bN=vc,n.bO=Ln,n.bP=X4,n.bQ=$t,n.bR=Tr,n.bS=mL,n.bT=da,n.bU=mo,n.bV=function(d,i,u,f,y,m,_,b,N){if(N.name==="globe")return mo(d,i,new da(u,f,y),!1);const D=D1({z:u,x:f,y},N);return new er([(m+D.x/D.scale)*i,i*(D.y/D.scale),_],[(m+D.x2/D.scale)*i,i*(D.y2/D.scale),b])},n.bW=function(d,i,u){let f=0;for(let y=0;y<2;++y)d[y]>0&&(f+=(d[y]-0)*(d[y]-0)),i[y]<0&&(f+=(0-i[y])*(0-i[y]));return f},n.bX=Eu,n.bY=Kp,n.bZ=function(d){const i=ve.mat4.identity(new Float64Array(16));ve.mat4.multiply(i,d.pixelMatrix,d.globeMatrix);const u=[0,Bo,0],f=[0,Wu,0];return ve.vec3.transformMat4(u,u,i),ve.vec3.transformMat4(f,f,i),[u[0]>0&&u[0]<=d.width&&u[1]>0&&u[1]<=d.height&&!gl(d,new Ln(d.center.lat,90)),f[0]>0&&f[0]<=d.width&&f[1]>0&&f[1]<=d.height&&!gl(d,new Ln(d.center.lat,-90))]},n.b_=function(d,i){const{scale:u}=d.tileTransform,f=u*Na/(d.tileSize*Math.pow(2,i.zoom-d.tileID.overscaledZ+d.tileID.canonical.z));return ve.mat2.scale(new Float32Array(4),i.inverseAdjustmentMatrix,[f,f])},n.ba=wP,n.bb=function(d,i){const u=zl(i.zoom);if(u===0)return hs(d);const f=Cn(d),y=ni(f),m=yl(f.getWest())*i.worldSize,_=yl(f.getEast())*i.worldSize,b=xi(f.getNorth())*i.worldSize,N=xi(f.getSouth())*i.worldSize,D=[m,b,0],S=[_,b,0],V=[m,N,0],I=[_,N,0],O=ve.mat4.invert([],i.globeMatrix);return ve.vec3.transformMat4(D,D,O),ve.vec3.transformMat4(S,S,O),ve.vec3.transformMat4(V,V,O),ve.vec3.transformMat4(I,I,O),y[0]=ao(y[0],V,u),y[1]=ao(y[1],I,u),y[2]=ao(y[2],S,u),y[3]=ao(y[3],D,u),er.fromPoints(y)},n.bc=Ri,n.bd=On,n.be=ao,n.bf=Dd,n.bg=Lr,n.bh=IS,n.bi=on,n.bj=Vi,n.bk=function(d,i){const u=[];for(const f in d)f in i||u.push(f);return u},n.bl=Dn,n.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],n.bn=la,n.bo=function(d,i){const{x:u,y:f}=d.point,y=eu(u,f,d.worldSize/d._pixelsPerMercatorPixel,0,0);return ve.mat4.multiply(y,y,ss(hs(i)))},n.bp=rr,n.bq=jd,n.br=ja,n.bs=function(d,i,u,f,y){const m=5*i+2;d.float32[m+0]=u,d.float32[m+1]=f,d.float32[m+2]=y},n.bt=gS,n.bu=N4,n.bv=Ce,n.bw=Fe,n.bx=Nf,n.by=_L,n.bz=$T,n.c=at,n.c$=nS,n.c0=pL,n.c1=function(d){const i=pL(d,!0);return ve.mat2.invert([],[i[0],i[1],i[4],i[5]])},n.c2=xr,n.c3=function(d){const{x:i,y:u}=d.point,{lng:f,lat:y}=d._center;return eu(i,u,d.worldSize,f,y)},n.c4=za,n.c5=Ia,n.c6=gh,n.c7=function(d){const i=Math.round((d+45+360)%360/90)%4;return nr[i]},n.c8=45,n.c9=gn,n.cA=wf,n.cB=class extends Fd{constructor(d){super(d),this.current=Ud}set(d,i,u){if(this.fetchUniformLocation(d,i)){for(let f=0;f<9;f++)if(u[f]!==this.current[f]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},n.cC=cr,n.cD=function(d,i,u){const f=zl(u.zoom),y=d.style.map._antialias,m=d.terrain&&d.terrain.exaggeration()>0;return f===0&&!y&&!m},n.cE=function(d){const i=d.pixelsPerMeter,u=i/Go(1,d.center.lat),f=ve.mat4.identity(new Float64Array(16));return ve.mat4.translate(f,f,[d.point.x,d.point.y,0]),ve.mat4.scale(f,f,[u,u,i]),Float32Array.from(f)},n.cF=Cn,n.cG=function(d){const i=Eu-5;d=ka(d,-80.051129,i)/i*90;const u=Math.pow(Math.abs(Math.sin(Va(d))),3);return Math.round(u*(bf.length-1))},n.cH=function(d,i,u,f){const y=i.getNorth(),m=i.getSouth(),_=i.getWest(),b=i.getEast(),N=1<<d.z,D=b-_,S=y-m,V=D/np,I=-S/bf[u],O=[0,V,0,I,0,0,y,_,0];if(d.z>0){const M=180/f;ve.mat3.multiply(O,O,[M/D+1,0,0,0,M/S+1,0,-.5*M/V,.5*M/I,1])}return O[2]=N,O[5]=d.x,O[8]=d.y,O},n.cI=hs,n.cJ=function(d,i,u){const f=ve.mat4.identity(new Float64Array(16)),y=(i/(1<<d)-.5)*Math.PI*2;return ve.mat4.rotateY(f,u.globeMatrix,y),Float32Array.from(f)},n.cK=class{isDataAvailableAtPoint(d){const i=this._source();if(this.isUsingMockSource()||!i||d.y<0||d.y>1)return!1;const u=i.getSource().maxzoom,f=1<<u,y=Math.floor(d.x),m=Math.floor((d.x-y)*f),_=Math.floor(d.y*f),b=this.findDEMTileFor(new pa(u,y,u,m,_));return!(!b||!b.dem)}getAtPointOrZero(d,i=0){return this.getAtPoint(d,i)||0}getAtPoint(d,i,u=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const f=this._source();if(!f||d.y<0||d.y>1)return i;const y=f.getSource().maxzoom,m=1<<y,_=Math.floor(d.x),b=d.x-_,N=new pa(y,_,y,Math.floor(b*m),Math.floor(d.y*m)),D=this.findDEMTileFor(N);if(!D||!D.dem)return i;const S=D.dem,V=1<<D.tileID.canonical.z,I=(b*V-D.tileID.canonical.x)*S.dim,O=(d.y*V-D.tileID.canonical.y)*S.dim,M=Math.floor(I),B=Math.floor(O);return(u?this.exaggeration():1)*hr(hr(S.get(M,B),S.get(M,B+1),O-B),hr(S.get(M+1,B),S.get(M+1,B+1),O-B),I-M)}getAtTileOffset(d,i,u){const f=1<<d.canonical.z;return this.getAtPointOrZero(new o(d.wrap+(d.canonical.x+i/Na)/f,(d.canonical.y+u/Na)/f))}getAtTileOffsetFunc(d,i,u,f){return y=>{const m=this.getAtTileOffset(d,y.x,y.y),_=f.upVector(d.canonical,y.x,y.y),b=f.upVectorScale(d.canonical,i,u).metersToTile;return ve.vec3.scale(_,_,m*b),_}}getForTilePoints(d,i,u,f){if(this.isUsingMockSource())return!1;const y=e_.create(this,d,f);return!!y&&(i.forEach(m=>{m[2]=this.exaggeration()*y.getElevationAt(m[0],m[1],u)}),!0)}getMinMaxForTile(d){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(d);if(!i||!i.dem)return null;const u=i.dem.tree,f=i.tileID,y=1<<d.canonical.z-f.canonical.z;let m=d.canonical.x/y-f.canonical.x,_=d.canonical.y/y-f.canonical.y,b=0;for(let N=0;N<d.canonical.z-f.canonical.z&&!u.leaves[b];N++){m*=2,_*=2;const D=2*Math.floor(_)+Math.floor(m);b=u.childOffsets[b]+D,m%=1,_%=1}return{min:this.exaggeration()*u.minimums[b],max:this.exaggeration()*u.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(d,i,u){throw new Error("Pure virtual method called.")}pointCoordinate(d){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(d){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const d=this.visibleDemTiles;if(d.length===0)return null;let i=!1,u=Number.MAX_VALUE,f=Number.MIN_VALUE;for(const y of d){const m=this.getMinMaxForTile(y.tileID);m&&(u=Math.min(u,m.min),f=Math.max(f,m.max),i=!0)}return i?{min:u,max:f}:null}},n.cL=Jv,n.cM=sn,n.cN=function(d,i){return[Math.pow(d[0],2.2)*i,Math.pow(d[1],2.2)*i,Math.pow(d[2],2.2)*i]},n.cO=Zo,n.cP=Xt,n.cQ=Fs,n.cR=256,n.cS=function(d,i){const u=[0,0,0],f=Ri(hs(i.canonical));return ve.vec3.transformMat4(u,u,f),ve.vec3.transformMat4(u,u,d),u},n.cT=d=>({u_camera_to_center_distance:new ms(d),u_extrude_scale:new Gm(d),u_device_pixel_ratio:new ms(d),u_matrix:new Jc(d),u_inv_rot_matrix:new Jc(d),u_merc_center:new Xc(d),u_tile_id:new tp(d),u_zoom_transition:new ms(d),u_up_dir:new tp(d),u_emissive_strength:new ms(d)}),n.cU=d=>({u_matrix:new Jc(d),u_pixels_to_tile_units:new Gm(d),u_device_pixel_ratio:new ms(d),u_width_scale:new ms(d),u_floor_width_scale:new ms(d),u_units_to_pixels:new Xc(d),u_dash_image:new vc(d),u_gradient_image:new vc(d),u_image_height:new ms(d),u_texsize:new Xc(d),u_tile_units_to_pixels:new ms(d),u_alpha_discard_threshold:new ms(d),u_trim_offset:new Xc(d),u_trim_fade_range:new Xc(d),u_trim_color:new ap(d),u_emissive_strength:new ms(d),u_zbias_factor:new ms(d),u_tile_to_meter:new ms(d)}),n.cV=d=>({u_matrix:new Jc(d),u_texsize:new Xc(d),u_pixels_to_tile_units:new Gm(d),u_device_pixel_ratio:new ms(d),u_width_scale:new ms(d),u_floor_width_scale:new ms(d),u_image:new vc(d),u_units_to_pixels:new Xc(d),u_tile_units_to_pixels:new ms(d),u_alpha_discard_threshold:new ms(d),u_trim_offset:new Xc(d),u_trim_fade_range:new Xc(d),u_trim_color:new ap(d),u_emissive_strength:new ms(d),u_zbias_factor:new ms(d),u_tile_to_meter:new ms(d)}),n.cW=Jl,n.cX=se,n.cY=ba,n.cZ=op,n.c_=(d,i,u,f,y,m)=>{const _=d.transform,b=_.projection.name==="globe";let N;if(m.paint.get("circle-pitch-alignment")==="map")if(b){const S=Zo(_.zoom,i.canonical)*_._pixelsPerMercatorPixel;N=Float32Array.from([S,0,0,S])}else N=_.calculatePixelsToTileUnitsMatrix(u);else N=new Float32Array([_.pixelsToGLUnits[0],0,0,_.pixelsToGLUnits[1]]);const D={u_camera_to_center_distance:d.transform.getCameraToCenterDistance(_.projection),u_matrix:d.translatePosMatrix(i.projMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Zt.devicePixelRatio,u_extrude_scale:N,u_inv_rot_matrix:Ol,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(b){D.u_inv_rot_matrix=f,D.u_merc_center=y,D.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],D.u_zoom_transition=zl(_.zoom);const S=y[0]*Na,V=y[1]*Na;D.u_up_dir=_.projection.upVector(new da(0,0,0),S,V)}return D},n.ca=sp,n.cb=ap,n.cc=function(d,i,u){const f=Math.sqrt(d*d+i*i+u*u),y=f>0?Math.acos(u/f)*vr:0;let m=d!==0||i!==0?Math.atan2(-i,-d)*vr+90:0;return m<0&&(m+=360),[f,m,y]},n.cd=g,n.ce=er,n.cf=ki,n.cg=function(d){return[Math.pow(d[0],1/2.2),Math.pow(d[1],1/2.2),Math.pow(d[2],1/2.2)]},n.ch=function(d,i){return d.readFields(RQ,{icons:[]},i)},n.ci=function(d){return d({pluginStatus:Fn,pluginURL:_n}),Un.on("pluginStateChange",d),d},n.cj=PS,n.ck=Y0,n.cl=hP,n.cm=nc,n.cn=ds,n.co=Ma,n.cp=oo,n.cq=Mn,n.cr=function(d){const i=d.indexOf($f);return i>=0?d.slice(0,i):d},n.cs=function(d){return d.indexOf($f)>=0},n.ct=function(d){const i=d.indexOf($f);return i>=0?d.slice(i+1):""},n.cu=function(d){const i=[],u=d.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),d.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},n.cv=function(d,i,u,f){return d.type==="custom"?new lQ(d,i):new _Q[d.type](d,i,u,f)},n.cw=jn,n.cx=class extends o_{constructor(d,i){super(d._vectorTileFeature,d._z,d._x,d._y,d.id),d.state&&(this.state=Object.assign({},d.state)),this.target=i.target,this.namespace=i.namespace,i.properties&&(this.properties=i.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=d.source,this.sourceLayer=d.sourceLayer,this.layer=d.layer)}toJSON(){const d=super.toJSON();return d.target=this.target,d.namespace=this.namespace,d}},n.cy=Un,n.cz=Ko,n.d=function(d){return be.API_TILEJSON_REGEX.test(d)},n.d$=_F,n.d0=Ts,n.d1=(d,i,u,f,y,m,_,b)=>{const N=d.transform,D=N.pitch<15?P1(.07,.7,ka((14-N.zoom)/5,0,1)):.07,S=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:E1(d,i,u,f),u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:N.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:y,u_width_scale:m,u_floor_width_scale:_,u_image:0,u_tile_units_to_pixels:mA(i,N),u_units_to_pixels:[1/N.pixelsToGLUnits[0],1/N.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:b,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(S?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:D,u_tile_to_meter:g(i.tileID.canonical,0)}},n.d2=(d,i,u,f,y,m,_,b,N)=>{const D=d.transform,S=D.calculatePixelsToTileUnitsMatrix(i),V=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",I=D.pitch<15?P1(.07,.7,ka((14-D.zoom)/5,0,1)):.07;return{u_matrix:E1(d,i,u,f),u_pixels_to_tile_units:S,u_device_pixel_ratio:m,u_width_scale:_,u_floor_width_scale:b,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:y,u_texsize:yA(u)&&i.lineAtlasTexture?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:mA(i,d.transform),u_alpha_discard_threshold:0,u_trim_offset:N,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(V?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:I,u_tile_to_meter:g(i.tileID.canonical,0)}},n.d3=ca,n.d4=Uy,n.d5=Ly,n.d6=_1,n.d7=La,n.d8=G0,n.d9=up,n.dA=$m,n.dB=ur,n.dC=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},n.dD=Pr,n.dE=jo,n.dF=Rc,n.dG=function([d,i,u]){const f=Math.hypot(d,i,u),y=Math.atan2(d,u),m=.5*Math.PI-Math.acos(-i/f);return new Ln(za(y),za(m))},n.dH=bP,n.dI=function(d){const i=d.navigator?d.navigator.userAgent:null;return!!function(u){if(Ei==null){const f=u.navigator?u.navigator.userAgent:null;Ei=!!u.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return Ei}(d)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},n.dJ=function(d,i){Ar=d,Nr=i},n.dK=gl,n.dL=Yu,n.dM=function(d){const i=[0,0,0],u=ve.mat4.identity(new Float64Array(16));return ve.mat4.multiply(u,d.pixelMatrix,d.globeMatrix),ve.vec3.transformMat4(i,i,u),new Bt(i[0],i[1])},n.dN=function(d,i,u=!1){if(Fn===bi||Fn===Zn||Fn===ai)throw new Error("setRTLTextPlugin cannot be called multiple times.");_n=Zt.resolveURL(d),Fn=bi,Hi=i,Fi(),u||vi()},n.dO=po,n.dP=function(){PS().acquire(zP)},n.dQ=function(){const d=G1;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(zP),G1=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},n.dR=RA,n.dS=function(d){const i=Xn();if(!i)return;const u=i.delete(Ba);d&&u.catch(d).then(()=>d())},n.dT=B1,n.dU=uF,n.dV=function(d){BP=Zt.resolveURL(d),s_||(s_=new t_(PS(),new Gl)),s_.broadcast("setDracoUrl",BP)},n.dW=cF,n.dX=function(d){i_=Zt.resolveURL(d),s_||(s_=new t_(PS(),new Gl)),s_.broadcast("setMeshoptUrl",i_)},n.dY=xt,n.dZ=Yp,n.d_=dp,n.da=450,n.db=7,n.dc=oQ,n.dd=xn,n.de=km,n.df=256,n.dg=ss,n.dh=So,n.di=Hs,n.dj=xu,n.dk=function(d,i,u,f,y){return ka((d-i)/(u-i)*(y-f)+f,f,y)},n.dl=Fh,n.dm=qh,n.dn=class{constructor(d,i,u,f){this.context=d,this.format=f,this.size=u,this.texture=d.gl.createTexture();const[y,m,_]=this.size,{gl:b}=d;b.bindTexture(b.TEXTURE_3D,this.texture),d.pixelStoreUnpackFlipY.set(!1),d.pixelStoreUnpack.set(1),d.pixelStoreUnpackPremultiplyAlpha.set(!1),b.texImage3D(b.TEXTURE_3D,0,this.format,y,m,_,0,RP(this.format),TP(this.format),i.data)}bind(d,i){const{context:u}=this,{gl:f}=u;f.bindTexture(f.TEXTURE_3D,this.texture),d!==this.minFilter&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MAG_FILTER,d),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_MIN_FILTER,d),this.minFilter=d),i!==this.wrapS&&(f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_S,i),f.texParameteri(f.TEXTURE_3D,f.TEXTURE_WRAP_T,i),this.wrapS=i)}destroy(){const{gl:d}=this.context;d.deleteTexture(this.texture),this.texture=null}},n.dp=xP,n.dq=[1,1,1],n.dr=e_,n.ds=Q0,n.dt=Id,n.du=Gh,n.dv=sl,n.dw=Jf,n.dx=fh,n.dy=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Bt(1/0,1/0),max:new Bt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(d,i=!1){const u=ZT(new Bt(0,0),new Bt(Na,Na),d),f=[];if(i&&!Qp(u,this._globalClipBounds))return f;for(const y of this._activeRegions){if(y.hiddenByOverlap||!Qp(u,y))continue;const m=iP(y.min,y.max,d);f.push({min:m.min,max:m.max,sourceId:this._sourceIds[y.priority],footprint:y.footprint,footprintTileId:y.tileId,order:y.order,clipMask:y.clipMask,clipScope:y.clipScope})}return f}setSources(d){this._setSources(d.map(i=>({getSourceId:()=>i.cache.id,getFootprints:()=>{const u=[];for(const f of i.cache.getVisibleCoordinates()){const y=i.cache.getTile(f).buckets[i.layer];y&&y.updateFootprints(f.toUnwrapped(),u)}return u},getOrder:()=>i.order,getClipMask:()=>i.clipMask,getClipScope:()=>i.clipScope})))}_addSource(d){const i=d.getFootprints();if(i.length===0)return;const u=d.getOrder(),f=d.getClipMask(),y=d.getClipScope();for(const m of i){if(!m.footprint)continue;const _=ZT(m.footprint.min,m.footprint.max,m.id);this._activeRegions.push({min:_.min,max:_.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:m.id,footprint:m.footprint,order:u,clipMask:f,clipScope:y})}this._sourceIds.push(d.getSourceId())}_computeReplacement(){this._activeRegions.sort((i,u)=>i.priority-u.priority||k0(i.min,u.min)||k0(i.max,u.max)||i.order-u.order||i.clipMask-u.clipMask||function(f,y){const m=(_,b)=>_+b;return f.length-y.length||f.reduce(m,"").localeCompare(y.reduce(m,""))}(i.clipScope,u.clipScope));let d=this._activeRegions.length!==this._prevRegions.length;if(!d){let i=0;for(;!d&&i!==this._activeRegions.length;){const u=this._activeRegions[i],f=this._prevRegions[i];d=u.priority!==f.priority||!jT(u,f)||u.order!==f.order||u.clipMask!==f.clipMask||!la(u.clipScope,f.clipScope),++i}}if(d){++this._updateTime;for(const u of this._activeRegions)u.order!==$m&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const i=u=>{const f=this._activeRegions;if(u>=f.length)return u;const y=f[u].priority;for(;u<f.length&&f[u].priority===y;)++u;return u};if(this._sourceIds.length>1){let u=0,f=i(u);for(;u!==f;){let y=u;const m=u;for(;y!==f;){const _=this._activeRegions[y];_.hiddenByOverlap=!1;for(let b=0;b<m;b++){const N=this._activeRegions[b];if(!N.hiddenByOverlap&&_.order===$m&&Qp(_,N)&&(_.hiddenByOverlap=HT(_.footprint,_.tileId,N.footprint,N.tileId),_.hiddenByOverlap))break}++y}u=f,f=i(u)}}}}_setSources(d){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let i=d.length-1;i>=0;i--)this._addSource(d[i]);this._computeReplacement()}},n.dz=class{constructor(d){this._createGrid(d),this._createPoles(d)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const d of this._poleSegments)d.destroy();for(const d of this._gridSegments)d.withSkirts.destroy(),d.withoutSkirts.destroy()}_fillGridMeshWithLods(d,i){const u=new Su,f=new Ps,y=[],m=d+1+2,_=i[0]+1,b=i[0]+1+(1+i.length),N=(D,S,V)=>{let I=D===m-1?D-2:D===0?D:D-1;return I+=V?24575:0,[I,S]};for(let D=0;D<m;++D)u.emplaceBack(...N(D,0,!0));for(let D=0;D<_;++D)for(let S=0;S<m;++S)u.emplaceBack(...N(S,D,(S===0||S===m-1)&&!0));for(let D=0;D<i.length;++D){const S=i[D];for(let V=0;V<m;++V)u.emplaceBack(...N(V,S,!0))}for(let D=0;D<i.length;++D){const S=f.length,V=i[D]+1+2,I=new Ps;for(let B=0;B<V-1;B++){const Y=B===V-2,ee=Y?m*(b-i.length+D-B):m;for(let ue=0;ue<m-1;ue++){const le=B*m+ue;B===0||Y||ue===0||ue===m-2?(I.emplaceBack(le+1,le,le+ee),I.emplaceBack(le+ee,le+ee+1,le+1)):(f.emplaceBack(le+1,le,le+ee),f.emplaceBack(le+ee,le+ee+1,le+1))}}const O=Oi.simpleSegment(0,S,u.length,f.length-S);for(let B=0;B<I.uint16.length;B+=3)f.emplaceBack(I.uint16[B],I.uint16[B+1],I.uint16[B+2]);const M=Oi.simpleSegment(0,S,u.length,f.length-S);y.push({withoutSkirts:O,withSkirts:M})}return{vertices:u,indices:f,segments:y}}_createGrid(d){const i=this._fillGridMeshWithLods(np,bf);this._gridSegments=i.segments,this._gridBuffer=d.createVertexBuffer(i.vertices,pr.members),this._gridIndexBuffer=d.createIndexBuffer(i.indices,!0)}_createPoles(d){const i=new Ps;for(let _=0;_<=np;_++)i.emplaceBack(0,_+1,_+2);this._poleIndexBuffer=d.createIndexBuffer(i,!0);const u=new Hs,f=new Hs,y=new Hs,m=new Hs;this._poleSegments=[];for(let _=0,b=0;_<gh;_++){const N=360/(1<<_);u.emplaceBack(0,-ml,0,.5,0),f.emplaceBack(0,-ml,0,.5,1),y.emplaceBack(0,-ml,0,.5,.5),m.emplaceBack(0,-ml,0,.5,.5);for(let D=0;D<=np;D++){let S=D/np,V=0;const I=hr(0,N,S),[O,M,B]=ip(go,Ah,I,ml);u.emplaceBack(O,M,B,S,V),f.emplaceBack(O,M,B,S,1-V);const Y=Va(I);S=.5+.5*Math.sin(Y),V=.5+.5*Math.cos(Y),y.emplaceBack(O,M,B,S,V),m.emplaceBack(O,M,B,S,1-V)}this._poleSegments.push(Oi.simpleSegment(b,0,66,64)),b+=66}this._poleNorthVertexBuffer=d.createVertexBuffer(u,sr,!1),this._poleSouthVertexBuffer=d.createVertexBuffer(f,sr,!1),this._texturedPoleNorthVertexBuffer=d.createVertexBuffer(y,sr,!1),this._texturedPoleSouthVertexBuffer=d.createVertexBuffer(m,sr,!1)}getGridBuffers(d,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[d].withSkirts:this._gridSegments[d].withoutSkirts]}getPoleBuffers(d,i){return[i?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,i?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[d]]}},n.e=be,n.e0=vF,n.e1=cp,n.e2=Pf,n.e3="hd_road_elevation",n.e4=class{static parseFrom(d,i){const u=Ef.parse(d);if(!u)return[];let{vertices:f,features:y}=u;const m=1/g(i);y.sort((D,S)=>D.id-S.id),f.sort((D,S)=>D.id-S.id||D.idx-S.idx),f=f.filter((D,S,V)=>S===V.findIndex(I=>I.id===D.id&&I.idx===D.idx));const _=new Array;let b=0;const N=f.length;for(const D of y){if(D.constantHeight){_.push(new qy(D.id,D.bounds,D.constantHeight));continue}for(;b!==N&&f[b].id<D.id;)b++;if(b===N||f[b].id!==D.id)continue;const S=new Array,V=new Array,I=b;for(;b!==N&&f[b].id===D.id;){const O=f[b];if(S.push({position:O.position,height:O.height,extent:O.extent}),b!==I&&f[b-1].idx===O.idx-1){const M=b-I;V.push({a:M-1,b:M})}b++}_.push(new qy(D.id,D.bounds,void 0,S,V,m))}return _}},n.e5=yr,n.e6=Co,n.e7=z4,n.e8=W0,n.e9=function(d,i,u,f,y,m,_,b=1,N){d.createArrays(),d.tilePixelRatio=Na/(512*d.overscaling),d.compareText={},d.iconsNeedLinear=!1;const D=d.layers[0].layout,S=d.layers[0]._unevaluatedLayout._values,V={};V.scaleFactor=b,V.textSizeScaleRange=D.get("text-size-scale-range"),V.iconSizeScaleRange=D.get("icon-size-scale-range");const[I,O]=V.textSizeScaleRange,[M,B]=V.iconSizeScaleRange;V.textScaleFactor=ka(V.scaleFactor,I,O),V.iconScaleFactor=ka(V.scaleFactor,M,B);const Y=S["text-size"],ee=S["icon-size"];if(d.textSizeData.kind==="composite"){const{minZoom:xe,maxZoom:Ke}=d.textSizeData;V.compositeTextSizes=[Y.possiblyEvaluate(new vn(xe),m),Y.possiblyEvaluate(new vn(Ke),m)]}if(d.iconSizeData.kind==="composite"){const{minZoom:xe,maxZoom:Ke}=d.iconSizeData;V.compositeIconSizes=[ee.possiblyEvaluate(new vn(xe),m),ee.possiblyEvaluate(new vn(Ke),m)]}V.layoutTextSize=Y.possiblyEvaluate(new vn(_+1),m),V.layoutIconSize=ee.possiblyEvaluate(new vn(_+1),m),V.textMaxSize=Y.possiblyEvaluate(new vn(18),m);const ue=D.get("symbol-placement"),le=D.get("text-rotation-alignment")==="map"&&ue!=="point",re=D.get("text-size");let pe=!1;const Se=[];for(const xe of d.features){const Ke=D.get("text-font").evaluate(xe,{},m).join(","),Ze=re.evaluate(xe,{},m)*V.textScaleFactor,He=V.layoutTextSize.evaluate(xe,{},m)*V.textScaleFactor,ft=V.layoutIconSize.evaluate(xe,{},m)*V.iconScaleFactor,Ye={horizontal:{},vertical:void 0},gt=xe.text;let bt,Rt=[0,0];if(gt){const _a=gt.toString(),gr=D.get("text-letter-spacing").evaluate(xe,{},m)*Fe,$a=D.get("text-line-height").evaluate(xe,{},m)*Fe,or=Ga(_a)?gr:0,Or=D.get("text-anchor").evaluate(xe,{},m),Jr=D.get("text-variable-anchor");if(!Jr){const Hn=D.get("text-radial-offset").evaluate(xe,{},m);Rt=Hn?U4(Or,[Hn*Fe,fP]):D.get("text-offset").evaluate(xe,{},m).map(Pi=>Pi*Fe)}let Ur=le?"center":D.get("text-justify").evaluate(xe,{},m);const cn=ue==="point",Xr=cn?D.get("text-max-width").evaluate(xe,{},m)*Fe:1/0,wn=Hn=>{d.allowVerticalPlacement&&ta(_a)&&(Ye.vertical=cP(gt,i,u,y,Ke,Xr,$a,Or,Hn,or,Rt,jd.vertical,!0,He,Ze,N))};if(!le&&Jr){const Hn=Ur==="auto"?Jr.map(Ir=>pP(Ir)):[Ur];let Pi=!1;for(let Ir=0;Ir<Hn.length;Ir++){const En=Hn[Ir];if(!Ye.horizontal[En])if(Pi)Ye.horizontal[En]=Ye.horizontal[0];else{const Wi=cP(gt,i,u,y,Ke,Xr,$a,"center",En,or,Rt,jd.horizontal,!1,He,Ze,N);Wi&&(Ye.horizontal[En]=Wi,Pi=Wi.positionedLines.length===1)}}wn("left")}else{if(Ur==="auto"&&(Ur=pP(Or)),cn||D.get("text-writing-mode").indexOf("horizontal")>=0||!ta(_a)){const Hn=cP(gt,i,u,y,Ke,Xr,$a,Or,Ur,or,Rt,jd.horizontal,!1,He,Ze,N);Hn&&(Ye.horizontal[Ur]=Hn)}wn(cn?"left":Ur)}}let Vt,Et,Ut,Dt,jt,ga=!1;if(xe.icon&&xe.icon.hasPrimary()){const _a=B4(xe.icon,d.iconSizeData,S["icon-size"],m,d.zoom,xe,N,V.iconScaleFactor);Vt=_a.iconPrimary,Et=_a.iconSecondary;const gr=Vt.toString(),$a=f.get(gr);$a&&(Ut=D.get("icon-offset").evaluate(xe,{},m),Dt=D.get("icon-anchor").evaluate(xe,{},m),jt=D.get("icon-text-fit").evaluate(xe,{},m),bt=UJ(y.get(gr),Et?y.get(Et.toString()):void 0,Ut,Dt),ga=$a.sdf,d.sdfIcons===void 0?d.sdfIcons=$a.sdf:d.sdfIcons!==$a.sdf&&en("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($a.pixelRatio!==d.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(d.iconsNeedLinear=!0))}pe=pe||!(!xe.icon||!xe.icon.hasSecondary());const ma=mP(Ye.horizontal)||Ye.vertical;d.iconsInText||(d.iconsInText=!!ma&&ma.iconsInText);const Ya=He*V.textScaleFactor/Fe,{defaultShapedIcon:xa,verticallyShapedIcon:Oa}=$J(d,bt,D,xe,m,Ye,Ya,Ut,jt);bt=xa,Se.push({feature:xe,shapedTextOrientations:Ye,shapedText:ma,shapedIcon:bt,iconPrimary:Vt,iconSecondary:Et,iconOffset:Ut,iconAnchor:Dt,verticallyShapedIcon:Oa,layoutTextSize:He,layoutIconSize:ft,textOffset:Rt,isSDFIcon:ga,iconTextFit:jt})}return{featureData:Se,sizes:V,hasAnySecondaryIcon:pe,textAlongLine:le,symbolPlacement:ue}},n.ea=O4,n.eb=function(d,i,u,f,y,m,_,b,N,D){const{featureData:S,hasAnySecondaryIcon:V,sizes:I,textAlongLine:O,symbolPlacement:M}=i;for(const B of S){const{shapedIcon:Y,verticallyShapedIcon:ee,feature:ue,shapedTextOrientations:le,shapedText:re,layoutTextSize:pe,textOffset:Se,isSDFIcon:xe,iconPrimary:Ke,iconSecondary:Ze,iconTextFit:He,iconOffset:ft}=B;G4(Y,D.iconPositions,Ke,Ze),G4(ee,D.iconPositions,Ke,Ze),HJ(le,D.iconPositions),(re||Y)&&KJ(d,ue,le,Y,ee,N,I,pe,0,Se,xe,f,y,_,b,V,He,ft,O,M)}u&&d.generateCollisionDebugBuffers(m,d.collisionBoxArray,I.textScaleFactor)},n.ec=vh,n.ed=MS,n.ee=Ea,n.ef=I0,n.eg=mi,n.eh=w,n.ei=function(d){let i=0;if(new Uint32Array(d,0,1)[0]!==hF){const u=new Uint32Array(d,0,7),[,,f,y,m,_]=u;i=u.byteLength+y+m+_+m,(f!==d.byteLength||i>=d.byteLength)&&en("Invalid b3dm header information.")}return yF(d,i)},n.ej=function(d,i){const u=AF(d);for(const f of u){for(const y of f.meshes)Ree(y);f.lights&&(f.lightMeshIndex=f.meshes.length,f.meshes.push(Tee(f.lights,i)))}return u},n.ek=xS,n.el=VL,n.em=is,n.en=function(d){qr(),Gr!=null&&Gr.then(i=>{i.keys().then(u=>{for(let f=0;f<u.length-d;f++)i.delete(u[f])})})},n.f=function(d){return d.indexOf("mapbox:")===0},n.g=function(d,i){return Ko(Rn(d,{method:"GET"}),i)},n.h=De,n.i=function(d){return be.API_STYLE_REGEX.test(d)&&!at(d)},n.j=function(d){return decodeURIComponent(atob(d).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""))},n.k=function(d){return btoa(encodeURIComponent(d).replace(/%([0-9A-F]{2})/g,(i,u)=>String.fromCharCode(+("0x"+u))))},n.l=Rn,n.m=Hr,n.n=function(d,i){return Ko(Rn(d,{type:"json"}),i)},n.o=Qd,n.p=function(d,i){return Ko(Rn(d,{method:"POST"}),i)},n.q=Zt,n.r=Al,n.s=function(d){try{const i=self[d];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}},n.t=Ht,n.u=function(){return function d(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,d)}()},n.v=function(d){return!!d&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(d)},n.w=en,n.x=function(){return OP||(OP=new RA),OP},n.y=LP,n.z=gd}),l(["./shared"],function(n){function w(Xt){const be=Xt?Xt.url.toString():void 0;return be?performance.getEntriesByName(be):[]}function T(Xt){if(typeof Xt=="number"||typeof Xt=="boolean"||typeof Xt=="string"||Xt==null)return JSON.stringify(Xt);if(Array.isArray(Xt)){let De="[";for(const at of Xt)De+=`${T(at)},`;return`${De}]`}let be="{";for(const De of Object.keys(Xt).sort())be+=`${De}:${T(Xt[De])},`;return`${be}}`}function E(Xt){let be="";for(const De of n.bm)(Xt.type!=="model"||De!=="minzoom"&&De!=="maxzoom")&&(be+=`/${T(Xt[De])}`);return be}class z{constructor(be){this.keyCache={},this._layers={},this._layerConfigs={},be&&this.replace(be)}replace(be,De){this._layerConfigs={},this._layers={},this.update(be,[],De)}update(be,De,at){this._options=at;for(const mt of be)this._layerConfigs[mt.id]=mt,(this._layers[mt.id]=n.cv(mt,this.scope,null,this._options)).compileFilter(at),this.keyCache[mt.id]&&delete this.keyCache[mt.id];for(const mt of De)delete this.keyCache[mt],delete this._layerConfigs[mt],delete this._layers[mt];this.familiesBySource={};const At=function(mt,Ct){const kt={};for(let qt=0;qt<mt.length;qt++){const Ht=mt[qt];let Zt=Ct&&Ct[Ht.id];!Zt&&(Zt=E(Ht),Ht.type==="line"&&Ht.paint)&&function Ma(Ba){return typeof Ba=="string"&&Ba==="line-progress"||(Array.isArray(Ba)?Ba.some(Ma):!(!Ba||typeof Ba!="object")&&Object.values(Ba).some(Ma))}(Ht.paint["line-width"])&&(Zt+=`/${T(Ht.paint["line-width"])}`),Ct&&(Ct[Ht.id]=Zt);let Ra=kt[Zt];Ra||(Ra=kt[Zt]=[]),Ra.push(Ht)}const Pt=[];for(const qt in kt)Pt.push(kt[qt]);return Pt}(Object.values(this._layerConfigs),this.keyCache);for(const mt of At){const Ct=mt.map(Ra=>this._layers[Ra.id]),kt=Ct[0];if(kt.visibility==="none")continue;const Pt=kt.source||"";let qt=this.familiesBySource[Pt];qt||(qt=this.familiesBySource[Pt]={});const Ht=kt.sourceLayer||"_geojsonTileLayer";let Zt=qt[Ht];Zt||(Zt=qt[Ht]=[]),Zt.push(Ct)}}}const k=1*n.d_;class U{constructor(be){const De={},at=[];for(const kt in be){const Pt=be[kt],qt=De[kt]={};for(const Ht in Pt.glyphs){const Zt=Pt.glyphs[+Ht];if(!Zt||Zt.bitmap.width===0||Zt.bitmap.height===0)continue;const Ra=Zt.metrics.localGlyph?k:1,Ma={x:0,y:0,w:Zt.bitmap.width+2*Ra,h:Zt.bitmap.height+2*Ra};at.push(Ma),qt[Ht]=Ma}}const{w:At,h:mt}=n.H(at),Ct=new n.dZ({width:At||1,height:mt||1});for(const kt in be){const Pt=be[kt];for(const qt in Pt.glyphs){const Ht=Pt.glyphs[+qt];if(!Ht||Ht.bitmap.width===0||Ht.bitmap.height===0)continue;const Zt=De[kt][qt],Ra=Ht.metrics.localGlyph?k:1;n.dZ.copy(Ht.bitmap,Ct,{x:0,y:0},{x:Zt.x+Ra,y:Zt.y+Ra},Ht.bitmap)}}this.image=Ct,this.positions=De}}n.dY(U,"GlyphAtlas");class q{constructor(be){this.tileID=new n.aH(be.tileID.overscaledZ,be.tileID.wrap,be.tileID.canonical.z,be.tileID.canonical.x,be.tileID.canonical.y),this.tileZoom=be.tileZoom,this.uid=be.uid,this.zoom=be.zoom,this.lut=be.lut,this.canonical=be.tileID.canonical,this.pixelRatio=be.pixelRatio,this.tileSize=be.tileSize,this.source=be.source,this.scope=be.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=be.showCollisionBoxes,this.collectResourceTiming=!!be.request&&be.request.collectResourceTiming,this.promoteId=be.promoteId,this.isSymbolTile=be.isSymbolTile,this.tileTransform=n.aR(be.tileID.canonical,be.projection),this.projection=be.projection,this.worldview=be.worldview,this.localizableLayerIds=be.localizableLayerIds,this.brightness=be.brightness,this.extraShadowCaster=!!be.extraShadowCaster,this.tessellationStep=be.tessellationStep,this.scaleFactor=be.scaleFactor}parse(be,De,at,At,mt){this.status="parsing",this.data=be,this.collisionBoxArray=new n.aX;const Ct=new n.d$(Object.keys(be.layers).sort()),kt=new n.e0(this.tileID,this.promoteId);kt.bucketLayerIDs=[];const Pt={},qt=new n.e1(256,256),Ht={featureIndex:kt,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:qt,availableImages:at,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},Zt=De.familiesBySource[this.source];for(const qr in Zt){const yn=be.layers[qr];if(!yn)continue;let Hr=!1,In=!1,Ni=!1;for(const Oo of Zt[qr])Oo[0].type==="symbol"?Hr=!0:In=!0,Oo[0].is3D()&&Oo[0].type!=="model"&&(Ni=!0);if(this.extraShadowCaster&&!Ni||this.isSymbolTile===!0&&!Hr||this.isSymbolTile===!1&&!In)continue;yn.version===1&&n.w(`Vector tile source "${this.source}" layer "${qr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bi=Ct.encode(qr),_s=[];let vs=!1;for(let Oo=0,ws=0;Oo<yn.length;Oo++){const Us=yn.feature(Oo),nc=kt.getId(Us,qr);if(this.localizableLayerIds&&this.localizableLayerIds.has(qr)){const Ko=Us.properties?Us.properties.worldview:null;if(this.worldview&&typeof Ko=="string")if(Ko==="all")Us.properties.$localized=!0;else{if(!Ko.split(",").includes(this.worldview))continue;Us.properties.$localized=!0,Us.properties.worldview=this.worldview}}!vs&&Us.properties&&Us.properties.hasOwnProperty(n.e2)&&(vs=!0),_s.push({feature:Us,id:nc,index:ws,sourceLayerIndex:Bi}),ws++}vs&&!Ht.elevationFeatures&&be.layers.hasOwnProperty(n.e3)&&(Ht.elevationFeatures=n.e4.parseFrom(be.layers[n.e3],this.canonical));for(const Oo of Zt[qr]){const ws=Oo[0];(!this.extraShadowCaster||ws.is3D()&&ws.type!=="model")&&(this.isSymbolTile!==void 0&&ws.type==="symbol"!==this.isSymbolTile||ws.minzoom&&this.zoom<Math.floor(ws.minzoom)||ws.maxzoom&&this.zoom>=ws.maxzoom||ws.visibility!=="none"&&(H(Oo,this.zoom,Ht.brightness,at),(Pt[ws.id]=ws.createBucket({index:kt.bucketLayerIDs.length,layers:Oo,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bi,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(_s,Ht,this.tileID.canonical,this.tileTransform),kt.bucketLayerIDs.push(Oo.map(Us=>n.C(Us.id,Us.scope)))))}}let Ra,Ma,Ba,Ar,Nr,Vr;qt.trim();const Gr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},zn=()=>{if(Ra)return this.status="done",mt(Ra);if(this.extraShadowCaster)this.status="done",mt(null,{buckets:Object.values(Pt).filter(qr=>!qr.isEmpty()),featureIndex:kt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Ht.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Ma&&Ba&&Ar){const qr=new U(Ma),yn=new Map;for(const[Ni,Bi]of Ba.entries()){const{imagePosition:_s}=n.e7(Ni,Bi,n.e8);yn.set(Ni,_s)}const Hr={};for(const Ni in Pt){const Bi=Pt[Ni];Bi instanceof n.aY&&(H(Bi.layers,this.zoom,Ht.brightness,at),Hr[Ni]=n.e9(Bi,Ma,qr.positions,Ba,yn,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio))}const In={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(At,Ba,Nr,()=>{In.iconsPending=!1,Xn(Hr,qr,In)}),this.rasterizeIfNeeded(At,Ar,Vr,()=>{In.patternsPending=!1,Xn(Hr,qr,In)})}},Xn=(qr,yn,Hr,In)=>{if(Hr.iconsPending||Hr.patternsPending)return;const Ni=new n.ea(Ba,Ar,this.lut);for(const Bi in Pt){const _s=Pt[Bi];if(Bi in qr)n.eb(_s,qr[Bi],this.showCollisionBoxes,at,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,Ba,Ni);else if(_s.hasPattern&&(_s instanceof n.b2||_s instanceof n.b3||_s instanceof n.d8)){H(_s.layers,this.zoom,Ht.brightness,at);const vs=Object.fromEntries(Ni.patternPositions);_s.addFeatures(Ht,this.tileID.canonical,vs,at,this.tileTransform,this.brightness)}}this.status="done",mt(null,{buckets:Object.values(Pt).filter(Bi=>!Bi.isEmpty()),featureIndex:kt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yn.image,lineAtlas:qt,imageAtlas:Ni,brightness:Ht.brightness})};if(!this.extraShadowCaster){const qr=n.e5(Ht.glyphDependencies,In=>Object.keys(In).map(Number));Object.keys(qr).length?At.send("getGlyphs",{uid:this.uid,stacks:qr,scope:this.scope},(In,Ni)=>{Ra||(Ra=In,Ma=Ni,zn())},void 0,!1,Gr):Ma={};const yn=Array.from(Ht.iconDependencies.keys()).map(In=>n.I.parse(In));yn.length?At.send("getImages",{images:yn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(In,Ni)=>{Ra||(Ra=In,Ba=new Map,Nr=this.updateImageMapAndGetImageTaskQueue(Ba,Ni,Ht.iconDependencies),zn())},void 0,!1,Gr):(Ba=new Map,Nr=new Map);const Hr=Array.from(Ht.patternDependencies.keys()).map(In=>n.I.parse(In));Hr.length?At.send("getImages",{images:Hr,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(In,Ni)=>{Ra||(Ra=In,Ar=new Map,Vr=this.updateImageMapAndGetImageTaskQueue(Ar,Ni,Ht.patternDependencies),zn())},void 0,!1,Gr):(Ar=new Map,Vr=new Map)}if(Ht.elevationFeatures&&Ht.elevationFeatures.length>0){const qr=[];for(const Hr of Object.values(Pt))if(Hr instanceof n.b3){const In=Hr.getUnevaluatedPortalGraph();In&&qr.push(In)}const yn=n.e6.evaluate(qr);for(const Hr of Object.values(Pt))Hr instanceof n.b3&&Hr.setEvaluatedPortalGraph(yn)}zn()}rasterizeIfNeeded(be,De,at,At){Array.from(De.values()).some(mt=>mt.usvg)?this.rasterize(be,De,at,At):At()}updateImageMapAndGetImageTaskQueue(be,De,at){const At=new Map;for(const mt of De.keys()){const Ct=at.get(mt)||[];for(const kt of Ct){const Pt=kt.toString(),qt=De.get(kt.id.toString());qt.usvg?At.has(Pt)||(At.set(Pt,kt),be.set(Pt,Object.assign({},qt))):be.set(Pt,qt)}}return At}rasterize(be,De,at,At){this.rasterizeTask=be.send("rasterizeImages",{scope:this.scope,tasks:at},(mt,Ct)=>{if(!mt)for(const[kt,Pt]of Ct.entries()){const qt=Object.assign(De.get(kt),{data:Pt});De.set(kt,qt)}At()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function H(Xt,be,De,at){const At=new n.aa(be,{brightness:De});for(const mt of Xt)mt.recalculate(At,at)}class $ extends n.E{constructor(be,De,at,At,mt,Ct){super(),this.actor=be,this.layerIndex=De,this.availableImages=at,this.loadVectorData=mt||n.aE,this.loading={},this.loaded={},this.deduped=new n.aD(be.scheduler),this.isSpriteLoaded=At,this.scheduler=be.scheduler,this.brightness=Ct}loadTile(be,De){const at=be.uid,At=be&&be.request,mt=At&&At.collectResourceTiming,Ct=this.loading[at]=new q(be);Ct.abort=this.loadVectorData(be,(kt,Pt)=>{const qt=!this.loading[at];if(delete this.loading[at],Ct.cancelRasterize(),qt||kt||!Pt)return Ct.status="done",qt||(this.loaded[at]=Ct),De(kt);const Ht=Pt.rawData,Zt={};Pt.expires&&(Zt.expires=Pt.expires),Pt.cacheControl&&(Zt.cacheControl=Pt.cacheControl),Ct.vectorTile=Pt.vectorTile||new n.ec.VectorTile(new n.bi(Ht));const Ra=()=>{Ct.parse(Ct.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ma,Ba)=>{if(Ma||!Ba)return De(Ma);const Ar={};if(mt){const Nr=w(At);Nr.length>0&&(Ar.resourceTiming=JSON.parse(JSON.stringify(Nr)))}De(null,n.l({rawTileData:Ht.slice(0)},Ba,Zt,Ar))})};this.isSpriteLoaded?Ra():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ra,{type:"parseTile",isSymbolTile:be.isSymbolTile,zoom:be.tileZoom}):Ra()}),this.loaded=this.loaded||{},this.loaded[at]=Ct})}reloadTile(be,De){const at=this.loaded,At=be.uid;if(at&&at[At]){const mt=at[At];mt.scaleFactor=be.scaleFactor,mt.showCollisionBoxes=be.showCollisionBoxes,mt.projection=be.projection,mt.brightness=be.brightness,mt.tileTransform=n.aR(be.tileID.canonical,be.projection),mt.extraShadowCaster=be.extraShadowCaster,mt.lut=be.lut;const Ct=(kt,Pt)=>{const qt=mt.reloadCallback;qt&&(delete mt.reloadCallback,mt.parse(mt.vectorTile,this.layerIndex,this.availableImages,this.actor,qt)),De(kt,Pt)};mt.status==="parsing"?mt.reloadCallback=Ct:mt.status==="done"&&(mt.vectorTile?mt.parse(mt.vectorTile,this.layerIndex,this.availableImages,this.actor,Ct):Ct())}else De(null,void 0)}abortTile(be,De){const at=be.uid,At=this.loading[at];At&&(At.abort&&At.abort(),delete this.loading[at]),De()}removeTile(be,De){const at=this.loaded,At=be.uid;at&&at[At]&&delete at[At],De()}}class Q{loadTile(be,De){const{uid:at,encoding:At,rawImageData:mt,padding:Ct}=be,kt=ImageBitmap&&mt instanceof ImageBitmap?this.getImageData(mt,Ct):mt;De(null,new n.ed(at,kt,At,Ct<1))}reloadTile(be,De){De(null,null)}abortTile(be,De){De()}removeTile(be,De){De()}getImageData(be,De){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(be.width,be.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=be.width,this.offscreenCanvas.height=be.height,this.offscreenCanvasContext.drawImage(be,0,0,be.width,be.height);const at=this.offscreenCanvasContext.getImageData(-De,-De,be.width+2*De,be.height+2*De);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),at}}n.bh.setPbf(n.bi);class ne{constructor(be){this._mrt=new n.bh(be.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=be.uid,this.tileID=be.tileID,this.source=be.source}parse(be,De){const at=this._mrt;this.status="parsing",this._entireBuffer=be;try{at.parseHeader(be),this._isHeaderLoaded=!0;const At=[];for(const mt in at.layers){const Ct=at.getLayer(mt),kt=Ct.getDataRange(Ct.getBandList()),Pt=at.createDecodingTask(kt),qt=be.slice(kt.firstByte,kt.lastByte+1),Ht=n.bh.performDecoding(qt,Pt).then(Zt=>Pt.complete(null,Zt)).catch(Zt=>Pt.complete(Zt,null));At.push(Ht)}Promise.allSettled(At).then(()=>De(null,at))}catch(At){De(At)}}}class de{constructor(be){this.actor=be,this.loading={},this.loaded={}}loadTile(be,De){const at=be.uid,At=be.request,mt=this.loading[at]=new ne(be),{cancel:Ct}=n.bj(At,(kt,Pt,qt,Ht)=>{const Zt=!this.loading[at];if(delete this.loading[at],Zt||kt||!Pt)return mt.status="done",Zt||(this.loaded[at]=mt),De(kt);mt.parse(Pt,(Ra,Ma)=>{if(Ra||!Ma)return De(Ra);De(null,Ma,qt,Ht)}),this.loaded[at]=mt});mt.abort=Ct}reloadTile(be,De){De(null,void 0)}abortTile(be,De){const at=be.uid,At=this.loading[at];At&&(At.abort&&At.abort(),delete this.loading[at]),De()}removeTile(be,De){const at=be.uid;this.loaded[at]&&delete this.loaded[at],De()}decodeRasterArray({task:be,buffer:De},at){n.bh.performDecoding(De,be).then(At=>at(null,At)).catch(At=>at(At))}}const ge=n.ec.VectorTileFeature.prototype.toGeoJSON;class fe{constructor(be){this._feature=be,this.extent=n.ai,this.type=be.type,this.properties=be.tags,"id"in be&&!isNaN(be.id)&&(this.id=parseInt(be.id,10))}loadGeometry(){if(this._feature.type===1){const be=[];for(const De of this._feature.geometry)be.push([new n.P(De[0],De[1])]);return be}{const be=[];for(const De of this._feature.geometry){const at=[];for(const At of De)at.push(new n.P(At[0],At[1]));be.push(at)}return be}}toGeoJSON(be,De,at){return ge.call(this,be,De,at)}}class _e{constructor(be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.ai,this.length=be.length,this._features=be}feature(be){return new fe(this._features[be])}}const me=64/4096,Ae=128;class Te{constructor(){this.features=new Map}clear(){this.features.clear()}load(be=[],De){for(const at of be){const At=at.id;if(At==null)continue;let mt=this.features.get(At);mt&&this.updateCache(mt,De),at.geometry?(mt=ie(at),this.updateCache(mt,De),this.features.set(At,mt)):this.features.delete(At),this.updateCache(mt,De)}}updateCache(be,De){for(const{canonical:at,uid:At}of Object.values(De)){const{z:mt,x:Ct,y:kt}=at;Oe(be,Math.pow(2,mt),Ct,kt)&&delete De[At]}}getTile(be,De,at){const At=Math.pow(2,be),mt=[];for(const Ct of this.features.values())Oe(Ct,At,De,at)&&mt.push(Ie(Ct,At,De,at));return{features:mt}}getFeatures(){return[...this.features.values()]}}function Oe({minX:Xt,minY:be,maxX:De,maxY:at},At,mt,Ct){return Xt<(mt+1+me)/At&&be<(Ct+1+me)/At&&De>(mt-me)/At&&at>(Ct-me)/At}function ie(Xt){const{id:be,geometry:De,properties:at}=Xt;if(!De)return;if(De.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:At,coordinates:mt}=De,Ct={id:be,type:1,geometry:[],tags:at,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},kt=Ct.geometry;if(At==="Point")we(mt,kt,Ct);else if(At==="MultiPoint")for(const Pt of mt)we(Pt,kt,Ct);else if(At==="LineString")Ct.type=2,Me(mt,kt,Ct);else if(At==="MultiLineString")Ct.type=2,Ve(mt,kt,Ct);else if(At==="Polygon")Ct.type=3,Ve(mt,kt,Ct,!0);else{if(At!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Ct.type=3;for(const Pt of mt)Ve(Pt,kt,Ct,!0)}return Ct}function we([Xt,be],De,at){const At=n.av(Xt);let mt=n.aC(be);mt=mt<0?0:mt>1?1:mt,De.push(At,mt),at.minX=Math.min(at.minX,At),at.minY=Math.min(at.minY,mt),at.maxX=Math.max(at.maxX,At),at.maxY=Math.max(at.maxY,mt)}function Me(Xt,be,De,at=!1,At=!1){const mt=[];for(const Ct of Xt)we(Ct,mt,De);be.push(mt),at&&function(Ct,kt){let Pt=0;for(let qt=0,Ht=Ct.length,Zt=Ht-2;qt<Ht;Zt=qt,qt+=2)Pt+=(Ct[qt]-Ct[Zt])*(Ct[qt+1]+Ct[Zt+1]);if(Pt>0===kt)for(let qt=0,Ht=Ct.length;qt<Ht/2;qt+=2){const Zt=Ct[qt],Ra=Ct[qt+1];Ct[qt]=Ct[Ht-2-qt],Ct[qt+1]=Ct[Ht-1-qt],Ct[Ht-2-qt]=Zt,Ct[Ht-1-qt]=Ra}}(mt,At)}function Ve(Xt,be,De,at=!1){for(let At=0;At<Xt.length;At++)Me(Xt[At],be,De,at,At===0)}function Ie(Xt,be,De,at){const{id:At,type:mt,geometry:Ct,tags:kt}=Xt,Pt=[];if(mt===1)(function(qt,Ht,Zt,Ra,Ma){for(let Ba=0;Ba<qt.length;Ba+=2){const Ar=Math.round(n.ai*(qt[Ba+0]*Ht-Zt)),Nr=Math.round(n.ai*(qt[Ba+1]*Ht-Ra));Ma.push([Ar,Nr])}})(Ct,be,De,at,Pt);else for(const qt of Ct)Ue(qt,be,De,at,Pt);return{id:At,type:mt,geometry:Pt,tags:kt}}function Ue(Xt,be,De,at,At){const Ct=n.ai+Ae;let kt;for(let Pt=0;Pt<Xt.length-2;Pt+=2){let qt=Math.round(n.ai*(Xt[Pt+0]*be-De)),Ht=Math.round(n.ai*(Xt[Pt+1]*be-at)),Zt=Math.round(n.ai*(Xt[Pt+2]*be-De)),Ra=Math.round(n.ai*(Xt[Pt+3]*be-at));const Ma=Zt-qt,Ba=Ra-Ht;qt<-128&&Zt<-128||(qt<-128?(Ht+=Math.round(Ba*((-128-qt)/Ma)),qt=-128):Zt<-128&&(Ra=Ht+Math.round(Ba*((-128-qt)/Ma)),Zt=-128),Ht<-128&&Ra<-128||(Ht<-128?(qt+=Math.round(Ma*((-128-Ht)/Ba)),Ht=-128):Ra<-128&&(Zt=qt+Math.round(Ma*((-128-Ht)/Ba)),Ra=-128),qt>=Ct&&Zt>=Ct||(qt>=Ct?(Ht+=Math.round(Ba*((Ct-qt)/Ma)),qt=Ct):Zt>=Ct&&(Ra=Ht+Math.round(Ba*((Ct-qt)/Ma)),Zt=Ct),Ht>=Ct&&Ra>=Ct||(Ht>=Ct?(qt+=Math.round(Ma*((Ct-Ht)/Ba)),Ht=Ct):Ra>=Ct&&(Zt=qt+Math.round(Ma*((Ct-Ht)/Ba)),Ra=Ct),kt&&qt===kt[kt.length-1][0]&&Ht===kt[kt.length-1][1]||(kt=[[qt,Ht]],At.push(kt)),kt.push([Zt,Ra])))))}}var Be,ke,Je,Le={exports:{}},qe=function(){if(Je)return Le.exports;Je=1;var Xt=n.eg(),be=function(){if(ke)return Be;ke=1;var Ht=n.ee(),Zt=n.ef().VectorTileFeature;function Ra(Ba,Ar){this.options=Ar||{},this.features=Ba,this.length=Ba.length}function Ma(Ba,Ar){this.id=typeof Ba.id=="number"?Ba.id:void 0,this.type=Ba.type,this.rawGeometry=Ba.type===1?[Ba.geometry]:Ba.geometry,this.properties=Ba.tags,this.extent=Ar||4096}return Be=Ra,Ra.prototype.feature=function(Ba){return new Ma(this.features[Ba],this.options.extent)},Ma.prototype.loadGeometry=function(){var Ba=this.rawGeometry;this.geometry=[];for(var Ar=0;Ar<Ba.length;Ar++){for(var Nr=Ba[Ar],Vr=[],Gr=0;Gr<Nr.length;Gr++)Vr.push(new Ht(Nr[Gr][0],Nr[Gr][1]));this.geometry.push(Vr)}return this.geometry},Ma.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ba=this.geometry,Ar=1/0,Nr=-1/0,Vr=1/0,Gr=-1/0,zn=0;zn<Ba.length;zn++)for(var Xn=Ba[zn],qr=0;qr<Xn.length;qr++){var yn=Xn[qr];Ar=Math.min(Ar,yn.x),Nr=Math.max(Nr,yn.x),Vr=Math.min(Vr,yn.y),Gr=Math.max(Gr,yn.y)}return[Ar,Vr,Nr,Gr]},Ma.prototype.toGeoJSON=Zt.prototype.toGeoJSON,Be}();function De(Ht){var Zt=new Xt;return function(Ra,Ma){for(var Ba in Ra.layers)Ma.writeMessage(3,at,Ra.layers[Ba])}(Ht,Zt),Zt.finish()}function at(Ht,Zt){var Ra;Zt.writeVarintField(15,Ht.version||1),Zt.writeStringField(1,Ht.name||""),Zt.writeVarintField(5,Ht.extent||4096);var Ma={keys:[],values:[],keycache:{},valuecache:{}};for(Ra=0;Ra<Ht.length;Ra++)Ma.feature=Ht.feature(Ra),Zt.writeMessage(2,At,Ma);var Ba=Ma.keys;for(Ra=0;Ra<Ba.length;Ra++)Zt.writeStringField(3,Ba[Ra]);var Ar=Ma.values;for(Ra=0;Ra<Ar.length;Ra++)Zt.writeMessage(4,qt,Ar[Ra])}function At(Ht,Zt){var Ra=Ht.feature;Ra.id!==void 0&&Zt.writeVarintField(1,Ra.id),Zt.writeMessage(2,mt,Ht),Zt.writeVarintField(3,Ra.type),Zt.writeMessage(4,Pt,Ra)}function mt(Ht,Zt){var Ra=Ht.feature,Ma=Ht.keys,Ba=Ht.values,Ar=Ht.keycache,Nr=Ht.valuecache;for(var Vr in Ra.properties){var Gr=Ra.properties[Vr],zn=Ar[Vr];if(Gr!==null){zn===void 0&&(Ma.push(Vr),Ar[Vr]=zn=Ma.length-1),Zt.writeVarint(zn);var Xn=typeof Gr;Xn!=="string"&&Xn!=="boolean"&&Xn!=="number"&&(Gr=JSON.stringify(Gr));var qr=Xn+":"+Gr,yn=Nr[qr];yn===void 0&&(Ba.push(Gr),Nr[qr]=yn=Ba.length-1),Zt.writeVarint(yn)}}}function Ct(Ht,Zt){return(Zt<<3)+(7&Ht)}function kt(Ht){return Ht<<1^Ht>>31}function Pt(Ht,Zt){for(var Ra=Ht.loadGeometry(),Ma=Ht.type,Ba=0,Ar=0,Nr=Ra.length,Vr=0;Vr<Nr;Vr++){var Gr=Ra[Vr],zn=1;Ma===1&&(zn=Gr.length),Zt.writeVarint(Ct(1,zn));for(var Xn=Ma===3?Gr.length-1:Gr.length,qr=0;qr<Xn;qr++){qr===1&&Ma!==1&&Zt.writeVarint(Ct(2,Xn-1));var yn=Gr[qr].x-Ba,Hr=Gr[qr].y-Ar;Zt.writeVarint(kt(yn)),Zt.writeVarint(kt(Hr)),Ba+=yn,Ar+=Hr}Ma===3&&Zt.writeVarint(Ct(7,1))}}function qt(Ht,Zt){var Ra=typeof Ht;Ra==="string"?Zt.writeStringField(1,Ht):Ra==="boolean"?Zt.writeBooleanField(7,Ht):Ra==="number"&&(Ht%1!=0?Zt.writeDoubleField(3,Ht):Ht<0?Zt.writeSVarintField(6,Ht):Zt.writeVarintField(5,Ht))}return Le.exports=De,Le.exports.fromVectorTileJs=De,Le.exports.fromGeojsonVt=function(Ht,Zt){Zt=Zt||{};var Ra={};for(var Ma in Ht)Ra[Ma]=new be(Ht[Ma].features,Zt),Ra[Ma].name=Ma,Ra[Ma].version=Zt.version,Ra[Ma].extent=Zt.extent;return De({layers:Ra})},Le.exports.GeoJSONWrapper=be,Le.exports}(),ye=n.eh(qe);const ze={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xt=>Xt},We=Math.fround||(lt=new Float32Array(1),Xt=>(lt[0]=+Xt,lt[0]));var lt;const vt=3,Ot=5,dt=6;class pt{constructor(be){this.options=Object.assign(Object.create(ze),be),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(be){const{log:De,minZoom:at,maxZoom:At}=this.options;De&&console.time("total time");const mt=`prepare ${be.length} points`;De&&console.time(mt),this.points=be;const Ct=[];for(let Pt=0;Pt<be.length;Pt++){const qt=be[Pt];if(!qt.geometry)continue;const[Ht,Zt]=qt.geometry.coordinates,Ra=We(Kt(Ht)),Ma=We(Ea(Zt));Ct.push(Ra,Ma,1/0,Pt,-1,1),this.options.reduce&&Ct.push(0)}let kt=this.trees[At+1]=this._createTree(Ct);De&&console.timeEnd(mt);for(let Pt=At;Pt>=at;Pt--){const qt=+Date.now();kt=this.trees[Pt]=this._createTree(this._cluster(kt,Pt)),De&&console.log("z%d: %d clusters in %dms",Pt,kt.numItems,+Date.now()-qt)}return De&&console.timeEnd("total time"),this}getClusters(be,De){let at=((be[0]+180)%360+360)%360-180;const At=Math.max(-90,Math.min(90,be[1]));let mt=be[2]===180?180:((be[2]+180)%360+360)%360-180;const Ct=Math.max(-90,Math.min(90,be[3]));if(be[2]-be[0]>=360)at=-180,mt=180;else if(at>mt){const Zt=this.getClusters([at,At,180,Ct],De),Ra=this.getClusters([-180,At,mt,Ct],De);return Zt.concat(Ra)}const kt=this.trees[this._limitZoom(De)],Pt=kt.range(Kt(at),Ea(Ct),Kt(mt),Ea(At)),qt=kt.data,Ht=[];for(const Zt of Pt){const Ra=this.stride*Zt;Ht.push(qt[Ra+Ot]>1?ve(qt,Ra,this.clusterProps):this.points[qt[Ra+vt]])}return Ht}getChildren(be){const De=this._getOriginId(be),at=this._getOriginZoom(be),At="No cluster with the specified id.",mt=this.trees[at];if(!mt)throw new Error(At);const Ct=mt.data;if(De*this.stride>=Ct.length)throw new Error(At);const kt=this.options.radius/(this.options.extent*Math.pow(2,at-1)),Pt=mt.within(Ct[De*this.stride],Ct[De*this.stride+1],kt),qt=[];for(const Ht of Pt){const Zt=Ht*this.stride;Ct[Zt+4]===be&&qt.push(Ct[Zt+Ot]>1?ve(Ct,Zt,this.clusterProps):this.points[Ct[Zt+vt]])}if(qt.length===0)throw new Error(At);return qt}getLeaves(be,De,at){const At=[];return this._appendLeaves(At,be,De=De||10,at=at||0,0),At}getTile(be,De,at){const At=this.trees[this._limitZoom(be)],mt=Math.pow(2,be),{extent:Ct,radius:kt}=this.options,Pt=kt/Ct,qt=(at-Pt)/mt,Ht=(at+1+Pt)/mt,Zt={features:[]};return this._addTileFeatures(At.range((De-Pt)/mt,qt,(De+1+Pt)/mt,Ht),At.data,De,at,mt,Zt),De===0&&this._addTileFeatures(At.range(1-Pt/mt,qt,1,Ht),At.data,mt,at,mt,Zt),De===mt-1&&this._addTileFeatures(At.range(0,qt,Pt/mt,Ht),At.data,-1,at,mt,Zt),Zt.features.length?Zt:null}getClusterExpansionZoom(be){let De=this._getOriginZoom(be)-1;for(;De<=this.options.maxZoom;){const at=this.getChildren(be);if(De++,at.length!==1)break;be=at[0].properties.cluster_id}return De}_appendLeaves(be,De,at,At,mt){const Ct=this.getChildren(De);for(const kt of Ct){const Pt=kt.properties;if(Pt&&Pt.cluster?mt+Pt.point_count<=At?mt+=Pt.point_count:mt=this._appendLeaves(be,Pt.cluster_id,at,At,mt):mt<At?mt++:be.push(kt),be.length===at)break}return mt}_createTree(be){const De=new n.bE(be.length/this.stride|0,this.options.nodeSize,Float32Array);for(let at=0;at<be.length;at+=this.stride)De.add(be[at],be[at+1]);return De.finish(),De.data=be,De}_addTileFeatures(be,De,at,At,mt,Ct){for(const kt of be){const Pt=kt*this.stride,qt=De[Pt+Ot]>1;let Ht,Zt,Ra;if(qt)Ht=ea(De,Pt,this.clusterProps),Zt=De[Pt],Ra=De[Pt+1];else{const Ar=this.points[De[Pt+vt]];Ht=Ar.properties;const[Nr,Vr]=Ar.geometry.coordinates;Zt=Kt(Nr),Ra=Ea(Vr)}const Ma={type:1,geometry:[[Math.round(this.options.extent*(Zt*mt-at)),Math.round(this.options.extent*(Ra*mt-At))]],tags:Ht};let Ba;Ba=qt||this.options.generateId?De[Pt+vt]:this.points[De[Pt+vt]].id,Ba!==void 0&&(Ma.id=Ba),Ct.features.push(Ma)}}_limitZoom(be){return Math.max(this.options.minZoom,Math.min(Math.floor(+be),this.options.maxZoom+1))}_cluster(be,De){const{radius:at,extent:At,reduce:mt,minPoints:Ct}=this.options,kt=at/(At*Math.pow(2,De)),Pt=be.data,qt=[],Ht=this.stride;for(let Zt=0;Zt<Pt.length;Zt+=Ht){if(Pt[Zt+2]<=De)continue;Pt[Zt+2]=De;const Ra=Pt[Zt],Ma=Pt[Zt+1],Ba=be.within(Pt[Zt],Pt[Zt+1],kt),Ar=Pt[Zt+Ot];let Nr=Ar;for(const Vr of Ba){const Gr=Vr*Ht;Pt[Gr+2]>De&&(Nr+=Pt[Gr+Ot])}if(Nr>Ar&&Nr>=Ct){let Vr,Gr=Ra*Ar,zn=Ma*Ar,Xn=-1;const qr=(Zt/Ht<<5)+(De+1)+this.points.length;for(const yn of Ba){const Hr=yn*Ht;if(Pt[Hr+2]<=De)continue;Pt[Hr+2]=De;const In=Pt[Hr+Ot];Gr+=Pt[Hr]*In,zn+=Pt[Hr+1]*In,Pt[Hr+4]=qr,mt&&(Vr||(Vr=this._map(Pt,Zt,!0),Xn=this.clusterProps.length,this.clusterProps.push(Vr)),mt(Vr,this._map(Pt,Hr)))}Pt[Zt+4]=qr,qt.push(Gr/Nr,zn/Nr,1/0,qr,-1,Nr),mt&&qt.push(Xn)}else{for(let Vr=0;Vr<Ht;Vr++)qt.push(Pt[Zt+Vr]);if(Nr>1)for(const Vr of Ba){const Gr=Vr*Ht;if(!(Pt[Gr+2]<=De)){Pt[Gr+2]=De;for(let zn=0;zn<Ht;zn++)qt.push(Pt[Gr+zn])}}}}return qt}_getOriginId(be){return be-this.points.length>>5}_getOriginZoom(be){return(be-this.points.length)%32}_map(be,De,at){if(be[De+Ot]>1){const Ct=this.clusterProps[be[De+dt]];return at?Object.assign({},Ct):Ct}const At=this.points[be[De+vt]].properties,mt=this.options.map(At);return at&&mt===At?Object.assign({},mt):mt}}function ve(Xt,be,De){return{type:"Feature",id:Xt[be+vt],properties:ea(Xt,be,De),geometry:{type:"Point",coordinates:[(at=Xt[be],360*(at-.5)),Bt(Xt[be+1])]}};var at}function ea(Xt,be,De){const at=Xt[be+Ot],At=at>=1e4?`${Math.round(at/1e3)}k`:at>=1e3?Math.round(at/100)/10+"k":at,mt=Xt[be+dt],Ct=mt===-1?{}:Object.assign({},De[mt]);return Object.assign(Ct,{cluster:!0,cluster_id:Xt[be+vt],point_count:at,point_count_abbreviated:At})}function Kt(Xt){return Xt/360+.5}function Ea(Xt){const be=Math.sin(Xt*Math.PI/180),De=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return De<0?0:De>1?1:De}function Bt(Xt){const be=(180-360*Xt)*Math.PI/180;return 360*Math.atan(Math.exp(be))/Math.PI-90}function la(Xt,be,De,at){let At=at;const mt=be+(De-be>>1);let Ct,kt=De-be;const Pt=Xt[be],qt=Xt[be+1],Ht=Xt[De],Zt=Xt[De+1];for(let Ra=be+3;Ra<De;Ra+=3){const Ma=St(Xt[Ra],Xt[Ra+1],Pt,qt,Ht,Zt);if(Ma>At)Ct=Ra,At=Ma;else if(Ma===At){const Ba=Math.abs(Ra-mt);Ba<kt&&(Ct=Ra,kt=Ba)}}At>at&&(Ct-be>3&&la(Xt,be,Ct,at),Xt[Ct+2]=At,De-Ct>3&&la(Xt,Ct,De,at))}function St(Xt,be,De,at,At,mt){let Ct=At-De,kt=mt-at;if(Ct!==0||kt!==0){const Pt=((Xt-De)*Ct+(be-at)*kt)/(Ct*Ct+kt*kt);Pt>1?(De=At,at=mt):Pt>0&&(De+=Ct*Pt,at+=kt*Pt)}return Ct=Xt-De,kt=be-at,Ct*Ct+kt*kt}function vr(Xt,be,De,at){const At={id:Xt??null,type:be,geometry:De,tags:at,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(be==="Point"||be==="MultiPoint"||be==="LineString")Va(At,De);else if(be==="Polygon")Va(At,De[0]);else if(be==="MultiLineString")for(const mt of De)Va(At,mt);else if(be==="MultiPolygon")for(const mt of De)Va(At,mt[0]);return At}function Va(Xt,be){for(let De=0;De<be.length;De+=3)Xt.minX=Math.min(Xt.minX,be[De]),Xt.minY=Math.min(Xt.minY,be[De+1]),Xt.maxX=Math.max(Xt.maxX,be[De]),Xt.maxY=Math.max(Xt.maxY,be[De+1])}function za(Xt,be,De,at){if(!be.geometry)return;const At=be.geometry.coordinates;if(At&&At.length===0)return;const mt=be.geometry.type,Ct=Math.pow(De.tolerance/((1<<De.maxZoom)*De.extent),2);let kt=[],Pt=be.id;if(De.promoteId?Pt=be.properties[De.promoteId]:De.generateId&&(Pt=at||0),mt==="Point")nr(At,kt);else if(mt==="MultiPoint")for(const qt of At)nr(qt,kt);else if(mt==="LineString")cr(At,kt,Ct,!1);else if(mt==="MultiLineString"){if(De.lineMetrics){for(const qt of At)kt=[],cr(qt,kt,Ct,!1),Xt.push(vr(Pt,"LineString",kt,be.properties));return}ur(At,kt,Ct,!1)}else if(mt==="Polygon")ur(At,kt,Ct,!0);else{if(mt!=="MultiPolygon"){if(mt==="GeometryCollection"){for(const qt of be.geometry.geometries)za(Xt,{id:Pt,geometry:qt,properties:be.properties},De,at);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const qt of At){const Ht=[];ur(qt,Ht,Ct,!0),kt.push(Ht)}}Xt.push(vr(Pt,mt,kt,be.properties))}function nr(Xt,be){be.push(Pr(Xt[0]),ka(Xt[1]),0)}function cr(Xt,be,De,at){let At,mt,Ct=0;for(let Pt=0;Pt<Xt.length;Pt++){const qt=Pr(Xt[Pt][0]),Ht=ka(Xt[Pt][1]);be.push(qt,Ht,0),Pt>0&&(Ct+=at?(At*Ht-qt*mt)/2:Math.sqrt(Math.pow(qt-At,2)+Math.pow(Ht-mt,2))),At=qt,mt=Ht}const kt=be.length-3;be[2]=1,la(be,0,kt,De),be[kt+2]=1,be.size=Math.abs(Ct),be.start=0,be.end=be.size}function ur(Xt,be,De,at){for(let At=0;At<Xt.length;At++){const mt=[];cr(Xt[At],mt,De,at),be.push(mt)}}function Pr(Xt){return Xt/360+.5}function ka(Xt){const be=Math.sin(Xt*Math.PI/180),De=.5-.25*Math.log((1+be)/(1-be))/Math.PI;return De<0?0:De>1?1:De}function jr(Xt,be,De,at,At,mt,Ct,kt){if(at/=be,mt>=(De/=be)&&Ct<at)return Xt;if(Ct<De||mt>=at)return null;const Pt=[];for(const qt of Xt){const Ht=qt.geometry;let Zt=qt.type;const Ra=At===0?qt.minX:qt.minY,Ma=At===0?qt.maxX:qt.maxY;if(Ra>=De&&Ma<at){Pt.push(qt);continue}if(Ma<De||Ra>=at)continue;let Ba=[];if(Zt==="Point"||Zt==="MultiPoint")pn(Ht,Ba,De,at,At);else if(Zt==="LineString")Dn(Ht,Ba,De,at,At,!1,kt.lineMetrics);else if(Zt==="MultiLineString")va(Ht,Ba,De,at,At,!1);else if(Zt==="Polygon")va(Ht,Ba,De,at,At,!0);else if(Zt==="MultiPolygon")for(const Ar of Ht){const Nr=[];va(Ar,Nr,De,at,At,!0),Nr.length&&Ba.push(Nr)}if(Ba.length){if(kt.lineMetrics&&Zt==="LineString"){for(const Ar of Ba)Pt.push(vr(qt.id,Zt,Ar,qt.tags));continue}Zt!=="LineString"&&Zt!=="MultiLineString"||(Ba.length===1?(Zt="LineString",Ba=Ba[0]):Zt="MultiLineString"),Zt!=="Point"&&Zt!=="MultiPoint"||(Zt=Ba.length===3?"Point":"MultiPoint"),Pt.push(vr(qt.id,Zt,Ba,qt.tags))}}return Pt.length?Pt:null}function pn(Xt,be,De,at,At){for(let mt=0;mt<Xt.length;mt+=3){const Ct=Xt[mt+At];Ct>=De&&Ct<=at&&Wa(be,Xt[mt],Xt[mt+1],Xt[mt+2])}}function Dn(Xt,be,De,at,At,mt,Ct){let kt=Rn(Xt);const Pt=At===0?ca:Qa;let qt,Ht,Zt=Xt.start;for(let Nr=0;Nr<Xt.length-3;Nr+=3){const Vr=Xt[Nr],Gr=Xt[Nr+1],zn=Xt[Nr+2],Xn=Xt[Nr+3],qr=Xt[Nr+4],yn=At===0?Vr:Gr,Hr=At===0?Xn:qr;let In=!1;Ct&&(qt=Math.sqrt(Math.pow(Vr-Xn,2)+Math.pow(Gr-qr,2))),yn<De?Hr>De&&(Ht=Pt(kt,Vr,Gr,Xn,qr,De),Ct&&(kt.start=Zt+qt*Ht)):yn>at?Hr<at&&(Ht=Pt(kt,Vr,Gr,Xn,qr,at),Ct&&(kt.start=Zt+qt*Ht)):Wa(kt,Vr,Gr,zn),Hr<De&&yn>=De&&(Ht=Pt(kt,Vr,Gr,Xn,qr,De),In=!0),Hr>at&&yn<=at&&(Ht=Pt(kt,Vr,Gr,Xn,qr,at),In=!0),!mt&&In&&(Ct&&(kt.end=Zt+qt*Ht),be.push(kt),kt=Rn(Xt)),Ct&&(Zt+=qt)}let Ra=Xt.length-3;const Ma=Xt[Ra],Ba=Xt[Ra+1],Ar=At===0?Ma:Ba;Ar>=De&&Ar<=at&&Wa(kt,Ma,Ba,Xt[Ra+2]),Ra=kt.length-3,mt&&Ra>=3&&(kt[Ra]!==kt[0]||kt[Ra+1]!==kt[1])&&Wa(kt,kt[0],kt[1],kt[2]),kt.length&&be.push(kt)}function Rn(Xt){const be=[];return be.size=Xt.size,be.start=Xt.start,be.end=Xt.end,be}function va(Xt,be,De,at,At,mt){for(const Ct of Xt)Dn(Ct,be,De,at,At,mt,!1)}function Wa(Xt,be,De,at){Xt.push(be,De,at)}function ca(Xt,be,De,at,At,mt){const Ct=(mt-be)/(at-be);return Wa(Xt,mt,De+(At-De)*Ct,1),Ct}function Qa(Xt,be,De,at,At,mt){const Ct=(mt-De)/(At-De);return Wa(Xt,be+(at-be)*Ct,mt,1),Ct}function yr(Xt,be){const De=[];for(let at=0;at<Xt.length;at++){const At=Xt[at],mt=At.type;let Ct;if(mt==="Point"||mt==="MultiPoint"||mt==="LineString")Ct=jn(At.geometry,be);else if(mt==="MultiLineString"||mt==="Polygon"){Ct=[];for(const kt of At.geometry)Ct.push(jn(kt,be))}else if(mt==="MultiPolygon"){Ct=[];for(const kt of At.geometry){const Pt=[];for(const qt of kt)Pt.push(jn(qt,be));Ct.push(Pt)}}De.push(vr(At.id,mt,Ct,At.tags))}return De}function jn(Xt,be){const De=[];De.size=Xt.size,Xt.start!==void 0&&(De.start=Xt.start,De.end=Xt.end);for(let at=0;at<Xt.length;at+=3)De.push(Xt[at]+be,Xt[at+1],Xt[at+2]);return De}function Mn(Xt,be){if(Xt.transformed)return Xt;const De=1<<Xt.z,at=Xt.x,At=Xt.y;for(const mt of Xt.features){const Ct=mt.geometry,kt=mt.type;if(mt.geometry=[],kt===1)for(let Pt=0;Pt<Ct.length;Pt+=2)mt.geometry.push(mn(Ct[Pt],Ct[Pt+1],be,De,at,At));else for(let Pt=0;Pt<Ct.length;Pt++){const qt=[];for(let Ht=0;Ht<Ct[Pt].length;Ht+=2)qt.push(mn(Ct[Pt][Ht],Ct[Pt][Ht+1],be,De,at,At));mt.geometry.push(qt)}}return Xt.transformed=!0,Xt}function mn(Xt,be,De,at,At,mt){return[Math.round(De*(Xt*at-At)),Math.round(De*(be*at-mt))]}function en(Xt,be,De,at,At){const mt=be===At.maxZoom?0:At.tolerance/((1<<be)*At.extent),Ct={features:[],numPoints:0,numSimplified:0,numFeatures:Xt.length,source:null,x:De,y:at,z:be,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const kt of Xt)Er(Ct,kt,mt,At);return Ct}function Er(Xt,be,De,at){const At=be.geometry,mt=be.type,Ct=[];if(Xt.minX=Math.min(Xt.minX,be.minX),Xt.minY=Math.min(Xt.minY,be.minY),Xt.maxX=Math.max(Xt.maxX,be.maxX),Xt.maxY=Math.max(Xt.maxY,be.maxY),mt==="Point"||mt==="MultiPoint")for(let kt=0;kt<At.length;kt+=3)Ct.push(At[kt],At[kt+1]),Xt.numPoints++,Xt.numSimplified++;else if(mt==="LineString")As(Ct,At,Xt,De,!1,!1);else if(mt==="MultiLineString"||mt==="Polygon")for(let kt=0;kt<At.length;kt++)As(Ct,At[kt],Xt,De,mt==="Polygon",kt===0);else if(mt==="MultiPolygon")for(let kt=0;kt<At.length;kt++){const Pt=At[kt];for(let qt=0;qt<Pt.length;qt++)As(Ct,Pt[qt],Xt,De,!0,qt===0)}if(Ct.length){let kt=be.tags||null;if(mt==="LineString"&&at.lineMetrics){kt={};for(const qt in be.tags)kt[qt]=be.tags[qt];kt.mapbox_clip_start=At.start/At.size,kt.mapbox_clip_end=At.end/At.size}const Pt={geometry:Ct,type:mt==="Polygon"||mt==="MultiPolygon"?3:mt==="LineString"||mt==="MultiLineString"?2:1,tags:kt};be.id!==null&&(Pt.id=be.id),Xt.features.push(Pt)}}function As(Xt,be,De,at,At,mt){const Ct=at*at;if(at>0&&be.size<(At?Ct:at))return void(De.numPoints+=be.length/3);const kt=[];for(let Pt=0;Pt<be.length;Pt+=3)(at===0||be[Pt+2]>Ct)&&(De.numSimplified++,kt.push(be[Pt],be[Pt+1])),De.numPoints++;At&&function(Pt,qt){let Ht=0;for(let Zt=0,Ra=Pt.length,Ma=Ra-2;Zt<Ra;Ma=Zt,Zt+=2)Ht+=(Pt[Zt]-Pt[Ma])*(Pt[Zt+1]+Pt[Ma+1]);if(Ht>0===qt)for(let Zt=0,Ra=Pt.length;Zt<Ra/2;Zt+=2){const Ma=Pt[Zt],Ba=Pt[Zt+1];Pt[Zt]=Pt[Ra-2-Zt],Pt[Zt+1]=Pt[Ra-1-Zt],Pt[Ra-2-Zt]=Ma,Pt[Ra-1-Zt]=Ba}}(kt,mt),Xt.push(kt)}const ki={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ji{constructor(be,De){const at=(De=this.options=function(mt,Ct){for(const kt in Ct)mt[kt]=Ct[kt];return mt}(Object.create(ki),De)).debug;if(at&&console.time("preprocess data"),De.maxZoom<0||De.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(De.promoteId&&De.generateId)throw new Error("promoteId and generateId cannot be used together.");let At=function(mt,Ct){const kt=[];if(mt.type==="FeatureCollection")for(let Pt=0;Pt<mt.features.length;Pt++)za(kt,mt.features[Pt],Ct,Pt);else za(kt,mt.type==="Feature"?mt:{geometry:mt},Ct);return kt}(be,De);this.tiles={},this.tileCoords=[],at&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",De.indexMaxZoom,De.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),At=function(mt,Ct){const kt=Ct.buffer/Ct.extent;let Pt=mt;const qt=jr(mt,1,-1-kt,kt,0,-1,2,Ct),Ht=jr(mt,1,1-kt,2+kt,0,-1,2,Ct);return(qt||Ht)&&(Pt=jr(mt,1,-kt,1+kt,0,-1,2,Ct)||[],qt&&(Pt=yr(qt,1).concat(Pt)),Ht&&(Pt=Pt.concat(yr(Ht,-1)))),Pt}(At,De),At.length&&this.splitTile(At,0,0,0),at&&(At.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(be,De,at,At,mt,Ct,kt){const Pt=[be,De,at,At],qt=this.options,Ht=qt.debug;for(;Pt.length;){At=Pt.pop(),at=Pt.pop(),De=Pt.pop(),be=Pt.pop();const Zt=1<<De,Ra=zo(De,at,At);let Ma=this.tiles[Ra];if(!Ma&&(Ht>1&&console.time("creation"),Ma=this.tiles[Ra]=en(be,De,at,At,qt),this.tileCoords.push({z:De,x:at,y:At}),Ht)){Ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",De,at,At,Ma.numFeatures,Ma.numPoints,Ma.numSimplified),console.timeEnd("creation"));const In=`z${De}`;this.stats[In]=(this.stats[In]||0)+1,this.total++}if(Ma.source=be,mt==null){if(De===qt.indexMaxZoom||Ma.numPoints<=qt.indexMaxPoints)continue}else{if(De===qt.maxZoom||De===mt)continue;if(mt!=null){const In=mt-De;if(at!==Ct>>In||At!==kt>>In)continue}}if(Ma.source=null,be.length===0)continue;Ht>1&&console.time("clipping");const Ba=.5*qt.buffer/qt.extent,Ar=.5-Ba,Nr=.5+Ba,Vr=1+Ba;let Gr=null,zn=null,Xn=null,qr=null,yn=jr(be,Zt,at-Ba,at+Nr,0,Ma.minX,Ma.maxX,qt),Hr=jr(be,Zt,at+Ar,at+Vr,0,Ma.minX,Ma.maxX,qt);be=null,yn&&(Gr=jr(yn,Zt,At-Ba,At+Nr,1,Ma.minY,Ma.maxY,qt),zn=jr(yn,Zt,At+Ar,At+Vr,1,Ma.minY,Ma.maxY,qt),yn=null),Hr&&(Xn=jr(Hr,Zt,At-Ba,At+Nr,1,Ma.minY,Ma.maxY,qt),qr=jr(Hr,Zt,At+Ar,At+Vr,1,Ma.minY,Ma.maxY,qt),Hr=null),Ht>1&&console.timeEnd("clipping"),Pt.push(Gr||[],De+1,2*at,2*At),Pt.push(zn||[],De+1,2*at,2*At+1),Pt.push(Xn||[],De+1,2*at+1,2*At),Pt.push(qr||[],De+1,2*at+1,2*At+1)}}getTile(be,De,at){be=+be,De=+De,at=+at;const At=this.options,{extent:mt,debug:Ct}=At;if(be<0||be>24)return null;const kt=1<<be,Pt=zo(be,De=De+kt&kt-1,at);if(this.tiles[Pt])return Mn(this.tiles[Pt],mt);Ct>1&&console.log("drilling down to z%d-%d-%d",be,De,at);let qt,Ht=be,Zt=De,Ra=at;for(;!qt&&Ht>0;)Ht--,Zt>>=1,Ra>>=1,qt=this.tiles[zo(Ht,Zt,Ra)];return qt&&qt.source?(Ct>1&&(console.log("found parent tile z%d-%d-%d",Ht,Zt,Ra),console.time("drilling down")),this.splitTile(qt.source,Ht,Zt,Ra,be,De,at),Ct>1&&console.timeEnd("drilling down"),this.tiles[Pt]?Mn(this.tiles[Pt],mt):null):null}}function zo(Xt,be,De){return 32*((1<<Xt)*De+be)+Xt}function Ei(Xt,be){const De=Xt.tileID.canonical;if(!this._geoJSONIndex)return void be(null,null);const at=this._geoJSONIndex.getTile(De.z,De.x,De.y);if(!at)return void be(null,null);const At=new _e(at.features);let mt=ye(At);mt.byteOffset===0&&mt.byteLength===mt.buffer.byteLength||(mt=new Uint8Array(mt)),be(null,{vectorTile:At,rawData:mt.buffer})}class hn extends ${constructor(be,De,at,At,mt,Ct){super(be,De,at,At,Ei,Ct),mt&&(this.loadGeoJSON=mt),this._dynamicIndex=new Te}loadData(be,De){const at=be&&be.request,At=at&&at.collectResourceTiming;this.loadGeoJSON(be,(mt,Ct)=>{if(mt||!Ct)return De(mt);if(typeof Ct!="object")return De(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`));{try{if(be.filter){const Pt=n.X(be.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Pt.result==="error")throw new Error(Pt.value.map(qt=>`${qt.key}: ${qt.message}`).join(", "));Ct.features=Ct.features.filter(qt=>Pt.value.evaluate({zoom:0},qt))}be.dynamic?(Ct.type==="Feature"&&(Ct={type:"FeatureCollection",features:[Ct]}),be.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Ct.features,this.loaded),be.cluster&&(Ct.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=be.cluster?new pt(function({superclusterOptions:Pt,clusterProperties:qt}){if(!qt||!Pt)return Pt;const Ht={},Zt={},Ra={accumulated:null,zoom:0},Ma={properties:null},Ba=Object.keys(qt);for(const Ar of Ba){const[Nr,Vr]=qt[Ar],Gr=n.X(Vr),zn=n.X(typeof Nr=="string"?[Nr,["accumulated"],["get",Ar]]:Nr);Ht[Ar]=Gr.value,Zt[Ar]=zn.value}return Pt.map=Ar=>{Ma.properties=Ar;const Nr={};for(const Vr of Ba)Nr[Vr]=Ht[Vr].evaluate(Ra,Ma);return Nr},Pt.reduce=(Ar,Nr)=>{Ma.properties=Nr;for(const Vr of Ba)Ra.accumulated=Ar[Vr],Ar[Vr]=Zt[Vr].evaluate(Ra,Ma)},Pt}(be)).load(Ct.features):be.dynamic?this._dynamicIndex:function(Pt,qt){return new Ji(Pt,qt)}(Ct,be.geojsonVtOptions)}catch(Pt){return De(Pt)}const kt={};if(At){const Pt=w(at);Pt&&(kt.resourceTiming={},kt.resourceTiming[be.source]=JSON.parse(JSON.stringify(Pt)))}De(null,kt)}})}reloadTile(be,De){const at=this.loaded;return at&&at[be.uid]?be.partial?De(null,void 0):super.reloadTile(be,De):this.loadTile(be,De)}loadGeoJSON(be,De){if(be.request)n.n(be.request,De);else{if(typeof be.data!="string")return De(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`));try{return De(null,JSON.parse(be.data))}catch{return De(new Error(`Input data given to '${be.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(be,De){try{De(null,this._geoJSONIndex.getClusterExpansionZoom(be.clusterId))}catch(at){De(at)}}getClusterChildren(be,De){try{De(null,this._geoJSONIndex.getChildren(be.clusterId))}catch(at){De(at)}}getClusterLeaves(be,De){try{De(null,this._geoJSONIndex.getLeaves(be.clusterId,be.limit,be.offset))}catch(at){De(at)}}}class ui{constructor(be,De){this.tileID=new n.aH(be.tileID.overscaledZ,be.tileID.wrap,be.tileID.canonical.z,be.tileID.canonical.x,be.tileID.canonical.y),this.tileZoom=be.tileZoom,this.uid=be.uid,this.zoom=be.zoom,this.canonical=be.tileID.canonical,this.pixelRatio=be.pixelRatio,this.tileSize=be.tileSize,this.source=be.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=be.projection,this.brightness=De}parse(be,De,at,At){this.status="parsing";const mt=new n.aH(at.tileID.overscaledZ,at.tileID.wrap,at.tileID.canonical.z,at.tileID.canonical.x,at.tileID.canonical.y),Ct=[],kt=De.familiesBySource[at.source],Pt=new n.e0(mt,at.promoteId);return Pt.bucketLayerIDs=[],Pt.is3DTile=!0,n.ei(be).then(qt=>{if(!qt)return At(new Error("Could not parse tile"));const Ht=n.ej(qt,1/n.cd(at.tileID.canonical)),Zt=qt.json.extensionsUsed&&qt.json.extensionsUsed.includes("MAPBOX_mesh_features")||qt.json.asset.extras&&qt.json.asset.extras.MAPBOX_mesh_features,Ra=qt.json.extensionsUsed&&qt.json.extensionsUsed.includes("EXT_meshopt_compression"),Ma=new n.aa(this.zoom,{brightness:this.brightness});for(const Ba in kt)for(const Ar of kt[Ba]){const Nr=Ar[0];Pt.bucketLayerIDs.push(Ar.map(Gr=>n.C(Gr.id,Gr.scope))),Nr.recalculate(Ma,[]);const Vr=new n.ek(Ar,Ht,mt,Zt,Ra,this.brightness,Pt);Zt||(Vr.needsUpload=!0),Ct.push(Vr),Vr.evaluate(Nr)}this.status="done",At(null,{buckets:Ct,featureIndex:Pt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(qt=>At(new Error(qt.message)))}}class Ec{constructor(be,De,at,At,mt,Ct){this.actor=be,this.layerIndex=De,this.availableImages=at,this.brightness=Ct,this.loading={},this.loaded={}}loadTile(be,De){const at=be.uid,At=this.loading[at]=new ui(be,this.brightness);n.bj(be.request,(mt,Ct)=>{const kt=!this.loading[at];return delete this.loading[at],kt||mt?(At.status="done",kt||(this.loaded[at]=At),De(mt)):Ct&&Ct.byteLength!==0?void At.parse(Ct,this.layerIndex,be,(Pt,qt)=>{At.status="done",this.loaded=this.loaded||{},this.loaded[at]=At,Pt||!qt?De(Pt):De(null,qt)}):(At.status="done",this.loaded[at]=At,De())})}reloadTile(be,De){const at=this.loaded,At=be.uid;if(at&&at[At]){const mt=at[At];mt.projection=be.projection,mt.brightness=be.brightness;const Ct=(kt,Pt)=>{mt.reloadCallback&&(delete mt.reloadCallback,this.loadTile(be,De)),De(kt,Pt)};mt.status==="parsing"?mt.reloadCallback=Ct:mt.status==="done"&&this.loadTile(be,De)}}abortTile(be,De){const at=be.uid;this.loading[at]&&delete this.loading[at],De()}removeTile(be,De){const at=this.loaded,At=be.uid;at&&at[At]&&delete at[At],De()}}class Fs{constructor(be){this.self=be,this.actor=new n.el(be,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new n.y,this.projections={},this.defaultProjection=n.bP({name:"mercator"}),this.workerSourceTypes={vector:$,geojson:hn,"raster-dem":Q,"raster-array":de,"batched-model":Ec},this.workerSources={},this.self.registerWorkerSource=(De,at)=>{if(this.workerSourceTypes[De])throw new Error(`Worker source with name "${De}" already registered.`);this.workerSourceTypes[De]=at},this.self.registerRTLTextPlugin=De=>{if(n.em.isParsed())throw new Error("RTL text plugin already registered.");n.em.applyArabicShaping=De.applyArabicShaping,n.em.processBidirectionalText=De.processBidirectionalText,n.em.processStyledBidirectionalText=De.processStyledBidirectionalText}}clearCaches(be,De,at){delete this.layerIndexes[be],delete this.availableImages[be],delete this.workerSources[be],at()}checkIfReady(be,De,at){at()}setReferrer(be,De){this.referrer=De}spriteLoaded(be,{scope:De,isLoaded:at}){if(this.isSpriteLoaded[be]||(this.isSpriteLoaded[be]={}),this.isSpriteLoaded[be][De]=at,this.workerSources[be]&&this.workerSources[be][De])for(const At in this.workerSources[be][De]){const mt=this.workerSources[be][De][At];for(const Ct in mt){const kt=mt[Ct];kt instanceof $&&(kt.isSpriteLoaded=at,kt.fire(new n.A("isSpriteLoaded")))}}}setImages(be,{scope:De,images:at},At){if(this.availableImages[be]||(this.availableImages[be]={}),this.availableImages[be][De]=at,this.workerSources[be]&&this.workerSources[be][De]){for(const mt in this.workerSources[be][De]){const Ct=this.workerSources[be][De][mt];for(const kt in Ct)Ct[kt].availableImages=at}At()}else At()}setProjection(be,De){this.projections[be]=n.bP(De)}setBrightness(be,De,at){this.brightness=De,at()}setLayers(be,De,at){this.getLayerIndex(be,De.scope).replace(De.layers,De.options),at()}updateLayers(be,De,at){this.getLayerIndex(be,De.scope).update(De.layers,De.removedIds,De.options),at()}loadTile(be,De,at){De.projection=this.projections[be]||this.defaultProjection,this.getWorkerSource(be,De.type,De.source,De.scope).loadTile(De,at)}decodeRasterArray(be,De,at){this.getWorkerSource(be,De.type,De.source,De.scope).decodeRasterArray(De,at)}reloadTile(be,De,at){De.projection=this.projections[be]||this.defaultProjection,this.getWorkerSource(be,De.type,De.source,De.scope).reloadTile(De,at)}abortTile(be,De,at){this.getWorkerSource(be,De.type,De.source,De.scope).abortTile(De,at)}removeTile(be,De,at){this.getWorkerSource(be,De.type,De.source,De.scope).removeTile(De,at)}removeSource(be,De,at){if(!(this.workerSources[be]&&this.workerSources[be][De.scope]&&this.workerSources[be][De.scope][De.type]&&this.workerSources[be][De.scope][De.type][De.source]))return;const At=this.workerSources[be][De.scope][De.type][De.source];delete this.workerSources[be][De.scope][De.type][De.source],At.removeSource!==void 0?At.removeSource(De,at):at()}loadWorkerSource(be,De,at){try{this.self.importScripts(De.url),at()}catch(At){at(At.toString())}}syncRTLPluginState(be,De,at){try{n.em.setState(De);const At=n.em.getPluginURL();if(n.em.isLoaded()&&!n.em.isParsed()&&At!=null){this.self.importScripts(At);const mt=n.em.isParsed();at(mt?void 0:new Error(`RTL Text Plugin failed to import scripts from ${At}`),mt)}}catch(At){at(At.toString())}}setDracoUrl(be,De){this.dracoUrl=De}getAvailableImages(be,De){this.availableImages[be]||(this.availableImages[be]={});let at=this.availableImages[be][De];return at||(at=[]),at}getLayerIndex(be,De){this.layerIndexes[be]||(this.layerIndexes[be]={});let at=this.layerIndexes[be][De];return at||(at=this.layerIndexes[be][De]=new z,at.scope=De),at}getWorkerSource(be,De,at,At){const mt=this.workerSources;return mt[be]||(mt[be]={}),mt[be][At]||(mt[be][At]={}),mt[be][At][De]||(mt[be][At][De]={}),this.isSpriteLoaded[be]||(this.isSpriteLoaded[be]={}),mt[be][At][De][at]||(mt[be][At][De][at]=new this.workerSourceTypes[De]({send:(Ct,kt,Pt,qt,Ht,Zt)=>{this.actor.send(Ct,kt,Pt,be,Ht,Zt)},scheduler:this.actor.scheduler},this.getLayerIndex(be,At),this.getAvailableImages(be,At),this.isSpriteLoaded[be][At],void 0,this.brightness)),mt[be][At][De][at]}rasterizeImages(be,De,at){const At=new Map;for(const[mt,{image:Ct,imageVariant:kt}]of De.tasks.entries()){const Pt=this.imageRasterizer.rasterize(kt,Ct,De.scope,be);At.set(mt,Pt)}at(void 0,At)}removeRasterizedImages(be,De,at){this.imageRasterizer.removeImagesFromCacheByIds(De.imageIds,De.scope,be),at()}enforceCacheSizeLimit(be,De){n.en(De)}getWorkerPerformanceMetrics(be,De,at){at(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Fs(self)),Fs}),l(["./shared"],function(n){var w="3.11.0";const T={create:"create",load:"load",fullLoad:"fullLoad"},E={mark(g){performance.mark(g)},measure(g,o,c){performance.measure(g,o,c)}};function z(g){const o=g.name.split("?")[0];return n.a(o)&&o.includes("mapbox-gl.js")?"javascript":n.a(o)&&o.includes("mapbox-gl.css")?"css":n.b(o)?"fontRange":n.c(o)?"sprite":n.i(o)?"style":n.d(o)?"tilejson":"other"}var k,U={},q=function(){if(k)return U;function g(A){return!o(A)}function o(A){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var C,P,L=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(L);try{P=new Worker(j),C=!0}catch{C=!1}return P&&P.terminate(),URL.revokeObjectURL(j),C}()?function(){var C=document.createElement("canvas");C.width=C.height=1;var P=C.getContext("2d");if(!P)return!1;var L=P.getImageData(0,0,1,1);return L&&L.width===C.width}()?(c[R=A&&A.failIfMajorPerformanceCaveat]===void 0&&(c[R]=function(C){var P,L=function(j){var Z=document.createElement("canvas"),K=Object.create(g.webGLContextAttributes);return K.failIfMajorPerformanceCaveat=j,Z.getContext("webgl2",K)}(C);if(!L)return!1;try{P=L.createShader(L.VERTEX_SHADER)}catch{return!1}return!(!P||L.isContextLost())&&(L.shaderSource(P,"void main() {}"),L.compileShader(P),L.getShaderParameter(P,L.COMPILE_STATUS)===!0)}(R)),c[R]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var R}k=1,U.supported=g,U.notSupportedReason=o;var c={};return g.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},U}();function H(g,o,c){const A=document.createElement(g);return o!=null&&(A.className=o),c&&c.appendChild(A),A}function $(g,o,c){const A=document.createElementNS("http://www.w3.org/2000/svg",g);for(const R of Object.keys(o))A.setAttributeNS(null,R,String(o[R]));return c&&c.appendChild(A),A}const Q=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ne=Q&&Q.userSelect!==void 0?"userSelect":"WebkitUserSelect";let de;function ge(){Q&&ne&&(de=Q[ne],Q[ne]="none")}function fe(){Q&&ne&&(Q[ne]=de)}function _e(g){g.preventDefault(),g.stopPropagation(),window.removeEventListener("click",_e,!0)}function me(){window.addEventListener("click",_e,!0),window.setTimeout(()=>{window.removeEventListener("click",_e,!0)},0)}function Ae(g,o){const c=g.getBoundingClientRect();return ie(g,c,o)}function Te(g,o){const c=g.getBoundingClientRect(),A=[];for(let R=0;R<o.length;R++)A.push(ie(g,c,o[R]));return A}function Oe(g){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&g.button===2&&g.ctrlKey?0:g.button}function ie(g,o,c){const A=g.offsetWidth===o.width?1:g.offsetWidth/o.width;return new n.P((c.clientX-o.left)*A,(c.clientY-o.top)*A)}const we="01",Me="NO_ACCESS_TOKEN";class Ve{constructor(o,c,A){this._transformRequestFn=o,this._customAccessToken=c,this._silenceAuthErrors=!!A,this._createSkuToken()}_createSkuToken(){const o=function(){let c="";for(let A=0;A<10;A++)c+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",we,c].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,c){return this._transformRequestFn&&this._transformRequestFn(o,c)||{url:o}}normalizeStyleURL(o,c){if(!n.f(o))return o;const A=Ue(o);return A.params.push(`sdk=js-${w}`),A.path=`/styles/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeGlyphsURL(o,c){if(!n.f(o))return o;const A=Ue(o);return A.path=`/fonts/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeModelURL(o,c){if(!n.f(o))return o;const A=Ue(o);return A.path=`/models/v1${A.path}`,this._makeAPIURL(A,this._customAccessToken||c)}normalizeSourceURL(o,c,A,R){if(!n.f(o))return o;const C=Ue(o);return C.path=`/v4/${C.authority}.json`,C.params.push("secure"),A&&C.params.push(`language=${A}`),R&&C.params.push(`worldview=${R}`),this._makeAPIURL(C,this._customAccessToken||c)}normalizeIconsetURL(o,c){const A=Ue(o);return n.f(o)?(A.path=`/styles/v1${A.path}/iconset.pbf`,this._makeAPIURL(A,this._customAccessToken||c)):Be(A)}normalizeSpriteURL(o,c,A,R){const C=Ue(o);return n.f(o)?(C.path=`/styles/v1${C.path}/sprite${c}${A}`,this._makeAPIURL(C,this._customAccessToken||R)):(C.path+=`${c}${A}`,Be(C))}normalizeTileURL(o,c,A){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!n.f(o))return o;const R=Ue(o);R.path=R.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${c||A&&R.authority!=="raster"&&A===512?"@2x":""}${n.m.supported?".webp":"$1"}`),R.authority==="raster"?R.path=`/${n.e.RASTER_URL_PREFIX}${R.path}`:R.authority==="rasterarrays"?R.path=`/${n.e.RASTERARRAYS_URL_PREFIX}${R.path}`:R.authority==="3dtiles"?R.path=`/${n.e.TILES3D_URL_PREFIX}${R.path}`:(R.path=R.path.replace(/^.+\/v4\//,"/"),R.path=`/${n.e.TILE_URL_VERSION}${R.path}`);const C=this._customAccessToken||function(P){for(const L of P){const j=L.match(/^access_token=(.*)$/);if(j)return j[1]}return null}(R.params)||n.e.ACCESS_TOKEN;return n.e.REQUIRE_ACCESS_TOKEN&&C&&this._skuToken&&R.params.push(`sku=${this._skuToken}`),this._makeAPIURL(R,C)}canonicalizeTileURL(o,c){const A=Ue(o);if(!A.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!A.path.match(/\.[\w]+$/))return o;let R="mapbox://";A.path.match(/^\/raster\/v1\//)?R+=`raster/${A.path.replace(`/${n.e.RASTER_URL_PREFIX}/`,"")}`:A.path.match(/^\/rasterarrays\/v1\//)?R+=`rasterarrays/${A.path.replace(`/${n.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:R+=`tiles/${A.path.replace(`/${n.e.TILE_URL_VERSION}/`,"")}`;let C=A.params;return c&&(C=C.filter(P=>!P.match(/^access_token=/))),C.length&&(R+=`?${C.join("&")}`),R}canonicalizeTileset(o,c){const A=!!c&&n.f(c),R=[];for(const C of o.tiles||[])n.h(C)?R.push(this.canonicalizeTileURL(C,A)):R.push(C);return R}_makeAPIURL(o,c){const A="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",R=Ue(n.e.API_URL);if(o.protocol=R.protocol,o.authority=R.authority,o.protocol==="http"){const C=o.params.indexOf("secure");C>=0&&o.params.splice(C,1)}if(R.path!=="/"&&(o.path=`${R.path}${o.path}`),!n.e.REQUIRE_ACCESS_TOKEN)return Be(o);if(c=c||n.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!c)throw new Error(`An API access token is required to use Mapbox GL. ${A}`);if(c[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${A}`)}return o.params=o.params.filter(C=>C.indexOf("access_token")===-1),o.params.push(`access_token=${c||""}`),Be(o)}}const Ie=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ue(g){const o=g.match(Ie);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function Be(g){const o=g.params.length?`?${g.params.join("&")}`:"";return`${g.protocol}://${g.authority}${g.path}${o}`}const ke="mapbox.eventData";function Je(g){if(!g)return null;const o=g.split(".");if(!o||o.length!==3)return null;try{return JSON.parse(n.j(o[1]))}catch{return null}}class Le{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const c=Je(n.e.ACCESS_TOKEN);let A="";return A=c&&c.u?n.k(c.u):n.e.ACCESS_TOKEN||"",o?`${ke}.${o}:${A}`:`${ke}:${A}`}fetchEventData(){const o=n.s("localStorage"),c=this.getStorageKey(),A=this.getStorageKey("uuid");if(o)try{const R=localStorage.getItem(c);R&&(this.eventData=JSON.parse(R));const C=localStorage.getItem(A);C&&(this.anonId=C)}catch{n.w("Unable to read from LocalStorage")}}saveEventData(){const o=n.s("localStorage"),c=this.getStorageKey(),A=this.getStorageKey("uuid"),R=this.anonId;if(o&&R)try{localStorage.setItem(A,R),Object.keys(this.eventData).length>=1&&localStorage.setItem(c,JSON.stringify(this.eventData))}catch{n.w("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,c,A,R){if(!n.e.EVENTS_URL)return;const C=Ue(n.e.EVENTS_URL);C.params.push(`access_token=${R||n.e.ACCESS_TOKEN||""}`);const P={event:this.type,created:new Date(o).toISOString()},L=c?n.l(P,c):P,j={url:Be(C),headers:{"Content-Type":"text/plain"},body:JSON.stringify([L])};this.pendingRequest=n.p(j,Z=>{this.pendingRequest=null,A(Z),this.saveEventData(),this.processRequests(R)})}queueRequest(o,c){this.queue.push(o),this.processRequests(c)}}const qe=new class extends Le{constructor(g){super("appUserTurnstile"),this._customAccessToken=g}postTurnstileEvent(g,o){n.e.EVENTS_URL&&n.e.ACCESS_TOKEN&&Array.isArray(g)&&g.some(c=>n.f(c)||n.h(c))&&this.queueRequest(Date.now(),o)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Je(n.e.ACCESS_TOKEN),c=o?o.u:n.e.ACCESS_TOKEN;let A=c!==this.eventData.tokenU;n.v(this.anonId)||(this.anonId=n.u(),A=!0);const R=this.queue.shift();if(this.eventData.lastSuccess){const C=new Date(this.eventData.lastSuccess),P=new Date(R),L=(R-this.eventData.lastSuccess)/864e5;A=A||L>=1||L<-1||C.getDate()!==P.getDate()}else A=!0;A?this.postEvent(R,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:we,"enabled.telemetry":!1,userId:this.anonId},C=>{C||(this.eventData.lastSuccess=R,this.eventData.tokenU=c)},g):this.processRequests()}},ye=qe.postTurnstileEvent.bind(qe),ze=new class extends Le{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(g,o,c,A){this.skuToken=o,this.errorCb=A,n.e.EVENTS_URL&&(c||n.e.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},c):this.errorCb(new Error(Me)))}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),n.v(this.anonId)||(this.anonId=n.u()),this.postEvent(c,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:we,skuToken:this.skuToken,userId:this.anonId},A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},g))}remove(){this.errorCb=null}},We=ze.postMapLoadEvent.bind(ze),lt=new class extends Le{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(g){let o=this.mapInstanceIdMap.get(g);return o||(o=n.u(),this.mapInstanceIdMap.set(g,o)),o}getEventId(g){const o=this.eventIdPerMapInstanceMap.get(g)||0;return this.eventIdPerMapInstanceMap.set(g,o+1),o}postStyleLoadEvent(g,o){const{map:c,style:A,importedStyles:R}=o;if(!n.e.EVENTS_URL||!g&&!n.e.ACCESS_TOKEN)return;const C=this.getMapInstanceId(c),P={mapInstanceId:C,eventId:this.getEventId(C),style:A};R.length&&(P.importedStyles=R),this.queueRequest({timestamp:Date.now(),payload:P},g)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,payload:c}=this.queue.shift();this.postEvent(o,c,()=>{},g)}},vt=lt.postStyleLoadEvent.bind(lt),Ot=new class extends Le{constructor(){super("gljs.performance")}postPerformanceEvent(g,o){n.e.EVENTS_URL&&(g||n.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:o},g)}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:o,performanceData:c}=this.queue.shift(),A=function(R){const C=performance.getEntriesByType("resource"),P=performance.getEntriesByType("mark"),L=function(ce){const Ce={};if(ce){for(const Re in ce)if(Re!=="other")for(const Pe of ce[Re]){const Ne=`${Re}ResolveRangeMin`,Ge=`${Re}ResolveRangeMax`,et=`${Re}RequestCount`,Xe=`${Re}RequestCachedCount`;Ce[Ne]=Math.min(Ce[Ne]||1/0,Pe.startTime),Ce[Ge]=Math.max(Ce[Ge]||-1/0,Pe.responseEnd);const ct=nt=>{Ce[nt]===void 0&&(Ce[nt]=0),++Ce[nt]};Pe.transferSize!==void 0&&Pe.transferSize===0&&ct(Xe),ct(et)}}return Ce}(function(ce,Ce){const Re={};if(ce)for(const Pe of ce){const Ne=Ce(Pe);Re[Ne]===void 0&&(Re[Ne]=[]),Re[Ne].push(Pe)}return Re}(C,z)),j=window.devicePixelRatio,Z=navigator.connection||navigator.mozConnection||navigator.webkitConnection,K=Z?Z.effectiveType:void 0,te={counters:[],metadata:[],attributes:[]},ae=(ce,Ce,Re)=>{Re!=null&&ce.push({name:Ce,value:Re.toString()})};for(const ce in L)ae(te.counters,ce,L[ce]);if(R.interactionRange[0]!==1/0&&R.interactionRange[1]!==-1/0&&(ae(te.counters,"interactionRangeMin",R.interactionRange[0]),ae(te.counters,"interactionRangeMax",R.interactionRange[1])),P)for(const ce of Object.keys(T)){const Ce=T[ce],Re=P.find(Pe=>Pe.name===Ce);Re&&ae(te.counters,Ce,Re.startTime)}return ae(te.counters,"visibilityHidden",R.visibilityHidden),ae(te.attributes,"style",function(ce){if(ce)for(const Ce of ce){const Re=Ce.name.split("?")[0];if(n.i(Re)){const Pe=Re.split("/").slice(-2);if(Pe.length===2)return`mapbox://styles/${Pe[0]}/${Pe[1]}`}}}(C)),ae(te.attributes,"terrainEnabled",R.terrainEnabled?"true":"false"),ae(te.attributes,"fogEnabled",R.fogEnabled?"true":"false"),ae(te.attributes,"projection",R.projection),ae(te.attributes,"zoom",R.zoom),ae(te.metadata,"devicePixelRatio",j),ae(te.metadata,"connectionEffectiveType",K),ae(te.metadata,"navigatorUserAgent",navigator.userAgent),ae(te.metadata,"screenWidth",window.screen.width),ae(te.metadata,"screenHeight",window.screen.height),ae(te.metadata,"windowWidth",window.innerWidth),ae(te.metadata,"windowHeight",window.innerHeight),ae(te.metadata,"mapWidth",R.width/j),ae(te.metadata,"mapHeight",R.height/j),ae(te.metadata,"webglRenderer",R.renderer),ae(te.metadata,"webglVendor",R.vendor),ae(te.metadata,"sdkVersion",w),ae(te.metadata,"sdkIdentifier","mapbox-gl-js"),te}(c);for(const R of A.metadata);for(const R of A.counters);for(const R of A.attributes);this.postEvent(o,A,()=>{},g)}},dt=Ot.postPerformanceEvent.bind(Ot),pt=new class extends Le{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(g,o,c,A){if(!n.e.API_URL||!n.e.SESSION_PATH)return;const R=Ue(n.e.API_URL+n.e.SESSION_PATH);R.params.push(`sku=${o||""}`),R.params.push(`access_token=${A||n.e.ACCESS_TOKEN||""}`);const C={url:Be(R),headers:{"Content-Type":"text/plain"}};this.pendingRequest=n.g(C,P=>{this.pendingRequest=null,c(P),this.saveEventData(),this.processRequests(A)})}getSessionAPI(g,o,c,A){this.skuToken=o,this.errorCb=A,n.e.SESSION_PATH&&n.e.API_URL&&(c||n.e.ACCESS_TOKEN?this.queueRequest({id:g,timestamp:Date.now()},c):this.errorCb(new Error(Me)))}processRequests(g){if(this.pendingRequest||this.queue.length===0)return;const{id:o,timestamp:c}=this.queue.shift();o&&this.success[o]||this.getSession(c,this.skuToken,A=>{A?this.errorCb(A):o&&(this.success[o]=!0)},g)}remove(){this.errorCb=null}},ve=pt.getSessionAPI.bind(pt),ea=new Set;function Kt(g,o){o?ea.add(g):ea.delete(g)}class Ea{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(o,c){this._updatedSourceCaches[o]=c,this.setDirty()}discardSourceCacheUpdate(o){delete this._updatedSourceCaches[o]}updateLayer(o){const c=o.scope;this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._updatedLayers[c].add(o.id),this.setDirty()}removeLayer(o){const c=o.scope;this._removedLayers[c]=this._removedLayers[c]||{},this._updatedLayers[c]=this._updatedLayers[c]||new Set,this._removedLayers[c][o.id]=o,this._updatedLayers[c].delete(o.id),this._updatedPaintProps.delete(o.fqid),this.setDirty()}getRemovedLayer(o){return this._removedLayers[o.scope]?this._removedLayers[o.scope][o.id]:null}discardLayerRemoval(o){this._removedLayers[o.scope]&&delete this._removedLayers[o.scope][o.id]}getLayerUpdatesByScope(){const o={};for(const c in this._updatedLayers)o[c]=o[c]||{},o[c].updatedIds=Array.from(this._updatedLayers[c].values());for(const c in this._removedLayers)o[c]=o[c]||{},o[c].removedIds=Object.keys(this._removedLayers[c]);return o}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(o){this._updatedPaintProps.add(o.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(o){this._updatedImages.add(n.I.toString(o)),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Bt(g){const{userImage:o}=g;return!!(o&&o.render&&o.render())&&(g.data.replace(new Uint8Array(o.data.buffer)),!0)}class la extends n.E{constructor(o){super(),this._images={},this._iconsets={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.patternsInFlight=new Set,this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=o,o!=="raster"&&n.t()&&(this.imageRasterizerDispatcher=new n.D(n.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new n.y),this._imageRasterizer}createScope(o){this._images[o]={},this._iconsets[o]={},this.loaded[o]=!1,this.updatedImages[o]=new Set,this.patterns[o]={},this.callbackDispatchedThisFrame[o]=new Set,this.atlasImage[o]=new n.r({width:1,height:1})}createIconset(o,c){this._iconsets[o][c]={}}isLoaded(){for(const o in this.loaded)if(!this.loaded[o])return!1;return!0}setLoaded(o,c){if(this.loaded[c]!==o&&(this.loaded[c]=o,o)){for(const{ids:A,callback:R}of this.requestors)this._notify(A,c,R);this.requestors=[]}}hasImage(o,c){return!!this.getImage(o,c)}getImage(o,c){return(o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c])[o.name]}addImage(o,c,A){const R=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c];this._validate(o,A)&&(R[o.name]=A)}_validate(o,c){let A=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchX" value`))),A=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "stretchY" value`))),A=!1),this._validateContent(c.content,c)||(this.fire(new n.z(new Error(`Image "${o.name}" has invalid "content" value`))),A=!1),A}_validateStretch(o,c){if(!o)return!0;let A=0;for(const R of o){if(R[0]<A||R[1]<R[0]||c<R[1])return!1;A=R[1]}return!0}_validateContent(o,c){return o?o.length!==4||!c.usvg&&(o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3])?!1:!(o[2]<o[0]||o[3]<o[1]):!0}updateImage(o,c,A){const R=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c];A.version=R[o.name].version+1,R[o.name]=A,this.updatedImages[c].add(o),this.removeFromImageRasterizerCache(o,c)}clearUpdatedImages(o){this.updatedImages[o].clear()}removeFromImageRasterizerCache(o,c){if(this.spriteFormat!=="raster")if(n.t()){const A={imageIds:[o],scope:c};this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",A)}else this.imageRasterizer.removeImagesFromCacheByIds([o],c)}removeImage(o,c){const A=o.iconsetId?this._iconsets[c][o.iconsetId]:this._images[c],R=A[o.name];delete A[o.name],delete this.patterns[c][o.name],this.removeFromImageRasterizerCache(o,c),R.userImage&&R.userImage.onRemove&&R.userImage.onRemove()}listImages(o){const c=[];for(const A of Object.keys(this._images[o]))c.push(new n.I(A));for(const A in this._iconsets[o])for(const R of Object.keys(this._iconsets[o][A]))c.push(new n.I({name:R,iconsetId:A}));return c}getImages(o,c,A){let R=!0;const C=!!this.loaded[c];if(!C)for(const P of o)(P.iconsetId?this._iconsets[c][P.iconsetId]:this._images[c])[P.name]||(R=!1);C||R?this._notify(o,c,A):this.requestors.push({ids:o,scope:c,callback:A})}rasterizeImages({scope:o,tasks:c},A){const R=new Map;for(const[C,P]of c.entries()){const L=this.getImage(P.id,o);L&&R.set(C,{image:L,imageVariant:P})}this._rasterizeImages(o,R,A)}_rasterizeImages(o,c,A){if(n.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{tasks:c,scope:o},A);else{const R=new Map;for(const[C,{image:P,imageVariant:L}]of c.entries())R.set(C,this.imageRasterizer.rasterize(L,P,o,0));A(void 0,R)}}getUpdatedImages(o){return this.updatedImages[o]||new Set}_notify(o,c,A){const R=new Map;for(const C of o){C.iconsetId&&(this._iconsets[c][C.iconsetId]=this._iconsets[c][C.iconsetId]||{});const P=(C.iconsetId?this._iconsets[c][C.iconsetId]:this._images[c])[C.name];if(!P){if(C.iconsetId)continue;n.w(`Image "${C.name}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`),this.fire(new n.A("styleimagemissing",{id:C.name}));continue}const L={data:P.usvg?null:P.data.clone(),pixelRatio:P.pixelRatio,sdf:P.sdf,usvg:P.usvg,version:P.version,stretchX:P.stretchX,stretchY:P.stretchY,content:P.content,hasRenderCallback:!!(P.userImage&&P.userImage.render)};P.usvg&&Object.assign(L,{width:P.icon.usvg_tree.width,height:P.icon.usvg_tree.height}),R.set(n.I.toString(C),L)}A(null,R)}getPixelSize(o){const{width:c,height:A}=this.atlasImage[o];return{width:c,height:A}}getPattern(o,c,A){const R=this.patterns[c][o.name],C=this.getImage(o,c);if(!C)return null;if(R){if(R.position.version===C.version)return R.position;R.position.version=C.version}else{if(C.usvg&&!C.data){const P=this.getPatternInFlightId(o.toString(),c);if(this.patternsInFlight.has(P))return null;this.patternsInFlight.add(P);const L=new n.B(o).scaleSelf(n.q.devicePixelRatio),j=new Map([[L.toString(),{image:C,imageVariant:L}]]);return this._rasterizeImages(c,j,(Z,K)=>this.storePatternImage(L,c,C,A,K)),null}this.storePattern(o,c,C)}return this._updatePatternAtlas(c,A),this.patterns[c][o.name].position}getPatternInFlightId(o,c){return n.C(o,c)}hasPatternsInFlight(){return this.patternsInFlight.size!==0}storePatternImage(o,c,A,R,C){const P=o.toString(),L=C?C.get(P):void 0;L&&(A.data=L,this.storePattern(o.id,c,A),this._updatePatternAtlas(c,R),this.patternsInFlight.delete(this.getPatternInFlightId(o.id.toString(),c)))}storePattern(o,c,A){const R={w:A.data.width+2*n.F,h:A.data.height+2*n.F,x:0,y:0},C=new n.G(R,A,n.F);this.patterns[c][o.name]={bin:R,position:C}}bind(o,c){const A=o.gl;let R=this.atlasTexture[c];R?this.dirty&&(R.update(this.atlasImage[c]),this.dirty=!1):(R=new n.T(o,this.atlasImage[c],A.RGBA8),this.atlasTexture[c]=R),R.bind(A.LINEAR,A.CLAMP_TO_EDGE)}_updatePatternAtlas(o,c){const A=[];for(const L in this.patterns[o])A.push(this.patterns[o][L].bin);const{w:R,h:C}=n.H(A),P=this.atlasImage[o];P.resize({width:R||1,height:C||1});for(const L in this.patterns[o]){const{bin:j,position:Z}=this.patterns[o][L];let K=Z.padding;const te=j.x+K,ae=j.y+K,ce=this._images[o][L].data,Ce=ce.width,Re=ce.height;K=K>1?K-1:K,n.r.copy(ce,P,{x:0,y:0},{x:te,y:ae},{width:Ce,height:Re},c),n.r.copy(ce,P,{x:0,y:Re-K},{x:te,y:ae-K},{width:Ce,height:K},c),n.r.copy(ce,P,{x:0,y:0},{x:te,y:ae+Re},{width:Ce,height:K},c),n.r.copy(ce,P,{x:Ce-K,y:0},{x:te-K,y:ae},{width:K,height:Re},c),n.r.copy(ce,P,{x:0,y:0},{x:te+Ce,y:ae},{width:K,height:Re},c),n.r.copy(ce,P,{x:Ce-K,y:Re-K},{x:te-K,y:ae-K},{width:K,height:K},c),n.r.copy(ce,P,{x:0,y:Re-K},{x:te+Ce,y:ae-K},{width:K,height:K},c),n.r.copy(ce,P,{x:0,y:0},{x:te+Ce,y:ae+Re},{width:K,height:K},c),n.r.copy(ce,P,{x:Ce-K,y:0},{x:te-K,y:ae+Re},{width:K,height:K},c)}this.dirty=!0}beginFrame(){for(const o in this._images)this.callbackDispatchedThisFrame[o]=new Set}dispatchRenderCallbacks(o,c){for(const A of o){if(this.callbackDispatchedThisFrame[c].has(A.toString()))continue;this.callbackDispatchedThisFrame[c].add(A.toString());const R=(A.iconsetId?this._iconsets[c][A.iconsetId]:this._images[c])[A.name];Bt(R)&&this.updateImage(A,c,R)}}}function St(g){const o=g.key,c=g.value,A=g.valueSpec||{},R=g.objectElementValidators||{},C=g.style,P=g.styleSpec;let L=[];const j=n.K(c);if(j!=="object")return[new n.V(o,c,`object expected, ${j} found`)];for(const Z in c){const K=Z.split(".")[0];let te;R[K]?te=R[K]:A[K]?te=Er:R["*"]?te=R["*"]:A["*"]&&(te=Er),te?L=L.concat(te({key:(o&&`${o}.`)+Z,value:c[Z],valueSpec:A[K]||A["*"],style:C,styleSpec:P,object:c,objectKey:Z},c)):L.push(new n.J(o,c[Z],`unknown property "${Z}"`))}for(const Z in A)R[Z]||A[Z].required&&A[Z].default===void 0&&c[Z]===void 0&&L.push(new n.V(o,c,`missing required property "${Z}"`));return L}function vr(g){const o=g.value,c=g.valueSpec,A=g.style,R=g.styleSpec,C=g.key,P=g.arrayElementValidator||Er;if(n.K(o)!=="array")return[new n.V(C,o,`array expected, ${n.K(o)} found`)];if(c.length&&o.length!==c.length)return[new n.V(C,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new n.V(C,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let L={type:c.value,values:c.values,minimum:c.minimum,maximum:c.maximum,function:void 0};R.$version<7&&(L.function=c.function),n.K(c.value)==="object"&&(L=c.value);let j=[];for(let Z=0;Z<o.length;Z++)j=j.concat(P({array:o,arrayIndex:Z,value:o[Z],valueSpec:L,style:A,styleSpec:R,key:`${C}[${Z}]`},!0));return j}function Va(g){const o=g.key,c=g.value,A=g.valueSpec;let R=n.K(c);if(R==="number"&&c!=c&&(R="NaN"),R!=="number")return[new n.V(o,c,`number expected, ${R} found`)];if("minimum"in A){let C=A.minimum;if(n.K(A.minimum)==="array"&&(C=A.minimum[g.arrayIndex]),c<C)return[new n.V(o,c,`${c} is less than the minimum value ${C}`)]}if("maximum"in A){let C=A.maximum;if(n.K(A.maximum)==="array"&&(C=A.maximum[g.arrayIndex]),c>C)return[new n.V(o,c,`${c} is greater than the maximum value ${C}`)]}return[]}function za(g){const o=g.valueSpec,c=n.M(g.value.type);let A,R,C,P={};const L=c!=="categorical"&&g.value.property===void 0,j=!L,Z=n.K(g.value.stops)==="array"&&n.K(g.value.stops[0])==="array"&&n.K(g.value.stops[0][0])==="object",K=St({key:g.key,value:g.value,valueSpec:g.styleSpec.function,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:function(ce){if(c==="identity")return[new n.V(ce.key,ce.value,'identity function may not have a "stops" property')];let Ce=[];const Re=ce.value;return Ce=Ce.concat(vr({key:ce.key,value:Re,valueSpec:ce.valueSpec,style:ce.style,styleSpec:ce.styleSpec,arrayElementValidator:te})),n.K(Re)==="array"&&Re.length===0&&Ce.push(new n.V(ce.key,Re,"array must have at least one stop")),Ce},default:function(ce){return Er({key:ce.key,value:ce.value,valueSpec:o,style:ce.style,styleSpec:ce.styleSpec})}}});return c==="identity"&&L&&K.push(new n.V(g.key,g.value,'missing required property "property"')),c==="identity"||g.value.stops||K.push(new n.V(g.key,g.value,'missing required property "stops"')),c==="exponential"&&g.valueSpec.expression&&!n.N(g.valueSpec)&&K.push(new n.V(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(j&&!n.O(g.valueSpec)?K.push(new n.V(g.key,g.value,"property functions not supported")):L&&!n.Q(g.valueSpec)&&K.push(new n.V(g.key,g.value,"zoom functions not supported"))),c!=="categorical"&&!Z||g.value.property!==void 0||K.push(new n.V(g.key,g.value,'"property" property is required')),K;function te(ce){let Ce=[];const Re=ce.value,Pe=ce.key;if(n.K(Re)!=="array")return[new n.V(Pe,Re,`array expected, ${n.K(Re)} found`)];if(Re.length!==2)return[new n.V(Pe,Re,`array length 2 expected, length ${Re.length} found`)];if(Z){if(n.K(Re[0])!=="object")return[new n.V(Pe,Re,`object expected, ${n.K(Re[0])} found`)];if(Re[0].zoom===void 0)return[new n.V(Pe,Re,"object stop key must have zoom")];if(Re[0].value===void 0)return[new n.V(Pe,Re,"object stop key must have value")];const Ne=n.M(Re[0].zoom);if(typeof Ne!="number")return[new n.V(Pe,Re[0].zoom,"stop zoom values must be numbers")];if(C&&C>Ne)return[new n.V(Pe,Re[0].zoom,"stop zoom values must appear in ascending order")];Ne!==C&&(C=Ne,R=void 0,P={}),Ce=Ce.concat(St({key:`${Pe}[0]`,value:Re[0],valueSpec:{zoom:{}},style:ce.style,styleSpec:ce.styleSpec,objectElementValidators:{zoom:Va,value:ae}}))}else Ce=Ce.concat(ae({key:`${Pe}[0]`,value:Re[0],style:ce.style,styleSpec:ce.styleSpec},Re));return n.S(n.U(Re[1]))?Ce.concat([new n.V(`${Pe}[1]`,Re[1],"expressions are not allowed in function stops.")]):Ce.concat(Er({key:`${Pe}[1]`,value:Re[1],valueSpec:o,style:ce.style,styleSpec:ce.styleSpec}))}function ae(ce,Ce){const Re=n.K(ce.value),Pe=n.M(ce.value),Ne=ce.value!==null?ce.value:Ce;if(A){if(Re!==A)return[new n.V(ce.key,Ne,`${Re} stop domain type must match previous stop domain type ${A}`)]}else A=Re;if(Re!=="number"&&Re!=="string"&&Re!=="boolean"&&typeof Pe!="number"&&typeof Pe!="string"&&typeof Pe!="boolean")return[new n.V(ce.key,Ne,"stop domain value must be a number, string, or boolean")];if(Re!=="number"&&c!=="categorical"){let Ge=`number expected, ${Re} found`;return n.O(o)&&c===void 0&&(Ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n.V(ce.key,Ne,Ge)]}return c!=="categorical"||Re!=="number"||typeof Pe=="number"&&isFinite(Pe)&&Math.floor(Pe)===Pe?c!=="categorical"&&Re==="number"&&typeof Pe=="number"&&typeof R=="number"&&R!==void 0&&Pe<R?[new n.V(ce.key,Ne,"stop domain values must appear in ascending order")]:(R=Pe,c==="categorical"&&Pe in P?[new n.V(ce.key,Ne,"stop domain values must be unique")]:(P[Pe]=!0,[])):[new n.V(ce.key,Ne,`integer expected, found ${String(Pe)}`)]}}function nr(g){const o=(g.expressionContext==="property"?n.W:n.X)(n.U(g.value),g.valueSpec);if(o.result==="error")return o.value.map(A=>new n.V(`${g.key}${A.key}`,g.value,A.message));const c=o.value.expression||o.value._styleExpression.expression;if(g.expressionContext==="property"&&g.propertyKey==="text-font"&&!c.outputDefined())return[new n.V(g.key,g.value,`Invalid data expression for "${g.propertyKey}". Output values must be contained as literals within the expression.`)];if(g.expressionContext==="property"&&g.propertyType==="layout"&&!n.Y(c))return[new n.V(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if(g.expressionContext==="filter")return cr(c,g);if(g.expressionContext&&g.expressionContext.indexOf("cluster")===0){if(!n.Z(c,["zoom","feature-state"]))return[new n.V(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(g.expressionContext==="cluster-initial"&&!n._(c))return[new n.V(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cr(g,o){const c=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const R of o.valueSpec.expression.parameters)c.delete(R);if(c.size===0)return[];const A=[];return g instanceof n.$&&c.has(g.name)?[new n.V(o.key,o.value,`["${g.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(g.eachChild(R=>{A.push(...cr(R,o))}),A)}function ur(g){const o=g.key,c=g.value,A=g.valueSpec,R=[];return Array.isArray(A.values)?A.values.indexOf(n.M(c))===-1&&R.push(new n.V(o,c,`expected one of [${A.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(A.values).indexOf(n.M(c))===-1&&R.push(new n.V(o,c,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(c)} found`)),R}function Pr(g){return n.a1(n.U(g.value))?nr(n.L({},g,{expressionContext:"filter",valueSpec:g.styleSpec[`filter_${g.layerType||"fill"}`]})):ka(g)}function ka(g){const o=g.value,c=g.key;if(n.K(o)!=="array")return[new n.V(c,o,`array expected, ${n.K(o)} found`)];const A=g.styleSpec;let R,C=[];if(o.length<1)return[new n.V(c,o,"filter array must have at least 1 element")];switch(C=C.concat(ur({key:`${c}[0]`,value:o[0],valueSpec:A.filter_operator,style:g.style,styleSpec:g.styleSpec})),n.M(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&n.M(o[1])==="$type"&&C.push(new n.V(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&C.push(new n.V(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(R=n.K(o[1]),R!=="string"&&C.push(new n.V(`${c}[1]`,o[1],`string expected, ${R} found`)));for(let P=2;P<o.length;P++)R=n.K(o[P]),n.M(o[1])==="$type"?C=C.concat(ur({key:`${c}[${P}]`,value:o[P],valueSpec:A.geometry_type,style:g.style,styleSpec:g.styleSpec})):R!=="string"&&R!=="number"&&R!=="boolean"&&C.push(new n.V(`${c}[${P}]`,o[P],`string, number, or boolean expected, ${R} found`));break;case"any":case"all":case"none":for(let P=1;P<o.length;P++)C=C.concat(ka({key:`${c}[${P}]`,value:o[P],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":R=n.K(o[1]),o.length!==2?C.push(new n.V(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):R!=="string"&&C.push(new n.V(`${c}[1]`,o[1],`string expected, ${R} found`))}return C}function jr(g,o){const c=g.key,A=g.style,R=g.layer,C=g.styleSpec,P=g.value,L=g.objectKey,j=C[`${o}_${g.layerType}`];if(!j)return[];const Z=L.match(/^(.*)-use-theme$/);if(o==="paint"&&Z&&j[Z[1]])return n.S(P)?[].concat(Er({key:g.key,value:P,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:A,styleSpec:C,expressionContext:"property",propertyType:o,propertyKey:L})):Er({key:c,value:P,valueSpec:{type:"string"},style:A,styleSpec:C});const K=L.match(/^(.*)-transition$/);if(o==="paint"&&K&&j[K[1]]&&j[K[1]].transition)return Er({key:c,value:P,valueSpec:C.transition,style:A,styleSpec:C});const te=g.valueSpec||j[L];if(!te)return[new n.J(c,P,`unknown property "${L}"`)];let ae;if(n.K(P)==="string"&&n.O(te)&&!te.tokens&&(ae=/^{([^}]+)}$/.exec(P))){const Ce=`\`{ "type": "identity", "property": ${ae?JSON.stringify(ae[1]):'"_"'} }\``;return[new n.V(c,P,`"${L}" does not support interpolation syntax
Use an identity property function instead: ${Ce}.`)]}const ce=[];if(g.layerType==="symbol")L!=="text-field"||!A||A.glyphs||A.imports||ce.push(new n.V(c,P,'use of "text-field" requires a style "glyphs" property')),L==="text-font"&&n.a2(n.U(P))&&n.M(P.type)==="identity"&&ce.push(new n.V(c,P,'"text-font" does not support identity functions'));else if(g.layerType==="model"&&o==="paint"&&R&&R.layout&&R.layout.hasOwnProperty("model-id")&&n.O(te)&&(n.a3(te)||n.Q(te))){const Ce=n.W(n.U(P),te),Re=Ce.value.expression||Ce.value._styleExpression.expression;Re&&!n.Z(Re,["measure-light"])&&(L==="model-emissive-strength"&&n._(Re)&&n.Y(Re)||ce.push(new n.V(c,P,`${L} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ce.concat(Er({key:g.key,value:P,valueSpec:te,style:A,styleSpec:C,expressionContext:"property",propertyType:o,propertyKey:L}))}function pn(g){return jr(g,"paint")}function Dn(g){return jr(g,"layout")}function Rn(g){let o=[];const c=g.value,A=g.key,R=g.style,C=g.styleSpec;c.type||c.ref||o.push(new n.V(A,c,'either "type" or "ref" is required'));let P=n.M(c.type);const L=n.M(c.ref);if(c.id){const j=n.M(c.id);for(let Z=0;Z<g.arrayIndex;Z++){const K=R.layers[Z];n.M(K.id)===j&&o.push(new n.V(A,c.id,`duplicate layer id "${c.id}", previously used at line ${K.id.__line__}`))}}if("ref"in c){let j;["type","source","source-layer","filter","layout"].forEach(Z=>{Z in c&&o.push(new n.V(A,c[Z],`"${Z}" is prohibited for ref layers`))}),R.layers.forEach(Z=>{n.M(Z.id)===L&&(j=Z)}),j?j.ref?o.push(new n.V(A,c.ref,"ref cannot reference another ref layer")):P=n.M(j.type):typeof L=="string"&&o.push(new n.V(A,c.ref,`ref layer "${L}" not found`))}else if(P!=="background"&&P!=="sky"&&P!=="slot")if(c.source){const j=R.sources&&R.sources[c.source],Z=j&&n.M(j.type);j?Z==="vector"&&P==="raster"?o.push(new n.V(A,c.source,`layer "${c.id}" requires a raster source`)):Z==="raster"&&P!=="raster"?o.push(new n.V(A,c.source,`layer "${c.id}" requires a vector source`)):Z!=="vector"||c["source-layer"]?Z==="raster-dem"&&P!=="hillshade"?o.push(new n.V(A,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):Z!=="raster-array"||["raster","raster-particle"].includes(P)?P!=="line"||!c.paint||!c.paint["line-gradient"]&&!c.paint["line-trim-offset"]||Z==="geojson"&&j.lineMetrics?P==="raster-particle"&&Z!=="raster-array"&&o.push(new n.V(A,c.source,`layer "${c.id}" requires a 'raster-array' source.`)):o.push(new n.V(A,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new n.V(A,c.source,"raster-array source can only be used with layer type 'raster'.")):o.push(new n.V(A,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new n.V(A,c.source,`source "${c.source}" not found`))}else o.push(new n.V(A,c,'missing required property "source"'));return o=o.concat(St({key:A,value:c,valueSpec:C.layer,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Er({key:`${A}.type`,value:c.type,valueSpec:C.layer.type,style:g.style,styleSpec:g.styleSpec,object:c,objectKey:"type"}),filter:j=>Pr(n.L({layerType:P},j)),layout:j=>St({layer:c,key:j.key,value:j.value,valueSpec:{},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":Z=>Dn(n.L({layerType:P},Z))}}),paint:j=>St({layer:c,key:j.key,value:j.value,valueSpec:{},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":Z=>pn(n.L({layerType:P,layer:c},Z))}})}})),o}function va(g){const o=g.value,c=g.key,A=n.K(o);return A!=="string"?[new n.V(c,o,`string expected, ${A} found`)]:[]}const Wa={promoteId:function g({key:o,value:c}){if(n.K(c)==="string")return va({key:o,value:c});if(Array.isArray(c)){const A=[],R=n.U(c),C=n.X(R);return C.result==="error"&&C.value.forEach(P=>{A.push(new n.V(`${o}${P.key}`,null,`${P.message}`))}),n.Z(C.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||A.push(new n.V(`${o}`,null,"promoteId expression should be only feature dependent")),A}{const A=[];for(const R in c)A.push(...g({key:`${o}.${R}`,value:c[R]}));return A}}};function ca(g){const o=g.value,c=g.key,A=g.styleSpec,R=g.style;if(!o.type)return[new n.V(c,o,'"type" is required')];const C=n.M(o.type);let P=[];switch(["vector","raster","raster-dem","raster-array"].includes(C)&&(o.url||o.tiles||P.push(new n.J(c,o,'Either "url" or "tiles" is required.'))),C){case"vector":case"raster":case"raster-dem":case"raster-array":return P=P.concat(St({key:c,value:o,valueSpec:A[`source_${C.replace("-","_")}`],style:g.style,styleSpec:A,objectElementValidators:Wa})),P;case"geojson":if(P=St({key:c,value:o,valueSpec:A.source_geojson,style:R,styleSpec:A,objectElementValidators:Wa}),o.cluster)for(const L in o.clusterProperties){const[j,Z]=o.clusterProperties[L],K=typeof j=="string"?[j,["accumulated"],["get",L]]:j;P.push(...nr({key:`${c}.${L}.map`,value:Z,expressionContext:"cluster-map"})),P.push(...nr({key:`${c}.${L}.reduce`,value:K,expressionContext:"cluster-reduce"}))}return P;case"video":return St({key:c,value:o,valueSpec:A.source_video,style:R,styleSpec:A});case"image":return St({key:c,value:o,valueSpec:A.source_image,style:R,styleSpec:A});case"canvas":return[new n.V(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ur({key:`${c}.type`,value:o.type,valueSpec:{values:Qa(A)}})}}function Qa(g){return g.source.reduce((o,c)=>{const A=g[c];return A.type.type==="enum"&&(o=o.concat(Object.keys(A.type.values))),o},[])}function yr(g){const o=g.value,c=g.styleSpec,A=c.light,R=g.style;let C=[];const P=n.K(o);if(o===void 0)return C;if(P!=="object")return C=C.concat([new n.V("light",o,`object expected, ${P} found`)]),C;for(const L in o){const j=L.match(/^(.*)-transition$/),Z=L.match(/^(.*)-use-theme$/);C=C.concat(Z&&A[Z[1]]?Er({key:L,value:o[L],valueSpec:{type:"string"},style:R,styleSpec:c}):j&&A[j[1]]&&A[j[1]].transition?Er({key:L,value:o[L],valueSpec:c.transition,style:R,styleSpec:c}):A[L]?Er({key:L,value:o[L],valueSpec:A[L],style:R,styleSpec:c}):[new n.V(L,o[L],`unknown property "${L}"`)])}return C}function jn(g){const o=g.value;let c=[];if(!o)return c;const A=n.K(o);if(A!=="object")return c=c.concat([new n.V("light-3d",o,`object expected, ${A} found`)]),c;const R=g.styleSpec,C=R["light-3d"],P=g.key,L=g.style,j=g.style.lights;for(const te of["type","id"])if(!(te in o))return c=c.concat([new n.V("light-3d",o,`missing property ${te} on light`)]),c;if(o.type&&j)for(let te=0;te<g.arrayIndex;te++){const ae=n.M(o.type),ce=j[te];n.M(ce.type)===ae&&c.push(new n.V(P,o.id,`duplicate light type "${o.type}", previously defined at line ${ce.id.__line__}`))}const Z=`properties_light_${o.type}`;if(!(Z in R))return c=c.concat([new n.V("light-3d",o,`Invalid light type ${o.type}`)]),c;const K=R[Z];for(const te in o)if(te==="properties"){const ae=o[te],ce=n.K(ae);if(ce!=="object")return c=c.concat([new n.V("properties",ae,`object expected, ${ce} found`)]),c;for(const Ce in ae)c=c.concat(K[Ce]?Er({key:Ce,value:ae[Ce],valueSpec:K[Ce],style:L,styleSpec:R}):[new n.J(g.key,ae[Ce],`unknown property "${Ce}"`)])}else{const ae=te.match(/^(.*)-transition$/),ce=te.match(/^(.*)-use-theme$/);c=c.concat(ce&&C[ce[1]]?Er({key:te,value:o[te],valueSpec:{type:"string"},style:L,styleSpec:R}):ae&&C[ae[1]]&&C[ae[1]].transition?Er({key:te,value:o[te],valueSpec:R.transition,style:L,styleSpec:R}):C[te]?Er({key:te,value:o[te],valueSpec:C[te],style:L,styleSpec:R}):[new n.J(te,o[te],`unknown property "${te}"`)])}return c}function Mn(g){const o=g.value,c=g.key,A=g.style,R=g.styleSpec,C=R.terrain;let P=[];const L=n.K(o);if(o===void 0||L==="null")return P;if(L!=="object")return P=P.concat([new n.V("terrain",o,`object expected, ${L} found`)]),P;for(const j in o){const Z=j.match(/^(.*)-transition$/),K=j.match(/^(.*)-use-theme$/);P=P.concat(K&&C[K[1]]?Er({key:j,value:o[j],valueSpec:{type:"string"},style:A,styleSpec:R}):Z&&C[Z[1]]&&C[Z[1]].transition?Er({key:j,value:o[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:o[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,o[j],`unknown property "${j}"`)])}if(o.source){const j=A.sources&&A.sources[o.source],Z=j&&n.M(j.type);j?Z!=="raster-dem"&&P.push(new n.V(c,o.source,`terrain cannot be used with a source of type ${String(Z)}, it only be used with a "raster-dem" source type`)):P.push(new n.V(c,o.source,`source "${o.source}" not found`))}else P.push(new n.V(c,o,'terrain is missing required property "source"'));return P}function mn(g){const o=g.value,c=g.style,A=g.styleSpec,R=A.fog;let C=[];const P=n.K(o);if(o===void 0)return C;if(P!=="object")return C=C.concat([new n.V("fog",o,`object expected, ${P} found`)]),C;for(const L in o){const j=L.match(/^(.*)-transition$/),Z=L.match(/^(.*)-use-theme$/);C=C.concat(Z&&R[Z[1]]?Er({key:L,value:o[L],valueSpec:{type:"string"},style:c,styleSpec:A}):j&&R[j[1]]&&R[j[1]].transition?Er({key:L,value:o[L],valueSpec:A.transition,style:c,styleSpec:A}):R[L]?Er({key:L,value:o[L],valueSpec:R[L],style:c,styleSpec:A}):[new n.J(L,o[L],`unknown property "${L}"`)])}return C}const en={"*":()=>[],array:vr,boolean:function(g){const o=g.value,c=g.key,A=n.K(o);return A!=="boolean"?[new n.V(c,o,`boolean expected, ${A} found`)]:[]},number:Va,color:function(g){const o=g.key,c=g.value,A=n.K(c);return A!=="string"?[new n.V(o,c,`color expected, ${A} found`)]:n.a0.parseCSSColor(c)===null?[new n.V(o,c,`color expected, "${c}" found`)]:[]},enum:ur,filter:Pr,function:za,layer:Rn,object:St,source:ca,model:n.a4,light:yr,"light-3d":jn,terrain:Mn,fog:mn,string:va,formatted:function(g){return va(g).length===0?[]:nr(g)},resolvedImage:function(g){return va(g).length===0?[]:nr(g)},projection:function(g){const o=g.value,c=g.styleSpec,A=c.projection,R=g.style;let C=[];const P=n.K(o);if(P==="object")for(const L in o)C=C.concat(Er({key:L,value:o[L],valueSpec:A[L],style:R,styleSpec:c}));else P!=="string"&&(C=C.concat([new n.V("projection",o,`object or string expected, ${P} found`)]));return C},import:function(g){const{value:o,styleSpec:c}=g,{data:A,...R}=o;Object.defineProperty(R,"__line__",{value:o.__line__,enumerable:!1});let C=St(n.L({},g,{value:R,valueSpec:c.import}));return n.M(R.id)===""&&C.push(new n.V(`${g.key}.id`,R,"import id can't be an empty string")),A&&(C=C.concat(ki(A,c,{key:`${g.key}.data`}))),C},iconset:function(g){const o=g.value,c=g.key,A=g.styleSpec,R=g.style;if(!o.type)return[new n.V(c,o,'"type" is required')];const C=n.M(o.type);let P=[];if(P=P.concat(St({key:c,value:o,valueSpec:A[`iconset_${C}`],style:R,styleSpec:A})),C==="source"&&o.source){const L=R.sources&&R.sources[o.source],j=L&&n.M(L.type);L?j!=="raster-array"&&P.push(new n.V(c,o.source,`iconset cannot be used with a source of type ${String(j)}, it only be used with a "raster-array" source type`)):P.push(new n.V(c,o.source,`source "${o.source}" not found`))}return P}};function Er(g,o=!1){const c=g.value,A=g.valueSpec,R=g.styleSpec;if(A.expression&&n.a2(n.M(c)))return za(g);if(A.expression&&n.S(n.U(c)))return nr(g);if(A.type&&en[A.type]){const C=en[A.type](g);return o===!0&&C.length>0&&n.K(g.value)==="array"?nr(g):C}return St(n.L({},g,{valueSpec:A.type?R[A.type]:A}))}function As(g){const o=g.value,c=g.key,A=va(g);return A.length||(o.indexOf("{fontstack}")===-1&&A.push(new n.V(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&A.push(new n.V(c,o,'"glyphs" url must include a "{range}" token'))),A}function ki(g,o=n.a5,c={}){return Er({key:c.key||"",value:g,valueSpec:o.$root,styleSpec:o,style:g,objectElementValidators:{glyphs:As,"*":()=>[]}})}function Ji(g,o=n.a5){return Ct(ki(g,o))}const zo=g=>Ct(ca(g)),Ei=g=>Ct(yr(g)),hn=g=>Ct(jn(g)),ui=g=>Ct(Mn(g)),Ec=g=>Ct(mn(g)),Fs=g=>Ct(function(o){const c=o.value,A=o.style,R=o.styleSpec,C=R.snow;let P=[];const L=n.K(c);if(c===void 0)return P;if(L!=="object")return P=P.concat([new n.V("snow",c,`object expected, ${L} found`)]),P;for(const j in c){const Z=j.match(/^(.*)-transition$/);P=P.concat(Z&&C[Z[1]]&&C[Z[1]].transition?Er({key:j,value:c[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:c[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,c[j],`unknown property "${j}"`)])}return P}(g)),Xt=g=>Ct(function(o){const c=o.value,A=o.style,R=o.styleSpec,C=R.rain;let P=[];const L=n.K(c);if(c===void 0)return P;if(L!=="object")return P=P.concat([new n.V("rain",c,`object expected, ${L} found`)]),P;for(const j in c){const Z=j.match(/^(.*)-transition$/);P=P.concat(Z&&C[Z[1]]&&C[Z[1]].transition?Er({key:j,value:c[j],valueSpec:R.transition,style:A,styleSpec:R}):C[j]?Er({key:j,value:c[j],valueSpec:C[j],style:A,styleSpec:R}):[new n.J(j,c[j],`unknown property "${j}"`)])}return P}(g)),be=g=>Ct(Rn(g)),De=g=>Ct(Pr(g)),at=g=>Ct(pn(g)),At=g=>Ct(Dn(g)),mt=g=>Ct(n.a4(g));function Ct(g){return g.slice().sort((o,c)=>o.line&&c.line?o.line-c.line:0)}function kt(g,o){let c=!1;if(o&&o.length)for(const A of o)A instanceof n.J?n.w(A.message):(g.fire(new n.z(new Error(A.message))),c=!0);return c}let Pt;class qt extends n.E{constructor(o,c="flat"){super(),this._transitionable=new n.a6(Pt||(Pt=new n.a7({anchor:new n.a8(n.a5.light.anchor),position:new n.a9(n.a5.light.position),color:new n.a8(n.a5.light.color),intensity:new n.a8(n.a5.light.intensity)}))),this.setLight(o,c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,c,A={}){this._validate(Ei,o,A)||(this._transitionable.setTransitionOrValue(o),this.id=c)}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,A){return(!A||A.validate!==!1)&&kt(this,o.call(Ji,n.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let Ht=class extends n.E{constructor(g,o,c,A){super(),this.scope=c,this._transitionable=new n.a6(new n.a7({source:new n.a8(n.a5.terrain.source),exaggeration:new n.a8(n.a5.terrain.exaggeration)}),c,A),this._transitionable.setTransitionOrValue(g,A),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(g,o){this._transitionable.setTransitionOrValue(g,o)}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}getExaggeration(g){return this._transitioning.possiblyEvaluate(new n.aa(g)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const g=this._transitionable._values.exaggeration;if(!g)return null;const o=g.value.expression;if(!o)return null;let c=-1,A=-1,R=1;for(const C of o.zoomStops)R=o.evaluate(new n.aa(C)),R>.01?(c=C,A=-1):A=C;return R<.01&&c>0&&A>c?[c,A]:null}isZoomDependent(){const g=this._transitionable._values.exaggeration;return g!=null&&g.value!=null&&g.value.expression!=null&&g.value.expression instanceof n.ab}};const Zt=45,Ra=65,Ma=.05;function Ba(g,o,c,A){const R=n.ae(Zt,Ra,c),[C,P]=Ar(g,A);let L=1-Math.min(1,Math.exp((o-C)/(P-C)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*R*g.alpha}function Ar(g,o){const c=.5/Math.tan(.5*o);return[g.range[0]+c,g.range[1]+c]}function Nr(g,o,c,A,R){const C=n.ad.vec3.transformMat4([],[o,c,A],R.mercatorFogMatrix);return Ba(g,n.ad.vec3.length(C),R.pitch,R._fov)}function Vr(g,o,c,A,R,C,P){const L=[[c,A,0],[R,A,0],[R,C,0],[c,C,0]];let j=Number.MAX_VALUE,Z=-Number.MAX_VALUE;for(const K of L){const te=n.ad.vec3.transformMat4([],K,o),ae=n.ad.vec3.length(te);j=Math.min(j,ae),Z=Math.max(Z,ae)}return[Ba(g,j,P.pitch,P._fov),Ba(g,Z,P.pitch,P._fov)]}class Gr extends n.E{constructor(o,c,A,R){super();const C=new n.a7({range:new n.a8(n.a5.fog.range),color:new n.a8(n.a5.fog.color),"color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new n.a8(n.a5.fog["high-color"]),"high-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new n.a8(n.a5.fog["space-color"]),"space-color-use-theme":new n.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new n.a8(n.a5.fog["horizon-blend"]),"star-intensity":new n.a8(n.a5.fog["star-intensity"]),"vertical-range":new n.a8(n.a5.fog["vertical-range"])});this._transitionable=new n.a6(C,A,new Map(R)),this.set(o,R),this._transitioning=this._transitionable.untransitioned(),this._transform=c,this.properties=new n.af(C),this.scope=A}get state(){const o=this._transform,c=o.projection.name==="globe",A=n.ag(o.zoom),R=this.properties.get("range"),C=[.5,3];return{range:c?[n.ah(C[0],R[0],A),n.ah(C[1],R[1],A)]:R,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,c,A={}){if(this._validate(Ec,o,A))return;const R=n.l({},o);for(const C of Object.keys(n.a5.fog))R[C]===void 0&&(R[C]=n.a5.fog[C].default);this._options=R,this._transitionable.setTransitionOrValue(this._options,c)}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:n.ae(Zt,Ra,o))*c.a}getOpacityAtLatLng(o,c){return this._transform.projection.supportsFog?function(A,R,C){const P=n.ac.fromLngLat(R),L=C.elevation?C.elevation.getAtPointOrZero(P):0;return Nr(A,P.x,P.y,L,C)}(this.state,o,c):0}getOpacityForTile(o){if(!this._transform.projection.supportsFog)return[1,1];const c=this._transform.calculateFogTileMatrix(o.toUnwrapped());return Vr(this.state,c,0,0,n.ai,n.ai,this._transform)}getOpacityForBounds(o,c,A,R,C){return this._transform.projection.supportsFog?Vr(this.state,o,c,A,R,C,this._transform):[1,1]}getFovAdjustedRange(o){return this._transform.projection.supportsFog?Ar(this.state,o):[0,1]}isVisibleOnFrustum(o){if(!this._transform.projection.supportsFog)return!1;const c=[4,5,6,7];for(const A of c){const R=o.points[A];let C;if(R[2]>=0)C=R;else{const P=o.points[A-4];C=n.aj(P,R,P[2]/(P[2]-R[2]))}if(Nr(this.state,C[0],C[1],0,this._transform)>=Ma)return!0}return!1}updateConfig(o){this._transitionable.setTransitionOrValue(this._options,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,A){return(!A||A.validate!==!1)&&kt(this,o.call(Ji,n.l({value:c,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}}let zn,Xn,qr,yn,Hr=class extends n.E{constructor(g,o,c,A){super();const R=zn||(zn=new n.a7({density:new n.a8(n.a5.snow.density),intensity:new n.a8(n.a5.snow.intensity),color:new n.a8(n.a5.snow.color),opacity:new n.a8(n.a5.snow.opacity),vignette:new n.a8(n.a5.snow.vignette),"vignette-color":new n.a8(n.a5.snow["vignette-color"]),"center-thinning":new n.a8(n.a5.snow["center-thinning"]),direction:new n.a8(n.a5.snow.direction),"flake-size":new n.a8(n.a5.snow["flake-size"])}));this._transitionable=new n.a6(R,c,new Map(A)),this.set(g,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(R),this.scope=c}get state(){const g=this.properties.get("opacity"),o=this.properties.get("color"),c=this.properties.get("direction"),A=n.ak(c[0]),R=-Math.max(n.ak(c[1]),.01),C=[Math.cos(A)*Math.cos(R),Math.sin(A)*Math.cos(R),Math.sin(R)],P=this.properties.get("vignette"),L=this.properties.get("vignette-color");return L.a=P,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*g),direction:C,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:L}}get(){return this._transitionable.serialize()}set(g,o,c={}){if(this._validate(Fs,g,c))return;const A=n.l({},g);for(const R of Object.keys(n.a5.snow))A[R]===void 0&&(A[R]=n.a5.snow[R].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(g){this._transitionable.setTransitionOrValue(this._options,new Map(g))}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}_validate(g,o,c){return(!c||c.validate!==!1)&&kt(this,g.call(Ji,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}},In=class extends n.E{constructor(g,o,c,A){super();const R=Xn||(Xn=new n.a7({density:new n.a8(n.a5.rain.density),intensity:new n.a8(n.a5.rain.intensity),color:new n.a8(n.a5.rain.color),opacity:new n.a8(n.a5.rain.opacity),vignette:new n.a8(n.a5.rain.vignette),"vignette-color":new n.a8(n.a5.rain["vignette-color"]),"center-thinning":new n.a8(n.a5.rain["center-thinning"]),direction:new n.a8(n.a5.rain.direction),"droplet-size":new n.a8(n.a5.rain["droplet-size"]),"distortion-strength":new n.a8(n.a5.rain["distortion-strength"])}));this._transitionable=new n.a6(R,c,new Map(A)),this.set(g,A),this._transitioning=this._transitionable.untransitioned(),this.properties=new n.af(R),this.scope=c}get state(){const g=this.properties.get("opacity"),o=this.properties.get("color"),c=this.properties.get("direction"),A=n.ak(c[0]),R=-Math.max(n.ak(c[1]),.01),C=[Math.cos(A)*Math.cos(R),Math.sin(A)*Math.cos(R),Math.sin(R)],P=this.properties.get("vignette-color");return P.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new n.al(o.r,o.g,o.b,o.a*g),direction:C,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:P}}get(){return this._transitionable.serialize()}set(g,o,c={}){if(this._validate(Xt,g,c))return;const A=n.l({},g);for(const R of Object.keys(n.a5.rain))A[R]===void 0&&(A[R]=n.a5.rain[R].default);this._options=A,this._transitionable.setTransitionOrValue(this._options,o)}updateConfig(g){this._transitionable.setTransitionOrValue(this._options,new Map(g))}updateTransitions(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(g){this.properties=this._transitioning.possiblyEvaluate(g)}_validate(g,o,c){return(!c||c.validate!==!1)&&kt(this,g.call(Ji,n.l({value:o,style:{glyphs:!0,sprite:!0},styleSpec:n.a5})))}};class Ni extends n.E{constructor(o,c,A,R){super(),this.scope=A,this._options=o,this.properties=new n.af(c),this._transitionable=new n.a6(c,A,new Map(R)),this._transitionable.setTransitionOrValue(o.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(o){this._transitionable.setTransitionOrValue(this._options.properties,new Map(o))}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(o,c){this._options=o,this._transitionable.setTransitionOrValue(o.properties,c)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Bi{constructor(o,c,A,R){this.screenBounds=o,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=A,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,R)}static createFromScreenPoints(o,c){let A,R;if(o instanceof n.P||typeof o[0]=="number"){const C=n.P.convert(o);A=[C],R=c.isPointAboveHorizon(C)}else{const C=n.P.convert(o[0]),P=n.P.convert(o[1]);A=[C,P],R=n.an(C,P).every(L=>c.isPointAboveHorizon(L))}return new Bi(A,c.getCameraPoint(),R,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return n.an(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const c=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],R=n.an(c,A,0,!1);return this.cameraPoint.y>A.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<A.x?R.splice(3,0,this.cameraPoint):this.cameraPoint.x>=A.x?R[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(R[3]=this.cameraPoint)),n.ao(R,o)}bufferedCameraGeometryGlobe(o){const c=this.screenBounds[0],A=this.screenBounds.length===1?this.screenBounds[0].add(new n.P(1,1)):this.screenBounds[1],R=n.an(c,A,o),C=this.cameraPoint.clone();switch(3*((C.y>c.y)+(C.y>A.y))+((C.x>c.x)+(C.x>A.x))){case 0:R[0]=C,R[4]=C.clone();break;case 1:R.splice(1,0,C);break;case 2:R[1]=C;break;case 3:R.splice(4,0,C);break;case 5:R.splice(2,0,C);break;case 6:R[3]=C;break;case 7:R.splice(3,0,C);break;case 8:R[2]=C}return R}containsTile(o,c,A,R=0){const C=o.queryPadding/c._pixelsPerMercatorPixel+1,P=A?this._bufferedCameraMercator(C,c):this._bufferedScreenMercator(C,c);let L=o.tileID.wrap+(P.unwrapped?R:0);const j=P.polygon.map(Pe=>n.ap(o.tileTransform,Pe,L));if(!n.aq(j,0,0,n.ai,n.ai))return;L=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?R:0);const Z=this.screenGeometryMercator.polygon.map(Pe=>n.ar(o.tileTransform,Pe,L)),K=Z.map(Pe=>new n.P(Pe[0],Pe[1])),te=c.getFreeCameraOptions().position||new n.ac(0,0,0),ae=n.ar(o.tileTransform,te,L),ce=Z.map(Pe=>{const Ne=n.ad.vec3.sub(Pe,Pe,ae);return n.ad.vec3.normalize(Ne,Ne),new n.as(ae,Ne)}),Ce=n.at(o,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:K,tilespaceRays:ce,bufferedTilespaceGeometry:j,bufferedTilespaceBounds:(Re=n.au(j),Re.min.x=n.ay(Re.min.x,0,n.ai),Re.min.y=n.ay(Re.min.y,0,n.ai),Re.max.x=n.ay(Re.max.x,0,n.ai),Re.max.y=n.ay(Re.max.y,0,n.ai),Re),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:Ce};var Re}_bufferedScreenMercator(o,c){const A=Oo(o);if(this._screenRaycastCache[A])return this._screenRaycastCache[A];{let R;return R=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),c):{polygon:this.bufferedScreenGeometry(o).map(C=>c.pointCoordinate3D(C)),unwrapped:!0},this._screenRaycastCache[A]=R,R}}_bufferedCameraMercator(o,c){const A=Oo(o);if(this._cameraRaycastCache[A])return this._cameraRaycastCache[A];{let R;return R=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),c):{polygon:this.bufferedCameraGeometry(o).map(C=>c.pointCoordinate3D(C)),unwrapped:!0},this._cameraRaycastCache[A]=R,R}}_projectAndResample(o,c){const A=function(C,P){const L=n.ad.mat4.multiply([],P.pixelMatrix,P.globeMatrix),j=[0,-n.az,0,1],Z=[0,n.az,0,1],K=[0,0,0,1];n.ad.vec4.transformMat4(j,j,L),n.ad.vec4.transformMat4(Z,Z,L),n.ad.vec4.transformMat4(K,K,L);const te=new n.P(j[0]/j[3],j[1]/j[3]),ae=new n.P(Z[0]/Z[3],Z[1]/Z[3]),ce=n.aw(C,te)&&j[3]<K[3],Ce=n.aw(C,ae)&&Z[3]<K[3];if(!ce&&!Ce)return null;const Re=function(it,st,yt){for(let wt=1;wt<it.length;wt++){const Yt=vs(st.pointCoordinate3D(it[wt-1]).x),Lt=vs(st.pointCoordinate3D(it[wt]).x);if(yt<0){if(Yt<Lt)return{idx:wt,t:-Yt/(Lt-1-Yt)}}else if(Lt<Yt)return{idx:wt,t:(1-Yt)/(Lt+1-Yt)}}return null}(C,P,ce?-1:1);if(!Re)return null;const{idx:Pe,t:Ne}=Re;let Ge=Pe>1?_s(C.slice(0,Pe),P):[],et=Pe<C.length?_s(C.slice(Pe),P):[];Ge=Ge.map(it=>new n.P(vs(it.x),it.y)),et=et.map(it=>new n.P(vs(it.x),it.y));const Xe=[...Ge];Xe.length===0&&Xe.push(et[et.length-1]);const ct=n.ah(Xe[Xe.length-1].y,(et.length===0?Ge[0]:et[0]).y,Ne);let nt;return nt=ce?[new n.P(0,ct),new n.P(0,0),new n.P(1,0),new n.P(1,ct)]:[new n.P(1,ct),new n.P(1,1),new n.P(0,1),new n.P(0,ct)],Xe.push(...nt),et.length===0?Xe.push(Ge[0]):Xe.push(...et),{polygon:Xe.map(it=>new n.ac(it.x,it.y)),unwrapped:!1}}(o,c);if(A)return A;const R=function(C,P){let L=!1,j=-1/0,Z=0;for(let te=0;te<C.length-1;te++)C[te].x>j&&(j=C[te].x,Z=te);for(let te=0;te<C.length-1;te++){const ae=(Z+te)%(C.length-1),ce=C[ae],Ce=C[ae+1];Math.abs(ce.x-Ce.x)>.5&&(ce.x<Ce.x?(ce.x+=1,ae===0&&(C[C.length-1].x+=1)):(Ce.x+=1,ae+1===C.length-1&&(C[0].x+=1)),L=!0)}const K=n.av(P.center.lng);return L&&K<Math.abs(K-1)&&C.forEach(te=>{te.x-=1}),{polygon:C,unwrapped:L}}(_s(o,c).map(C=>new n.P(vs(C.x),C.y)),c);return{polygon:R.polygon.map(C=>new n.ac(C.x,C.y)),unwrapped:R.unwrapped}}}function _s(g,o){return n.ax(g,c=>{const A=o.pointCoordinate3D(c);c.x=A.x,c.y=A.y},1/256)}function vs(g){return g<0?1+g%1:g%1}function Oo(g){return 100*g|0}function ws(g,o,c,A,R){const C=function(L,j){if(L)return R(L);if(j){if(g.url&&j.tiles&&g.tiles&&delete g.tiles,j.variants){if(!Array.isArray(j.variants))return R(new Error("variants must be an array"));for(const K of j.variants){if(K==null||typeof K!="object"||K.constructor!==Object)return R(new Error("variant must be an object"));if(!Array.isArray(K.capabilities))return R(new Error("capabilities must be an array"));if(K.capabilities.length===1&&K.capabilities[0]==="meshopt"){j=n.l(j,K);break}}}const Z=n.aA(n.l({},j,g),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);Z.tiles=o.canonicalizeTileset(Z,g.url),R(null,Z)}},P=function(L,j,Z){if(!L)return null;if(!j&&!Z)return L;Z=Z||L.worldview_default;const K=Object.values(L.language||{});if(K.length===0)return null;const te=Object.values(L.worldview||{});if(te.length===0)return null;const ae=K.every(Ce=>Ce===j),ce=te.every(Ce=>Ce===Z);return ae&&ce?L:j in(L.language_options||{})||Z in(L.worldview_options||{})?null:L.language_options&&L.worldview_options?L:null}(g.data,c,A);return P?n.q.frame(()=>C(null,P)):g.url?n.n(o.transformRequest(o.normalizeSourceURL(g.url,null,c,A),n.R.Source),C):n.q.frame(()=>{const{data:L,...j}=g;C(null,j)})}class Us{constructor(o,c,A){this.bounds=n.aB.convert(this.validateBounds(o)),this.minzoom=c||0,this.maxzoom=A||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const c=Math.pow(2,o.z),A=Math.floor(n.av(this.bounds.getWest())*c),R=Math.floor(n.aC(this.bounds.getNorth())*c),C=Math.ceil(n.av(this.bounds.getEast())*c),P=Math.ceil(n.aC(this.bounds.getSouth())*c);return o.x>=A&&o.x<C&&o.y>=R&&o.y<P}}class nc extends n.E{constructor(o,c,A,R){if(super(),this.id=o,this.dispatcher=A,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.l(this,n.aA(c,["url","scheme","tileSize","promoteId"])),this._options=n.l({type:"vector"},c),this._collectResourceTiming=!!c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(R),this._tileWorkers={},this._deduped=new n.aD}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,A=this.map.getWorldview();this._tileJSONRequest=ws(this._options,this.map._requestManager,c,A,(R,C)=>{if(this._tileJSONRequest=null,this._loaded=!0,R)c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),A&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${A}`),this.fire(new n.z(R));else if(C){if(n.l(this,C),this.hasWorldviews=!!C.worldview_options,C.worldview_default&&(this.worldviewDefault=C.worldview_default),C.vector_layers){this.vectorLayers=C.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const P of C.vector_layers)this.vectorLayerIds.push(P.id),C.worldview&&C.worldview[P.source]&&this.localizableLayerIds.add(P.id)}C.bounds&&(this.tileBounds=new Us(C.bounds,this.minzoom,this.maxzoom)),ye(C.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}o&&o(R)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}loadTile(o,c){const A=o.tileID.canonical.url(this.tiles,this.scheme),R=this.map._requestManager.normalizeTileURL(A),C=this.map._requestManager.transformRequest(R,n.R.Tile),P=this.map.style?this.map.style.getLut(this.scope):null,L=P?{image:P.image.clone()}:null,j={request:C,data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,lut:L,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:o.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&n.f(A)&&(j.worldview=this.map.getWorldview()||this.worldviewDefault,j.localizableLayerIds=this.localizableLayerIds),j.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",j,Z.bind(this));else if(o.actor=this._tileWorkers[R]=this._tileWorkers[R]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",j,Z.bind(this),void 0,!0);else{const K=n.aE.call({deduped:this._deduped},j,(te,ae)=>{te||!ae?Z.call(this,te):(j.data={cacheControl:ae.cacheControl,expires:ae.expires,rawData:ae.rawData.slice(0)},o.actor&&o.actor.send("loadTile",j,Z.bind(this),void 0,!0))},!0);o.request={cancel:K}}function Z(K,te){return delete o.request,o.aborted?c(null):K&&K.status!==404?c(K):(te&&te.resourceTiming&&(o.resourceTiming=te.resourceTiming),this.map._refreshExpiredTiles&&te&&o.setExpiryData(te),o.loadVectorData(te,this.map.painter),n.aF(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope}),o.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Ko extends n.E{constructor(o,c,A,R){super(),this.id=o,this.dispatcher=A,this.setEventedParent(R),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.l({type:"raster"},c),n.l(this,n.aA(c,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._tileJSONRequest=ws(this._options,this.map._requestManager,null,null,(c,A)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new n.z(c)):A&&(n.l(this,A),A.raster_layers&&(this.rasterLayers=A.raster_layers,this.rasterLayerIds=this.rasterLayers.map(R=>R.id)),A.bounds&&(this.tileBounds=new Us(A.bounds,this.minzoom,this.maxzoom)),ye(A.tiles),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),o&&o(c)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest();const o=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(o))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(o){this.cancelTileJSONRequest()}serialize(){return n.l({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,c){const A=n.q.devicePixelRatio>=2,R=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),A,this.tileSize);o.request=n.o(this.map._requestManager.transformRequest(R,n.R.Tile),(C,P,L,j)=>(delete o.request,o.aborted?(o.state="unloaded",c(null)):C?(o.state="errored",c(C)):P?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:L,expires:j}),o.setTexture(P,this.map.painter),o.state="loaded",n.aF(this.dispatcher),void c(null)):c(null)))}abortTile(o,c){o.request&&(o.request.cancel(),delete o.request),c&&c()}unloadTile(o,c){o.texture&&o.texture instanceof n.T?(o.destroy(!0),o.texture&&o.texture instanceof n.T&&this.map.painter.saveTileTexture(o.texture)):o.destroy(),c&&c()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Vi extends Ko{constructor(o,c,A,R){super(o,c,A,R),this.type="raster-array",this.maxzoom=22,this.partial=!0,this.iconsets={},this._options=n.l({type:"raster-array"},c)}triggerRepaint(o){const c=this.map.painter._terrain,A=this.map.style.getSourceCache(this.id);c&&c.enabled&&A&&c._clearRenderCacheForTile(A.id,o.tileID),this.map.triggerRepaint()}loadTile(o,c){const A=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),R=this.map._requestManager.transformRequest(A,n.R.Tile),C={request:R,uid:o.uid,tileID:o.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};o.source=this.id,o.scope=this.scope,o.requestParams=R,o.actor||(o.actor=this.dispatcher.getActor());const P=(L,j,Z,K)=>{if(delete o.request,o.aborted)return o.state="unloaded",c(null);if(L)return L.name==="AbortError"?void 0:(o.state="errored",c(L));if(this.map._refreshExpiredTiles&&j&&o.setExpiryData({cacheControl:Z,expires:K}),this.partial)o.state="empty";else{if(!j)return c(null);o.state="loaded",o._isHeaderLoaded=!0,o._mrt=j;const te=new Map;for(const ae in o._mrt.layers){const ce=o.getLayer(ae);if(ce)for(const Ce of ce.getBandList()){const{bytes:Re,tileSize:Pe,buffer:Ne}=ce.getBandView(Ce),Ge=Pe+2*Ne,et={data:new n.r({width:Ge,height:Ge},Re),pixelRatio:2,sdf:!1,usvg:!1,version:0};te.set(`${ae}/${Ce}`,et)}}for(const ae in this.iconsets)this.iconsets[ae].addIcons(te)}c(null)};o.request=this.partial?o.fetchHeader(void 0,P.bind(this)):o.actor.send("loadTile",C,P.bind(this),void 0,!0)}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(o,c){const A=o.texture;A&&A instanceof n.T?(o.destroy(!0),this.map.painter.saveTileTexture(A)):(o.destroy(),o.flushQueues(),o._isHeaderLoaded=!1,delete o._mrt,delete o.textureDescriptor),o.fbo&&(o.fbo.destroy(),delete o.fbo),delete o.request,delete o.requestParams,delete o.neighboringTiles,o.state="unloaded"}prepareTile(o,c,A){o._isHeaderLoaded&&(o.state!=="empty"&&(o.state="reloading"),o.fetchBand(c,A,(R,C)=>{if(R)return o.state="errored",this.fire(new n.z(R)),void this.triggerRepaint(o);C&&(o._isHeaderLoaded=!0,o.setTexture(C,this.map.painter),o.state="loaded",this.triggerRepaint(o))}))}getInitialBand(o){if(!this.rasterLayers)return 0;const c=this.rasterLayers.find(({id:C})=>C===o),A=c&&c.fields,R=A&&A.bands&&A.bands;return R?R[0]:0}getTextureDescriptor(o,c,A){if(!o)return;const R=c.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!R)return;let C=null;c instanceof n.aI?C=c.paint.get("raster-array-band"):c instanceof n.aJ&&(C=c.paint.get("raster-particle-array-band"));const P=C||this.getInitialBand(R);if(P!=null)if(o.textureDescriptor){if(!o.updateNeeded(R,P)||A)return Object.assign({},o.textureDescriptor,{texture:o.texture})}else this.prepareTile(o,R,P)}addIconset(o,c){this.iconsets[o]=c,this.partial=!1}}const kl={vector:nc,raster:Ko,"raster-dem":class extends Ko{constructor(g,o,c,A){super(g,o,c,A),this.type="raster-dem",this.maxzoom=22,this._options=n.l({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(g,o){const c=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function A(R,C){R&&(g.state="errored",o(R)),C&&(g.dem=C,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",o(null))}g.request=n.o(this.map._requestManager.transformRequest(c,n.R.Tile),(function(R,C,P,L){if(delete g.request,g.aborted)g.state="unloaded",o(null);else if(R)g.state="errored",o(R);else if(C){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:P,expires:L});const j=ImageBitmap&&C instanceof ImageBitmap&&n.t(),Z=1-(C.width-n.aG(C.width))/2;Z<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const K=j?C:n.q.getImageData(C,Z),te={uid:g.uid,tileID:g.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:K,encoding:this.encoding,padding:Z};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadTile",te,A.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(g){const o=g.canonical,c=Math.pow(2,o.z),A=(o.x-1+c)%c,R=o.x===0?g.wrap-1:g.wrap,C=(o.x+1+c)%c,P=o.x+1===c?g.wrap+1:g.wrap,L={};return L[new n.aH(g.overscaledZ,R,o.z,A,o.y).key]={backfilled:!1},L[new n.aH(g.overscaledZ,P,o.z,C,o.y).key]={backfilled:!1},o.y>0&&(L[new n.aH(g.overscaledZ,R,o.z,A,o.y-1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,g.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,P,o.z,C,o.y-1).key]={backfilled:!1}),o.y+1<c&&(L[new n.aH(g.overscaledZ,R,o.z,A,o.y+1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,g.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},L[new n.aH(g.overscaledZ,P,o.z,C,o.y+1).key]={backfilled:!1}),L}},"raster-array":Vi,geojson:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(A),this._data=o.data,this._options=n.l({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.minzoom!==void 0&&(this.minzoom=o.minzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const R=n.ai/this.tileSize;this.workerOptions=n.l({source:this.id,scope:this.scope,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*R,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*R,extent:n.ai,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:n.ai,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*R,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter,dynamic:o.dynamic},o.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}updateData(g){if(!this._options.dynamic)return this.fire(new n.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof g!="string"&&(g.type==="Feature"&&(g={type:"FeatureCollection",features:[g]}),g.type!=="FeatureCollection"))return this.fire(new n.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof g!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const o=new Map;for(const c of this._data.features)o.set(c.id,c);for(const c of g.features)o.set(c.id,c);this._data.features=[...o.values()]}else this._data=g;return this._updateWorkerData(!0),this}getClusterExpansionZoom(g,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id,scope:this.scope},o),this}getClusterChildren(g,o){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id,scope:this.scope},o),this}getClusterLeaves(g,o,c,A){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:g,limit:o,offset:c},A),this}_updateWorkerData(g=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new n.A("dataloading",{dataType:"source"})),this._loaded=!1;const o=n.l({append:g},this.workerOptions);o.scope=this.scope;const c=this._data;typeof c=="string"?(o.request=this.map._requestManager.transformRequest(n.q.resolveURL(c),n.R.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,o,(A,R)=>{if(this._loaded=!0,this._pendingLoad=null,A)this.fire(new n.z(A));else{const C={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&R&&R.resourceTiming&&R.resourceTiming[this.id]&&(C.resourceTiming=R.resourceTiming[this.id]),g&&(this._partialReload=!0),this.fire(new n.A("data",C)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(g),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const g=n.C(this.id,this.scope);this.map.style.clearSource(g),this._updateWorkerData()}loadTile(g,o){const c=g.actor?"reloadTile":"loadTile";g.actor=this.actor;const A=this.map.style?this.map.style.getLut(this.scope):null,R=A?{image:A.image.clone()}:null,C=this._partialReload,P={type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:R,scope:this.scope,pixelRatio:n.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:C};g.request=this.actor.send(c,P,(L,j)=>C&&!j?(g.state="loaded",o(null)):(delete g.request,g.destroy(),g.aborted?o(null):L?o(L):(g.loadVectorData(j,this.map.painter,c==="reloadTile"),o(null))),void 0,c==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g,o){this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id,scope:this.scope}),g.destroy()}onRemove(g){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return n.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends n.aK{constructor(g,o,c,A){super(g,o,c,A),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const o of g.urls)this.urls.push(this.map._requestManager.transformRequest(o,n.R.Source).url);n.aL(this.urls,(o,c)=>{this._loaded=!0,o?this.fire(new n.z(o)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const o=this.video.seekable;g<o.start(0)||g>o.end(0)?this.fire(new n.z(new n.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,o=g.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new n.T(g,this.video,o.RGBA8),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:n.aK,model:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="model",this.models=[],this._loaded=!1,this._options=o}load(){const g=[];for(const o in this._options.models){const c=this._options.models[o],A=n.aN(this.map._requestManager.transformRequest(c.uri,n.R.Model).url).then(R=>{if(!R)return;const C=n.aO(R),P=new n.aP(o,c.position,c.orientation,C);P.computeBoundsAndApplyParent(),this.models.push(P)}).catch(R=>{this.fire(new n.z(new Error(`Could not load model ${o} from ${c.uri}: ${R.message}`)))});g.push(A)}return Promise.allSettled(g).then(()=>{this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(o=>{this.fire(new n.z(new Error(`Could not load models: ${o.message}`)))})}onAdd(g){this.map=g,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(g,o){}serialize(){return{type:"model"}}},"batched-model":class extends n.E{constructor(g,o,c,A){super(),this.type="batched-model",this.id=g,this.tileSize=512,this._options=o,this.tiles=this._options.tiles,this.maxzoom=o.maxzoom||19,this.minzoom=o.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=c,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(A)}onAdd(g){this.map=g,this.load()}reload(){this.cancelTileJSONRequest();const g=n.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(g))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(g){this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"}));const o=Array.isArray(this.map._language)?this.map._language.join():this.map._language,c=this.map.getWorldview();this._tileJSONRequest=ws(this._options,this.map._requestManager,o,c,(A,R)=>{this._tileJSONRequest=null,this._loaded=!0,A?(o&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${o}`),c&&c.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${c}`),this.fire(new n.z(A))):R&&(n.l(this,R),R.bounds&&(this.tileBounds=new Us(R.bounds,this.minzoom,this.maxzoom)),ye(R.tiles,this.map._requestManager._customAccessToken),this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))),g&&g(A)})}hasTransition(){return!1}hasTile(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)}loaded(){return this._loaded}loadTile(g,o){const c=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),A={request:this.map._requestManager.transformRequest(c,n.R.Tile),data:void 0,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:g.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:n.q.devicePixelRatio,promoteId:this.promoteId};if(g.actor&&g.state!=="expired")if(g.state==="loading")g.reloadCallback=o;else{if(g.buckets){const C=Object.values(g.buckets);for(const P of C)P.dirty=!0;return void(g.state="loaded")}g.request=g.actor.send("reloadTile",A,R.bind(this))}else g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",A,R.bind(this),void 0,!0);function R(C,P){return g.aborted?o(null):C&&C.status!==404?o(C):(this.map._refreshExpiredTiles&&P&&g.setExpiryData(P),g.loadModelData(P,this.map.painter),g.state="loaded",void o(null))}}serialize(){return n.l({},this._options)}},canvas:class extends n.aK{constructor(g,o,c,A){super(g,o,c,A),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(R=>!Array.isArray(R)||R.length!==2||R.some(C=>typeof C!="number"))||this.fire(new n.z(new n.V(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.z(new n.V(`sources.${g}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new n.z(new n.V(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new n.z(new n.V(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.z(new n.V(`sources.${g}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(g){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?!g&&!this._playing||this.texture instanceof n.aM||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.T(o,this.canvas,o.gl.RGBA8,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends n.E{constructor(g,o,c,A){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=o,this.setEventedParent(A),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new n.z(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new n.z(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Us(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),n.l(this,n.aA(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return n.aA(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new n.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this.map=g,this._loaded=!1,this.fire(new n.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:o,y:c,z:A}=g.canonical;return this._implementation.hasTile({x:o,y:c,z:A})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,o){const{x:c,y:A,z:R}=g.tileID.canonical,C=new AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:c,y:A,z:R},{signal:C.signal})).then((function(P){return delete g.request,g.aborted?(g.state="unloaded",o(null)):P===void 0?(g.state="errored",o(null)):P===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",o(null)):function(L){return L instanceof ImageData||L instanceof HTMLCanvasElement||L instanceof ImageBitmap||L instanceof HTMLImageElement}(P)?(this.loadTileData(g,P),g.state="loaded",void o(null)):(g.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(P=>{P.name!=="AbortError"&&(g.state="errored",o(P))}),g.request.cancel=()=>C.abort()}loadTileData(g,o){g.setTexture(o,this.map.painter)}unloadTile(g,o){if(g.texture&&g.texture instanceof n.T?(g.destroy(!0),g.texture&&g.texture instanceof n.T&&this.map.painter.saveTileTexture(g.texture)):g.destroy(),this._implementation.unloadTile){const{x:c,y:A,z:R}=g.tileID.canonical;this._implementation.unloadTile({x:c,y:A,z:R})}o&&o()}abortTile(g,o){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),o&&o()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){const g=n.C(this.id,this.scope);this.map.style.clearSource(g)}_update(){this.fire(new n.A("data",{dataType:"source",sourceDataType:"content"}))}}},Do=function(g,o,c,A){const R=new kl[o.type](g,o,c,A);if(R.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${R.id}`);return n.aQ(["load","abort","unload","serialize","prepare"],R),R};function yd(g,o,c=""){return`${c}:${o.id||""}:${o.layer.id}:${function(A){if("layerId"in A)return`layer:${A.layerId}`;{const{featuresetId:R,importId:C}=A;return`featureset:${R}${C?`:import:${C}`:""}`}}(g.target)}`}function Nc(g,o,c,A=""){if(g.uniqueFeatureID){const R=yd(g,o,A);if(c.has(R))return!0;c.add(R)}return!1}function Qd(g,o,c,A,R=!1){const C=o.sourceCache.transform,P=o.sourceCache.tilesIn(g,o.has3DLayers,R);P.sort(ul);const L=[];for(const j of P){const Z=j.tile.queryRenderedFeatures(o,j,c,A,C,R);Object.keys(Z).length&&L.push({wrappedTileID:j.tile.tileID.wrapped().key,queryResults:Z})}return L.length===0?{}:function(j){const Z={},K={};for(const te of j){const ae=te.queryResults,ce=te.wrappedTileID,Ce=K[ce]=K[ce]||{};for(const Re in ae){const Pe=ae[Re],Ne=Ce[Re]=Ce[Re]||{},Ge=Z[Re]=Z[Re]||[];for(const et of Pe)Ne[et.featureIndex]||(Ne[et.featureIndex]=!0,Ge.push(et))}}return Z}(L)}function uu(g,o,c,A,R){const C={},P=A.queryRenderedSymbols(g),L=[];for(const j of Object.keys(P).map(Number))L.push(R[j]);L.sort(ul);for(const j of L){const Z=j.featureIndex.lookupSymbolFeatures(P[j.bucketInstanceId],j.bucketIndex,j.sourceLayerIndex,o,c);for(const K in Z){const te=C[K]=C[K]||[],ae=Z[K];ae.sort((ce,Ce)=>{const Re=j.featureSortOrder;if(Re){const Pe=Re.indexOf(ce.featureIndex);return Re.indexOf(Ce.featureIndex)-Pe}return Ce.featureIndex-ce.featureIndex});for(const ce of ae)te.push(ce)}}return C}function Vc(g,o){const c=g.getRenderableIds().map(C=>g.getTileByID(C)),A=[],R={};for(let C=0;C<c.length;C++){const P=c[C],L=P.tileID.canonical.key;R[L]||(R[L]=!0,P.querySourceFeatures(A,o))}return A}function ul(g,o){const c=g.tileID,A=o.tileID;return c.overscaledZ-A.overscaledZ||c.canonical.y-A.canonical.y||c.wrap-A.wrap||c.canonical.x-A.canonical.x}function Ys(g,o){const c={};if(!o)return c;for(const A of g){const R=A.layerIds.map(C=>o.getLayer(C)).filter(Boolean);if(R.length!==0){A.layers=R,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(C=>R.filter(P=>P.id===C)[0]));for(const C of R)c[C.fqid]=A}}return c}const Mo=32,Bl=33,cu=new Uint16Array(8184);for(let g=0;g<2046;g++){let o=g+2,c=0,A=0,R=0,C=0,P=0,L=0;for(1&o?R=C=P=Mo:c=A=L=Mo;(o>>=1)>1;){const Z=c+R>>1,K=A+C>>1;1&o?(R=c,C=A,c=P,A=L):(c=R,A=C,R=P,C=L),P=Z,L=K}const j=4*g;cu[j+0]=c,cu[j+1]=A,cu[j+2]=R,cu[j+3]=C}const oo=new Uint16Array(2178),Io=new Uint8Array(1089),gd=new Uint16Array(1089);function Fu(g){return g===0?-.03125:g===32?.03125:0}const cf={type:2,extent:n.ai,loadGeometry:()=>[[new n.P(0,0),new n.P(n.ai+1,0),new n.P(n.ai+1,n.ai+1),new n.P(0,n.ai+1),new n.P(0,0)]]};class Gl{constructor(o,c,A,R,C){this.tileID=o,this.uid=n.aW(),this.uses=0,this.tileSize=c,this.tileZoom=A,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=C,R&&R.style&&(this._lastUpdatedBrightness=R.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",R&&R.transform&&(this.projection=R.transform.projection)}registerFadeDuration(o){const c=o+this.timeAdded;c<n.q.now()||this.fadeEndTime&&c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=n.aR(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,c,A){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=Ys(o.buckets,c.style),this.hasSymbolBuckets=!1;for(const R in this.buckets){const C=this.buckets[R];if(C instanceof n.aY){if(this.hasSymbolBuckets=!0,!A)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const R in this.buckets){const C=this.buckets[R];if(C instanceof n.aY&&C.hasRTLText){this.hasRTLText=!0,n.aZ();break}}this.queryPadding=0;for(const R in this.buckets){const C=this.buckets[R],P=c.style.getOwnLayer(R);if(!P)continue;const L=P.queryRadius(C);this.queryPadding=Math.max(this.queryPadding,L)}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas),this._lastUpdatedBrightness=o.brightness}else this.collisionBoxArray=new n.aX}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(o,c,A){o&&(o.resourceTiming&&(this.resourceTiming=o.resourceTiming),this.buckets=Object.assign({},this.buckets,Ys(o.buckets,c.style)),o.featureIndex&&(this.latestFeatureIndex=o.featureIndex))}getBucket(o){return this.buckets[o.fqid]}upload(o){for(const R in this.buckets){const C=this.buckets[R];C.uploadPending()&&C.upload(o)}const c=o.gl,A=this.imageAtlas;A&&!A.uploaded&&(this.imageAtlasTexture=new n.T(o,A.image,c.RGBA8,{useMipmap:!!A.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new n.T(o,this.glyphAtlasImage,c.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new n.T(o,this.lineAtlas.image,c.R8),this.lineAtlas.uploaded=!0)}prepare(o,c,A){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture,A),!c||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const R=c.style.getBrightness();(this._lastUpdatedBrightness||R)&&(this._lastUpdatedBrightness&&R&&Math.abs(this._lastUpdatedBrightness-R)<.001||(this.updateBuckets(c,this._lastUpdatedBrightness!==R),this._lastUpdatedBrightness=R))}queryRenderedFeatures(o,c,A,R,C,P){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const L=function(j,Z){const K=n.ad.mat4.fromScaling([],[.5*j.width,.5*-j.height,1]);return n.ad.mat4.translate(K,K,[1,-1,0]),n.ad.mat4.multiply(K,K,j.calculateProjMatrix(Z.toUnwrapped())),Float32Array.from(K)}(C,this.tileID);return this.latestFeatureIndex.query(o,{tilespaceGeometry:c,pixelPosMatrix:L,transform:R,availableImages:A,tileTransform:this.tileTransform})}querySourceFeatures(o,c){const A=this.latestFeatureIndex;if(!A||!A.rawTileData)return;const R=A.loadVTLayers(),C=c?c.sourceLayer:"",P=R._geojsonTileLayer||R[C];if(!P)return;const L=n.a_(c&&c.filter),{z:j,x:Z,y:K}=this.tileID.canonical,te={z:j,x:Z,y:K};for(let ae=0;ae<P.length;ae++){const ce=P.feature(ae);if(L.needGeometry){const Pe=n.a$(ce,!0);if(!L.filter(new n.aa(this.tileID.overscaledZ),Pe,this.tileID.canonical))continue}else if(!L.filter(new n.aa(this.tileID.overscaledZ),ce))continue;const Ce=A.getId(ce,C),Re=new n.b0(ce,j,Z,K,Ce);Re.tile=te,o.push(Re)}}loaded(){return this.state==="loaded"||this.state==="errored"}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(o){const c=this.expirationTime;if(o.cacheControl){const A=n.b1(o.cacheControl);A["max-age"]&&(this.expirationTime=Date.now()+1e3*A["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const A=Date.now();let R=!1;if(this.expirationTime>A)R=!1;else if(c)if(this.expirationTime<c)R=!0;else{const C=this.expirationTime-c;C?this.expirationTime=A+Math.max(C,3e4):R=!0}else R=!0;R?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(o){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&o&&this.updateBuckets(o)}updateBuckets(o,c){if(!this.latestFeatureIndex||!o.style)return;const A=this.latestFeatureIndex.loadVTLayers(),R=o.style.listImages(),C=o.style.getBrightness();for(const P in this.buckets){if(!o.style.hasLayer(P))continue;const L=this.buckets[P],j=L.layers[0],Z=j.sourceLayer||"_geojsonTileLayer",K=A[Z],te=o.style.getLayerSourceCache(j);let ae={};te&&(ae=te._state.getState(Z,void 0));const ce=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},Ce=Object.keys(ae).length>0&&!c;Ce&&!L.stateDependentLayers.length&&!c||L.update(ae,K,R,ce,Ce?L.stateDependentLayers:L.layers,c,C),(L instanceof n.b2||L instanceof n.b3)&&o._terrain&&o._terrain.enabled&&te&&L.uploadPending()&&o._terrain._clearRenderCacheForTile(te.id,this.tileID);const Re=o&&o.style&&o.style.getOwnLayer(P);Re&&(this.queryPadding=Math.max(this.queryPadding,Re.queryRadius(L)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<n.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=n.q.now()+o}setTexture(o,c){const A=c.context,R=A.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o):(this.texture=new n.T(A,o,R.RGBA8,{useMipmap:!0}),this.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE))}setDependencies(o,c){const A={};for(const R of c)A[R]=!0;this.dependencies[o]=A}hasDependency(o,c){for(const A of o){const R=this.dependencies[A];if(R){for(const C of c)if(R[C])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,c){if(!c||c.name==="mercator"||this._tileDebugBuffer)return;const A=n.b4(cf,this.tileID.canonical,this.tileTransform)[0],R=new n.b5,C=new n.b6;for(let P=0;P<A.length;P++){const{x:L,y:j}=A[P];R.emplaceBack(L,j),C.emplaceBack(P)}C.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(C),this._tileDebugBuffer=o.createVertexBuffer(R,n.b7.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,R.length,C.length)}_makeTileBoundsBuffers(o,c){if(this._tileBoundsBuffer||!c||c.name==="mercator")return;const A=n.b4(cf,this.tileID.canonical,this.tileTransform)[0];let R,C;if(this.isRaster){const P=function(L,j){const Z=n.aR(L,j),K=Math.pow(2,L.z);for(let Pe=0;Pe<Bl;Pe++)for(let Ne=0;Ne<Bl;Ne++){const Ge=n.aS((L.x+(Ne+Fu(Ne))/Mo)/K),et=n.aT((L.y+(Pe+Fu(Pe))/Mo)/K),Xe=j.project(Ge,et),ct=Pe*Bl+Ne;oo[2*ct+0]=Math.round((Xe.x*Z.scale-Z.x)*n.ai),oo[2*ct+1]=Math.round((Xe.y*Z.scale-Z.y)*n.ai)}Io.fill(0),gd.fill(0);for(let Pe=2045;Pe>=0;Pe--){const Ne=4*Pe,Ge=cu[Ne+0],et=cu[Ne+1],Xe=cu[Ne+2],ct=cu[Ne+3],nt=Ge+Xe>>1,it=et+ct>>1,st=nt+it-et,yt=it+Ge-nt,wt=et*Bl+Ge,Yt=ct*Bl+Xe,Lt=it*Bl+nt,aa=Math.hypot((oo[2*wt+0]+oo[2*Yt+0])/2-oo[2*Lt+0],(oo[2*wt+1]+oo[2*Yt+1])/2-oo[2*Lt+1])>=16;Io[Lt]=Io[Lt]||(aa?1:0),Pe<1022&&(Io[Lt]=Io[Lt]||Io[(et+yt>>1)*Bl+(Ge+st>>1)]||Io[(ct+yt>>1)*Bl+(Xe+st>>1)])}const te=new n.aU,ae=new n.aV;let ce=0;function Ce(Pe,Ne){const Ge=Ne*Bl+Pe;return gd[Ge]===0&&(te.emplaceBack(oo[2*Ge+0],oo[2*Ge+1],Pe*n.ai/Mo,Ne*n.ai/Mo),gd[Ge]=++ce),gd[Ge]-1}function Re(Pe,Ne,Ge,et,Xe,ct){const nt=Pe+Ge>>1,it=Ne+et>>1;if(Math.abs(Pe-Xe)+Math.abs(Ne-ct)>1&&Io[it*Bl+nt])Re(Xe,ct,Pe,Ne,nt,it),Re(Ge,et,Xe,ct,nt,it);else{const st=Ce(Pe,Ne),yt=Ce(Ge,et),wt=Ce(Xe,ct);ae.emplaceBack(st,yt,wt)}}return Re(0,0,Mo,Mo,Mo,0),Re(Mo,Mo,0,0,0,Mo),{vertices:te,indices:ae}}(this.tileID.canonical,c);R=P.vertices,C=P.indices}else{R=new n.aU,C=new n.aV;for(const{x:L,y:j}of A)R.emplaceBack(L,j,0,0);const P=n.b9(R.int16,void 0,4);for(let L=0;L<P.length;L+=3)C.emplaceBack(P[L],P[L+1],P[L+2])}this._tileBoundsBuffer=o.createVertexBuffer(R,n.ba.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(C),this._tileBoundsSegments=n.b8.simpleSegment(0,0,R.length,C.length)}_makeGlobeTileDebugBuffers(o,c){const A=c.projection;if(!A||A.name!=="globe"||c.freezeTileCoverage)return;const R=this.tileID.canonical,C=n.bb(R,c),P=n.bc(C),L=n.ag(c.zoom);let j;L>0&&(j=n.ad.mat4.invert(new Float64Array(16),c.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(o,R,c,P,j,L),this._makeGlobeTileDebugTextBuffer(o,R,c,P,j,L)}_globePoint(o,c,A,R,C,P,L){let j=n.bd(o,c,A);if(P){const Z=1<<A.z,K=n.av(R.center.lng),te=n.aC(R.center.lat),ae=(A.x+.5)/Z-K;let ce=0;ae>.5?ce=-1:ae<-.5&&(ce=1);let Ce=(o/n.ai+A.x)/Z+ce,Re=(c/n.ai+A.y)/Z;Ce=(Ce-K)*R._pixelsPerMercatorPixel+K,Re=(Re-te)*R._pixelsPerMercatorPixel+te;const Pe=[Ce*R.worldSize,Re*R.worldSize,0];n.ad.vec3.transformMat4(Pe,Pe,P),j=n.be(j,Pe,L)}return n.ad.vec3.transformMat4(j,j,C)}_makeGlobeTileDebugBorderBuffer(o,c,A,R,C,P){const L=new n.b5,j=new n.b6,Z=new n.bf,K=(ae,ce,Ce,Re,Pe)=>{const Ne=(Ce-ae)/(Pe-1),Ge=(Re-ce)/(Pe-1),et=L.length;for(let Xe=0;Xe<Pe;Xe++){const ct=ae+Xe*Ne,nt=ce+Xe*Ge;L.emplaceBack(ct,nt);const it=this._globePoint(ct,nt,c,A,R,C,P);Z.emplaceBack(it[0],it[1],it[2]),j.emplaceBack(et+Xe)}},te=n.ai;K(0,0,te,0,16),K(te,0,te,te,16),K(te,te,0,te,16),K(0,te,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(j),this._tileDebugBuffer=o.createVertexBuffer(L,n.b7.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(Z,n.bg.members),this._tileDebugSegments=n.b8.simpleSegment(0,0,L.length,j.length)}_makeGlobeTileDebugTextBuffer(o,c,A,R,C,P){const L=n.ai/4,j=new n.b5,Z=new n.aV,K=new n.bf,te=25;Z.reserve(32),j.reserve(te),K.reserve(te);const ae=(ce,Ce)=>te*ce+Ce;for(let ce=0;ce<te;ce++){const Ce=ce*L;for(let Re=0;Re<te;Re++){const Pe=Re*L;j.emplaceBack(Pe,Ce);const Ne=this._globePoint(Pe,Ce,c,A,R,C,P);K.emplaceBack(Ne[0],Ne[1],Ne[2])}}for(let ce=0;ce<4;ce++)for(let Ce=0;Ce<4;Ce++){const Re=ae(ce,Ce),Pe=ae(ce,Ce+1),Ne=ae(ce+1,Ce),Ge=ae(ce+1,Ce+1);Z.emplaceBack(Re,Pe,Ne),Z.emplaceBack(Ne,Pe,Ge)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(Z),this._tileDebugTextBuffer=o.createVertexBuffer(j,n.b7.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(K,n.bg.members),this._tileDebugTextSegments=n.b8.simpleSegment(0,0,te,32)}destroy(o=!1){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!o&&this.texture&&this.texture instanceof n.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}n.bh.setPbf(n.bi);class Lo extends Gl{constructor(o,c,A,R,C){super(o,c,A,R,C),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(o){return this._mrt&&this._mrt.getLayer(o)}setTexture(o,c){const A=c.context,R=A.gl;this.texture=this.texture||c.getTileTexture(o.width),this.texture&&this.texture instanceof n.T?this.texture.update(o,{premultiply:!1}):this.texture=new n.T(A,o,R.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(o=16384,c){const A=this._mrt=new n.bh(30),R=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(o-1)}});return this.entireBuffer=null,this.request=n.bj(R,(C,P,L,j)=>{if(C)c(C);else try{const Z=A.getHeaderLength(P);if(Z>o)return void(this.request=this.fetchHeader(Z,c));A.parseHeader(P),this._isHeaderLoaded=!0;let K=0;for(const te of Object.values(A.layers))K=Math.max(K,te.dataIndex[te.dataIndex.length-1].lastByte);P.byteLength>=K&&(this.entireBuffer=P),c(null,this.entireBuffer||P,L,j)}catch(Z){c(Z)}}),this.request}fetchBand(o,c,A){const R=this._mrt;if(!this._isHeaderLoaded||!R)return void A(new Error("Tile header is not ready"));const C=this.actor;if(!C)return void A(new Error("Can't fetch tile band without an actor"));let P;const L=(te,ae)=>{P.complete(te,ae),te?A(te):(this.updateTextureDescriptor(o,c),A(null,this.textureDescriptor&&this.textureDescriptor.img))},j=(te,ae)=>{if(te)return A(te);const ce=C.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:ae,task:P},L,void 0,!0);this._workQueue.push(()=>{ce&&ce.cancel(),P.cancel()})},Z=R.getLayer(o);if(!Z)return void A(new Error(`Unknown sourceLayer "${o}"`));if(Z.hasDataForBand(c))return this.updateTextureDescriptor(o,c),void A(null,this.textureDescriptor?this.textureDescriptor.img:null);const K=Z.getDataRange([c]);if(P=R.createDecodingTask(K),!P||P.tasks.length)if(this.flushQueues(),this.entireBuffer)j(null,this.entireBuffer.slice(K.firstByte,K.lastByte+1));else{const te=Object.assign({},this.requestParams,{headers:{Range:`bytes=${K.firstByte}-${K.lastByte}`}}),ae=n.bj(te,j);this._fetchQueue.push(()=>{ae.cancel(),P.cancel()})}else A(null)}updateNeeded(o,c){return(!this.textureDescriptor||this.textureDescriptor.band!==c||this.textureDescriptor.layer!==o)&&this.state!=="errored"}updateTextureDescriptor(o,c){if(!this._mrt)return;const A=this._mrt.getLayer(o);if(!A||!A.hasBand(c)||!A.hasDataForBand(c))return;const{bytes:R,tileSize:C,buffer:P,offset:L,scale:j}=A.getBandView(c),Z=C+2*P,K=new n.r({width:Z,height:Z},R),te=this.texture;te&&te instanceof n.T&&te.update(K,{premultiply:!1}),this.textureDescriptor={layer:o,band:c,img:K,buffer:P,offset:L,tileSize:C,format:A.pixelFormat,mix:[j,256*j,65536*j,16777216*j]}}}class Uu{constructor(o,c){this.max=o,this.onRemove=c,this.reset()}reset(){for(const o in this.data)for(const c of this.data[o])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(o,c,A){const R=o.wrapped().key;this.data[R]===void 0&&(this.data[R]=[]);const C={value:c,timeout:void 0};if(A!==void 0&&(C.timeout=setTimeout(()=>{this.remove(o,C)},A)),this.data[R].push(C),this.order.push(R),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const c=this.data[o].shift();return c.timeout&&clearTimeout(c.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),c.value}getByKey(o){const c=this.data[o];return c?c[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,c){if(!this.has(o))return this;const A=o.wrapped().key,R=c===void 0?0:this.data[A].indexOf(c),C=this.data[A][R];return this.data[A].splice(R,1),C.timeout&&clearTimeout(C.timeout),this.data[A].length===0&&delete this.data[A],this.onRemove(C.value),this.order.splice(this.order.indexOf(A),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(o){const c=[];for(const A in this.data)for(const R of this.data[A])o(R.value)||c.push(R);for(const A of c)this.remove(A.value.tileID,A)}}class eh{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,c,A){const R=String(c);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][R]=this.stateChanges[o][R]||{},n.l(this.stateChanges[o][R],A),this.deletedStates[o]===null){this.deletedStates[o]={};for(const C in this.state[o])C!==R&&(this.deletedStates[o][C]=null)}else if(this.deletedStates[o]&&this.deletedStates[o][R]===null){this.deletedStates[o][R]={};for(const C in this.state[o][R])A[C]||(this.deletedStates[o][R][C]=null)}else for(const C in A)this.deletedStates[o]&&this.deletedStates[o][R]&&this.deletedStates[o][R][C]===null&&delete this.deletedStates[o][R][C]}removeFeatureState(o,c,A){if(this.deletedStates[o]===null)return;const R=String(c);if(this.deletedStates[o]=this.deletedStates[o]||{},A&&c!==void 0)this.deletedStates[o][R]!==null&&(this.deletedStates[o][R]=this.deletedStates[o][R]||{},this.deletedStates[o][R][A]=null);else if(c!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][R])for(A in this.deletedStates[o][R]={},this.stateChanges[o][R])this.deletedStates[o][R][A]=null;else this.deletedStates[o][R]=null;else this.deletedStates[o]=null}getState(o,c){const A=this.state[o]||{},R=this.stateChanges[o]||{},C=this.deletedStates[o];if(C===null)return{};if(c!==void 0){const L=String(c),j=n.l({},A[L],R[L]);if(C){const Z=C[c];if(Z===null)return{};for(const K in Z)delete j[K]}return j}const P=n.l({},A,R);if(C)for(const L in C)delete P[L];return P}initializeTileState(o,c){o.refreshFeatureState(c)}coalesceChanges(o,c){const A={};for(const R in this.stateChanges){this.state[R]=this.state[R]||{};const C={};for(const P in this.stateChanges[R])this.state[R][P]||(this.state[R][P]={}),n.l(this.state[R][P],this.stateChanges[R][P]),C[P]=this.state[R][P];A[R]=C}for(const R in this.deletedStates){this.state[R]=this.state[R]||{};const C={};if(this.deletedStates[R]===null)for(const P in this.state[R])C[P]={},this.state[R][P]={};else for(const P in this.deletedStates[R]){if(this.deletedStates[R][P]===null)this.state[R][P]={};else if(this.state[R][P])for(const L of Object.keys(this.deletedStates[R][P]))delete this.state[R][P][L];C[P]=this.state[R][P]}A[R]=A[R]||{},n.l(A[R],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(A).length!==0)for(const R in o)o[R].refreshFeatureState(c)}}class Wo extends n.E{constructor(o,c,A){super(),this.id=o,this._onlySymbols=A,c.on("data",R=>{R.dataType==="source"&&R.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&R.dataType==="source"&&R.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),c.on("error",()=>{this._sourceErrored=!0}),this._source=c,this._tiles={},this._cache=new Uu(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=c.minTileCacheSize,this._maxTileCacheSize=c.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new eh,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(o){this.map=o,this._minTileCacheSize=this._minTileCacheSize===void 0&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles)if(!this._tiles[o].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,c){return o.isSymbolTile=this._onlySymbols,o.isExtraShadowCaster=this._shadowCasterTiles[o.tileID.key],this._source.loadTile(o,c)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o)}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o)}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const A=this._tiles[c];A.upload(o),A.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(bn).map(o=>o.key)}getRenderableIds(o,c){const A=[];for(const R in this._tiles)this._isIdRenderable(+R,o,c)&&A.push(this._tiles[R]);return o?A.sort((R,C)=>{const P=R.tileID,L=C.tileID,j=new n.P(P.canonical.x,P.canonical.y)._rotate(this.transform.angle),Z=new n.P(L.canonical.x,L.canonical.y)._rotate(this.transform.angle);return P.overscaledZ-L.overscaledZ||Z.y-j.y||Z.x-j.x}).map(R=>R.tileID.key):A.map(R=>R.tileID).sort(bn).map(R=>R.key)}hasRenderableParent(o){const c=this.findLoadedParent(o,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(o,c,A){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(c||!this._tiles[o].holdingForFade())&&(A||!this._shadowCasterTiles[o])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)this._tiles[o].state!=="errored"&&this._reloadTile(+o,"reloading")}}_reloadTile(o,c){const A=this._tiles[o];A&&(A.state!=="loading"&&(A.state=c),this._loadTile(A,this._tileLoaded.bind(this,A,o,c)))}_tileLoaded(o,c,A,R){if(R)if(o.state="errored",R.status!==404)this._source.fire(new n.z(R,{tile:o}));else{if(this._source.fire(new n.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:o})),!(o.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const C=this.map.painter.terrain;this.update(this.transform,C.getScaledDemTileSize(),!0),C.resetTileLookupCache(this.id)}else this.update(this.transform)}else o.timeAdded=n.q.now(),A==="expired"&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(c,o),this._source.type==="raster-dem"&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new n.A("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const c=this.getRenderableIds();for(let R=0;R<c.length;R++){const C=c[R];if(o.neighboringTiles&&o.neighboringTiles[C]){const P=this.getTileByID(C);A(o,P),A(P,o)}}function A(R,C){if(!R.dem||R.dem.borderReady)return;R.needsHillshadePrepare=!0,R.needsDEMTextureUpload=!0;let P=C.tileID.canonical.x-R.tileID.canonical.x;const L=C.tileID.canonical.y-R.tileID.canonical.y,j=Math.pow(2,R.tileID.canonical.z),Z=C.tileID.key;P===0&&L===0||Math.abs(L)>1||(Math.abs(P)>1&&(Math.abs(P+j)===1?P+=j:Math.abs(P-j)===1&&(P-=j)),C.dem&&R.dem&&(R.dem.backfillBorder(C.dem,P,L),R.neighboringTiles&&R.neighboringTiles[Z]&&(R.neighboringTiles[Z].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,c,A,R){for(const C in this._tiles){let P=this._tiles[C];if(R[C]||!P.hasData()||P.tileID.overscaledZ<=c||P.tileID.overscaledZ>A)continue;let L=P.tileID;for(;P&&P.tileID.overscaledZ>c+1;){const Z=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[Z.key],P&&P.hasData()&&(L=Z)}let j=L;for(;j.overscaledZ>c;)if(j=j.scaledTo(j.overscaledZ-1),o[j.key]){R[L.key]=L;break}}}findLoadedParent(o,c){if(o.key in this._loadedParentTiles){const A=this._loadedParentTiles[o.key];return A&&A.tileID.overscaledZ>=c?A:null}for(let A=o.overscaledZ-1;A>=c;A--){const R=o.scaledTo(A),C=this._getLoadedTile(R);if(C)return C}}_getLoadedTile(o){const c=this._tiles[o.key];return c&&c.hasData()?c:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,c){c=c||this._source.tileSize;const A=Math.ceil(o.width/c)+1,R=Math.ceil(o.height/c)+1,C=Math.floor(A*R*5),P=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,C):C,L=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,P):P;this._cache.setMaxSize(L)}handleWrapJump(o){const c=Math.round((o-(this._prevLng===void 0?o:this._prevLng))/360);if(this._prevLng=o,c){const A={};for(const R in this._tiles){const C=this._tiles[R];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+c),A[C.tileID.key]=C}this._tiles=A;for(const R in this._timers)clearTimeout(this._timers[R]),delete this._timers[R];for(const R in this._tiles)this._setTileReloadTimer(+R,this._tiles[R])}}update(o,c,A,R){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!A)return;this.updateCacheSize(o,c),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const C=this._source.type==="batched-model";let P,L=this._source.maxzoom;const j=this.map&&this.map.painter?this.map.painter._terrain:null;if(j&&j.sourceCache===this&&j.attenuationRange()){const te=j.attenuationRange()[0],ae=Math.floor(te)-Math.log2(j.getDemUpscale());L>ae&&(L=ae)}if(this.used||this.usedForTerrain){if(this._source.tileID)P=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(te=>new n.aH(te.canonical.z,te.wrap,te.canonical.z,te.canonical.x,te.canonical.y));else if(this.tileCoverLift!==0){const te=o.clone();te.tileCoverLift=this.tileCoverLift,P=te.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.minzoom<=1&&o.projection.name==="globe"&&(P.push(new n.aH(1,0,1,0,0)),P.push(new n.aH(1,0,1,1,0)),P.push(new n.aH(1,0,1,0,1)),P.push(new n.aH(1,0,1,1,1)))}else if(P=o.coveringTiles({tileSize:c||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:L,roundZoom:this._source.roundZoom&&!A,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:C}),this._source.hasTile){const te=this._source.hasTile.bind(this._source);P=P.filter(ae=>te(ae))}}else P=[];if(P.length>0&&this.castsShadows&&R&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!lo(this._source.type)){const te=o.coveringZoomLevel({tileSize:c||this._source.tileSize,roundZoom:this._source.roundZoom&&!A}),ae=Math.min(te,this._source.maxzoom);if(C){const ce=o.extendTileCover(P,ae);for(const Ce of ce)P.push(Ce)}else{const ce=o.extendTileCover(P,ae,R);for(const Ce of ce)this._shadowCasterTiles[Ce.key]=!0,P.push(Ce)}}const Z=this._updateRetainedTiles(P);if(lo(this._source.type)&&P.length!==0){const te={},ae={},ce=Object.keys(Z);for(const Re of ce){const Pe=Z[Re],Ne=this._tiles[Re];if(!Ne||Ne.fadeEndTime&&Ne.fadeEndTime<=n.q.now())continue;const Ge=this.findLoadedParent(Pe,Math.max(Pe.overscaledZ-Wo.maxOverzooming,this._source.minzoom));Ge&&(this._addTile(Ge.tileID),te[Ge.tileID.key]=Ge.tileID),ae[Re]=Pe}const Ce=P[P.length-1].overscaledZ;for(const Re in this._tiles){const Pe=this._tiles[Re];if(Z[Re]||!Pe.hasData())continue;let Ne=Pe.tileID;for(;Ne.overscaledZ>Ce;){Ne=Ne.scaledTo(Ne.overscaledZ-1);const Ge=this._tiles[Ne.key];if(Ge&&Ge.hasData()&&ae[Ne.key]){Z[Re]=Pe.tileID;break}}}for(const Re in te)Z[Re]||(this._coveredTiles[Re]=!0,Z[Re]=te[Re])}for(const te in Z)this._tiles[te].clearFadeHold();const K=n.bk(this._tiles,Z);for(const te of K){const ae=this._tiles[te];ae.hasSymbolBuckets&&!ae.holdingForFade()?ae.setHoldDuration(this.map._fadeDuration):ae.hasSymbolBuckets&&!ae.symbolFadeFinished()||this._removeTile(+te)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const c={};if(o.length===0)return c;const A={},R=o.reduce((Z,K)=>Math.min(Z,K.overscaledZ),1/0),C=o[0].overscaledZ,P=Math.max(C-Wo.maxOverzooming,this._source.minzoom),L=Math.max(C+Wo.maxUnderzooming,this._source.minzoom),j={};for(const Z of o){const K=this._addTile(Z);c[Z.key]=Z,K.hasData()||R<this._source.maxzoom&&(j[Z.key]=Z)}this._retainLoadedChildren(j,R,L,c);for(const Z of o){let K=this._tiles[Z.key];if(K.hasData())continue;if(Z.canonical.z>=this._source.maxzoom){const ae=Z.children(this._source.maxzoom)[0],ce=this.getTile(ae);if(ce&&ce.hasData()){c[ae.key]=ae;continue}}else{const ae=Z.children(this._source.maxzoom);if(c[ae[0].key]&&c[ae[1].key]&&c[ae[2].key]&&c[ae[3].key])continue}let te=K.wasRequested();for(let ae=Z.overscaledZ-1;ae>=P;--ae){const ce=Z.scaledTo(ae);if(A[ce.key]||(A[ce.key]=!0,K=this.getTile(ce),!K&&te&&(K=this._addTile(ce)),K&&(c[ce.key]=ce,te=K.wasRequested(),K.hasData())))break}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const c=[];let A,R=this._tiles[o].tileID;for(;R.overscaledZ>0;){if(R.key in this._loadedParentTiles){A=this._loadedParentTiles[R.key];break}c.push(R.key);const C=R.scaledTo(R.overscaledZ-1);if(A=this._getLoadedTile(C),A)break;R=C}for(const C of c)this._loadedParentTiles[C]=A}}_addTile(o){let c=this._tiles[o.key];if(c)return c.isExtraShadowCaster!==!0||this._shadowCasterTiles[o.key]||this._reloadTile(o.key,"reloading"),c;c=this._cache.getAndRemove(o),c&&(this._setTileReloadTimer(o.key,c),c.tileID=o,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,c)));const A=!!c;if(!A){const R=this.map?this.map.painter:null,C=this._source.tileSize*o.overscaleFactor();c=this._source.type==="raster-array"?new Lo(o,C,this.transform.tileZoom,R,this._isRaster):new Gl(o,C,this.transform.tileZoom,R,this._isRaster),this._loadTile(c,this._tileLoaded.bind(this,c,o.key,c.state))}return c?(c.uses++,this._tiles[o.key]=c,A||this._source.fire(new n.A("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c):null}_setTileReloadTimer(o,c){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const A=c.getExpiryTimeout();A&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},A))}_removeTile(o){const c=this._tiles[o];c&&(c.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),c.uses>0||(c.hasData()&&c.state!=="reloading"||c.state==="empty"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,c,A){const R=[],C=this.transform;if(!C)return R;const P=C.projection.name==="globe",L=n.av(C.center.lng);for(const j in this._tiles){const Z=this._tiles[j];if(A&&Z.clearQueryDebugViz(),Z.holdingForFade())continue;let K;if(P){const te=Z.tileID.canonical;if(te.z===0){const ae=[Math.abs(n.ay(L,...hr(te,-1))-L),Math.abs(n.ay(L,...hr(te,1))-L)];K=[0,2*ae.indexOf(Math.min(...ae))-1]}else{const ae=[Math.abs(n.ay(L,...hr(te,-1))-L),Math.abs(n.ay(L,...hr(te,0))-L),Math.abs(n.ay(L,...hr(te,1))-L)];K=[ae.indexOf(Math.min(...ae))-1]}}else K=[0];for(const te of K){const ae=o.containsTile(Z,C,c,te);ae&&R.push(ae)}}return R}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(o){return this._getRenderableCoordinates(o)}_getRenderableCoordinates(o,c){const A=this.getRenderableIds(o,c).map(C=>this._tiles[C].tileID),R=this.transform.projection.name==="globe";for(const C of A)C.projMatrix=this.transform.calculateProjMatrix(C.toUnwrapped()),C.expandedProjMatrix=R?this.transform.calculateProjMatrix(C.toUnwrapped(),!1,!0):C.projMatrix;return A}sortCoordinatesByDistance(o){const c=o.slice(),A=this.transform._camera.position,R=this.transform._camera.forward(),C={};for(const P of c){const L=1/(1<<P.canonical.z);C[P.key]=((P.canonical.x+.5)*L+P.wrap-A[0])*R[0]+((P.canonical.y+.5)*L-A[1])*R[1]-A[2]*R[2]}return c.sort((P,L)=>C[P.key]-C[L.key]),c}hasTransition(){if(this._source.hasTransition())return!0;if(lo(this._source.type))for(const o in this._tiles){const c=this._tiles[o];if(c.fadeEndTime!==void 0&&c.fadeEndTime>=n.q.now())return!0}return!1}setFeatureState(o,c,A){this._state.updateState(o=o||"_geojsonTileLayer",c,A)}removeFeatureState(o,c,A){this._state.removeFeatureState(o=o||"_geojsonTileLayer",c,A)}getFeatureState(o,c){return this._state.getState(o=o||"_geojsonTileLayer",c)}setDependencies(o,c,A){const R=this._tiles[o];R&&R.setDependencies(c,A)}reloadTilesForDependencies(o,c){for(const A in this._tiles)this._tiles[A].hasDependency(o,c)&&this._reloadTile(+A,"reloading");this._cache.filter(A=>!A.hasDependency(o,c))}_preloadTiles(o,c){if(!this._sourceLoaded){const j=()=>{this._sourceLoaded&&(this._source.off("data",j),this._preloadTiles(o,c))};return void this._source.on("data",j)}const A=new Map,R=Array.isArray(o)?o:[o],C=this.map.painter.terrain,P=this.usedForTerrain&&C?C.getScaledDemTileSize():this._source.tileSize;for(const j of R){const Z=j.coveringTiles({tileSize:P,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const K of Z)A.set(K.key,K);this.usedForTerrain&&j.updateElevation(!1)}const L=Array.from(A.values());n.bl(L,(j,Z)=>{const K=new Gl(j,this._source.tileSize*j.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(K,te=>{this._source.type==="raster-dem"&&K.dem&&this._backfillDEM(K),Z(te,K)})},c)}}function bn(g,o){const c=Math.abs(2*g.wrap)-+(g.wrap<0),A=Math.abs(2*o.wrap)-+(o.wrap<0);return g.overscaledZ-o.overscaledZ||A-c||o.canonical.y-g.canonical.y||o.canonical.x-g.canonical.x}function lo(g){return g==="raster"||g==="image"||g==="video"||g==="custom"}function hr(g,o){const c=1<<g.z;return[g.x/c+o,(g.x+1)/c+o]}Wo.maxOverzooming=10,Wo.maxUnderzooming=3;class zc{constructor(o){this.style=o,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const o=!1,c=!1;for(const A in this.style._mergedLayers){const R=this.style._mergedLayers[A];if(R.type==="fill-extrusion")this.layers.push({layer:R,visible:o,visibilityChanged:c});else if(R.type==="model"){const C=this.style.getLayerSource(R);C&&C.type==="batched-model"&&this.layers.push({layer:R,visible:o,visibilityChanged:c})}}}onNewFrame(o){this.layersGotHidden=!1;for(const c of this.layers){const A=c.layer;let R=!1;A.type==="fill-extrusion"?R=!A.isHidden(o)&&A.paint.get("fill-extrusion-opacity")>0:A.type==="model"&&(R=!A.isHidden(o)&&A.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!R&&c.visible,c.visible=R}}updateZOffset(o,c){this.currentBuildingBuckets=[];for(const R of this.layers){const C=R.layer,P=this.style.getLayerSourceCache(C);let L=1;C.type==="fill-extrusion"&&(L=R.visible?C.paint.get("fill-extrusion-vertical-scale"):0);let j=P?P.getTile(c):null;if(!j&&P&&c.canonical.z>P.getSource().minzoom){let Z=c.scaledTo(Math.min(P.getSource().maxzoom,c.overscaledZ-1));for(;Z.overscaledZ>=P.getSource().minzoom&&(j=P.getTile(Z),!j&&Z.overscaledZ!==0);)Z=Z.scaledTo(Z.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:j?j.getBucket(C):null,tileID:j?j.tileID:c,verticalScale:L})}o.hasAnyZOffset=!1;let A=!1;for(let R=0;R<o.symbolInstances.length;R++){const C=o.symbolInstances.get(R),P=C.zOffset,L=this._getHeightAtTileOffset(c,C.tileAnchorX,C.tileAnchorY);C.zOffset=L!==Number.NEGATIVE_INFINITY?L:P,A||P===C.zOffset||(A=!0),o.hasAnyZOffset||C.zOffset===0||(o.hasAnyZOffset=!0)}A&&(o.zOffsetBuffersNeedUpload=!0,o.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(o,c,A,R){let C=c,P=A;if(o.canonical.z!==R.canonical.z){const L=R.canonical,j=1/(1<<o.canonical.z-L.z);C=(c+o.canonical.x*n.ai)*j-L.x*n.ai|0,P=(A+o.canonical.y*n.ai)*j-L.y*n.ai|0}return{tileX:C,tileY:P}}_getHeightAtTileOffset(o,c,A){let R,C;for(let P=0;P<this.layers.length;++P){if(this.layers[P].layer.type!=="fill-extrusion")continue;const{bucket:L,tileID:j,verticalScale:Z}=this.currentBuildingBuckets[P];if(!L)continue;const{tileX:K,tileY:te}=this._mapCoordToOverlappingTile(o,c,A,j),ae=L.getHeightAtTileCoord(K,te);ae&&ae.height!==void 0&&(ae.hidden?R=ae.height:C=Math.max(ae.height*Z,C||0))}if(C!==void 0)return C;for(let P=0;P<this.layers.length;++P){const L=this.layers[P];if(L.layer.type!=="model"||!L.visible)continue;const{bucket:j,tileID:Z}=this.currentBuildingBuckets[P];if(!j)continue;const{tileX:K,tileY:te}=this._mapCoordToOverlappingTile(o,c,A,Z),ae=j.getHeightAtTileCoord(K,te);if(ae&&!ae.hidden)return ae.height===void 0&&R!==void 0?Math.min(ae.maxHeight,R)*ae.verticalScale:ae.height?ae.height*ae.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function gn(g,o){const c={};for(const A in g)A!=="ref"&&(c[A]=g[A]);return n.bm.forEach(A=>{A in o&&(c[A]=o[A])}),c}function th(g){g=g.slice();const o=Object.create(null);for(let c=0;c<g.length;c++)o[g[c].id]=g[c];for(let c=0;c<g.length;c++)"ref"in g[c]&&(g[c]=gn(g[c],o[g[c].ref]));return g}const Tn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function ks(g,o,c){c.push({command:Tn.addSource,args:[g,o[g]]})}function ic(g,o,c){o.push({command:Tn.removeSource,args:[g]}),c[g]=!0}function sc(g,o,c,A){ic(g,c,A),ks(g,o,c)}function Xa(g,o,c){let A;for(A in g[c])if(g[c].hasOwnProperty(A)&&A!=="data"&&!n.bn(g[c][A],o[c][A]))return!1;for(A in o[c])if(o[c].hasOwnProperty(A)&&A!=="data"&&!n.bn(g[c][A],o[c][A]))return!1;return!0}function an(g,o,c,A,R,C){let P;for(P in o=o||{},g=g||{})g.hasOwnProperty(P)&&(n.bn(g[P],o[P])||c.push({command:C,args:[A,P,o[P],R]}));for(P in o)o.hasOwnProperty(P)&&!g.hasOwnProperty(P)&&(n.bn(g[P],o[P])||c.push({command:C,args:[A,P,o[P],R]}))}function An(g){return g.id}function Bs(g,o){return g[o.id]=o,g}class Ad{constructor(o,c){this.reset(o,c)}reset(o,c){this.points=o||[],this._distances=[0];for(let A=1;A<this.points.length;A++)this._distances[A]=this._distances[A-1]+this.points[A].dist(this.points[A-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=n.ay(o,0,1);let c=1,A=this._distances[c];const R=o*this.paddedLength+this.padding;for(;A<R&&c<this._distances.length;)A=this._distances[++c];const C=c-1,P=this._distances[C],L=A-P,j=L>0?(R-P)/L:0;return this.points[C].mult(1-j).add(this.points[c].mult(j))}}class ln{constructor(o,c,A){const R=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(o/A),this.yCellCount=Math.ceil(c/A);for(let P=0;P<this.xCellCount*this.yCellCount;P++)R.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=c,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,c,A,R,C){this._forEachCell(c,A,R,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(c),this.bboxes.push(A),this.bboxes.push(R),this.bboxes.push(C)}insertCircle(o,c,A,R){this._forEachCell(c-R,A-R,c+R,A+R,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(c),this.circles.push(A),this.circles.push(R)}_insertBoxCell(o,c,A,R,C,P){this.boxCells[C].push(P)}_insertCircleCell(o,c,A,R,C,P){this.circleCells[C].push(P)}_query(o,c,A,R,C,P){if(A<0||o>this.width||R<0||c>this.height)return!C&&[];const L=[];if(o<=0&&c<=0&&this.width<=A&&this.height<=R){if(C)return!0;for(let j=0;j<this.boxKeys.length;j++)L.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const Z=this.circles[3*j],K=this.circles[3*j+1],te=this.circles[3*j+2];L.push({key:this.circleKeys[j],x1:Z-te,y1:K-te,x2:Z+te,y2:K+te})}return P?L.filter(P):L}return this._forEachCell(o,c,A,R,this._queryCell,L,{hitTest:C,seenUids:{box:{},circle:{}}},P),C?L.length>0:L}_queryCircle(o,c,A,R,C){const P=o-A,L=o+A,j=c-A,Z=c+A;if(L<0||P>this.width||Z<0||j>this.height)return!R&&[];const K=[];return this._forEachCell(P,j,L,Z,this._queryCellCircle,K,{hitTest:R,circle:{x:o,y:c,radius:A},seenUids:{box:{},circle:{}}},C),R?K.length>0:K}query(o,c,A,R,C){return this._query(o,c,A,R,!1,C)}hitTest(o,c,A,R,C){return this._query(o,c,A,R,!0,C)}hitTestCircle(o,c,A,R){return this._queryCircle(o,c,A,!0,R)}_queryCell(o,c,A,R,C,P,L,j){const Z=L.seenUids,K=this.boxCells[C];if(K!==null){const ae=this.bboxes;for(const ce of K)if(!Z.box[ce]){Z.box[ce]=!0;const Ce=4*ce;if(o<=ae[Ce+2]&&c<=ae[Ce+3]&&A>=ae[Ce+0]&&R>=ae[Ce+1]&&(!j||j(this.boxKeys[ce]))){if(L.hitTest)return P.push(!0),!0;P.push({key:this.boxKeys[ce],x1:ae[Ce],y1:ae[Ce+1],x2:ae[Ce+2],y2:ae[Ce+3]})}}}const te=this.circleCells[C];if(te!==null){const ae=this.circles;for(const ce of te)if(!Z.circle[ce]){Z.circle[ce]=!0;const Ce=3*ce;if(this._circleAndRectCollide(ae[Ce],ae[Ce+1],ae[Ce+2],o,c,A,R)&&(!j||j(this.circleKeys[ce]))){if(L.hitTest)return P.push(!0),!0;{const Re=ae[Ce],Pe=ae[Ce+1],Ne=ae[Ce+2];P.push({key:this.circleKeys[ce],x1:Re-Ne,y1:Pe-Ne,x2:Re+Ne,y2:Pe+Ne})}}}}}_queryCellCircle(o,c,A,R,C,P,L,j){const Z=L.circle,K=L.seenUids,te=this.boxCells[C];if(te!==null){const ce=this.bboxes;for(const Ce of te)if(!K.box[Ce]){K.box[Ce]=!0;const Re=4*Ce;if(this._circleAndRectCollide(Z.x,Z.y,Z.radius,ce[Re+0],ce[Re+1],ce[Re+2],ce[Re+3])&&(!j||j(this.boxKeys[Ce])))return P.push(!0),!0}}const ae=this.circleCells[C];if(ae!==null){const ce=this.circles;for(const Ce of ae)if(!K.circle[Ce]){K.circle[Ce]=!0;const Re=3*Ce;if(this._circlesCollide(ce[Re],ce[Re+1],ce[Re+2],Z.x,Z.y,Z.radius)&&(!j||j(this.circleKeys[Ce])))return P.push(!0),!0}}}_forEachCell(o,c,A,R,C,P,L,j){const Z=this._convertToXCellCoord(o),K=this._convertToYCellCoord(c),te=this._convertToXCellCoord(A),ae=this._convertToYCellCoord(R);for(let ce=Z;ce<=te;ce++)for(let Ce=K;Ce<=ae;Ce++)if(C.call(this,o,c,A,R,this.xCellCount*Ce+ce,P,L,j))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,c,A,R,C,P){const L=R-o,j=C-c,Z=A+P;return Z*Z>L*L+j*j}_circleAndRectCollide(o,c,A,R,C,P,L){const j=(P-R)/2,Z=Math.abs(o-(R+j));if(Z>j+A)return!1;const K=(L-C)/2,te=Math.abs(c-(C+K));if(te>K+A)return!1;if(Z<=j||te<=K)return!0;const ae=Z-j,ce=te-K;return ae*ae+ce*ce<=A*A}}const Fo={unknown:0,flipRequired:1,flipNotRequired:2},du=Math.tan(85*Math.PI/180);function Rs(g,o,c,A,R,C,P){const L=n.ad.mat4.create();if(c)if(C.name==="globe"){const j=n.bo(R,o);n.ad.mat4.multiply(L,L,j)}else{const j=n.ad.mat2.invert([],P);L[0]=j[0],L[1]=j[1],L[4]=j[2],L[5]=j[3],A||n.ad.mat4.rotateZ(L,L,R.angle)}else n.ad.mat4.multiply(L,R.labelPlaneMatrix,g);return L}function Li(g,o,c,A,R,C,P){const L=Rs(g,o,c,A,R,C,P);return C.name==="globe"&&c||(L[2]=L[6]=L[10]=L[14]=0),L}function Ci(g,o,c,A,R,C,P){if(c){if(C.name==="globe"){const L=Rs(g,o,c,A,R,C,P);return n.ad.mat4.invert(L,L),n.ad.mat4.multiply(L,g,L),L}{const L=n.ad.mat4.clone(g),j=n.ad.mat4.identity([]);return j[0]=P[0],j[1]=P[1],j[4]=P[2],j[5]=P[3],n.ad.mat4.multiply(L,L,j),A||n.ad.mat4.rotateZ(L,L,-R.angle),L}}return R.glCoordMatrix}function uo(g,o,c,A){const R=[g,o,c,1];c?n.ad.vec4.transformMat4(R,R,A):Gi(R,R,A);const C=R[3];return R[0]/=C,R[1]/=C,R[2]/=C,R}function _d(g,o){return Math.min(.5+g/o*.5,1.5)}function ah(g,o){const c=g[0]/g[3],A=g[1]/g[3];return c>=-o[0]&&c<=o[0]&&A>=-o[1]&&A<=o[1]}function oc(g,o,c,A,R,C,P,L,j,Z){const K=c.transform,te=A?g.textSizeData:g.iconSizeData,ae=n.bp(te,c.transform.zoom),ce=K.projection.name==="globe",Ce=[256/c.width*2+1,256/c.height*2+1],Re=A?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Re.clear();let Pe=null;ce&&(Pe=A?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const Ne=g.lineVertexArray,Ge=A?g.text.placedSymbolArray:g.icon.placedSymbolArray,et=c.transform.width/c.transform.height;let Xe,ct=!1;for(let nt=0;nt<Ge.length;nt++){const it=Ge.get(nt),{numGlyphs:st,writingMode:yt}=it;if(yt!==n.bq.vertical||ct||Xe===n.bq.horizontal||(ct=!0),Xe=yt,(it.hidden||yt===n.bq.vertical)&&!ct){Xo(st,Re);continue}ct=!1;const wt=new n.P(it.tileAnchorX,it.tileAnchorY);let{x:Yt,y:Lt,z:aa}=K.projection.projectTilePoint(wt.x,wt.y,Z.canonical);if(j){const[La,Pa,sr]=j(wt);Yt+=La,Lt+=Pa,aa+=sr}const ua=[Yt,Lt,aa,1];if(n.ad.vec4.transformMat4(ua,ua,o),!ah(ua,Ce)){Xo(st,Re);continue}const Sa=ua[3],Mt=_d(c.transform.getCameraToCenterDistance(K.projection),Sa),ia=n.br(te,ae,it),Nt=P?ia/Mt:ia*Mt,sa=uo(Yt,Lt,aa,R);if(sa[3]<=0){Xo(st,Re);continue}let Qt={};const da=n.ak(g.layers[0].layout.get("text-max-angle")),$t=Math.cos(da),pa=P?null:j,Ia=us(it,Nt,!1,L,o,R,C,g.glyphOffsetArray,Ne,Re,Pe,sa,wt,Qt,et,pa,K.projection,Z,P,$t);ct=Ia.useVertical,pa&&Ia.needsFlipping&&(Qt={}),(Ia.notEnoughRoom||ct||Ia.needsFlipping&&us(it,Nt,!0,L,o,R,C,g.glyphOffsetArray,Ne,Re,Pe,sa,wt,Qt,et,pa,K.projection,Z,P,$t).notEnoughRoom)&&Xo(st,Re)}A?(g.text.dynamicLayoutVertexBuffer.updateData(Re),Pe&&g.text.globeExtVertexBuffer&&g.text.globeExtVertexBuffer.updateData(Pe)):(g.icon.dynamicLayoutVertexBuffer.updateData(Re),Pe&&g.icon.globeExtVertexBuffer&&g.icon.globeExtVertexBuffer.updateData(Pe))}function lc(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe){const{lineStartIndex:Ne,glyphStartIndex:Ge,segment:et}=L,Xe=Ge+L.numGlyphs,ct=Ne+L.lineLength,nt=o.getoffsetX(Ge),it=o.getoffsetX(Xe-1),st=Rl(g*nt,c,A,R,C,P,et,Ne,ct,j,Z,K,te,ae,!0,ce,Ce,Re,Pe);if(!st)return null;const yt=Rl(g*it,c,A,R,C,P,et,Ne,ct,j,Z,K,te,ae,!0,ce,Ce,Re,Pe);return yt?{first:st,last:yt}:null}function Yo(g,o,c,A){return g===n.bq.horizontal&&Math.abs(A)>Math.abs(c)?{useVertical:!0}:g===n.bq.vertical?A>0?{needsFlipping:!0}:null:o!==Fo.unknown&&function(R,C){return R===0||Math.abs(C/R)>du}(c,A)?o===Fo.flipRequired?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function us(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe,Ne,Ge,et){const Xe=o/24,ct=g.lineOffsetX*Xe,nt=g.lineOffsetY*Xe,{lineStartIndex:it,glyphStartIndex:st,numGlyphs:yt,segment:wt,writingMode:Yt,flipState:Lt}=g,aa=it+g.lineLength,ua=Sa=>{if(K){const[sa,Qt,da]=Sa.up,$t=Z.length;n.bs(K,$t+0,sa,Qt,da),n.bs(K,$t+1,sa,Qt,da),n.bs(K,$t+2,sa,Qt,da),n.bs(K,$t+3,sa,Qt,da)}const[Mt,ia,Nt]=Sa.point;n.bt(Z,Mt,ia,Nt,Sa.angle)};if(yt>1){const Sa=lc(Xe,L,ct,nt,c,te,ae,g,j,C,ce,Re,!1,Pe,Ne,Ge,et);if(!Sa)return{notEnoughRoom:!0};if(A&&!c){let[Mt,ia,Nt]=Sa.first.point,[sa,Qt,da]=Sa.last.point;[Mt,ia]=uo(Mt,ia,Nt,P),[sa,Qt]=uo(sa,Qt,da,P);const $t=Yo(Yt,Lt,(sa-Mt)*Ce,Qt-ia);if(g.flipState=$t&&$t.needsFlipping?Fo.flipRequired:Fo.flipNotRequired,$t)return $t}ua(Sa.first);for(let Mt=st+1;Mt<st+yt-1;Mt++){const ia=Rl(Xe*L.getoffsetX(Mt),ct,nt,c,te,ae,wt,it,aa,j,C,ce,Re,!1,!1,Pe,Ne,Ge,et);if(!ia)return Z.length-=4*(Mt-st),{notEnoughRoom:!0};ua(ia)}ua(Sa.last)}else{if(A&&!c){const Mt=uo(ae.x,ae.y,0,R),ia=it+wt+1,Nt=new n.P(j.getx(ia),j.gety(ia)),sa=uo(Nt.x,Nt.y,0,R),Qt=sa[3]>0?sa:Ts(ae,Nt,Mt,1,R,void 0,Pe,Ne.canonical),da=Yo(Yt,Lt,(Qt[0]-Mt[0])*Ce,Qt[1]-Mt[1]);if(g.flipState=da&&da.needsFlipping?Fo.flipRequired:Fo.flipNotRequired,da)return da}const Sa=Rl(Xe*L.getoffsetX(st),ct,nt,c,te,ae,wt,it,aa,j,C,ce,Re,!1,!1,Pe,Ne,Ge,et);if(!Sa)return{notEnoughRoom:!0};ua(Sa)}return{}}function ku(g,o,c,A,R){const{x:C,y:P,z:L}=A.projectTilePoint(g.x,g.y,o);if(!R)return uo(C,P,L,c);const[j,Z,K]=R(g);return uo(C+j,P+Z,L+K,c)}function Ts(g,o,c,A,R,C,P,L){const j=ku(g.sub(o)._unit()._add(g),L,R,P,C);return n.ad.vec3.sub(j,c,j),n.ad.vec3.normalize(j,j),n.ad.vec3.scaleAndAdd(j,c,j,A)}function Rl(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe,Ne,Ge){const et=A?g-o:g+o;let Xe=et>0?1:-1,ct=0;A&&(Xe*=-1,ct=Math.PI),Xe<0&&(ct+=Math.PI);let nt=L+P+(Xe>0?0:1)|0,it=R,st=R,yt=0,wt=0;const Yt=Math.abs(et),Lt=[],aa=[];let ua=C,Sa=ua,Mt=n.ad.vec3.zero([]);const ia=()=>Ts(Sa,ua,st,Yt-yt+1,K,ae,Re,Pe.canonical);for(;yt+wt<=Yt;){if(nt+=Xe,nt<L||nt>=j)return null;if(st=it,Sa=ua,Lt.push(st),ce&&aa.push(Sa),ua=new n.P(Z.getx(nt),Z.gety(nt)),it=te[nt],!it){const sr=ku(ua,Pe.canonical,K,Re,ae);it=sr[3]>0?te[nt]=sr:ia()}yt+=wt;const La=n.ad.vec3.sub([],it,st),Pa=n.ad.vec3.distance(st,it);if(c&&Pa>0&&wt>0&&n.ad.vec3.dot(Mt,La)/(wt*Pa)<Ge)return null;wt=Pa,Mt=La}Ce&&ae&&(te[nt]&&(it=ia(),wt=n.ad.vec3.distance(st,it),Mt=n.ad.vec3.sub([],it,st)),te[nt]=it);const Nt=(Yt-yt)/wt,sa=ua.sub(Sa)._mult(Nt)._add(Sa),Qt=n.ad.vec3.scaleAndAdd([],st,Mt,Nt);let da=[0,0,1],$t=Mt[0],pa=Mt[1];if(Ne&&(da=Re.upVector(Pe.canonical,sa.x,sa.y),da[0]!==0||da[1]!==0||da[2]!==1)){const La=[da[2],0,-da[0]],Pa=n.ad.vec3.cross([],da,La);n.ad.vec3.normalize(La,La),n.ad.vec3.normalize(Pa,Pa),$t=n.ad.vec3.dot(Mt,La),pa=n.ad.vec3.dot(Mt,Pa)}if(c){const La=n.ad.vec3.cross([],da,Mt);n.ad.vec3.normalize(La,La),n.ad.vec3.scaleAndAdd(Qt,Qt,La,c*Xe)}const Ia=ct+Math.atan2(pa,$t);return Lt.push(Qt),ce&&aa.push(sa),{point:Qt,angle:Ia,path:Lt,tilePath:aa,up:da}}function Xo(g,o){const c=o.length,A=c+4*g;o.resize(A),o.float32.fill(-1/0,4*c,4*A)}function Gi(g,o,c){const A=o[0],R=o[1];return g[0]=c[0]*A+c[4]*R+c[12],g[1]=c[1]*A+c[5]*R+c[13],g[3]=c[3]*A+c[7]*R+c[15],g}const Gs=100;class jl{constructor(o,c,A=new ln(o.width+200,o.height+200,25),R=new ln(o.width+200,o.height+200,25)){this.transform=o,this.grid=A,this.ignoredGrid=R,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Gs,this.screenBottomBoundary=o.height+Gs,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=c}placeCollisionBox(o,c,A,R,C,P,L,j){let Z=A.projectedAnchorX,K=A.projectedAnchorY,te=A.projectedAnchorZ;const ae=A.elevation,ce=A.tileID,Ce=o.getProjection();if(ae&&ce){const[nt,it,st]=Ce.upVector(ce.canonical,A.tileAnchorX,A.tileAnchorY),yt=Ce.upVectorScale(ce.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Z+=nt*ae*yt,K+=it*ae*yt,te+=st*ae*yt}const Re=this.projectAndGetPerspectiveRatio(L,Z,K,te,A.tileID,Ce.name==="globe"||!!ae||this.transform.pitch>0,Ce),Pe=P*Re.perspectiveRatio,Ne=(A.x1*c+R.x-A.padding)*Pe+Re.point.x,Ge=(A.y1*c+R.y-A.padding)*Pe+Re.point.y,et=(A.x2*c+R.x+A.padding)*Pe+Re.point.x,Xe=(A.y2*c+R.y+A.padding)*Pe+Re.point.y,ct=Re.perspectiveRatio<=.55||Re.occluded;return!this.isInsideGrid(Ne,Ge,et,Xe)||!C&&this.grid.hitTest(Ne,Ge,et,Xe,j)||ct?{box:[],offscreen:!1,occluded:Re.occluded}:{box:[Ne,Ge,et,Xe],offscreen:this.isOffscreen(Ne,Ge,et,Xe),occluded:!1}}placeCollisionCircles(o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re){const Pe=[],Ne=this.transform.elevation,Ge=o.getProjection(),et=Ne?Ne.getAtTileOffsetFunc(Re,this.transform.center.lat,this.transform.worldSize,Ge):null,Xe=new n.P(A.tileAnchorX,A.tileAnchorY);let{x:ct,y:nt,z:it}=Ge.projectTilePoint(Xe.x,Xe.y,Re.canonical);if(et){const[da,$t,pa]=et(Xe);ct+=da,nt+=$t,it+=pa}const st=Ge.name==="globe",yt=this.projectAndGetPerspectiveRatio(L,ct,nt,it,Re,st||!!Ne||this.transform.pitch>0,Ge),{perspectiveRatio:wt}=yt,Yt=(te?P/wt:P*wt)/n.bw,Lt=uo(ct,nt,it,j),aa=A.lineOffsetX*Yt,ua=A.lineOffsetY*Yt,Sa=n.ak(o.layers[0].layout.get("text-max-angle")),Mt=Math.cos(Sa),ia=yt.signedDistanceFromCamera>0?lc(Yt,C,aa,ua,!1,Lt,Xe,A,R,j,{},Ne&&!te?et:null,te&&!!Ne,Ge,Re,te,Mt):null;let Nt=!1,sa=!1,Qt=!0;if(ia&&!yt.occluded){const da=.5*ce*wt+Ce,$t=new n.P(-100,-100),pa=new n.P(this.screenRightBoundary,this.screenBottomBoundary),Ia=new Ad,{first:La,last:Pa}=ia,sr=La.path.length;let Lr=[];for(let Cr=sr-1;Cr>=1;Cr--)Lr.push(La.path[Cr]);for(let Cr=1;Cr<Pa.path.length;Cr++)Lr.push(Pa.path[Cr]);const pr=2.5*da;Z&&(Lr=Lr.map(([Cr,xr,Fr],Mr)=>(et&&!st&&(Fr=et(Mr<sr-1?La.tilePath[sr-1-Mr]:Pa.tilePath[Mr-sr+2])[2]),uo(Cr,xr,Fr,Z))),Lr.some(Cr=>Cr[3]<=0)&&(Lr=[]));let zr=[];if(Lr.length>0){let Cr=1/0,xr=-1/0,Fr=1/0,Mr=-1/0;for(const dr of Lr)Cr=Math.min(Cr,dr[0]),Fr=Math.min(Fr,dr[1]),xr=Math.max(xr,dr[0]),Mr=Math.max(Mr,dr[1]);xr>=$t.x&&Cr<=pa.x&&Mr>=$t.y&&Fr<=pa.y&&(zr=[Lr.map(dr=>new n.P(dr[0],dr[1]))],(Cr<$t.x||xr>pa.x||Fr<$t.y||Mr>pa.y)&&(zr=n.bu(zr,$t.x,$t.y,pa.x,pa.y)))}for(const Cr of zr){Ia.reset(Cr,.25*da);let xr=0;xr=Ia.length<=.5*da?1:Math.ceil(Ia.paddedLength/pr)+1;for(let Fr=0;Fr<xr;Fr++){const Mr=Fr/Math.max(xr-1,1),dr=Ia.lerp(Mr),nn=dr.x+Gs,Tr=dr.y+Gs;Pe.push(nn,Tr,da,0);const er=nn-da,sn=Tr-da,qn=nn+da,un=Tr+da;if(Qt=Qt&&this.isOffscreen(er,sn,qn,un),sa=sa||this.isInsideGrid(er,sn,qn,un),!c&&this.grid.hitTestCircle(nn,Tr,da,ae)&&(Nt=!0,!K))return{circles:[],offscreen:!1,collisionDetected:Nt,occluded:!1}}}}return{circles:!K&&Nt||!sa?[]:Pe,offscreen:Qt,collisionDetected:Nt,occluded:yt.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let A=1/0,R=1/0,C=-1/0,P=-1/0;for(const K of o){const te=new n.P(K.x+Gs,K.y+Gs);A=Math.min(A,te.x),R=Math.min(R,te.y),C=Math.max(C,te.x),P=Math.max(P,te.y),c.push(te)}const L=this.grid.query(A,R,C,P).concat(this.ignoredGrid.query(A,R,C,P)),j={},Z={};for(const K of L){const te=K.key;if(j[te.bucketInstanceId]===void 0&&(j[te.bucketInstanceId]={}),j[te.bucketInstanceId][te.featureIndex])continue;const ae=[new n.P(K.x1,K.y1),new n.P(K.x2,K.y1),new n.P(K.x2,K.y2),new n.P(K.x1,K.y2)];n.bv(c,ae)&&(j[te.bucketInstanceId][te.featureIndex]=!0,Z[te.bucketInstanceId]===void 0&&(Z[te.bucketInstanceId]=[]),Z[te.bucketInstanceId].push(te.featureIndex))}return Z}insertCollisionBox(o,c,A,R,C){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:A,featureIndex:R,collisionGroupID:C},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,c,A,R,C){const P=c?this.ignoredGrid:this.grid,L={bucketInstanceId:A,featureIndex:R,collisionGroupID:C};for(let j=0;j<o.length;j+=4)P.insertCircle(L,o[j],o[j+1],o[j+2])}projectAndGetPerspectiveRatio(o,c,A,R,C,P,L){const j=[c,A,R,1];let Z=!1;R||this.transform.pitch>0?(n.ad.vec4.transformMat4(j,j,o),this.fogState&&C&&L.name!=="globe"&&(Z=function(ae,ce,Ce,Re,Pe,Ne){const Ge=Ne.calculateFogTileMatrix(Pe),et=[ce,Ce,Re];return n.ad.vec3.transformMat4(et,et,Ge),Ba(ae,n.ad.vec3.length(et),Ne.pitch,Ne._fov)}(this.fogState,c,A,R,C.toUnwrapped(),this.transform)>.9)):Gi(j,j,o);const K=j[3];return{point:new n.P((j[0]/K+1)/2*this.transform.width+Gs,(-j[1]/K+1)/2*this.transform.height+Gs),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(L)/K*.5,1.5),signedDistanceFromCamera:K,occluded:P&&j[2]>K||Z}}isOffscreen(o,c,A,R){return A<Gs||o>=this.screenRightBoundary||R<Gs||c>this.screenBottomBoundary}isInsideGrid(o,c,A,R){return A>=0&&o<this.gridRightBoundary&&R>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const o=n.ad.mat4.identity([]);return n.ad.mat4.translate(o,o,[-100,-100,0]),o}}function rs(g,o,c){const A=o.createTileMatrix(g,g.worldSize,c.toUnwrapped());return n.ad.mat4.multiply(new Float32Array(16),g.projMatrix,A)}function Nh(g,o,c){if(o.projection.name===c.projection.name)return g.projMatrix;const A=c.clone();return A.setProjection(o.projection),rs(A,o.getProjection(),g)}function Uo(g,o,c){return o.name===c.projection.name?g.projMatrix:rs(c,o,g)}class vd{constructor(o,c,A,R){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?c:-c))):R&&A?1:0,this.placed=A}isHidden(){return this.opacity===0&&!this.placed}}class hu{constructor(o,c,A,R,C,P=!1){this.text=new vd(o?o.text:null,c,A,C),this.icon=new vd(o?o.icon:null,c,R,C),this.clipped=P}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class fu{constructor(o,c,A,R=!1){this.text=o,this.icon=c,this.skipFade=A,this.clipped=R}}class jf{constructor(){this.invProjMatrix=n.ad.mat4.create(),this.viewportMatrix=n.ad.mat4.create(),this.circles=[]}}class Zl{constructor(o,c,A,R,C){this.bucketInstanceId=o,this.featureIndex=c,this.sourceLayerIndex=A,this.bucketIndex=R,this.tileID=C}}class Om{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const c=++this.maxGroupID;this.collisionGroups[o]={ID:c,predicate:A=>A.collisionGroupID===c}}return this.collisionGroups[o]}}function wd(g,o,c,A,R){const{horizontalAlign:C,verticalAlign:P}=n.bD(g),L=-(C-.5)*o,j=-(P-.5)*c,Z=n.bC(g,A);return new n.P(L+Z[0]*R,j+Z[1]*R)}function js(g,o,c,A,R){const C=new n.P(g,o);return c&&C._rotate(A?R:-R),C}class df{constructor(o,c,A,R,C,P){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new jl(this.transform,C),this.buildingIndex=P,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Om(A),this.collisionCircleArrays={},this.prevPlacement=R,R&&(R.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,c,A,R,C=1){const P=A.getBucket(c),L=A.latestFeatureIndex;if(!P||!L||c.fqid!==P.layerIds[0])return;const j=P.layers[0].layout,Z=P.layers[0].paint,K=A.collisionBoxArray,te=Math.pow(2,this.transform.zoom-A.tileID.overscaledZ),ae=A.tileSize/n.ai,ce=A.tileID.toUnwrapped();this.transform.setProjection(P.projection);const Ce=(Re=A.tileID,Pe=P.getProjection(),Ne=this.transform,Pe.name===this.projection?Ne.calculateProjMatrix(Re.toUnwrapped()):rs(Ne,Pe,Re));var Re,Pe,Ne;const Ge=j.get("text-pitch-alignment")==="map",et=j.get("text-rotation-alignment")==="map";c.compileFilter(c.options);const Xe=c.dynamicFilter(),ct=c.dynamicFilterNeedsFeature(),nt=this.transform.calculatePixelsToTileUnitsMatrix(A),it=Li(Ce,A.tileID.canonical,Ge,et,this.transform,P.getProjection(),nt);let st=null;if(Ge){const ia=Ci(Ce,A.tileID.canonical,Ge,et,this.transform,P.getProjection(),nt);st=n.ad.mat4.multiply([],this.transform.labelPlaneMatrix,ia)}let yt=null;Xe&&A.latestFeatureIndex&&(yt={unwrappedTileID:ce,dynamicFilter:Xe,dynamicFilterNeedsFeature:ct}),this.retainedQueryData[P.bucketInstanceId]=new Zl(P.bucketInstanceId,L,P.sourceLayerIndex,P.index,A.tileID);const[wt,Yt]=P.layers[0].layout.get("text-size-scale-range"),Lt=n.ay(C,wt,Yt),[aa,ua]=j.get("icon-size-scale-range"),Sa=n.ay(C,aa,ua),Mt={bucket:P,layout:j,paint:Z,posMatrix:Ce,textLabelPlaneMatrix:it,labelToScreenMatrix:st,clippingData:yt,scale:te,textPixelRatio:ae,holdingForFade:A.holdingForFade(),collisionBoxArray:K,partiallyEvaluatedTextSize:n.bp(P.textSizeData,this.transform.zoom,Lt),partiallyEvaluatedIconSize:n.bp(P.iconSizeData,this.transform.zoom,Sa),collisionGroup:this.collisionGroups.get(P.sourceID),latestFeatureIndex:A.latestFeatureIndex};if(R)for(const ia of P.sortKeyRanges){const{sortKey:Nt,symbolInstanceStart:sa,symbolInstanceEnd:Qt}=ia;o.push({sortKey:Nt,symbolInstanceStart:sa,symbolInstanceEnd:Qt,parameters:Mt})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:P.symbolInstances.length,parameters:Mt})}attemptAnchorPlacement(o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe,Ne,Ge){const{textOffset0:et,textOffset1:Xe,crossTileID:ct}=ae,nt=[et,Xe],it=wd(o,A,R,nt,C),st=this.collisionIndex.placeCollisionBox(Ce,C,c,js(it.x,it.y,P,L,this.transform.angle),te,j,Z,K.predicate);if(Pe){const yt=Ce.getSymbolInstanceIconSize(Ge,this.transform.zoom,ae.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Ce,yt,Pe,js(it.x,it.y,P,L,this.transform.angle),te,j,Z,K.predicate).box.length===0)return}if(st.box.length>0){let yt;return this.prevPlacement&&this.prevPlacement.variableOffsets[ct]&&this.prevPlacement.placements[ct]&&this.prevPlacement.placements[ct].text&&(yt=this.prevPlacement.variableOffsets[ct].anchor),this.variableOffsets[ct]={textOffset:nt,width:A,height:R,anchor:o,textScale:C,prevAnchor:yt},this.markUsedJustification(Ce,o,ae,Re),Ce.allowVerticalPlacement&&(this.markUsedOrientation(Ce,Re,ae),this.placedOrientations[ct]=Re),{shift:it,placedGlyphBoxes:st}}}placeLayerBucketPart(o,c,A,R,C=1){const{bucket:P,layout:L,paint:j,posMatrix:Z,textLabelPlaneMatrix:K,labelToScreenMatrix:te,clippingData:ae,textPixelRatio:ce,holdingForFade:Ce,collisionBoxArray:Re,partiallyEvaluatedTextSize:Pe,partiallyEvaluatedIconSize:Ne,collisionGroup:Ge,latestFeatureIndex:et}=o.parameters,Xe=L.get("text-optional"),ct=L.get("icon-optional"),nt=L.get("text-allow-overlap"),it=L.get("icon-allow-overlap"),st=L.get("text-rotation-alignment")==="map",yt=L.get("text-pitch-alignment")==="map",wt=j.get("symbol-z-offset"),Yt=L.get("symbol-elevation-reference")==="sea",[Lt,aa]=L.get("text-size-scale-range"),[ua,Sa]=L.get("icon-size-scale-range"),Mt=n.ay(C,Lt,aa),ia=n.ay(C,ua,Sa);this.transform.setProjection(P.projection);let Nt=nt&&(it||!P.hasIconData()||ct),sa=it&&(nt||!P.hasTextData()||Xe);const Qt=!wt.isConstant();!P.collisionArrays&&Re&&P.deserializeCollisionBoxes(Re),A&&R&&P.updateCollisionDebugBuffers(this.transform.zoom,Re,Mt,ia);const da=($t,pa,Ia)=>{const{crossTileID:La,numVerticalGlyphVertices:Pa}=$t;let sr=null;if(ae&&ae.dynamicFilterNeedsFeature||Qt){const Cn=this.retainedQueryData[P.bucketInstanceId];sr=et.loadFeature({featureIndex:$t.featureIndex,bucketIndex:Cn.bucketIndex,sourceLayerIndex:Cn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(ae&&!(0,ae.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},sr,this.retainedQueryData[P.bucketInstanceId].tileID.canonical,new n.P($t.tileAnchorX,$t.tileAnchorY),this.transform.calculateDistanceTileData(ae.unwrappedTileID)))return this.placements[La]=new fu(!1,!1,!1,!0),void c.add(La);const Lr=wt.evaluate(sr,{});if(c.has(La))return;if(Ce)return void(this.placements[La]=new fu(!1,!1,!1));let pr=!1,zr=!1,Cr=!0,xr=!1,Fr=!1,Mr=null,dr={box:null,offscreen:null,occluded:null},nn={box:null},Tr=null,er=null,sn=null,qn=0,un=0,Vn=0;Ia.textFeatureIndex?qn=Ia.textFeatureIndex:$t.useRuntimeCollisionCircles&&(qn=$t.featureIndex),Ia.verticalTextFeatureIndex&&(un=Ia.verticalTextFeatureIndex);const Ki=Cn=>{Cn.tileID=this.retainedQueryData[P.bucketInstanceId].tileID;const ni=this.transform.elevation;Cn.elevation=Yt?Lr:Lr+(ni?ni.getAtTileOffset(Cn.tileID,Cn.tileAnchorX,Cn.tileAnchorY):0),Cn.elevation+=$t.zOffset},hs=Ia.textBox;if(hs){Ki(hs);const Cn=On=>{let oi=n.bq.horizontal;if(P.allowVerticalPlacement&&!On&&this.prevPlacement){const yo=this.prevPlacement.placedOrientations[La];yo&&(this.placedOrientations[La]=yo,oi=yo,this.markUsedOrientation(P,oi,$t))}return oi},ni=(On,oi)=>{if(P.allowVerticalPlacement&&Pa>0&&Ia.verticalTextBox){for(const yo of P.writingModes)if(yo===n.bq.vertical?(dr=oi(),nn=dr):dr=On(),dr&&dr.box&&dr.box.length)break}else dr=On()};if(L.get("text-variable-anchor")){let On=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[La]){const Ri=this.prevPlacement.variableOffsets[La];On.indexOf(Ri.anchor)>0&&(On=On.filter(ss=>ss!==Ri.anchor),On.unshift(Ri.anchor))}const oi=(Ri,ss,Tc)=>{const Zo=P.getSymbolInstanceTextSize(Pe,$t,this.transform.zoom,pa),eu=(Ri.x2-Ri.x1)*Zo+2*Ri.padding,zl=(Ri.y2-Ri.y1)*Zo+2*Ri.padding,Yu=$t.hasIconTextFit&&!it?ss:null;Yu&&Ki(Yu);let gl={box:[],offscreen:!1,occluded:!1};const kd=nt?2*On.length:On.length;for(let go=0;go<kd;++go){const Ah=this.attemptAnchorPlacement(On[go%On.length],Ri,eu,zl,Zo,st,yt,ce,Z,Ge,go>=On.length,$t,pa,P,Tc,Yu,Pe,Ne);if(Ah&&(gl=Ah.placedGlyphBoxes,gl&&gl.box&&gl.box.length)){pr=!0,Mr=Ah.shift;break}}return gl};ni(()=>oi(hs,Ia.iconBox,n.bq.horizontal),()=>{const Ri=Ia.verticalTextBox;return Ri&&Ki(Ri),P.allowVerticalPlacement&&!(dr&&dr.box&&dr.box.length)&&Pa>0&&Ri?oi(Ri,Ia.verticalIconBox,n.bq.vertical):{box:null,offscreen:null,occluded:null}}),dr&&(pr=dr.box,Cr=dr.offscreen,xr=dr.occluded);const yo=Cn(!(!dr||!dr.box));if(!pr&&this.prevPlacement){const Ri=this.prevPlacement.variableOffsets[La];Ri&&(this.variableOffsets[La]=Ri,this.markUsedJustification(P,Ri.anchor,$t,yo))}}else{const On=(oi,yo)=>{const Ri=P.getSymbolInstanceTextSize(Pe,$t,this.transform.zoom,pa,C),ss=this.collisionIndex.placeCollisionBox(P,Ri,oi,new n.P(0,0),nt,ce,Z,Ge.predicate);return ss&&ss.box&&ss.box.length&&(this.markUsedOrientation(P,yo,$t),this.placedOrientations[La]=yo),ss};ni(()=>On(hs,n.bq.horizontal),()=>{const oi=Ia.verticalTextBox;return P.allowVerticalPlacement&&Pa>0&&oi?(Ki(oi),On(oi,n.bq.vertical)):{box:null,offscreen:null,occluded:null}}),Cn(!!(dr&&dr.box&&dr.box.length))}}if(Tr=dr,pr=Tr&&Tr.box&&Tr.box.length>0,Cr=Tr&&Tr.offscreen,xr=Tr&&Tr.occluded,$t.useRuntimeCollisionCircles){const Cn=P.text.placedSymbolArray.get($t.centerJustifiedTextSymbolIndex>=0?$t.centerJustifiedTextSymbolIndex:$t.verticalPlacedTextSymbolIndex),ni=n.br(P.textSizeData,Pe,Cn),On=L.get("text-padding");er=this.collisionIndex.placeCollisionCircles(P,nt,Cn,P.lineVertexArray,P.glyphOffsetArray,ni,Z,K,te,A,yt,Ge.predicate,$t.collisionCircleDiameter*ni/n.bw,On,this.retainedQueryData[P.bucketInstanceId].tileID),pr=nt||er.circles.length>0&&!er.collisionDetected,Cr=Cr&&er.offscreen,xr=er.occluded}if(Ia.iconFeatureIndex&&(Vn=Ia.iconFeatureIndex),Ia.iconBox){const Cn=ni=>{Ki(ni);const On=$t.hasIconTextFit&&Mr?js(Mr.x,Mr.y,st,yt,this.transform.angle):new n.P(0,0),oi=P.getSymbolInstanceIconSize(Ne,this.transform.zoom,$t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(P,oi,ni,On,it,ce,Z,Ge.predicate)};nn&&nn.box&&nn.box.length&&Ia.verticalIconBox?(sn=Cn(Ia.verticalIconBox),zr=sn.box.length>0):(sn=Cn(Ia.iconBox),zr=sn.box.length>0),Cr=Cr&&sn.offscreen,Fr=sn.occluded}const ao=Xe||$t.numHorizontalGlyphVertices===0&&Pa===0,Ks=ct||$t.numIconVertices===0;if(ao||Ks?Ks?ao||(zr=zr&&pr):pr=zr&&pr:zr=pr=zr&&pr,pr&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,L.get("text-ignore-placement"),P.bucketInstanceId,nn&&nn.box&&un?un:qn,Ge.ID),zr&&sn&&this.collisionIndex.insertCollisionBox(sn.box,L.get("icon-ignore-placement"),P.bucketInstanceId,Vn,Ge.ID),er&&(pr&&this.collisionIndex.insertCollisionCircles(er.circles,L.get("text-ignore-placement"),P.bucketInstanceId,qn,Ge.ID),A)){const Cn=P.bucketInstanceId;let ni=this.collisionCircleArrays[Cn];ni===void 0&&(ni=this.collisionCircleArrays[Cn]=new jf);for(let On=0;On<er.circles.length;On+=4)ni.circles.push(er.circles[On+0]),ni.circles.push(er.circles[On+1]),ni.circles.push(er.circles[On+2]),ni.circles.push(er.collisionDetected?1:0)}const mo=P.projection.name!=="globe";Nt=Nt&&(mo||!xr),sa=sa&&(mo||!Fr),this.placements[La]=new fu(pr||Nt,zr||sa,Cr||P.justReloaded),c.add(La)};if(P.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(P,this.retainedQueryData[P.bucketInstanceId].tileID),P.elevationType==="road"&&P.updateRoadElevation(),P.updateZOffset(),P.sortFeaturesByY){const $t=P.getSortedSymbolIndexes(this.transform.angle);for(let pa=$t.length-1;pa>=0;--pa){const Ia=$t[pa];da(P.symbolInstances.get(Ia),Ia,P.collisionArrays[Ia])}P.hasAnyZOffset&&n.w(`${P.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(P.hasAnyZOffset){const $t=P.getSortedIndexesByZOffset();for(let pa=0;pa<$t.length;++pa){const Ia=$t[pa];da(P.symbolInstances.get(Ia),Ia,P.collisionArrays[Ia])}}else for(let $t=o.symbolInstanceStart;$t<o.symbolInstanceEnd;$t++)da(P.symbolInstances.get($t),$t,P.collisionArrays[$t]);if(A&&P.bucketInstanceId in this.collisionCircleArrays){const $t=this.collisionCircleArrays[P.bucketInstanceId];n.ad.mat4.invert($t.invProjMatrix,Z),$t.viewportMatrix=this.collisionIndex.getViewportMatrix()}P.justReloaded=!1}markUsedJustification(o,c,A,R){const{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:P,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:j,crossTileID:Z}=A,K=n.bB(c),te=R===n.bq.vertical?j:K==="left"?C:K==="center"?P:K==="right"?L:-1;C>=0&&(o.text.placedSymbolArray.get(C).crossTileID=te>=0&&C!==te?0:Z),P>=0&&(o.text.placedSymbolArray.get(P).crossTileID=te>=0&&P!==te?0:Z),L>=0&&(o.text.placedSymbolArray.get(L).crossTileID=te>=0&&L!==te?0:Z),j>=0&&(o.text.placedSymbolArray.get(j).crossTileID=te>=0&&j!==te?0:Z)}markUsedOrientation(o,c,A){const R=c===n.bq.horizontal||c===n.bq.horizontalOnly?c:0,C=c===n.bq.vertical?c:0,{leftJustifiedTextSymbolIndex:P,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:j,verticalPlacedTextSymbolIndex:Z}=A,K=o.text.placedSymbolArray;P>=0&&(K.get(P).placedOrientation=R),L>=0&&(K.get(L).placedOrientation=R),j>=0&&(K.get(j).placedOrientation=R),Z>=0&&(K.get(Z).placedOrientation=C)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let A=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const R=c?c.symbolFadeChange(o):1,C=c?c.opacities:{},P=c?c.variableOffsets:{},L=c?c.placedOrientations:{};for(const j in this.placements){const Z=this.placements[j],K=C[j];K?(this.opacities[j]=new hu(K,R,Z.text,Z.icon,null,Z.clipped),A=A||Z.text!==K.text.placed||Z.icon!==K.icon.placed):(this.opacities[j]=new hu(null,R,Z.text,Z.icon,Z.skipFade,Z.clipped),A=A||Z.text||Z.icon)}for(const j in C){const Z=C[j];if(!this.opacities[j]){const K=new hu(Z,R,!1,!1);K.isHidden()||(this.opacities[j]=K,A=A||Z.text.placed||Z.icon.placed)}}for(const j in P)this.variableOffsets[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.variableOffsets[j]=P[j]);for(const j in L)this.placedOrientations[j]||!this.opacities[j]||this.opacities[j].isHidden()||(this.placedOrientations[j]=L[j]);A?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:o)}updateLayerOpacities(o,c,A,R){const C=new Set;for(const P of c){const L=P.getBucket(o);L&&P.latestFeatureIndex&&o.fqid===L.layerIds[0]&&(this.updateBucketOpacities(L,C,P,P.collisionBoxArray,A,R,P.tileID,o.scope),L.elevationType==="offset"&&this.buildingIndex&&this.buildingIndex.updateZOffset(L,P.tileID),L.elevationType==="road"&&L.updateRoadElevation(),L.updateZOffset())}}updateBucketOpacities(o,c,A,R,C,P,L,j){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const Z=o.layers[0].layout,K=o.layers[0].paint,te=!!o.layers[0].dynamicFilter(),ae=new hu(null,0,!1,!1,!0),ce=Z.get("text-allow-overlap"),Ce=Z.get("icon-allow-overlap"),Re=Z.get("text-variable-anchor"),Pe=Z.get("text-rotation-alignment")==="map",Ne=Z.get("text-pitch-alignment")==="map",Ge=K.get("symbol-z-offset"),et=Z.get("symbol-elevation-reference")==="sea",Xe=!Ge.isConstant(),ct=new hu(null,0,ce&&(Ce||!o.hasIconData()||Z.get("icon-optional")),Ce&&(ce||!o.hasTextData()||Z.get("text-optional")),!0);!o.collisionArrays&&R&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(R);const nt=(st,yt,wt)=>{for(let Yt=0;Yt<yt/4;Yt++)st.opacityVertexArray.emplaceBack(wt)};let it=0;P&&o.updateReplacement(L,P);for(let st=0;st<o.symbolInstances.length;st++){const yt=o.symbolInstances.get(st),{numHorizontalGlyphVertices:wt,numVerticalGlyphVertices:Yt,crossTileID:Lt,numIconVertices:aa,tileAnchorX:ua,tileAnchorY:Sa}=yt;let Mt=null;const ia=this.retainedQueryData[o.bucketInstanceId];Xe&&yt&&ia&&(Mt=A.latestFeatureIndex.loadFeature({featureIndex:yt.featureIndex,bucketIndex:ia.bucketIndex,sourceLayerIndex:ia.sourceLayerIndex,layoutVertexArrayOffset:0}));const Nt=Ge.evaluate(Mt,{}),sa=c.has(Lt);let Qt=this.opacities[Lt];sa?Qt=ae:Qt||(Qt=ct,this.opacities[Lt]=Qt),c.add(Lt);const da=wt>0||Yt>0,$t=aa>0,pa=this.placedOrientations[Lt],Ia=pa===n.bq.vertical,La=pa===n.bq.horizontal||pa===n.bq.horizontalOnly;!da&&!$t||Qt.isHidden()||it++;let Pa=!1;if((da||$t)&&P)for(const sr of o.activeReplacements){if(n.bx(sr,C,n.by.Symbol,j)||sr.min.x>ua||ua>sr.max.x||sr.min.y>Sa||Sa>sr.max.y)continue;const Lr=n.bz(ua,Sa,L.canonical,sr.footprintTileId.canonical);if(Pa=n.bA(Lr,sr.footprint),Pa)break}if(da){const sr=Pa?wr:ar(Qt.text);nt(o.text,wt,Ia?wr:sr),nt(o.text,Yt,La?wr:sr);const Lr=Qt.text.isHidden(),{leftJustifiedTextSymbolIndex:pr,centerJustifiedTextSymbolIndex:zr,rightJustifiedTextSymbolIndex:Cr,verticalPlacedTextSymbolIndex:xr}=yt,Fr=o.text.placedSymbolArray,Mr=Lr||Ia?1:0;pr>=0&&(Fr.get(pr).hidden=Mr),zr>=0&&(Fr.get(zr).hidden=Mr),Cr>=0&&(Fr.get(Cr).hidden=Mr),xr>=0&&(Fr.get(xr).hidden=Lr||La?1:0);const dr=this.variableOffsets[Lt];dr&&this.markUsedJustification(o,dr.anchor,yt,pa);const nn=this.placedOrientations[Lt];nn&&(this.markUsedJustification(o,"left",yt,nn),this.markUsedOrientation(o,nn,yt))}if($t){const sr=Pa?wr:ar(Qt.icon),{placedIconSymbolIndex:Lr,verticalPlacedIconSymbolIndex:pr}=yt,zr=o.icon.placedSymbolArray,Cr=Qt.icon.isHidden()?1:0;Lr>=0&&(nt(o.icon,aa,Ia?wr:sr),zr.get(Lr).hidden=Cr),pr>=0&&(nt(o.icon,yt.numVerticalIconVertices,La?wr:sr),zr.get(pr).hidden=Cr)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const sr=o.collisionArrays[st];if(sr){let Lr=new n.P(0,0),pr=!0;if(sr.textBox||sr.verticalTextBox){if(Re){const Cr=this.variableOffsets[Lt];Cr?(Lr=wd(Cr.anchor,Cr.width,Cr.height,Cr.textOffset,Cr.textScale),Pe&&Lr._rotate(Ne?this.transform.angle:-this.transform.angle)):pr=!1}te&&(pr=!Qt.clipped),sr.textBox&&ql(o.textCollisionBox.collisionVertexArray,Qt.text.placed,!pr||Ia,Nt,et,Lr.x,Lr.y),sr.verticalTextBox&&ql(o.textCollisionBox.collisionVertexArray,Qt.text.placed,!pr||La,Nt,et,Lr.x,Lr.y)}const zr=pr&&!!(!La&&sr.verticalIconBox);sr.iconBox&&ql(o.iconCollisionBox.collisionVertexArray,Qt.icon.placed,zr,Nt,et,yt.hasIconTextFit?Lr.x:0,yt.hasIconTextFit?Lr.y:0),sr.verticalIconBox&&ql(o.iconCollisionBox.collisionVertexArray,Qt.icon.placed,!zr,Nt,et,yt.hasIconTextFit?Lr.x:0,yt.hasIconTextFit?Lr.y:0)}}}if(o.fullyClipped=it===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const st=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=st.invProjMatrix,o.placementViewportMatrix=st.viewportMatrix,o.collisionCircleArray=st.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,c){const A=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*A>o}setStale(){this.stale=!0}}function ql(g,o,c,A,R,C,P){g.emplaceBack(o?1:0,c?1:0,C||0,P||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,P||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,P||0,A,R?1:0),g.emplaceBack(o?1:0,c?1:0,C||0,P||0,A,R?1:0)}const hf=Math.pow(2,25),oe=Math.pow(2,24),$e=Math.pow(2,17),zt=Math.pow(2,16),Wt=Math.pow(2,9),ha=Math.pow(2,8),Da=Math.pow(2,1);function ar(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const o=g.placed?1:0,c=Math.floor(127*g.opacity);return c*hf+o*oe+c*$e+o*zt+c*Wt+o*ha+c*Da+o}const wr=0;class $r{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,c,A,R,C,P){const L=this._bucketParts;for(;this._currentTileIndex<o.length;)if(c.getBucketParts(L,R,o[this._currentTileIndex],this._sortAcrossTiles,P),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((j,Z)=>j.sortKey-Z.sortKey));this._currentPartIndex<L.length;){const j=L[this._currentPartIndex];if(c.placeLayerBucketPart(j,this._seenCrossTileIDs,A,j.symbolInstanceStart===0,P),this._currentPartIndex++,C())return!0}return!1}}class Sn{constructor(o,c,A,R,C,P,L,j,Z){this.placement=new df(o,C,P,L,j,Z),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=A,this._showCollisionBoxes=R,this._done=!1}isDone(){return this._done}continuePlacement(o,c,A,R,C){const P=n.q.now(),L=()=>{const j=n.q.now()-P;return!this._forceFullPlacement&&j>2};for(;this._currentPlacementIndex>=0;){const j=c[o[this._currentPlacementIndex]],Z=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=Z)&&(!j.maxzoom||j.maxzoom>Z)){const K=j,te=K.layout.get("symbol-z-elevate"),ae=K.layout.get("symbol-sort-key").constantOr(1)!==void 0,ce=K.layout.get("symbol-z-order"),Ce=ce==="viewport-y"||ce==="auto"&&!(ce!=="viewport-y"&&ae),Re=K.layout.get("text-allow-overlap")||K.layout.get("icon-allow-overlap")||K.layout.get("text-ignore-placement")||K.layout.get("icon-ignore-placement"),Pe=Ce&&Re,Ne=this._inProgressLayer=this._inProgressLayer||new $r(K),Ge=n.C(j.source,j.scope);if(Ne.continuePlacement(te||Pe?R[Ge]:A[Ge],this.placement,this._showCollisionBoxes,j,L,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Nn=512/n.ai/2;class pi{constructor(o,c,A){this.tileID=o,this.bucketInstanceId=A,this.index=new n.bE(c.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const R=o.canonical.x*n.ai,C=o.canonical.y*n.ai;for(let P=0;P<c.length;P++){const{key:L,crossTileID:j,tileAnchorX:Z,tileAnchorY:K}=c.get(P),te=Math.floor((R+Z)*Nn),ae=Math.floor((C+K)*Nn);this.index.add(te,ae),this.keys.push(L),this.crossTileIDs.push(j)}this.index.finish()}findMatches(o,c,A){const R=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),C=Nn/Math.pow(2,c.canonical.z-this.tileID.canonical.z),P=c.canonical.x*n.ai,L=c.canonical.y*n.ai;for(let j=0;j<o.length;j++){const Z=o.get(j);if(Z.crossTileID)continue;const{key:K,tileAnchorX:te,tileAnchorY:ae}=Z,ce=Math.floor((P+te)*C),Ce=Math.floor((L+ae)*C),Re=this.index.range(ce-R,Ce-R,ce+R,Ce+R);for(const Pe of Re){const Ne=this.crossTileIDs[Pe];if(this.keys[Pe]===K&&!A.has(Ne)){A.add(Ne),Z.crossTileID=Ne;break}}}}}class Ss{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Cs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const c=Math.round((o-this.lng)/360);if(c!==0)for(const A in this.indexes){const R=this.indexes[A],C={};for(const P in R){const L=R[P];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+c),C[L.tileID.key]=L}this.indexes[A]=C}this.lng=o}addBucket(o,c,A){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let C=0;C<c.symbolInstances.length;C++)c.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const R=this.usedCrossTileIDs[o.overscaledZ];for(const C in this.indexes){const P=this.indexes[C];if(Number(C)>o.overscaledZ)for(const L in P){const j=P[L];j.tileID.isChildOf(o)&&j.findMatches(c.symbolInstances,o,R)}else{const L=P[o.scaledTo(Number(C)).key];L&&L.findMatches(c.symbolInstances,o,R)}}for(let C=0;C<c.symbolInstances.length;C++){const P=c.symbolInstances.get(C);P.crossTileID||(P.crossTileID=A.generate(),R.add(P.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new pi(o,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(o,c){for(const A of c.crossTileIDs)this.usedCrossTileIDs[o].delete(A)}removeStaleBuckets(o){let c=!1;for(const A in this.indexes){const R=this.indexes[A];for(const C in R)o[R[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(A,R[C]),delete R[C],c=!0)}return c}}class Xs{constructor(){this.layerIndexes={},this.crossTileIDs=new Ss,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,c,A,R){let C=this.layerIndexes[o.fqid];C===void 0&&(C=this.layerIndexes[o.fqid]=new Cs);let P=!1;const L={};R.name!=="globe"&&C.handleWrapJump(A);for(const j of c){const Z=j.getBucket(o);Z&&o.fqid===Z.layerIds[0]&&(Z.bucketInstanceId||(Z.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(j.tileID,Z,this.crossTileIDs)&&(P=!0),L[Z.bucketInstanceId]=!0)}return C.removeStaleBuckets(L)&&(P=!0),P}pruneUnusedLayers(o){const c={};o.forEach(A=>{c[A]=!0});for(const A in this.layerIndexes)c[A]||delete this.layerIndexes[A]}}const Qi=771;class br{constructor(o,c,A,R){this.blendFunction=o,this.blendColor=c,this.mask=A,this.blendEquation=R}}br.Replace=[1,0,1,0],br.disabled=new br(br.Replace,n.al.transparent,[!1,!1,!1,!1]),br.unblended=new br(br.Replace,n.al.transparent,[!0,!0,!0,!0]),br.alphaBlended=new br([1,Qi,1,Qi],n.al.transparent,[!0,!0,!0,!0]),br.alphaBlendedNonPremultiplied=new br([770,Qi,770,Qi],n.al.transparent,[!0,!0,!0,!0]),br.multiply=new br([774,0,774,0],n.al.transparent,[!0,!0,!0,!0]);class ir{constructor(o,c,A){this.func=o,this.mask=c,this.range=A}}ir.ReadOnly=!1,ir.ReadWrite=!0,ir.disabled=new ir(519,ir.ReadOnly,[0,1]);const cl=7680;class Rr{constructor(o,c,A,R,C,P){this.test=o,this.ref=c,this.mask=A,this.fail=R,this.depthFail=C,this.pass=P}}Rr.disabled=new Rr({func:519,mask:0},0,0,cl,cl,cl);const pu=1029,Hl=2305;class _r{constructor(o,c,A){this.enable=o,this.mode=c,this.frontFace=A}}function rh(g,o){const c=n.bG(g,3);n.ad.mat4.fromQuat(g,o),n.bI(g,3,c)}function $l(g,o){const c=n.ad.quat.identity([]);return n.ad.quat.rotateZ(c,c,-o),n.ad.quat.rotateX(c,c,-g),c}function uc(g,o){const c=[g[0],g[1],0],A=[o[0],o[1],0];if(n.ad.vec3.length(c)>=1e-15){const P=n.ad.vec3.normalize([],c);n.ad.vec3.scale(A,P,n.ad.vec3.dot(A,P)),o[0]=A[0],o[1]=A[1]}const R=n.ad.vec3.cross([],o,g);if(n.ad.vec3.len(R)<1e-15)return null;const C=Math.atan2(-R[1],R[0]);return $l(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),C)}_r.disabled=new _r(!1,pu,Hl),_r.backCCW=new _r(!0,pu,Hl),_r.backCW=new _r(!0,pu,2304),_r.frontCW=new _r(!0,1028,2304),_r.frontCCW=new _r(!0,1028,Hl);class Rd{constructor(o,c){this.position=o,this.orientation=c}get position(){return this._position}set position(o){if(o){const c=o instanceof n.ac?o:new n.ac(o[0],o[1],o[2]);this._renderWorldCopies&&(c.x=n.bF(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(o,c){if(this.orientation=null,!this.position)return;const A=this.position,R=this._elevation?this._elevation.getAtPointOrZero(n.ac.fromLngLat(o)):0,C=n.ac.fromLngLat(o,R),P=[C.x-A.x,C.y-A.y,C.z-A.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=uc(P,c)}setPitchBearing(o,c){this.orientation=$l(n.ak(o),n.ak(-c))}}class bs{constructor(o,c){this._transform=n.ad.mat4.identity([]),this.orientation=c,this.position=o}get mercatorPosition(){const o=this.position;return new n.ac(o[0],o[1],o[2])}get position(){const o=n.bG(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var c;o&&n.bI(this._transform,3,[(c=o)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||n.ad.quat.identity([]),o&&rh(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,c){this._orientation=$l(o,c),rh(this._transform,this._orientation)}forward(){const o=n.bG(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=n.bG(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=n.bG(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,c){const A=new Float64Array(16);return n.ad.mat4.invert(A,this.getWorldToCamera(o,c)),A}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(o,c,A){const R=this.position;n.ad.vec3.scale(R,R,-o);const C=new Float64Array(16);return n.ad.mat4.fromScaling(C,[A,A,A]),n.ad.mat4.translate(C,C,R),C[10]*=c,C}getWorldToCamera(o,c){const A=new Float64Array(16),R=new Float64Array(4),C=this.position;return n.ad.quat.conjugate(R,this._orientation),n.ad.vec3.scale(C,C,-o),n.ad.mat4.fromQuat(A,R),n.ad.mat4.translate(A,A,C),A[1]*=-1,A[5]*=-1,A[9]*=-1,A[13]*=-1,A[8]*=c,A[9]*=c,A[10]*=c,A[11]*=c,A}getCameraToClipPerspective(o,c,A,R){const C=new Float64Array(16);return n.ad.mat4.perspective(C,o,c,A,R),C}getCameraToClipOrthographic(o,c,A,R,C,P){const L=new Float64Array(16);return n.ad.mat4.ortho(L,o,c,A,R,C,P),L}getDistanceToElevation(o,c=!1){const A=o===0?0:n.bH(o,c?n.aT(this.position[1]):this.position[1]),R=this.forward();return(A-this.position[2])/R[2]}clone(){return new bs([...this.position],[...this.orientation])}}const gi={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class cc{constructor(o=0,c=0,A=0,R=0){if(isNaN(o)||o<0||isNaN(c)||c<0||isNaN(A)||A<0||isNaN(R)||R<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=c,this.left=A,this.right=R}interpolate(o,c,A){return c.top!=null&&o.top!=null&&(this.top=n.ah(o.top,c.top,A)),c.bottom!=null&&o.bottom!=null&&(this.bottom=n.ah(o.bottom,c.bottom,A)),c.left!=null&&o.left!=null&&(this.left=n.ah(o.left,c.left,A)),c.right!=null&&o.right!=null&&(this.right=n.ah(o.right,c.right,A)),this}getCenter(o,c){const A=n.ay((this.left+o-this.right)/2,0,o),R=n.ay((this.top+c-this.bottom)/2,0,c);return new n.P(A,R)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new cc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Na=15;class Td{constructor(o,c,A,R,C,P,L){this.tileSize=512,this._renderWorldCopies=C===void 0||C,this._minZoom=o||0,this._maxZoom=c||22,this._minPitch=A??0,this._maxPitch=R??60,this.setProjection(P),this.setMaxBounds(L),this.width=0,this.height=0,this._center=new n.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new cc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new bs,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const o=new Td(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o._allowWorldUnderZoom=this._allowWorldUnderZoom,o}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<Na}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(o,c=!1){const A=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||A)&&this._updateCameraOnTerrain(),(o||A)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return n.aA(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=n.bP(this.projectionOptions);const A=this.getProjection(),R=!n.bn(c,A);return R&&this._calcMatrices(),this.mercatorFromTransition=!1,R}setOrthographicProjectionAtLowPitch(o){return this._orthographicProjectionAtLowPitch!==o&&(this._orthographicProjectionAtLowPitch=o,this._calcMatrices(),!0)}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=n.bP({name:"mercator"});const c=o!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return n.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return n.bF(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const c=-o*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=n.ad.mat2.create(),n.ad.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const c=n.ay(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=n.ak(o),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const c=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(o){this._tileCoverLift!==o&&(this._tileCoverLift=o)}_updateCameraOnTerrain(){const o=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,c=this.elevation&&o===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||o===Number.NEGATIVE_INFINITY&&(!c||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const A=this._elevation;c||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&A.exaggeration()&&this._centerAltitudeValidForExaggeration!==A.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*A.exaggeration(),this._centerAltitudeValidForExaggeration=A.exaggeration()):(this._centerAltitude=o||0,this._centerAltitudeValidForExaggeration=A.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],A=this.horizonLineFromTop();let R=0,C=0;for(let P=0;P<c.length;P++){const L=new n.P(c[P][0]*this.width,A+c[P][1]*(this.height-A)),j=o.pointCoordinate(L);if(!j)continue;const Z=1/Math.hypot(j[0]-this._camera.position[0],j[1]-this._camera.position[1]);R+=j[3]*Z,C+=Z}return C===0?NaN:R/C}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),A=this.pixelsPerMeter/this.worldSize*c,R=this._mercatorZfromZoom(o),C=this._mercatorZfromZoom(this._maxZoom),P=Math.max(R-A,C);this._setZoom(this._zoomFromMercatorZ(P))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let A;A=o.z<this._camera.position[2]?[c.x,c.y,c.z]:[o.x,o.y,o.z];const R=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,A));return n.ay(this._zoomFromMercatorZ(R),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let c=!1;if(o.orientation&&!n.ad.quat.exactEquals(o.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(o.orientation)),o.position){const A=[o.position.x,o.position.y,o.position.z];n.ad.vec3.exactEquals(A,this._camera.position)||(this._setCameraPosition(A),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,c=new Rd;return c.position=new n.ac(o[0],o[1],o[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(o){if(!n.ad.quat.length(o))return!1;n.ad.quat.normalize(o,o);const c=n.ad.vec3.transformQuat([],[0,0,-1],o),A=n.ad.vec3.transformQuat([],[0,-1,0],o);if(A[2]<0)return!1;const R=uc(c,A);return!!R&&(this._camera.orientation=R,!0)}_setCameraPosition(o){const c=this.zoomScale(this.minZoom)*this.tileSize,A=this.zoomScale(this.maxZoom)*this.tileSize,R=this.cameraToCenterDistance;o[2]=n.ay(o[2],R/A,R/c),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,c,A){this._unmodified=!1,this._edgeInsets.interpolate(o,c,A),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const c=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(o){const c=[new n.bQ(0,o)];if(this.renderWorldCopies){const A=this.pointCoordinate(new n.P(0,0)),R=this.pointCoordinate(new n.P(this.width,0)),C=this.pointCoordinate(new n.P(this.width,this.height)),P=this.pointCoordinate(new n.P(0,this.height)),L=Math.floor(Math.min(A.x,R.x,C.x,P.x)),j=Math.floor(Math.max(A.x,R.x,C.x,P.x)),Z=1;for(let K=L-Z;K<=j+Z;K++)K!==0&&c.push(new n.bQ(K,o))}return c}isLODDisabled(o){return(!o||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(o,c,A){let R=[];const C=A!==void 0,P=!C;if(P&&this.zoom<c||C&&A[0]===0&&A[1]===0)return R;const L=new Set,j=(K,te,ae,ce,Ce)=>{const Re=n.c5(te,K,ae,ce,Ce);L.has(Re)||(R.push(new n.aH(K,te,ae,ce,Ce)),L.add(Re))};for(let K=0;K<o.length;K++){const te=o[K];if(P&&te.canonical.z!==c)continue;const ae=te.canonical,ce=te.overscaledZ,Ce=te.wrap,Re=1<<ae.z,Pe=ae.x+1<Re,Ne=ae.x>0,Ge=ae.y+1<Re,et=ae.y>0,Xe=te.wrap-(Ne?0:1),ct=te.wrap+(Pe?0:1),nt=Ne?ae.x-1:Re-1,it=Pe?ae.x+1:0;if(C)A[0]<0?(j(ce,ct,ae.z,it,ae.y),A[1]<0&&Ge&&(j(ce,Ce,ae.z,ae.x,ae.y+1),j(ce,ct,ae.z,it,ae.y+1)),A[1]>0&&et&&(j(ce,Ce,ae.z,ae.x,ae.y-1),j(ce,ct,ae.z,it,ae.y-1))):A[0]>0?(j(ce,Xe,ae.z,nt,ae.y),A[1]<0&&Ge&&(j(ce,Ce,ae.z,ae.x,ae.y+1),j(ce,Xe,ae.z,nt,ae.y+1)),A[1]>0&&et&&(j(ce,Ce,ae.z,ae.x,ae.y-1),j(ce,Xe,ae.z,nt,ae.y-1))):A[1]<0&&Ge?j(ce,Ce,ae.z,ae.x,ae.y+1):et&&j(ce,Ce,ae.z,ae.x,ae.y-1);else{const st=te.visibleQuadrants;1&st&&(j(ce,Xe,ae.z,nt,ae.y),et&&(j(ce,Ce,ae.z,ae.x,ae.y-1),j(ce,Xe,ae.z,nt,ae.y-1))),2&st&&(j(ce,ct,ae.z,it,ae.y),et&&(j(ce,Ce,ae.z,ae.x,ae.y-1),j(ce,ct,ae.z,it,ae.y-1))),4&st&&(j(ce,Xe,ae.z,nt,ae.y),Ge&&(j(ce,Ce,ae.z,ae.x,ae.y+1),j(ce,Xe,ae.z,nt,ae.y+1))),8&st&&(j(ce,ct,ae.z,it,ae.y),Ge&&(j(ce,Ce,ae.z,ae.x,ae.y+1),j(ce,ct,ae.z,it,ae.y+1)))}}const Z=[];for(const K of R)R.some(te=>K.isChildOf(te))||Z.push(K);if(R=Z.filter(K=>!o.some(te=>!!(K.overscaledZ<c&&te.isChildOf(K))||K.equals(te)||K.isChildOf(te))),P){const K=1<<c,te=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ae=[K*te.x,K*te.y],ce=4,Ce=ce*ce;R=R.filter(Re=>{const Pe=Re.canonical.x+.5-ae[0],Ne=Re.canonical.y+.5-ae[1];return Pe*Pe+Ne*Ne<Ce})}return R}coveringTiles(o){let c=this.coveringZoomLevel(o);const A=c,R=this.elevation&&this.elevation.exaggeration(),C=R&&!o.isTerrainDEM,P=this.projection.name==="mercator";if(o.minzoom!==void 0&&c<o.minzoom)return[];o.maxzoom!==void 0&&c>o.maxzoom&&(c=o.maxzoom);const L=this.locationCoordinate(this.center),j=this.center.lat,Z=1<<c,K=[Z*L.x,Z*L.y,0],te=this.projection.name==="globe",ae=!te,ce=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,ae),Ce=te?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Re=Z*n.bH(1,this.center.lat),Pe=this._camera.position[2]/n.bH(1,this.center.lat),Ne=[Z*Ce.x,Z*Ce.y,Pe*(ae?1:Re)],Ge=te||R,et=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),Xe=this.isLODDisabled(!0)?c:0;let ct;if(this._elevation&&o.isTerrainDEM)ct=1e4*this._elevation.exaggeration();else if(this._elevation){const Nt=this._elevation.getMinMaxForVisibleTiles();ct=Nt?Nt.max:this._centerAltitude}else ct=this._centerAltitude;const nt=o.isTerrainDEM?-ct:this._elevation?this._elevation.getMinElevationBelowMSL():0,it=this.projection.isReprojectedInTileSpace?n.bS(this):1,st=Nt=>{const Qt=new n.ac(Nt.x+25e-6,Nt.y,Nt.z),da=new n.ac(Nt.x,Nt.y+25e-6,Nt.z),$t=Nt.toLngLat(),pa=Qt.toLngLat(),Ia=da.toLngLat(),La=this.locationCoordinate($t),Pa=this.locationCoordinate(pa),sr=this.locationCoordinate(Ia),Lr=Math.hypot(Pa.x-La.x,Pa.y-La.y),pr=Math.hypot(sr.x-La.x,sr.y-La.y);return Math.sqrt(Lr*pr)*it/25e-6},yt=Nt=>{const sa=ct,Qt=nt;return{aabb:n.bV(this,Z,0,0,0,Nt,Qt,sa,this.projection),zoom:0,x:0,y:0,minZ:Qt,maxZ:sa,wrap:Nt,fullyVisible:!1}},wt=[];let Yt=[];const Lt=c,aa=o.reparseOverscaled?A:c,ua=(Pe-this._centerAltitude)*Re,Sa=Nt=>{if(!this._elevation||!Nt.tileID||!P)return;const sa=this._elevation.getMinMaxForTile(Nt.tileID),Qt=Nt.aabb;sa?(Qt.min[2]=sa.min,Qt.max[2]=sa.max,Qt.center[2]=(Qt.min[2]+Qt.max[2])/2):(Nt.shouldSplit=ia(Nt),Nt.shouldSplit||(Qt.min[2]=Qt.max[2]=Qt.center[2]=this._centerAltitude))},Mt=(Nt,sa)=>{if(.707*sa<Nt)return 1;const Qt=sa/Nt;return Qt/(1.4144271570014144+(Math.pow(1.1,Qt-1.4144271570014144+1)-1)/(1.1-1)-1)},ia=Nt=>{if(Nt.zoom<Xe)return!0;if(Nt.zoom===Lt)return!1;if(Nt.shouldSplit!=null)return Nt.shouldSplit;const sa=Nt.aabb.distanceX(Ne),Qt=Nt.aabb.distanceY(Ne);let da=ua,$t=1;if(te){da=Nt.aabb.distanceZ(Ne);const pr=Math.pow(2,Nt.zoom),zr=n.aT((Nt.y+1)/pr),Cr=n.aT(Nt.y/pr),xr=Math.min(Math.max(j,zr),Cr),Fr=n.ca(xr)/n.ca(j);if($t=xr===j?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Fr/this._mercatorScaleRatio),this.zoom<=n.c6&&Nt.zoom===Lt-1&&Fr>=.9)return!0}else if(C&&(da=Nt.aabb.distanceZ(Ne)*Re),this.projection.isReprojectedInTileSpace&&A<=5){const pr=Math.pow(2,Nt.zoom),zr=st(new n.ac((Nt.x+.5)/pr,(Nt.y+.5)/pr));$t=zr>.85?1:zr}if(!P){const pr=Math.sqrt(sa*sa+Qt*Qt+da*da);let zr=(1<<Lt-Nt.zoom)*et*$t;return zr*=Mt(Math.max(da,ua),pr),pr<zr}let pa=Number.MAX_VALUE,Ia=0;const La=Nt.aabb.getCorners(),Pa=[];for(const pr of La){n.ad.vec3.sub(Pa,pr,Ne),te||(C?Pa[2]*=Re:Pa[2]=ua);const zr=n.ad.vec3.dot(Pa,this._camera.forward());zr<pa&&(pa=zr,Ia=Math.abs(Pa[2]))}let sr=(1<<Lt-Nt.zoom)*et*$t;if(sr*=Mt(Math.max(Ia,ua),pa),pa<sr)return!0;const Lr=Nt.aabb.closestPoint(K);return Lr[0]===K[0]&&Lr[1]===K[1]};if(this.renderWorldCopies)for(let Nt=1;Nt<=3;Nt++)wt.push(yt(-Nt)),wt.push(yt(Nt));for(wt.push(yt(0));wt.length>0;){const Nt=wt.pop(),sa=Nt.x,Qt=Nt.y;let da=Nt.fullyVisible;const $t=()=>this.projection.name==="globe"&&(Nt.y===0||Nt.y===(1<<Nt.zoom)-1);if(!da){let pa=Ge?Nt.aabb.intersects(ce):Nt.aabb.intersectsFlat(ce);if(pa===0&&$t()){const Ia=new n.bT(Nt.zoom,sa,Qt);pa=n.bU(this,Z,Ia,!0).intersects(ce)}if(pa===0)continue;da=pa===2}if(Nt.zoom!==Lt&&ia(Nt))for(let pa=0;pa<4;pa++){const Ia=(sa<<1)+pa%2,La=(Qt<<1)+(pa>>1),Pa={aabb:P?Nt.aabb.quadrant(pa):n.bV(this,Z,Nt.zoom+1,Ia,La,Nt.wrap,Nt.minZ,Nt.maxZ,this.projection),zoom:Nt.zoom+1,x:Ia,y:La,wrap:Nt.wrap,fullyVisible:da,tileID:void 0,shouldSplit:void 0,minZ:Nt.minZ,maxZ:Nt.maxZ};C&&!te&&(Pa.tileID=new n.aH(Nt.zoom+1===Lt?aa:Nt.zoom+1,Nt.wrap,Nt.zoom+1,Ia,La),Sa(Pa)),wt.push(Pa)}else{const pa=Nt.zoom===Lt?aa:Nt.zoom;if(o.minzoom&&o.minzoom>pa)continue;let Ia=0;if(!da){let Lr=Ge?Nt.aabb.intersectsPrecise(ce):Nt.aabb.intersectsPreciseFlat(ce);if(Lr===0&&$t()){const pr=new n.bT(Nt.zoom,sa,Qt);Lr=n.bU(this,Z,pr,!0).intersectsPrecise(ce)}if(Lr===0)continue;if(o.calculateQuadrantVisibility)if(ce.containsPoint(Nt.aabb.center))Ia=15;else for(let pr=0;pr<4;pr++)Nt.aabb.quadrant(pr).intersects(ce)!==0&&(Ia|=1<<pr)}const La=K[0]-(.5+sa+(Nt.wrap<<Nt.zoom))*(1<<c-Nt.zoom),Pa=K[1]-.5-Qt,sr=Nt.tileID?Nt.tileID:new n.aH(pa,Nt.wrap,Nt.zoom,sa,Qt);o.calculateQuadrantVisibility&&(sr.visibleQuadrants=Ia),Yt.push({tileID:sr,distanceSq:La*La+Pa*Pa})}}if(this.fogCullDistSq){const Nt=this.fogCullDistSq,sa=this.horizonLineFromTop();Yt=Yt.filter(Qt=>{const da=[0,0,0,1],$t=[n.ai,n.ai,0,1],pa=this.calculateFogTileMatrix(Qt.tileID.toUnwrapped());n.ad.vec4.transformMat4(da,da,pa),n.ad.vec4.transformMat4($t,$t,pa);const Ia=n.ad.vec4.min([],da,$t),La=n.ad.vec4.max([],da,$t),Pa=n.bW(Ia,La);if(Pa===0)return!0;let sr=!1;const Lr=this._elevation;if(Lr&&Pa>Nt&&sa!==0){const pr=this.calculateProjMatrix(Qt.tileID.toUnwrapped());let zr;o.isTerrainDEM||(zr=Lr.getMinMaxForTile(Qt.tileID)),zr||(zr={min:nt,max:ct});const Cr=n.c7(this.rotation),xr=[Cr[0]*n.ai,Cr[1]*n.ai,zr.max];n.ad.vec3.transformMat4(xr,xr,pr),sr=(1-xr[1])*this.height*.5<sa}return Pa<Nt||sr})}return Yt.sort((Nt,sa)=>Nt.distanceSq-sa.distanceSq).map(Nt=>Nt.tileID)}resize(o,c){this.width=o,this.height=c,this.pixelsToGLUnits=[2/o,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const c=n.ay(o.lat,-n.bX,n.bX),A=this.projection.project(o.lng,c);return new n.P(A.x*this.worldSize,A.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/n.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,c){let A,R;const C=this.centerPoint;if(this.projection.name==="globe"){const L=this.worldSize;A=(c.x-C.x)/L,R=(c.y-C.y)/L}else{const L=this.pointCoordinate(c),j=this.pointCoordinate(C);A=L.x-j.x,R=L.y-j.y}const P=this.locationCoordinate(o);this.setLocation(new n.ac(P.x-A,P.y-R))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o,c){return this.projection.locationPoint(this,o,c)}locationPoint3D(o,c){return this.projection.locationPoint(this,o,c,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o,c){return this.coordinateLocation(this.pointCoordinate3D(o,c))}locationCoordinate(o,c){const A=c?n.bH(c,o.lat):void 0,R=this.projection.project(o.lng,o.lat);return new n.ac(R.x,R.y,A)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,c){const A=c??this._centerAltitude,R=[o.x,o.y,0,1],C=[o.x,o.y,1,1];n.ad.vec4.transformMat4(R,R,this.pixelMatrixInverse),n.ad.vec4.transformMat4(C,C,this.pixelMatrixInverse);const P=C[3];n.ad.vec4.scale(R,R,1/R[3]),n.ad.vec4.scale(C,C,1/P);const L=R[2],j=C[2];return{p0:R,p1:C,t:L===j?0:(A-L)/(j-L)}}screenPointToMercatorRay(o){const c=[o.x,o.y,0,1],A=[o.x,o.y,1,1];return n.ad.vec4.transformMat4(c,c,this.pixelMatrixInverse),n.ad.vec4.transformMat4(A,A,this.pixelMatrixInverse),n.ad.vec4.scale(c,c,1/c[3]),n.ad.vec4.scale(A,A,1/A[3]),c[2]=n.bH(c[2],this._center.lat)*this.worldSize,A[2]=n.bH(A[2],this._center.lat)*this.worldSize,n.ad.vec4.scale(c,c,1/this.worldSize),n.ad.vec4.scale(A,A,1/this.worldSize),new n.as([c[0],c[1],c[2]],n.ad.vec3.normalize([],n.ad.vec3.sub([],A,c)))}rayIntersectionCoordinate(o){const{p0:c,p1:A,t:R}=o,C=n.bH(c[2],this._center.lat),P=n.bH(A[2],this._center.lat);return new n.ac(n.ah(c[0],A[0],R)/this.worldSize,n.ah(c[1],A[1],R)/this.worldSize,n.ah(C,P,R))}pointCoordinate(o,c=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,c)}pointCoordinate3D(o,c){if(!this.elevation)return this.pointCoordinate(o,c);let A=this.projection.pointCoordinate3D(this,o.x,o.y);if(A)return new n.ac(A[0],A[1],A[2]);let R=0,C=this.horizonLineFromTop();if(o.y>C)return this.pointCoordinate(o,c);const P=.02*C,L=o.clone();for(let j=0;j<10&&C-R>P;j++){L.y=n.ah(R,C,.66);const Z=this.projection.pointCoordinate3D(this,L.x,L.y);Z?(C=L.y,A=Z):R=L.y}return A?new n.ac(A[0],A[1],A[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=n.bY)return!this.isPointAboveHorizon(o);const c=this.pointCoordinate(o);return c.y>=0&&c.y<=1}_coordinatePoint(o,c){const A=c&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,R=[o.x*this.worldSize,o.y*this.worldSize,A+o.toAltitude(),1];return n.ad.vec4.transformMat4(R,R,this.pixelMatrix),R[3]>0?new n.P(R[0]/R[3],R[1]/R[3]):new n.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:c}=this._edgeInsets,A=this.height-this._edgeInsets.bottom,R=this.width-this._edgeInsets.right,C=this.pointLocation3D(new n.P(c,o)),P=this.pointLocation3D(new n.P(R,o)),L=this.pointLocation3D(new n.P(R,A)),j=this.pointLocation3D(new n.P(c,A));let Z=Math.min(C.lng,P.lng,L.lng,j.lng),K=Math.max(C.lng,P.lng,L.lng,j.lng),te=Math.min(C.lat,P.lat,L.lat,j.lat),ae=Math.max(C.lat,P.lat,L.lat,j.lat);const ce=Math.pow(2,-this.zoom)/16*270,Ce=this.projection.name==="globe"?1:4,Re=(Pe,Ne,Ge,et,Xe)=>{const ct=(Pe+Ge)/2,nt=(Ne+et)/2,it=new n.P(ct,nt),{lng:st,lat:yt}=this.pointLocation3D(it),wt=Math.max(0,Z-st,te-yt,st-K,yt-ae);Z=Math.min(Z,st),K=Math.max(K,st),te=Math.min(te,yt),ae=Math.max(ae,yt),(Xe<Ce||wt>ce)&&(Re(Pe,Ne,ct,nt,Xe+1),Re(ct,nt,Ge,et,Xe+1))};if(Re(c,o,R,o,1),Re(R,o,R,A,1),Re(R,A,c,A,1),Re(c,A,c,o,1),this.projection.name==="globe"){const[Pe,Ne]=n.bZ(this);Pe?(ae=90,K=180,Z=-180):Ne&&(te=-90,K=180,Z=-180)}return new n.aB(new n.bO(Z,te),new n.bO(K,ae))}_getBoundsRectangular(o,c){const{top:A,left:R}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,P=this.width-this._edgeInsets.right,L=new n.P(R,A),j=new n.P(P,A),Z=new n.P(P,C),K=new n.P(R,C);let te=this.pointCoordinate(L,o),ae=this.pointCoordinate(j,o);const ce=this.pointCoordinate(Z,c),Ce=this.pointCoordinate(K,c),Re=(Pe,Ne)=>(Ne.y-Pe.y)/(Ne.x-Pe.x);return te.y>1&&ae.y>=0?te=new n.ac((1-Ce.y)/Re(Ce,te)+Ce.x,1):te.y<0&&ae.y<=1&&(te=new n.ac(-Ce.y/Re(Ce,te)+Ce.x,0)),ae.y>1&&te.y>=0?ae=new n.ac((1-ce.y)/Re(ce,ae)+ce.x,1):ae.y<0&&te.y<=1&&(ae=new n.ac(-ce.y/Re(ce,ae)+ce.x,0)),new n.aB().extend(this.coordinateLocation(te)).extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(Ce)).extend(this.coordinateLocation(ce))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const c=o.visibleDemTiles.reduce((A,R)=>{if(R.dem){const C=R.dem.tree;A.min=Math.min(A.min,C.minimums[0]),A.max=Math.max(A.max,C.maximums[0])}return A},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(c.min*o.exaggeration(),c.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,A=this.height/2-c*(1-this._horizonShift);return o?Math.max(0,A):A}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-n.bX,this.maxLat=n.bX,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=n.av(this.minLng)*this.tileSize,this.worldMaxX=n.av(this.maxLng)*this.tileSize,this.worldMinY=n.aC(this.maxLat)*this.tileSize,this.worldMaxY=n.aC(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,c){return this.projection.createTileMatrix(this,c,o)}calculateDistanceTileData(o){const c=o.key,A=this._distanceTileDataCache;if(A[c])return A[c];const R=o.canonical,C=1/this.height,P=this.cameraWorldSize,L=P/this.zoomScale(R.z),j=(R.x+Math.pow(2,R.z)*o.wrap)*L,Z=R.y*L,K=this.point;K.x*=P/this.worldSize,K.y*=P/this.worldSize;const te=this.angle,ae=Math.sin(-te),ce=-Math.cos(-te);return A[c]={bearing:[ae,ce],center:[(K.x-j)*C,(K.y-Z)*C],scale:L/n.ai*C},A[c]}calculateFogTileMatrix(o){const c=o.key,A=this._fogTileMatrixCache;if(A[c])return A[c];const R=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return n.ad.mat4.multiply(R,this.worldToFogMatrix,R),A[c]=new Float32Array(R),A[c]}calculateProjMatrix(o,c=!1,A=!1){const R=o.key;let C;if(C=A?this._expandedProjMatrixCache:c?this._alignedProjMatrixCache:this._projMatrixCache,C[R])return C[R];const P=this.calculatePosMatrix(o,this.worldSize);let L;return L=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:A?this.expandedFarZProjMatrix:c?this.alignedProjMatrix:this.projMatrix,n.ad.mat4.multiply(P,L,P),C[R]=new Float32Array(P),C[R]}calculatePixelsToTileUnitsMatrix(o){const c=o.tileID.key,A=this._pixelsToTileUnitsCache;if(A[c])return A[c];const R=n.b_(o,this);return A[c]=R,A[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,c=n.ad.mat4.fromScaling([],[o,o,o]);return n.ad.mat4.multiply(c,c,this.globeMatrix),c}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const c=n.bH(1,this._center.lat)*this.worldSize,A=this._computeCameraPosition(c),R=this._camera.forward(),C=n.bH(1,this._center.lat);A[2]/=C,R[2]/=C,n.ad.vec3.normalize(R,R);const P=o.raycast(A,R,o.exaggeration());if(P){const L=n.ad.vec3.scaleAndAdd([],A,R,P),j=new n.ac(L[0],L[1],n.bH(L[2],n.aT(L[1]))),Z=(j.z+n.ad.vec3.length([j.x-A[0],j.y-A[1],j.z-A[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Z),this._centerAltitude=j.toAltitude(),this._center=this.coordinateLocation(j),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const c=this._elevation,A=n.bH(1,this._center.lat)*this.worldSize,R=this._computeCameraPosition(A),C=c.getAtPointOrZero(new n.ac(...R)),P=this.pixelsPerMeter/this.worldSize*C,L=this._minimumHeightOverTerrain(),j=R[2]-P;if(j<=L)if(j<0||o){const Z=this.locationCoordinate(this._center,this._centerAltitude),K=[R[0],R[1],Z.z-R[2]],te=n.ad.vec3.length(K);K[2]-=(L-j)/this._pixelsPerMercatorPixel;const ae=n.ad.vec3.length(K);if(ae===0)return;n.ad.vec3.scale(K,K,te/ae*this._pixelsPerMercatorPixel),this._camera.position=[R[0],R[1],Z.z*this._pixelsPerMercatorPixel-K[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const ae=this.center;return ae.lat=n.ay(ae.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&(ae.lng=n.ay(ae.lng,this.minLng,this.maxLng)),this.center=ae,void(this._constraining=!1)}const c=this._unmodified,{x:A,y:R}=this.point;let C=0,P=A,L=R;const j=this.width/2,Z=this.height/2,K=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(R-Z<K&&(L=K+Z),R+Z>te&&(L=te-Z),te-K<this.height&&(C=Math.max(C,this.height/(te-K)),L=(te+K)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ae=this.worldMinX*this.scale,ce=this.worldMaxX*this.scale,Ce=this.worldSize/2-(ae+ce)/2;P=(A+Ce+this.worldSize)%this.worldSize-Ce,P-j<ae&&(P=ae+j),P+j>ce&&(P=ce-j),ce-ae<this.width&&(C=Math.max(C,this.width/(ce-ae)),P=(ce+ae)/2)}P===A&&L===R||this._allowWorldUnderZoom||(this.center=this.unproject(new n.P(P,L))),C&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(C)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,c=this.projection.name==="globe",A=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=n.bH(1,this.center.lat)/n.bH(1,n.c8));const R=n.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,R),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const C=this.projection.zAxisUnit==="meters"?A:1,P=this._camera.getWorldToCamera(this.worldSize,C);let L;const j=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(j[8]=2*-o.x/this.width,j[9]=2*o.y/this.height,this.isOrthographic){let yt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),wt=yt*this.aspect,Yt=-wt,Lt=-yt;wt-=o.x,Yt-=o.x,yt+=o.y,Lt+=o.y,L=this._camera.getCameraToClipOrthographic(Yt,wt,Lt,yt,this._nearZ,this._farZ),((aa,ua,Sa,Mt)=>{for(let ia=0;ia<16;ia++)aa[ia]=n.ah(ua[ia],Sa[ia],Mt)})(L,L,j,n.c9(this.pitch>=Na?1:this.pitch/Na))}else L=j;const Z=n.ad.mat4.mul([],j,P);let K=n.ad.mat4.mul([],L,P);if(this.projection.isReprojectedInTileSpace){const yt=this.locationCoordinate(this.center),wt=n.ad.mat4.identity([]);n.ad.mat4.translate(wt,wt,[yt.x*this.worldSize,yt.y*this.worldSize,0]),n.ad.mat4.multiply(wt,wt,n.c0(this)),n.ad.mat4.translate(wt,wt,[-yt.x*this.worldSize,-yt.y*this.worldSize,0]),n.ad.mat4.multiply(K,K,wt),n.ad.mat4.multiply(Z,Z,wt),this.inverseAdjustmentMatrix=n.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=n.ad.mat4.scale([],K,[this.worldSize,this.worldSize,this.worldSize/C,1]),this.projMatrix=K,this.invProjMatrix=n.ad.mat4.invert(new Float64Array(16),this.projMatrix),c){const yt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);yt[8]=2*-o.x/this.width,yt[9]=2*o.y/this.height,this.expandedFarZProjMatrix=n.ad.mat4.mul([],yt,P)}else this.expandedFarZProjMatrix=this.projMatrix;const te=n.ad.mat4.invert([],L);this.frustumCorners=n.c2.fromInvProjectionMatrix(te,this.horizonLineFromTop(),this.height),this.cameraFrustum=n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!c);const ae=new Float32Array(16);n.ad.mat4.identity(ae),n.ad.mat4.scale(ae,ae,[1,-1,1]),n.ad.mat4.rotateX(ae,ae,this._pitch),n.ad.mat4.rotateZ(ae,ae,this.angle);const ce=n.ad.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=n.ad.mat4.clone(ce);const Ce=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ce[8]=2*-o.x/this.width,ce[9]=2*(o.y+Ce)/this.height,this.skyboxMatrix=n.ad.mat4.multiply(ae,ce,ae);const Re=this.point,Pe=Re.x,Ne=Re.y,Ge=this.width%2/2,et=this.height%2/2,Xe=Math.cos(this.angle),ct=Math.sin(this.angle),nt=Pe-Math.round(Pe)+Xe*Ge+ct*et,it=Ne-Math.round(Ne)+Xe*et+ct*Ge,st=new Float64Array(K);if(n.ad.mat4.translate(st,st,[nt>.5?nt-1:nt,it>.5?it-1:it,0]),this.alignedProjMatrix=st,K=n.ad.mat4.create(),n.ad.mat4.scale(K,K,[this.width/2,-this.height/2,1]),n.ad.mat4.translate(K,K,[1,-1,0]),this.labelPlaneMatrix=K,K=n.ad.mat4.create(),n.ad.mat4.scale(K,K,[1,-1,1]),n.ad.mat4.translate(K,K,[-1,-1,0]),n.ad.mat4.scale(K,K,[2/this.width,2/this.height,1]),this.glCoordMatrix=K,this.pixelMatrix=n.ad.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,Z),this._calcFogMatrices(),this._distanceTileDataCache={},K=n.ad.mat4.invert(new Float64Array(16),this.pixelMatrix),!K)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=K,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=n.c3(this);const yt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=n.ad.vec3.transformMat4(yt,yt,P),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=K;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,A=this._camera.position,R=1/this.height/this._pixelsPerMercatorPixel,C=[o,o,c];n.ad.vec3.scale(C,C,R),n.ad.vec3.scale(A,A,-1),n.ad.vec3.multiply(A,A,C);const P=n.ad.mat4.create();n.ad.mat4.translate(P,P,A),n.ad.mat4.scale(P,P,C),this.mercatorFogMatrix=P,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,c,R)}_computeCameraPosition(o){const c=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,A=this._camera.forward(),R=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-o/this.worldSize*this._centerAltitude;return[R.x/this.worldSize-A[0]*C,R.y/this.worldSize-A[1]*C,o/this.worldSize*this._centerAltitude-A[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),A=this._camera.position[2],R=o[2];let C=1;this.projection.wrap&&(this.center=this.center.wrap()),R>0&&(C=Math.min((c-A)/R,1)),this._camera.position=n.ad.vec3.scaleAndAdd([],this._camera.position,o,C),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,c=this._camera.forward(),{pitch:A,bearing:R}=this._camera.getPitchBearing(),C=n.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,P=this._mercatorZfromZoom(this._maxZoom)*Math.cos(n.ak(this._maxPitch)),L=Math.max((o[2]-C)/Math.cos(A),P),j=this._zoomFromMercatorZ(L);n.ad.vec3.scaleAndAdd(o,o,c,L),this._pitch=n.ay(A,n.ak(this.minPitch),n.ak(this.maxPitch)),this.angle=n.bF(R,-Math.PI,Math.PI),this._setZoom(n.ay(j,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new n.ac(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let c=0,A=n.bY,R=0,C=1/0;for(;A-c>1e-6&&A>c;){const P=c+.5*(A-c),L=this.tileSize*Math.pow(2,P),j=this.getCameraToCenterDistance(this.projection,P,L),Z=this.scaleZoom(j/(o*this.tileSize)),K=Math.abs(P-Z);K<C&&(C=K,R=P),P<Z?c=P:A=P}return R}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(n.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,c){const A=Math.min(o.x,c.x),R=Math.max(o.x,c.x),C=Math.min(o.y,c.y),P=Math.max(o.y,c.y);if(C<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const L=[new n.P(A,C),new n.P(R,P),new n.P(A,P),new n.P(R,C)],j=this.renderWorldCopies?-3:0,Z=this.renderWorldCopies?4:1;for(const K of L){const te=this.pointRayIntersection(K);if(te.t<0)return!0;const ae=this.rayIntersectionCoordinate(te);if(ae.x<j||ae.y<0||ae.x>Z||ae.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+n.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new n.P(0,0),new n.P(this.width,this.height))}zoomDeltaToMovement(o,c){const A=n.ad.vec3.length(n.ad.vec3.sub([],this._camera.position,o)),R=this._zoomFromMercatorZ(A)+c;return A-this._mercatorZfromZoom(R)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([c,A,R],C){const P=[c,A,R,1];n.ad.vec4.transformMat4(P,P,C);const L=P[3]=Math.max(P[3],1e-6);return P[0]/=L,P[1]/=L,P[2]/=L,P}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new n.P(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,o))}}getCameraToCenterDistance(o,c=this.zoom,A=this.worldSize){const R=n.b$(o,c,this.width,this.height,1024),C=o.pixelSpaceConversion(this.center.lat,A,R);let P=.5/Math.tan(.5*this._fov)*this.height*C;return this.isOrthographic&&(P=n.ah(1,P,n.c9(this.pitch>=Na?1:this.pitch/Na))),P}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&n.ad.mat4.multiply(o,o,this.globeMatrix),o}getFrustum(o){return n.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,o,this.projection.zAxisUnit==="meters")}}const Zs=(g,o)=>{if(o>0&&g.terrain&&n.w("Cutoff is currently disabled on terrain"),o<=0||g.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const c=g.transform,A=Math.max(Math.abs(c._zoom-(g.minCutoffZoom-1)),1),R=c.isLODDisabled(!1)?n.ae(60,45,c.pitch):n.ae(30,15,c.pitch),C=c._farZ-c._nearZ,P=o*c.height,L=((1-(j=R))*c.cameraToCenterDistance+j*(c._farZ+P))*A;var j;return{shouldRenderCutoff:R<1,uniformValues:{u_cutoff_params:[c._nearZ,c._farZ,(L-c._nearZ)/C,(L-P-c._nearZ)/C]}}},co={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class ff{constructor(o,c){this.aabb=o,this.lastCascade=c}}class Vh{add(o,c){const A=this.receivers[o.key];A!==void 0?(A.aabb.min[0]=Math.min(A.aabb.min[0],c.min[0]),A.aabb.min[1]=Math.min(A.aabb.min[1],c.min[1]),A.aabb.min[2]=Math.min(A.aabb.min[2],c.min[2]),A.aabb.max[0]=Math.max(A.aabb.max[0],c.max[0]),A.aabb.max[1]=Math.max(A.aabb.max[1],c.max[1]),A.aabb.max[2]=Math.max(A.aabb.max[2],c.max[2])):this.receivers[o.key]=new ff(c,null)}clear(){this.receivers={}}get(o){return this.receivers[o.key]}computeRequiredCascades(o,c,A){const R=n.ce.fromPoints(o.points);let C=0;for(const P in this.receivers){const L=this.receivers[P];if(!L||!R.intersectsAabb(L.aabb))continue;L.aabb.min=R.closestPoint(L.aabb.min),L.aabb.max=R.closestPoint(L.aabb.max);const j=L.aabb.getCorners();for(let Z=0;Z<A.length;Z++){let K=!0;for(const te of j){const ae=[te[0]*c,te[1]*c,te[2]];if(n.ad.vec3.transformMat4(ae,ae,A[Z].matrix),ae[0]<-1||ae[0]>1||ae[1]<-1||ae[1]>1){K=!1;break}}if(L.lastCascade=Z,C=Math.max(C,Z),K)break}}return C+1}}class ho{constructor(o){this.painter=o,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Vh,this._depthMode=new ir(o.context.gl.LEQUAL,ir.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,o.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),o.tp.registerParameter(co,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),o.tp.registerParameter(co,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),o.tp.registerParameter(co,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),o.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const o of this._cascades)o.texture.destroy(),o.framebuffer.destroy();this._cascades=[]}updateShadowParameters(o,c){const A=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!c||!c.properties)return;const R=c.properties.get("shadow-intensity");if(!c.shadowsEnabled()||R<=0||(this._shadowLayerCount=A.style.order.reduce((Ce,Re)=>{const Pe=A.style._mergedLayers[Re];return Ce+(Pe.hasShadowPass()&&!Pe.isHidden(o.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const C=A.context,P=co.shadowMapResolution,L=co.shadowMapResolution;if(this._cascades.length===0||co.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Ce=0;Ce<co.cascadeCount;++Ce){const Re=A._shadowMapDebug,Pe=C.gl,Ne=C.createFramebuffer(P,L,Re,"texture"),Ge=new n.T(C,{width:P,height:L,data:null},Pe.DEPTH_COMPONENT16);if(Ne.depthAttachment.set(Ge.texture),Re){const et=new n.T(C,{width:P,height:L,data:null},Pe.RGBA8);Ne.colorAttachment.set(et.texture)}this._cascades.push({framebuffer:Ne,texture:Ge,matrix:[],far:0,boundingSphereRadius:0,frustum:new n.bR,scale:0})}}this.shadowDirection=Tl(c);let j=0;if(o.elevation){const Ce=o.elevation,Re=[1e4,-1e4];Ce.visibleDemTiles.filter(Pe=>Pe.dem).forEach(Pe=>{const Ne=Pe.dem.tree;Re[0]=Math.min(Re[0],Ne.minimums[0]),Re[1]=Math.max(Re[1],Ne.maximums[0])}),Re[0]!==1e4&&(j=(Re[1]-Re[0])*Ce.exaggeration())}const Z=1.5*o.cameraToCenterDistance,K=3*Z,te=new Float64Array(16);for(let Ce=0;Ce<this._cascades.length;++Ce){const Re=this._cascades[Ce];let Pe=o.height/50,Ne=1;co.cascadeCount===1?Ne=K:Ce===0?Ne=Z:(Pe=Z,Ne=K);const[Ge,et]=Kl(o,this.shadowDirection,Pe,Ne,co.shadowMapResolution,j);Re.scale=o.scale,Re.matrix=Ge,Re.boundingSphereRadius=et,n.ad.mat4.invert(te,Re.matrix),Re.frustum=n.bR.fromInvProjectionMatrix(te,1,0,!0),Re.far=Ne}const ae=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[ae].far,this._cascades[ae].far],this._uniformValues.u_shadow_intensity=R,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/co.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=co.shadowMapResolution,this._uniformValues.u_shadowmap_0=gi.ShadowMap0,this._uniformValues.u_shadowmap_1=gi.ShadowMap0+1,this._groundShadowTiles=A.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const ce=A.transform.elevation;for(const Ce of this._groundShadowTiles){let Re={min:0,max:0};if(ce){const Pe=ce.getMinMaxForTile(Ce);Pe&&(Re=Pe)}this.addShadowReceiver(Ce.toUnwrapped(),Re.min,Re.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(o){this._enabled=o}drawShadowPass(o,c){if(!this.enabled)return;const A=this.painter,R=A.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(A.transform.getFrustum(0),A.transform.worldSize,this._cascades),R.viewport.set([0,0,co.shadowMapResolution,co.shadowMapResolution]);for(let C=0;C<this._numCascadesToRender;++C){A.currentShadowCascade=C,R.bindFramebuffer.set(this._cascades[C].framebuffer.framebuffer),R.clear({color:n.al.white,depth:1});for(const P of o.order){const L=o._mergedLayers[P];if(!L.hasShadowPass()||L.isHidden(A.transform.zoom))continue;const j=o.getLayerSourceCache(L),Z=j?c[j.id]:void 0;(L.type==="model"||Z&&Z.length)&&A.renderLayer(A,j,L,Z)}}A.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const o=this.painter,c=o.style,A=o.context,R=c.directionalLight,C=c.ambientLight;if(!R||!C)return;const P=[],L=Zs(o,o.longestCutoffRange);L.shouldRenderCutoff&&P.push("RENDER_CUTOFF"),P.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&P.push("NORMAL_OFFSET");const j=Oc(c,R,C),Z=new ir(A.gl.LEQUAL,ir.ReadOnly,o.depthRangeFor3D);for(const K of this._groundShadowTiles){const te=K.toUnwrapped(),ae=o.isTileAffectedByFog(K),ce=o.getOrCreateProgram("groundShadow",{defines:P,overrideFog:ae});this.setupShadows(te,ce),o.uploadCommonUniforms(A,ce,te,null,L);const Ce={u_matrix:o.transform.calculateProjMatrix(te),u_ground_shadow_factor:j};ce.draw(o,A.gl.TRIANGLES,Z,Rr.disabled,br.multiply,_r.disabled,Ce,"ground_shadow",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments,null,o.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?br.unblended:br.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(o){const c=this.painter.transform,A=c.calculatePosMatrix(o,c.worldSize);return n.ad.mat4.multiply(A,this._cascades[this.painter.currentShadowCascade].matrix,A),Float32Array.from(A)}calculateShadowPassMatrixFromMatrix(o){return n.ad.mat4.multiply(o,this._cascades[this.painter.currentShadowCascade].matrix,o),Float32Array.from(o)}setupShadows(o,c,A,R=0){if(!this.enabled)return;const C=this.painter.transform,P=this.painter.context,L=P.gl,j=this._uniformValues,Z=new Float64Array(16),K=C.calculatePosMatrix(o,C.worldSize);for(let te=0;te<this._cascades.length;te++)n.ad.mat4.multiply(Z,this._cascades[te].matrix,K),j[te===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(Z),P.activeTexture.set(L.TEXTURE0+gi.ShadowMap0+te),this._cascades[te].texture.bind(L.NEAREST,L.CLAMP_TO_EDGE);if(this.useNormalOffset=!!A,this.useNormalOffset){const te=n.cd(o.canonical),ae=2/C.tileSize*n.ai/co.shadowMapResolution,ce=ae*this._cascades[0].boundingSphereRadius,Ce=ae*this._cascades[this._cascades.length-1].boundingSphereRadius,Re=(A==="vector-tile"?1:3)/Math.pow(2,R-o.canonical.z-(1-C.zoom+Math.floor(C.zoom)));j.u_shadow_normal_offset=[te,ce*Re,Ce*Re],j.u_shadow_bias=[6e-5,.0012,.012]}else j.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(P,j)}setupShadowsFromMatrix(o,c,A=!1){if(!this.enabled)return;const R=this.painter.context,C=R.gl,P=this._uniformValues,L=new Float64Array(16);for(let j=0;j<co.cascadeCount;j++)n.ad.mat4.multiply(L,this._cascades[j].matrix,o),P[j===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(L),R.activeTexture.set(C.TEXTURE0+gi.ShadowMap0+j),this._cascades[j].texture.bind(C.NEAREST,C.CLAMP_TO_EDGE);if(this.useNormalOffset=A,A){const j=co.normalOffset;P.u_shadow_normal_offset=[1,j,j],P.u_shadow_bias=[6e-5,.0012,.012]}else P.u_shadow_bias=[36e-5,.0012,.012];c.setShadowUniformValues(R,P)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(o,c,A,R){if(R[2]>=0)return{};const C=function(j,Z,K){const te=K/(1<<j.canonical.z);return new n.ce([j.canonical.x*te+j.wrap*K,j.canonical.y*te+j.wrap*K,0],[(j.canonical.x+1)*te+j.wrap*K,(j.canonical.y+1)*te+j.wrap*K,Z])}(o,c,A).getCorners(),P=c/-R[2];R[0]<0?(n.ad.vec3.add(C[0],C[0],[R[0]*P,0,0]),n.ad.vec3.add(C[3],C[3],[R[0]*P,0,0])):R[0]>0&&(n.ad.vec3.add(C[1],C[1],[R[0]*P,0,0]),n.ad.vec3.add(C[2],C[2],[R[0]*P,0,0])),R[1]<0?(n.ad.vec3.add(C[0],C[0],[0,R[1]*P,0]),n.ad.vec3.add(C[1],C[1],[0,R[1]*P,0])):R[1]>0&&(n.ad.vec3.add(C[2],C[2],[0,R[1]*P,0]),n.ad.vec3.add(C[3],C[3],[0,R[1]*P,0]));const L={};return L.vertices=C,L.planes=[Os(C[1],C[0],C[4]),Os(C[2],C[1],C[5]),Os(C[3],C[2],C[6]),Os(C[0],C[3],C[7])],L}addShadowReceiver(o,c,A){this._receivers.add(o,n.ce.fromTileIdAndHeight(o,c,A))}getMaxCascadeForTile(o){const c=this._receivers.get(o);return c&&c.lastCascade?c.lastCascade:0}}function Os(g,o,c){const A=n.ad.vec3.sub([],c,o),R=n.ad.vec3.sub([],g,o),C=n.ad.vec3.cross([],A,R),P=n.ad.vec3.length(C);return P===0?[0,0,1,0]:(n.ad.vec3.scale(C,C,1/P),[C[0],C[1],C[2],-n.ad.vec3.dot(C,o)])}function Tl(g){const o=g.properties.get("direction"),c=n.cc(o.x,o.y,o.z);c[2]=n.ay(c[2],0,75);const A=n.cf([c[0],c[1],c[2]]);return n.ad.vec3.fromValues(A.x,A.y,A.z)}function Oc(g,o,c){const A=o.properties.get("color-use-theme")==="none",R=o.properties.get("color"),C=o.properties.get("intensity"),P=o.properties.get("direction"),L=[P.x,P.y,P.z],j=c.properties.get("color-use-theme")==="none",Z=c.properties.get("color"),K=c.properties.get("intensity"),te=Math.max(n.ad.vec3.dot([0,0,1],L),0),ae=[0,0,0];n.ad.vec3.scale(ae,Z.toRenderColor(j?null:g.getLut(o.scope)).toArray01Linear().slice(0,3),K);const ce=[0,0,0];return n.ad.vec3.scale(ce,R.toRenderColor(A?null:g.getLut(c.scope)).toArray01Linear().slice(0,3),te*C),n.cg([ae[0]>0?ae[0]/(ae[0]+ce[0]):0,ae[1]>0?ae[1]/(ae[1]+ce[1]):0,ae[2]>0?ae[2]/(ae[2]+ce[2]):0])}function Kl(g,o,c,A,R,C){const P=g.zoom,L=g.scale,j=g.worldSize,Z=1/j,K=g.aspect,te=Math.sqrt(1+K*K)*Math.tan(.5*g.fovX),ae=te*te,ce=A-c,Ce=A+c;let Re,Pe;ae>ce/Ce?(Re=A,Pe=A*te):(Re=.5*Ce*(1+ae),Pe=.5*Math.sqrt(ce*ce+2*(A*A+c*c)*ae+Ce*Ce*ae*ae));const Ne=g.projection.pixelsPerMeter(g.center.lat,j),Ge=g._camera.getCameraToWorldMercator(),et=[0,0,-Re*Z];n.ad.vec3.transformMat4(et,et,Ge);let Xe=Pe*Z;const ct=g._edgeInsets;if(!(ct.left===0&&ct.top===0&&ct.right===0&&ct.bottom===0||ct.left===ct.right&&ct.top===ct.bottom)){const da=g._camera.getWorldToCamera(g.worldSize,g.projection.zAxisUnit==="meters"?Ne:1),$t=g._camera.getCameraToClipPerspective(g._fov,g.width/g.height,c,A);$t[8]=2*-g.centerOffset.x/g.width,$t[9]=2*g.centerOffset.y/g.height;const pa=new Float64Array(16);n.ad.mat4.mul(pa,$t,da);const Ia=new Float64Array(16);n.ad.mat4.invert(Ia,pa);const La=n.bR.fromInvProjectionMatrix(Ia,j,P,!0);for(const Pa of La.points){const sr=((nt=Pa)[0]/=L,nt[1]/=L,nt[2]=n.bH(nt[2],g._center.lat),nt);Xe=Math.max(Xe,n.ad.vec3.len(n.ad.vec3.subtract([],et,sr)))}}var nt;Xe*=R/(R-1);const it=Math.acos(o[2]),st=Math.atan2(-o[0],-o[1]),yt=new bs;yt.position=et,yt.setPitchBearing(it,st);const wt=yt.getWorldToCamera(j,Ne),Yt=Xe*j,Lt=Math.min(g._mercatorZfromZoom(17)*j*-2,-2*Yt),aa=yt.getCameraToClipOrthographic(-Yt,Yt,-Yt,Yt,Lt,(Yt+C*Ne)/o[2]),ua=new Float64Array(16);n.ad.mat4.multiply(ua,aa,wt);const Sa=n.ad.vec3.fromValues(Math.floor(1e6*et[0])/1e6*j,Math.floor(1e6*et[1])/1e6*j,0),Mt=.5*R,ia=[0,0,0];n.ad.vec3.transformMat4(ia,Sa,ua),n.ad.vec3.scale(ia,ia,Mt);const Nt=[Math.floor(ia[0]),Math.floor(ia[1]),Math.floor(ia[2])],sa=[0,0,0];n.ad.vec3.sub(sa,ia,Nt),n.ad.vec3.scale(sa,sa,-1/Mt);const Qt=new Float64Array(16);return n.ad.mat4.identity(Qt),n.ad.mat4.translate(Qt,Qt,sa),n.ad.mat4.multiply(ua,Qt,ua),[ua,Yt]}class nh extends n.E{constructor(o){super(),this.requestManager=o,this.models={"":{}},this.modelUris={"":{}},this.numModelsLoading={}}loadModel(o,c){return n.aN(this.requestManager.transformRequest(c,n.R.Model).url).then(A=>{if(!A)return;const R=n.aO(A),C=new n.aP(o,void 0,void 0,R);return C.computeBoundsAndApplyParent(),C}).catch(A=>{if(A&&A.status===404)return null;this.fire(new n.z(new Error(`Could not load model ${o} from ${c}: ${A.message}`)))})}load(o,c,A={keepNumReferences:!1}){this.models[c]||(this.models[c]={});const R=Object.keys(o);this.numModelsLoading[c]=(this.numModelsLoading[c]||0)+R.length;const C=[];for(const P of R)C.push(this.loadModel(P,o[P]));Promise.allSettled(C).then(P=>{for(let L=0;L<P.length;L++){const{status:j,value:Z}=P[L];if(j==="fulfilled"&&Z){const K=this.models[c][R[L]];this.models[c][R[L]]={model:Z,numReferences:A.keepNumReferences&&K?K.numReferences:1}}}this.numModelsLoading[c]-=R.length,this.fire(new n.A("data",{dataType:"style"}))}).catch(P=>{this.fire(new n.z(new Error(`Could not load models: ${P.message}`)))})}isLoaded(){for(const o in this.numModelsLoading)if(this.numModelsLoading[o]>0)return!1;return!0}hasModel(o,c){return!!this.getModel(o,c)}getModel(o,c){return this.models[c]||(this.models[c]={}),this.models[c][o]?this.models[c][o].model:void 0}addModel(o,c,A){this.models[A]||(this.models[A]={}),this.modelUris[A]||(this.modelUris[A]={}),this.hasModel(o,A)&&this.models[A][o].numReferences++,this.modelUris[A][o]=this.requestManager.normalizeModelURL(c),this.load({[o]:this.modelUris[A][o]},A)}addModels(o,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const A=this.modelUris[c];for(const R in o)this.models[c][R]={},A[R]=this.requestManager.normalizeModelURL(o[R]);this.load(A,c,{keepNumReferences:!0})}reloadModels(o){this.load(this.modelUris[o],o)}addModelsFromBucket(o,c){this.models[c]||(this.models[c]={}),this.modelUris[c]||(this.modelUris[c]={});const A={};for(const R of o)this.hasModel(R,c)?this.models[c][R].numReferences++:(this.modelUris[c][R]=this.requestManager.normalizeModelURL(R),A[R]=this.modelUris[c][R]);this.load(A,c)}removeModel(o,c){if(this.models[c]&&this.models[c][o]&&(this.models[c][o].numReferences--,this.models[c][o].numReferences===0)){const A=this.models[c][o].model;delete this.models[c][o],delete this.modelUris[c][o],A.destroy()}}listModels(o){return this.models[o]||(this.models[o]={}),Object.keys(this.models[o])}upload(o,c){this.models[c]||(this.models[c]={});for(const A in this.models[c])this.models[c][A].model&&this.models[c][A].model.upload(o.context)}}const Sl=new n.a7({data:new n.a8(n.a5.colorTheme.data)}),Ro={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Sd(g){return g=g||{},Object.assign(g,Ro)}class Dc extends n.E{constructor(o){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},n.aQ(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=o,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(o=>{o.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new n.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=o.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=o.stylesheet.indoor.buildingFeaturesetId,this._scope=o.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:o=>(o.feature&&o.feature.properties.floorplan&&this.selectFloorplan(o.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(o){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(P,L){const[j,Z]=P,{center:K,radius:te}=L,[ae,ce]=K,Ce=Math.abs(j-ae);return Math.sqrt((Ce>180?360-Ce:Ce)**2+(Z-ce)**2)<=te}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new n.A("floorplangone")));const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=new n.P(this._map.transform.width/2,this._map.transform.height/2),R=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],C=this._map.queryRenderedFeatures(o?R:A,c);C.length>0&&(this._selectedFloorplan&&C[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=C[0],this._floorplanSelected(!1)))}_floorplanSelected(o){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(C){const[[P,L],[j,Z]]=C,K=(j-P+360)%360,te=K>180?360-K:K;return{center:[(P+te/2+360)%360,(L+Z)/2],radius:Math.sqrt(te**2+(Z-L)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const c=this._floorplanStates[this._indoorData.id].selectedBuilding,A=this._floorplanStates[this._indoorData.id].selectedLevel;let R;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const C of this._indoorData.levels)C.id===this._selectedLevel.id&&(R=C.id);if(this.fire(new n.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:R})),c){const C=this._indoorData.buildings.find(P=>P.id===c);this._buildingSelected(C,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(A){const C=this._indoorData.levels.find(P=>P.id===A);this._updateLevels(C,o)}else o&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(o,c){c&&o&&o.extent&&this._map.fitBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=o?o.id:void 0;const A=this._indoorData.levels.filter(R=>o.levels.includes(R.id));this.fire(new n.A("buildingselected",{buildingId:o.id,levels:A}))}_levelSelected(o){if(o==="overview")this._updateLevels(void 0,!0);else{const c=this._indoorData.levels.find(A=>A.id===o);this._updateLevels(c,!0)}this.fire(new n.A("levelselected",{levelId:o==="overview"?void 0:o}))}_updateLevels(o,c){if(!o)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(c&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function A(Z){const K=Z.indexOf("/floor/");if(K===-1)return Z;const te=K+7,ae=Z.indexOf("/",te);return ae===-1?Z.slice(te):Z.slice(te,ae)}this._selectedLevel=o,this._floorplanStates[this._indoorData.id].selectedLevel=o?o.id:void 0;const R=[],C={},P={},L={},j={};for(const Z of this._indoorData.levels)if(R.push(Z.id),C[Z.id]=Z.height,P[Z.id]=Z.base,o){if(this.mergeFloors){const K=A(o.id),te=A(Z.id);L[Z.id]=te===K?"true":"false"}else L[Z.id]=Z.id===o.id?"true":"false";j[Z.id]=Z.base<o.base?"true":"false"}else j[Z.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",R]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",C]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",P]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",L]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",j]),o&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!o.isUnderground),c&&o.extent)){const Z=this._map.cameraForBounds(o.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),K=this._map.getZoom(),te=Z.zoom?Math.abs(K-Z.zoom):0;this._map.fitBounds(o.extent,te>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:K})}}selectFloorplan(o){const c={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},A=[new n.P(0,0),new n.P(this._map.transform.width,this._map.transform.height)],R=this._map.queryRenderedFeatures(A,c);if(R.length>0){for(const C of R)if(JSON.parse(C.properties["indoor-data"]).floorplanIDs.includes(o)){this._selectedFloorplan=C,this._floorplanSelected(!0);break}}}selectBuilding(o){const c=this._indoorData.buildings.find(A=>A.id===o);this._buildingSelected(c,!0)}selectLevel(o){this._levelSelected(o)}}function Cl(g){if(!g.metadata||!g.metadata.content_area)return;const o=n.q.devicePixelRatio,{left:c,top:A,width:R,height:C}=g.metadata.content_area,P=c*o,L=A*o;return[P,L,P+R*o,L+C*o]}function dc(g){if(g)return g.map(([o,c])=>[o*n.q.devicePixelRatio,c*n.q.devicePixelRatio])}class mu{constructor(o,c){this.id=o,this.style=c}addIcons(o){const c=new Map;for(const[A,R]of o.entries()){const C=n.I.from({name:A,iconsetId:this.id});c.set(C,R)}this.style.addImages(c)}}const ji=(g,o)=>kt(g,o&&o.filter(c=>c.identifier!=="source.canvas")),pf=n.aA(Tn,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),Js=n.aA(Tn,["setCenter","setZoom","setBearing","setPitch"]),fo=new Set(["background","sky","slot","custom"]),Cd={version:8,layers:[],sources:{}},bd={duration:300,delay:0};class Qs extends n.E{constructor(o,c={}){super(),this.map=o,this.scope=c.scope||"",this.globalId=null,this.fragments=[],this.importDepth=c.importDepth||0,this.importsCache=c.importsCache||new Map,this.resolvedImports=c.resolvedImports||new Set,this.transition=n.l({},bd),this._buildingIndex=new zc(this),this.crossTileSymbolIndex=new Xs,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=c.styleChanges||new Ea,this.dispatcher=c.dispatcher?c.dispatcher:new n.D(n.cj(),this),c.imageManager?this.imageManager=c.imageManager:(this.imageManager=new la(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=c.glyphManager?c.glyphManager:new n.ck(o._requestManager,c.localFontFamily?n.cl.all:c.localIdeographFontFamily?n.cl.ideographs:n.cl.none,c.localFontFamily||c.localIdeographFontFamily),c.modelManager?this.modelManager=c.modelManager:(this.modelManager=new nh(o._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=c.configOptions?c.configOptions:new Map,this._configDependentLayers=c.configDependentLayers?c.configDependentLayers:new Set,this._config=c.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:c.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=c.initialConfig,this.dispatcher.broadcast("setReferrer",n.cm());const A=this;this._rtlTextPluginCallback=Qs.registerForPluginStateChange(R=>{A.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:R.pluginStatus,pluginURL:R.pluginURL},(C,P)=>{if(n.cn(C),P&&P.every(L=>L))for(const L in A._sourceCaches){const j=A._sourceCaches[L],Z=j.getSource().type;Z!=="vector"&&Z!=="geojson"||j.reload()}})}),this.on("data",R=>{if(R.dataType!=="source"||R.sourceDataType!=="metadata")return;const C=this.getOwnSource(R.sourceId);if(C&&C.vectorLayerIds)for(const P in this._layers){const L=this._layers[P];L.source===C.id&&this._validateLayer(L)}})}load(o){return o?(typeof o=="string"?this.loadURL(o):this.loadJSON(o),this):this}_getGlobalId(o){if(!o)return null;if(typeof o=="string"){if(n.f(o))return o;const c=n.co(o);if(!c.startsWith("http"))try{return new URL(c,location.href).toString()}catch{return c}return c}return`json://${n.cp(JSON.stringify(o))}`}_diffStyle(o,c,A){this.globalId=this._getGlobalId(o);const R=(C,P)=>{try{P(null,this.setState(C,A))}catch(L){P(L,!1)}};if(typeof o=="string"){const C=this.map._requestManager.normalizeStyleURL(o),P=this.map._requestManager.transformRequest(C,n.R.Style);n.n(P,(L,j)=>{L?this.fire(new n.z(L)):j&&R(j,c)})}else typeof o=="object"&&R(o,c)}loadURL(o,c={}){this.fire(new n.A("dataloading",{dataType:"style"}));const A=typeof c.validate=="boolean"?c.validate:!n.f(o);this.globalId=this._getGlobalId(o),o=this.map._requestManager.normalizeStyleURL(o,c.accessToken),this.resolvedImports.add(o);const R=this.importsCache.get(o);if(R)return this._load(R,A);const C=this.map._requestManager.transformRequest(o,n.R.Style);this._request=n.n(C,(P,L)=>{if(this._request=null,P)this.fire(new n.z(P));else if(L)return this.importsCache.set(o,L),this._load(L,A)})}loadJSON(o,c={}){this.fire(new n.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(o),this._request=n.q.frame(()=>{this._request=null,this._load(o,c.validate!==!1)})}loadEmpty(){this.fire(new n.A("dataloading",{dataType:"style"})),this._load(Cd,!1)}_loadImports(o,c,A){if(this.importDepth>=4)return n.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const R=[];for(const C of o){const P=this._createFragmentStyle(C),L=new Promise(K=>{P.once("style.import.load",K),P.once("error",K)}).then(()=>this.mergeAll());if(R.push(L),this.resolvedImports.has(C.url)){P.loadEmpty();continue}const j=C.data||this.importsCache.get(C.url);j?(P.loadJSON(j,{validate:c}),this._isInternalStyle(j)&&(P.globalId=null)):C.url?P.loadURL(C.url,{validate:c}):P.loadEmpty();const Z={style:P,id:C.id,config:C.config};if(A){const K=this.fragments.findIndex(({id:te})=>te===A);this.fragments=this.fragments.slice(0,K).concat(Z).concat(this.fragments.slice(K))}else this.fragments.push(Z)}return Promise.allSettled(R)}getImportGlobalIds(o=this,c=new Set){for(const A of o.fragments)A.style.globalId&&c.add(A.style.globalId),this.getImportGlobalIds(A.style,c);return[...c.values()]}_createFragmentStyle(o){const c=this.scope?n.C(o.id,this.scope):o.id;let A;const R=this._initialConfig&&this._initialConfig[c];(o.config||R)&&(A=n.l({},o.config,R));const C=new Qs(this.map,{scope:c,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:A,configOptions:this.options,colorThemeOverride:o["color-theme"],configDependentLayers:this._configDependentLayers});return C.setEventedParent(this.map,{style:C}),C}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(o){return this.isRootStyle()&&(o.fragment||!!o.schema&&o.fragment!==!1)}_load(o,c){const A=o.indoor?Sd(o.schema):o.schema;if(this._isInternalStyle(o)){const P=n.l({},Cd,{imports:[{id:"basemap",data:o,url:""}]});return void this._load(P,c)}if(this.updateConfig(this._config,A),c&&ji(this,Ji(o)))return;this._loaded=!0,this.stylesheet=n.cq(o);const R=()=>{for(const Z in o.sources)this.addSource(Z,o.sources[Z],{validate:!1,isInitialLoad:!0});if(o.iconsets)for(const Z in o.iconsets)this.addIconset(Z,o.iconsets[Z]);o.sprite?this._loadIconset(o.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(o.glyphs);const P=th(this.stylesheet.layers);if(this._order=P.map(Z=>Z.id),this.stylesheet.light&&n.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const Z=this.stylesheet.lights[0];this.light=new qt(Z.properties,Z.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new qt(this.stylesheet.light)),this._layers={};for(const Z of P){const K=n.cv(Z,this.scope,this._styleColorTheme.lut,this.options);K.configDependencies.size!==0&&this._configDependentLayers.add(K.fqid),K.setEventedParent(this,{layer:{id:K.id}}),this._layers[K.id]=K;const te=this.getOwnLayerSourceCache(K),ae=!!this.directionalLight&&this.directionalLight.shadowsEnabled();te&&K.canCastShadows()&&ae&&(te.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const L=this.stylesheet.terrain;L&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(L,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new n.A("data",{dataType:"style"}));const j=this.isRootStyle();o.imports?this._loadImports(o.imports,c).then(()=>{this._reloadImports(),this.fire(new n.A(j?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new n.A(j?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const C=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(C){const P=this._evaluateColorThemeData(C);this._loadColorTheme(P).then(()=>{R()}).catch(L=>{n.w(`Couldn't load color theme from the stylesheet: ${L}`),R()})}else this._styleColorTheme.lut=null,R()}isRootStyle(){return this.importDepth===0}mergeAll(){let o,c,A,R,C,P,L,j,Z,K;const te={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(ae=>{if(ae.stylesheet){if(ae.light!=null&&(o=ae.light),ae.stylesheet.lights)for(const ce of ae.stylesheet.lights)ce.type==="ambient"&&ae.ambientLight!=null&&(c=ae.ambientLight),ce.type==="directional"&&ae.directionalLight!=null&&(A=ae.directionalLight);R=this._prioritizeTerrain(R,ae.terrain,ae.stylesheet.terrain),ae.stylesheet.fog&&ae.fog!=null&&(C=ae.fog),ae.stylesheet.snow&&ae.snow!=null&&(P=ae.snow),ae.stylesheet.rain&&ae.rain!=null&&(L=ae.rain),ae.stylesheet.camera!=null&&(K=ae.stylesheet.camera),ae.stylesheet.projection!=null&&(j=ae.stylesheet.projection),ae.stylesheet.transition!=null&&(Z=ae.stylesheet.transition),te[ae.scope]=ae._styleColorTheme}}),this.light=o,this.ambientLight=c,this.directionalLight=A,this.fog=C,this.snow=P,this.rain=L,this._styleColorThemeForScope=te,R===null?delete this.terrain:this.terrain=R,this.camera=K||{"camera-projection":"perspective"},this.projection=j||{name:"mercator"},this.transition=n.l({},bd,Z),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(o){const c=A=>{for(const R of A.fragments)c(R.style);o(A)};c(this)}_prioritizeTerrain(o,c,A){const R=o&&o.drapeRenderMode===0;return A===null?c&&c.drapeRenderMode===0?c:R?o:null:c!=null&&(!o||R||c&&c.drapeRenderMode===1)?c:o}mergeTerrain(){let o;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(c=>{o=this._prioritizeTerrain(o,c.terrain,c.stylesheet.terrain)}),o===null?delete this.terrain:this.terrain=o}mergeProjection(){let o;this.forEachFragmentStyle(c=>{c.stylesheet.projection!=null&&(o=c.stylesheet.projection)}),this.projection=o||{name:"mercator"}}mergeSources(){const o={},c={},A={};this.forEachFragmentStyle(R=>{for(const C in R._sourceCaches){const P=n.C(C,R.scope);o[P]=R._sourceCaches[C]}for(const C in R._otherSourceCaches){const P=n.C(C,R.scope);c[P]=R._otherSourceCaches[C]}for(const C in R._symbolSourceCaches){const P=n.C(C,R.scope);A[P]=R._symbolSourceCaches[C]}}),this._mergedSourceCaches=o,this._mergedOtherSourceCaches=c,this._mergedSymbolSourceCaches=A}mergeLayers(){const o={},c=[],A={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(C=>{for(const P of C._order){const L=C._layers[P];if(L.type==="slot"){const j=n.cr(P);if(o[j])continue;o[j]=[]}L.slot&&o[L.slot]?o[L.slot].push(L):c.push(L)}}),this._mergedOrder=[];const R=(C=[])=>{for(const P of C)if(P.type==="slot"){const L=n.cr(P.id);o[L]&&R(o[L]),this._mergedSlots.push(L)}else{const L=n.C(P.id,P.scope);this._mergedOrder.push(L),A[L]=P,P.is3D(!!this.terrain)&&(this._has3DLayers=!0),P.type==="circle"&&(this._hasCircleLayers=!0),P.type==="symbol"&&(this._hasSymbolLayers=!0),P.type==="clip"&&(this._clipLayerPresent=!0)}};R(c),this._mergedOrder.sort((C,P)=>{const L=A[C],j=A[P];return L.hasInitialOcclusionOpacityProperties?j.is3D(!!this.terrain)?1:0:L.is3D(!!this.terrain)&&j.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=A,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(o){return this.stylesheet.camera=n.l({},this.stylesheet.camera,o),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(o){return o.data?function(c,A,R){const C=n.l({},A);for(const L of Object.keys(n.a5.colorTheme))C[L]===void 0&&(C[L]=n.a5.colorTheme[L].default);const P=new n.a6(Sl,c,new Map(R));return P.setTransitionOrValue(C,R),P.untransitioned().possiblyEvaluate(new n.aa(0))}(this.scope,o,this.options).get("data"):null}_loadColorTheme(o){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const c=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((A,R)=>{const C="data:image/png;base64,";if(!o||o.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void A();let P=o;P.startsWith(C)||(P=C+P);const L=n.I.from("mapbox-reserved-lut"),j=new Image;j.src=P,j.onerror=()=>{this._styleColorTheme.lutLoading=!1,R(new Error("Failed to load image data"))},j.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==c)return void A();this._styleColorTheme.lutLoading=!1;const{width:Z,height:K,data:te}=n.q.getImageData(j);if(K>32)return void R(new Error("The height of the image must be less than or equal to 32 pixels."));if(Z!==K*K)return void R(new Error("The width of the image must be equal to the height squared."));this.getImage(L)&&this.removeImage(L),this.addImage(L,{data:new n.r({width:Z,height:K},te),pixelRatio:1,sdf:!1,usvg:!1,version:0});const ae=this.imageManager.getImage(L,this.scope);ae?(this._styleColorTheme.lut={image:ae.data,data:o},A()):R(new Error("Missing LUT image."))}})}getLut(o){const c=this._styleColorThemeForScope[o];return c?c.lut:null}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(o){this._spriteRequest=function(c,A,R){let C,P,L;const j=n.q.devicePixelRatio>1?"@2x":"";let Z=n.n(A.transformRequest(A.normalizeSpriteURL(c,j,".json"),n.R.SpriteJSON),(ae,ce)=>{Z=null,L||(L=ae,C=ce,te())}),K=n.o(A.transformRequest(A.normalizeSpriteURL(c,j,".png"),n.R.SpriteImage),(ae,ce)=>{K=null,L||(L=ae,P=ce,te())});function te(){if(L)R(L);else if(C&&P){const ae=n.q.getImageData(P),ce={};for(const Ce in C){const{width:Re,height:Pe,x:Ne,y:Ge,sdf:et,pixelRatio:Xe,stretchX:ct,stretchY:nt,content:it}=C[Ce],st=new n.r({width:Re,height:Pe});n.r.copy(ae,st,{x:Ne,y:Ge},{x:0,y:0},{width:Re,height:Pe},null),ce[Ce]={data:st,pixelRatio:Xe,sdf:et,stretchX:ct,stretchY:nt,content:it,usvg:!1}}R(null,ce)}}return{cancel(){Z&&(Z.cancel(),Z=null),K&&(K.cancel(),K=null)}}}(o,this.map._requestManager,(c,A)=>{if(this._spriteRequest=null,c)this.fire(new n.z(c));else if(A){const R=new Map;for(const C in A)R.set(n.I.from(C),A[C]);this.addImages(R)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))})}addIconset(o,c){if(c.type==="sprite")return void this._loadSprite(c.url);const A=this.getOwnSource(c.source);if(!A)return void this.fire(new n.z(new Error(`Source "${c.source}" as specified by iconset "${o}" does not exist and cannot be used as an iconset source`)));if(A.type!=="raster-array")return void this.fire(new n.z(new Error(`Source "${c.source}" as specified by iconset "${o}" is not a "raster-array" source and cannot be used as an iconset source`)));this.imageManager.createIconset(this.scope,o);const R=new mu(o,this);A.addIconset(o,R)}_loadIconset(o){if(!n.f(o)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(o);const c=this.map._spriteFormat==="auto";var A,R;this._spriteRequest=(R=(C,P)=>{if(this._spriteRequest=null,C)c?this._loadSprite(o):this.fire(new n.z(C));else if(P){const L=new Map;for(const j in P)L.set(n.I.from(j),P[j]);this.addImages(L)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new n.A("data",{dataType:"style"}))},n.bj((A=this.map._requestManager).transformRequest(A.normalizeIconsetURL(o),n.R.Iconset),(C,P)=>{if(C)return void R(C);const L={},j=n.ch(new n.bi(P));for(const Z of j.icons){const K={version:1,pixelRatio:n.q.devicePixelRatio,content:Cl(Z),stretchX:Z.metadata?dc(Z.metadata.stretch_x_areas):void 0,stretchY:Z.metadata?dc(Z.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:Z};L[Z.name]=K}R(null,L)}))}_validateLayer(o){const c=this.getOwnSource(o.source);if(!c)return;const A=o.sourceLayer;A&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(A)===-1)&&this.fire(new n.z(new Error(`Source layer "${A}" does not exist on source "${c.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;if(!this.imageManager.isLoaded()||this.imageManager.hasPatternsInFlight()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:o}of this.fragments)if(!o.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((o,c)=>{const A=this.fragments[c];return A&&A.style&&(o.data=A.style.serialize()),o})}_serializeSources(){const o={};for(const c in this._sourceCaches){const A=this._sourceCaches[c].getSource();o[A.id]||(o[A.id]=A.serialize())}return o}_serializeLayers(o){const c=[];for(const A of o){const R=this._layers[A];R&&R.type!=="custom"&&c.push(R.serialize())}return c}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(o){return o?this.order:this._mergedOrder}isLayerDraped(o){return!!this.terrain&&o.isDraped(this.getLayerSourceCache(o))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(o){const c=this.getOwnLayer(o);if(c)return c;this.fire(new n.z(new Error(`The layer '${o}' does not exist in the map's style.`)))}_checkSource(o){const c=this.getOwnSource(o);if(c)return c;this.fire(new n.z(new Error(`The source '${o}' does not exist in the map's style.`)))}precompilePrograms(o,c){const A=this.map.painter;if(A)for(let R=o.minzoom||0;R<(o.maxzoom||25.5);R++){const C=o.getProgramIds();if(C)for(const P of C){const L=o.getDefaultProgramParams(P,c.zoom,this._styleColorTheme.lut);L&&(A.style=this,this.fog&&(A._fogVisible=!0,L.overrideFog=!0,A.getOrCreateProgram(P,L)),A._fogVisible=!1,L.overrideFog=!1,A.getOrCreateProgram(P,L),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(L.overrideRtt=!0,A.getOrCreateProgram(P,L)))}}}update(o){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(o),this.directionalLight&&this.directionalLight.recalculate(o);const c=this.calculateLightsBrightness();o.brightness=c||0,c!==this._brightness&&(this._brightness=c,this.dispatcher.broadcast("setBrightness",c));const A=this._changes.isDirty();let R=!1;if(this._changes.isDirty()){const P=this._changes.getLayerUpdatesByScope();for(const L in P){const{updatedIds:j,removedIds:Z}=P[L];(j||Z)&&(this._updateWorkerLayers(L,j,Z),R=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(o),this.light&&this.light.updateTransitions(o),this.ambientLight&&this.ambientLight.updateTransitions(o),this.directionalLight&&this.directionalLight.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this.snow&&this.snow.updateTransitions(o),this.rain&&this.rain.updateTransitions(o),this._changes.reset()}const C={};for(const P in this._mergedSourceCaches){const L=this._mergedSourceCaches[P];C[P]=L.used,L.used=!1,L.tileCoverLift=0}for(const P of this._mergedOrder){const L=this._mergedLayers[P];if(L.recalculate(o,this._availableImages),!L.isHidden(o.zoom)){const j=this.getLayerSourceCache(L);j&&(j.used=!0,j.tileCoverLift=Math.max(j.tileCoverLift,L.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(L,o)}):this.precompilePrograms(L,o))}for(const P in this._mergedSourceCaches){const L=this._mergedSourceCaches[P];if(!L)continue;const j=L._source;j.type==="raster-array"&&j.iconsets&&(L.used=!0)}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&R&&this.mergeLayers();for(const P in C){const L=this._mergedSourceCaches[P];C[P]!==L.used&&L.getSource().fire(new n.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:L.getSource().id}))}this.light&&this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.snow&&this.snow.recalculate(o),this.rain&&this.rain.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),A&&this.fire(new n.A("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=this._changes.getUpdatedImages();if(o.length){for(const c in this._mergedSourceCaches)this._mergedSourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changes.resetUpdatedImages()}}_updateWorkerLayers(o,c,A){const R=this.getFragmentStyle(o);R&&this.dispatcher.broadcast("updateLayers",{layers:c?R._serializeLayers(c):[],scope:o,removedIds:A||[],options:R.options})}setState(o,c){if(this._checkLoaded(),ji(this,Ji(o)))return!1;(o=n.cq(o)).layers=th(o.layers);const A=function(P,L){if(!P)return[{command:Tn.setStyle,args:[L]}];let j=[];try{if(!n.bn(P.version,L.version))return[{command:Tn.setStyle,args:[L]}];if(n.bn(P.center,L.center)||j.push({command:Tn.setCenter,args:[L.center]}),n.bn(P.zoom,L.zoom)||j.push({command:Tn.setZoom,args:[L.zoom]}),n.bn(P.bearing,L.bearing)||j.push({command:Tn.setBearing,args:[L.bearing]}),n.bn(P.pitch,L.pitch)||j.push({command:Tn.setPitch,args:[L.pitch]}),n.bn(P.sprite,L.sprite)||j.push({command:Tn.setSprite,args:[L.sprite]}),n.bn(P.glyphs,L.glyphs)||j.push({command:Tn.setGlyphs,args:[L.glyphs]}),n.bn(P.imports,L.imports)||function(ce=[],Ce=[],Re){Ce=Ce||[];const Pe=(ce=ce||[]).map(An),Ne=Ce.map(An),Ge=ce.reduce(Bs,{}),et=Ce.reduce(Bs,{}),Xe=Pe.slice();let ct,nt,it,st;for(ct=0,nt=0;ct<Pe.length;ct++)it=Pe[ct],et.hasOwnProperty(it)?nt++:(Re.push({command:Tn.removeImport,args:[it]}),Xe.splice(Xe.indexOf(it,nt),1));for(ct=0,nt=0;ct<Ne.length;ct++)it=Ne[Ne.length-1-ct],Xe[Xe.length-1-ct]!==it&&(Ge.hasOwnProperty(it)?(Re.push({command:Tn.removeImport,args:[it]}),Xe.splice(Xe.lastIndexOf(it,Xe.length-nt),1)):nt++,st=Xe[Xe.length-ct],Re.push({command:Tn.addImport,args:[et[it],st]}),Xe.splice(Xe.length-ct,0,it));for(const yt of Ce){const wt=Ge[yt.id];wt&&!n.bn(wt,yt)&&Re.push({command:Tn.updateImport,args:[yt.id,yt]})}}(P.imports,L.imports,j),n.bn(P.transition,L.transition)||j.push({command:Tn.setTransition,args:[L.transition]}),n.bn(P.light,L.light)||j.push({command:Tn.setLight,args:[L.light]}),n.bn(P.fog,L.fog)||j.push({command:Tn.setFog,args:[L.fog]}),n.bn(P.snow,L.snow)||j.push({command:Tn.setSnow,args:[L.snow]}),n.bn(P.rain,L.rain)||j.push({command:Tn.setRain,args:[L.rain]}),n.bn(P.projection,L.projection)||j.push({command:Tn.setProjection,args:[L.projection]}),n.bn(P.lights,L.lights)||j.push({command:Tn.setLights,args:[L.lights]}),n.bn(P.camera,L.camera)||j.push({command:Tn.setCamera,args:[L.camera]}),!n.bn(P["color-theme"],L["color-theme"]))return[{command:Tn.setStyle,args:[L]}];const Z={},K=[];(function(ce,Ce,Re,Pe){let Ne;for(Ne in Ce=Ce||{},ce=ce||{})ce.hasOwnProperty(Ne)&&(Ce.hasOwnProperty(Ne)||ic(Ne,Re,Pe));for(Ne in Ce){if(!Ce.hasOwnProperty(Ne))continue;const Ge=Ce[Ne];ce.hasOwnProperty(Ne)?n.bn(ce[Ne],Ge)||(ce[Ne].type==="geojson"&&Ge.type==="geojson"&&Xa(ce,Ce,Ne)?Re.push({command:Tn.setGeoJSONSourceData,args:[Ne,Ge.data]}):sc(Ne,Ce,Re,Pe)):ks(Ne,Ce,Re)}})(P.sources,L.sources,K,Z);const te=[];P.layers&&P.layers.forEach(ce=>{ce.source&&Z[ce.source]?j.push({command:Tn.removeLayer,args:[ce.id]}):te.push(ce)});let ae=P.terrain;ae&&Z[ae.source]&&(j.push({command:Tn.setTerrain,args:[void 0]}),ae=void 0),j=j.concat(K),n.bn(ae,L.terrain)||j.push({command:Tn.setTerrain,args:[L.terrain]}),function(ce,Ce,Re){Ce=Ce||[];const Pe=(ce=ce||[]).map(An),Ne=Ce.map(An),Ge=ce.reduce(Bs,{}),et=Ce.reduce(Bs,{}),Xe=Pe.slice(),ct=Object.create(null);let nt,it,st,yt,wt,Yt,Lt;for(nt=0,it=0;nt<Pe.length;nt++)st=Pe[nt],et.hasOwnProperty(st)?it++:(Re.push({command:Tn.removeLayer,args:[st]}),Xe.splice(Xe.indexOf(st,it),1));for(nt=0,it=0;nt<Ne.length;nt++)st=Ne[Ne.length-1-nt],Xe[Xe.length-1-nt]!==st&&(Ge.hasOwnProperty(st)?(Re.push({command:Tn.removeLayer,args:[st]}),Xe.splice(Xe.lastIndexOf(st,Xe.length-it),1)):it++,Yt=Xe[Xe.length-nt],Re.push({command:Tn.addLayer,args:[et[st],Yt]}),Xe.splice(Xe.length-nt,0,st),ct[st]=!0);for(nt=0;nt<Ne.length;nt++)if(st=Ne[nt],yt=Ge[st],wt=et[st],!ct[st]&&!n.bn(yt,wt))if(n.bn(yt.source,wt.source)&&n.bn(yt["source-layer"],wt["source-layer"])&&n.bn(yt.type,wt.type)){for(Lt in an(yt.layout,wt.layout,Re,st,null,Tn.setLayoutProperty),an(yt.paint,wt.paint,Re,st,null,Tn.setPaintProperty),n.bn(yt.slot,wt.slot)||Re.push({command:Tn.setSlot,args:[st,wt.slot]}),n.bn(yt.filter,wt.filter)||Re.push({command:Tn.setFilter,args:[st,wt.filter]}),n.bn(yt.minzoom,wt.minzoom)&&n.bn(yt.maxzoom,wt.maxzoom)||Re.push({command:Tn.setLayerZoomRange,args:[st,wt.minzoom,wt.maxzoom]}),yt)yt.hasOwnProperty(Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&Lt!=="slot"&&(Lt.indexOf("paint.")===0?an(yt[Lt],wt[Lt],Re,st,Lt.slice(6),Tn.setPaintProperty):n.bn(yt[Lt],wt[Lt])||Re.push({command:Tn.setLayerProperty,args:[st,Lt,wt[Lt]]}));for(Lt in wt)wt.hasOwnProperty(Lt)&&!yt.hasOwnProperty(Lt)&&Lt!=="layout"&&Lt!=="paint"&&Lt!=="filter"&&Lt!=="metadata"&&Lt!=="minzoom"&&Lt!=="maxzoom"&&Lt!=="slot"&&(Lt.indexOf("paint.")===0?an(yt[Lt],wt[Lt],Re,st,Lt.slice(6),Tn.setPaintProperty):n.bn(yt[Lt],wt[Lt])||Re.push({command:Tn.setLayerProperty,args:[st,Lt,wt[Lt]]}))}else Re.push({command:Tn.removeLayer,args:[st]}),Yt=Xe[Xe.lastIndexOf(st)+1],Re.push({command:Tn.addLayer,args:[wt,Yt]})}(te,L.layers,j)}catch(Z){console.warn("Unable to compute style diff:",Z),j=[{command:Tn.setStyle,args:[L]}]}return j}(this.serialize(),o).filter(P=>!(P.command in Js));if(A.length===0)return!1;const R=A.filter(P=>!(P.command in pf));if(R.length>0)throw new Error(`Unimplemented: ${R.map(P=>P.command).join(", ")}.`);const C=[];return A.forEach(P=>{C.push(this[P.command].apply(this,P.args))}),c&&Promise.all(C).then(c),this.stylesheet=o,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}addImages(o){for(const[c,A]of o.entries()){if(this.getImage(c)&&!c.iconsetId)return this.fire(new n.z(new Error(`An image with the name "${c.name}" already exists.`)));this.imageManager.addImage(c,this.scope,A),this._changes.updateImage(c)}return this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this}addImage(o,c){return this.getImage(o)&&!o.iconsetId?this.fire(new n.z(new Error(`An image with the name "${o.name}" already exists.`))):(this.imageManager.addImage(o,this.scope,c),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this)}updateImage(o,c,A=!1){this.imageManager.updateImage(o,this.scope,c),A&&(this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})))}getImage(o){return this.imageManager.getImage(o,this.scope)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o,this.scope),this._changes.updateImage(o),this._updateWorkerImages(),this.fire(new n.A("data",{dataType:"style"})),this):this.fire(new n.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(o,c,A={}){return this._checkLoaded(),this._validate(mt,`models.${o}`,c,null,A)||(this.modelManager.addModel(o,c,this.scope),this._changes.setDirty()),this}hasModel(o){return this.modelManager.hasModel(o,this.scope)}removeModel(o){return this.hasModel(o)?(this.modelManager.removeModel(o,this.scope),this):this.fire(new n.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(o,c,A={}){if(this._checkLoaded(),this.getOwnSource(o)!==void 0)throw new Error(`There is already a source with ID "${o}".`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(zo,`sources.${o}`,c,null,A))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const R=Do(o,c,this.dispatcher,this);R.scope=this.scope,R.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(R.id),source:R.serialize(),sourceId:R.id}));const C=P=>{const L=(P?"symbol:":"other:")+R.id,j=n.C(L,this.scope),Z=this._sourceCaches[L]=new Wo(j,R,P);(P?this._symbolSourceCaches:this._otherSourceCaches)[R.id]=Z,Z.onAdd(this.map)};C(!1),c.type!=="vector"&&c.type!=="geojson"||C(!0),R.onAdd&&R.onAdd(this.map),A.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(o){this._checkLoaded();const c=this.getOwnSource(o);if(!c)throw new Error("There is no source with this ID");for(const R in this._layers)if(this._layers[R].source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while layer "${R}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===o)return this.fire(new n.z(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const A=this.getOwnSourceCaches(o);for(const R of A){const C=n.cr(R.id);delete this._sourceCaches[C],this._changes.discardSourceCacheUpdate(R.id),R.fire(new n.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:R.getSource().id})),R.setEventedParent(null),R.clearTiles()}return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],this.mergeSources(),c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(o,c){this._checkLoaded(),this.getOwnSource(o).setData(c),this._changes.setDirty()}getOwnSource(o){const c=this.getOwnSourceCache(o);return c&&c.getSource()}getOwnSources(){const o=[];for(const c in this._otherSourceCaches){const A=this.getOwnSourceCache(c);A&&o.push(A.getSource())}return o}areTilesLoaded(){const o=this._mergedSourceCaches;for(const c in o){const A=o[c]._tiles;for(const R in A){const C=A[R];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0}setLights(o){if(this._checkLoaded(),!o)return delete this.ambientLight,void delete this.directionalLight;const c=this._getTransitionParameters();for(const R of o){if(this._validate(hn,"lights",R))return;switch(R.type){case"ambient":if(this.ambientLight){const C=this.ambientLight;C.set(R),C.updateTransitions(c)}else this.ambientLight=new Ni(R,qr||(qr=new n.a7({color:new n.a8(n.a5.properties_light_ambient.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const C=this.directionalLight;C.set(R),C.updateTransitions(c)}else this.directionalLight=new Ni(R,yn||(yn=new n.a7({direction:new n.am(n.a5.properties_light_directional.direction),color:new n.a8(n.a5.properties_light_directional.color),"color-use-theme":new n.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new n.a8(n.a5.properties_light_directional.intensity),"cast-shadows":new n.a8(n.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new n.a8(n.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new n.a8(n.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const A=new n.aa(this.z||0,c);this.ambientLight&&this.ambientLight.recalculate(A),this.directionalLight&&this.directionalLight.recalculate(A),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const o=this.directionalLight,c=this.ambientLight;if(!o||!c)return;const A=ae=>.2126*(ae[0]<=.03928?ae[0]/12.92:Math.pow((ae[0]+.055)/1.055,2.4))+.7152*(ae[1]<=.03928?ae[1]/12.92:Math.pow((ae[1]+.055)/1.055,2.4))+.0722*(ae[2]<=.03928?ae[2]/12.92:Math.pow((ae[2]+.055)/1.055,2.4)),R=o.properties.get("color").toRenderColor(null).toArray01(),C=o.properties.get("intensity"),P=o.properties.get("direction"),L=1-n.cc(P.x,P.y,P.z)[2]/90,j=A(R)*C*L,Z=c.properties.get("color").toRenderColor(null).toArray01(),K=c.properties.get("intensity"),te=A(Z)*K;return Number(((j+te)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const o=[];return this.directionalLight&&o.push(this.directionalLight.get()),this.ambientLight&&o.push(this.ambientLight.get()),o}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(o){if(!o)return this;if(n.cs(o)){const c=n.ct(o),A=this.fragments.find(({id:C})=>C===c);if(!A)throw new Error(`Style import '${o}' not found`);const R=n.cr(o);return A.style.getFragmentStyle(R)}{const c=this.fragments.find(({id:A})=>A===o);return c?c.style:void 0}}setFeaturesetSelectors(o){if(!o)return;const c={},A=(R,C="")=>`${R}::${C}`;this._featuresetSelectors={};for(const R in o){const C=this._featuresetSelectors[R]=[];for(const P of o[R].selectors){if(P.featureNamespace){const j=this.getOwnLayer(P.layer);if(!j){n.w(`Layer is undefined for selector: ${P.layer}`);continue}const Z=A(j.source,j.sourceLayer);if(Z in c&&c[Z]!==P.featureNamespace){n.w(`"featureNamespace ${P.featureNamespace} of featureset ${R}'s selector is not associated to the same source, skip this selector`);continue}c[Z]=P.featureNamespace}let L;if(P.properties)for(const j in P.properties){const Z=n.X(P.properties[j]);Z.result==="success"&&(L=L||{},L[j]=Z.value)}C.push({layerId:P.layer,namespace:P.featureNamespace,properties:L,uniqueFeatureID:P._uniqueFeatureID})}}}getFeaturesetDescriptors(o){const c=this.getFragmentStyle(o);if(!c||!c.stylesheet.featuresets)return[];const A=[];for(const R in c.stylesheet.featuresets)A.push({featuresetId:R,importId:c.scope?c.scope:void 0});return A}getFeaturesetLayers(o,c){const A=this.getFragmentStyle(c),R=A.stylesheet.featuresets;if(!R||!R[o])return this.fire(new n.z(new Error(`The featureset '${o}' does not exist in the map's style and cannot be queried.`))),[];const C=[];for(const P of R[o].selectors){const L=A.getOwnLayer(P.layer);L&&C.push(L)}return C}getConfigProperty(o,c){const A=this.getFragmentStyle(o);if(!A)return null;const R=n.C(c,A.scope),C=A.options.get(R),P=C?C.value||C.default:null;return P?P.serialize():null}setConfigProperty(o,c,A){const R=this.getFragmentStyle(o);if(!R)return;const C=R.stylesheet.indoor?Sd(R.stylesheet.schema):R.stylesheet.schema;if(!C||!C[c])return;const P=n.X(A);if(P.result!=="success")return void ji(this,P.value);const L=P.value.expression,j=n.C(c,R.scope),Z=R.options.get(j);if(!Z)return;let K;const{minValue:te,maxValue:ae,stepValue:ce,type:Ce,values:Re}=C[c],Pe=n.X(C[c].default);Pe.result==="success"&&(K=Pe.value.expression),K?(this.options.set(j,Object.assign({},Z,{value:L,default:K,minValue:te,maxValue:ae,stepValue:ce,type:Ce,values:Re})),this.updateConfigDependencies(c)):this.fire(new n.z(new Error(`No schema defined for the config option "${c}" in the "${o}" fragment.`)))}getConfig(o){const c=this.getFragmentStyle(o);if(!c)return null;const A=c.stylesheet.schema;if(!A)return null;const R={};for(const C in A){const P=n.C(C,c.scope),L=c.options.get(P),j=L?L.value||L.default:null;R[C]=j?j.serialize():null}return R}setConfig(o,c){const A=this.getFragmentStyle(o);A&&(A.updateConfig(c,A.stylesheet.schema),this.updateConfigDependencies())}getSchema(o){const c=this.getFragmentStyle(o);return c?c.stylesheet.schema:null}setSchema(o,c){const A=this.getFragmentStyle(o);A&&(A.stylesheet.schema=c,A.updateConfig(A._config,c),this.updateConfigDependencies())}updateConfig(o,c){if(this._config=o,o||c)if(c)for(const A in c){let R,C;const P=n.X(c[A].default);if(P.result==="success"&&(R=P.value.expression),o&&o[A]!==void 0){const ae=n.X(o[A]);ae.result==="success"&&(C=ae.value.expression)}const{minValue:L,maxValue:j,stepValue:Z,type:K,values:te}=c[A];if(R){const ae=n.C(A,this.scope);this.options.set(ae,{default:R,value:C,minValue:L,maxValue:j,stepValue:Z,type:K,values:te})}else this.fire(new n.z(new Error(`No schema defined for config option "${A}".`)))}else this.fire(new n.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(o){for(const c of this._configDependentLayers){const A=this.getLayer(c);if(A){if(o&&!A.configDependencies.has(o))continue;A.possiblyEvaluateVisibility(),this._updateLayer(A)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(c=>{const A=c._styleColorTheme.colorThemeOverride?c._styleColorTheme.colorThemeOverride:c._styleColorTheme.colorTheme;if(A){const R=c._evaluateColorThemeData(A);(!c._styleColorTheme.lut&&R!==""||c._styleColorTheme.lut&&R!==c._styleColorTheme.lut.data)&&c.setColorTheme(A)}}),this._changes.setDirty()}addLayer(o,c,A={}){this._checkLoaded();const R=o.id;if(this._layers[R])return void this.fire(new n.z(new Error(`Layer with id "${R}" already exists on this map`)));let C;if(o.type==="custom"){if(ji(this,n.cu(o)))return;C=n.cv(o,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof o.source=="object"&&(this.addSource(R,o.source),o=n.cq(o),o=n.l(o,{source:R})),this._validate(be,`layers.${R}`,o,{arrayIndex:-1},A))return;C=n.cv(o,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(C),C.setEventedParent(this,{layer:{id:R}})}C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid);let P=this._order.length;if(c){const K=this._order.indexOf(c);if(K===-1)return void this.fire(new n.z(new Error(`Layer with id "${c}" does not exist on this map.`)));C.slot===this._layers[c].slot?P=K:n.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(P,0,R),this._layerOrderChanged=!0,this._layers[R]=C;const L=this.getOwnLayerSourceCache(C),j=!!this.directionalLight&&this.directionalLight.shadowsEnabled();L&&C.canCastShadows()&&j&&(L.castsShadows=!0);const Z=this._changes.getRemovedLayer(C);if(Z&&C.source&&L&&C.type!=="custom"){this._changes.discardLayerRemoval(C);const K=n.C(C.source,C.scope);Z.type!==C.type?this._changes.updateSourceCache(K,"clear"):(this._changes.updateSourceCache(K,"reload"),L.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),C.scope=this.scope,this.mergeLayers()}moveLayer(o,c){this._checkLoaded();const A=this._checkLayer(o);if(!A||o===c)return;const R=this._order.indexOf(o);this._order.splice(R,1);let C=this._order.length;if(c){const P=this._order.indexOf(c);if(P===-1)return void this.fire(new n.z(new Error(`Layer with id "${c}" does not exist on this map.`)));A.slot===this._layers[c].slot?C=P:n.w(`Layer with id "${c}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(C,0,o),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(o){this._checkLoaded();const c=this._checkLayer(o);if(!c)return;c.setEventedParent(null);const A=this._order.indexOf(o);this._order.splice(A,1),delete this._layers[o],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(c.fqid),this._changes.removeLayer(c);const R=this.getOwnLayerSourceCache(c);if(R&&R.castsShadows){let C=!1;for(const P in this._layers)if(this._layers[P].source===c.source&&this._layers[P].canCastShadows()){C=!0;break}R.castsShadows=C}c.onRemove&&c.onRemove(this.map),this.mergeLayers()}getOwnLayer(o){return this._layers[o]}hasLayer(o){return o in this._mergedLayers}hasLayerType(o){for(const c in this._layers)if(this._layers[c].type===o)return!0;return!1}setLayerZoomRange(o,c,A){this._checkLoaded();const R=this._checkLayer(o);R&&(R.minzoom===c&&R.maxzoom===A||(c!=null&&(R.minzoom=c),A!=null&&(R.maxzoom=A),this._updateLayer(R)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(o,c){this._checkLoaded();const A=this._checkLayer(o);A&&A.slot!==c&&(A.slot=c,this._updateLayer(A))}setFilter(o,c,A={}){this._checkLoaded();const R=this._checkLayer(o);if(R&&!n.bn(R.filter,c))return c==null?(R.filter=void 0,void this._updateLayer(R)):void(this._validate(De,`layers.${R.id}.filter`,c,{layerType:R.type},A)||(R.filter=n.cq(c),this._updateLayer(R)))}getFilter(o){const c=this._checkLayer(o);if(c)return n.cq(c.filter)}setLayoutProperty(o,c,A,R={}){this._checkLoaded();const C=this._checkLayer(o);if(C&&!n.bn(C.getLayoutProperty(c),A)){if(A!=null&&(!R||R.validate!==!1)&&ji(C,At.call(Ji,{key:`layers.${o}.layout.${c}`,layerType:C.type,objectKey:c,value:A,styleSpec:n.a5,style:{glyphs:!0,sprite:!0}})))return;C.setLayoutProperty(c,A),C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid),this._updateLayer(C)}}getLayoutProperty(o,c){const A=this._checkLayer(o);if(A)return A.getLayoutProperty(c)}setPaintProperty(o,c,A,R={}){this._checkLoaded();const C=this._checkLayer(o);if(!C||n.bn(C.getPaintProperty(c),A)||A!=null&&(!R||R.validate!==!1)&&ji(C,at.call(Ji,{key:`layers.${o}.paint.${c}`,layerType:C.type,objectKey:c,value:A,styleSpec:n.a5})))return;const P=C.setPaintProperty(c,A);C.configDependencies.size!==0&&this._configDependentLayers.add(C.fqid),P&&this._updateLayer(C),this._changes.updatePaintProperties(C)}getPaintProperty(o,c){const A=this._checkLayer(o);if(A)return A.getPaintProperty(c)}setFeatureState(o,c){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:j,importId:Z}=o.target,K=this.getFragmentStyle(Z),te=K.getFeaturesetLayers(j);for(const{source:ae,sourceLayer:ce}of te)K.setFeatureState({id:o.id,source:ae,sourceLayer:ce},c)}else if("layerId"in o.target){const{layerId:j}=o.target,Z=this.getLayer(j);this.setFeatureState({id:o.id,source:Z.source,sourceLayer:Z.sourceLayer},c)}return}const A=o.source,R=o.sourceLayer,C=this._checkSource(A);if(!C)return;const P=C.type;if(P==="geojson"&&R)return void this.fire(new n.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(P==="vector"&&!R)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided.")));const L=this.getOwnSourceCaches(A);for(const j of L)j.setFeatureState(R,o.id,c)}removeFeatureState(o,c){if(this._checkLoaded(),"target"in o){if("featuresetId"in o.target){const{featuresetId:j,importId:Z}=o.target,K=this.getFragmentStyle(Z),te=K.getFeaturesetLayers(j);for(const{source:ae,sourceLayer:ce}of te)K.removeFeatureState({id:o.id,source:ae,sourceLayer:ce},c)}else if("layerId"in o.target){const{layerId:j}=o.target,Z=this.getLayer(j);this.removeFeatureState({id:o.id,source:Z.source,sourceLayer:Z.sourceLayer},c)}return}const A=o.source,R=this._checkSource(A);if(!R)return;const C=R.type,P=C==="vector"?o.sourceLayer:void 0;if(C==="vector"&&!P)return void this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new n.z(new Error("A feature id is required to remove its specific state property.")));const L=this.getOwnSourceCaches(A);for(const j of L)j.removeFeatureState(P,o.id,c)}getFeatureState(o){if(this._checkLoaded(),"target"in o){let C;if("featuresetId"in o.target){const{featuresetId:P,importId:L}=o.target,j=this.getFragmentStyle(L),Z=j.getFeaturesetLayers(P);for(const{source:K,sourceLayer:te}of Z){const ae=j.getFeatureState({id:o.id,source:K,sourceLayer:te});if(ae&&!C)C=ae;else if(!n.bn(C,ae))return void this.fire(new n.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in o.target){const{layerId:P}=o.target,L=this.getLayer(P);C=this.getFeatureState({id:o.id,source:L.source,sourceLayer:L.sourceLayer})}return C}const c=o.source,A=o.sourceLayer,R=this._checkSource(c);if(R){if(R.type!=="vector"||A)return o.id===void 0&&this.fire(new n.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(c)[0].getFeatureState(A,o.id);this.fire(new n.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(o){return this.stylesheet.transition=n.l({},this.stylesheet.transition,o),this.transition=this.stylesheet.transition,this}getTransition(){return n.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const o=this.getTerrain(),c=o&&this.terrain&&this.terrain.scope===this.scope?o:this.stylesheet.terrain;return n.cw({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:c,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},A=>A!==void 0)}_updateFilteredLayers(o){for(const c of Object.values(this._mergedLayers))o(c)&&this._updateLayer(c)}_updateLayer(o){this._changes.updateLayer(o);const c=this.getLayerSourceCache(o),A=n.C(o.source,o.scope),R=this._changes.getUpdatedSourceCaches();o.source&&!R[A]&&c&&c.getSource().type!=="raster"&&(this._changes.updateSourceCache(A,"reload"),c.pause()),o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const c=L=>this._mergedLayers[L].is3D(!!this.terrain),A=this.order,R={},C=[];for(let L=A.length-1;L>=0;L--){const j=A[L];if(c(j)){R[j]=L;for(const Z of o){const K=Z[j];if(K)for(const te of K)C.push(te)}}}C.sort((L,j)=>j.intersectionZ-L.intersectionZ);const P=[];for(let L=A.length-1;L>=0;L--){const j=A[L];if(c(j))for(let Z=C.length-1;Z>=0;Z--){const K=C[Z].feature;if(K.layer&&R[K.layer.id]<L)break;P.push(K),C.pop()}else for(const Z of o){const K=Z[j];if(K)for(const te of K)P.push(te.feature)}}return P}queryRenderedFeatures(o,c,A){let R;c&&!Array.isArray(c)&&c.filter&&(this._validate(De,"queryRenderedFeatures.filter",c.filter,null,c),R=n.a_(c.filter));const C={},P=K=>{if(fo.has(K.type))return;const te=this.getOwnLayerSourceCache(K),ae=C[te.id]=C[te.id]||{sourceCache:te,layers:{},has3DLayers:!1};K.is3D(!!this.terrain)&&(ae.has3DLayers=!0),ae.layers[K.fqid]=ae.layers[K.fqid]||{styleLayer:K,targets:[]},ae.layers[K.fqid].targets.push({filter:R})};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new n.z(new Error("parameters.layers must be an Array."))),[];for(const K of c.layers){const te=this._layers[K];if(!te)return this.fire(new n.z(new Error(`The layer '${K}' does not exist in the map's style and cannot be queried for features.`))),[];P(te)}}else for(const K in this._layers)P(this._layers[K]);const L=this._queryRenderedFeatures(o,C,A),j=this._flattenAndSortRenderedFeatures(L),Z=[];for(const K of j)n.ct(K.layer.id)===this.scope&&Z.push(K);return Z}queryRenderedFeatureset(o,c,A){let R;c&&!Array.isArray(c)&&c.filter&&(this._validate(De,"queryRenderedFeatures.filter",c.filter,null,c),R=n.a_(c.filter));const C="mock",P=[];if(c&&c.target)P.push(Object.assign({},c,{targetId:C,filter:R}));else{const K=this.getFeaturesetDescriptors();for(const te of K)P.push({targetId:C,filter:R,target:te});for(const{style:te}of this.fragments){const ae=te.getFeaturesetDescriptors();for(const ce of ae)P.push({targetId:C,filter:R,target:ce})}}const L=this.queryRenderedTargets(o,P,A),j=[],Z=new Set;for(const K of L)for(const te of K.variants[C])Nc(te,K,Z)||j.push(new n.cx(K,te));return j}queryRenderedTargets(o,c,A){const R={},C=(L,j,Z,K)=>{const te=R[j.id]=R[j.id]||{sourceCache:j,layers:{},has3DLayers:!1};if(te.layers[L.fqid]=te.layers[L.fqid]||{styleLayer:L,targets:[]},L.is3D(!!this.terrain)&&(te.has3DLayers=!0),!K)return Z.uniqueFeatureID=!1,void te.layers[L.fqid].targets.push(Z);te.layers[L.fqid].targets.push(Object.assign({},Z,{namespace:K.namespace,properties:K.properties,uniqueFeatureID:K.uniqueFeatureID}))};for(const L of c)if("featuresetId"in L.target){const{featuresetId:j,importId:Z}=L.target,K=this.getFragmentStyle(Z);if(!K||!K._featuresetSelectors)continue;const te=K._featuresetSelectors[j];if(!te){this.fire(new n.z(new Error(`The featureset '${j}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const ae of te){const ce=K.getOwnLayer(ae.layerId);ce&&!fo.has(ce.type)&&C(ce,K.getOwnLayerSourceCache(ce),L,ae)}}else if("layerId"in L.target){const{layerId:j}=L.target,Z=this.getLayer(j);if(!Z||fo.has(Z.type))continue;C(Z,this.getLayerSourceCache(Z),L)}const P=this._queryRenderedFeatures(o,R,A);return this._flattenAndSortRenderedFeatures(P)}_queryRenderedFeatures(o,c,A){const R=[],C=!!this.map._showQueryGeometry,P=Bi.createFromScreenPoints(o,A);for(const L in c){const j=Qd(P,c[L],this._availableImages,A,C);Object.keys(j).length&&R.push(j)}if(this.placement)for(const L in c){if(!c[L].sourceCache._onlySymbols)continue;const j=uu(P.screenGeometry,c[L],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(j).length&&R.push(j)}return R}querySourceFeatures(o,c){const A=c&&c.filter;A&&this._validate(De,"querySourceFeatures.filter",A,null,c);let R=[];const C=this.getOwnSourceCaches(o);for(const P of C)R=R.concat(Vc(P,c));return R}addSourceType(o,c,A){return Qs.getSourceType(o)?A(new Error(`A source type called "${o}" already exists.`)):(Qs.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},A):A(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(o,c,A={}){this._checkLoaded();const R=this.light.getLight();let C=!1;for(const L in o)if(!n.bn(o[L],R[L])){C=!0;break}if(!C)return;const P=this._getTransitionParameters();this.light.setLight(o,c,A),this.light.updateTransitions(P)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=n.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&n.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(o,c=1){if(this._checkLoaded(),!o)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),c===0&&delete this.terrain,o===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let A=o;const R=o.source==null;if(c===1){if(this.disableElevatedTerrain)return;if(typeof A.source=="object"){const L="terrain-dem-src";this.addSource(L,A.source),A=n.cq(A),A=n.l(A,{source:L})}const C=n.l({},A),P={};if(this.terrain&&R){C.source=this.terrain.get().source;const L=this.terrain?this.getFragmentStyle(this.terrain.scope):null;L&&(P.style=L.serialize())}if(this._validate(ui,"terrain",C,P))return}if(!this.terrain||this.terrain.scope!==this.scope&&!R||this.terrain&&c!==this.terrain.drapeRenderMode){if(!A)return;this._createTerrain(A,c),this.fire(new n.A("data",{dataType:"style"}))}else{const C=this.terrain,P=C.get();for(const L of Object.keys(n.a5.terrain))!A.hasOwnProperty(L)&&n.a5.terrain[L].default&&(A[L]=n.a5.terrain[L].default);for(const L in o)if(!n.bn(o[L],P[L])){C.set(o,this.options),this.stylesheet.terrain=o;const j=this._getTransitionParameters({duration:0});C.updateTransitions(j),this.fire(new n.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const c=this.fog=new Gr(o,this.map.transform,this.scope,this.options);this.stylesheet.fog=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_createSnow(o){const c=this.snow=new Hr(o,this.map.transform,this.scope,this.options);this.stylesheet.snow=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_createRain(o){const c=this.rain=new In(o,this.map.transform,this.scope,this.options);this.stylesheet.rain=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.fog=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createFog(o);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(o){if(this._checkLoaded(),!o)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const c=this.snow;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.snow=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createSnow(o);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(o){if(this._checkLoaded(),!o)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const c=this.rain;if(!n.bn(c.get(),o)){c.set(o,this.options),this.stylesheet.rain=c.get();const A=this._getTransitionParameters({duration:0});c.updateTransitions(A)}}else this._createRain(o);this._markersNeedUpdate=!0}_reloadColorTheme(){const o=()=>{for(const R in this._layers)this._layers[R].lut=this._styleColorTheme.lut;for(const R in this._sourceCaches)this._sourceCaches[R].clearTiles()},c=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!c)return this._styleColorTheme.lut=null,void o();const A=this._evaluateColorThemeData(c);this._loadColorTheme(A).then(()=>{this.fire(new n.A("colorthemeset")),o()}).catch(R=>{n.w(`Couldn't set color theme: ${R}`)})}setColorTheme(o){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&n.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=o,this._reloadColorTheme()}setImportColorTheme(o,c){const A=this.getFragmentStyle(o);A&&(A._styleColorTheme.colorThemeOverride=c,A._reloadColorTheme())}_getTransitionParameters(o){return{now:n.q.now(),transition:n.l(this.transition,o)}}updateDrapeFirstLayers(){if(!this.terrain)return;const o=[],c=[];for(const A of this._mergedOrder)this.isLayerDraped(this._mergedLayers[A])?o.push(A):c.push(A);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...c)}_createTerrain(o,c){const A=this.terrain=new Ht(o,c,this.scope,this.options);c===1&&(this.stylesheet.terrain=o),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const R=this._getTransitionParameters({duration:0});A.updateTransitions(R)}_force3DLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="symbol"&&this._updateLayer(c)}}_validate(o,c,A,R,C={}){if(C&&C.validate===!1)return!1;const P=n.l({},this.serialize());return ji(this,o.call(Ji,n.l({key:c,style:P,value:A,styleSpec:n.a5},R)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.cy.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._mergedLayers)this._mergedLayers[o].setEventedParent(null);for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles(),this._mergedSourceCaches[o].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(o){const c=this.getSourceCaches(o);for(const A of c)A.clearTiles()}clearSources(){for(const o in this._mergedSourceCaches)this._mergedSourceCaches[o].clearTiles()}reloadSource(o){const c=this.getSourceCaches(o);for(const A of c)A.resume(),A.reload()}reloadSources(){for(const o of this.getSources())o.reload&&o.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(o=>{o.modelManager.reloadModels(o.scope)})}updateSources(o){let c;this.directionalLight&&(c=Tl(this.directionalLight));for(const A in this._mergedSourceCaches)this._mergedSourceCaches[A].update(o,void 0,void 0,c)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const c=this._sourceCaches[o];c.resume(),c.reload()}}_updatePlacement(o,c,A,R,C,P,L=!1){let j=!1,Z=!1;const K={},te={};for(const ae of this._mergedOrder){const ce=this._mergedLayers[ae];if(ce.type!=="symbol")continue;const Ce=n.C(ce.source,ce.scope);let Re=K[Ce];if(!Re){const Ne=this.getLayerSourceCache(ce);if(!Ne)continue;const Ge=Ne.getRenderableIds(!0).map(et=>Ne.getTileByID(et));te[Ce]=Ge.slice(),Re=K[Ce]=Ge.sort((et,Xe)=>Xe.tileID.overscaledZ-et.tileID.overscaledZ||(et.tileID.isLessThan(Xe.tileID)?-1:1))}const Pe=this.crossTileSymbolIndex.addLayer(ce,Re,c.center.lng,c.projection);j=j||Pe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),L=L||this._layerOrderChanged||R===0,this._layerOrderChanged&&this.fire(new n.A("neworder")),(L||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.q.now(),c.zoom))&&(this.pauseablePlacement=new Sn(c,this._mergedOrder,L,A,R,C,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,K,te,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.q.now()),Z=!0),j&&this.pauseablePlacement.placement.setStale()),Z||j){this._buildingIndex.onNewFrame(c.zoom);for(let ae=0;ae<this._mergedOrder.length;ae++){const ce=this._mergedLayers[this._mergedOrder[ae]];if(ce.type!=="symbol")continue;const Ce=this.isLayerClipped(ce);this.placement.updateLayerOpacities(ce,K[n.C(ce.source,ce.scope)],ae,Ce?P:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.q.now())}}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}addImport(o,c){this._checkLoaded();const A=this.stylesheet.imports=this.stylesheet.imports||[];if(A.findIndex(({id:C})=>C===o.id)!==-1)return void this.fire(new n.z(new Error(`Import with id '${o.id}' already exists in the map's style.`)));if(!c)return A.push(o),this._loadImports([o],!0);const R=A.findIndex(({id:C})=>C===c);return R===-1&&this.fire(new n.z(new Error(`Import with id "${c}" does not exist on this map.`))),this.stylesheet.imports=A.slice(0,R).concat(o).concat(A.slice(R)),this._loadImports([o],!0,c)}updateImport(o,c){this._checkLoaded();const A=this.stylesheet.imports||[],R=this.getImportIndex(o);return R===-1?this:typeof c=="string"?(this.setImportUrl(o,c),this):(c.url&&c.url!==A[R].url&&this.setImportUrl(o,c.url),n.bn(c.config,A[R].config)||this.setImportConfig(o,c.config,c.data.schema),n.bn(c.data,A[R].data)||this.setImportData(o,c.data),this)}moveImport(o,c){this._checkLoaded();let A=this.stylesheet.imports||[];const R=this.getImportIndex(o);if(R===-1)return this;const C=this.getImportIndex(c);if(C===-1)return this;const P=A[R],L=this.fragments[R];return A=A.filter(({id:j})=>j!==o),this.fragments=this.fragments.filter(({id:j})=>j!==o),this.stylesheet.imports=A.slice(0,C).concat(P).concat(A.slice(C)),this.fragments=this.fragments.slice(0,C).concat(L).concat(this.fragments.slice(C)),this.mergeLayers(),this}setImportUrl(o,c){this._checkLoaded();const A=this.stylesheet.imports||[],R=this.getImportIndex(o);if(R===-1)return this;A[R].url=c;const C=this.fragments[R];return C.style=this._createFragmentStyle(A[R]),C.style.on("style.import.load",()=>this.mergeAll()),C.style.loadURL(c),this}setImportData(o,c){this._checkLoaded();const A=this.getImportIndex(o),R=this.stylesheet.imports||[];return A===-1?this:c?(this.fragments[A].style.setState(c),this._reloadImports(),this):(delete R[A].data,this.setImportUrl(o,R[A].url))}setImportConfig(o,c,A){this._checkLoaded();const R=this.getImportIndex(o),C=this.stylesheet.imports||[];if(R===-1)return this;c?C[R].config=c:delete C[R].config;const P=this.fragments[R];A&&P.style.stylesheet&&(P.style.stylesheet.schema=A);const L=P.style.stylesheet&&P.style.stylesheet.schema;return P.config=c,P.style.updateConfig(c,L),this.updateConfigDependencies(),this}removeImport(o){this._checkLoaded();const c=this.stylesheet.imports||[],A=this.getImportIndex(o);A!==-1&&(c.splice(A,1),this.fragments[A].style._remove(),this.fragments.splice(A,1),this._reloadImports())}getImportIndex(o){const c=(this.stylesheet.imports||[]).findIndex(A=>A.id===o);return c===-1&&this.fire(new n.z(new Error(`Import '${o}' does not exist in the map's style and cannot be updated.`))),c}getLayer(o){return this._mergedLayers[o]}getSources(){const o=[];for(const c in this._mergedOtherSourceCaches){const A=this._mergedOtherSourceCaches[c];A&&o.push(A.getSource())}return o}getSource(o,c){const A=this.getSourceCache(o,c);return A&&A.getSource()}getLayerSource(o){const c=this.getLayerSourceCache(o);return c&&c.getSource()}getSourceCache(o,c){const A=n.C(o,c);return this._mergedOtherSourceCaches[A]}getLayerSourceCache(o){const c=n.C(o.source,o.scope);return o.type==="symbol"?this._mergedSymbolSourceCaches[c]:this._mergedOtherSourceCaches[c]}getSourceCaches(o){if(o==null)return Object.values(this._mergedSourceCaches);const c=[];return this._mergedOtherSourceCaches[o]&&c.push(this._mergedOtherSourceCaches[o]),this._mergedSymbolSourceCaches[o]&&c.push(this._mergedSymbolSourceCaches[o]),c}updateSourceCaches(){const o=this._changes.getUpdatedSourceCaches();for(const c in o){const A=o[c];A==="reload"?this.reloadSource(c):A==="clear"&&this.clearSource(c)}}updateLayers(o){const c=this._changes.getUpdatedPaintProperties();for(const A of c){const R=this.getLayer(A);R&&R.updateTransitions(o)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(o){this.stylesheet.glyphs=o,this.glyphManager.setURL(o,this.scope)}getImages(o,c,A){this.imageManager.getImages(c.images,c.scope,A),this._updateTilesForChangedImages();const R=P=>{if(P){const L=c.images.map(j=>n.I.toString(j));P.setDependencies(c.tileID.key,c.type,L)}},C=n.C(c.source,c.scope);R(this._mergedOtherSourceCaches[C]),R(this._mergedSymbolSourceCaches[C])}rasterizeImages(o,c,A){this.imageManager.rasterizeImages(c,A)}getGlyphs(o,c,A){this.glyphManager.getGlyphs(c.stacks,c.scope,A)}getResource(o,c,A){return n.cz(c,A)}getOwnSourceCache(o){return this._otherSourceCaches[o]}getOwnLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}getOwnSourceCaches(o){const c=[];return this._otherSourceCaches[o]&&c.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&c.push(this._symbolSourceCaches[o]),c}_isSourceCacheLoaded(o){const c=this.getOwnSourceCaches(o);return c.length===0?(this.fire(new n.z(new Error(`There is no source with ID '${o}'`))),!1):c.every(A=>A.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(o,c){if(!this._clipLayerPresent&&o.type!=="fill-extrusion")return!1;const A=o.type==="fill-extrusion"&&o.sourceLayer==="building";if(o.is3D(!!this.terrain)){if(A||c&&c.type==="batched-model"||o.type==="model")return!0}else if(o.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(o=>{o.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Qs.getSourceType=function(g){return kl[g]},Qs.setSourceType=function(g,o){kl[g]=o},Qs.registerForPluginStateChange=n.ci;var Mc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,hc=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,yu=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Ic="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",gu=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Lc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,fc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Bu=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,ko=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,cs=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,Yn=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return clamp(mix(lerpx.x,lerpx.y,f.y),0.0,1.0);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const ti=[];Yl(Mc,ti),Yl(yu,ti),Yl(hc,ti);const Zi={"_prelude_fog.vertex.glsl":Lc,"_prelude_terrain.vertex.glsl":gu,"_prelude_shadow.vertex.glsl":cs,"_prelude_fog.fragment.glsl":fc,"_prelude_shadow.fragment.glsl":Yn,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Bu,"_prelude_raster_particle.glsl":ko},ns={};tn("",gu),tn(fc,Lc),tn(Yn,cs),tn(Bu,""),tn(ko,"");const Wl=tn(hc,yu),Fc=Mc;var Jo={background:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? 
smoothstep(0.0,-antialiased_blur,1.0-extrude_length) : 
smoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
#ifdef ELEVATED_ROADS
in float a_circle_z_offset;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
#ifdef ELEVATED_ROADS
world_center.z+=a_circle_z_offset+ELEVATION_BIAS;
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:tn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:tn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:tn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:tn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:tn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),elevatedStructuresDepth:tn(`void main() {
#ifndef DEPTH_TEXTURE
glFragColor=vec4(0.);
#endif
}`,"in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:tn(`#ifdef DEPTH_RECONSTRUCTION
in float v_height;
#endif
void main() {
#ifdef DEPTH_RECONSTRUCTION
if (v_height >=0.0)
discard;
#endif
glFragColor=vec4(1.0,0.0,0.0,1.0);}`,`in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;
#ifdef DEPTH_RECONSTRUCTION
out float v_height;
#endif
void main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);
#ifdef DEPTH_RECONSTRUCTION
if (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;
#endif
gl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}`),elevatedStructures:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in vec3 v_normal;in float v_height;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;
#endif
void main() {vec3 color=vec3(241.0/255.0,236.0/255.0,225.0/255.0);
#ifdef LIGHTING_3D_MODE
vec3 normal=normalize(v_normal);
#ifdef RENDER_SHADOWS
float shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#else
color=apply_lighting(color,normal);
#endif
if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}
#endif
#ifdef FOG
color=fog_apply(color,v_fog_pos);
#endif
vec4 out_color=vec4(color,1.0);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_height);
#endif
glFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {v_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(v_normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fill:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
if (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:tn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:tn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:tn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:tn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec3 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec3 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
float left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),0.001);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
highp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);
#else
v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec3 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec3 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec3 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:tn("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:tn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:tn(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:tn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
#ifdef PROJECTED_POS_ON_VIEWPORT
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);
#else
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    
#endif
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:tn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:tn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Ic),skyboxGradient:tn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Ic),skyboxCapture:tn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:tn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:tn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:tn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:tn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:tn("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:tn("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:tn("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:tn("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Yl(g,o){const c=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let A of c)if(A=A.trim(),A[0]==="#"&&A.includes("if")&&!A.includes("endif")){A=A.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const R=A.split(" ");for(const C of R)o.includes(C)||o.push(C)}}function tn(g,o){const c=/#include\s+"([^"]+)"/g,A=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let R=o.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);R&&(R=R.map(Z=>{const K=Z.split(" ");return K[K.length-1]}),R=[...new Set(R)]);const C={},P=[],L=[];if(g=g.replace(c,(Z,K)=>(L.push(K),"")),(o=o.replace(c,(Z,K)=>(P.push(K),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let j=[...ti];Yl(g,j),Yl(o,j);for(const Z of[...P,...L])Zi[Z]||console.error(`Undefined include: ${Z}`),ns[Z]||(ns[Z]=[],Yl(Zi[Z],ns[Z])),j=[...j,...ns[Z]];return{fragmentSource:g=g.replace(A,(Z,K,te,ae,ce)=>(C[ce]=!0,K==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
in ${te} ${ae} ${ce};
#else
uniform ${te} ${ae} u_${ce};
#endif
`:K==="initialize"?`
#ifdef HAS_UNIFORM_u_${ce}
    ${te} ${ae} ${ce} = u_${ce};
#endif
`:K==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
    in ${te} ${ae} ${ce};
#endif
`:K==="initialize-attribute"?"":void 0)),vertexSource:o=o.replace(A,(Z,K,te,ae,ce)=>{const Ce=ae==="float"?"vec2":ae,Re=ce.match(/color/)?"color":Ce;return K==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
in ${te} ${ae} a_${ce};
#endif
`:C[ce]?K==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
uniform lowp float u_${ce}_t;
in ${te} ${Ce} a_${ce};
out ${te} ${ae} ${ce};
#else
uniform ${te} ${ae} u_${ce};
#endif
`:K==="initialize"?Re==="vec4"?`
#ifndef HAS_UNIFORM_u_${ce}
    ${ce} = a_${ce};
#else
    ${te} ${ae} ${ce} = u_${ce};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ce}
    ${ce} = unpack_mix_${Re}(a_${ce}, u_${ce}_t);
#else
    ${te} ${ae} ${ce} = u_${ce};
#endif
`:K==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
    in ${te} ${ae} a_${ce};
    out ${te} ${ae} ${ce};
#endif
`:K==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
    ${ce} = a_${ce};
#endif
`:void 0:K==="define"?`
#ifndef HAS_UNIFORM_u_${ce}
uniform lowp float u_${ce}_t;
in ${te} ${Ce} a_${ce};
#else
uniform ${te} ${ae} u_${ce};
#endif
`:K==="define-instanced"?Re==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${ce}0;
in vec4 a_${ce}1;
in vec4 a_${ce}2;
in vec4 a_${ce}3;
#else
uniform ${te} ${ae} u_${ce};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${te} ${Ce} a_${ce};
#else
uniform ${te} ${ae} u_${ce};
#endif
`:K==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${ce}
    ${te} ${ae} ${ce} = a_${ce};
#endif
`:Re==="vec4"?`
#ifndef HAS_UNIFORM_u_${ce}
    ${te} ${ae} ${ce} = a_${ce};
#else
    ${te} ${ae} ${ce} = u_${ce};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ce}
    ${te} ${ae} ${ce} = unpack_mix_${Re}(a_${ce}, u_${ce}_t);
#else
    ${te} ${ae} ${ce} = u_${ce};
#endif
`}),staticAttributes:R,usedDefines:j,vertexIncludes:P,fragmentIncludes:L}}class Uc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,c,A,R,C,P,L,j){this.context=o;let Z=this.boundPaintVertexBuffers.length!==R.length;for(let te=0;!Z&&te<R.length;te++)this.boundPaintVertexBuffers[te]!==R[te]&&(Z=!0);let K=this.boundDynamicVertexBuffers.length!==L.length;for(let te=0;!K&&te<L.length;te++)this.boundDynamicVertexBuffers[te]!==L[te]&&(K=!0);if(!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==A||Z||K||this.boundIndexBuffer!==C||this.boundVertexOffset!==P)this.freshBind(c,A,R,C,P,L,j);else{o.bindVertexArrayOES.set(this.vao);for(const te of L)te&&(te.bind(),j&&te.instanceCount&&te.setVertexAttribDivisor(o.gl,c,j));C&&C.dynamicDraw&&C.bind()}}freshBind(o,c,A,R,C,P,L){const j=o.numAttributes,Z=this.context,K=Z.gl;this.vao&&this.destroy(),this.vao=Z.gl.createVertexArray(),Z.bindVertexArrayOES.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=A,this.boundIndexBuffer=R,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=P,c.enableAttributes(K,o),c.bind(),c.setVertexAttribPointers(K,o,C);for(const te of A)te.enableAttributes(K,o),te.bind(),te.setVertexAttribPointers(K,o,C);for(const te of P)te&&(te.enableAttributes(K,o),te.bind(),te.setVertexAttribPointers(K,o,C),L&&te.instanceCount&&te.setVertexAttribDivisor(K,o,L));R&&R.bind(),Z.currentNumAttributes=j}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function bl(g,o){const c=Math.pow(2,o.canonical.z),A=o.canonical.y;return[new n.ac(0,A/c).toLngLat().lat,new n.ac(0,(A+1)/c).toLngLat().lat]}function es(g,o,c,A,R,C,P){const L=g.context,j=L.gl,Z=c.hillshadeFBO;if(!Z)return;g.prepareDrawTile();const K=g.isTileAffectedByFog(o),te=g.getOrCreateProgram("hillshade",{overrideFog:K});L.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,Z.colorAttachment.get());const ae=((Pe,Ne,Ge,et)=>{const Xe=Ge.paint.get("hillshade-shadow-color"),ct=Ge.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",nt=Ge.paint.get("hillshade-highlight-color"),it=Ge.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",st=Ge.paint.get("hillshade-accent-color"),yt=Ge.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",wt=Ge.paint.get("hillshade-emissive-strength");let Yt=n.ak(Ge.paint.get("hillshade-illumination-direction"));if(Ge.paint.get("hillshade-illumination-anchor")==="viewport")Yt-=Pe.transform.angle;else if(Pe.style&&Pe.style.enable3dLights()&&Pe.style.directionalLight){const aa=Pe.style.directionalLight.properties.get("direction"),ua=n.cc(aa.x,aa.y,aa.z);Yt=n.ak(ua[1])}const Lt=!Pe.options.moving;return{u_matrix:et||Pe.transform.calculateProjMatrix(Ne.tileID.toUnwrapped(),Lt),u_image:0,u_latrange:bl(0,Ne.tileID),u_light:[Ge.paint.get("hillshade-exaggeration"),Yt],u_shadow:Xe.toRenderColor(ct?null:Ge.lut),u_highlight:nt.toRenderColor(it?null:Ge.lut),u_emissive_strength:wt,u_accent:st.toRenderColor(yt?null:Ge.lut)}})(g,c,A,g.terrain?o.projMatrix:null);g.uploadCommonUniforms(L,te,o.toUnwrapped());const{tileBoundsBuffer:ce,tileBoundsIndexBuffer:Ce,tileBoundsSegments:Re}=g.getTileBoundsBuffers(c);te.draw(g,j.TRIANGLES,R,C,P,_r.disabled,ae,A.id,ce,Ce,Re)}function pc(g,o,c){if(!o.needsDEMTextureUpload)return;const A=g.context,R=A.gl;A.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||g.getTileTexture(c.stride);const C=c.getPixels();o.demTexture?o.demTexture.update(C,{premultiply:!1}):o.demTexture=new n.T(A,C,R.R32F,{premultiply:!1}),o.needsDEMTextureUpload=!1}function xd(g,o,c){const A=g.context,R=A.gl;if(!o.dem)return;const C=o.dem;if(A.activeTexture.set(R.TEXTURE1),pc(g,o,C),!o.demTexture)return;o.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);const P=C.dim;A.activeTexture.set(R.TEXTURE0);let L=o.hillshadeFBO;if(!L){const ae=new n.T(A,{width:P,height:P,data:null},R.RGBA8);ae.bind(R.LINEAR,R.CLAMP_TO_EDGE),L=o.hillshadeFBO=A.createFramebuffer(P,P,!0,"renderbuffer"),L.colorAttachment.set(ae.texture)}A.bindFramebuffer.set(L.framebuffer),A.viewport.set([0,0,P,P]);const{tileBoundsBuffer:j,tileBoundsIndexBuffer:Z,tileBoundsSegments:K}=g.getMercatorTileBoundsBuffers(),te=[];g.linearFloatFilteringSupported()&&te.push("TERRAIN_DEM_FLOAT_FORMAT"),g.getOrCreateProgram("hillshadePrepare",{defines:te}).draw(g,R.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,_r.disabled,((ae,ce)=>{const Ce=ce.stride,Re=n.ad.mat4.create();return n.ad.mat4.ortho(Re,0,n.ai,-n.ai,0,0,1),n.ad.mat4.translate(Re,Re,[0,-n.ai,0]),{u_matrix:Re,u_image:1,u_dimension:[Ce,Ce],u_zoom:ae.overscaledZ}})(o.tileID,C),c.id,j,Z,K),o.needsHillshadePrepare=!1}class ci{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class zh extends ci{getDefault(){return n.al.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Qo extends ci{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class dl extends ci{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class kc extends ci{getDefault(){return[!0,!0,!0,!0]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Au extends ci{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Gu extends ci{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class mc extends ci{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Ip extends ci{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Oh extends ci{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}}class Dh extends ci{getDefault(){return[0,1]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class el extends ci{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}}class qi extends ci{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class Ai extends ci{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}}class Xl extends ci{getDefault(){const o=this.gl;return[o.ONE,o.ZERO,o.ONE,o.ZERO]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.blendFuncSeparate(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class _u extends ci{getDefault(){return n.al.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Zf extends ci{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(o,o),this.current=o,this.dirty=!1)}}class yc extends ci{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}}class mf extends ci{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Pd extends ci{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let Mh=class extends ci{getDefault(){return null}set(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)}};class Ih extends ci{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Ed extends ci{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class yf extends ci{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Dm extends ci{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class ih extends ci{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Ey extends ci{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class gc extends ci{getDefault(){return null}set(o){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class ju extends ci{getDefault(){return null}set(o){this.gl&&(o!==this.current||this.dirty)&&(this.gl.bindVertexArray(o),this.current=o,this.dirty=!1)}}class vu extends ci{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class Ny extends ci{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class Lh extends ci{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class hl extends ci{constructor(o,c){super(o),this.context=o,this.parent=c}getDefault(){return null}}class tl extends hl{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Fh extends hl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Nd extends hl{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,this.attachment(),c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Lp extends Fh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const Fp=(g,o,c)=>({u_matrix:g,u_image0:0,u_skirt_height:o,u_ground_shadow_factor:c}),Bc=(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(A),u_merc_matrix:c,u_zoom_transition:R,u_merc_center:C,u_image0:0,u_frustum_tl:P,u_frustum_tr:L,u_frustum_br:j,u_frustum_bl:Z,u_globe_pos:K,u_globe_radius:te,u_viewport:ae,u_grid_matrix:Re?Float32Array.from(Re):new Float32Array(9),u_skirt_height:ce,u_far_z_cutoff:Ce});function gf(g,o){return g!=null&&o!=null&&!(!g.hasData()||!o.hasData())&&g.demTexture!=null&&o.demTexture!=null&&g.tileID.key!==o.tileID.key}const al=new class{constructor(){this.operations={}}newMorphing(g,o,c,A,R){if(g in this.operations){const C=this.operations[g];C.to.tileID.key!==c.tileID.key&&(C.queued=c)}else this.operations[g]={startTime:A,phase:0,duration:R,from:o,to:c,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const o=this.operations[g];return{from:o.from,to:o.to,phase:o.phase}}update(g){for(const o in this.operations){const c=this.operations[o];for(c.phase=(g-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,g)){delete this.operations[o];break}}}_nextOp(g,o){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=o,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},Vd={0:null,1:"TERRAIN_VERTEX_MORPHING"};function wu(g,o,c){if(o===0)return 0;const A=o<1&&c===514?.25/o:1;return 6*Math.pow(1.5,22-g)*Math.max(o,1)*A}function zd(g,o){const c=1<<g.z;return!o&&(g.x===0||g.x===c-1)||g.y===0||g.y===c-1}const Gc=g=>({u_matrix:g});function xl(g,o,c,A,R){if(R>0){const C=n.q.now(),P=(C-g.timeAdded)/R,L=o?(C-o.timeAdded)/R:-1,j=c.getSource(),Z=A.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),K=!o||Math.abs(o.tileID.overscaledZ-Z)>Math.abs(g.tileID.overscaledZ-Z),te=K&&g.refreshedUponExpiration?1:n.ay(K?P:1-L,0,1);return g.refreshedUponExpiration&&P>=1&&(g.refreshedUponExpiration=!1),o?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class Zu extends Wo{constructor(o){const c={type:"raster-dem",maxzoom:o.transform.maxZoom},A=new n.D(n.cj(),null),R=Do("mock-dem",c,A,o.style);super("mock-dem",R,!1),R.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,c){o.state="loaded",c(null)}}class jc extends Wo{constructor(o){const c=Do("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new n.D(n.cj(),null),o.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,c,A){if(o.freezeTileCoverage)return;this.transform=o;const R=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((C,P)=>{if(C[P.key]="",!this._tiles[P.key]){const L=new Gl(P,this._source.tileSize*P.overscaleFactor(),o.tileZoom);L.state="loaded",this._tiles[P.key]=L}return C},{});for(const C in this._tiles)C in R||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(o){const c=this.proxyCachedFBO[o];if(c!==void 0){const A=Object.values(c);this.renderCachePool.push(...A),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class qf extends n.aH{constructor(o,c,A){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=c,this.projMatrix=A}}class Od extends n.cK{constructor(o,c){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},o.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),o.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[A,R,C]=function(j){const Z=new n.b5,K=new n.aV,te=131;Z.reserve(17161),K.reserve(33800);const ae=n.ai/128,ce=n.ai+ae/2,Ce=ce+ae;for(let Pe=-ae;Pe<Ce;Pe+=ae)for(let Ne=-ae;Ne<Ce;Ne+=ae){const Ge=Ne<0||Ne>ce||Pe<0||Pe>ce?24575:0,et=n.ay(Math.round(Ne),0,n.ai),Xe=n.ay(Math.round(Pe),0,n.ai);Z.emplaceBack(et+Ge,Xe)}const Re=(Pe,Ne)=>{const Ge=Ne*te+Pe;K.emplaceBack(Ge+1,Ge,Ge+te),K.emplaceBack(Ge+te,Ge+te+1,Ge+1)};for(let Pe=1;Pe<129;Pe++)for(let Ne=1;Ne<129;Ne++)Re(Ne,Pe);return[0,129].forEach(Pe=>{for(let Ne=0;Ne<130;Ne++)Re(Ne,Pe),Re(Pe,Ne)}),[Z,K,32768]}(),P=o.context;this.gridBuffer=P.createVertexBuffer(A,n.b7.members),this.gridIndexBuffer=P.createIndexBuffer(R),this.gridSegments=n.b8.simpleSegment(0,0,A.length,R.length),this.gridNoSkirtSegments=n.b8.simpleSegment(0,0,A.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new jc(c.map),this.orthoMatrix=n.ad.mat4.create(),n.ad.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,n.ai,0,n.ai,0,1);const L=P.gl;this._overlapStencilMode=new Rr({func:L.GEQUAL,mask:255},0,255,L.KEEP,L.KEEP,L.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Zu(c.map),this._pendingGroundEffectLayers=[]}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),this._style=o,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,c,A){if(o&&o.terrain){this._style!==o&&(this.style=o,this._evaluationZoom=void 0);const R=o.terrain.properties,C=o.terrain.drapeRenderMode===0,P=o.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=n.q.now();const L=o.terrain&&o.terrain.scope,j=R.get("source"),Z=C?this._mockSourceCache:o.getSourceCache(j,L);if(!Z)return void n.w(`Couldn't find terrain source "${j}".`);if(this.sourceCache=Z,this._attenuationRange=o.terrain.getAttenuationRange(),this._exaggeration=P?this.calculateExaggeration(c):R.get("exaggeration"),!c.projection.requiresDraping&&P&&this._exaggeration===0)return void this._disable();this.enabled=!0;const K=()=>{this.sourceCache.used&&n.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const te=this.getScaledDemTileSize();this.sourceCache.update(c,te,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,K(),this._initializing=!0),K(),c.updateElevation(!0,A),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0,this._previousZoom=c.zoom}else this._disable()}calculateExaggeration(o){if(this._attenuationRange&&o.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(o.zoom);const c=this._previousCameraAltitude,A=o.getFreeCameraOptions().position.z/o.pixelsPerMeter*o.worldSize;this._previousCameraAltitude=A;const R=c!=null?A-c:Number.MAX_VALUE;if(Math.abs(R)<2)return this._exaggeration;const C=o.zoom,P=this._style.terrain;if(!this._previousUpdateTimestamp)return P.getExaggeration(C);let L=C-this._previousZoom;const j=this._previousUpdateTimestamp;let Z=C;this._evaluationZoom!=null&&(Z=this._evaluationZoom,Math.abs(C-Z)>.5&&(L=.5*(C-Z+L)),L*R<0&&(Z+=L)),this._evaluationZoom=Z;const K=P.getExaggeration(Z),te=K===P.getExaggeration(Math.max(0,Z-.1));if(te&&Math.abs(K-this._exaggeration)<.01)return K;let ae=Math.min(.1,.00375*(this._updateTimestamp-j));return(te||K<.1||Math.abs(L)<1e-4)&&(ae=Math.min(.2,4*ae)),n.ah(this._exaggeration,K,ae)}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._mergedSourceCaches)this._style._mergedSourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,A=this.painter.transform;this._initializing&&(this._initializing=A._centerAltitude===0&&this.getAtPointOrZero(n.ac.fromLngLat(A.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const R=this.proxyCoords=c.getIds().map(j=>{const Z=c.getTileByID(j).tileID;return Z.projMatrix=A.calculateProjMatrix(Z.toUnwrapped()),Z});(function(j,Z){const K=Z.transform.pointCoordinate(Z.transform.getCameraPoint()),te=new n.P(K.x,K.y);j.sort((ae,ce)=>{if(ce.overscaledZ-ae.overscaledZ)return ce.overscaledZ-ae.overscaledZ;const Ce=new n.P(ae.canonical.x+(1<<ae.canonical.z)*ae.wrap,ae.canonical.y),Re=new n.P(ce.canonical.x+(1<<ce.canonical.z)*ce.wrap,ce.canonical.y),Pe=te.mult(1<<ae.canonical.z);return Pe.x-=.5,Pe.y-=.5,Pe.distSqr(Ce)-Pe.distSqr(Re)})})(R,this.painter);const C=this.proxyToSource||{};this.proxyToSource={},R.forEach(j=>{this.proxyToSource[j.key]={}}),this.terrainTileForTile={};const P=this._style._mergedSourceCaches;for(const j in P){const Z=P[j];if(!Z.used||(Z!==this.sourceCache&&this.resetTileLookupCache(Z.id),this._setupProxiedCoordsForOrtho(Z,o[j],C),Z.usedForTerrain))continue;const K=o[j];Z.getSource().reparseOverscaled&&this._assignTerrainTiles(K)}this.proxiedCoords[c.id]=R.map(j=>new qf(j,j.key,this.orthoMatrix)),this._assignTerrainTiles(R),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1;const L={};this._visibleDemTiles=[];for(const j of this.proxyCoords){const Z=this.terrainTileForTile[j.key];if(!Z)continue;const K=Z.tileID.key;K in L||(this._visibleDemTiles.push(Z),L[K]=K)}}_assignTerrainTiles(o){this._initializing||o.forEach(c=>{if(this.terrainTileForTile[c.key])return;const A=this._findTileCoveringTileID(c,this.sourceCache);A&&(this.terrainTileForTile[c.key]=A)})}_prepareDEMTextures(){const o=this.painter.context,c=o.gl;for(const A in this.terrainTileForTile){const R=this.terrainTileForTile[A],C=R.dem;!C||R.demTexture&&!R.needsDEMTextureUpload||(o.activeTexture.set(c.TEXTURE1),pc(this.painter,R,C))}}_prepareDemTileUniforms(o,c,A,R){if(!c||c.demTexture==null)return!1;const C=o.tileID.canonical,P=Math.pow(2,c.tileID.canonical.z-C.z),L=R||"";return A[`u_dem_tl${L}`]=[C.x*P%1,C.y*P%1],A[`u_dem_scale${L}`]=P,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let o=0;const c=this._visibleDemTiles.reduce((A,R)=>{if(!R.dem)return A;const C=R.dem.tree.minimums[0];return C>0&&o++,A+C},0);return o?c/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,c=o.gl;o.activeTexture.set(c.TEXTURE2);const A=this._getLoadedAreaMinimum(),R=new n.cL({width:1,height:1},new Float32Array([A]));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(R,{premultiply:!1}):C=this._emptyDEMTexture=new n.T(o,R,c.R32F,{premultiply:!1}),C}setupElevationDraw(o,c,A){const R=this.painter.context,C=R.gl,P={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};P.u_exaggeration=this.exaggeration();let L=null,j=null,Z=1;if(A&&A.morphing&&this._useVertexMorphing){const ce=A.morphing.srcDemTile,Ce=A.morphing.dstDemTile;Z=A.morphing.phase,ce&&Ce&&(this._prepareDemTileUniforms(o,ce,P,"_prev")&&(j=ce),this._prepareDemTileUniforms(o,Ce,P)&&(L=Ce))}const K=ce=>ce&&ce.demTexture&&this.painter.linearFloatFilteringSupported()?C.LINEAR:C.NEAREST;let te=null;var ae;if(this.enabled?j&&L?(te=L.demTexture,R.activeTexture.set(C.TEXTURE4),j.demTexture.bind(K(j),C.CLAMP_TO_EDGE),P.u_dem_lerp=Z):(L=this.terrainTileForTile[o.tileID.key],te=this._prepareDemTileUniforms(o,L,P)?L.demTexture:this.emptyDEMTexture):te=this.emptyDEMTexture,R.activeTexture.set(C.TEXTURE2),te&&(P.u_dem_size=(ae=te).size[0]===1?1:ae.size[0]-2,te.bind(K(L),C.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(A&&A.useDepthForOcclusion,c,P),A&&A.useMeterToDem&&L){const ce=(1<<L.tileID.canonical.z)*n.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;P.u_meter_to_dem=ce}if(A&&A.labelPlaneMatrixInv&&(P.u_label_plane_matrix_inv=A.labelPlaneMatrixInv),c.setTerrainUniformValues(R,P),this.painter.transform.projection.name==="globe"){const ce=this.globeUniformValues(this.painter.transform,o.tileID.canonical,A&&A.useDenormalizedUpVectorScale);c.setGlobeUniformValues(R,ce)}}globeUniformValues(o,c,A){const R=o.projection;return{u_tile_tl_up:R.upVector(c,0,0),u_tile_tr_up:R.upVector(c,n.ai,0),u_tile_br_up:R.upVector(c,n.ai,n.ai),u_tile_bl_up:R.upVector(c,0,n.ai),u_tile_up_scale:A?n.cM(1):R.upVectorScale(c,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const c=this.painter,A=this.painter.context;o.length!==0&&(A.bindFramebuffer.set(null),A.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(R,C,P,L,j){if(R.transform.projection.name==="globe")(function(Z,K,te,ae,ce){const Ce=Z.context,Re=Ce.gl;let Pe,Ne;const Ge=Z.transform,et=n.cD(Z,Ce,Ge),Xe=(aa,ua)=>{if(Ne===ua)return;const Sa=[Vd[ua],"PROJECTION_GLOBE_VIEW"];et&&Sa.push("CUSTOM_ANTIALIASING");const Mt=Z.isTileAffectedByFog(aa);Pe=Z.getOrCreateProgram("globeRaster",{defines:Sa,overrideFog:Mt}),Ne=ua},ct=Z.colorModeForRenderPass(),nt=new ir(Re.LEQUAL,ir.ReadWrite,Z.depthRangeFor3D);al.update(ce);const it=n.cE(Ge),st=[n.av(Ge.center.lng),n.aC(Ge.center.lat)],yt=Z.globeSharedBuffers,wt=[Ge.width*n.q.devicePixelRatio,Ge.height*n.q.devicePixelRatio],Yt=Float32Array.from(Ge.globeMatrix),Lt={useDenormalizedUpVectorScale:!0};{const aa=Z.transform,ua=wu(aa.zoom,K.exaggeration(),K.sourceCache._source.tileSize);Ne=-1;const Sa=Re.TRIANGLES;for(const Mt of ae){const ia=te.getTile(Mt),Nt=Rr.disabled,sa=K.prevTerrainTileForTile[Mt.key],Qt=K.terrainTileForTile[Mt.key];gf(sa,Qt)&&al.newMorphing(Mt.key,sa,Qt,ce,250),Ce.activeTexture.set(Re.TEXTURE0),ia.texture&&ia.texture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE);const da=al.getMorphValuesForProxy(Mt.key),$t=da?1:0;da&&n.L(Lt,{morphing:{srcDemTile:da.from,dstDemTile:da.to,phase:n.cC(da.phase)}});const pa=n.cF(Mt.canonical),Ia=n.cG(pa.getCenter().lat),La=n.cH(Mt.canonical,pa,Ia,aa.worldSize/aa._pixelsPerMercatorPixel),Pa=n.bc(n.cI(Mt.canonical)),sr=Bc(aa.expandedFarZProjMatrix,Yt,it,Pa,n.ag(aa.zoom),st,aa.frustumCorners.TL,aa.frustumCorners.TR,aa.frustumCorners.BR,aa.frustumCorners.BL,aa.globeCenterInViewSpace,aa.globeRadius,wt,ua,aa._farZ,La);if(Xe(Mt,$t),Pe&&(K.setupElevationDraw(ia,Pe,Lt),Z.uploadCommonUniforms(Ce,Pe,Mt.toUnwrapped()),yt)){const[Lr,pr,zr]=yt.getGridBuffers(Ia,ua!==0);Pe.draw(Z,Sa,nt,Nt,ct,_r.backCCW,sr,"globe_raster",Lr,pr,zr)}}}if(yt&&(Z.renderDefaultNorthPole||Z.renderDefaultSouthPole)){const aa=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];et&&aa.push("CUSTOM_ANTIALIASING"),Pe=Z.getOrCreateProgram("globeRaster",{defines:aa});for(const ua of ae){const{x:Sa,y:Mt,z:ia}=ua.canonical,Nt=Mt===0,sa=Mt===(1<<ia)-1,[Qt,da,$t,pa]=yt.getPoleBuffers(ia,!1);if(pa&&(Nt||sa)){const Ia=te.getTile(ua);Ce.activeTexture.set(Re.TEXTURE0),Ia.texture&&Ia.texture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE);let La=n.cJ(ia,Sa,Ge);const Pa=n.bc(n.cI(ua.canonical)),sr=(Lr,pr)=>Lr.draw(Z,Re.TRIANGLES,nt,Rr.disabled,ct,_r.disabled,Bc(Ge.expandedFarZProjMatrix,La,La,Pa,0,st,Ge.frustumCorners.TL,Ge.frustumCorners.TR,Ge.frustumCorners.BR,Ge.frustumCorners.BL,Ge.globeCenterInViewSpace,Ge.globeRadius,wt,0,Ge._farZ),"globe_pole_raster",pr,$t,pa);K.setupElevationDraw(Ia,Pe,Lt),Z.uploadCommonUniforms(Ce,Pe,ua.toUnwrapped()),Nt&&Z.renderDefaultNorthPole&&sr(Pe,Qt),sa&&Z.renderDefaultSouthPole&&(La=n.ad.mat4.scale(n.ad.mat4.create(),La,[1,-1,1]),sr(Pe,da))}}}})(R,C,P,L,j);else{const Z=R.context,K=Z.gl;let te,ae;const ce=R.shadowRenderer,Ce=Zs(R,R.longestCutoffRange),Re=ct=>{if(ae===ct)return;const nt=[];nt.push(Vd[ct]),Ce.shouldRenderCutoff&&nt.push("RENDER_CUTOFF"),ce&&(nt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ce.useNormalOffset&&nt.push("NORMAL_OFFSET")),te=R.getOrCreateProgram("terrainRaster",{defines:nt}),ae=ct},Pe=R.colorModeForRenderPass(),Ne=new ir(K.LEQUAL,ir.ReadWrite,R.depthRangeFor3D);al.update(j);const Ge=R.transform,et=wu(Ge.zoom,C.exaggeration(),C.sourceCache._source.tileSize);let Xe=[0,0,0];if(ce){const ct=R.style.directionalLight,nt=R.style.ambientLight;ct&&nt&&(Xe=Oc(R.style,ct,nt))}{ae=-1;const ct=K.TRIANGLES,[nt,it]=[C.gridIndexBuffer,C.gridSegments];for(const st of L){const yt=P.getTile(st),wt=Rr.disabled,Yt=C.prevTerrainTileForTile[st.key],Lt=C.terrainTileForTile[st.key];gf(Yt,Lt)&&al.newMorphing(st.key,Yt,Lt,j,250),Z.activeTexture.set(K.TEXTURE0),yt.texture&&yt.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const aa=al.getMorphValuesForProxy(st.key),ua=aa?1:0;let Sa;aa&&(Sa={morphing:{srcDemTile:aa.from,dstDemTile:aa.to,phase:n.cC(aa.phase)}});const Mt=Fp(st.projMatrix,zd(st.canonical,Ge.renderWorldCopies)?et/10:et,Xe);if(Re(ua),!te)continue;C.setupElevationDraw(yt,te,Sa);const ia=st.toUnwrapped();ce&&ce.setupShadows(ia,te),R.uploadCommonUniforms(Z,te,ia,null,Ce),te.draw(R,ct,Ne,wt,Pe,_r.backCCW,Mt,"terrain_raster",C.gridBuffer,nt,it)}}}}(c,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const c=this.painter,A=this.painter.context,R=this.proxySourceCache,C=this.proxiedCoords[R.id],P=this._drapedRenderBatches.shift(),L=c.style.order,j=[];let Z=0;for(const K of C){const te=R.getTileByID(K.proxyTileKey),ae=R.proxyCachedFBO[K.key]?R.proxyCachedFBO[K.key][o]:void 0,ce=ae!==void 0?R.renderCache[ae]:this.pool[Z++],Ce=ae!==void 0;if(te.texture=ce.tex,Ce&&!ce.dirty){j.push(te.tileID);continue}let Re;A.bindFramebuffer.set(ce.fb.framebuffer),this.renderedToTile=!1,ce.dirty&&(A.clear({color:n.al.transparent,stencil:0}),ce.dirty=!1);for(let Pe=P.start;Pe<=P.end;++Pe){const Ne=c.style._mergedLayers[L[Pe]];if(Ne.isHidden(c.transform.zoom))continue;const Ge=c.style.getLayerSourceCache(Ne),et=Ge?this.proxyToSource[K.key][Ge.id]:[K];if(!et)continue;const Xe=et;A.viewport.set([0,0,ce.fb.width,ce.fb.height]),Re!==(Ge?Ge.id:null)&&(this._setupStencil(ce,et,Ne,Ge),Re=Ge?Ge.id:null),c.renderLayer(c,Ge,Ne,Xe)}if(this._drapedRenderBatches.length===0)for(const Pe of this._pendingGroundEffectLayers){const Ne=c.style._mergedLayers[L[Pe]];if(Ne.isHidden(c.transform.zoom))continue;const Ge=c.style.getLayerSourceCache(Ne),et=Ge?this.proxyToSource[K.key][Ge.id]:[K];if(!et)continue;const Xe=et;A.viewport.set([0,0,ce.fb.width,ce.fb.height]),Re!==(Ge?Ge.id:null)&&(this._setupStencil(ce,et,Ne,Ge),Re=Ge?Ge.id:null),c.renderLayer(c,Ge,Ne,Xe)}this.renderedToTile?(ce.dirty=!0,j.push(te.tileID)):Ce||--Z,Z===5&&(Z=0,this.renderToBackBuffer(j))}return this.renderToBackBuffer(j),this.renderingToTexture=!1,A.bindFramebuffer.set(null),A.viewport.set([0,0,c.width,c.height]),P.end+1}postRender(){}isLayerOrderingCorrect(o){const c=o.order.length;let A=-1,R=c;for(let C=0;C<c;++C)this._style.isLayerDraped(o._mergedLayers[o.order[C]])?A=Math.max(A,C):R=Math.min(R,C);return R>A}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{o=Math.min(o,c.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,c,A){if(!this._visibleDemTiles)return null;const R=this._visibleDemTiles.filter(C=>C.dem).map(C=>{const P=C.tileID,L=1<<P.overscaledZ,{x:j,y:Z}=P.canonical,K=j/L,te=(j+1)/L,ae=Z/L,ce=(Z+1)/L;return{minx:K,miny:ae,maxx:te,maxy:ce,t:C.dem.tree.raycastRoot(K,ae,te,ce,o,c,A),tile:C}});R.sort((C,P)=>(C.t!==null?C.t:Number.MAX_VALUE)-(P.t!==null?P.t:Number.MAX_VALUE));for(const C of R){if(C.t==null)return null;const P=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,o,c,A);if(P!=null)return P}return null}_createFBO(){const o=this.painter.context,c=o.gl,A=this.drapeBufferSize;o.activeTexture.set(c.TEXTURE0);const R=new n.T(o,{width:A[0],height:A[1],data:null},c.RGBA8);R.bind(c.LINEAR,c.CLAMP_TO_EDGE);const C=o.createFramebuffer(A[0],A[1],!0,null);return C.colorAttachment.set(R.texture),C.depthAttachment=new Lp(o,C.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,A[0],A[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&c.texParameterf(c.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:C,tex:R,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const o in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const c=this._style._mergedLayers[o],A=c.isHidden(this.painter.transform.zoom);return c.type==="hillshade"||c.type==="custom"?!A&&c.shouldRedrape():!A&&c.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const A of this._style.getSources())if(A instanceof nc){o=!0;break}if(!o)return;const c={};for(let A=0;A<this._style.order.length;++A){const R=this._style._mergedLayers[this._style.order[A]],C=this._style.getLayerSourceCache(R);if(C&&!c[C.id]&&!R.isHidden(this.painter.transform.zoom)&&R.type==="line"&&R.widthExpression()instanceof n.ab){c[C.id]=!0;for(const P of this.proxyCoords){const L=this.proxyToSource[P.key][C.id];if(L)for(const j of L)this._clearRenderCacheForTile(C.id,j)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const A in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[A]._source instanceof Ko){o=!0;break}if(!o)return;const c={};for(let A=0;A<this._style.order.length;++A){const R=this._style._mergedLayers[this._style.order[A]],C=this._style.getLayerSourceCache(R);if(!C||c[C.id]||R.isHidden(this.painter.transform.zoom)||R.type!=="raster")continue;const P=R.paint.get("raster-fade-duration");for(const L of this.proxyCoords){const j=this.proxyToSource[L.key][C.id];if(j)for(const Z of j){const K=xl(C.getTile(Z),C.findLoadedParent(Z,0),C,this.painter.transform,P);(K.opacity!==1||K.mix!==0)&&this._clearRenderCacheForTile(C.id,Z)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const o=this._style.order,c=o.length;if(c===0)return;const A=[];this._pendingGroundEffectLayers=[];let R,C=0,P=this._style._mergedLayers[o[C]];for(;!this._style.isLayerDraped(P)&&P.isHidden(this.painter.transform.zoom)&&++C<c;)P=this._style._mergedLayers[o[C]];for(;C<c;++C){const L=this._style._mergedLayers[o[C]];L.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(L)?R===void 0&&(R=C):(L.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(C),R!==void 0&&(A.push({start:R,end:C-1}),R=void 0)))}if(R!==void 0&&A.push({start:R,end:C-1}),A.length!==0){const L=A[A.length-1];this._pendingGroundEffectLayers.every(j=>j>L.end)||n.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=A}_setupRenderCache(o){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const P=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let L=0;L<P.length;++L){const j=Object.values(P[L]);c.renderCachePool.push(...j)}}return}this._clearRasterLayersFromRenderCache();const A=this.proxyCoords,R=this._tilesDirty;for(let P=A.length-1;P>=0;P--){const L=A[P];if(c.getTileByID(L.key),c.proxyCachedFBO[L.key]!==void 0){const j=o[L.key],Z=this.proxyToSource[L.key];let K=0;for(const te in Z){const ae=Z[te],ce=j[te];if(!ce||ce.length!==ae.length||ae.some((Ce,Re)=>Ce!==ce[Re]||R[te]&&R[te].hasOwnProperty(Ce.key))){K=-1;break}++K}for(const te in c.proxyCachedFBO[L.key])c.renderCache[c.proxyCachedFBO[L.key][te]].dirty=K<0||K!==Object.values(j).length}}const C=[...this._drapedRenderBatches];C.sort((P,L)=>L.end-L.start-(P.end-P.start));for(const P of C)for(const L of A){if(c.proxyCachedFBO[L.key])continue;let j=c.renderCachePool.pop();j===void 0&&c.renderCache.length<50&&(j=c.renderCache.length,c.renderCache.push(this._createFBO())),j!==void 0&&(c.proxyCachedFBO[L.key]={},c.proxyCachedFBO[L.key][P.start]=j,c.renderCache[j].dirty=!0)}this._tilesDirty={}}_setupStencil(o,c,A,R){if(!R||!this._sourceTilesOverlap[R.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,P=C.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let L;if(A.isTileClipped())L=c.length,this._overlapStencilMode.test={func:P.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);L=1,this._overlapStencilMode.test={func:P.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+L>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=L,this._overlapStencilMode.ref=this._stencilRef,A.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):Rr.disabled}_renderTileClippingMasks(o,c){const A=this.painter,R=this.painter.context,C=R.gl;A._tileClippingMaskIDs={},R.setColorMode(br.disabled),R.setDepthMode(ir.disabled);const P=A.getOrCreateProgram("clippingMask");for(const L of o){const j=A._tileClippingMaskIDs[L.key]=--c;P.draw(A,C.TRIANGLES,ir.disabled,new Rr({func:C.ALWAYS,mask:0},j,255,C.KEEP,C.KEEP,C.REPLACE),br.disabled,_r.disabled,Gc(L.projMatrix),"$clipping",A.tileExtentBuffer,A.quadTriangleIndexBuffer,A.tileExtentSegments)}}pointCoordinate(o){const c=this.painter.transform;if(o.x<0||o.x>c.width||o.y<0||o.y>c.height)return null;const A=[o.x,o.y,1,1];n.ad.vec4.transformMat4(A,A,c.pixelMatrixInverse),n.ad.vec4.scale(A,A,1/A[3]),A[0]/=c.worldSize,A[1]/=c.worldSize;const R=c._camera.position,C=n.bH(1,c.center.lat),P=[R[0],R[1],R[2]/C,0],L=n.ad.vec3.subtract([],A.slice(0,3),P);n.ad.vec3.normalize(L,L);const j=this.raycast(P,L,this._exaggeration);return j!==null&&j?(n.ad.vec3.scaleAndAdd(P,P,L,j),P[3]=P[2],P[2]*=C,P):null}_setupProxiedCoordsForOrtho(o,c,A){if(o.getSource()instanceof n.aK)return this._setupProxiedCoordsForImageSource(o,c,A);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const R=this.proxiedCoords[o.id]=[],C=this.proxyCoords;for(let j=0;j<C.length;j++){const Z=C[j],K=this._findTileCoveringTileID(Z,o);if(K){const te=this._createProxiedId(Z,K,A[Z.key]&&A[Z.key][o.id]);R.push(te),this.proxyToSource[Z.key][o.id]=[te]}}let P=!1;const L=new Set;for(let j=0;j<c.length;j++){const Z=o.getTile(c[j]);if(!Z||!Z.hasData())continue;const K=this._findTileCoveringTileID(Z.tileID,this.proxySourceCache);if(K&&K.tileID.canonical.z!==Z.tileID.canonical.z){const te=this.proxyToSource[K.tileID.key][o.id],ae=this._createProxiedId(K.tileID,Z,A[K.tileID.key]&&A[K.tileID.key][o.id]);te?te.splice(te.length-1,0,ae):this.proxyToSource[K.tileID.key][o.id]=[ae];const ce=this.proxyToSource[K.tileID.key][o.id];L.has(ce)||L.add(ce),R.push(ae),P=!0}}if(this._sourceTilesOverlap[o.id]=P,P&&this._debugParams.sortTilesHiZFirst)for(const j of L)j.sort((Z,K)=>K.overscaledZ-Z.overscaledZ)}_setupProxiedCoordsForImageSource(o,c,A){if(!o.getSource().loaded())return;const R=this.proxiedCoords[o.id]=[],C=this.proxyCoords,P=o.getSource(),L=P.tileID;if(!L)return;const j=new n.P(L.x,L.y)._div(1<<L.z),Z=P.coordinates.map(n.ac.fromLngLat).reduce((te,ae)=>(te.min.x=Math.min(te.min.x,ae.x-j.x),te.min.y=Math.min(te.min.y,ae.y-j.y),te.max.x=Math.max(te.max.x,ae.x-j.x),te.max.y=Math.max(te.max.y,ae.y-j.y),te),{min:new n.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new n.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),K=(te,ae)=>{const ce=te.wrap+te.canonical.x/(1<<te.canonical.z),Ce=te.canonical.y/(1<<te.canonical.z),Re=n.ai/(1<<te.canonical.z),Pe=ae.wrap+ae.canonical.x/(1<<ae.canonical.z),Ne=ae.canonical.y/(1<<ae.canonical.z);return ce+Re<Pe+Z.min.x||ce>Pe+Z.max.x||Ce+Re<Ne+Z.min.y||Ce>Ne+Z.max.y};for(let te=0;te<C.length;te++){const ae=C[te];for(let ce=0;ce<c.length;ce++){const Ce=o.getTile(c[ce]);if(!Ce||!Ce.hasData()||K(ae,Ce.tileID))continue;const Re=this._createProxiedId(ae,Ce,A[ae.key]&&A[ae.key][o.id]),Pe=this.proxyToSource[ae.key][o.id];Pe?Pe.push(Re):this.proxyToSource[ae.key][o.id]=[Re],R.push(Re)}}}_createProxiedId(o,c,A){let R=this.orthoMatrix;if(A){const C=A.find(P=>P.key===c.tileID.key);if(C)return C}if(c.tileID.key!==o.key){const C=o.canonical.z-c.tileID.canonical.z;let P,L,j;R=n.ad.mat4.create();const Z=c.tileID.wrap-o.wrap<<o.overscaledZ;C>0?(P=n.ai>>C,L=P*((c.tileID.canonical.x<<C)-o.canonical.x+Z),j=P*((c.tileID.canonical.y<<C)-o.canonical.y)):(P=n.ai<<-C,L=n.ai*(c.tileID.canonical.x-(o.canonical.x+Z<<-C)),j=n.ai*(c.tileID.canonical.y-(o.canonical.y<<-C))),n.ad.mat4.ortho(R,0,P,0,P,0,1),n.ad.mat4.translate(R,R,[L,j,0])}return new qf(c.tileID,o.key,R)}_findTileCoveringTileID(o,c){let A=c.getTile(o);if(A&&A.hasData())return A;const R=this._findCoveringTileCache[c.id],C=R[o.key];if(A=C?c.getTileByID(C):null,A&&A.hasData()||C===null)return A;let P=A?A.tileID:o,L=P.overscaledZ;const j=c.getSource().minzoom,Z=[];if(!C){const te=c.getSource().maxzoom;if(o.canonical.z>=te){const ae=o.canonical.z-te;c.getSource().reparseOverscaled?(L=Math.max(o.canonical.z+2,c.transform.tileZoom),P=new n.aH(L,o.wrap,te,o.canonical.x>>ae,o.canonical.y>>ae)):ae!==0&&(L=te,P=new n.aH(L,o.wrap,te,o.canonical.x>>ae,o.canonical.y>>ae))}P.key!==o.key&&(Z.push(P.key),A=c.getTile(P))}const K=te=>{Z.forEach(ae=>{R[ae]=te}),Z.length=0};for(L-=1;L>=j&&(!A||!A.hasData());L--){A&&K(A.tileID.key);const te=P.calculateScaledKey(L);if(A=c.getTileByID(te),A&&A.hasData())break;const ae=R[te];if(ae===null)break;ae===void 0?Z.push(te):A=c.getTileByID(ae)}return K(A?A.tileID.key:null),A&&A.hasData()?A:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,c){let A=this._tilesDirty[o];A||(A=this._tilesDirty[o]={}),A[c.key]=!0}}function Zc(g,o,c){const A=function(L,j,Z){const K=n.ad.vec3.dot(j,L),te=n.ad.vec3.dot(Z,[.2126,.7152,.0722]),ae=(Ce,Re,Pe)=>(1-Pe)*Ce+Pe*Re,ce=ae(1-.3*Math.min(te,1),1,Math.min(K+1,1));return ae(.92,1,Math.asin(n.ay(j[2],-1,1))/Math.PI+.5)*ce}(g,[0,0,1],o),R=[0,0,0];n.ad.vec3.scale(R,c.slice(0,3),A);const C=[0,0,0];n.ad.vec3.scale(C,o.slice(0,3),g[2]);const P=[0,0,0];return n.ad.vec3.add(P,R,C),n.cg(P)}const Ds=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Up=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class Mm{static cacheKey(o,c,A,R){let C=`${c}${R?R.cacheKey:""}`;for(const P of A)o.usedDefines.includes(P)&&(C+=`/${P}`);return C}constructor(o,c,A,R,C,P){const L=o.gl;this.program=L.createProgram(),this.configuration=R,this.name=c,this.fixedDefines=[...P];const j=R?R.getBinderAttributes():[],Z=(A.staticAttributes||[]).concat(j);let K=R?R.defines():[];K=K.concat(P.map(Pe=>`#define ${Pe}`));const te=`#version 300 es
`;let ae=te+K.concat("precision mediump float;",Fc,Wl.fragmentSource).join(`
`);for(const Pe of A.fragmentIncludes)ae+=`
${Zi[Pe]}`;ae+=`
${A.fragmentSource}`;let ce=te+K.concat("precision highp float;",Fc,Wl.vertexSource).join(`
`);for(const Pe of A.vertexIncludes)ce+=`
${Zi[Pe]}`;this.forceManualRenderingForInstanceIDShaders=o.forceManualRenderingForInstanceIDShaders&&A.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(ce+=`
uniform int u_instanceID;
`),ce+=`
${A.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(ce=ce.replaceAll("gl_InstanceID","u_instanceID"));const Ce=L.createShader(L.FRAGMENT_SHADER);if(L.isContextLost())return void(this.failedToCreate=!0);L.shaderSource(Ce,ae),L.compileShader(Ce),L.attachShader(this.program,Ce);const Re=L.createShader(L.VERTEX_SHADER);if(L.isContextLost())this.failedToCreate=!0;else{L.shaderSource(Re,ce),L.compileShader(Re),L.attachShader(this.program,Re),this.attributes={},this.numAttributes=Z.length;for(let Pe=0;Pe<this.numAttributes;Pe++)if(Z[Pe]){const Ne=Z[Pe].startsWith("a_")?Z[Pe]:`a_${Z[Pe]}`;L.bindAttribLocation(this.program,Pe,Ne),this.attributes[Ne]=Pe}L.linkProgram(this.program),L.deleteShader(Re),L.deleteShader(Ce),this.fixedUniforms=C(o),this.binderUniforms=R?R.getUniforms(o):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(Pe=>({u_instanceID:new n.bN(Pe)}))(o)),(P.includes("TERRAIN")||c.indexOf("symbol")!==-1||c.indexOf("circle")!==-1)&&(this.terrainUniforms=(Pe=>({u_dem:new n.bN(Pe),u_dem_prev:new n.bN(Pe),u_dem_tl:new n.bK(Pe),u_dem_scale:new n.bM(Pe),u_dem_tl_prev:new n.bK(Pe),u_dem_scale_prev:new n.bM(Pe),u_dem_size:new n.bM(Pe),u_dem_lerp:new n.bM(Pe),u_exaggeration:new n.bM(Pe),u_depth:new n.bN(Pe),u_depth_size_inv:new n.bK(Pe),u_depth_range_unpack:new n.bK(Pe),u_occluder_half_size:new n.bM(Pe),u_occlusion_depth_offset:new n.bM(Pe),u_meter_to_dem:new n.bM(Pe),u_label_plane_matrix_inv:new n.bJ(Pe)}))(o)),P.includes("GLOBE")&&(this.globeUniforms=(Pe=>({u_tile_tl_up:new n.bL(Pe),u_tile_tr_up:new n.bL(Pe),u_tile_br_up:new n.bL(Pe),u_tile_bl_up:new n.bL(Pe),u_tile_up_scale:new n.bM(Pe)}))(o)),P.includes("FOG")&&(this.fogUniforms=(Pe=>({u_fog_matrix:new n.bJ(Pe),u_fog_range:new n.bK(Pe),u_fog_color:new n.cb(Pe),u_fog_horizon_blend:new n.bM(Pe),u_fog_vertical_limit:new n.bK(Pe),u_fog_temporal_offset:new n.bM(Pe),u_frustum_tl:new n.bL(Pe),u_frustum_tr:new n.bL(Pe),u_frustum_br:new n.bL(Pe),u_frustum_bl:new n.bL(Pe),u_globe_pos:new n.bL(Pe),u_globe_radius:new n.bM(Pe),u_globe_transition:new n.bM(Pe),u_is_globe:new n.bN(Pe),u_viewport:new n.bK(Pe)}))(o)),P.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Pe=>({u_cutoff_params:new n.cb(Pe)}))(o)),P.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Pe=>({u_lighting_ambient_color:new n.bL(Pe),u_lighting_directional_dir:new n.bL(Pe),u_lighting_directional_color:new n.bL(Pe),u_ground_radiance:new n.bL(Pe)}))(o)),P.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Pe=>({u_light_matrix_0:new n.bJ(Pe),u_light_matrix_1:new n.bJ(Pe),u_fade_range:new n.bK(Pe),u_shadow_normal_offset:new n.bL(Pe),u_shadow_intensity:new n.bM(Pe),u_shadow_texel_size:new n.bM(Pe),u_shadow_map_resolution:new n.bM(Pe),u_shadow_direction:new n.bL(Pe),u_shadow_bias:new n.bL(Pe),u_shadowmap_0:new n.bN(Pe),u_shadowmap_1:new n.bN(Pe)}))(o))}}setTerrainUniformValues(o,c){if(!this.terrainUniforms)return;const A=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R]&&A[R].set(this.program,R,c[R])}}setGlobeUniformValues(o,c){if(!this.globeUniforms)return;const A=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R]&&A[R].set(this.program,R,c[R])}}setFogUniformValues(o,c){if(!this.fogUniforms)return;const A=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setCutoffUniformValues(o,c){if(!this.cutoffUniforms)return;const A=this.cutoffUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setLightsUniformValues(o,c){if(!this.lightsUniforms)return;const A=this.lightsUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}}setShadowUniformValues(o,c){if(this.failedToCreate||!this.shadowUniforms)return;const A=this.shadowUniforms;o.program.set(this.program);for(const R in c)A[R].set(this.program,R,c[R])}_drawDebugWireframe(o,c,A,R,C,P,L,j,Z,K){const te=o.options.wireframe;if(te.terrain===!1&&te.layers2D===!1&&te.layers3D===!1)return;const ae=o.context;if(!(!(!te.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!te.layers2D||o._terrain&&o._terrain.renderingToTexture||!Ds.includes(this.name))||!(!te.layers3D||!Up.includes(this.name))))return;const ce=ae.gl,Ce=o.wireframeDebugCache.getLinesFromTrianglesBuffer(o.frameCounter,C,ae);if(!Ce)return;const Re=[...this.fixedDefines];Re.push("DEBUG_WIREFRAME");const Pe=o.getOrCreateProgram(this.name,{config:this.configuration,defines:Re});ae.program.set(Pe.program);const Ne=(Xe,ct,nt)=>{if(ct[Xe]&&nt[Xe])for(const it in ct[Xe])nt[Xe][it]&&nt[Xe][it].set(nt.program,it,ct[Xe][it].current)};Z&&Z.setUniforms(Pe.program,ae,Pe.binderUniforms,L,{zoom:j}),Ne("fixedUniforms",this,Pe),Ne("terrainUniforms",this,Pe),Ne("globeUniforms",this,Pe),Ne("fogUniforms",this,Pe),Ne("lightsUniforms",this,Pe),Ne("shadowUniforms",this,Pe),Ce.bind(),ae.setColorMode(new br([ce.ONE,ce.ONE_MINUS_SRC_ALPHA,ce.ZERO,ce.ONE],n.al.transparent,[!0,!0,!0,!1])),ae.setDepthMode(new ir(c.func===ce.LESS?ce.LEQUAL:c.func,ir.ReadOnly,c.range)),ae.setStencilMode(Rr.disabled);const Ge=3*P.primitiveLength*2,et=3*P.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const Xe=K||1;for(let ct=0;ct<Xe;++ct)Pe.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",ct),ce.drawElements(ce.LINES,Ge,ce.UNSIGNED_SHORT,et)}else K&&K>1?ce.drawElementsInstanced(ce.LINES,Ge,ce.UNSIGNED_SHORT,et,K):ce.drawElements(ce.LINES,Ge,ce.UNSIGNED_SHORT,et);C.bind(),ae.program.set(this.program),ae.setDepthMode(c),ae.setStencilMode(A),ae.setColorMode(R)}checkUniforms(o,c,A){if(this.fixedDefines.includes(c)){for(const R of Object.keys(A))if(!A[R].initialized)throw new Error(`Program '${this.name}', from draw '${o}': uniform ${R} not set but required by ${c} being defined`)}}draw(o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe){const Ne=o.context,Ge=Ne.gl;if(this.failedToCreate)return;Ne.program.set(this.program),Ne.setDepthMode(A),Ne.setStencilMode(R),Ne.setColorMode(C),Ne.setCullFace(P);for(const ct of Object.keys(this.fixedUniforms))this.fixedUniforms[ct].set(this.program,ct,L[ct]);Ce&&Ce.setUniforms(this.program,Ne,this.binderUniforms,ae,{zoom:ce});const et={[Ge.POINTS]:1,[Ge.LINES]:2,[Ge.TRIANGLES]:3,[Ge.LINE_STRIP]:1}[c];this.checkUniforms(j,"RENDER_SHADOWS",this.shadowUniforms);const Xe=Pe&&Pe>0?1:void 0;for(const ct of te.get()){const nt=ct.vaos||(ct.vaos={});if((nt[j]||(nt[j]=new Uc)).bind(Ne,this,Z,Ce?Ce.getPaintVertexBuffers():[],K,ct.vertexOffset,Re||[],Xe),this.forceManualRenderingForInstanceIDShaders){const it=Pe||1;for(let st=0;st<it;++st)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",st),K?Ge.drawElements(c,ct.primitiveLength*et,Ge.UNSIGNED_SHORT,ct.primitiveOffset*et*2):Ge.drawArrays(c,ct.vertexOffset,ct.vertexLength)}else Pe&&Pe>1?Ge.drawElementsInstanced(c,ct.primitiveLength*et,Ge.UNSIGNED_SHORT,ct.primitiveOffset*et*2,Pe):K?Ge.drawElements(c,ct.primitiveLength*et,Ge.UNSIGNED_SHORT,ct.primitiveOffset*et*2):Ge.drawArrays(c,ct.vertexOffset,ct.vertexLength);c===Ge.TRIANGLES&&K&&this._drawDebugWireframe(o,A,R,C,K,ct,ae,ce,Ce,Pe)}}}function Af(g,o){const c=Math.pow(2,o.tileID.overscaledZ),A=o.tileSize*Math.pow(2,g.transform.tileZoom)/c,R=A*(o.tileID.canonical.x+o.tileID.wrap*c),C=A*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/n.at(o,1,g.transform.tileZoom),u_pixel_coord_upper:[R>>16,C>>16],u_pixel_coord_lower:[65535&R,65535&C]}}const kp={terrain:0,flat:1},eo=n.ad.mat4.create(),Uh=(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe,Ne)=>{const Ge=o.style.light,et=Ge.properties.get("position"),Xe=[et.x,et.y,et.z],ct=n.ad.mat3.create();Ge.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(ct,-o.transform.angle),n.ad.vec3.transformMat3(Xe,Xe,ct));const nt=Ge.properties.get("color"),it=o.transform,st={u_matrix:g,u_lightpos:Xe,u_lightintensity:Ge.properties.get("intensity"),u_lightcolor:[nt.r,nt.g,nt.b],u_vertical_gradient:+c,u_opacity:A,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:eo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:kp[Z],u_base_type:kp[K],u_ao:R,u_edge_radius:C,u_width_scale:P,u_flood_light_color:Ce,u_vertical_scale:Re,u_flood_light_intensity:Pe,u_ground_shadow_factor:Ne};return it.projection.name==="globe"&&(st.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],st.u_zoom_transition=te,st.u_inv_rot_matrix=ce,st.u_merc_center=ae,st.u_up_dir=it.projection.upVector(new n.bT(0,0,0),ae[0]*n.ai,ae[1]*n.ai),st.u_height_lift=j),st},G=(g,o,c,A,R,C)=>({u_matrix:g,u_edge_radius:o,u_width_scale:c,u_vertical_scale:A,u_height_type:kp[R],u_base_type:kp[C]}),J=(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe)=>{const Ne=Uh(g,o,c,A,R,C,P,L,Z,K,te,ae,ce,Ce,Re,Pe,1,[0,0,0]),Ge={u_height_factor:-Math.pow(2,L.overscaledZ)/j.tileSize/8};return n.l(Ne,Af(o,j),Ge)},he=(g,o)=>({u_matrix:g,u_emissive_strength:o}),Ee=(g,o,c,A)=>n.l(he(g,o),Af(c,A)),je=(g,o,c)=>({u_matrix:g,u_world:c,u_emissive_strength:o}),Qe=(g,o,c,A,R)=>n.l(Ee(g,o,c,A),{u_world:R}),tt=(g,o,c,A,R)=>({u_matrix:g,u_camera_pos:[o[0],o[1],o[2]],u_depth_bias:c,u_height_scale:A,u_reset_depth:R}),ot=(g,o,c,A)=>{const R=n.ai/c.tileSize;return{u_matrix:g,u_camera_to_center_distance:o.getCameraToCenterDistance(A),u_extrude_scale:[o.pixelsToGLUnits[0]/R,o.pixelsToGLUnits[1]/R]}},ht=(g,o,c=1)=>({u_matrix:g,u_color:o.toRenderColor(null),u_overlay:0,u_overlay_scale:c}),Tt=n.ad.mat4.create(),Jt=(g,o,c,A,R,C,P)=>{const L=g.transform,j=L.projection.name==="globe",Z=j?n.cO(L.zoom,o.canonical)*L._pixelsPerMercatorPixel:n.at(c,1,C),K={u_matrix:o.projMatrix,u_extrude_scale:Z,u_intensity:P,u_inv_rot_matrix:Tt,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(j){K.u_inv_rot_matrix=A,K.u_merc_center=R,K.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],K.u_zoom_transition=n.ag(L.zoom);const te=R[0]*n.ai,ae=R[1]*n.ai;K.u_up_dir=L.projection.upVector(new n.bT(0,0,0),te,ae)}return K};function xt(g,[o,c,A,R],[C,P]){if(C===P)return[0,0,0,0];const L=255*(g-1)/(g*(P-C));return[o*L,c*L,A*L,R*L]}function Aa(g,o,[c,A]){return c===A?0:.5/g+(o-c)*(g-1)/(g*(A-c))}const ra=(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe,Ne,Ge,et,Xe)=>({u_matrix:g,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:A,u_grid_matrix:R,u_tl_parent:C,u_scale_parent:Z,u_fade_t:K.mix,u_opacity:K.opacity*te.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:te.paint.get("raster-brightness-min"),u_brightness_high:te.paint.get("raster-brightness-max"),u_saturation_factor:n.cP(te.paint.get("raster-saturation")),u_contrast_factor:n.cQ(te.paint.get("raster-contrast")),u_spin_weights:wa(te.paint.get("raster-hue-rotate")),u_perspective_transform:ae,u_raster_elevation:ce,u_zoom_transition:P,u_merc_center:L,u_cutoff_params:j,u_colorization_mix:xt(n.cR,Re,Ne),u_colorization_offset:Aa(n.cR,Pe,Ne),u_color_ramp:Ce,u_texture_offset:[et/(Ge+2*et),Ge/(Ge+2*et)],u_texture_res:[Ge+2*et,Ge+2*et],u_emissive_strength:Xe});function wa(g){g*=Math.PI/180;const o=Math.sin(g),c=Math.cos(g);return[(2*c+1)/3,(-Math.sqrt(3)*o-c+1)/3,(Math.sqrt(3)*o-c+1)/3]}const fa=.05,_t=(g,o,c,A,R,C,P,L,j,Z,K,te)=>({u_matrix:g,u_normalize_matrix:o,u_globe_matrix:c,u_merc_matrix:A,u_grid_matrix:R,u_tl_parent:C,u_scale_parent:Z,u_fade_t:K.mix,u_opacity:K.opacity,u_image0:0,u_image1:1,u_raster_elevation:te,u_zoom_transition:P,u_merc_center:L,u_cutoff_params:j}),ta=(g,o,c,A,R,C,P,L,j,Z)=>({u_particle_texture:g,u_particle_texture_side_len:o,u_tile_offset:c,u_velocity:A,u_color_ramp:C,u_velocity_res:R,u_max_speed:P,u_uv_offset:L,u_data_scale:[255*j[0],255*j[1]],u_data_offset:Z,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Ga=(g,o,c,A,R,C,P,L,j,Z)=>({u_particle_texture:g,u_particle_texture_side_len:o,u_velocity:c,u_velocity_res:A,u_max_speed:R,u_speed_factor:C,u_reset_rate:P,u_rand_seed:Math.random(),u_uv_offset:L,u_data_scale:[255*j[0],255*j[1]],u_data_offset:Z,u_particle_pos_scale:1.1,u_particle_pos_offset:[fa,fa]}),Ka=n.ad.mat4.create(),qa=(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe,Ne,Ge,et,Xe,ct)=>{const nt=R.transform,it={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:nt.getCameraToCenterDistance(Ge),u_rotate_symbol:+c,u_aspect_ratio:nt.width/nt.height,u_fade_change:R.options.fadeDuration?R.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:P,u_coord_matrix:L,u_is_text:+Z,u_elevation_from_sea:j?1:0,u_pitch_with_map:+A,u_texsize:K,u_texsize_icon:te,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ka,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ka,u_up_vector:[0,-1,0],u_color_adj_mat:et,u_icon_transition:Xe||0,u_gamma_scale:A?R.transform.getCameraToCenterDistance(Ge)*Math.cos(R.terrain?0:R.transform._pitch):1,u_device_pixel_ratio:n.q.devicePixelRatio,u_is_halo:1,u_scale_factor:ct||1};return Ge.name==="globe"&&(it.u_tile_id=[ce.canonical.x,ce.canonical.y,1<<ce.canonical.z],it.u_zoom_transition=Ce,it.u_inv_rot_matrix=Pe,it.u_merc_center=Re,it.u_camera_forward=nt._camera.forward(),it.u_ecef_origin=n.cS(nt.globeMatrix,ce.toUnwrapped()),it.u_tile_matrix=Float32Array.from(nt.globeMatrix),it.u_up_vector=Ne),it},Sr=(g,o,c,A)=>({u_matrix:g,u_emissive_strength:o,u_opacity:c,u_color:A}),fr=(g,o,c,A,R,C,P,L,j)=>n.l(function(Z,K,te,ae,ce,Ce){const{width:Re,height:Pe}=ae.imageManager.getPixelSize(K),Ne=Math.pow(2,Ce.tileID.overscaledZ),Ge=Ce.tileSize*Math.pow(2,ae.transform.tileZoom)/Ne,et=Ge*(Ce.tileID.canonical.x+Ce.tileID.wrap*Ne),Xe=Ge*Ce.tileID.canonical.y;return{u_image:0,u_pattern_tl:te.tl,u_pattern_br:te.br,u_texsize:[Re,Pe],u_pattern_size:te.displaySize,u_pattern_units_to_pixels:ce?[ae.transform.width,-1*ae.transform.height]:[1/n.at(Ce,1,ae.transform.tileZoom),1/n.at(Ce,1,ae.transform.tileZoom)],u_pixel_coord_upper:[et>>16,Xe>>16],u_pixel_coord_lower:[65535&et,65535&Xe]}}(0,C,P,A,L,j),{u_matrix:g,u_emissive_strength:o,u_opacity:c}),rn=new Float32Array(n.ad.mat4.identity([])),lr=(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce=[0,0,0],Ce)=>{const Re=R.style.light,Pe=Re.properties.get("position"),Ne=[-Pe.x,-Pe.y,Pe.z],Ge=n.ad.mat3.create();Re.properties.get("anchor")==="viewport"&&(n.ad.mat3.fromRotation(Ge,-R.transform.angle),n.ad.vec3.transformMat3(Ne,Ne,Ge));const et=K.alphaMode==="MASK",Xe=Re.properties.get("color").toRenderColor(null),ct=ae.paint.get("model-ambient-occlusion-intensity"),nt=ae.paint.get("model-color").constantOr(n.al.white).toRenderColor(null),it=ae.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:g,u_lighting_matrix:o,u_normal_matrix:c,u_node_matrix:A||rn,u_lightpos:Ne,u_lightintensity:Re.properties.get("intensity"),u_lightcolor:[Xe.r,Xe.g,Xe.b],u_camera_pos:ce,u_opacity:C,u_baseTextureIsAlpha:0,u_alphaMask:+et,u_alphaCutoff:K.alphaCutoff,u_baseColorFactor:[P.r,P.g,P.b,P.a],u_emissiveFactor:[L[0],L[1],L[2],1],u_metallicFactor:j,u_roughnessFactor:Z,u_baseColorTexture:gi.BaseColor,u_metallicRoughnessTexture:gi.MetallicRoughness,u_normalTexture:gi.Normal,u_occlusionTexture:gi.Occlusion,u_emissionTexture:gi.Emission,u_lutTexture:gi.LUT,u_color_mix:[nt.r,nt.g,nt.b,it],u_aoIntensity:ct,u_emissive_strength:te,u_occlusionTextureTransform:Ce||[0,0,0,0]}},_i=(g,o=rn,c=rn)=>({u_matrix:g,u_instance:o,u_node_matrix:c}),bi={fillExtrusion:g=>({u_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_vertical_gradient:new n.bM(g),u_opacity:new n.bM(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_ao:new n.bK(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_up_dir:new n.bL(g),u_height_lift:new n.bM(g),u_flood_light_color:new n.bL(g),u_vertical_scale:new n.bM(g),u_flood_light_intensity:new n.bM(g),u_ground_shadow_factor:new n.bL(g)}),fillExtrusionDepth:g=>({u_matrix:new n.bJ(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_vertical_scale:new n.bM(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g)}),fillExtrusionPattern:g=>({u_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_vertical_gradient:new n.bM(g),u_height_factor:new n.bM(g),u_edge_radius:new n.bM(g),u_width_scale:new n.bM(g),u_ao:new n.bK(g),u_height_type:new n.bN(g),u_base_type:new n.bN(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_up_dir:new n.bL(g),u_height_lift:new n.bM(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g),u_opacity:new n.bM(g)}),fillExtrusionGroundEffect:g=>({u_matrix:new n.bJ(g),u_opacity:new n.bM(g),u_ao_pass:new n.bM(g),u_meter_to_tile:new n.bM(g),u_ao:new n.bK(g),u_flood_light_intensity:new n.bM(g),u_flood_light_color:new n.bL(g),u_attenuation:new n.bM(g),u_edge_radius:new n.bM(g),u_fb:new n.bN(g),u_fb_size:new n.bM(g),u_dynamic_offset:new n.bM(g)}),fill:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g)}),fillPattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g)}),fillOutline:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_world:new n.bK(g)}),fillOutlinePattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_world:new n.bK(g),u_image:new n.bN(g),u_texsize:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_tile_units_to_pixels:new n.bM(g)}),elevatedStructures:g=>({u_matrix:new n.bJ(g)}),elevatedStructuresDepthReconstruct:g=>({u_matrix:new n.bJ(g),u_camera_pos:new n.bL(g),u_depth_bias:new n.bM(g),u_height_scale:new n.bM(g),u_reset_depth:new n.bM(g)}),circle:n.cT,collisionBox:g=>({u_matrix:new n.bJ(g),u_camera_to_center_distance:new n.bM(g),u_extrude_scale:new n.bK(g)}),collisionCircle:g=>({u_matrix:new n.bJ(g),u_inv_matrix:new n.bJ(g),u_camera_to_center_distance:new n.bM(g),u_viewport_size:new n.bK(g)}),debug:g=>({u_color:new n.cA(g),u_matrix:new n.bJ(g),u_overlay:new n.bN(g),u_overlay_scale:new n.bM(g)}),clippingMask:g=>({u_matrix:new n.bJ(g)}),heatmap:g=>({u_extrude_scale:new n.bM(g),u_intensity:new n.bM(g),u_matrix:new n.bJ(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_up_dir:new n.bL(g)}),heatmapTexture:g=>({u_image:new n.bN(g),u_color_ramp:new n.bN(g),u_opacity:new n.bM(g)}),hillshade:g=>({u_matrix:new n.bJ(g),u_image:new n.bN(g),u_latrange:new n.bK(g),u_light:new n.bK(g),u_shadow:new n.cA(g),u_highlight:new n.cA(g),u_emissive_strength:new n.bM(g),u_accent:new n.cA(g)}),hillshadePrepare:g=>({u_matrix:new n.bJ(g),u_image:new n.bN(g),u_dimension:new n.bK(g),u_zoom:new n.bM(g)}),line:n.cU,linePattern:n.cV,raster:g=>({u_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_grid_matrix:new n.cB(g),u_tl_parent:new n.bK(g),u_scale_parent:new n.bM(g),u_fade_t:new n.bM(g),u_opacity:new n.bM(g),u_image0:new n.bN(g),u_image1:new n.bN(g),u_brightness_low:new n.bM(g),u_brightness_high:new n.bM(g),u_saturation_factor:new n.bM(g),u_contrast_factor:new n.bM(g),u_spin_weights:new n.bL(g),u_perspective_transform:new n.bK(g),u_raster_elevation:new n.bM(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_cutoff_params:new n.cb(g),u_colorization_mix:new n.cb(g),u_colorization_offset:new n.bM(g),u_color_ramp:new n.bN(g),u_texture_offset:new n.bK(g),u_texture_res:new n.bK(g),u_emissive_strength:new n.bM(g)}),rasterParticle:g=>({u_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_grid_matrix:new n.cB(g),u_tl_parent:new n.bK(g),u_scale_parent:new n.bM(g),u_fade_t:new n.bM(g),u_opacity:new n.bM(g),u_image0:new n.bN(g),u_image1:new n.bN(g),u_raster_elevation:new n.bM(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_cutoff_params:new n.cb(g)}),rasterParticleTexture:g=>({u_texture:new n.bN(g),u_opacity:new n.bM(g)}),rasterParticleDraw:g=>({u_particle_texture:new n.bN(g),u_particle_texture_side_len:new n.bM(g),u_tile_offset:new n.bK(g),u_velocity:new n.bN(g),u_color_ramp:new n.bN(g),u_velocity_res:new n.bK(g),u_max_speed:new n.bM(g),u_uv_offset:new n.bK(g),u_data_scale:new n.bK(g),u_data_offset:new n.bM(g),u_particle_pos_scale:new n.bM(g),u_particle_pos_offset:new n.bK(g)}),rasterParticleUpdate:g=>({u_particle_texture:new n.bN(g),u_particle_texture_side_len:new n.bM(g),u_velocity:new n.bN(g),u_velocity_res:new n.bK(g),u_max_speed:new n.bM(g),u_speed_factor:new n.bM(g),u_reset_rate:new n.bM(g),u_rand_seed:new n.bM(g),u_uv_offset:new n.bK(g),u_data_scale:new n.bK(g),u_data_offset:new n.bM(g),u_particle_pos_scale:new n.bM(g),u_particle_pos_offset:new n.bK(g)}),symbol:g=>({u_is_size_zoom_constant:new n.bN(g),u_is_size_feature_constant:new n.bN(g),u_size_t:new n.bM(g),u_size:new n.bM(g),u_camera_to_center_distance:new n.bM(g),u_rotate_symbol:new n.bN(g),u_aspect_ratio:new n.bM(g),u_fade_change:new n.bM(g),u_matrix:new n.bJ(g),u_label_plane_matrix:new n.bJ(g),u_coord_matrix:new n.bJ(g),u_is_text:new n.bN(g),u_elevation_from_sea:new n.bN(g),u_pitch_with_map:new n.bN(g),u_texsize:new n.bK(g),u_texsize_icon:new n.bK(g),u_texture:new n.bN(g),u_texture_icon:new n.bN(g),u_gamma_scale:new n.bM(g),u_device_pixel_ratio:new n.bM(g),u_tile_id:new n.bL(g),u_zoom_transition:new n.bM(g),u_inv_rot_matrix:new n.bJ(g),u_merc_center:new n.bK(g),u_camera_forward:new n.bL(g),u_tile_matrix:new n.bJ(g),u_up_vector:new n.bL(g),u_ecef_origin:new n.bL(g),u_is_halo:new n.bN(g),u_icon_transition:new n.bM(g),u_color_adj_mat:new n.bJ(g),u_scale_factor:new n.bM(g)}),background:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_opacity:new n.bM(g),u_color:new n.cA(g)}),backgroundPattern:g=>({u_matrix:new n.bJ(g),u_emissive_strength:new n.bM(g),u_opacity:new n.bM(g),u_image:new n.bN(g),u_pattern_tl:new n.bK(g),u_pattern_br:new n.bK(g),u_texsize:new n.bK(g),u_pattern_size:new n.bK(g),u_pixel_coord_upper:new n.bK(g),u_pixel_coord_lower:new n.bK(g),u_pattern_units_to_pixels:new n.bK(g)}),terrainRaster:g=>({u_matrix:new n.bJ(g),u_image0:new n.bN(g),u_skirt_height:new n.bM(g),u_ground_shadow_factor:new n.bL(g)}),skybox:g=>({u_matrix:new n.bJ(g),u_sun_direction:new n.bL(g),u_cubemap:new n.bN(g),u_opacity:new n.bM(g),u_temporal_offset:new n.bM(g)}),skyboxGradient:g=>({u_matrix:new n.bJ(g),u_color_ramp:new n.bN(g),u_center_direction:new n.bL(g),u_radius:new n.bM(g),u_opacity:new n.bM(g),u_temporal_offset:new n.bM(g)}),skyboxCapture:g=>({u_matrix_3f:new n.cB(g),u_sun_direction:new n.bL(g),u_sun_intensity:new n.bM(g),u_color_tint_r:new n.cb(g),u_color_tint_m:new n.cb(g),u_luminance:new n.bM(g)}),globeRaster:g=>({u_proj_matrix:new n.bJ(g),u_globe_matrix:new n.bJ(g),u_normalize_matrix:new n.bJ(g),u_merc_matrix:new n.bJ(g),u_zoom_transition:new n.bM(g),u_merc_center:new n.bK(g),u_image0:new n.bN(g),u_grid_matrix:new n.cB(g),u_skirt_height:new n.bM(g),u_far_z_cutoff:new n.bM(g),u_frustum_tl:new n.bL(g),u_frustum_tr:new n.bL(g),u_frustum_br:new n.bL(g),u_frustum_bl:new n.bL(g),u_globe_pos:new n.bL(g),u_globe_radius:new n.bM(g),u_viewport:new n.bK(g)}),globeAtmosphere:g=>({u_frustum_tl:new n.bL(g),u_frustum_tr:new n.bL(g),u_frustum_br:new n.bL(g),u_frustum_bl:new n.bL(g),u_horizon:new n.bM(g),u_transition:new n.bM(g),u_fadeout_range:new n.bM(g),u_color:new n.cb(g),u_high_color:new n.cb(g),u_space_color:new n.cb(g),u_temporal_offset:new n.bM(g),u_horizon_angle:new n.bM(g)}),model:g=>({u_matrix:new n.bJ(g),u_lighting_matrix:new n.bJ(g),u_normal_matrix:new n.bJ(g),u_node_matrix:new n.bJ(g),u_lightpos:new n.bL(g),u_lightintensity:new n.bM(g),u_lightcolor:new n.bL(g),u_camera_pos:new n.bL(g),u_opacity:new n.bM(g),u_baseColorFactor:new n.cb(g),u_emissiveFactor:new n.cb(g),u_metallicFactor:new n.bM(g),u_roughnessFactor:new n.bM(g),u_baseTextureIsAlpha:new n.bN(g),u_alphaMask:new n.bN(g),u_alphaCutoff:new n.bM(g),u_baseColorTexture:new n.bN(g),u_metallicRoughnessTexture:new n.bN(g),u_normalTexture:new n.bN(g),u_occlusionTexture:new n.bN(g),u_emissionTexture:new n.bN(g),u_lutTexture:new n.bN(g),u_color_mix:new n.cb(g),u_aoIntensity:new n.bM(g),u_emissive_strength:new n.bM(g),u_occlusionTextureTransform:new n.cb(g)}),modelDepth:g=>({u_matrix:new n.bJ(g),u_instance:new n.bJ(g),u_node_matrix:new n.bJ(g)}),groundShadow:g=>({u_matrix:new n.bJ(g),u_ground_shadow_factor:new n.bL(g)}),stars:g=>({u_matrix:new n.bJ(g),u_up:new n.bL(g),u_right:new n.bL(g),u_intensity_multiplier:new n.bM(g)}),snowParticle:g=>({u_modelview:new n.bJ(g),u_projection:new n.bJ(g),u_time:new n.bM(g),u_cam_pos:new n.bL(g),u_velocityConeAperture:new n.bM(g),u_velocity:new n.bM(g),u_horizontalOscillationRadius:new n.bM(g),u_horizontalOscillationRate:new n.bM(g),u_boxSize:new n.bM(g),u_billboardSize:new n.bM(g),u_simpleShapeParameters:new n.bK(g),u_screenSize:new n.bK(g),u_thinningCenterPos:new n.bK(g),u_thinningShape:new n.bL(g),u_thinningAffectedRatio:new n.bM(g),u_thinningParticleOffset:new n.bM(g),u_particleColor:new n.cb(g),u_direction:new n.bL(g)}),rainParticle:g=>({u_modelview:new n.bJ(g),u_projection:new n.bJ(g),u_time:new n.bM(g),u_cam_pos:new n.bL(g),u_texScreen:new n.bN(g),u_velocityConeAperture:new n.bM(g),u_velocity:new n.bM(g),u_boxSize:new n.bM(g),u_rainDropletSize:new n.bK(g),u_distortionStrength:new n.bM(g),u_rainDirection:new n.bL(g),u_color:new n.cb(g),u_screenSize:new n.bK(g),u_thinningCenterPos:new n.bK(g),u_thinningShape:new n.bL(g),u_thinningAffectedRatio:new n.bM(g),u_thinningParticleOffset:new n.bM(g),u_shapeDirectionalPower:new n.bM(g),u_shapeNormalPower:new n.bM(g),u_mode:new n.bM(g)}),vignette:g=>({u_vignetteShape:new n.bL(g),u_vignetteColor:new n.cb(g)}),occlusion:g=>({u_matrix:new n.bJ(g),u_anchorPos:new n.bL(g),u_screenSizePx:new n.bK(g),u_occluderSizePx:new n.bK(g),u_color:new n.cb(g)})};class Zn{constructor(o,c,A,R){this.id=Zn.uniqueIdxCounter,Zn.uniqueIdxCounter++,this.context=o;const C=o.gl;this.buffer=C.createBuffer(),this.dynamicDraw=!!A,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),C.bufferData(C.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||R||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){this.id=Zn.uniqueIdxCounter,Zn.uniqueIdxCounter++;const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Zn.uniqueIdxCounter=0;const ai={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Hi{constructor(o,c,A,R,C,P){this.length=c.length,this.attributes=A,this.itemSize=c.bytesPerElement,this.dynamicDraw=R,this.instanceCount=P,this.context=o;const L=o.gl;this.buffer=L.createBuffer(),o.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||C||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,c){for(let A=0;A<this.attributes.length;A++){const R=c.attributes[this.attributes[A].name];R!==void 0&&o.enableVertexAttribArray(R)}}setVertexAttribPointers(o,c,A){for(let R=0;R<this.attributes.length;R++){const C=this.attributes[R],P=c.attributes[C.name];P!==void 0&&o.vertexAttribPointer(P,C.components,o[ai[C.type]],!1,this.itemSize,C.offset+this.itemSize*(A||0))}}setVertexAttribDivisor(o,c,A){for(let R=0;R<this.attributes.length;R++){const C=c.attributes[this.attributes[R].name];C!==void 0&&this.instanceCount&&this.instanceCount>0&&o.vertexAttribDivisor(C,A)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Fn{constructor(o,c,A,R,C){this.context=o,this.width=c,this.height=A;const P=this.framebuffer=o.gl.createFramebuffer();R&&(this.colorAttachment=new tl(o,P)),C&&(this.depthAttachmentType=C,this.depthAttachment=C==="renderbuffer"?new Fh(o,P):new Nd(o,P))}destroy(){const o=this.context.gl;if(this.colorAttachment){const c=this.colorAttachment.get();c&&o.deleteTexture(c)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const c=this.depthAttachment.get();c&&o.deleteRenderbuffer(c)}else{const c=this.depthAttachment.get();c&&o.deleteTexture(c)}o.deleteFramebuffer(this.framebuffer)}}class _n{constructor(o,c){this.gl=o,this.clearColor=new zh(this),this.clearDepth=new Qo(this),this.clearStencil=new dl(this),this.colorMask=new kc(this),this.depthMask=new Au(this),this.stencilMask=new Gu(this),this.stencilFunc=new mc(this),this.stencilOp=new Ip(this),this.stencilTest=new Oh(this),this.depthRange=new Dh(this),this.depthTest=new el(this),this.depthFunc=new qi(this),this.blend=new Ai(this),this.blendFunc=new Xl(this),this.blendColor=new _u(this),this.blendEquation=new Zf(this),this.cullFace=new yc(this),this.cullFaceSide=new mf(this),this.frontFace=new Pd(this),this.program=new Mh(this),this.activeTexture=new Ih(this),this.viewport=new Ed(this),this.bindFramebuffer=new yf(this),this.bindRenderbuffer=new Dm(this),this.bindTexture=new ih(this),this.bindVertexBuffer=new Ey(this),this.bindElementBuffer=new gc(this),this.bindVertexArrayOES=new ju(this),this.pixelStoreUnpack=new vu(this),this.pixelStoreUnpackPremultiplyAlpha=new Ny(this),this.pixelStoreUnpackFlipY=new Lh(this),this.options=c?Object.assign({},c):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=c&&!!c.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=o.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),this.maxPointSize=o.getParameter(o.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,c,A){return new Zn(this,o,c,A)}createVertexBuffer(o,c,A,R,C){return new Hi(this,o,c,A,R,C)}createRenderbuffer(o,c,A){const R=this.gl,C=R.createRenderbuffer();return this.bindRenderbuffer.set(C),R.renderbufferStorage(R.RENDERBUFFER,o,c,A),this.bindRenderbuffer.set(null),C}createFramebuffer(o,c,A,R){return new Fn(this,o,c,A,R)}clear({color:o,depth:c,stencil:A,colorMask:R}){const C=this.gl;let P=0;o&&(P|=C.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set(R||[!0,!0,!0,!0])),c!==void 0&&(P|=C.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),A!==void 0&&(P|=C.STENCIL_BUFFER_BIT,this.clearStencil.set(A),this.stencilMask.set(255)),C.clear(P)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){n.bn(o.blendFunction,br.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor),o.blendEquation?this.blendEquation.set(o.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(o.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let ds;function Fi(g,o,c,A,R,C,P){const L=g.context,j=L.gl,Z=g.transform,K=g.getOrCreateProgram("collisionBox"),te=[];let ae=0,ce=0;for(let Xe=0;Xe<A.length;Xe++){const ct=A[Xe],nt=o.getTile(ct),it=nt.getBucket(c);if(!it)continue;const st=Nh(ct,it,Z);let yt=st;R[0]===0&&R[1]===0||(yt=g.translatePosMatrix(st,nt,R,C));const wt=P?it.textCollisionBox:it.iconCollisionBox,Yt=it.collisionCircleArray;if(Yt.length>0){const Lt=n.ad.mat4.create(),aa=yt;n.ad.mat4.mul(Lt,it.placementInvProjMatrix,Z.glCoordMatrix),n.ad.mat4.mul(Lt,Lt,it.placementViewportMatrix),te.push({circleArray:Yt,circleOffset:ce,transform:aa,invTransform:Lt,projection:it.getProjection()}),ae+=Yt.length/4,ce=ae}wt&&(g.terrain&&g.terrain.setupElevationDraw(nt,K),K.draw(g,j.LINES,ir.disabled,Rr.disabled,g.colorModeForRenderPass(),_r.disabled,ot(yt,Z,nt,it.getProjection()),c.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,null,Z.zoom,null,[wt.collisionVertexBuffer,wt.collisionVertexBufferExt]))}if(!P||!te.length)return;const Ce=g.getOrCreateProgram("collisionCircle"),Re=new n.cW;Re.resize(4*ae),Re._trim();let Pe=0;for(const Xe of te)for(let ct=0;ct<Xe.circleArray.length/4;ct++){const nt=4*ct,it=Xe.circleArray[nt+0],st=Xe.circleArray[nt+1],yt=Xe.circleArray[nt+2],wt=Xe.circleArray[nt+3];Re.emplace(Pe++,it,st,yt,wt,0),Re.emplace(Pe++,it,st,yt,wt,1),Re.emplace(Pe++,it,st,yt,wt,2),Re.emplace(Pe++,it,st,yt,wt,3)}(!ds||ds.length<2*ae)&&(ds=function(Xe){const ct=2*Xe,nt=new n.aV;nt.resize(ct),nt._trim();for(let it=0;it<ct;it++){const st=6*it;nt.uint16[st+0]=4*it+0,nt.uint16[st+1]=4*it+1,nt.uint16[st+2]=4*it+2,nt.uint16[st+3]=4*it+2,nt.uint16[st+4]=4*it+3,nt.uint16[st+5]=4*it+0}return nt}(ae));const Ne=L.createIndexBuffer(ds,!0),Ge=L.createVertexBuffer(Re,n.cX.members,!0);for(const Xe of te){const ct={u_matrix:Xe.transform,u_inv_matrix:Xe.invTransform,u_camera_to_center_distance:(et=Z).getCameraToCenterDistance(Xe.projection),u_viewport_size:[et.width,et.height]};Ce.draw(g,j.TRIANGLES,ir.disabled,Rr.disabled,g.colorModeForRenderPass(),_r.disabled,ct,c.id,Ge,Ne,n.b8.simpleSegment(0,2*Xe.circleOffset,Xe.circleArray.length,Xe.circleArray.length/2),null,Z.zoom)}var et;Ge.destroy(),Ne.destroy()}const Un=n.ad.mat4.create();function po(g){const o=g._camera.getWorldToCamera(g.worldSize,1),c=n.ad.mat4.multiply([],o,g.globeMatrix);n.ad.mat4.invert(c,c);const A=[0,0,0],R=[0,1,0,0];return n.ad.vec4.transformMat4(R,R,c),A[0]=R[0],A[1]=R[1],A[2]=R[2],n.ad.vec3.normalize(A,A),A}function vi({width:g,height:o,anchor:c,textOffset:A,textScale:R},C){const{horizontalAlign:P,verticalAlign:L}=n.bD(c),j=-(P-.5)*g,Z=-(L-.5)*o,K=n.bC(c,A);return new n.P((j/R+K[0])*C,(Z/R+K[1])*C)}function is(g,o,c,A,R,C,P,L,j,Z,K){const te=g.text.placedSymbolArray,ae=g.text.dynamicLayoutVertexArray,ce=g.icon.dynamicLayoutVertexArray,Ce={},Re=g.getProjection(),Pe=Uo(L,Re,C),Ne=C.elevation,Ge=Re.upVectorScale(L.canonical,C.center.lat,C.worldSize).metersToTile;ae.clear();for(let et=0;et<te.length;et++){const Xe=te.get(et),{tileAnchorX:ct,tileAnchorY:nt,numGlyphs:it}=Xe,st=Xe.hidden||!Xe.crossTileID||g.allowVerticalPlacement&&!Xe.placedOrientation?null:A[Xe.crossTileID];if(st){let yt=0,wt=0,Yt=0;if(Ne){const Qt=Ne?Ne.getAtTileOffset(L,ct,nt):0,[da,$t,pa]=Re.upVector(L.canonical,ct,nt);yt=Qt*da*Ge,wt=Qt*$t*Ge,Yt=Qt*pa*Ge}let[Lt,aa,ua,Sa]=uo(Xe.projectedAnchorX+yt,Xe.projectedAnchorY+wt,Xe.projectedAnchorZ+Yt,c?Pe:P);const Mt=_d(C.getCameraToCenterDistance(Re),Sa);let ia=R.evaluateSizeForFeature(g.textSizeData,Z,Xe)*Mt/n.bw;c&&(ia*=g.tilePixelRatio/j);const Nt=vi(st,ia);c?({x:Lt,y:aa,z:ua}=Re.projectTilePoint(ct+Nt.x,nt+Nt.y,L.canonical),[Lt,aa,ua]=uo(Lt+yt,aa+wt,ua+Yt,P)):(o&&Nt._rotate(-C.angle),Lt+=Nt.x,aa+=Nt.y,ua=0);const sa=g.allowVerticalPlacement&&Xe.placedOrientation===n.bq.vertical?Math.PI/2:0;for(let Qt=0;Qt<it;Qt++)n.bt(ae,Lt,aa,ua,sa);K&&Xe.associatedIconIndex>=0&&(Ce[Xe.associatedIconIndex]={x:Lt,y:aa,z:ua,angle:sa})}else Xo(it,ae)}if(K){ce.clear();const et=g.icon.placedSymbolArray;for(let Xe=0;Xe<et.length;Xe++){const ct=et.get(Xe),{numGlyphs:nt}=ct,it=Ce[Xe];if(ct.hidden||!it)Xo(nt,ce);else{const{x:st,y:yt,z:wt,angle:Yt}=it;for(let Lt=0;Lt<nt;Lt++)n.bt(ce,st,yt,wt,Yt)}}g.icon.dynamicLayoutVertexBuffer.updateData(ce)}g.text.dynamicLayoutVertexBuffer.updateData(ae)}function vn(g,o,c,A,R,C,P={}){const L=c.paint.get("icon-translate"),j=c.paint.get("text-translate"),Z=c.paint.get("icon-translate-anchor"),K=c.paint.get("text-translate-anchor"),te=c.layout.get("icon-rotation-alignment"),ae=c.layout.get("text-rotation-alignment"),ce=c.layout.get("icon-pitch-alignment"),Ce=c.layout.get("text-pitch-alignment"),Re=c.layout.get("icon-keep-upright"),Pe=c.layout.get("text-keep-upright"),Ne=c.paint.get("icon-color-saturation"),Ge=c.paint.get("icon-color-contrast"),et=c.paint.get("icon-color-brightness-min"),Xe=c.paint.get("icon-color-brightness-max"),ct=c.layout.get("symbol-elevation-reference")==="sea",nt=g.context,it=nt.gl,st=g.transform,yt=te==="map",wt=ae==="map",Yt=ce==="map",Lt=Ce==="map",aa=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ua=!1;const Sa=g.depthModeForSublayer(0,ir.ReadOnly),Mt=[n.av(st.center.lng),n.aC(st.center.lat)],ia=c.layout.get("text-variable-anchor"),Nt=st.projection.name==="globe",sa=[],Qt=[0,-1,0];for(const da of A){const $t=o.getTile(da),pa=$t.getBucket(c);if(!pa||pa.projection.name==="mercator"&&Nt||pa.fullyClipped)continue;const Ia=pa.projection.name==="globe",La=Ia?n.ag(st.zoom):0,Pa=Uo(da,pa.getProjection(),st),sr=st.calculatePixelsToTileUnitsMatrix($t),Lr=ia&&pa.hasTextData(),pr=pa.hasIconTextFit()&&Lr&&pa.hasIconData(),zr=pa.getProjection().createInversionMatrix(st,da.canonical),Cr=qn=>{st.depthOcclusionForSymbolsAndCircles&&(c.hasInitialOcclusionOpacityProperties||g.terrain)&&(qn.push("DEPTH_D24"),qn.push("DEPTH_OCCLUSION"))},xr=()=>{const qn=yt&&c.layout.get("symbol-placement")!=="point",un=[];Cr(un);const Vn=qn||pr,Ki=c.paint.get("icon-image-cross-fade").constantOr(0);g.terrainRenderModeElevated()&&Yt&&un.push("PITCH_WITH_MAP_TERRAIN"),Ia&&(un.push("PROJECTION_GLOBE_VIEW"),Vn&&un.push("PROJECTED_POS_ON_VIEWPORT")),Ki>0&&un.push("ICON_TRANSITION"),pa.icon.zOffsetVertexBuffer&&un.push("Z_OFFSET"),Ne===0&&Ge===0&&et===0&&Xe===1||un.push("COLOR_ADJUSTMENT"),pa.sdfIcons&&un.push("RENDER_SDF");const hs=pa.icon.programConfigurations.get(c.id),ao=g.getOrCreateProgram("symbol",{config:hs,defines:un}),Ks=$t.imageAtlasTexture?$t.imageAtlasTexture.size:[0,0],mo=pa.iconSizeData,Cn=n.bp(mo,st.zoom),ni=Yt||st.pitch!==0,On=Rs(Pa,$t.tileID.canonical,Yt,yt,st,pa.getProjection(),sr),oi=Ci(Pa,$t.tileID.canonical,Yt,yt,st,pa.getProjection(),sr),yo=g.translatePosMatrix(oi,$t,L,Z,!0),Ri=g.translatePosMatrix(Pa,$t,L,Z),ss=Vn?Un:On,Tc=yt&&!Yt&&!qn;let Zo=Qt;!Nt&&!st.mercatorFromTransition||yt||(Zo=po(st));const eu=Ia?Zo:Qt,zl=c.getColorAdjustmentMatrix(Ne,Ge,et,Xe),Yu=qa(mo.kind,Cn,Tc,Yt,g,Ri,ss,yo,ct,!1,Ks,[0,0],!0,da,La,Mt,zr,eu,pa.getProjection(),zl,Ki),gl=$t.imageAtlasTexture?$t.imageAtlasTexture:null,kd=c.layout.get("icon-size").constantOr(0)!==1||pa.iconsNeedLinear,go=pa.sdfIcons||g.options.rotating||g.options.zooming||kd||ni?it.LINEAR:it.NEAREST,Ah=pa.sdfIcons&&c.paint.get("icon-halo-width").constantOr(1)!==0,Ol=g.terrain&&Yt&&qn?n.ad.mat4.invert(n.ad.mat4.create(),On):Un;if(qn&&pa.icon){const op=st.elevation,Wp=op?op.getAtTileOffsetFunc(da,st.center.lat,st.worldSize,pa.getProjection()):null,Fy=Li(Pa,$t.tileID.canonical,Yt,yt,st,pa.getProjection(),sr);oc(pa,Pa,g,!1,Fy,oi,Yt,Re,Wp,da)}return{program:ao,buffers:pa.icon,uniformValues:Yu,atlasTexture:gl,atlasTextureIcon:null,atlasInterpolation:go,atlasInterpolationIcon:null,isSDF:pa.sdfIcons,hasHalo:Ah,tile:$t,labelPlaneMatrixInv:Ol}},Fr=()=>{const qn=wt&&c.layout.get("symbol-placement")!=="point",un=[],Vn=qn||ia||pr;g.terrainRenderModeElevated()&&Lt&&un.push("PITCH_WITH_MAP_TERRAIN"),Ia&&(un.push("PROJECTION_GLOBE_VIEW"),Vn&&un.push("PROJECTED_POS_ON_VIEWPORT")),pa.text.zOffsetVertexBuffer&&un.push("Z_OFFSET"),pa.iconsInText&&un.push("RENDER_TEXT_AND_SYMBOL"),un.push("RENDER_SDF"),Cr(un);const Ki=pa.text.programConfigurations.get(c.id),hs=g.getOrCreateProgram("symbol",{config:Ki,defines:un});let ao,Ks=[0,0],mo=null;const Cn=pa.textSizeData;pa.iconsInText&&(Ks=$t.imageAtlasTexture?$t.imageAtlasTexture.size:[0,0],mo=$t.imageAtlasTexture?$t.imageAtlasTexture:null,ao=Lt||st.pitch!==0||g.options.rotating||g.options.zooming||Cn.kind==="composite"||Cn.kind==="camera"?it.LINEAR:it.NEAREST);const ni=$t.glyphAtlasTexture?$t.glyphAtlasTexture.size:[0,0],On=c.layout.get("text-size-scale-range"),oi=n.ay(g.scaleFactor,On[0],On[1]),yo=n.bp(Cn,st.zoom,oi),Ri=Rs(Pa,$t.tileID.canonical,Lt,wt,st,pa.getProjection(),sr),ss=Ci(Pa,$t.tileID.canonical,Lt,wt,st,pa.getProjection(),sr),Tc=g.translatePosMatrix(ss,$t,j,K,!0),Zo=g.translatePosMatrix(Pa,$t,j,K),eu=Vn?Un:Ri,zl=wt&&!Lt&&!qn;let Yu=Qt;!Nt&&!st.mercatorFromTransition||wt||(Yu=po(st));const gl=qa(Cn.kind,yo,zl,Lt,g,Zo,eu,Tc,ct,!0,ni,Ks,!0,da,La,Mt,zr,Ia?Yu:Qt,pa.getProjection(),null,null,oi),kd=$t.glyphAtlasTexture?$t.glyphAtlasTexture:null,go=it.LINEAR,Ah=c.paint.get("text-halo-width").constantOr(1)!==0,Ol=g.terrain&&Lt&&qn?n.ad.mat4.invert(n.ad.mat4.create(),Ri):Un;if(qn&&pa.text){const op=st.elevation,Wp=op?op.getAtTileOffsetFunc(da,st.center.lat,st.worldSize,pa.getProjection()):null,Fy=Li(Pa,$t.tileID.canonical,Lt,wt,st,pa.getProjection(),sr);oc(pa,Pa,g,!0,Fy,ss,Lt,Pe,Wp,da)}return{program:hs,buffers:pa.text,uniformValues:gl,atlasTexture:kd,atlasTextureIcon:mo,atlasInterpolation:go,atlasInterpolationIcon:ao,isSDF:!0,hasHalo:Ah,tile:$t,labelPlaneMatrixInv:Ol}},Mr=pa.icon.segments.get().length,dr=pa.text.segments.get().length,nn=Mr&&!P.onlyText?xr():null,Tr=dr&&!P.onlyIcons?Fr():null,er=c.paint.get("icon-opacity").constantOr(1),sn=c.paint.get("text-opacity").constantOr(1);if(aa&&pa.canOverlap){ua=!0;const qn=er&&!P.onlyText?pa.icon.segments.get():[],un=sn&&!P.onlyIcons?pa.text.segments.get():[];for(const Vn of qn)sa.push({segments:new n.b8([Vn]),sortKey:Vn.sortKey,state:nn});for(const Vn of un)sa.push({segments:new n.b8([Vn]),sortKey:Vn.sortKey,state:Tr})}else P.onlyText||sa.push({segments:er?pa.icon.segments:new n.b8([]),sortKey:0,state:nn}),P.onlyIcons||sa.push({segments:sn?pa.text.segments:new n.b8([]),sortKey:0,state:Tr})}ua&&sa.sort((da,$t)=>da.sortKey-$t.sortKey);for(const da of sa){const $t=da.state;if($t)if(g.terrain?g.terrain.setupElevationDraw($t.tile,$t.program,{useDepthForOcclusion:st.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:$t.labelPlaneMatrixInv}):g.setupDepthForOcclusion(st.depthOcclusionForSymbolsAndCircles,$t.program),nt.activeTexture.set(it.TEXTURE0),$t.atlasTexture&&$t.atlasTexture.bind($t.atlasInterpolation,it.CLAMP_TO_EDGE,!0),$t.atlasTextureIcon&&(nt.activeTexture.set(it.TEXTURE1),$t.atlasTextureIcon&&$t.atlasTextureIcon.bind($t.atlasInterpolationIcon,it.CLAMP_TO_EDGE,!0)),g.uploadCommonLightUniforms(g.context,$t.program),$t.hasHalo){const pa=$t.uniformValues;pa.u_is_halo=1,Mi($t.buffers,da.segments,c,g,$t.program,Sa,R,C,pa,2),pa.u_is_halo=0}else{if($t.isSDF){const pa=$t.uniformValues;$t.hasHalo&&(pa.u_is_halo=1,Mi($t.buffers,da.segments,c,g,$t.program,Sa,R,C,pa,1)),pa.u_is_halo=0}Mi($t.buffers,da.segments,c,g,$t.program,Sa,R,C,$t.uniformValues,1)}}}function Mi(g,o,c,A,R,C,P,L,j,Z){const K=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.iconTransitioningVertexBuffer,g.globeExtVertexBuffer,g.zOffsetVertexBuffer];R.draw(A,A.context.gl.TRIANGLES,C,P,L,_r.disabled,j,c.id,g.layoutVertexBuffer,g.indexBuffer,o,c.paint,A.transform.zoom,g.programConfigurations.get(c.id),K,Z)}function qs(g,o){const c=1<<g.canonical.z,A=(o.x*c-g.canonical.x-g.wrap*c)*n.ai,R=(o.y*c-g.canonical.y)*n.ai,C=n.d5(o.z,o.y);return n.ad.vec3.fromValues(A,R,C)}function To(g,o,c,A,R){if(!c.layout||c.layout.get("fill-elevation-reference")==="none")return;const C=g.context.gl,P=new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),L=new ir(g.context.gl.GREATER,ir.ReadWrite,g.depthRangeFor3D),j=function(ce){const Ce=n.c4(ce.pitch);let Re=.01;return ce.isOrthographic&&(Re=n.ah(1e-4,Re,n.c9(Ce>=Na?1:Ce/Na))),2*Re}(g.transform),Z=g.transform.getFreeCameraOptions().position,K="elevatedStructuresDepthReconstruct",te=g.getOrCreateProgram(K,{defines:["DEPTH_RECONSTRUCTION"]}),ae=g.getOrCreateProgram(K);for(const ce of A){const Ce=o.getTile(ce),Re=Ce.getBucket(c);if(!Re)continue;const Pe=Re.elevatedStructures;if(!Pe)continue;const Ne=Re.elevationBufferData.heightRange,Ge=qs(ce.toUnwrapped(),Z),et=g.translatePosMatrix(ce.projMatrix,Ce,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));let Xe,ct,nt,it;if(R==="initialize"){if(!Ne||Ne.min>=1||Pe.depthSegments.segments[0].primitiveLength===0)continue;Xe=tt(et,Ge,j,1,0),ct=P,nt=Pe.depthSegments,it=te}else if(R==="reset"){if(!Ne||Ne.min>=0||Pe.maskSegments.segments[0].primitiveLength===0)continue;Xe=tt(et,Ge,0,0,1),ct=L,nt=Pe.maskSegments,it=te}else if(R==="geometry"){if(Pe.depthSegments.segments[0].primitiveLength===0)continue;Xe=tt(et,Ge,j,1,0),ct=P,nt=Pe.depthSegments,it=ae}it.draw(g,C.TRIANGLES,ct,Rr.disabled,br.disabled,_r.disabled,Xe,c.id,Pe.vertexBuffer,Pe.indexBuffer,nt,c.paint,g.transform.zoom)}}function rl(g,o,c){const{painter:A,sourceCache:R,layer:C,coords:P,colorMode:L,elevationType:j,terrainEnabled:Z,pass:K}=g,te=A.context.gl,ae=C.paint.get("fill-pattern");let ce=j;j!=="road"||o&&!Z||(ce="none");const Ce=ce==="road",Re=new ir(A.context.gl.LEQUAL,ir.ReadWrite,A.depthRangeFor3D),Pe=ae&&ae.constantOr(1),Ne=(Ge,et)=>{let Xe,ct,nt,it,st;et?(ct=Pe&&!C.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Xe=te.LINES):(ct=Pe?"fillPattern":"fill",Xe=te.TRIANGLES);for(const yt of P){const wt=R.getTile(yt);if(Pe&&!wt.patternsLoaded())continue;const Yt=wt.getBucket(C);if(!Yt)continue;const Lt=o?Yt.elevationBufferData:Yt.bufferData;if(Lt.isEmpty())continue;A.prepareDrawTile();const aa=Lt.programConfigurations.get(C.id),ua=A.isTileAffectedByFog(yt),Sa=[],Mt=[];Ce&&(Sa.push("ELEVATED_ROADS"),Mt.push(Lt.elevatedLayoutVertexBuffer));const ia=A.getOrCreateProgram(ct,{config:aa,overrideFog:ua,defines:Sa});Pe&&(A.context.activeTexture.set(te.TEXTURE0),wt.imageAtlasTexture&&wt.imageAtlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE),aa.updatePaintBuffers());const Nt=ae.constantOr(null);if(Nt&&wt.imageAtlas){const da=wt.imageAtlas,$t=n.d0.from(Nt).getPrimary().scaleSelf(n.q.devicePixelRatio).toString(),pa=da.patternPositions.get($t);pa&&aa.setConstantPatternPositions(pa)}const sa=A.translatePosMatrix(yt.projMatrix,wt,C.paint.get("fill-translate"),C.paint.get("fill-translate-anchor")),Qt=C.paint.get("fill-emissive-strength");if(et){it=Lt.lineIndexBuffer,st=Lt.lineSegments;const da=A.terrain&&A.terrain.renderingToTexture?A.terrain.drapeBufferSize:[te.drawingBufferWidth,te.drawingBufferHeight];nt=ct==="fillOutlinePattern"&&Pe?Qe(sa,Qt,A,wt,da):je(sa,Qt,da)}else it=Lt.indexBuffer,st=Lt.triangleSegments,nt=Pe?Ee(sa,Qt,A,wt):he(sa,Qt);A.uploadCommonUniforms(A.context,ia,yt.toUnwrapped()),ia.draw(A,Xe,ce!=="none"?Re:Ge,c||A.stencilModeForClipping(yt),L,_r.disabled,nt,C.id,Lt.layoutVertexBuffer,it,st,C.paint,A.transform.zoom,aa,Mt)}};A.renderPass===K&&Ne(A.depthModeForSublayer(1,A.renderPass==="opaque"?ir.ReadWrite:ir.ReadOnly),!1),ce==="none"&&A.renderPass==="translucent"&&C.paint.get("fill-antialias")&&Ne(A.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,ir.ReadOnly),!0)}function Pl(g,o,c,A,R,C,P,L){c.resetLayerRenderingStats(g);const j=g.context,Z=j.gl,K=g.transform,te=c.paint.get("fill-extrusion-pattern"),ae=te.constantOr(1),ce=c.paint.get("fill-extrusion-opacity"),Ce=g.style.enable3dLights(),Re=c.paint.get(Ce&&!ae?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Pe=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),Re],Ne=c.layout.get("fill-extrusion-edge-radius"),Ge=Ne>0&&!c.paint.get("fill-extrusion-rounded-roof"),et=Ge?0:Ne,Xe=K.projection.name==="globe"?n.d6():0,ct=K.projection.name==="globe",nt=ct?n.ag(K.zoom):0,it=[n.av(K.center.lng),n.aC(K.center.lat)],st=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",yt=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(st?null:c.lut).toArray01().slice(0,3),wt=c.paint.get("fill-extrusion-flood-light-intensity"),Yt=c.paint.get("fill-extrusion-vertical-scale"),Lt=c.paint.get("fill-extrusion-line-width").constantOr(1)!==0,aa=c.paint.get("fill-extrusion-height-alignment"),ua=c.paint.get("fill-extrusion-base-alignment"),Sa=Zs(g,c.paint.get("fill-extrusion-cutoff-fade-range")),Mt=[];let ia;ct&&Mt.push("PROJECTION_GLOBE_VIEW"),Pe[0]>0&&Mt.push("FAUX_AO"),Ge&&Mt.push("ZERO_ROOF_RADIUS"),L&&Mt.push("HAS_CENTROID"),wt>0&&Mt.push("FLOOD_LIGHT"),Sa.shouldRenderCutoff&&Mt.push("RENDER_CUTOFF"),Lt&&Mt.push("RENDER_WALL_MODE");const Nt=g.renderPass==="shadow",sa=g.shadowRenderer,Qt=Nt&&!!sa;g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!0);let da=[0,0,0];if(sa){const Ia=g.style.directionalLight,La=g.style.ambientLight;Ia&&La&&(da=Oc(g.style,Ia,La)),Nt||(Mt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),sa.useNormalOffset&&Mt.push("NORMAL_OFFSET")),ia=Mt.concat(["SHADOWS_SINGLE_CASCADE"])}const $t=Qt?"fillExtrusionDepth":ae?"fillExtrusionPattern":"fillExtrusion",pa=c.getLayerRenderingStats();for(const Ia of A){const La=o.getTile(Ia),Pa=La.getBucket(c);if(!Pa||Pa.projection.name!==K.projection.name)continue;let sr=!1;sa&&(sr=sa.getMaxCascadeForTile(Ia.toUnwrapped())===0);const Lr=g.isTileAffectedByFog(Ia),pr=Pa.programConfigurations.get(c.id),zr=g.getOrCreateProgram($t,{config:pr,defines:sr?ia:Mt,overrideFog:Lr});if(g.terrain&&g.terrain.setupElevationDraw(La,zr,{useMeterToDem:!0}),!Pa.centroidVertexBuffer){const Tr=zr.attributes.a_centroid_pos;Tr!==void 0&&Z.vertexAttrib2f(Tr,0,0)}!Nt&&sa&&sa.setupShadows(La.tileID.toUnwrapped(),zr,"vector-tile",La.tileID.overscaledZ),ae&&(g.context.activeTexture.set(Z.TEXTURE0),La.imageAtlasTexture&&La.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),pr.updatePaintBuffers());const Cr=te.constantOr(null);if(Cr&&La.imageAtlas){const Tr=La.imageAtlas,er=n.d0.from(Cr).getPrimary().scaleSelf(n.q.devicePixelRatio),sn=Tr.patternPositions.get(er.toString());sn&&pr.setConstantPatternPositions(sn)}const xr=c.paint.get("fill-extrusion-vertical-gradient"),Fr=1/Pa.tileToMeter;let Mr;if(Nt&&sa){if($i(La.tileID,Pa,g))continue;const Tr=sa.calculateShadowPassMatrixFromTile(La.tileID.toUnwrapped());Mr=G(Tr,et,Fr,Yt,aa,ua)}else{const Tr=g.translatePosMatrix(Ia.expandedProjMatrix,La,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),er=K.projection.createInversionMatrix(K,Ia.canonical);Mr=ae?J(Tr,g,xr,ce,Pe,et,Fr,Ia,La,Xe,aa,ua,nt,it,er,yt,Yt):Uh(Tr,g,xr,ce,Pe,et,Fr,Ia,Xe,aa,ua,nt,it,er,yt,Yt,wt,da)}g.uploadCommonUniforms(j,zr,Ia.toUnwrapped(),null,Sa);let dr=Pa.segments;if(K.projection.name==="mercator"&&!Nt&&(dr=Pa.getVisibleSegments(La.tileID,g.terrain,g.transform.getFrustum(0)),!dr.get().length))continue;if(pa)if(Nt)for(const Tr of dr.get())pa.numRenderedVerticesInShadowPass+=Tr.primitiveLength;else for(const Tr of dr.get())pa.numRenderedVerticesInTransparentPass+=Tr.primitiveLength;const nn=[];(g.terrain||L)&&nn.push(Pa.centroidVertexBuffer),ct&&nn.push(Pa.layoutVertexExtBuffer),Lt&&nn.push(Pa.wallVertexBuffer),zr.draw(g,j.gl.TRIANGLES,R,C,P,_r.backCCW,Mr,c.id,Pa.layoutVertexBuffer,Pa.indexBuffer,dr,c.paint,g.transform.zoom,pr,nn)}g.shadowRenderer&&(g.shadowRenderer.useNormalOffset=!1)}function xs(g,o,c,A,R,C,P,L,j,Z,K,te,ae,ce,Ce,Re,Pe,Ne,Ge){const et=g.context,Xe=et.gl,ct=g.transform,nt=g.transform.zoom,it=[],st=Zs(g,c.paint.get("fill-extrusion-cutoff-fade-range"));Z==="clear"?(it.push("CLEAR_SUBPASS"),Ge&&(it.push("CLEAR_FROM_TEXTURE"),et.activeTexture.set(Xe.TEXTURE0),Ge.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE))):Z==="sdf"&&it.push("SDF_SUBPASS"),Pe&&it.push("HAS_CENTROID"),st.shouldRenderCutoff&&it.push("RENDER_CUTOFF");const yt=c.layout.get("fill-extrusion-edge-radius"),wt=(Yt,Lt,aa,ua,Sa)=>{const Mt=Lt.programConfigurations.get(c.id),ia=g.isTileAffectedByFog(Yt),Nt=g.getOrCreateProgram("fillExtrusionGroundEffect",{config:Mt,defines:it,overrideFog:ia}),sa=((da,$t,pa,Ia,La,Pa,sr,Lr,pr,zr,Cr)=>({u_matrix:$t,u_opacity:pa,u_ao_pass:Ia?1:0,u_meter_to_tile:La,u_ao:Pa,u_flood_light_intensity:sr,u_flood_light_color:Lr,u_attenuation:pr,u_edge_radius:zr,u_fb:0,u_fb_size:Cr,u_dynamic_offset:1}))(0,ua,K,j,Sa,[te,ae*Sa],ce,Ce,Re,nt>=17?0:yt*Sa,Ge?Ge.size[0]:0),Qt=[];Pe&&Qt.push(Lt.hiddenByLandmarkVertexBuffer),g.uploadCommonUniforms(et,Nt,Yt.toUnwrapped(),null,st),Nt.draw(g,et.gl.TRIANGLES,R,C,P,L,sa,c.id,Lt.vertexBuffer,Lt.indexBuffer,aa,c.paint,nt,Mt,Qt)};for(const Yt of A){const Lt=o.getTile(Yt),aa=Lt.getBucket(c);if(!aa||aa.projection.name!==ct.projection.name||!aa.groundEffect||aa.groundEffect&&!aa.groundEffect.hasData())continue;const ua=aa.groundEffect,Sa=1/aa.tileToMeter;{const Mt=g.translatePosMatrix(Yt.projMatrix,Lt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ia=ua.getDefaultSegment();wt(Yt,ua,ia,Mt,Sa)}if(Ne)for(let Mt=0;Mt<4;Mt++){const ia=n.d7[Mt](Yt),Nt=o.getTile(ia);if(!Nt)continue;const sa=Nt.getBucket(c);if(!sa||sa.projection.name!==ct.projection.name||!sa.groundEffect||sa.groundEffect&&!sa.groundEffect.hasData())continue;const Qt=sa.groundEffect;let da,$t;Mt===0?(da=[-n.ai,0,0],$t=1):Mt===1?(da=[n.ai,0,0],$t=0):Mt===2?(da=[0,-n.ai,0],$t=3):(da=[0,n.ai,0],$t=2);const pa=Qt.regionSegments[$t];if(!pa)continue;const Ia=new Float32Array(16);n.ad.mat4.translate(Ia,Yt.projMatrix,da),wt(Yt,Qt,pa,g.translatePosMatrix(Ia,Lt,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Sa)}}}function El(g,o,c,A,R,C,P){A.centroidVertexArray.length===0&&A.createCentroidsBuffer();const L=C?C.findDEMTileFor(c):null;if(!(L&&L.dem||P))return;C&&L&&L.dem&&A.selfDEMTileTimestamp!==L.dem._timestamp&&(A.borderDoneWithNeighborZ=[-1,-1,-1,-1],A.selfDEMTileTimestamp=L.dem._timestamp);const j=Ne=>new n.P(Math.ceil((Ne+n.da)*n.db),0),Z=Ne=>{const Ge=o.getSource().minzoom,et=ct=>{const nt=o.getTileByID(ct);if(nt&&nt.hasData())return nt.getBucket(R)},Xe=[0,-1,1];for(const ct of Xe){if(Ne.overscaledZ+ct<Ge)continue;const nt=et(Ne.calculateScaledKey(Ne.overscaledZ+ct));if(nt)return nt}},K=[0,0,0],te=(Ne,Ge)=>(K[0]=Math.min(Ne.min.y,Ge.min.y),K[1]=Math.max(Ne.max.y,Ge.max.y),K[2]=n.ai-Ge.min.x>Ne.max.x?Ge.min.x-n.ai:Ne.max.x,K),ae=(Ne,Ge)=>(K[0]=Math.min(Ne.min.x,Ge.min.x),K[1]=Math.max(Ne.max.x,Ge.max.x),K[2]=n.ai-Ge.min.y>Ne.max.y?Ge.min.y-n.ai:Ne.max.y,K),ce=[(Ne,Ge)=>te(Ne,Ge),(Ne,Ge)=>te(Ge,Ne),(Ne,Ge)=>ae(Ne,Ge),(Ne,Ge)=>ae(Ge,Ne)],Ce=(Ne,Ge,et,Xe,ct,nt,it)=>{if(!C)return 0;const st=[[nt?et:Ne,nt?Ne:et,0],[nt?et:Ge,nt?Ge:et,0]],yt=it<0?n.ai+it:it,wt=[nt?yt:(Ne+Ge)/2,nt?(Ne+Ge)/2:yt,0];return et===0&&it<0||et!==0&&it>0?C.getForTilePoints(ct,[wt],!0,Xe):st.push(wt),C.getForTilePoints(c,st,!0,L),Math.max(st[0][2],st[1][2],wt[2])/C.exaggeration()};for(let Ne=0;Ne<4;Ne++){const Ge=A.borderFeatureIndices[Ne];if(Ge.length===0)continue;const et=n.d7[Ne](c),Xe=Z(et);if(!(Xe&&Xe instanceof n.d8))continue;const ct=C?C.findDEMTileFor(et):null;if(!(ct&&ct.dem||P)||(C&&ct&&ct.dem&&A.borderDEMTileTimestamp[Ne]!==ct.dem._timestamp&&(A.borderDoneWithNeighborZ[Ne]=-1,A.borderDEMTileTimestamp[Ne]=ct.dem._timestamp),A.borderDoneWithNeighborZ[Ne]===Xe.canonical.z))continue;Xe.centroidVertexArray.length===0&&Xe.createCentroidsBuffer();const nt=(Ne<2?1:5)-Ne,it=Xe.borderDoneWithNeighborZ[nt]!==A.canonical.z,st=Xe.borderFeatureIndices[nt];let yt=0;if(A.canonical.z!==Xe.canonical.z){for(const wt of Ge)A.showCentroid(A.featuresOnBorder[wt]);if(it)for(const wt of st)Xe.showCentroid(Xe.featuresOnBorder[wt]);A.borderDoneWithNeighborZ[Ne]=Xe.canonical.z,Xe.borderDoneWithNeighborZ[nt]=A.canonical.z}for(const wt of Ge){const Yt=A.featuresOnBorder[wt],Lt=A.centroidData[Yt.centroidDataIndex],aa=Yt.borders[Ne];let ua;for(;yt<st.length;){ua=Xe.featuresOnBorder[st[yt]];const Sa=ua.borders[nt];if(Sa[1]>aa[0]+3||Sa[0]>aa[0]-3)break;Xe.showCentroid(ua),yt++}if(ua&&yt<st.length){const Sa=yt;let Mt=0;for(;!(ua.borders[nt][0]>aa[1]-3)&&(Mt++,++yt!==st.length);)ua=Xe.featuresOnBorder[st[yt]];ua=Xe.featuresOnBorder[st[Sa]];let ia=!1;if(Mt>=1){const Qt=ua.borders[nt];Math.abs(aa[0]-Qt[0])<3&&Math.abs(aa[1]-Qt[1])<3&&(Mt=1,ia=!0,yt=Sa+1)}else if(Mt===0){A.showCentroid(Yt);continue}const Nt=Xe.centroidData[ua.centroidDataIndex];P&&ia&&(((Re=Lt).flags|(Pe=Nt).flags)&n.d9?(Re.flags|=n.d9,Pe.flags|=n.d9):(Re.flags&=~n.d9,Pe.flags&=~n.d9));const sa=Yt.intersectsCount()>1||ua.intersectsCount()>1;if(Mt>1)yt=Sa,Lt.centroidXY=Nt.centroidXY=new n.P(0,0);else if(ct&&ct.dem&&!sa){const Qt=ce[Ne](Lt,Nt),da=Ne%2?n.ai-1:0,$t=Ce(Qt[0],Math.min(n.ai-1,Qt[1]),da,ct,et,Ne<2,Qt[2]);Lt.centroidXY=Nt.centroidXY=j($t)}else sa?Lt.centroidXY=Nt.centroidXY=new n.P(0,0):(Lt.centroidXY=A.encodeBorderCentroid(Yt),Nt.centroidXY=Xe.encodeBorderCentroid(ua));A.writeCentroidToBuffer(Lt),Xe.writeCentroidToBuffer(Nt)}else A.showCentroid(Yt)}A.borderDoneWithNeighborZ[Ne]=Xe.canonical.z,Xe.borderDoneWithNeighborZ[nt]=A.canonical.z}var Re,Pe;(A.needsCentroidUpdate||!A.centroidVertexBuffer&&A.centroidVertexArray.length!==0)&&A.uploadCentroid(g)}const Ru=[1,0,0],Ca=[0,1,0],Ua=[0,0,1];function $i(g,o,c){const A=c.transform,R=c.shadowRenderer;if(!R)return!0;const C=g.toUnwrapped(),P=A.tileSize*R._cascades[c.currentShadowCascade].scale;let L=o.maxHeight;if(A.elevation){const Re=A.elevation.getMinMaxForTile(g);Re&&(L+=Re.max)}const j=[...R.shadowDirection];j[2]=-j[2];const Z=R.computeSimplifiedTileShadowVolume(C,L,P,j);if(!Z)return!1;const K=[Ru,Ca,Ua,j,[j[0],0,j[2]],[0,j[1],j[2]]],te=A.projection.name==="globe",ae=A.scaleZoom(P),ce=n.bR.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,ae,!te),Ce=R.getCurrentCascadeFrustum();return ce.intersectsPrecise(Z.vertices,Z.planes,K)===0||Ce.intersectsPrecise(Z.vertices,Z.planes,K)===0}function zi(g){return[g[0]*n.dc,g[1]*n.dc,g[2]*n.dc,0]}function Gt(g,o,c,A,R,C,P,L,j){const Z=A.getSource(),K=c.globeSharedBuffers;if(!K)return;let te,ae,ce;if(o&&(te=A.getTile(o)),Z instanceof n.aK?(ae=Z.texture,ce=n.cJ(0,0,c.transform)):te&&o&&(ae=te.texture,ce=n.cJ(o.canonical.z,o.canonical.x,c.transform)),!ae||!ce)return;g||(ce=n.ad.mat4.scale(n.ad.mat4.create(),ce,[1,-1,1]));const Ce=c.context,Re=Ce.gl,Pe=R.paint.get("raster-resampling")==="nearest"?Re.NEAREST:Re.LINEAR,Ne=c.colorModeForDrapableLayerRenderPass(C),Ge=P.defines;Ge.push("GLOBE_POLES");const et=new ir(Re.LEQUAL,ir.ReadWrite,c.depthRangeFor3D),Xe=Float32Array.from(c.transform.expandedFarZProjMatrix),ct=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0))));c.terrain&&c.terrain.prepareDrawTile(),Ce.activeTexture.set(Re.TEXTURE0),ae.bind(Pe,Re.CLAMP_TO_EDGE),Ce.activeTexture.set(Re.TEXTURE1),ae.bind(Pe,Re.CLAMP_TO_EDGE),"useMipmap"in ae&&Ce.extTextureFilterAnisotropic&&c.transform.pitch>20&&Re.texParameterf(Re.TEXTURE_2D,Ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ce.extTextureFilterAnisotropicMax);const[nt,it,st,yt]=o?K.getPoleBuffers(o.canonical.z,!1):K.getPoleBuffers(0,!0),wt=R.paint.get("raster-elevation");let Yt;g?(Yt=nt,c.renderDefaultNorthPole=wt!==0):(Yt=it,c.renderDefaultSouthPole=wt!==0);const Lt=zi(P.mix),aa=((Sa,Mt,ia,Nt,sa,Qt,da,$t,pa,Ia,La,Pa,sr)=>ra(Sa,Mt,ia,new Float32Array(16),new Float32Array(9),[0,0],Nt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Qt,[0,0],$t,2,Ia,La,Pa,1,0,sr))(Xe,ct,ce,n.ag(c.transform.zoom),0,R,0,wt,0,Lt,P.offset,P.range,C),ua=c.getOrCreateProgram("raster",{defines:Ge});c.uploadCommonUniforms(Ce,ua,null),ua.draw(c,Re.TRIANGLES,et,j,Ne,L,aa,R.id,Yt,st,yt)}function Bp(g){const o=g._nearZ,c=g.projection.farthestPixelDistance(g),A=c-o,R=.2*g.height,C=o+R;return[o,c,(C-R-o)/A,(C-o)/A]}function sh(g,o,c,A){if(g)return o instanceof Vi&&g instanceof Lo?o.getTextureDescriptor(g,c,!0):{texture:g.texture,mix:zi(A.mix),offset:A.offset,buffer:0,tileSize:1}}var oh=n.dd([{name:"a_index",type:"Int16",components:1}]);class lh{constructor(o,c,A,R){const C={width:A[0],height:A[1],data:null},P=o.gl;this.targetColorTexture=new n.T(o,C,P.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new n.T(o,C,P.RGBA8,{useMipmap:!1}),this.context=o,this.updateParticleTexture(c,R),this.lastInvalidatedAt=0}updateParticleTexture(o,c){if(this.particleTextureDimension===c.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const A=this.context.gl,R=c.width*c.height;this.particleTexture0=new n.T(this.context,c,A.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new n.T(this.context,c,A.RGBA8,{premultiply:!1,useMipmap:!1});const C=new n.de;C.reserve(R);for(let P=0;P<R;P++)C.emplaceBack(P);this.particleIndexBuffer=this.context.createVertexBuffer(C,oh.members,!0),this.particleSegment=n.b8.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=c.width}update(o){return!(this.lastInvalidatedAt<o&&(this.lastInvalidatedAt=n.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Tu(g,o,c){if(!g)return null;const A=o.getTextureDescriptor(g,c,!0);if(!A)return null;let{texture:R,mix:C,offset:P,tileSize:L,buffer:j,format:Z}=A;if(!R||!Z)return null;let K=!1;return Z==="uint32"&&(K=!0,C[3]=0,C=xt(n.df,C,[0,c.paint.get("raster-particle-max-speed")]),P=Aa(n.df,P,[0,c.paint.get("raster-particle-max-speed")])),{texture:R,textureOffset:[j/(L+2*j),L/(L+2*j)],tileSize:L,scalarData:K,scale:C,offset:P,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[Z]]}}function uh(g){const o=g._nearZ,c=g.projection.farthestPixelDistance(g),A=c-o,R=.2*g.height,C=o+R;return[o,c,(C-R-o)/A,(C-o)/A]}const qu=new n.al(1,0,0,1),Im=new n.al(0,1,0,1),Hf=new n.al(0,0,1,1),Lm=new n.al(1,0,1,1),ch=new n.al(0,1,1,1);function Nl(g,o,c,A,R,C,P){const L=g.context,j=g.transform,Z=L.gl,K=j.projection.name==="globe",te=K?["PROJECTION_GLOBE_VIEW"]:[];let ae=n.ad.mat4.clone(c.projMatrix);if(K&&n.ag(j.zoom)>0){const Lt=n.bb(c.canonical,j),aa=n.dg(Lt);ae=n.ad.mat4.multiply(new Float32Array(16),j.globeMatrix,aa),n.ad.mat4.multiply(ae,j.projMatrix,ae)}const ce=n.ad.mat4.create();ce[12]+=2*R/(n.q.devicePixelRatio*j.width),ce[13]+=2*C/(n.q.devicePixelRatio*j.height),n.ad.mat4.multiply(ae,ce,ae);const Ce=g.getOrCreateProgram("debug",{defines:te}),Re=o.getTileByID(c.key);g.terrain&&g.terrain.setupElevationDraw(Re,Ce);const Pe=ir.disabled,Ne=Rr.disabled,Ge=g.colorModeForRenderPass(),et="$debug";L.activeTexture.set(Z.TEXTURE0),g.emptyTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),K?Re._makeGlobeTileDebugBuffers(g.context,j):Re._makeDebugTileBoundsBuffers(g.context,j.projection);const Xe=Re._tileDebugBuffer||g.debugBuffer,ct=Re._tileDebugIndexBuffer||g.debugIndexBuffer,nt=Re._tileDebugSegments||g.debugSegments;if(Ce.draw(g,Z.LINE_STRIP,Pe,Ne,Ge,_r.disabled,ht(ae,A),et,Xe,ct,nt,null,null,null,[Re._globeTileDebugBorderBuffer]),P){const Lt=Re.latestRawTileData,aa=Math.floor((Lt&&Lt.byteLength||0)/1024);let ua=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ua+=` => ${c.overscaledZ}`),ua+=` ${Re.state}`,ua+=` ${aa}kb`,function(Sa,Mt){Sa.initDebugOverlayCanvas();const ia=Sa.debugOverlayCanvas,Nt=Sa.context.gl,sa=Sa.debugOverlayCanvas.getContext("2d");sa.clearRect(0,0,ia.width,ia.height),sa.shadowColor="white",sa.shadowBlur=2,sa.lineWidth=1.5,sa.strokeStyle="white",sa.textBaseline="top",sa.font="bold 36px Open Sans, sans-serif",sa.fillText(Mt,5,5),sa.strokeText(Mt,5,5),Sa.debugOverlayTexture.update(ia),Sa.debugOverlayTexture.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE)}(g,ua)}const it=o.getTile(c).tileSize,st=512/Math.min(it,512)*(c.overscaledZ/j.zoom)*.5,yt=Re._tileDebugTextBuffer||g.debugBuffer,wt=Re._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,Yt=Re._tileDebugTextSegments||g.debugSegments;Ce.draw(g,Z.TRIANGLES,Pe,Ne,br.alphaBlended,_r.disabled,ht(ae,n.al.transparent,st),et,yt,wt,Yt,null,null,null,[Re._globeTileDebugTextBuffer])}function kh(g,o,c,A){Hc(g,0,o+c/2,g.transform.width,c,A)}function qc(g,o,c,A){Hc(g,o-c/2,0,c,g.transform.height,A)}function Hc(g,o,c,A,R,C){const P=g.context,L=P.gl;L.enable(L.SCISSOR_TEST),L.scissor(o*n.q.devicePixelRatio,c*n.q.devicePixelRatio,A*n.q.devicePixelRatio,R*n.q.devicePixelRatio),P.clear({color:C}),L.disable(L.SCISSOR_TEST)}const $f=n.dd([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:$c}=$f;function nl(g,o,c,A){g.emplaceBack(o,c,A)}class Fm{constructor(o){this.vertexArray=new n.dh,this.indices=new n.aV,nl(this.vertexArray,-1,-1,1),nl(this.vertexArray,1,-1,1),nl(this.vertexArray,-1,1,1),nl(this.vertexArray,1,1,1),nl(this.vertexArray,-1,-1,-1),nl(this.vertexArray,1,-1,-1),nl(this.vertexArray,-1,1,-1),nl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,$c),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=n.b8.simpleSegment(0,0,36,12)}}function to(g,o,c,A,R,C){const P=g.context.gl,L=o.paint.get("sky-atmosphere-color"),j=o.paint.get("sky-atmosphere-halo-color"),Z=o.paint.get("sky-atmosphere-sun-intensity"),K=((te,ae,ce,Ce,Re)=>({u_matrix_3f:te,u_sun_direction:ae,u_sun_intensity:ce,u_color_tint_r:[Ce.r,Ce.g,Ce.b,Ce.a],u_color_tint_m:[Re.r,Re.g,Re.b,Re.a],u_luminance:5e-5}))(n.ad.mat3.fromMat4(n.ad.mat3.create(),A),R,Z,L,j);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+C,o.skyboxTexture,0),c.draw(g,P.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,_r.frontCW,K,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Vy=n.dd([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class dh{constructor(o){const c=new n.di;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const A=new n.aV;A.emplaceBack(0,1,2),A.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(c,Vy.members),this.indexBuffer=o.createIndexBuffer(A),this.segments=n.b8.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ri=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class xn{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Kf{constructor(o){this.colorModeAlphaBlendedWriteRGB=new br([1,Qi,1,Qi],n.al.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new br([1,0,1,0],n.al.transparent,[!1,!1,!1,!0]),this.params=new xn,this.updateNeeded=!0,o.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),o.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),o.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(o){const c=o.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new dh(c);const A=this.params.sizeRange,R=this.params.intensityRange,C=function(K){const te=n.dl(30),ae=[];for(let ce=0;ce<K;++ce){const Ce=2*Math.PI*te(),Re=Math.acos(1-2*te())-.5*Math.PI;ae.push(n.ad.vec3.fromValues(Math.cos(Re)*Math.cos(Ce),Math.cos(Re)*Math.sin(Ce),Math.sin(Re)))}return ae}(this.params.starsCount),P=n.dl(300),L=new n.dj,j=new n.aV;let Z=0;for(let K=0;K<C.length;++K){const te=n.ad.vec3.scale([],C[K],200),ae=Math.max(0,1+.01*A*(1*P()-.5)),ce=Math.max(0,1+.01*R*(1*P()-.5));L.emplaceBack(te[0],te[1],te[2],-1,-1,ae,ce),L.emplaceBack(te[0],te[1],te[2],1,-1,ae,ce),L.emplaceBack(te[0],te[1],te[2],1,1,ae,ce),L.emplaceBack(te[0],te[1],te[2],-1,1,ae,ce),j.emplaceBack(Z+0,Z+1,Z+2),j.emplaceBack(Z+0,Z+2,Z+3),Z+=4}this.starsVx=c.createVertexBuffer(L,ri.members),this.starsIdx=c.createIndexBuffer(j),this.starsSegments=n.b8.simpleSegment(0,0,L.length,j.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(o,c){const A=o.context,R=A.gl,C=o.transform,P=new ir(R.LEQUAL,ir.ReadOnly,[0,1]),L=n.ag(C.zoom),j=o.style.getLut(c.scope),Z=c.properties.get("color-use-theme")==="none",K=c.properties.get("color").toRenderColor(Z?null:j).toArray01(),te=c.properties.get("high-color-use-theme")==="none",ae=c.properties.get("high-color").toRenderColor(te?null:j).toArray01(),ce=c.properties.get("space-color-use-theme")==="none",Ce=c.properties.get("space-color").toRenderColor(ce?null:j).toArray01PremultipliedAlpha(),Re=5e-4,Pe=n.dk(c.properties.get("horizon-blend"),0,1,Re,.25),Ne=n.cD(o,A,C)&&Pe===Re?C.worldSize/(2*Math.PI*1.025)-1:C.globeRadius,Ge=o.frameCounter/1e3%1,et=n.ad.vec3.length(C.globeCenterInViewSpace),Xe=Math.sqrt(Math.pow(et,2)-Math.pow(Ne,2)),ct=Math.acos(Xe/et),nt=it=>{const st=C.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];it&&st.push("ALPHA_PASS");const yt=o.getOrCreateProgram("globeAtmosphere",{defines:st}),wt=((Lt,aa,ua,Sa,Mt,ia,Nt,sa,Qt,da,$t,pa)=>({u_frustum_tl:Lt,u_frustum_tr:aa,u_frustum_br:ua,u_frustum_bl:Sa,u_horizon:Mt,u_transition:ia,u_fadeout_range:Nt,u_color:sa,u_high_color:Qt,u_space_color:da,u_temporal_offset:$t,u_horizon_angle:pa}))(C.frustumCorners.TL,C.frustumCorners.TR,C.frustumCorners.BR,C.frustumCorners.BL,C.frustumCorners.horizon,L,Pe,K,ae,Ce,Ge,ct);o.uploadCommonUniforms(A,yt);const Yt=this.atmosphereBuffer;Yt&&yt.draw(o,R.TRIANGLES,P,Rr.disabled,it?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,_r.backCW,wt,it?"atmosphere_glow_alpha":"atmosphere_glow",Yt.vertexBuffer,Yt.indexBuffer,Yt.segments)};nt(!1),nt(!0)}drawStars(o,c){const A=n.ay(c.properties.get("star-intensity"),0,1);if(A===0)return;const R=o.context,C=R.gl,P=o.transform,L=o.getOrCreateProgram("stars"),j=n.ad.quat.identity([]);n.ad.quat.rotateX(j,j,-P._pitch),n.ad.quat.rotateZ(j,j,-P.angle),n.ad.quat.rotateX(j,j,n.ak(P._center.lat)),n.ad.quat.rotateY(j,j,-n.ak(P._center.lng));const Z=n.ad.mat4.fromQuat(new Float32Array(16),j),K=n.ad.mat4.multiply([],P.starsProjMatrix,Z),te=n.ad.mat3.fromMat4([],Z),ae=n.ad.mat3.invert([],te),ce=[0,1,0];n.ad.vec3.transformMat3(ce,ce,ae),n.ad.vec3.scale(ce,ce,this.params.sizeMultiplier);const Ce=[1,0,0];n.ad.vec3.transformMat3(Ce,Ce,ae),n.ad.vec3.scale(Ce,Ce,this.params.sizeMultiplier);const Re=(Pe=ce,Ne=Ce,Ge=A,{u_matrix:Float32Array.from(K),u_up:Pe,u_right:Ne,u_intensity_multiplier:Ge});var Pe,Ne,Ge;o.uploadCommonUniforms(R,L),this.starsVx&&this.starsIdx&&L.draw(o,C.TRIANGLES,ir.disabled,Rr.disabled,this.colorModeAlphaBlendedWriteRGB,_r.disabled,Re,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Su(g,o){const c=[...g],A=o.cameraWorldSizeForFog/o.worldSize,R=n.ad.mat4.identity([]);return n.ad.mat4.scale(R,R,[A,A,1]),n.ad.mat4.multiply(c,R,c),n.ad.mat4.multiply(c,o.worldToFogMatrix,c),c}function Dd(g,o,c,A,R){const C=c.material,P=A.context,{baseColorTexture:L,metallicRoughnessTexture:j}=C.pbrMetallicRoughness,{normalTexture:Z,occlusionTexture:K,emissionTexture:te}=C;function ae(Ce,Re,Pe){if(Ce&&(g.push(Re),P.activeTexture.set(P.gl.TEXTURE0+Pe),Ce.gfxTexture)){const{minFilter:Ne,magFilter:Ge,wrapS:et,wrapT:Xe}=Ce.sampler;Ce.gfxTexture.bindExtraParam(Ne,Ge,et,Xe)}}ae(L,"HAS_TEXTURE_u_baseColorTexture",gi.BaseColor),ae(j,"HAS_TEXTURE_u_metallicRoughnessTexture",gi.MetallicRoughness),ae(Z,"HAS_TEXTURE_u_normalTexture",gi.Normal),ae(K,"HAS_TEXTURE_u_occlusionTexture",gi.Occlusion),ae(te,"HAS_TEXTURE_u_emissionTexture",gi.Emission),R&&(R.texture||(R.texture=new n.dn(A.context,R.image,[R.image.height,R.image.height,R.image.height],P.gl.RGBA8)),P.activeTexture.set(P.gl.TEXTURE0+gi.LUT),R.texture&&R.texture.bind(P.gl.LINEAR,P.gl.CLAMP_TO_EDGE),g.push("APPLY_LUT_ON_GPU")),c.texcoordBuffer&&(g.push("HAS_ATTRIBUTE_a_uv_2f"),o.push(c.texcoordBuffer)),c.colorBuffer&&(g.push(c.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),o.push(c.colorBuffer)),c.normalBuffer&&(g.push("HAS_ATTRIBUTE_a_normal_3f"),o.push(c.normalBuffer)),c.pbrBuffer&&(g.push("HAS_ATTRIBUTE_a_pbr"),g.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),o.push(c.pbrBuffer)),C.alphaMode!=="OPAQUE"&&C.alphaMode!=="MASK"||g.push("UNPREMULT_TEXTURE_IN_SHADER"),C.defined||g.push("DIFFUSE_SHADED");const ce=A.shadowRenderer;ce&&(g.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ce.useNormalOffset&&g.push("NORMAL_OFFSET"))}function Cu(g,o,c,A,R,C){const P=c.paint.get("model-opacity").constantOr(1),L=o.context,j=new ir(o.context.gl.LEQUAL,ir.ReadWrite,o.depthRangeFor3D),Z=o.transform,K=g.mesh,te=K.material,ae=te.pbrMetallicRoughness,ce=o.style.fog;let Ce;Ce=o.transform.projection.zAxisUnit==="pixels"?[...g.nodeModelMatrix]:n.ad.mat4.multiply([],A.zScaleMatrix,g.nodeModelMatrix),n.ad.mat4.multiply(Ce,A.negCameraPosMatrix,Ce);const Re=n.ad.mat4.invert([],Ce);n.ad.mat4.transpose(Re,Re);const Pe=c.paint.get("model-color-use-theme").constantOr("default")==="none",Ne=c.paint.get("model-emissive-strength").constantOr(0),Ge=lr(new Float32Array(g.worldViewProjection),new Float32Array(Ce),new Float32Array(Re),null,o,P,ae.baseColorFactor.toRenderColor(null),te.emissiveFactor,ae.metallicFactor,ae.roughnessFactor,te,Ne,c),et={defines:[]},Xe=[],ct=o.shadowRenderer;ct&&(ct.useNormalOffset=!1),Dd(et.defines,Xe,K,o,Pe?null:c.lut);let nt=null;if(ce){const yt=Su(g.nodeModelMatrix,o.transform);if(nt=new Float32Array(yt),Z.projection.name!=="globe"){const wt=K.aabb.min,Yt=K.aabb.max,[Lt,aa]=ce.getOpacityForBounds(yt,wt[0],wt[1],Yt[0],Yt[1]);et.overrideFog=Lt>=Ma||aa>=Ma}}const it=Zs(o,c.paint.get("model-cutoff-fade-range"));it.shouldRenderCutoff&&et.defines.push("RENDER_CUTOFF");const st=o.getOrCreateProgram("model",et);o.uploadCommonUniforms(L,st,null,nt,it),o.renderPass!=="shadow"&&ct&&ct.setupShadowsFromMatrix(g.nodeModelMatrix,st),st.draw(o,L.gl.TRIANGLES,j,R,C,K.material.doubleSided?_r.disabled:_r.backCCW,Ge,c.id,K.vertexBuffer,K.indexBuffer,K.segments,c.paint,o.transform.zoom,void 0,Xe)}function Kc(g,o,c,A,R,C,P){let L;L=g.projection.name==="globe"?n.dp(c,g):[...c],n.ad.mat4.multiply(L,L,o.matrix);const j=n.ad.mat4.multiply([],A,L);if(o.meshes)for(const Z of o.meshes){if(Z.material.alphaMode!=="BLEND"){P.push({mesh:Z,depth:0,modelIndex:R,worldViewProjection:j,nodeModelMatrix:L});continue}const K=n.ad.vec3.transformMat4([],Z.centroid,j);!g.isOrthographic&&K[2]<=0||C.push({mesh:Z,depth:K[2],modelIndex:R,worldViewProjection:j,nodeModelMatrix:L})}if(o.children)for(const Z of o.children)Kc(g,Z,c,A,R,C,P)}function _f(g,o,c,A){const R=c.shadowRenderer;if(!R)return;const C=R.getShadowPassDepthMode(),P=R.getShadowPassColorMode(),L=R.calculateShadowPassMatrixFromMatrix(o),j=_i(L);c.getOrCreateProgram("modelDepth",{defines:c._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(c,c.context.gl.TRIANGLES,C,Rr.disabled,P,_r.backCCW,j,A.id,g.vertexBuffer,g.indexBuffer,g.segments,A.paint,c.transform.zoom,void 0,void 0)}function Bh(g,o,c){const A=o.updateZoomBasedPaintProperties(),R=function(C,P,L){let j,Z,K,te=C.terrain?C.terrain.exaggeration():0;if(C.terrain&&te>0){const ae=C.terrain,ce=ae.findDEMTileFor(L);ce&&ce.dem?j=n.dr.create(ae,L,ce):te=0}if(te===0&&(P.terrainElevationMin=0,P.terrainElevationMax=0),te===P.validForExaggeration&&(te===0||j&&j._demTile&&j._demTile.tileID===P.validForDEMTile.id&&j._dem._timestamp===P.validForDEMTile.timestamp))return!1;for(const ae in P.instancesPerModel){const ce=P.instancesPerModel[ae];for(let Ce=0;Ce<ce.instancedDataArray.length;++Ce){const Re=(j?te*j.getElevationAt(0|ce.instancedDataArray.float32[16*Ce],0|ce.instancedDataArray.float32[16*Ce+1],!0,!0):0)+ce.instancesEvaluatedElevation[Ce];ce.instancedDataArray.float32[16*Ce+6]=Re,Z=Z?Math.min(P.terrainElevationMin,Re):Re,K=K?Math.max(P.terrainElevationMax,Re):Re}}return P.terrainElevationMin=Z||0,P.terrainElevationMax=K||0,P.validForExaggeration=te,P.validForDEMTile=j&&j._demTile?{id:j._demTile.tileID,timestamp:j._dem._timestamp}:{id:void 0,timestamp:0},!0}(g,o,c);(A||R)&&(o.uploaded=!1,o.upload(g.context))}const Vl={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new n.ce([0,0,0],[n.ai,n.ai,0])};function vf(g,o){const c=1<<g.canonical.z,A=o.getFreeCameraOptions().position,R=o.elevation,C=g.canonical.x/c,P=(g.canonical.x+1)/c,L=g.canonical.y/c,j=(g.canonical.y+1)/c;let Z=o._centerAltitude;if(R){const ce=R.getMinMaxForTile(g);ce&&ce.max>Z&&(Z=ce.max)}const K=n.ay(A.x,C,P)-A.x,te=n.ay(A.y,L,j)-A.y,ae=n.bH(Z,o.center.lat)-A.z;return o._zoomFromMercatorZ(Math.sqrt(K*K+te*te+ae*ae))}function So(g,o,c,A,R,C,P){const L=g.context,j=g.renderPass==="shadow",Z=g.shadowRenderer,K=j&&Z?Z.getShadowPassDepthMode():new ir(L.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),te=g.isTileAffectedByFog(C);if(c.meshes)for(const ae of c.meshes){const ce=["MODEL_POSITION_ON_GPU"],Ce=[];let Re,Pe,Ne;A.instancedDataArray.length>20&&ce.push("INSTANCED_ARRAYS");const Ge=Zs(g,o.paint.get("model-cutoff-fade-range"));if(Ge.shouldRenderCutoff&&ce.push("RENDER_CUTOFF"),j&&Z)Re=g.getOrCreateProgram("modelDepth",{defines:ce}),Pe=_i(P.shadowTileMatrix,P.shadowTileMatrix,Float32Array.from(c.matrix)),Ne=Z.getShadowPassColorMode();else{Dd(ce,Ce,ae,g,o.paint.get("model-color-use-theme").constantOr("default")==="none"?null:o.lut),Re=g.getOrCreateProgram("model",{defines:ce,overrideFog:te});const Xe=ae.material,ct=Xe.pbrMetallicRoughness,nt=o.paint.get("model-opacity").constantOr(1),it=o.paint.get("model-emissive-strength").constantOr(0);Pe=lr(C.expandedProjMatrix,Float32Array.from(c.matrix),new Float32Array(16),null,g,nt,ct.baseColorFactor.toRenderColor(null),Xe.emissiveFactor,ct.metallicFactor,ct.roughnessFactor,Xe,it,o,R),Z&&(P.shadowUniformsInitialized?Re.setShadowUniformValues(L,Z.getShadowUniformValues()):(Z.setupShadows(C.toUnwrapped(),Re,"model-tile",C.overscaledZ),P.shadowUniformsInitialized=!0)),Ne=Ge.shouldRenderCutoff||nt<1||Xe.alphaMode!=="OPAQUE"?br.alphaBlended:br.unblended}g.uploadCommonUniforms(L,Re,C.toUnwrapped(),null,Ge);const et=ae.material.doubleSided?_r.disabled:_r.backCCW;if(A.instancedDataArray.length>20)Ce.push(A.instancedDataBuffer),Re.draw(g,L.gl.TRIANGLES,K,Rr.disabled,Ne,et,Pe,o.id,ae.vertexBuffer,ae.indexBuffer,ae.segments,o.paint,g.transform.zoom,void 0,Ce,A.instancedDataArray.length);else{const Xe=j?"u_instance":"u_normal_matrix";for(let ct=0;ct<A.instancedDataArray.length;++ct)Pe[Xe]=new Float32Array(A.instancedDataArray.arrayBuffer,64*ct,16),Re.draw(g,L.gl.TRIANGLES,K,Rr.disabled,Ne,et,Pe,o.id,ae.vertexBuffer,ae.indexBuffer,ae.segments,o.paint,g.transform.zoom,void 0,Ce)}}if(c.children)for(const ae of c.children)So(g,o,ae,A,R,C,P)}const Md=[1,-1,1];function Wf(g,o,c,A){if(!c.modelManager)return!0;const R=c.modelManager;if(!c.shadowRenderer)return!0;const C=c.shadowRenderer,P=o.aabb;let L=!0,j=g.maxHeight;if(j===0){let K=0;for(const te in g.instancesPerModel){const ae=R.getModel(te,A);ae?K=Math.max(K,Math.max(Math.max(ae.aabb.max[0],ae.aabb.max[1]),ae.aabb.max[2])):L=!1}j=g.maxScale*K*1.41+g.maxVerticalOffset,L&&(g.maxHeight=j)}P.max[2]=j,P.min[2]+=g.terrainElevationMin,P.max[2]+=g.terrainElevationMax,n.ad.vec3.transformMat4(P.min,P.min,o.tileMatrix),n.ad.vec3.transformMat4(P.max,P.max,o.tileMatrix);const Z=P.intersects(C.getCurrentCascadeFrustum());return c.currentShadowCascade===0&&(g.isInsideFirstShadowMapFrustum=Z===2),Z===0}function Yf(g,o){const c=g.uniformValues.u_cutoff_params[0],A=g.uniformValues.u_cutoff_params[1],R=g.uniformValues.u_cutoff_params[2],C=g.uniformValues.u_cutoff_params[3];return A===c||C===R?1:n.ay(((o-c)/(A-c)-R)/(C-R),0,1)}function hh(g,o,c,A){if(o.pitch<20)return 1;const R=o.getWorldToCameraMatrix();n.ad.mat4.multiply(R,R,g);const C=n.ad.vec4.fromValues(c.min[0],c.min[1],c.min[2],1);let P=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=P,j=P;C[1]=c.max[1],P=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=P[1]<L[1]?P:L,j=P[1]>j[1]?P:j,C[0]=c.max[0],P=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=P[1]<L[1]?P:L,j=P[1]>j[1]?P:j,C[1]=c.min[1],P=n.ad.vec4.transformMat4(n.ad.vec4.create(),C,R),L=P[1]<L[1]?P:L,j=P[1]>j[1]?P:j;const Z=n.ay(A[0],0,1),K=100*o.pixelsPerMeter*n.ay(A[1],0,1),te=n.ay(A[2],0,1),ae=n.ad.vec4.lerp(n.ad.vec4.create(),L,j,Z),ce=Math.tan(.5*o.fovX),Ce=-ae[2]*ce;if(K===0)return ae[1]<-Math.abs(Ce)?te:1;const Re=(-Math.abs(Ce)-ae[1])/K,Pe=(Ge,et,Xe)=>(1-Xe)*Ge+Xe*et,Ne=n.ay(Pe(1,te,Re),te,1);return Pe(1,Ne,n.ay((o.pitch-20)/20,0,1))}class Wc{}class Yc{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(o,c,A){{const te=this._storage.get(c.id);if(te)return te.lastUsedFrameIdx=o,te.buf}const R=A.gl,C=R.getBufferParameter(R.ELEMENT_ARRAY_BUFFER,R.BUFFER_SIZE),P=new ArrayBuffer(C),L=new Int16Array(P);R.getBufferSubData(R.ELEMENT_ARRAY_BUFFER,0,new Int16Array(P));const j=new n.dt;for(let te=0;te<C/2;te+=3){const ae=L[te],ce=L[te+1],Ce=L[te+2];j.emplaceBack(ae,ce),j.emplaceBack(ce,Ce),j.emplaceBack(Ce,ae)}const Z=A.bindVertexArrayOES.current,K=new Wc;return K.buf=new Zn(A,j),K.lastUsedFrameIdx=o,this._storage.set(c.id,K),A.bindVertexArrayOES.set(Z),K.buf}update(o){for(const[c,A]of this._storage)o-A.lastUsedFrameIdx>30&&(A.buf.destroy(),this._storage.delete(c))}destroy(){for(const[o,c]of this._storage)c.buf.destroy(),this._storage.delete(o)}}class Xf{constructor(o){this.occluderSize=30,this.depthOffset=-1e-4,o.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),o.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Id=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class bu{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Ac{constructor(o,c){this.revealStart=11,this.revealRange=2,o.registerParameter(this,[...c,"Reveal"],"revealStart",{min:0,max:17,step:.05}),o.registerParameter(this,[...c,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Jl=n.dd([{type:"Float32",name:"a_pos_2f",components:2}]);class _c{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(o,c){const A=o.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const P=new n.du,L=new n.aV;P.emplaceBack(-1,-1),P.emplaceBack(1,-1),P.emplaceBack(1,1),P.emplaceBack(-1,1),L.emplaceBack(0,1,2),L.emplaceBack(0,2,3),this.vignetteVx=o.context.createVertexBuffer(P,Jl.members),this.vignetteIdx=o.context.createIndexBuffer(L)}const R=n.b8.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){o.uploadCommonUniforms(o.context,A);const P={u_vignetteShape:(C={vignetteShape:[c.start,c.range,Math.pow(10,c.fadePower)],vignetteColor:[c.color.r,c.color.g,c.color.b,c.color.a*c.strength]}).vignetteShape,u_vignetteColor:C.vignetteColor};A.draw(o,o.context.gl.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,_r.disabled,P,"vignette",this.vignetteVx,this.vignetteIdx,R)}var C}}class Ps{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(o,c){const A=o.getFreeCameraOptions().position,R=A.toAltitude(),C=A.toLngLat(),P=n.ak(C.lng),L=n.ak(C.lat),j=o.pixelsPerMeter/c,Z=P*n.dv,K=n.dv*Math.log(Math.tan(Math.PI/4+L/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const te=-this._offsetYPrev+K,ae=-this._elevationPrev+R;this._accumulatedOffsetX+=(-this._offsetXPrev+Z)*j,this._accumulatedOffsetY+=te*j,this._accumulatedElevation+=ae*j,this._offsetXPrev=Z,this._offsetYPrev=K,this._elevationPrev=R}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Ql(g,o){return[-(g[0]-Math.floor(g[0]/o)*o),-(g[1]-Math.floor(g[1]/o)*o),-(g[2]-Math.floor(g[2]/o)*o)]}function Hu(g){const o=n.dl(1323123451230),c=[];for(let A=0;A<g;++A){const R=2*o()-1,C=2*o()-1,P=2*o()-1;c.push(n.ad.vec3.fromValues(R,C,P))}return c}function Hs(g,o,c,A,R){const C=n.ay((R-c)/(A-c),0,1);return(1-C)*g+C*o}class xu{constructor(o){this._movement=new Ps,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new _c,this._ppmScaleFactor=o}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(o,c){const A=o.transform;this._movement.update(A,this._ppmScaleFactor);const R=A.starsProjMatrix,C=n.ad.quat.identity([]);n.ad.quat.rotateX(C,C,n.ak(90)-A._pitch),n.ad.quat.rotateZ(C,C,-A.angle);const P=n.ad.mat4.fromQuat(new Float32Array(16),C),L=n.ad.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),j=n.ad.mat4.transpose([],L),Z=n.ad.mat4.multiply([],j,P),K=Date.now()/1e3;return this._accumulatedTimeFromStart+=(K-this._prevTime)*c,this._prevTime=K,{projectionMatrix:R,modelviewMatrix:Z}}}class fh extends xu{constructor(o){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Ac(o.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(o){const c=o.context;if(!this.particlesVx){const A=Hu(this.particlesCount),R=new n.dw,C=new n.aV;let P=0;const L=n.dl(1323123451230);for(let j=0;j<A.length;++j){const Z=A[j],K=[2*L()-1,L(),L(),L()];R.emplaceBack(Z[0],Z[1],Z[2],-1,-1,...K),R.emplaceBack(Z[0],Z[1],Z[2],1,-1,...K),R.emplaceBack(Z[0],Z[1],Z[2],1,1,...K),R.emplaceBack(Z[0],Z[1],Z[2],-1,1,...K),C.emplaceBack(P+0,P+1,P+2),C.emplaceBack(P+0,P+2,P+3),P+=4}this.particlesVx=c.createVertexBuffer(R,Id.members),this.particlesIdx=c.createIndexBuffer(C)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.rain)return;const c=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},A=o.transform.zoom;if(c.revealStart>A)return;const R=Hs(0,1,c.revealStart,c.revealStart+c.revealRange,A);if(!this.particlesVx||!this.particlesIdx)return;const C=structuredClone(this._params);let P=[-C.direction.x,C.direction.y,-100];n.ad.vec3.normalize(P,P);const L=structuredClone(this._vignetteParams);L.strength*=R,C.overrideStyleParameters||(C.intensity=o.style.rain.state.density,C.timeFactor=o.style.rain.state.intensity,C.color=structuredClone(o.style.rain.state.color),P=structuredClone(o.style.rain.state.direction),C.screenThinning.intensity=o.style.rain.state.centerThinning,C.dropletSizeX=o.style.rain.state.dropletSize[0],C.dropletSizeYScale=o.style.rain.state.dropletSize[1]/o.style.rain.state.dropletSize[0],C.distortionStrength=100*o.style.rain.state.distortionStrength,L.strength=1,L.color=structuredClone(o.style.rain.state.vignetteColor));const j=this.updateOnRender(o,C.timeFactor),Z=o.context,K=Z.gl,te=o.transform;this.screenTexture&&this.screenTexture.size[0]===o.width&&this.screenTexture.size[1]===o.height||(this.screenTexture=new n.T(Z,{width:o.width,height:o.height,data:null},K.RGBA8)),C.distortionStrength>0&&(Z.activeTexture.set(K.TEXTURE0),this.screenTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE),K.copyTexSubImage2D(K.TEXTURE_2D,0,0,0,0,0,o.width,o.height));const ae=o.getOrCreateProgram("rainParticle");o.uploadCommonUniforms(Z,ae),Z.activeTexture.set(K.TEXTURE0),this.screenTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE);const ce=[C.color.r,C.color.g,C.color.b,C.color.a],Ce=(Re,Pe)=>{const Ne=Ql(this._movement.getPosition(),Re),Ge=C.dropletSizeX,et=C.dropletSizeX*C.dropletSizeYScale,Xe=o.width/2,ct=o.height/2,nt=Hs(0,C.screenThinning.start,0,1,C.screenThinning.intensity),it=Hs(.001,C.screenThinning.range,0,1,C.screenThinning.intensity),st=Hs(0,C.screenThinning.particleOffset,0,1,C.screenThinning.intensity),yt=(wt={modelview:j.modelviewMatrix,projection:j.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Ne,velocityConeAperture:C.velocityConeAperture,velocity:C.velocity,boxSize:Re,rainDropletSize:[Ge,et],distortionStrength:C.distortionStrength,rainDirection:P,color:ce,screenSize:[te.width,te.height],thinningCenterPos:[Xe,ct],thinningShape:[nt,it,Math.pow(10,C.screenThinning.fadePower)],thinningAffectedRatio:C.screenThinning.affectedRatio,thinningParticleOffset:st,shapeDirectionalPower:C.shapeDirPower,shapeNormalPower:C.shapeNormalPower,mode:Pe?0:1},{u_modelview:Float32Array.from(wt.modelview),u_projection:Float32Array.from(wt.projection),u_time:wt.time,u_cam_pos:wt.camPos,u_texScreen:0,u_velocityConeAperture:wt.velocityConeAperture,u_velocity:wt.velocity,u_boxSize:wt.boxSize,u_rainDropletSize:wt.rainDropletSize,u_distortionStrength:wt.distortionStrength,u_rainDirection:wt.rainDirection,u_color:wt.color,u_screenSize:wt.screenSize,u_thinningCenterPos:wt.thinningCenterPos,u_thinningShape:wt.thinningShape,u_thinningAffectedRatio:wt.thinningAffectedRatio,u_thinningParticleOffset:wt.thinningParticleOffset,u_shapeDirectionalPower:wt.shapeDirectionalPower,u_shapeNormalPower:wt.shapeNormalPower,u_mode:wt.mode});var wt;const Yt=Math.round(C.intensity*this.particlesCount),Lt=n.b8.simpleSegment(0,0,4*Yt,2*Yt);ae.draw(o,K.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,_r.disabled,yt,"rain_particles",this.particlesVx,this.particlesIdx,Lt)};C.distortionStrength>0&&Ce(C.boxSize,!0),Ce(C.boxSize,!1),this._vignette.draw(o,L)}}const Jf=n.dd([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class Gh extends xu{constructor(o){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Ac(o.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(o){const c=o.context;if(!this.particlesVx){const A=Hu(this.particlesCount),R=new n.dx,C=new n.aV;let P=0;const L=n.dl(1323123451230);for(let j=0;j<A.length;++j){const Z=A[j],K=L(),te=L(),ae=L(),ce=[j/A.length,K,te,ae],Ce=[L(),L()];R.emplaceBack(Z[0],Z[1],Z[2],-1,-1,...ce,...Ce),R.emplaceBack(Z[0],Z[1],Z[2],1,-1,...ce,...Ce),R.emplaceBack(Z[0],Z[1],Z[2],1,1,...ce,...Ce),R.emplaceBack(Z[0],Z[1],Z[2],-1,1,...ce,...Ce),C.emplaceBack(P+0,P+1,P+2),C.emplaceBack(P+0,P+2,P+3),P+=4}this.particlesVx=c.createVertexBuffer(R,Jf.members),this.particlesIdx=c.createIndexBuffer(C)}}draw(o){if(!this._params.overrideStyleParameters&&!o.style.snow)return;const c=structuredClone(this._params);let A=[-c.direction.x,c.direction.y,-100];n.ad.vec3.normalize(A,A);const R=structuredClone(this._vignetteParams),C=c.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},P=o.transform.zoom;if(C.revealStart>P)return;const L=Hs(0,1,C.revealStart,C.revealStart+C.revealRange,P);R.strength*=L,c.overrideStyleParameters||(c.intensity=o.style.snow.state.density,c.timeFactor=o.style.snow.state.intensity,c.color=structuredClone(o.style.snow.state.color),A=structuredClone(o.style.snow.state.direction),c.screenThinning.intensity=o.style.snow.state.centerThinning,c.billboardSize=2.79*o.style.snow.state.flakeSize,R.strength=1,R.color=structuredClone(o.style.snow.state.vignetteColor));const j=this.updateOnRender(o,c.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const Z=o.context,K=Z.gl,te=o.transform,ae=o.getOrCreateProgram("snowParticle");o.uploadCommonUniforms(Z,ae),((ce,Ce,Re)=>{const Pe=Ql(this._movement.getPosition(),ce),Ne=te.width/2,Ge=te.height/2,et=Hs(0,Re.screenThinning.start,0,1,Re.screenThinning.intensity),Xe=Hs(.001,Re.screenThinning.range,0,1,Re.screenThinning.intensity),ct=Hs(0,Re.screenThinning.particleOffset,0,1,Re.screenThinning.intensity),nt=(it={modelview:j.modelviewMatrix,projection:j.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Pe,velocityConeAperture:Re.velocityConeAperture,velocity:Re.velocity,horizontalOscillationRadius:Re.horizontalOscillationRadius,horizontalOscillationRate:Re.horizontalOscillationRate,boxSize:ce,billboardSize:1*Re.billboardSize,simpleShapeParameters:[Re.shapeFadeStart,Re.shapeFadePower],screenSize:[te.width,te.height],thinningCenterPos:[Ne,Ge],thinningShape:[et,Xe,Math.pow(10,Re.screenThinning.fadePower)],thinningAffectedRatio:Re.screenThinning.affectedRatio,thinningParticleOffset:ct,color:[Re.color.r,Re.color.g,Re.color.b,Re.color.a],direction:A},{u_modelview:Float32Array.from(it.modelview),u_projection:Float32Array.from(it.projection),u_time:it.time,u_cam_pos:it.camPos,u_velocityConeAperture:it.velocityConeAperture,u_velocity:it.velocity,u_horizontalOscillationRadius:it.horizontalOscillationRadius,u_horizontalOscillationRate:it.horizontalOscillationRate,u_boxSize:it.boxSize,u_billboardSize:it.billboardSize,u_simpleShapeParameters:it.simpleShapeParameters,u_screenSize:it.screenSize,u_thinningCenterPos:it.thinningCenterPos,u_thinningShape:it.thinningShape,u_thinningAffectedRatio:it.thinningAffectedRatio,u_thinningParticleOffset:it.thinningParticleOffset,u_particleColor:it.color,u_direction:it.direction});var it;const st=Math.round(Re.intensity*this.particlesCount),yt=n.b8.simpleSegment(0,0,4*st,2*st);this.particlesVx&&this.particlesIdx&&ae.draw(o,K.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,_r.disabled,nt,"snow_particles",this.particlesVx,this.particlesIdx,yt)})(c.boxSize,0,c),this._vignette.draw(o,R)}}const ph={symbol:function(g,o,c,A,R){if(g.renderPass!=="translucent")return;const C=Rr.disabled,P=g.colorModeForRenderPass(),L=c.layout.get("text-variable-anchor"),j=c.layout.get("text-size-scale-range"),Z=n.ay(g.scaleFactor,j[0],j[1]);L&&function(ae,ce,Ce,Re,Pe,Ne,Ge,et){const Xe=ce.transform,ct=Pe==="map",nt=Ne==="map";for(const it of ae){const st=Re.getTile(it),yt=st.getBucket(Ce);if(!yt||!yt.text||!yt.text.segments.get().length)continue;const wt=n.bp(yt.textSizeData,Xe.zoom,et),Yt=Uo(it,yt.getProjection(),Xe),Lt=Xe.calculatePixelsToTileUnitsMatrix(st),aa=Rs(Yt,st.tileID.canonical,nt,ct,Xe,yt.getProjection(),Lt),ua=yt.hasIconTextFit()&&yt.hasIconData();if(wt){const Sa=Math.pow(2,Xe.zoom-st.tileID.overscaledZ);is(yt,ct,nt,Ge,n.cY,Xe,aa,it,Sa,wt,ua)}}}(A,g,c,o,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),R,Z);const K=c.paint.get("icon-opacity").constantOr(1)!==0,te=c.paint.get("text-opacity").constantOr(1)!==0;c.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(K||te)?vn(g,o,c,A,C,P):(K&&vn(g,o,c,A,C,P,{onlyIcons:!0}),te&&vn(g,o,c,A,C,P,{onlyText:!0})),o.map.showCollisionBoxes&&(Fi(g,o,c,A,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),Fi(g,o,c,A,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(g,o,c,A){if(g.renderPass!=="translucent")return;const R=c.paint.get("circle-opacity"),C=c.paint.get("circle-stroke-width"),P=c.paint.get("circle-stroke-opacity"),L=c.layout.get("circle-sort-key").constantOr(1)!==void 0,j=c.paint.get("circle-emissive-strength");if(R.constantOr(1)===0&&(C.constantOr(1)===0||P.constantOr(1)===0))return;const Z=g.context,K=Z.gl,te=g.transform,ae=g.depthModeForSublayer(0,ir.ReadOnly),ce=Rr.disabled,Ce=g.colorModeForDrapableLayerRenderPass(j),Re=te.projection.name==="globe",Pe=[n.av(te.center.lng),n.aC(te.center.lat)],Ne=[];for(let et=0;et<A.length;et++){const Xe=A[et],ct=o.getTile(Xe),nt=ct.getBucket(c);if(!nt||nt.projection.name!==te.projection.name)continue;const it=nt.programConfigurations.get(c.id),st=n.cZ(c),yt=g.isTileAffectedByFog(Xe);Re&&st.push("PROJECTION_GLOBE_VIEW"),st.push("DEPTH_D24"),g.terrain&&te.depthOcclusionForSymbolsAndCircles&&st.push("DEPTH_OCCLUSION");const wt=g.getOrCreateProgram("circle",{config:it,defines:st,overrideFog:yt}),Yt=nt.layoutVertexBuffer,Lt=nt.globeExtVertexBuffer,aa=nt.indexBuffer,ua=te.projection.createInversionMatrix(te,Xe.canonical),Sa={programConfiguration:it,program:wt,layoutVertexBuffer:Yt,globeExtVertexBuffer:Lt,indexBuffer:aa,uniformValues:n.c_(g,Xe,ct,ua,Pe,c),tile:ct};if(L){const Mt=nt.segments.get();for(const ia of Mt)Ne.push({segments:new n.b8([ia]),sortKey:ia.sortKey,state:Sa})}else Ne.push({segments:nt.segments,sortKey:0,state:Sa})}L&&Ne.sort((et,Xe)=>et.sortKey-Xe.sortKey);const Ge={useDepthForOcclusion:te.depthOcclusionForSymbolsAndCircles};for(const et of Ne){const{programConfiguration:Xe,program:ct,layoutVertexBuffer:nt,globeExtVertexBuffer:it,indexBuffer:st,uniformValues:yt,tile:wt}=et.state,Yt=et.segments;g.terrain&&g.terrain.setupElevationDraw(wt,ct,Ge),g.uploadCommonUniforms(Z,ct,wt.tileID.toUnwrapped()),ct.draw(g,K.TRIANGLES,ae,ce,Ce,_r.disabled,yt,c.id,nt,st,Yt,c.paint,te.zoom,Xe,[it])}},heatmap:function(g,o,c,A){if(c.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const R=g.context,C=R.gl,P=Rr.disabled,L=new br([C.ONE,C.ONE,C.ONE,C.ONE],n.al.transparent,[!0,!0,!0,!0]);(function(ce,Ce,Re,Pe){const Ne=ce.gl,Ge=Ce.width*Pe,et=Ce.height*Pe;ce.activeTexture.set(Ne.TEXTURE1),ce.viewport.set([0,0,Ge,et]);let Xe=Re.heatmapFbo;if(!Xe||Xe&&(Xe.width!==Ge||Xe.height!==et)){Xe&&Xe.destroy();const ct=Ne.createTexture();Ne.bindTexture(Ne.TEXTURE_2D,ct),Ne.texParameteri(Ne.TEXTURE_2D,Ne.TEXTURE_WRAP_S,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_2D,Ne.TEXTURE_WRAP_T,Ne.CLAMP_TO_EDGE),Ne.texParameteri(Ne.TEXTURE_2D,Ne.TEXTURE_MIN_FILTER,Ne.LINEAR),Ne.texParameteri(Ne.TEXTURE_2D,Ne.TEXTURE_MAG_FILTER,Ne.LINEAR),Xe=Re.heatmapFbo=ce.createFramebuffer(Ge,et,!0,null),function(nt,it,st,yt,wt,Yt){const Lt=nt.gl;Lt.texImage2D(Lt.TEXTURE_2D,0,nt.extRenderToTextureHalfFloat?Lt.RGBA16F:Lt.RGBA,wt,Yt,0,Lt.RGBA,nt.extRenderToTextureHalfFloat?Lt.HALF_FLOAT:Lt.UNSIGNED_BYTE,null),yt.colorAttachment.set(st)}(ce,0,ct,Xe,Ge,et)}else Ne.bindTexture(Ne.TEXTURE_2D,Xe.colorAttachment.get()),ce.bindFramebuffer.set(Xe.framebuffer)})(R,g,c,g.transform.projection.name==="globe"?.5:.25),R.clear({color:n.al.transparent});const j=g.transform,Z=j.projection.name==="globe",K=Z?["PROJECTION_GLOBE_VIEW"]:[],te=Z?_r.frontCCW:_r.disabled,ae=[n.av(j.center.lng),n.aC(j.center.lat)];for(let ce=0;ce<A.length;ce++){const Ce=A[ce];if(o.hasRenderableParent(Ce))continue;const Re=o.getTile(Ce),Pe=Re.getBucket(c);if(!Pe||Pe.projection.name!==j.projection.name)continue;const Ne=g.isTileAffectedByFog(Ce),Ge=Pe.programConfigurations.get(c.id),et=g.getOrCreateProgram("heatmap",{config:Ge,defines:K,overrideFog:Ne}),{zoom:Xe}=g.transform;g.terrain&&g.terrain.setupElevationDraw(Re,et),g.uploadCommonUniforms(R,et,Ce.toUnwrapped());const ct=j.projection.createInversionMatrix(j,Ce.canonical);et.draw(g,C.TRIANGLES,ir.disabled,P,L,te,Jt(g,Ce,Re,ct,ae,Xe,c.paint.get("heatmap-intensity")),c.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,c.paint,g.transform.zoom,Ge,Z?[Pe.globeExtVertexBuffer]:null)}R.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(R,C){const P=R.context,L=P.gl,j=C.heatmapFbo;if(!j)return;P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,j.colorAttachment.get()),P.activeTexture.set(L.TEXTURE1);let Z=C.colorRampTexture;Z||(Z=C.colorRampTexture=new n.T(P,C.colorRamp,L.RGBA8)),Z.bind(L.LINEAR,L.CLAMP_TO_EDGE),R.getOrCreateProgram("heatmapTexture").draw(R,L.TRIANGLES,ir.disabled,Rr.disabled,R.colorModeForRenderPass(),_r.disabled,((K,te,ae,ce)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,C),C.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,C.paint,R.transform.zoom)}(g,c))},line:function(g,o,c,A){if(g.renderPass!=="translucent")return;const R=c.paint.get("line-opacity"),C=c.paint.get("line-width");if(R.constantOr(1)===0||C.constantOr(1)===0)return;const P=c.paint.get("line-emissive-strength"),L=c.paint.get("line-occlusion-opacity"),j=c.layout.get("line-elevation-reference"),Z=c.layout.get("line-width-unit")==="meters",K=j==="sea",te=g.context,ae=te.gl;if(c.hasElevatedBuckets&&g.transform.projection.name==="globe")return;const ce=c.layout.get("line-cross-slope"),Ce=ce!==void 0,Re=ce<1,Pe=g.colorModeForDrapableLayerRenderPass(P),Ne=g.terrain&&g.terrain.renderingToTexture,Ge=Ne?1:n.q.devicePixelRatio,et=c.paint.get("line-dasharray"),Xe=et.constantOr(1),ct=c.layout.get("line-cap"),nt=et.constantOr(null),it=ct.constantOr(null),st=c.paint.get("line-pattern"),yt=st.constantOr(1),wt=st.constantOr(null),Yt=c.paint.get("line-opacity").constantOr(1);let Lt=!yt&&Yt!==1||g.depthOcclusion&&L>0&&L<1;const aa=c.paint.get("line-gradient"),ua=yt?"linePattern":"line",Sa=n.c$(c);let Mt;if(Ne&&g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(Lt=!1),L!==0&&g.depthOcclusion){const Nt=c.paint._values["line-opacity"];Nt&&Nt.value&&Nt.value.kind==="constant"?Mt=Nt.value:n.w(`Occlusion opacity for layer ${c.id} is supported only when line-opacity isn't data-driven.`)}C.value.kind!=="constant"&&C.value.isLineProgressConstant===!1&&Sa.push("VARIABLE_LINE_WIDTH");const ia=(Nt,sa,Qt,da,$t,pa)=>{for(const Ia of Nt){const La=o.getTile(Ia);if(yt&&!La.patternsLoaded())continue;const Pa=La.getBucket(c);if(!Pa||Pa.hasZOffset&&!$t||!Pa.hasZOffset&&$t)continue;g.prepareDrawTile();const sr=Pa.programConfigurations.get(c.id),Lr=g.isTileAffectedByFog(Ia),pr=g.getOrCreateProgram(ua,{config:sr,defines:sa,overrideFog:Lr,overrideRtt:!$t&&void 0});if(wt&&La.imageAtlas){const Tr=n.d0.from(wt).getPrimary().scaleSelf(Ge).toString(),er=La.imageAtlas.patternPositions.get(Tr);er&&sr.setConstantPatternPositions(er)}if(!yt&&nt&&it&&La.lineAtlas){const Tr=La.lineAtlas.getDash(nt,it);Tr&&sr.setConstantPatternPositions(Tr)}let[zr,Cr]=c.paint.get("line-trim-offset");(it==="round"||it==="square")&&zr!==Cr&&(zr===0&&(zr-=1),Cr===1&&(Cr+=1));const xr=Ne?Ia.projMatrix:null,Fr=Z?1/Pa.tileToMeter/n.at(La,1,g.transform.zoom):1,Mr=Z?1/Pa.tileToMeter/n.at(La,1,Math.floor(g.transform.zoom)):1,dr=yt?n.d1(g,La,c,xr,Ge,Fr,Mr,[zr,Cr]):n.d2(g,La,c,xr,Pa.lineClipsArray.length,Ge,Fr,Mr,[zr,Cr]);if(aa){const Tr=Pa.gradients[c.id];let er=Tr.texture;if(c.gradientVersion!==Tr.version){let sn=256;if(c.stepInterpolant){const qn=o.getSource().maxzoom,un=Ia.canonical.z===qn?Math.ceil(1<<g.transform.maxZoom-Ia.canonical.z):1;sn=n.ay(n.d3(Pa.maxLineLength/n.ai*1024*un),256,te.maxTextureSize)}Tr.gradient=n.d4({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:sn,image:Tr.gradient||void 0,clips:Pa.lineClipsArray}),Tr.texture?Tr.texture.update(Tr.gradient):Tr.texture=new n.T(te,Tr.gradient,ae.RGBA8),Tr.version=c.gradientVersion,er=Tr.texture}te.activeTexture.set(ae.TEXTURE1),er.bind(c.stepInterpolant?ae.NEAREST:ae.LINEAR,ae.CLAMP_TO_EDGE)}Xe&&(te.activeTexture.set(ae.TEXTURE0),La.lineAtlasTexture&&La.lineAtlasTexture.bind(ae.LINEAR,ae.REPEAT),sr.updatePaintBuffers()),yt&&(te.activeTexture.set(ae.TEXTURE0),La.imageAtlasTexture&&La.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),sr.updatePaintBuffers()),$t&&!K&&g.terrain.setupElevationDraw(La,pr),g.uploadCommonUniforms(te,pr,Ia.toUnwrapped());const nn=Tr=>{Mt!=null&&(Mt.value=Yt*L),pr.draw(g,ae.TRIANGLES,Qt,Tr,Pe,_r.disabled,dr,c.id,Pa.layoutVertexBuffer,Pa.indexBuffer,Pa.segments,c.paint,g.transform.zoom,sr,[Pa.layoutVertexBuffer2,Pa.patternVertexBuffer,Pa.zOffsetVertexBuffer]),Mt!=null&&(Mt.value=Yt)};if(Lt&&!$t){const Tr=g.stencilModeForClipping(Ia).ref;Tr===0&&Ne&&te.clear({stencil:0});const er={func:ae.EQUAL,mask:255};dr.u_alpha_discard_threshold=.8,nn(new Rr(er,Tr,255,ae.KEEP,ae.KEEP,ae.INVERT)),dr.u_alpha_discard_threshold=0,nn(new Rr(er,Tr,255,ae.KEEP,ae.KEEP,ae.KEEP))}else dr.u_alpha_discard_threshold=Lt&&$t&&pa?.8:0,nn($t?da:g.stencilModeForClipping(Ia))}};if(c.hasNonElevatedBuckets){const Nt=!Ne&&g.terrain;L!==0&&Nt?n.w(`Occlusion opacity for layer ${c.id} is supported on terrain only if the layer has line-z-offset enabled.`):Nt?n.w(`Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ${c.id}.`):ia(A,Sa,g.depthModeForSublayer(0,ir.ReadOnly),Rr.disabled,!1,!0)}if(c.hasElevatedBuckets){Sa.push("ELEVATED"),Ce&&Sa.push(Re?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),K&&Sa.push("ELEVATION_REFERENCE_SEA");const Nt=Lt?g.stencilModeFor3D():Rr.disabled,sa=new ir(g.depthOcclusion?ae.GREATER:ae.LEQUAL,ir.ReadOnly,g.depthRangeFor3D);g.forceTerrainMode=!0,ia(A,Sa,sa,Nt,!0,!0),Lt&&ia(A,Sa,sa,Nt,!0,!1),g.forceTerrainMode=!1}Lt&&(g.resetStencilClippingMasks(),Ne&&te.clear({stencil:0})),L===0||g.depthOcclusion||Ne||g.layersWithOcclusionOpacity.push(g.currentLayer)},fill:function(g,o,c,A){const R=c.paint.get("fill-color"),C=c.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const P=c.paint.get("fill-emissive-strength"),L=g.colorModeForDrapableLayerRenderPass(P),j=c.paint.get("fill-pattern"),Z=g.opaquePassEnabledForLayer()&&!j.constantOr(1)&&R.constantOr(n.al.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";let K="none";c.layout.get("fill-elevation-reference")!=="none"?K="road":c.paint.get("fill-z-offset").constantOr(1)!==0&&(K="offset");const te=!(!g.terrain||!g.terrain.enabled),ae={painter:g,sourceCache:o,layer:c,coords:A,colorMode:L,elevationType:K,terrainEnabled:te,pass:Z};if(K!=="offset"){if(rl(ae,!1),K==="road"){const ce=!te&&g.renderPass==="translucent";ce&&To(g,o,c,A,"geometry"),rl(ae,!0,Rr.disabled),ce&&function(Ce){const{painter:Re,sourceCache:Pe,layer:Ne,coords:Ge,colorMode:et}=Ce,Xe=Re.context.gl,ct=new ir(Re.context.gl.LEQUAL,ir.ReadOnly,Re.depthRangeFor3D);for(const nt of Ge){const it=Pe.getTile(nt),st=it.getBucket(Ne);if(!st)continue;const yt=st.elevatedStructures;if(!yt||!yt.renderableSegments||yt.renderableSegments.segments[0].primitiveLength===0)continue;Re.prepareDrawTile();const wt=st.bufferData.programConfigurations.get(Ne.id),Yt=Re.isTileAffectedByFog(nt),Lt=Re.getOrCreateProgram("elevatedStructures",{config:wt,overrideFog:Yt,defines:["NORMAL_OFFSET"]}),aa={u_matrix:Re.translatePosMatrix(nt.projMatrix,it,Ne.paint.get("fill-translate"),Ne.paint.get("fill-translate-anchor"))};Re.uploadCommonUniforms(Re.context,Lt,nt.toUnwrapped()),Lt.draw(Re,Xe.TRIANGLES,ct,Rr.disabled,et,_r.backCCW,aa,Ne.id,yt.vertexBuffer,yt.indexBuffer,yt.renderableSegments,Ne.paint,Re.transform.zoom,wt,[yt.vertexBufferNormal])}}(ae)}}else rl(ae,!1,g.stencilModeFor3D())},"fill-extrusion":function(g,o,c,A){const R=c.paint.get("fill-extrusion-opacity"),C=g.context,P=C.gl,L=g.terrain,j=L&&L.renderingToTexture;if(R===0)return;const Z=g.conflationActive&&g.style.isLayerClipped(c,o.getSource()),K=g.style.order.indexOf(c.fqid);if(Z&&function(te,ae,ce,Ce,Re){for(const Pe of Ce){const Ne=ae.getTile(Pe).getBucket(ce);Ne&&(Ne.updateReplacement(Pe,te.replacementSource,Re),Ne.uploadCentroid(te.context))}}(g,o,c,A,K),L||Z)for(const te of A){const ae=o.getTile(te).getBucket(c);ae&&El(g.context,o,te,ae,c,L,Z)}if(g.renderPass==="shadow"&&g.shadowRenderer){const te=g.shadowRenderer;if(L&&R<.65&&c._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof n.ab)return;const ae=te.getShadowPassDepthMode(),ce=te.getShadowPassColorMode();Pl(g,o,c,A,ae,Rr.disabled,ce,Z)}else if(g.renderPass==="translucent"){const te=!c.paint.get("fill-extrusion-pattern").constantOr(1),ae=c.paint.get("fill-extrusion-color").constantOr(n.al.white);if(!j&&ae.a!==0){const ce=new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D);R===1&&te?Pl(g,o,c,A,ce,Rr.disabled,br.unblended,Z):(Pl(g,o,c,A,ce,Rr.disabled,br.disabled,Z),Pl(g,o,c,A,ce,g.stencilModeFor3D(),g.colorModeForRenderPass(),Z),g.resetStencilClippingMasks())}if(g.style.enable3dLights()&&te&&(!L&&g.transform.projection.name!=="globe"||j)){const ce=c.paint.get("fill-extrusion-opacity"),Ce=c.paint.get("fill-extrusion-ambient-occlusion-intensity"),Re=c.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Pe=c.paint.get("fill-extrusion-flood-light-intensity"),Ne=c.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",Ge=c.paint.get("fill-extrusion-flood-light-color").toRenderColor(Ne?null:c.lut).toArray01().slice(0,3),et=Ce>0&&Re>0,Xe=Pe>0,ct=(it,st,yt)=>(1-yt)*it+yt*st,nt=it=>{const st=g.depthModeForSublayer(1,ir.ReadOnly,P.LEQUAL,!0),yt=c.paint.get(it?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),wt=ct(.1,3,yt),Yt=g._showOverdrawInspector;if(!Yt){const Lt=new Rr({func:P.ALWAYS,mask:255},255,255,P.KEEP,P.KEEP,P.REPLACE),aa=new br([P.ONE,P.ONE,P.ONE,P.ONE],n.al.transparent,[!1,!1,!1,!0],P.MIN);xs(g,o,c,A,st,Lt,aa,_r.disabled,it,"sdf",ce,Ce,Re,Pe,Ge,wt,Z,!1)}{const Lt=Yt?Rr.disabled:new Rr({func:P.EQUAL,mask:255},255,255,P.KEEP,P.DECR,P.DECR),aa=Yt?g.colorModeForRenderPass():new br([P.ONE_MINUS_DST_ALPHA,P.DST_ALPHA,P.ONE,P.ONE],n.al.transparent,[!0,!0,!0,!0]);xs(g,o,c,A,st,Lt,aa,_r.disabled,it,"color",ce,Ce,Re,Pe,Ge,wt,Z,!1)}};if(j){const it=(st,yt,wt)=>{const Yt=g.depthModeForSublayer(1,ir.ReadOnly,P.LEQUAL,!1),Lt=c.paint.get(st?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),aa=ct(.1,3,Lt);{const ua=new br([P.ONE,P.ONE,P.ONE,P.ONE],n.al.transparent,[!1,!1,!1,!0]);xs(g,o,c,A,Yt,Rr.disabled,ua,_r.disabled,st,"clear",ce,Ce,Re,Pe,Ge,aa,Z,yt)}{const ua=new Rr({func:P.ALWAYS,mask:255},255,255,P.KEEP,P.KEEP,P.REPLACE),Sa=new br([P.ONE,P.ONE,P.ONE,P.ONE],n.al.transparent,[!1,!1,!1,!0],P.MIN);xs(g,o,c,A,Yt,ua,Sa,_r.disabled,st,"sdf",ce,Ce,Re,Pe,Ge,aa,Z,yt)}{const ua=st?P.ZERO:P.ONE_MINUS_DST_ALPHA,Sa=new Rr({func:P.EQUAL,mask:255},255,255,P.KEEP,P.DECR,P.DECR),Mt=new br([ua,P.DST_ALPHA,P.ONE_MINUS_DST_ALPHA,P.ZERO],n.al.transparent,[!0,!0,!0,!0]);xs(g,o,c,A,Yt,Sa,Mt,_r.disabled,st,"color",ce,Ce,Re,Pe,Ge,aa,Z,yt)}{const ua=new br([P.ONE,P.ONE,P.ONE,st?P.ZERO:P.ONE],n.al.transparent,[!1,!1,!1,!0],st?P.FUNC_ADD:P.MAX);xs(g,o,c,A,Yt,Rr.disabled,ua,_r.disabled,st,"clear",ce,Ce,Re,Pe,Ge,aa,Z,yt,wt)}};if(et||Xe){let st;if(g.prepareDrawTile(),L){const yt=L.drapeBufferSize[0],wt=L.drapeBufferSize[1];st=L.framebufferCopyTexture,st&&(!st||st.size[0]===yt&&st.size[1]===wt)||(st&&st.destroy(),st=L.framebufferCopyTexture=new n.T(C,new n.r({width:yt,height:wt}),P.RGBA8)),st.bind(P.LINEAR,P.CLAMP_TO_EDGE),P.copyTexSubImage2D(P.TEXTURE_2D,0,0,0,0,0,yt,wt)}et&&it(!0,!1,st),Xe&&it(!1,!0,st)}}else et&&nt(!0),Xe&&nt(!1),(et||Xe)&&g.resetStencilClippingMasks()}}},hillshade:function(g,o,c,A){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent"||g.style.disableElevatedTerrain)return;const R=g.context,C=g.terrain&&g.terrain.renderingToTexture,[P,L]=g.renderPass!=="translucent"||C?[{},A]:g.stencilConfigForOverlap(A);for(const j of L){const Z=o.getTile(j);if(Z.needsHillshadePrepare&&g.renderPass==="offscreen")xd(g,Z,c);else if(g.renderPass==="translucent"){const K=g.depthModeForSublayer(0,ir.ReadOnly),te=c.paint.get("hillshade-emissive-strength"),ae=g.colorModeForDrapableLayerRenderPass(te),ce=C&&g.terrain?g.terrain.stencilModeForRTTOverlap(j):P[j.overscaledZ];es(g,j,Z,c,K,ce,ae)}}R.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,o,c,A,R,C){if(g.renderPass!=="translucent"||c.paint.get("raster-opacity")===0)return;const P=g.transform.projection.name==="globe",L=c.paint.get("raster-elevation")!==0,j=L&&P;if(g.renderElevatedRasterBackface&&!j)return;const Z=g.context,K=Z.gl,te=o.getSource(),ae=function(nt,it,st,yt){const wt=it.paint.get("raster-color"),Yt=nt.type==="raster-array",Lt=[],aa=it.paint.get("raster-resampling"),ua=it.paint.get("raster-color-mix");let Sa=it.paint.get("raster-color-range");const Mt=[ua[0],ua[1],ua[2],0],ia=ua[3];let Nt=aa==="nearest"?yt.NEAREST:yt.LINEAR;if(Yt&&(Lt.push("RASTER_ARRAY"),wt||Lt.push("RASTER_COLOR"),aa==="linear"&&Lt.push("RASTER_ARRAY_LINEAR"),Nt=yt.NEAREST,!Sa&&nt.rasterLayers)){const sa=nt.rasterLayers.find(({id:Qt})=>Qt===it.sourceLayer);sa&&sa.fields&&sa.fields.range&&(Sa=sa.fields.range)}if(Sa=Sa||[0,1],wt){Lt.push("RASTER_COLOR"),st.activeTexture.set(yt.TEXTURE2),it.updateColorRamp(Sa);let sa=it.colorRampTexture;sa||(sa=it.colorRampTexture=new n.T(st,it.colorRamp,yt.RGBA8)),sa.bind(yt.LINEAR,yt.CLAMP_TO_EDGE)}return{mix:Mt,range:Sa,offset:ia,defines:Lt,resampling:Nt}}(te,c,Z,K);if(te instanceof n.aK&&!A.length&&!P)return;const ce=c.paint.get("raster-emissive-strength"),Ce=g.colorModeForDrapableLayerRenderPass(ce),Re=g.terrain&&g.terrain.renderingToTexture,Pe=!g.options.moving,Ne=c.paint.get("raster-resampling")==="nearest"?K.NEAREST:K.LINEAR;if(te instanceof n.aK&&!A.length&&(te.onNorthPole||te.onSouthPole)){const nt=L?g.stencilModeFor3D():Rr.disabled;return void Gt(!!te.onNorthPole,null,g,o,c,ce,ae,_r.disabled,nt)}if(!A.length)return;const[Ge,et]=te instanceof n.aK||Re?[{},A]:g.stencilConfigForOverlap(A),Xe=et[et.length-1].overscaledZ;j&&ae.defines.push("PROJECTION_GLOBE_VIEW"),L&&ae.defines.push("RENDER_CUTOFF");const ct=(nt,it,st)=>{for(const yt of nt){const wt=yt.toUnwrapped(),Yt=o.getTile(yt);if(Re&&(!Yt||!Yt.hasData()))continue;Z.activeTexture.set(K.TEXTURE0);const Lt=sh(Yt,te,c,ae);if(!Lt||!Lt.texture)continue;const{texture:aa,mix:ua,offset:Sa,tileSize:Mt,buffer:ia}=Lt;let Nt,sa;Re?(Nt=ir.disabled,sa=yt.projMatrix):L?(Nt=new ir(K.LEQUAL,ir.ReadWrite,g.depthRangeFor3D),sa=P?Float32Array.from(g.transform.expandedFarZProjMatrix):g.transform.calculateProjMatrix(wt,Pe)):(Nt=g.depthModeForSublayer(yt.overscaledZ-Xe,c.paint.get("raster-opacity")===1?ir.ReadWrite:ir.ReadOnly,K.LESS),sa=g.transform.calculateProjMatrix(wt,Pe));const Qt=g.terrain&&Re?g.terrain.stencilModeForRTTOverlap(yt):Ge[yt.overscaledZ],da=C?0:c.paint.get("raster-fade-duration");Yt.registerFadeDuration(da);const $t=o.findLoadedParent(yt,0),pa=xl(Yt,$t,o,g.transform,da);let Ia,La;g.terrain&&g.terrain.prepareDrawTile(),Z.activeTexture.set(K.TEXTURE0),aa.bind(Ne,K.CLAMP_TO_EDGE),Z.activeTexture.set(K.TEXTURE1),$t?($t.texture&&$t.texture.bind(Ne,K.CLAMP_TO_EDGE),Ia=Math.pow(2,$t.tileID.overscaledZ-Yt.tileID.overscaledZ),La=[Yt.tileID.canonical.x*Ia%1,Yt.tileID.canonical.y*Ia%1]):aa.bind(Ne,K.CLAMP_TO_EDGE),"useMipmap"in aa&&Z.extTextureFilterAnisotropic&&g.transform.pitch>20&&K.texParameterf(K.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax);const Pa=g.transform;let sr;const Lr=L?Bp(Pa):[0,0,0,0];let pr,zr,Cr,xr,Fr,Mr=0;if(j&&te instanceof n.aK&&te.coordinates.length>3)pr=Float32Array.from(n.bc(n.cI(new n.bT(0,0,0)))),zr=Float32Array.from(Pa.globeMatrix),Cr=Float32Array.from(n.cE(Pa)),xr=[n.av(Pa.center.lng),n.aC(Pa.center.lat)],sr=te.elevatedGlobePerspectiveTransform,Fr=te.elevatedGlobeGridMatrix||new Float32Array(9);else if(j){const er=n.cF(yt.canonical);Mr=n.cG(er.getCenter().lat),pr=Float32Array.from(n.bc(n.cI(yt.canonical))),zr=Float32Array.from(Pa.globeMatrix),Cr=Float32Array.from(n.cE(Pa)),xr=[n.av(Pa.center.lng),n.aC(Pa.center.lat)],sr=[0,0],Fr=Float32Array.from(n.cH(yt.canonical,er,Mr,Pa.worldSize/Pa._pixelsPerMercatorPixel))}else sr=te instanceof n.aK?te.perspectiveTransform:[0,0],pr=new Float32Array(16),zr=new Float32Array(9),Cr=new Float32Array(16),xr=[0,0],Fr=new Float32Array(9);const dr=ra(sa,pr,zr,Cr,Fr,La||[0,0],n.ag(g.transform.zoom),xr,Lr,Ia||1,pa,c,sr,L?c.paint.get("raster-elevation"):0,2,ua,Sa,ae.range,Mt,ia,ce),nn=g.isTileAffectedByFog(yt),Tr=g.getOrCreateProgram("raster",{defines:ae.defines,overrideFog:nn});if(g.uploadCommonUniforms(Z,Tr,wt),te instanceof n.aK){const er=te.elevatedGlobeVertexBuffer,sn=te.elevatedGlobeIndexBuffer;if(Re||!P)te.boundsBuffer&&te.boundsSegments&&Tr.draw(g,K.TRIANGLES,Nt,Rr.disabled,Ce,_r.disabled,dr,c.id,te.boundsBuffer,g.quadTriangleIndexBuffer,te.boundsSegments);else if(er&&sn){const qn=Pa.zoom<=n.c6?te.elevatedGlobeSegments:te.getSegmentsForLongitude(Pa.center.lng);qn&&Tr.draw(g,K.TRIANGLES,Nt,Rr.disabled,Ce,it,dr,c.id,er,sn,qn)}}else if(j){Nt=new ir(K.LEQUAL,ir.ReadOnly,g.depthRangeFor3D);const er=g.globeSharedBuffers;if(er){const[sn,qn,un]=er.getGridBuffers(Mr,!1);Tr.draw(g,K.TRIANGLES,Nt,st||Qt,g.colorModeForRenderPass(),it,dr,c.id,sn,qn,un)}}else{const{tileBoundsBuffer:er,tileBoundsIndexBuffer:sn,tileBoundsSegments:qn}=g.getTileBoundsBuffers(Yt);Tr.draw(g,K.TRIANGLES,Nt,Qt,Ce,_r.disabled,dr,c.id,er,sn,qn)}}if(!(te instanceof n.aK)&&j)for(const yt of nt){const wt=yt.canonical.y===(1<<yt.canonical.z)-1;yt.canonical.y===0&&Gt(!0,yt,g,o,c,ce,ae,it,st||Rr.disabled),wt&&Gt(!1,yt,g,o,c,ce,ae,it===_r.frontCW?_r.backCW:_r.frontCW,st||Rr.disabled)}};j?ct(et,g.renderElevatedRasterBackface?_r.backCW:_r.frontCW,g.stencilModeFor3D()):ct(et,_r.disabled,void 0),g.resetStencilClippingMasks()},"raster-particle":function(g,o,c,A,R,C){g.renderPass==="offscreen"&&function(P,L,j,Z){if(!Z.length)return;const K=P.context,te=K.gl,ae=L.getSource();if(!(ae instanceof Vi))return;const ce=Math.ceil(Math.sqrt(j.paint.get("raster-particle-count")));let Ce=j.particlePositionRGBAImage;if(!Ce||Ce.width!==ce){const et=function(Xe){const ct=Xe*Xe,nt=new Uint8Array(4*ct),it=function(yt){return yt|=0,yt=Math.imul(2747636419^yt,2654435769),yt=Math.imul(yt^yt>>>16,2654435769),((yt=Math.imul(yt^yt>>>16,2654435769))>>>0)/4294967296},st=1/1.1;for(let yt=0;yt<ct;yt++){const wt=st*(it(2*yt+0)+fa),Yt=st*(it(2*yt+1)+fa),Lt=255*wt%1,aa=255*Yt%1,ua=Lt,Sa=Yt-aa/255,Mt=aa;nt[4*yt+0]=255*(wt-Lt/255),nt[4*yt+1]=255*ua,nt[4*yt+2]=255*Sa,nt[4*yt+3]=255*Mt}return nt}(ce);Ce=j.particlePositionRGBAImage=new n.r({width:ce,height:ce},et)}let Re=j.particleFramebuffer;Re?Re.width!==ce&&(Re.destroy(),Re=j.particleFramebuffer=K.createFramebuffer(ce,ce,!0,null)):Re=j.particleFramebuffer=K.createFramebuffer(ce,ce,!0,null);const Pe=[];for(const et of Z){const Xe=L.getTile(et);if(!(Xe instanceof Lo))continue;const ct=Tu(Xe,ae,j);if(!ct)continue;const nt=[Xe.tileSize,Xe.tileSize];let it=j.tileFramebuffer;it||(it=j.tileFramebuffer=K.createFramebuffer(nt[0],nt[1],!0,null));let st=Xe.rasterParticleState;st||(st=Xe.rasterParticleState=new lh(K,et,nt,Ce));const yt=st.update(j.lastInvalidatedAt);st.particleTextureDimension!==ce&&st.updateParticleTexture(et,Ce);const wt=st.targetColorTexture;st.targetColorTexture=st.backgroundColorTexture,st.backgroundColorTexture=wt;const Yt=st.particleTexture0;st.particleTexture0=st.particleTexture1,st.particleTexture1=Yt,Pe.push([et,ct,st,yt])}if(Pe.length===0)return;const Ne=n.q.now(),Ge=j.previousDrawTimestamp?.001*(Ne-j.previousDrawTimestamp):.0167;if(j.previousDrawTimestamp=Ne,j.hasColorMap()){K.activeTexture.set(te.TEXTURE0+2);let et=j.colorRampTexture;et||(et=j.colorRampTexture=new n.T(K,j.colorRamp,te.RGBA8)),et.bind(te.LINEAR,te.CLAMP_TO_EDGE)}K.bindFramebuffer.set(j.tileFramebuffer.framebuffer),function(et,Xe,ct){const nt=et.context,it=nt.gl,st=Xe.tileFramebuffer;nt.activeTexture.set(it.TEXTURE0);const yt={u_texture:0,u_opacity:1.05*(Yt=Xe.paint.get("raster-particle-fade-opacity-factor"))/(Yt+.05)},wt=et.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Yt;for(const Lt of ct){const[,,aa,ua]=Lt;st.colorAttachment.set(aa.targetColorTexture.texture),nt.viewport.set([0,0,st.width,st.height]),nt.clear({color:n.al.transparent}),ua&&(aa.backgroundColorTexture.bind(it.NEAREST,it.CLAMP_TO_EDGE),wt.draw(et,it.TRIANGLES,ir.disabled,Rr.disabled,br.alphaBlended,_r.disabled,yt,Xe.id,et.viewportBuffer,et.quadTriangleIndexBuffer,et.viewportSegments))}}(P,j,Pe),function(et,Xe,ct,nt){const it=et.context,st=it.gl,yt=ct.tileFramebuffer,wt=et.transform.projection.name==="globe",Yt=ct.paint.get("raster-particle-max-speed");for(const Lt of nt){const[aa,ua,Sa]=Lt;it.activeTexture.set(st.TEXTURE0+0),ua.texture.bind(st.LINEAR,st.CLAMP_TO_EDGE),yt.colorAttachment.set(Sa.targetColorTexture.texture);const Mt=et.getOrCreateProgram("rasterParticleDraw",{defines:ua.defines,overrideFog:!1});it.activeTexture.set(st.TEXTURE0+1);const ia=ua.scalarData?[]:[0,1,2,3].map(Qt=>n.d7[Qt](aa));ia.push(aa);const Nt=aa.canonical.x,sa=aa.canonical.y;for(const Qt of ia){const da=Xe.getTile(wt?Qt.wrapped():Qt);if(!da)continue;const $t=da.rasterParticleState;if(!$t)continue;const pa=Qt.canonical.x+(1<<Qt.canonical.z)*(Qt.wrap-aa.wrap),Ia=Qt.canonical.y;$t.particleTexture0.bind(st.NEAREST,st.CLAMP_TO_EDGE);const La=ta(1,$t.particleTexture0.size[0],[pa-Nt,Ia-sa],0,ua.texture.size,2,Yt,ua.textureOffset,ua.scale,ua.offset);Mt.draw(et,st.POINTS,ir.disabled,Rr.disabled,br.alphaBlended,_r.disabled,La,ct.id,$t.particleIndexBuffer,void 0,$t.particleSegment)}}}(P,L,j,Pe),K.bindFramebuffer.set(j.particleFramebuffer.framebuffer),function(et,Xe,ct,nt){const it=et.context,st=it.gl,yt=Xe.paint.get("raster-particle-max-speed"),wt=nt*Xe.paint.get("raster-particle-speed-factor")*.15,Yt=function(aa){return Math.pow(aa,6)}(.01+1*Xe.paint.get("raster-particle-reset-rate-factor")),Lt=Xe.particleFramebuffer;it.viewport.set([0,0,Lt.width,Lt.height]);for(const aa of ct){const[,ua,Sa]=aa;it.activeTexture.set(st.TEXTURE0+0),ua.texture.bind(st.LINEAR,st.CLAMP_TO_EDGE),it.activeTexture.set(st.TEXTURE0+1);const Mt=Sa.particleTexture0;Mt.bind(st.NEAREST,st.CLAMP_TO_EDGE);const ia=Ga(1,Mt.size[0],0,ua.texture.size,yt,wt,Yt,ua.textureOffset,ua.scale,ua.offset);Lt.colorAttachment.set(Sa.particleTexture1.texture),it.clear({color:n.al.transparent}),et.getOrCreateProgram("rasterParticleUpdate",{defines:ua.defines}).draw(et,st.TRIANGLES,ir.disabled,Rr.disabled,br.unblended,_r.disabled,ia,Xe.id,et.viewportBuffer,et.quadTriangleIndexBuffer,et.viewportSegments)}}(P,j,Pe,Ge)}(g,o,c,A),g.renderPass==="translucent"&&(function(P,L,j,Z,K){const te=P.context,ae=te.gl,ce=L.getSource().tileSize,Ce=5*(1-n.ae(n.bY,n.bY+1,P.transform.zoom))*ce+j.paint.get("raster-particle-elevation"),Re=!P.options.moving,Pe=P.transform.projection.name==="globe";if(!Z.length)return;const[Ne,Ge]=P.stencilConfigForOverlap(Z),et=[];Pe&&et.push("PROJECTION_GLOBE_VIEW");const Xe=P.stencilModeFor3D();for(const ct of Ge){const nt=ct.toUnwrapped(),it=L.getTile(ct);if(!it.rasterParticleState)continue;const st=it.rasterParticleState,yt=100;it.registerFadeDuration(yt);const wt=L.findLoadedParent(ct,0),Yt=xl(it,wt,L,P.transform,yt);let Lt,aa;P.terrain&&P.terrain.prepareDrawTile(),te.activeTexture.set(ae.TEXTURE0),st.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),te.activeTexture.set(ae.TEXTURE1),wt&&wt.rasterParticleState?(wt.rasterParticleState.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),Lt=Math.pow(2,wt.tileID.overscaledZ-it.tileID.overscaledZ),aa=[it.tileID.canonical.x*Lt%1,it.tileID.canonical.y*Lt%1]):st.targetColorTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const ua=Pe?Float32Array.from(P.transform.expandedFarZProjMatrix):P.transform.calculateProjMatrix(nt,Re),Sa=P.transform,Mt=uh(Sa),ia=n.cF(ct.canonical),Nt=n.cG(ia.getCenter().lat);let sa,Qt,da,$t,pa;Pe?(sa=Float32Array.from(n.bc(n.cI(ct.canonical))),Qt=Float32Array.from(Sa.globeMatrix),da=Float32Array.from(n.cE(Sa)),$t=[n.av(Sa.center.lng),n.aC(Sa.center.lat)],pa=Float32Array.from(n.cH(ct.canonical,ia,Nt,Sa.worldSize/Sa._pixelsPerMercatorPixel))):(sa=new Float32Array(16),Qt=new Float32Array(9),da=new Float32Array(16),$t=[0,0],pa=new Float32Array(9));const Ia=_t(ua,sa,Qt,da,pa,aa||[0,0],n.ag(P.transform.zoom),$t,Mt,Lt||1,Yt,Ce),La=P.isTileAffectedByFog(ct),Pa=P.getOrCreateProgram("rasterParticle",{defines:et,overrideFog:La});if(P.uploadCommonUniforms(te,Pa,nt),Pe){const sr=new ir(ae.LEQUAL,ir.ReadOnly,P.depthRangeFor3D),Lr=0,pr=P.globeSharedBuffers;if(pr){const[zr,Cr,xr]=pr.getGridBuffers(Nt,Lr!==0);Pa.draw(P,ae.TRIANGLES,sr,Xe,br.alphaBlended,P.renderElevatedRasterBackface?_r.frontCCW:_r.backCCW,Ia,j.id,zr,Cr,xr)}}else{const sr=P.depthModeForSublayer(0,ir.ReadOnly),Lr=Ne[ct.overscaledZ],{tileBoundsBuffer:pr,tileBoundsIndexBuffer:zr,tileBoundsSegments:Cr}=P.getTileBoundsBuffers(it);Pa.draw(P,ae.TRIANGLES,sr,Lr,br.alphaBlended,_r.disabled,Ia,j.id,pr,zr,Cr)}}P.resetStencilClippingMasks()}(g,o,c,A),g.style.map.triggerRepaint())},background:function(g,o,c,A){const R=c.paint.get("background-color"),C=c.paint.get("background-color-use-theme").constantOr("default")==="none",P=c.paint.get("background-opacity"),L=c.paint.get("background-emissive-strength"),j=c.paint.get("background-pitch-alignment")==="viewport";if(P===0)return;const Z=g.context,K=Z.gl,te=g.transform,ae=te.tileSize,ce=c.paint.get("background-pattern");let Ce;if(ce!==void 0&&(ce===null||(Ce=g.imageManager.getPattern(n.I.from(ce.toString()),c.scope,g.style.getLut(c.scope)),!Ce)))return;const Re=!ce&&R.a===1&&P===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==Re)return;const Pe=Rr.disabled,Ne=g.depthModeForSublayer(0,Re==="opaque"?ir.ReadWrite:ir.ReadOnly),Ge=g.colorModeForDrapableLayerRenderPass(L),et=ce?"backgroundPattern":"background";let Xe,ct=A;if(ct||(Xe=g.getBackgroundTiles(),ct=Object.values(Xe).map(nt=>nt.tileID)),ce&&(Z.activeTexture.set(K.TEXTURE0),g.imageManager.bind(g.context,c.scope)),j){const nt=g.getOrCreateProgram(et,{overrideFog:!1,overrideRtt:!0}),it=new Float32Array(n.ad.mat4.identity([])),st=new n.aH(0,0,0,0,0),yt=ce?fr(it,L,P,g,0,c.scope,Ce,j,{tileID:st,tileSize:ae}):Sr(it,L,P,R.toRenderColor(C?null:c.lut));nt.draw(g,K.TRIANGLES,Ne,Pe,Ge,_r.disabled,yt,c.id,g.viewportBuffer,g.quadTriangleIndexBuffer,g.viewportSegments)}else for(const nt of ct){const it=g.isTileAffectedByFog(nt),st=g.getOrCreateProgram(et,{overrideFog:it}),yt=nt.toUnwrapped(),wt=A?nt.projMatrix:g.transform.calculateProjMatrix(yt);g.prepareDrawTile();const Yt=o?o.getTile(nt):Xe?Xe[nt.key]:new Gl(nt,ae,te.zoom,g),Lt=ce?fr(wt,L,P,g,0,c.scope,Ce,j,{tileID:nt,tileSize:ae}):Sr(wt,L,P,R.toRenderColor(C?null:c.lut));g.uploadCommonUniforms(Z,st,yt);const{tileBoundsBuffer:aa,tileBoundsIndexBuffer:ua,tileBoundsSegments:Sa}=g.getTileBoundsBuffers(Yt);st.draw(g,K.TRIANGLES,Ne,Pe,Ge,_r.disabled,Lt,c.id,aa,ua,Sa)}},sky:function(g,o,c){const A=g._atmosphere?n.ag(g.transform.zoom):1,R=c.paint.get("sky-opacity")*A;if(R===0)return;const C=g.context,P=c.paint.get("sky-type"),L=new ir(C.gl.LEQUAL,ir.ReadOnly,[0,1]),j=g.frameCounter/1e3%1;P==="atmosphere"?g.renderPass==="offscreen"?c.needsSkyboxCapture(g)&&(function(Z,K,te,ae){const ce=Z.context,Ce=ce.gl;let Re=K.skyboxFbo;if(!Re){Re=K.skyboxFbo=ce.createFramebuffer(32,32,!0,null),K.skyboxGeometry=new Fm(ce),K.skyboxTexture=ce.gl.createTexture(),Ce.bindTexture(Ce.TEXTURE_CUBE_MAP,K.skyboxTexture),Ce.texParameteri(Ce.TEXTURE_CUBE_MAP,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_CUBE_MAP,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_CUBE_MAP,Ce.TEXTURE_MIN_FILTER,Ce.LINEAR),Ce.texParameteri(Ce.TEXTURE_CUBE_MAP,Ce.TEXTURE_MAG_FILTER,Ce.LINEAR);for(let et=0;et<6;++et)Ce.texImage2D(Ce.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,Ce.RGBA,32,32,0,Ce.RGBA,Ce.UNSIGNED_BYTE,null)}ce.bindFramebuffer.set(Re.framebuffer),ce.viewport.set([0,0,32,32]);const Pe=K.getCenter(Z,!0),Ne=Z.getOrCreateProgram("skyboxCapture"),Ge=new Float64Array(16);n.ad.mat4.identity(Ge),n.ad.mat4.rotateY(Ge,Ge,.5*-Math.PI),to(Z,K,Ne,Ge,Pe,0),n.ad.mat4.identity(Ge),n.ad.mat4.rotateY(Ge,Ge,.5*Math.PI),to(Z,K,Ne,Ge,Pe,1),n.ad.mat4.identity(Ge),n.ad.mat4.rotateX(Ge,Ge,.5*-Math.PI),to(Z,K,Ne,Ge,Pe,2),n.ad.mat4.identity(Ge),n.ad.mat4.rotateX(Ge,Ge,.5*Math.PI),to(Z,K,Ne,Ge,Pe,3),n.ad.mat4.identity(Ge),to(Z,K,Ne,Ge,Pe,4),n.ad.mat4.identity(Ge),n.ad.mat4.rotateY(Ge,Ge,Math.PI),to(Z,K,Ne,Ge,Pe,5),ce.viewport.set([0,0,Z.width,Z.height])}(g,c),c.markSkyboxValid(g)):g.renderPass==="sky"&&function(Z,K,te,ae,ce){const Ce=Z.context,Re=Ce.gl,Pe=Z.transform,Ne=Z.getOrCreateProgram("skybox");Ce.activeTexture.set(Re.TEXTURE0),Re.bindTexture(Re.TEXTURE_CUBE_MAP,K.skyboxTexture);const Ge=((et,Xe,ct,nt,it)=>({u_matrix:et,u_sun_direction:Xe,u_cubemap:0,u_opacity:nt,u_temporal_offset:it}))(Pe.skyboxMatrix,K.getCenter(Z,!1),0,ae,ce);Z.uploadCommonUniforms(Ce,Ne),Ne.draw(Z,Re.TRIANGLES,te,Rr.disabled,Z.colorModeForRenderPass(),_r.backCW,Ge,"skybox",K.skyboxGeometry.vertexBuffer,K.skyboxGeometry.indexBuffer,K.skyboxGeometry.segment)}(g,c,L,R,j):P==="gradient"&&g.renderPass==="sky"&&function(Z,K,te,ae,ce){const Ce=Z.context,Re=Ce.gl,Pe=Z.transform,Ne=Z.getOrCreateProgram("skyboxGradient");K.skyboxGeometry||(K.skyboxGeometry=new Fm(Ce)),Ce.activeTexture.set(Re.TEXTURE0);let Ge=K.colorRampTexture;Ge||(Ge=K.colorRampTexture=new n.T(Ce,K.colorRamp,Re.RGBA8)),Ge.bind(Re.LINEAR,Re.CLAMP_TO_EDGE);const et=((Xe,ct,nt,it,st)=>({u_matrix:Xe,u_color_ramp:0,u_center_direction:ct,u_radius:n.ak(nt),u_opacity:it,u_temporal_offset:st}))(Pe.skyboxMatrix,K.getCenter(Z,!1),K.paint.get("sky-gradient-radius"),ae,ce);Z.uploadCommonUniforms(Ce,Ne),Ne.draw(Z,Re.TRIANGLES,te,Rr.disabled,Z.colorModeForRenderPass(),_r.backCW,et,"skyboxGradient",K.skyboxGeometry.vertexBuffer,K.skyboxGeometry.indexBuffer,K.skyboxGeometry.segment)}(g,c,L,R,j)},debug:function(g,o,c,A,R,C){for(let P=0;P<c.length;P++)if(R){const Z=new n.al(A.r*.8,A.g*.8,A.b*.8,1);Nl(g,o,c[P],A,-1,-1,C),Nl(g,o,c[P],A,-1,1,C),Nl(g,o,c[P],A,1,1,C),Nl(g,o,c[P],A,1,-1,C),Nl(g,o,c[P],Z,0,0,C)}else Nl(g,o,c[P],A,0,0,C)},custom:function(g,o,c,A){const R=g.context,C=c.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&c.isDraped(o)){if(g.renderPass==="offscreen"){const P=C.prerender;if(P){if(g.setCustomLayerDefaults(),R.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const L=g.transform.pointMerc;P.call(C,R.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),n.ag(g.transform.zoom),[L.x,L.y],g.transform.pixelsPerMeterRatio)}else P.call(C,R.gl,g.transform.customLayerMatrix());R.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const L=C.renderToTile;if(L){const j=A[0].canonical,Z=new n.ac(j.x+A[0].wrap*(1<<j.z),j.y,j.z);R.setDepthMode(ir.disabled),R.setStencilMode(Rr.disabled),R.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),L.call(C,R.gl,Z),R.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),R.setColorMode(g.colorModeForRenderPass()),R.setStencilMode(Rr.disabled);const P=C.renderingMode==="3d"?new ir(g.context.gl.LEQUAL,ir.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,ir.ReadOnly);if(R.setDepthMode(P),g.transform.projection.name==="globe"){const L=g.transform.pointMerc;C.render(R.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),n.ag(g.transform.zoom),[L.x,L.y],g.transform.pixelsPerMeterRatio)}else C.render(R.gl,g.transform.customLayerMatrix());R.setDirty(),g.setBaseState(),R.bindFramebuffer.set(null)}}else n.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(g,o,c,A){if(g.renderPass==="opaque")return;const R=c.paint.get("model-opacity").constantOr(1);if(R===0)return;const C=c.paint.get("model-cast-shadows");if(g.renderPass==="shadow"&&(!C||g.terrain&&R<.65&&c._transitionablePaint._values["model-opacity"].value.expression instanceof n.ab))return;const P=g.shadowRenderer,L=c.paint.get("model-receive-shadows");P&&(P.useNormalOffset=!0,L||(P.enabled=!1));const j=()=>{P&&(P.useNormalOffset=!0,L||(P.enabled=!0))},Z=o.getSource();if(g.renderPass==="light-beam"&&Z.type!=="batched-model")return;if(Z.type==="vector"||Z.type==="geojson")return function(Ne,Ge,et,Xe,ct){const nt=Ne.transform;if(nt.projection.name!=="mercator")return void n.w(`Drawing 3D models for ${nt.projection.name} projection is not yet implemented`);const it=nt.getFreeCameraOptions().position;if(!Ne.modelManager)return;const st=Ne.modelManager;et.modelManager=st;const yt=Ne.shadowRenderer;if(!et._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const wt=et._unevaluatedLayout._values["model-id"],Yt=Object.assign({},et.layout.get("model-id").parameters),Lt=Ne.style.order.indexOf(et.fqid);for(const aa of Xe){const ua=Ge.getTile(aa).getBucket(et);if(!ua||ua.projection.name!==nt.projection.name)continue;const Sa=ua.getModelUris();Sa&&!ua.modelsRequested&&(st.addModelsFromBucket(Sa,ct),ua.modelsRequested=!0);const Mt=vf(aa,nt);Yt.zoom=Mt;const ia=wt.possiblyEvaluate(Yt);if(Bh(Ne,ua,aa),Vl.shadowUniformsInitialized=!1,Vl.useSingleShadowCascade=!!yt&&yt.getMaxCascadeForTile(aa.toUnwrapped())===0,Ne.renderPass==="shadow"&&yt){if(Ne.currentShadowCascade===1&&ua.isInsideFirstShadowMapFrustum)continue;const Qt=nt.calculatePosMatrix(aa.toUnwrapped(),nt.worldSize);if(Vl.tileMatrix.set(Qt),Vl.shadowTileMatrix=Float32Array.from(yt.calculateShadowPassMatrixFromMatrix(Qt)),Vl.aabb.min.fill(0),Vl.aabb.max[0]=Vl.aabb.max[1]=n.ai,Vl.aabb.max[2]=0,Wf(ua,Vl,Ne,et.scope))continue}const Nt=1<<aa.canonical.z,sa=[((it.x-aa.wrap)*Nt-aa.canonical.x)*n.ai,(it.y*Nt-aa.canonical.y)*n.ai,it.z*Nt*n.ai];Ne.conflationActive&&Object.keys(ua.instancesPerModel).length>0&&Ne.style.isLayerClipped(et,Ge.getSource())&&ua.updateReplacement(aa,Ne.replacementSource,Lt,ct)&&(ua.uploaded=!1,ua.upload(Ne.context));for(let Qt in ua.instancesPerModel){const da=ua.instancesPerModel[Qt];da.features.length>0&&(Qt=ia.evaluate(da.features[0].feature,{}));const $t=st.getModel(Qt,ct);if($t&&$t.uploaded)for(const pa of $t.nodes)So(Ne,et,pa,da,sa,aa,Vl)}}}(g,o,c,A,Z.type==="vector"?c.scope:""),void j();if(!Z.loaded())return;if(Z.type==="batched-model")return function(Ne,Ge,et,Xe){et.resetLayerRenderingStats(Ne);const ct=Ne.context,nt=Ne.transform,it=Ne.style.fog,st=Ne.shadowRenderer;if(nt.projection.name!=="mercator")return void n.w(`Drawing 3D landmark models for ${nt.projection.name} projection is not yet implemented`);const yt=Ne.transform.getFreeCameraOptions().position,wt=n.ad.vec3.scale([],[yt.x,yt.y,yt.z],Ne.transform.worldSize),Yt=n.ad.vec3.negate([],wt),Lt=n.ad.mat4.identity([]),aa=n.dm(nt.center.lat,nt.zoom),ua=n.ad.mat4.fromScaling([],[1,1,1/aa]);n.ad.mat4.translate(Lt,Lt,Yt);const Sa=et.paint.get("model-opacity").constantOr(1),Mt=new ir(ct.gl.LEQUAL,ir.ReadWrite,Ne.depthRangeFor3D),ia=new ir(ct.gl.LEQUAL,ir.ReadOnly,Ne.depthRangeFor3D),Nt=new n.ce([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),sa=Ne.renderPass==="shadow",Qt=sa&&st?st.getCurrentCascadeFrustum():nt.getFrustum(nt.scaleZoom(nt.worldSize)),da=et.paint.get("model-front-cutoff"),$t=da[2]<1,pa=Zs(Ne,et.paint.get("model-cutoff-fade-range")),Ia=et.getLayerRenderingStats();(function(La,Pa,sr,Lr){const pr=La.terrain?La.terrain.exaggeration():0,zr=La.transform.zoom;for(const Cr of Lr){const xr=Pa.getTile(Cr).getBucket(sr);xr&&(xr.setFilter(sr.filter),La.conflationActive&&xr.updateReplacement(Cr,La.replacementSource),xr.evaluateScale(La,sr),La.terrain&&pr>0&&xr.elevationUpdate(La.terrain,pr,Cr,sr.source),xr.needsReEvaluation(La,zr,sr)&&xr.evaluate(sr))}})(Ne,Ge,et,Xe),function(){let La,Pa,sr;$t?(La=Xe.length-1,Pa=-1,sr=-1):(La=0,Pa=Xe.length,sr=1);const Lr=new Float64Array(16),pr=n.ad.vec3.create(),zr=new n.P(0,0);for(let Cr=La;Cr!==Pa;Cr+=sr){const xr=Xe[Cr],Fr=Ge.getTile(xr).getBucket(et);if(!Fr||!Fr.uploaded)continue;let Mr=!1;st&&(Mr=st.getMaxCascadeForTile(xr.toUnwrapped())===0);const dr=nt.calculatePosMatrix(xr.toUnwrapped(),nt.worldSize),nn=Fr.modelTraits;!sa&&$t&&(n.ad.mat4.invert(Lr,dr),n.ad.vec3.transformMat4(pr,wt,Lr),zr.x=pr[0],zr.y=pr[1]);const Tr=[];Fr.setFilter(et.filter);for(const er of Fr.getNodesInfo()){if(er.hiddenByReplacement||!er.node.meshes)continue;const sn=er.node;let qn=0;Ne.terrain&&sn.elevation&&(qn=sn.elevation*Ne.terrain.exaggeration());const un=(()=>{const oi=er.aabb;return Nt.min=[...oi.min],Nt.max=[...oi.max],Nt.min[2]+=qn,Nt.max[2]+=qn,n.ad.vec3.transformMat4(Nt.min,Nt.min,dr),n.ad.vec3.transformMat4(Nt.max,Nt.max,dr),Nt})(),Vn=er.evaluatedScale;if(Vn[0]<=1&&Vn[1]<=1&&Vn[2]<=1&&un.intersects(Qt)===0)continue;if(!sa&&$t){const oi=.16666666666666666;er.cameraCollisionOpacity=wt[0]>un.min[0]&&wt[0]<un.max[0]&&wt[1]>un.min[1]&&wt[1]<un.max[1]&&wt[2]*aa<un.max[2]&&sn.footprint&&n.bA(zr,sn.footprint)?Math.max(er.cameraCollisionOpacity-oi,0):Math.min(1,er.cameraCollisionOpacity+oi)}const Ki=[...dr],hs=sn.anchor?sn.anchor[0]:0,ao=sn.anchor?sn.anchor[1]:0;n.ad.mat4.translate(Ki,Ki,[hs*(Vn[0]-1),ao*(Vn[1]-1),qn]),n.ad.vec3.exactEquals(Vn,n.dq)||n.ad.mat4.scale(Ki,Ki,Vn);const Ks=n.ad.mat4.multiply([],Ki,sn.matrix),mo=n.ad.mat4.multiply([],nt.expandedFarZProjMatrix,Ks),Cn=n.ad.mat4.multiply([],nt.expandedFarZProjMatrix,Ki),ni=n.ad.vec4.transformMat4([],[hs,ao,qn,1],mo)[2];sn.hidden=!1;let On=Sa;sa||($t&&(On*=er.cameraCollisionOpacity,On*=hh(Ki,nt,er.aabb,da)),On*=Yf(pa,ni)),On!==0?Tr.push({nodeInfo:er,depth:ni,opacity:On,wvpForNode:mo,wvpForTile:Cn,nodeModelMatrix:Ks,tileModelMatrix:Ki}):sn.hidden=!0}sa||Tr.sort((er,sn)=>!$t||er.opacity===1&&sn.opacity===1?er.depth<sn.depth?-1:1:er.opacity===1?-1:sn.opacity===1?1:er.depth>sn.depth?-1:1);for(const er of Tr){const sn=er.nodeInfo,qn=sn.node;let un=n.ad.mat4.multiply([],ua,er.tileModelMatrix);n.ad.mat4.multiply(un,Lt,un);const Vn=n.ad.mat4.invert([],un);n.ad.mat4.transpose(Vn,Vn),n.ad.mat4.scale(Vn,Vn,Md),un=n.ad.mat4.multiply(un,un,qn.matrix);const Ki=Ne.renderPass==="light-beam",hs=et.paint.get("model-color-use-theme").constantOr("default")==="none",ao=nn&n.ds.HasMapboxMeshFeatures,Ks=ao?0:sn.evaluatedRMEA[0][2];for(let mo=0;mo<qn.meshes.length;++mo){const Cn=qn.meshes[mo],ni=mo===qn.lightMeshIndex;let On=er.wvpForNode;if(ni){if(!Ki&&!Ne.terrain&&Ne.shadowRenderer){Ne.currentLayer<Ne.firstLightBeamLayer&&(Ne.firstLightBeamLayer=Ne.currentLayer);continue}On=er.wvpForTile}else if(Ki)continue;const oi={defines:[]},yo=[];if(!sa&&st&&(st.useNormalOffset=!!Cn.normalBuffer),Dd(oi.defines,yo,Cn,Ne,hs?null:et.lut),ao||oi.defines.push("DIFFUSE_SHADED"),Mr&&oi.defines.push("SHADOWS_SINGLE_CASCADE"),Ia&&(sa?Ia.numRenderedVerticesInShadowPass+=Cn.vertexArray.length:Ia.numRenderedVerticesInTransparentPass+=Cn.vertexArray.length),sa){_f(Cn,er.nodeModelMatrix,Ne,et);continue}let Ri=null;if(it){const Yu=Su(er.nodeModelMatrix,Ne.transform);if(Ri=new Float32Array(Yu),nt.projection.name!=="globe"){const gl=Cn.aabb.min,kd=Cn.aabb.max,[go,Ah]=it.getOpacityForBounds(Yu,gl[0],gl[1],kd[0],kd[1]);oi.overrideFog=go>=Ma||Ah>=Ma}}const ss=Cn.material;let Tc;ss.occlusionTexture&&ss.occlusionTexture.offsetScale&&(Tc=ss.occlusionTexture.offsetScale,oi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Zo=Ne.getOrCreateProgram("model",oi);!sa&&st&&st.setupShadowsFromMatrix(er.tileModelMatrix,Zo,st.useNormalOffset),Ne.uploadCommonUniforms(ct,Zo,null,Ri);const eu=ss.pbrMetallicRoughness;eu.metallicFactor=.9,eu.roughnessFactor=.5;const zl=lr(new Float32Array(On),new Float32Array(un),new Float32Array(Vn),new Float32Array(qn.matrix),Ne,er.opacity,eu.baseColorFactor.toRenderColor(null),ss.emissiveFactor,eu.metallicFactor,eu.roughnessFactor,ss,Ks,et,[0,0,0],Tc);!ni&&(sn.hasTranslucentParts||er.opacity<1)&&Zo.draw(Ne,ct.gl.TRIANGLES,Mt,Rr.disabled,br.disabled,_r.backCCW,zl,et.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,et.paint,Ne.transform.zoom,void 0,yo),Zo.draw(Ne,ct.gl.TRIANGLES,ni?ia:Mt,Rr.disabled,ni||er.opacity<1||sn.hasTranslucentParts?br.alphaBlended:br.unblended,_r.backCCW,zl,et.id,Cn.vertexBuffer,Cn.indexBuffer,Cn.segments,et.paint,Ne.transform.zoom,void 0,yo)}}}}()}(g,o,c,A),void j();if(Z.type!=="model")return;const K=Z.getModels(),te=[],ae=g.transform.getFreeCameraOptions().position,ce=n.ad.vec3.scale([],[ae.x,ae.y,ae.z],g.transform.worldSize);n.ad.vec3.negate(ce,ce);const Ce=[],Re=[];let Pe=0;for(const Ne of K){const Ge=c.paint.get("model-rotation").constantOr(null),et=c.paint.get("model-scale").constantOr(null),Xe=c.paint.get("model-translation").constantOr(null);Ne.computeModelMatrix(g,Ge,et,Xe,!0,!0,!1);const ct=n.ad.mat4.identity([]),nt=n.dm(Ne.position.lat,g.transform.zoom),it=n.ad.mat4.fromScaling([],[1,1,1/nt]);n.ad.mat4.translate(ct,ct,ce),te.push({zScaleMatrix:it,negCameraPosMatrix:ct});for(const st of Ne.nodes)Kc(g.transform,st,Ne.matrix,g.transform.expandedFarZProjMatrix,Pe,Ce,Re);Pe++}if(Ce.sort((Ne,Ge)=>Ge.depth-Ne.depth),g.renderPass!=="shadow"){if(R===1)for(const Ne of Re)Cu(Ne,g,c,te[Ne.modelIndex],Rr.disabled,g.colorModeForRenderPass());else{for(const Ne of Re)Cu(Ne,g,c,te[Ne.modelIndex],Rr.disabled,br.disabled);for(const Ne of Re)Cu(Ne,g,c,te[Ne.modelIndex],g.stencilModeFor3D(),g.colorModeForRenderPass());g.resetStencilClippingMasks()}for(const Ne of Ce)Cu(Ne,g,c,te[Ne.modelIndex],Rr.disabled,g.colorModeForRenderPass());j()}else{for(const Ne of Re)_f(Ne.mesh,Ne.nodeModelMatrix,g,c);for(const Ne of Ce)_f(Ne.mesh,Ne.nodeModelMatrix,g,c);j()}}},Ld={line:function(g,o,c){if(g.hasElevatedBuckets=!1,g.hasNonElevatedBuckets=!1,g._unevaluatedLayout.getValue("line-elevation-reference")!==void 0||g._unevaluatedLayout.getValue("line-z-offset")!==void 0){if(o){const A=o.getVisibleCoordinates();for(const R of A){const C=o.getTile(R).getBucket(g);if(C&&(C.hasZOffset?g.hasElevatedBuckets=!0:g.hasNonElevatedBuckets=!0,g.hasElevatedBuckets&&g.hasNonElevatedBuckets))break}}}else g.hasNonElevatedBuckets=!0},model:function(g,o,c){const A=o.getSource();if(!A.loaded())return;if(A.type==="vector"||A.type==="geojson")return void(c.modelManager&&c.modelManager.upload(c,A.type==="vector"?g.scope:""));if(A.type==="batched-model"||A.type!=="model")return;const R=A.getModels();for(const C of R)C.upload(c.context)},raster:function(g,o,c){const A=o.getSource();if(!(A instanceof Vi&&A.loaded()))return;const R=g.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!R)return;const C=g.paint.get("raster-array-band")||A.getInitialBand(R);if(C==null)return;const P=o.getIds().map(L=>o.getTileByID(L));for(const L of P)L.updateNeeded(R,C)&&A.prepareTile(L,R,C)},"raster-particle":function(g,o,c){const A=o.getSource();if(!(A instanceof Vi&&A.loaded()))return;const R=g.sourceLayer||A.rasterLayerIds&&A.rasterLayerIds[0];if(!R)return;const C=g.paint.get("raster-particle-array-band")||A.getInitialBand(R);if(C==null)return;const P=o.getIds().map(L=>o.getTileByID(L));for(const L of P)L.updateNeeded(R,C)&&A.prepareTile(L,R,C)}},Um={fill:To};class Gp{constructor(o,c,A,R,C){this.context=new _n(o,c),this.transform=A,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=C,this._timeStamp=n.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const P=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const j of P)this._debugParams.enabledLayers[j]=!0;C.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),C.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),C.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),C.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),C.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),C.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const j of P)C.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],j);this.occlusionParams=new Xf(C),this.setup(),this.numSublayers=Wo.maxUnderzooming+Wo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new n.dy,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new ho(this),this._wireframeDebugCache=new Yc,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const L=new n.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new n.T(this.context,L,o.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=R}updateTerrain(o,c){const A=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(A||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Od(this,o));const R=this._terrain;this.transform.elevation=A?R:null,R.update(o,this.transform,c),this.transform.elevation&&!R.enabled&&(this.transform.elevation=null)}_updateFog(o){const c=o.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[A,R]=c.getFovAdjustedRange(this.transform._fov);if(A>R)return void(this.transform.fogCullDistSq=null);const C=A+.78*(R-A);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(o){o&&!this._terrain&&(this._terrain=new Od(this,this.style)),this._forceTerrainMode=o}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(o,c){if(this.width=o*n.q.devicePixelRatio,this.height=c*n.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const A of this.style.order)this.style._mergedLayers[A].resize()}setup(){const o=this.context,c=new n.b5;c.emplaceBack(0,0),c.emplaceBack(n.ai,0),c.emplaceBack(0,n.ai),c.emplaceBack(n.ai,n.ai),this.tileExtentBuffer=o.createVertexBuffer(c,n.b7.members),this.tileExtentSegments=n.b8.simpleSegment(0,0,4,2);const A=new n.b5;A.emplaceBack(0,0),A.emplaceBack(n.ai,0),A.emplaceBack(0,n.ai),A.emplaceBack(n.ai,n.ai),this.debugBuffer=o.createVertexBuffer(A,n.b7.members),this.debugSegments=n.b8.simpleSegment(0,0,4,5);const R=new n.b5;R.emplaceBack(-1,-1),R.emplaceBack(1,-1),R.emplaceBack(-1,1),R.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(R,n.b7.members),this.viewportSegments=n.b8.simpleSegment(0,0,4,2);const C=new n.aU;C.emplaceBack(0,0,0,0),C.emplaceBack(n.ai,0,n.ai,0),C.emplaceBack(0,n.ai,0,n.ai),C.emplaceBack(n.ai,n.ai,n.ai,n.ai),this.mercatorBoundsBuffer=o.createVertexBuffer(C,n.ba.members),this.mercatorBoundsSegments=n.b8.simpleSegment(0,0,4,2);const P=new n.aV;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(P);const L=new n.b6;for(const Z of[0,1,3,2,0])L.emplaceBack(Z);this.debugIndexBuffer=o.createIndexBuffer(L),this.emptyTexture=new n.T(o,new n.r({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA8),this.identityMat=n.ad.mat4.create();const j=this.context.gl;this.stencilClearMode=new Rr({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,o.TRIANGLES,ir.disabled,this.stencilClearMode,br.disabled,_r.disabled,Gc(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,c,A){if(!c||this.currentStencilSource===c.id||!o.isTileClipped()||!A||A.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let L=!1;for(const j of A)if(this._tileClippingMaskIDs[j.key]===void 0){L=!0;break}if(!L)return}this.currentStencilSource=c.id;const R=this.context,C=R.gl;this.nextStencilID+A.length>256&&this.clearStencil(),R.setColorMode(br.disabled),R.setDepthMode(ir.disabled);const P=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const L of A){const j=c.getTile(L),Z=this._tileClippingMaskIDs[L.key]=this.nextStencilID++,{tileBoundsBuffer:K,tileBoundsIndexBuffer:te,tileBoundsSegments:ae}=this.getTileBoundsBuffers(j);P.draw(this,C.TRIANGLES,ir.disabled,new Rr({func:C.ALWAYS,mask:0},Z,255,C.KEEP,C.KEEP,C.REPLACE),br.disabled,_r.disabled,Gc(L.projMatrix),"$clipping",K,te,ae)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,c=this.context.gl;return new Rr({func:c.NOTEQUAL,mask:255},o,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const c=this.context.gl;return new Rr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(o){const c=this.context.gl,A=o.sort((P,L)=>L.overscaledZ-P.overscaledZ),R=A[A.length-1].overscaledZ,C=A[0].overscaledZ-R+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const P={};for(let L=0;L<C;L++)P[L+R]=new Rr({func:c.GEQUAL,mask:255},L+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=C,[P,A]}return[{[R]:Rr.disabled},A]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new br([o.CONSTANT_COLOR,o.ONE,o.CONSTANT_COLOR,o.ONE],new n.al(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?br.unblended:br.alphaBlended}colorModeForDrapableLayerRenderPass(o){const c=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new br([c.ONE,c.ONE_MINUS_SRC_ALPHA,c.CONSTANT_ALPHA,c.ONE_MINUS_SRC_ALPHA],new n.al(0,0,0,o===void 0?0:o),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(o,c,A,R=!1){if(this.depthOcclusion)return new ir(this.context.gl.GREATER,ir.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!R)return ir.disabled;const C=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new ir(A||this.context.gl.LEQUAL,c,[C,C])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const o=this.context.gl,c=Math.ceil(this.width),A=Math.ceil(this.height),R=this.context.bindFramebuffer.get(),C=o.getParameter(o.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===c&&this.depthFBO.height===A||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),c!==0&&A!==0&&(this.depthFBO=new Fn(this.context,c,A,!1,"texture"),this.depthTexture=new n.T(this.context,{width:c,height:A,data:null},o.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(R),o.bindTexture(o.TEXTURE_2D,C),this.depthFBO&&(o.bindFramebuffer(o.READ_FRAMEBUFFER,null),o.bindFramebuffer(o.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),o.blitFramebuffer(0,0,c,A,0,0,c,A,o.DEPTH_BUFFER_BIT,o.NEAREST),o.bindFramebuffer(o.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((o,c)=>o+c/this._fpsHistory.length,0))}render(o,c){const A=n.q.now();this._dt=A-this._timeStamp,this._timeStamp=A,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=o.map.repaint,this.style=o,this.options=c;const R=this.style._mergedLayers,C=!(!this.terrain||!this.terrain.enabled),P=()=>this.style._getOrder(C).filter(Mt=>{const ia=R[Mt];return!(ia.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[ia.type]});let L=P(),j=!1,Z=!1;for(const Mt of L){const ia=R[Mt];ia.type==="circle"&&(j=!0),ia.type==="symbol"&&(ia.hasInitialOcclusionOpacityProperties?Z=!0:j=!0)}let K=L.map(Mt=>R[Mt]);const te=this.style._mergedSourceCaches;this.imageManager=o.imageManager,this.modelManager=o.modelManager,this.symbolFadeChange=o.placement.symbolFadeChange(n.q.now()),this.imageManager.beginFrame();let ae=0,ce=!1;for(const Mt in te){const ia=te[Mt];ia.used&&(ia.prepare(this.context),ia.getSource().usedInConflation&&++ae)}let Ce=!1;for(const Mt of K)Mt.isHidden(this.transform.zoom)||(Mt.type==="clip"&&(Ce=!0),this.prepareLayer(Mt));const Re={},Pe={},Ne={},Ge={},et={};for(const Mt in te){const ia=te[Mt];Re[Mt]=ia.getVisibleCoordinates(),Pe[Mt]=Re[Mt].slice().reverse(),Ne[Mt]=ia.getVisibleCoordinates(!0).reverse(),Ge[Mt]=ia.getShadowCasterCoordinates(),et[Mt]=ia.sortCoordinatesByDistance(Re[Mt])}const Xe=Mt=>{const ia=this.style.getLayerSourceCache(Mt);return ia&&ia.used?ia.getSource():null};if(ae||Ce||this._clippingActiveLastFrame){const Mt=[],ia=[];let Nt=0;for(const sa of K)this.isSourceForClippingOrConflation(sa,Xe(sa))&&(Mt.push(sa),ia.push(Nt)),Nt++;if(Mt&&(Ce||Mt.length>1)||this._clippingActiveLastFrame){Ce=!1;const sa=[];for(let Qt=0;Qt<Mt.length;Qt++){const da=Mt[Qt],$t=ia[Qt],pa=this.style.getLayerSourceCache(da);if(!pa||!pa.used||!pa.getSource().usedInConflation&&da.type!=="clip")continue;let Ia=n.dA,La=n.by.None;const Pa=[];let sr=!0;if(da.type==="clip"){Ia=$t;for(const Lr of da.layout.get("clip-layer-types"))La|=Lr==="model"?n.by.Model:Lr==="symbol"?n.by.Symbol:n.by.FillExtrusion;for(const Lr of da.layout.get("clip-layer-scope"))Pa.push(Lr);da.isHidden(this.transform.zoom)?sr=!1:Ce=!0}sr&&sa.push({layer:da.fqid,cache:pa,order:Ia,clipMask:La,clipScope:Pa})}this.replacementSource.setSources(sa),ce=!0}}this._clippingActiveLastFrame=Ce,ce||this.replacementSource.clear(),this.conflationActive=ce,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Mt=0;Mt<K.length;Mt++){const ia=K[Mt],Nt=ia.cutoffRange();if(this.longestCutoffRange=Math.max(Nt,this.longestCutoffRange),Nt>0){const sa=Xe(ia);sa&&(this.minCutoffZoom=Math.max(sa.minzoom,this.minCutoffZoom)),ia.minzoom&&(this.minCutoffZoom=Math.max(ia.minzoom,this.minCutoffZoom))}ia.is3D(C)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Mt),this._lastOcclusionLayer=Mt)}const ct=this.style&&this.style.fog;ct?(this._fogVisible=ct.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=ct.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Ne),this.opaquePassCutoff=0,L=P(),K=L.map(Mt=>R[Mt]));const nt=this._shadowRenderer;if(nt){nt.updateShadowParameters(this.transform,this.style.directionalLight);for(const Mt in te)for(const ia of Re[Mt]){let Nt={min:0,max:0};this.terrain&&(Nt=this.terrain.getMinMaxForTile(ia)||Nt),nt.addShadowReceiver(ia.toUnwrapped(),Nt.min,Nt.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new n.dz(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Kf(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const it=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),st=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(it&&!this._snow&&(this._snow=new Gh(this)),!it&&this._snow&&(this._snow.destroy(),delete this._snow),st&&!this._rain&&(this._rain=new fh(this)),!st&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!ea.has(this.context.gl))return;this.renderPass="offscreen";for(const Mt of K){const ia=o.getLayerSourceCache(Mt);if(!Mt.hasOffscreenPass()||Mt.isHidden(this.transform.zoom))continue;const Nt=ia?Pe[ia.id]:void 0;(Mt.type==="custom"||Mt.type==="raster"||Mt.type==="raster-particle"||Mt.isSky()||Nt&&Nt.length)&&this.renderLayer(this,ia,Mt,Nt)}this.depthRangeFor3D=[0,1-(K.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Ge)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const yt=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),wt=(()=>{if(c.showOverdrawInspector)return n.al.black;const Mt=this.style.fog;if(Mt&&this.transform.projection.supportsFog){const ia=this.style.getLut(Mt.scope);if(!yt){const Nt=Mt.properties.get("color-use-theme")==="none",sa=Mt.properties.get("color").toRenderColor(Nt?null:ia).toArray01();return new n.al(...sa)}if(yt){const Nt=Mt.properties.get("space-color-use-theme")==="none",sa=Mt.properties.get("space-color").toRenderColor(Nt?null:ia).toArray01();return new n.al(...sa)}}return n.al.transparent})();if(this.context.clear({color:wt,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&yt&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=L.length-1;this.currentLayer>=0;this.currentLayer--){const Mt=K[this.currentLayer],ia=o.getLayerSourceCache(Mt);if(Mt.isSky())continue;const Nt=ia?(Mt.is3D(C)?et:Pe)[ia.id]:void 0;this._renderTileClippingMasks(Mt,ia,Nt),this.renderLayer(this,ia,Mt,Nt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&yt&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||n.ag(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<L.length;this.currentLayer++){const Mt=K[this.currentLayer],ia=o.getLayerSourceCache(Mt);Mt.isSky()&&this.renderLayer(this,ia,Mt,ia?Pe[ia.id]:void 0)}function Yt(Mt,ia){let Nt;return ia&&(Nt=(Mt.type==="symbol"?Ne:Mt.is3D(C)?et:Pe)[ia.id]),Nt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<L.length;){const Mt=K[this.currentLayer];if(Mt.type==="raster"||Mt.type==="raster-particle"){const ia=o.getLayerSourceCache(Mt);this.renderLayer(this,ia,Mt,Yt(Mt,ia))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Lt=0;nt&&(Lt=nt.getShadowCastingLayerCount());let aa=!1,ua=-1;for(let Mt=0;Mt<L.length;++Mt){const ia=K[Mt];ia.isHidden(this.transform.zoom)||ia.is3D(C)&&(ua=Mt)}Z&&ua===-1&&(j=!0);let Sa=!1;for(;this.currentLayer<L.length;){const Mt=K[this.currentLayer],ia=o.getLayerSourceCache(Mt);if(Mt.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Mt)){if(Mt.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!Sa&&Mt.is3D(C)&&!C){const Nt=this.currentLayer,sa=Qt=>{for(this.currentLayer=0;this.currentLayer<K.length;this.currentLayer++){const da=K[this.currentLayer];if(Um[da.type]){const $t=this.style.getLayerSourceCache(da);Um[da.type](this,$t,da,Yt(da,$t),Qt)}}};sa("initialize"),sa("reset"),this.currentLayer=Nt,Sa=!0}if(j&&!aa&&this.terrain&&!this.transform.isOrthographic&&(aa=!0,this.blitDepth()),Z&&ua!==-1&&this.currentLayer===ua+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(Mt,ia,ia?Re[ia.id]:void 0),this.renderLayer(this,ia,Mt,Yt(Mt,ia)),!this.terrain&&nt&&Lt>0&&Mt.hasShadowPass()&&--Lt==0&&(nt.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Nt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Nt;this.currentLayer++){const sa=K[this.currentLayer];if(!sa.hasLightBeamPass())continue;const Qt=o.getLayerSourceCache(sa);this.renderLayer(this,Qt,sa,Qt?Pe[Qt.id]:void 0)}this.currentLayer=Nt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Nt=this.currentLayer;this.depthOcclusion=!0;for(const sa of this.layersWithOcclusionOpacity){this.currentLayer=sa;const Qt=K[this.currentLayer],da=o.getLayerSourceCache(Qt),$t=da?Pe[da.id]:void 0;this.terrain||this._renderTileClippingMasks(Qt,da,da?Re[da.id]:void 0),this.renderLayer(this,da,Qt,$t)}this.depthOcclusion=!1,this.currentLayer=Nt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Mt=null;K.forEach(ia=>{const Nt=o.getLayerSourceCache(ia);Nt&&!ia.isHidden(this.transform.zoom)&&Nt.getVisibleCoordinates().length&&(!Mt||Mt.getSource().maxzoom<Nt.getSource().maxzoom)&&(Mt=Nt)}),Mt&&this.options.showTileBoundaries&&ph.debug(this,Mt,Mt.getVisibleCoordinates(),n.al.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&ph.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new n.al(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Mt){const ia=Mt.transform.padding;kh(Mt,Mt.transform.height-(ia.top||0),3,qu),kh(Mt,ia.bottom||0,3,Im),qc(Mt,ia.left||0,3,Hf),qc(Mt,Mt.transform.width-(ia.right||0),3,Lm);const Nt=Mt.transform.centerPoint;(function(sa,Qt,da,$t){Hc(sa,Qt-1,da-10,2,20,$t),Hc(sa,Qt-10,da-1,20,2,$t)})(Mt,Nt.x,Mt.transform.height-Nt.y,ch)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),ce||(this.conflationActive=!1)}prepareLayer(o){this.gpuTimingStart(o);const{unsupportedLayers:c}=this.transform.projection,A=!c||!c.includes(o.type);if(Ld[o.type]&&(A||this.terrain&&o.type==="custom")){const R=this.style.getLayerSourceCache(o);Ld[o.type](o,R,this)}this.gpuTimingEnd()}renderLayer(o,c,A,R){A.isHidden(this.transform.zoom)||(A.type==="background"||A.type==="sky"||A.type==="custom"||A.type==="model"||A.type==="raster"||A.type==="raster-particle"||R&&R.length)&&(this.id=A.id,this.gpuTimingStart(A),o.transform.projection.unsupportedLayers&&o.transform.projection.unsupportedLayers.includes(A.type)&&(!o.terrain||A.type!=="custom")||A.type==="clip"||ph[A.type](o,c,A,R,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery,A=this.context.gl;let R=this.gpuTimers[o.id];R||(R=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:A.createQuery()}),R.calls++,A.beginQuery(c.TIME_ELAPSED_EXT,R.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,c=this.context.gl,A=c.createQuery();this.deferredRenderGpuTimeQueries.push(A),c.beginQuery(o.TIME_ELAPSED_EXT,A)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const c={};for(const A in o){const R=o[A],C=this.context.extTimerQuery,P=C.getQueryParameter(R.query,this.context.gl.QUERY_RESULT)/1e6;C.deleteQueryEXT(R.query),c[A]=P}return c}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.gl;let A=0;for(const R of o)A+=c.getQueryParameter(R,c.QUERY_RESULT)/1e6,c.deleteQuery(R);return A}translatePosMatrix(o,c,A,R,C){if(!A[0]&&!A[1])return o;const P=C?R==="map"?this.transform.angle:0:R==="viewport"?-this.transform.angle:0;if(P){const Z=Math.sin(P),K=Math.cos(P);A=[A[0]*K-A[1]*Z,A[0]*Z+A[1]*K]}const L=[C?A[0]:n.at(c,A[0],this.transform.zoom),C?A[1]:n.at(c,A[1],this.transform.zoom),0],j=new Float32Array(16);return n.ad.mat4.translate(j,o,L),j}saveTileTexture(o){const c=o.size[0],A=this._tileTextures[c];A?A.push(o):this._tileTextures[c]=[o]}getTileTexture(o){const c=this._tileTextures[o];return c&&c.length>0?c.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(o,c,A){const R=A===void 0?this.terrain&&this.terrain.renderingToTexture:A,C=[];return this.style&&this.style.enable3dLights()&&(o==="globeRaster"||o==="terrainRaster"?(C.push("LIGHTING_3D_MODE"),C.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):R||C.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||C.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(C.push("TERRAIN"),this.linearFloatFilteringSupported()&&C.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&C.push("GLOBE"),!this._fogVisible||R||c!==void 0&&!c||C.push("FOG","FOG_DITHERING"),R&&C.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&C.push("OVERDRAW_INSPECTOR"),C}getOrCreateProgram(o,c){this.cache=this.cache||{};const A=c&&c.defines||[],R=c&&c.config,C=this.currentGlobalDefines(o,c&&c.overrideFog,c&&c.overrideRtt).concat(A),P=Mm.cacheKey(Jo[o],o,C,R);return this.cache[P]||(this.cache[P]=new Mm(this.context,o,Jo[o],R,bi[o],C)),this.cache[P]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new n.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(o,c){if(this.style.enable3dLights()){const A=this.style.directionalLight,R=this.style.ambientLight;if(A&&R){const C=((P,L,j)=>{const Z=P.properties.get("direction"),K=P.properties.get("color-use-theme")==="none",te=P.properties.get("color").toRenderColor(K?null:j.getLut(P.scope)).toArray01(),ae=P.properties.get("intensity"),ce=L.properties.get("color-use-theme")==="none",Ce=L.properties.get("color").toRenderColor(ce?null:j.getLut(L.scope)).toArray01(),Re=L.properties.get("intensity"),Pe=[Z.x,Z.y,Z.z],Ne=n.cN(Ce,Re),Ge=n.cN(te,ae);return{u_lighting_ambient_color:Ne,u_lighting_directional_dir:Pe,u_lighting_directional_color:Ge,u_ground_radiance:Zc(Pe,Ge,Ne)}})(A,R,this.style);c.setLightsUniformValues(o,C)}}}uploadCommonUniforms(o,c,A,R,C){if(this.uploadCommonLightUniforms(o,c),this.terrain&&this.terrain.renderingToTexture)return;const P=this.style.fog;if(P){const L=P.getOpacity(this.transform.pitch),j=((Z,K,te,ae,ce,Ce,Re,Pe,Ne,Ge,et,Xe)=>{const ct=Z.transform,nt=K.properties.get("color-use-theme")==="none",it=K.properties.get("color").toRenderColor(nt?null:Z.style.getLut(K.scope)).toArray01();it[3]=ae;const st=Z.frameCounter/1e3%1,[yt,wt]=K.properties.get("vertical-range");return{u_fog_matrix:te?ct.calculateFogTileMatrix(te):Xe||Z.identityMat,u_fog_range:K.getFovAdjustedRange(ct._fov),u_fog_color:it,u_fog_horizon_blend:K.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(yt,wt),wt],u_fog_temporal_offset:st,u_frustum_tl:ce,u_frustum_tr:Ce,u_frustum_br:Re,u_frustum_bl:Pe,u_globe_pos:Ne,u_globe_radius:Ge,u_viewport:et,u_globe_transition:n.ag(ct.zoom),u_is_globe:+(ct.projection.name==="globe")}})(this,P,A,L,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*n.q.devicePixelRatio,this.transform.height*n.q.devicePixelRatio],R);c.setFogUniformValues(o,j)}C&&c.setCutoffUniformValues(o,C.uniformValues)}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,c=o.createTexture();return o.bindTexture(o.TEXTURE_2D,c),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,c=this._backgroundTiles={},A=this.transform.coveringTiles({tileSize:512});for(const R of A)c[R.key]=o[R.key]||new Gl(R,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(o,c){return!(!o.is3D(!(!this.terrain||!this.terrain.enabled))||o.type!=="clip"&&(o.minzoom&&o.minzoom>this.transform.zoom||(this.style._clipLayerPresent||o.sourceLayer!=="building")&&(!c||c.type!=="batched-model")))}isTileAffectedByFog(o){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let c=this._cachedTileFogOpacities[o.key];return c||(this._cachedTileFogOpacities[o.key]=c=this.style.fog.getOpacityForTile(o)),c[0]>=Ma||c[1]>=Ma}setupDepthForOcclusion(o,c,A){const R=this.context,C=R.gl,P=!!A;var L;A||(A={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),R.activeTexture.set(C.TEXTURE3),o&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),A.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],A.u_depth_range_unpack=[2/((L=this.depthRangeFor3D)[1]-L[0]),-1-2*L[0]/(L[1]-L[0])],A.u_occluder_half_size=.5*this.occlusionParams.occluderSize,A.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),R.activeTexture.set(C.TEXTURE0),P||c.setTerrainUniformValues(R,A)}}function km(g,o){let c=!1,A=null;const R=()=>{A=null,c&&(g(),A=setTimeout(R,o),c=!1)};return()=>(c=!0,A||R(),A)}class zy{constructor(o){this._hashName=o&&encodeURIComponent(o),n.aQ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=km(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const c=Gg(o);if(this._hashName){const A=this._hashName;let R=!1;const C=location.hash.slice(1).split("&").map(P=>{const L=P.split("=")[0];return L===A?(R=!0,`${L}=${c}`):P}).filter(P=>P);return R||C.push(`${A}=${c}`),`#${C.join("&")}`}return`#${c}`}_getCurrentHash(){const o=location.hash.replace("#","");if(this._hashName){let c;return o.split("&").map(A=>A.split("=")).forEach(A=>{A[0]===this._hashName&&(c=A)}),(c&&c[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(A=>isNaN(A))){const A=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(c[3]||0):o.getBearing();return o.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:A,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Gg(g,o){const c=g.getCenter(),A=Math.round(100*g.getZoom())/100,R=Math.ceil((A*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,R),P=Math.round(c.lng*C)/C,L=Math.round(c.lat*C)/C,j=g.getBearing(),Z=g.getPitch();let K=o?`/${P}/${L}/${A}`:`${A}/${L}/${P}`;return(j||Z)&&(K+="/"+Math.round(10*j)/10),Z&&(K+=`/${Math.round(Z)}`),K}const jp={linearity:.3,easing:n.dB(0,0,.3,1)},il=n.l({deceleration:2500,maxSpeed:1400},jp),fl=n.l({deceleration:20,maxSpeed:1400},jp),jg=n.l({deceleration:1e3,maxSpeed:360},jp),Zg=n.l({deceleration:1e3,maxSpeed:90},jp);class qg{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.q.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,c=n.q.now();for(;o.length>0&&c-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const c={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)c.zoom+=C.zoomDelta||0,c.bearing+=C.bearingDelta||0,c.pitch+=C.pitchDelta||0,C.panDelta&&c.pan._add(C.panDelta),C.around&&(c.around=C.around),C.pinchAround&&(c.pinchAround=C.pinchAround);const A=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,R={};if(c.pan.mag()){const C=qp(c.pan.mag(),A,n.l({},il,o||{}));R.offset=c.pan.mult(C.amount/c.pan.mag()),R.center=this._map.transform.center,Zp(R,C)}if(c.zoom){const C=qp(c.zoom,A,fl);R.zoom=this._map.transform.zoom+C.amount,Zp(R,C)}if(c.bearing){const C=qp(c.bearing,A,jg);R.bearing=this._map.transform.bearing+n.ay(C.amount,-179,179),Zp(R,C)}if(c.pitch){const C=qp(c.pitch,A,Zg);R.pitch=this._map.transform.pitch+C.amount,Zp(R,C)}if(R.zoom||R.bearing){const C=c.pinchAround===void 0?c.around:c.pinchAround;R.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),R.noMoveStart=!0,R}}function Zp(g,o){(!g.duration||g.duration<o.duration)&&(g.duration=o.duration,g.easing=o.easing)}function qp(g,o,c){const{maxSpeed:A,linearity:R,deceleration:C}=c,P=n.ay(g*R/(o/1e3),-A,A),L=Math.abs(P)/(C*R);return{easing:c.easing,duration:1e3*L,amount:P*(L/2)}}class pl extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,A,R={}){const C=Ae(c.getCanvasContainer(),A),P=c.unproject(C);super(o,n.l({point:C,lngLat:P,originalEvent:A},R)),this._defaultPrevented=!1,this.target=c}}class Qf extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,A){const R=o==="touchend"?A.changedTouches:A.touches,C=Te(c.getCanvasContainer(),R),P=C.map(j=>c.unproject(j)),L=C.reduce((j,Z,K,te)=>j.add(Z.div(te.length)),new n.P(0,0));super(o,{points:C,point:L,lngLats:P,lngLat:c.unproject(L),originalEvent:A}),this._defaultPrevented=!1}}class Hg extends n.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c){super("wheel",{originalEvent:c}),this._defaultPrevented=!1}}class $g{constructor(o,c){this._map=o,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new Hg(this._map,o))}mousedown(o,c){return this._mousedownPos=c,this._firePreventable(new pl(o.type,this._map,o))}mouseup(o){this._map.fire(new pl(o.type,this._map,o))}preclick(o){const c=n.l({},o);c.type="preclick",this._map.fire(new pl(c.type,this._map,c))}click(o,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(o),this._map.fire(new pl(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new pl(o.type,this._map,o))}mouseover(o){this._map.fire(new pl(o.type,this._map,o))}mouseout(o){this._map.fire(new pl(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Qf(o.type,this._map,o))}touchmove(o){this._map.fire(new Qf(o.type,this._map,o))}touchend(o){this._map.fire(new Qf(o.type,this._map,o))}touchcancel(o){this._map.fire(new Qf(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class C0{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new pl(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new pl(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kg{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,c){this.isEnabled()&&o.shiftKey&&o.button===0&&(ge(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(o,c){if(!this._active)return;const A=c,R=this._startPos,C=this._lastPos;if(!R||!C||C.equals(A)||!this._box&&A.dist(R)<this._clickTolerance)return;this._lastPos=A,this._box||(this._box=H("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const P=Math.min(R.x,A.x),L=Math.max(R.x,A.x),j=Math.min(R.y,A.y),Z=Math.max(R.y,A.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${P}px,${j}px)`,this._box.style.width=L-P+"px",this._box.style.height=Z-j+"px")})}mouseupWindow(o,c){if(!this._active)return;const A=this._startPos,R=c;if(A&&o.button===0){if(this.reset(),me(),A.x!==R.x||A.y!==R.y)return this._map.fire(new n.A("boxzoomend",{originalEvent:o})),{cameraAnimation:C=>C.fitScreenCoordinates(A,R,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),fe(),delete this._startPos,delete this._lastPos}_fireEvent(o,c){return this._map.fire(new n.A(o,{originalEvent:c}))}}function Oi(g,o){const c={};for(let A=0;A<g.length;A++)c[g[A].identifier]=o[A];return c}class Oy{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,c,A){(this.centroid||A.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),A.length===this.numTouches&&(this.centroid=function(R){const C=new n.P(0,0);for(const P of R)C._add(P);return C.div(R.length)}(c),this.touches=Oi(A,c)))}touchmove(o,c,A){if(this.aborted||!this.centroid)return;const R=Oi(A,c);for(const C in this.touches){const P=R[C];(!P||P.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(o,c,A){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),A.length===0){const R=!this.aborted&&this.centroid;if(this.reset(),R)return R}}}class Dy{constructor(o){this.singleTap=new Oy(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,c,A){this.singleTap.touchstart(o,c,A)}touchmove(o,c,A){this.singleTap.touchmove(o,c,A)}touchend(o,c,A){const R=this.singleTap.touchend(o,c,A);if(R){const C=o.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(R)<30;if(C&&P||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=R,this.count===this.numTaps)return this.reset(),R}}}class Wg{constructor(){this._zoomIn=new Dy({numTouches:1,numTaps:2}),this._zoomOut=new Dy({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,c,A){this._zoomIn.touchstart(o,c,A),this._zoomOut.touchstart(o,c,A)}touchmove(o,c,A){this._zoomIn.touchmove(o,c,A),this._zoomOut.touchmove(o,c,A)}touchend(o,c,A){const R=this._zoomIn.touchend(o,c,A),C=this._zoomOut.touchend(o,c,A);return R?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(R)},{originalEvent:o})}):C?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(C)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ep={0:1,2:2},Bm={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class Hp{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,c){return!1}_move(o,c){return{}}mousedown(o,c){if(this._lastPoint)return;const A=Oe(o);this._correctButton(o,A)&&(this._lastPoint=c,this._eventButton=A)}mousemoveWindow(o,c){const A=this._lastPoint;if(A){if(o.preventDefault(),this._eventButton!=null&&function(R,C){const P=ep[C];return R.buttons===void 0||(R.buttons&P)!==P}(o,this._eventButton))this.reset();else if(this._moved||!(c.dist(A)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(A,c)}}mouseupWindow(o){this._lastPoint&&Oe(o)===this._eventButton&&(this._moved&&me(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $p extends Hp{mousedown(o,c){super.mousedown(o,c),this._lastPoint&&(this._active=!0)}_correctButton(o,c){return c===0&&!o.ctrlKey}_move(o,c){return{around:c,panDelta:c.sub(o)}}}class Fd extends Hp{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?Bm[o.pitchRotateKey]:void 0}_correctButton(o,c){return this._pitchRotateKey?c===0&&o[this._pitchRotateKey]:c===0&&o.ctrlKey||c===2}_move(o,c){const A=.8*(c.x-o.x);if(A)return this._active=!0,{bearingDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class vc extends Hp{constructor(o){super(o),this._pitchRotateKey=o.pitchRotateKey?Bm[o.pitchRotateKey]:void 0}_correctButton(o,c){return this._pitchRotateKey?c===0&&o[this._pitchRotateKey]:c===0&&o.ctrlKey||c===2}_move(o,c){const A=-.5*(c.y-o.y);if(A)return this._active=!0,{pitchDelta:A}}contextmenu(o){this._pitchRotateKey||o.preventDefault()}}class ms{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),n.aQ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}touchstart(o,c,A){return this._calculateTransform(o,c,A)}touchmove(o,c,A){if(this._active&&!(A.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(A.length===1&&!n.dC())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,c,A)}}touchend(o,c,A){this._calculateTransform(o,c,A),this._active&&A.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,c,A){A.length>0&&(this._active=!0);const R=Oi(A,c),C=new n.P(0,0),P=new n.P(0,0);let L=0;for(const Z in R){const K=R[Z],te=this._touches[Z];te&&(C._add(K),P._add(K.sub(te)),L++,R[Z]=K)}if(this._touches=R,L<this._minTouches||!P.mag())return;const j=P.div(L);return this._sum._add(j),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(L),panDelta:j}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Xc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,c,A){return{}}touchstart(o,c,A){this._firstTwoTouches||A.length<2||(this._firstTwoTouches=[A[0].identifier,A[1].identifier],this._start([c[0],c[1]]))}touchmove(o,c,A){const R=this._firstTwoTouches;if(!R)return;o.preventDefault();const[C,P]=R,L=tp(A,c,C),j=tp(A,c,P);if(!L||!j)return;const Z=this._aroundCenter?null:L.add(j).div(2);return this._move([L,j],Z,o)}touchend(o,c,A){if(!this._firstTwoTouches)return;const[R,C]=this._firstTwoTouches,P=tp(A,c,R),L=tp(A,c,C);P&&L||(this._active&&me(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function tp(g,o,c){for(let A=0;A<g.length;A++)if(g[A].identifier===c)return o[A]}function ap(g,o){return Math.log(g/o)/Math.LN2}class wf extends Xc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,c){const A=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ap(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ap(this._distance,A),pinchAround:c}}}function mh(g,o){return 180*g.angleWith(o)/Math.PI}class Jc extends Xc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,c){const A=this._vector;if(this._vector=o[0].sub(o[1]),A&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:mh(this._vector,A),pinchAround:c}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const c=25/(Math.PI*this._minDiameter)*360,A=this._startVector;if(!A)return!1;const R=mh(o,A);return Math.abs(R)<c}}function Ud(g){return Math.abs(g.y)>Math.abs(g.x)}class Yg extends Xc{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,Ud(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,c,A){const R=this._lastPoints;if(!R)return;const C=o[0].sub(R[0]),P=o[1].sub(R[1]);return this._map._cooperativeGestures&&!n.dC()&&A.touches.length<3||(this._valid=this.gestureBeginsVertically(C,P,A.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(C.y+P.y)/2*-.5})}gestureBeginsVertically(o,c,A){if(this._valid!==void 0)return this._valid;const R=o.mag()>=2,C=c.mag()>=2;if(!R&&!C)return;if(!R||!C)return this._firstMove==null&&(this._firstMove=A),A-this._firstMove<100&&void 0;const P=o.y>0==c.y>0;return Ud(o)&&Ud(c)&&P}}const Gm={panStep:100,bearingStep:15,pitchStep:10};class rp{constructor(){const o=Gm;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let c=0,A=0,R=0,C=0,P=0;switch(o.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:o.shiftKey?A=-1:(o.preventDefault(),C=-1);break;case 39:o.shiftKey?A=1:(o.preventDefault(),C=1);break;case 38:o.shiftKey?R=1:(o.preventDefault(),P=-1);break;case 40:o.shiftKey?R=-1:(o.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(A=0,R=0),{cameraAnimation:L=>{const j=L.getZoom();L.easeTo({duration:300,easeId:"keyboardHandler",easing:Rf,zoom:c?Math.round(j)+c*(o.shiftKey?2:1):j,bearing:L.getBearing()+A*this._bearingStep,pitch:L.getPitch()+R*this._pitchStep,offset:[-C*this._panStep,-P*this._panStep],center:L.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Rf(g){return g*(2-g)}const wc=4.000244140625,$s=1/450;class $u{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._handler=c,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=$s,n.aQ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||n.dC()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const A=n.q.now(),R=A-(this._lastWheelEventTime||0);this._lastWheelEventTime=A,c!==0&&c%wc==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":R>400?(this._type=null,this._lastValue=c,this._timeout=window.setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(R*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),o.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=o,this._delta-=c,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=Ae(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const Z=this._type==="wheel"&&Math.abs(this._delta)>wc?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*Z)));this._delta<0&&K!==0&&(K=1/K);const te=c(),ae=Math.pow(2,te),ce=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):ae;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(ce*K))),this._type==="wheel"&&(this._startZoom=te,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const A=typeof this._targetZoom=="number"?this._targetZoom:c(),R=this._startZoom,C=this._easing;let P,L=!1;if(this._type==="wheel"&&R&&C){const Z=Math.min((n.q.now()-this._lastWheelEventTime)/200,1),K=C(Z);P=n.ah(R,A,K),Z<1?this._frameId||(this._frameId=!0):L=!0}else P=A,L=!0;this._active=!0,L&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let j=P-c();return j*this._lastDelta<0&&(j=0),{noInertia:!0,needsRenderFrame:!L,zoomDelta:j,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let c=n.dD;if(this._prevEase){const A=this._prevEase,R=(n.q.now()-A.start)/A.duration,C=A.easing(R+.01)-A.easing(R),P=.27/Math.sqrt(C*C+1e-4)*.01,L=Math.sqrt(.0729-P*P);c=n.dB(P,L,.25,1)}return this._prevEase={start:n.q.now(),duration:o,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=H("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class jh{constructor(o,c){this._clickZoom=o,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ku{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,c){return o.preventDefault(),{cameraAnimation:A=>{A.easeTo({duration:300,zoom:A.getZoom()+(o.shiftKey?-1:1),around:A.unproject(c)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yh{constructor(){this._tap=new Dy({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,c,A){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?A.length>0&&(this._swipePoint=c[0],this._swipeTouch=A[0].identifier):this._tap.touchstart(o,c,A))}touchmove(o,c,A){if(this._tapTime){if(this._swipePoint){if(A[0].identifier!==this._swipeTouch)return;const R=c[0],C=R.y-this._swipePoint.y;return this._swipePoint=R,o.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(o,c,A)}touchend(o,c,A){this._tapTime?this._swipePoint&&A.length===0&&this.reset():this._tap.touchend(o,c,A)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xg{constructor(o,c,A){this._el=o,this._mousePan=c,this._touchPan=A}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Tf{constructor(o,c,A){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=c,this._mousePitch=A}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Sf{constructor(o,c,A,R){this._el=o,this._touchZoom=c,this._touchRotate=A,this._tapDragZoom=R,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Cf=g=>g.zoom||g.drag||g.pitch||g.rotate;class My extends n.A{}class ml{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,c){const A=n.ad.vec3.sub([],c,o);this.radius=n.ad.vec3.length(A[2]<0?n.ad.vec3.div([],A,this.constants):[A[0],A[1],0])}projectRay(o){n.ad.vec3.div(o,o,this.constants),n.ad.vec3.normalize(o,o),n.ad.vec3.mul(o,o,this.constants);const c=n.ad.vec3.scale([],o,this.radius);if(c[2]>0){const A=n.ad.vec3.scale([],[0,0,1],n.ad.vec3.dot(c,[0,0,1])),R=n.ad.vec3.scale([],n.ad.vec3.normalize([],[c[0],c[1],0]),this.radius),C=n.ad.vec3.add([],c,n.ad.vec3.scale([],n.ad.vec3.sub([],n.ad.vec3.add([],R,A),c),2));c[0]=C[0],c[1]=C[1]}return c}}function gh(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Kp{constructor(o,c){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qg(o),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ml,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),n.aQ(["handleEvent","handleWindowEvent"],this);const A=this._el;this._listeners=[[A,"touchstart",{passive:!0}],[A,"touchmove",{passive:!1}],[A,"touchend",void 0],[A,"touchcancel",void 0],[A,"mousedown",void 0],[A,"mousemove",void 0],[A,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[A,"mouseover",void 0],[A,"mouseout",void 0],[A,"dblclick",void 0],[A,"click",void 0],[A,"keydown",{capture:!1}],[A,"keyup",void 0],[A,"wheel",{passive:!1}],[A,"contextmenu",void 0],[window,"blur",void 0]];for(const[R,C,P]of this._listeners){const L=R===document?this.handleWindowEvent:this.handleEvent;R.addEventListener(C,L,P)}}destroy(){for(const[o,c,A]of this._listeners){const R=o===document?this.handleWindowEvent:this.handleEvent;o.removeEventListener(c,R,A)}}_addDefaultHandlers(o){const c=this._map,A=c.getCanvasContainer();this._add("mapEvent",new $g(c,o));const R=c.boxZoom=new Kg(c,o);this._add("boxZoom",R);const C=new Wg,P=new Ku;c.doubleClickZoom=new jh(P,C),this._add("tapZoom",C),this._add("clickZoom",P);const L=new yh;this._add("tapDragZoom",L);const j=c.touchPitch=new Yg(c);this._add("touchPitch",j);const Z=new Fd(o),K=new vc(o);c.dragRotate=new Tf(o,Z,K),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",K,["mouseRotate"]);const te=new $p(o),ae=new ms(c,o);c.dragPan=new Xg(A,te,ae),this._add("mousePan",te),this._add("touchPan",ae,["touchZoom","touchRotate"]);const ce=new Jc,Ce=new wf;c.touchZoomRotate=new Sf(A,Ce,ce,L),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",Ce,["touchPan","touchRotate"]),this._add("blockableMapEvent",new C0(c));const Re=c.scrollZoom=new $u(c,this);this._add("scrollZoom",Re,["mousePan"]);const Pe=c.keyboard=new rp;this._add("keyboard",Pe);for(const Ne of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[Ne]&&c[Ne].enable(o[Ne])}_add(o,c,A){this._handlers.push({handlerName:o,handler:c,allowed:A}),this._handlersById[o]=c}stop(o){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Cf(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,c,A){for(const R in o)if(R!==A&&(!c||c.indexOf(R)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const c=[];for(const A of o)this._el.contains(A.target)&&c.push(A);return c}handleEvent(o,c){this._updatingCamera=!0;const A=o.type==="renderFrame",R=A?void 0:o,C={needsRenderFrame:!1},P={},L={},j=o.touches?this._getMapTouches(o.touches):void 0,Z=j?Te(this._el,j):A?void 0:Ae(this._el,o);for(const{handlerName:ae,handler:ce,allowed:Ce}of this._handlers){if(!ce.isEnabled())continue;let Re;this._blockedByActive(L,Ce,ae)?ce.reset():ce[c||o.type]&&(Re=ce[c||o.type](o,Z,j),this.mergeHandlerResult(C,P,Re,ae,R),Re&&Re.needsRenderFrame&&this._triggerRenderFrame()),(Re||ce.isActive())&&(L[ae]=ce)}const K={};for(const ae in this._previousActiveHandlers)L[ae]||(K[ae]=R);this._previousActiveHandlers=L,(Object.keys(K).length||gh(C))&&(this._changes.push([C,P,K]),this._triggerRenderFrame()),(Object.keys(L).length||gh(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=C;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(o,c,A,R,C){if(!A)return;n.l(o,A);const P={handlerName:R,originalEvent:A.originalEvent||C};A.zoomDelta!==void 0&&(c.zoom=P),A.panDelta!==void 0&&(c.drag=P),A.pitchDelta!==void 0&&(c.pitch=P),A.bearingDelta!==void 0&&(c.rotate=P)}_applyChanges(){const o={},c={},A={};for(const[R,C,P]of this._changes)R.panDelta&&(o.panDelta=(o.panDelta||new n.P(0,0))._add(R.panDelta)),R.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+R.zoomDelta),R.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+R.bearingDelta),R.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+R.pitchDelta),R.around!==void 0&&(o.around=R.around),R.aroundCoord!==void 0&&(o.aroundCoord=R.aroundCoord),R.pinchAround!==void 0&&(o.pinchAround=R.pinchAround),R.noInertia&&(o.noInertia=R.noInertia),n.l(c,C),n.l(A,P);this._updateMapTransform(o,c,A),this._changes=[]}_updateMapTransform(o,c,A){const R=this._map,C=R.transform,P=Ge=>[Ge.x,Ge.y,Ge.z];if((Ge=>{const et=this._eventsInProgress.drag;return et&&!this._handlersById[et.handlerName].isActive()})()&&!gh(o)){const Ge=C.zoom;C.cameraElevationReference="sea",this._originalZoom!=null&&C._orthographicProjectionAtLowPitch&&C.projection.name!=="globe"&&C.pitch===0?(C.cameraElevationReference="ground",C.zoom=this._originalZoom):(C.recenterOnTerrain(),C.cameraElevationReference="ground"),Ge!==C.zoom&&this._map._update(!0)}if(C._isCameraConstrained&&R._stop(!0),!gh(o))return void this._fireEvents(c,A,!0);let{panDelta:L,zoomDelta:j,bearingDelta:Z,pitchDelta:K,around:te,aroundCoord:ae,pinchAround:ce}=o;C._isCameraConstrained&&(j>0&&(j=0),C._isCameraConstrained=!1),ce!==void 0&&(te=ce),(j||(Ge=>c[Ge]&&!this._eventsInProgress[Ge])("drag"))&&te&&(this._dragOrigin=P(C.pointCoordinate3D(te)),this._originalZoom=C.zoom,this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",R._stop(!0),te=te||R.transform.centerPoint,Z&&(C.bearing+=Z),K&&(C.pitch+=K),C._updateCameraState();const Ce=[0,0,0];if(L)if(C.projection.name==="mercator"){const Ge=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(te).dir),et=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(te.sub(L)).dir);Ce[0]=et[0]-Ge[0],Ce[1]=et[1]-Ge[1]}else{const Ge=C.pointCoordinate(te);if(C.projection.name==="globe"){L=L.rotate(-C.angle);const et=C._pixelsPerMercatorPixel/C.worldSize;Ce[0]=-L.x*n.dE(n.aT(Ge.y))*et,Ce[1]=-L.y*n.dE(C.center.lat)*et}else{const et=C.pointCoordinate(te.sub(L));Ge&&et&&(Ce[0]=et.x-Ge.x,Ce[1]=et.y-Ge.y)}}const Re=C.zoom,Pe=[0,0,0];if(j){const Ge=P(ae||C.pointCoordinate3D(te)),et={dir:n.ad.vec3.normalize([],n.ad.vec3.sub([],Ge,C._camera.position))};if(et.dir[2]<0){const Xe=C.zoomDeltaToMovement(Ge,j);n.ad.vec3.scale(Pe,et.dir,Xe)}}const Ne=n.ad.vec3.add(Ce,Ce,Pe);C._translateCameraConstrained(Ne),j&&Math.abs(C.zoom-Re)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(c,A,!0)}_fireEvents(o,c,A){const R=Cf(this._eventsInProgress),C=Cf(o),P={};for(const K in o){const{originalEvent:te}=o[K];this._eventsInProgress[K]||(P[`${K}start`]=te),this._eventsInProgress[K]=o[K]}!R&&C&&this._fireEvent("movestart",C.originalEvent);for(const K in P)this._fireEvent(K,P[K]);C&&this._fireEvent("move",C.originalEvent);for(const K in o){const{originalEvent:te}=o[K];this._fireEvent(K,te)}const L={};let j;for(const K in this._eventsInProgress){const{handlerName:te,originalEvent:ae}=this._eventsInProgress[K];this._handlersById[te].isActive()||(delete this._eventsInProgress[K],j=c[te]||ae,L[`${K}end`]=j)}for(const K in L)this._fireEvent(K,L[K]);const Z=Cf(this._eventsInProgress);if(A&&(R||C)&&!Z){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ae=>ae!==0&&-this._bearingSnap<ae&&ae<this._bearingSnap;K?(te(K.bearing||this._map.getBearing())&&(K.bearing=0),this._map.easeTo(K,{originalEvent:j})):(this._map.fire(new n.A("moveend",{originalEvent:j})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,c){this._map.fire(new n.A(o,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new My("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Jg="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class np extends n.E{constructor(o,c){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,this._respectPrefersReducedMotion=c.respectPrefersReducedMotion!==!1,n.aQ(["_renderFrameCallback"],this)}getCenter(){return new n.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(o,c){return this.jumpTo({center:o},c)}panBy(o,c,A){return o=n.P.convert(o).mult(-1),this.panTo(this.transform.center,n.l({offset:o},c),A)}panTo(o,c,A){return this.easeTo(n.l({center:o},c),A)}getZoom(){return this.transform.zoom}setZoom(o,c){return this.jumpTo({zoom:o},c),this}zoomTo(o,c,A){return this.easeTo(n.l({zoom:o},c),A)}zoomIn(o,c){return this.zoomTo(this.getZoom()+1,o,c),this}zoomOut(o,c){return this.zoomTo(this.getZoom()-1,o,c),this}getBearing(){return this.transform.bearing}setBearing(o,c){return this.jumpTo({bearing:o},c),this}getPadding(){return this.transform.padding}setPadding(o,c){return this.jumpTo({padding:o},c),this}rotateTo(o,c,A){return this.easeTo(n.l({bearing:o},c),A)}resetNorth(o,c){return this.rotateTo(0,n.l({duration:1e3},o),c),this}resetNorthPitch(o,c){return this.easeTo(n.l({bearing:0,pitch:0,duration:1e3},o),c),this}snapToNorth(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this}getPitch(){return this.transform.pitch}setPitch(o,c){return this.jumpTo({pitch:o},c),this}cameraForBounds(o,c){o=n.aB.convert(o);const A=c&&c.bearing||0,R=c&&c.pitch||0,C=o.getNorthWest(),P=o.getSouthEast();return this._cameraForBounds(this.transform,C,P,A,R,c)}_extendPadding(o){const c={top:0,right:0,bottom:0,left:0};return o==null?n.l({},c,this.transform.padding):typeof o=="number"?{top:o,bottom:o,right:o,left:o}:n.l({},c,o)}_extendCameraOptions(o){return(o=n.l({offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=this._extendPadding(o.padding),o}_minimumAABBFrustumDistance(o,c){const A=c.max[0]-c.min[0],R=c.max[1]-c.min[1];return A/R>o.aspect?A/(2*Math.tan(.5*o.fovX)*o.aspect):R/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,c,A,R,C,P){const L=o.clone(),j=this._extendCameraOptions(P);L.bearing=R,L.pitch=C;const Z=n.bO.convert(c),K=n.bO.convert(A),te=.5*(Z.lat+K.lat),ae=.5*(Z.lng+K.lng),ce=n.dF(te,ae),Ce=n.ad.vec3.normalize([],ce),Re=n.ad.vec3.normalize([],n.ad.vec3.cross([],Ce,[0,1,0])),Pe=n.ad.vec3.cross([],Re,Ce),Ne=[Re[0],Re[1],Re[2],0,Pe[0],Pe[1],Pe[2],0,Ce[0],Ce[1],Ce[2],0,0,0,0,1],Ge=[ce,n.dF(Z.lat,Z.lng),n.dF(K.lat,Z.lng),n.dF(K.lat,K.lng),n.dF(Z.lat,K.lng),n.dF(te,Z.lng),n.dF(te,K.lng),n.dF(Z.lat,ae),n.dF(K.lat,ae)];let et=n.ce.fromPoints(Ge.map(Qt=>[n.ad.vec3.dot(Re,Qt),n.ad.vec3.dot(Pe,Qt),n.ad.vec3.dot(Ce,Qt)]));const Xe=n.ad.vec3.transformMat4([],et.center,Ne);n.ad.vec3.squaredLength(Xe)===0&&n.ad.vec3.set(Xe,0,0,1),n.ad.vec3.normalize(Xe,Xe),n.ad.vec3.scale(Xe,Xe,n.az),L.center=n.dG(Xe);const ct=L.getWorldToCameraMatrix(),nt=n.ad.mat4.invert(new Float64Array(16),ct);et=n.ce.applyTransform(et,n.ad.mat4.multiply([],ct,Ne));const it=this._extendAABB(et,L,j,R);if(!it)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");et=it,n.ad.vec3.transformMat4(Xe,Xe,ct);const st=.5*(et.max[2]-et.min[2]),yt=this._minimumAABBFrustumDistance(L,et),wt=n.ad.vec3.scale([],[0,0,1],st),Yt=n.ad.vec3.add(wt,Xe,wt),Lt=yt+(L.pitch===0?0:n.ad.vec3.distance(Xe,Yt)),aa=L.globeCenterInViewSpace,ua=n.ad.vec3.sub([],Xe,[aa[0],aa[1],aa[2]]);n.ad.vec3.normalize(ua,ua),n.ad.vec3.scale(ua,ua,Lt);const Sa=n.ad.vec3.add([],Xe,ua);n.ad.vec3.transformMat4(Sa,Sa,nt);const Mt=n.dv/n.az,ia=n.ad.vec3.length(Sa),Nt=n.bH(Math.max(ia*Mt-n.dv,Number.EPSILON),0),sa=Math.min(L.zoomFromMercatorZAdjusted(Nt),j.maxZoom);return sa>.5*(n.c6+n.bY)?(L.setProjection({name:"mercator"}),L.zoom=sa,this._cameraForBounds(L,c,A,R,C,P)):{center:L.center,zoom:sa,bearing:R,pitch:C}}_extendAABB(o,c,A,R){const C=.5*((A.padding.left||0)+(A.padding.right||0)),P=.5*((A.padding.top||0)+(A.padding.bottom||0)),L=P,j=C,Z=C,K=P,te=c.width-(j+Z),ae=c.height-(L+K),ce=n.ad.vec3.sub([],o.max,o.min),Ce=Math.min(te/ce[0],ae/ce[1]),Re=Math.min(c.scaleZoom(c.scale*Ce),A.maxZoom);if(isNaN(Re))return null;const Pe=c.scale/c.zoomScale(Re),Ne=new n.ce([o.min[0]-j*Pe,o.min[1]-K*Pe,o.min[2]],[o.max[0]+Z*Pe,o.max[1]+L*Pe,o.max[2]]),Ge=(typeof A.offset.x=="number"&&typeof A.offset.y=="number"?new n.P(A.offset.x,A.offset.y):n.P.convert(A.offset)).rotate(-n.ak(R));return Ne.center[0]-=Ge.x*Pe,Ne.center[1]+=Ge.y*Pe,Ne}queryTerrainElevation(o,c){const A=this.transform.elevation;return A?(c=n.l({},{exaggerated:!0},c),A.getAtPoint(n.ac.fromLngLat(o),null,c.exaggerated)):null}_cameraForBounds(o,c,A,R,C,P){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,c,A,R,C,P);const L=o.clone(),j=this._extendCameraOptions(P);L.bearing=R,L.pitch=C;const Z=n.bO.convert(c),K=n.bO.convert(A),te=new n.bO(Z.lng,K.lat),ae=new n.bO(K.lng,Z.lat),ce=L.project(Z),Ce=L.project(K),Re=this.queryTerrainElevation(Z),Pe=this.queryTerrainElevation(K),Ne=this.queryTerrainElevation(te),Ge=this.queryTerrainElevation(ae),et=[[ce.x,ce.y,Math.min(Re||0,Pe||0,Ne||0,Ge||0)],[Ce.x,Ce.y,Math.max(Re||0,Pe||0,Ne||0,Ge||0)]];let Xe=n.ce.fromPoints(et);const ct=L.getWorldToCameraMatrix(),nt=n.ad.mat4.invert(new Float64Array(16),ct);Xe=n.ce.applyTransform(Xe,ct);const it=this._extendAABB(Xe,L,j,R);if(!it)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Xe=it;const st=.5*n.ad.vec3.sub([],Xe.max,Xe.min)[2],yt=this._minimumAABBFrustumDistance(L,Xe),wt=[0,0,1,0];n.ad.vec4.transformMat4(wt,wt,ct),n.ad.vec4.normalize(wt,wt);const Yt=n.ad.vec3.scale([],wt,yt+st),Lt=n.ad.vec3.add([],Xe.center,Yt);n.ad.vec3.transformMat4(Xe.center,Xe.center,nt),n.ad.vec3.transformMat4(Lt,Lt,nt);const aa=L.unproject(new n.P(Xe.center[0],Xe.center[1])),ua=n.dH(L.projection,aa),Sa=Math.pow(2,ua),Mt=Math.min(L._zoomFromMercatorZ(Lt[2]*L.pixelsPerMeter*Sa/L.worldSize),j.maxZoom);return L.mercatorFromTransition&&Mt<.5*(n.c6+n.bY)?(L.setProjection({name:"globe"}),L.zoom=Mt,this._cameraForBounds(L,c,A,R,C,P)):{center:aa,zoom:Mt,bearing:R,pitch:C}}fitBounds(o,c,A){const R=this.cameraForBounds(o,c);return this._fitInternal(R,c,A)}fitScreenCoordinates(o,c,A,R,C){const P=n.P.convert(o),L=n.P.convert(c),j=new n.P(Math.min(P.x,L.x),Math.min(P.y,L.y)),Z=new n.P(Math.max(P.x,L.x),Math.max(P.y,L.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(P,L))return this;const K=this.transform.pointLocation3D(j),te=this.transform.pointLocation3D(Z),ae=this.transform.pointLocation3D(new n.P(j.x,Z.y)),ce=this.transform.pointLocation3D(new n.P(Z.x,j.y)),Ce=[Math.min(K.lng,te.lng,ae.lng,ce.lng),Math.min(K.lat,te.lat,ae.lat,ce.lat)],Re=[Math.max(K.lng,te.lng,ae.lng,ce.lng),Math.max(K.lat,te.lat,ae.lat,ce.lat)],Pe=R&&R.pitch?R.pitch:this.getPitch(),Ne=this._cameraForBounds(this.transform,Ce,Re,A,Pe,R);return this._fitInternal(Ne,R,C)}_fitInternal(o,c,A){return o?(c=n.l(o,c)).linear?this.easeTo(c,A):this.flyTo(c,A):this}jumpTo(o,c){this.stop();const A=o.preloadOnly?this.transform.clone():this.transform;let R=!1,C=!1,P=!1;"zoom"in o&&A.zoom!==+o.zoom&&(R=!0,A.zoom=+o.zoom),o.center!==void 0&&(A.center=n.bO.convert(o.center)),"bearing"in o&&A.bearing!==+o.bearing&&(C=!0,A.bearing=+o.bearing),"pitch"in o&&A.pitch!==+o.pitch&&(P=!0,A.pitch=+o.pitch);const L=typeof o.padding=="number"?this._extendPadding(o.padding):o.padding;if(o.padding!=null&&!A.isPaddingEqual(L))if(o.retainPadding===!1){const j=A.clone();j.padding=L,A.setLocationAtPoint(A.center,j.centerPoint)}else A.padding=L;return o.preloadOnly?(this._preloadTiles(A),this):(this.fire(new n.A("movestart",c)).fire(new n.A("move",c)),R&&this.fire(new n.A("zoomstart",c)).fire(new n.A("zoom",c)).fire(new n.A("zoomend",c)),C&&this.fire(new n.A("rotatestart",c)).fire(new n.A("rotate",c)).fire(new n.A("rotateend",c)),P&&this.fire(new n.A("pitchstart",c)).fire(new n.A("pitch",c)).fire(new n.A("pitchend",c)),this.fire(new n.A("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||n.w(Jg),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,c){const A=this.transform;if(!A.projection.supportsFreeCamera)return n.w(Jg),this;this.stop();const R=A.zoom,C=A.pitch,P=A.bearing;A.setFreeCameraOptions(o);const L=R!==A.zoom,j=C!==A.pitch,Z=P!==A.bearing;return this.fire(new n.A("movestart",c)).fire(new n.A("move",c)),L&&this.fire(new n.A("zoomstart",c)).fire(new n.A("zoom",c)).fire(new n.A("zoomend",c)),Z&&this.fire(new n.A("rotatestart",c)).fire(new n.A("rotate",c)).fire(new n.A("rotateend",c)),j&&this.fire(new n.A("pitchstart",c)).fire(new n.A("pitch",c)).fire(new n.A("pitchend",c)),this.fire(new n.A("moveend",c)),this}easeTo(o,c){this._stop(!1,o.easeId),((o=n.l({offset:[0,0],duration:500,easing:n.dD},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const A=this.transform,R=this.getZoom(),C=this.getBearing(),P=this.getPitch(),L=this.getPadding(),j="zoom"in o?+o.zoom:R,Z="bearing"in o?this._normalizeBearing(o.bearing,C):C,K="pitch"in o?+o.pitch:P,te=this._extendPadding(o.padding),ae=n.P.convert(o.offset);let ce,Ce,Re;if(A.projection.name==="globe"){const wt=n.ac.fromLngLat(A.center),Yt=ae.rotate(-A.angle);wt.x+=Yt.x/A.worldSize,wt.y+=Yt.y/A.worldSize;const Lt=wt.toLngLat(),aa=n.bO.convert(o.center||Lt);this._normalizeCenter(aa),ce=A.centerPoint.add(Yt),Ce=new n.P(wt.x,wt.y).mult(A.worldSize),Re=new n.P(n.av(aa.lng),n.aC(aa.lat)).mult(A.worldSize).sub(Ce)}else{ce=A.centerPoint.add(ae);const wt=A.pointLocation(ce),Yt=n.bO.convert(o.center||wt);this._normalizeCenter(Yt),Ce=A.project(wt),Re=A.project(Yt).sub(Ce)}const Pe=A.zoomScale(j-R);let Ne,Ge;o.around&&(Ne=n.bO.convert(o.around),Ge=A.locationPoint(Ne));const et=this._zooming||j!==R,Xe=this._rotating||C!==Z,ct=this._pitching||K!==P,nt=!A.isPaddingEqual(te),it=o.retainPadding===!1?A.clone():A,st=wt=>Yt=>{if(et&&(wt.zoom=n.ah(R,j,Yt)),Xe&&(wt.bearing=n.ah(C,Z,Yt)),ct&&(wt.pitch=n.ah(P,K,Yt)),nt&&(it.interpolatePadding(L,te,Yt),ce=it.centerPoint.add(ae)),Ne)wt.setLocationAtPoint(Ne,Ge);else{const Lt=wt.zoomScale(wt.zoom-R),aa=j>R?Math.min(2,Pe):Math.max(.5,Pe),ua=Math.pow(aa,1-Yt),Sa=wt.unproject(Ce.add(Re.mult(Yt*ua)).mult(Lt));wt.setLocationAtPoint(wt.renderWorldCopies?Sa.wrap():Sa,ce)}return o.preloadOnly||this._fireMoveEvents(c),wt};if(o.preloadOnly){const wt=this._emulate(st,o.duration,A);return this._preloadTiles(wt),this}const yt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=et,this._rotating=Xe,this._pitching=ct,this._padding=nt,this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,yt),this._ease(st(A),wt=>{A.cameraElevationReference==="sea"&&A.recenterOnTerrain(),this._afterEase(c,wt)},o),this}_prepareEase(o,c,A={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),c||A.moving||this.fire(new n.A("movestart",o)),this._zooming&&!A.zooming&&this.fire(new n.A("zoomstart",o)),this._rotating&&!A.rotating&&this.fire(new n.A("rotatestart",o)),this._pitching&&!A.pitching&&this.fire(new n.A("pitchstart",o))}_fireMoveEvents(o){this.fire(new n.A("move",o)),this._zooming&&this.fire(new n.A("zoom",o)),this._rotating&&this.fire(new n.A("rotate",o)),this._pitching&&this.fire(new n.A("pitch",o))}_afterEase(o,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const A=this._zooming,R=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,A&&this.fire(new n.A("zoomend",o)),R&&this.fire(new n.A("rotateend",o)),C&&this.fire(new n.A("pitchend",o)),this.fire(new n.A("moveend",o))}flyTo(o,c){if(this._prefersReducedMotion(o)){const Qt=n.aA(o,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(Qt,c)}this.stop(),o=n.l({offset:[0,0],speed:1.2,curve:1.42,easing:n.dD},o);const A=this.transform,R=this.getZoom(),C=this.getBearing(),P=this.getPitch(),L=this.getPadding(),j="zoom"in o?n.ay(+o.zoom,A.minZoom,A.maxZoom):R,Z="bearing"in o?this._normalizeBearing(o.bearing,C):C,K="pitch"in o?+o.pitch:P,te=this._extendPadding(o.padding),ae=A.zoomScale(j-R),ce=n.P.convert(o.offset);let Ce=A.centerPoint.add(ce);const Re=A.pointLocation(Ce),Pe=n.bO.convert(o.center||Re);this._normalizeCenter(Pe);const Ne=A.project(Re),Ge=A.project(Pe).sub(Ne);let et=o.curve;const Xe=Math.max(A.width,A.height),ct=Xe/ae,nt=Ge.mag();if("minZoom"in o){const Qt=n.ay(Math.min(o.minZoom,R,j),A.minZoom,A.maxZoom),da=Xe/A.zoomScale(Qt-R);et=Math.sqrt(da/nt*2)}const it=et*et;function st(Qt){const da=(ct*ct-Xe*Xe+(Qt?-1:1)*it*it*nt*nt)/(2*(Qt?ct:Xe)*it*nt);return Math.log(Math.sqrt(da*da+1)-da)}function yt(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function wt(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const Yt=st(0);let Lt=function(Qt){return wt(Yt)/wt(Yt+et*Qt)},aa=function(Qt){return Xe*((wt(Yt)*(yt(da=Yt+et*Qt)/wt(da))-yt(Yt))/it)/nt;var da},ua=(st(1)-Yt)/et;if(Math.abs(nt)<1e-6||!isFinite(ua)){if(Math.abs(Xe-ct)<1e-6)return this.easeTo(o,c);const Qt=ct<Xe?-1:1;ua=Math.abs(Math.log(ct/Xe))/et,aa=function(){return 0},Lt=function(da){return Math.exp(Qt*et*da)}}o.duration="duration"in o?+o.duration:1e3*ua/("screenSpeed"in o?+o.screenSpeed/et:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const Sa=C!==Z,Mt=K!==P,ia=!A.isPaddingEqual(te),Nt=o.retainPadding===!1?A.clone():A,sa=Qt=>da=>{const $t=da*ua,pa=1/Lt($t);Qt.zoom=da===1?j:R+Qt.scaleZoom(pa),Sa&&(Qt.bearing=n.ah(C,Z,da)),Mt&&(Qt.pitch=n.ah(P,K,da)),ia&&(Nt.interpolatePadding(L,te,da),Ce=Nt.centerPoint.add(ce));const Ia=da===1?Pe:Qt.unproject(Ne.add(Ge.mult(aa($t))).mult(pa));return Qt.setLocationAtPoint(Qt.renderWorldCopies?Ia.wrap():Ia,Ce),Qt._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(c),Qt};if(o.preloadOnly){const Qt=this._emulate(sa,o.duration,A);return this._preloadTiles(Qt),this}return this._zooming=!0,this._rotating=Sa,this._pitching=Mt,this._padding=ia,this._prepareEase(c,!1),this._ease(sa(A),()=>this._afterEase(c),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(o){}_cancelRenderFrame(o){}_stop(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const A=this._onEaseEnd;this._onEaseEnd=void 0,A.call(this,c)}if(!o){const A=this.handlers;A&&A.stop(!1)}return this}_ease(o,c,A){A.animate===!1||A.duration===0?(o(1),c()):(this._easeStart=n.q.now(),this._easeOptions=A,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((n.q.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,c){o=n.bF(o,-180,180);const A=Math.abs(o-c);return Math.abs(o-360-c)<A&&(o-=360),Math.abs(o+360-c)<A&&(o+=360),o}_normalizeCenter(o){const c=this.transform;if(c.maxBounds||c.projection.name!=="globe"&&!c.renderWorldCopies)return;const A=o.lng-c.center.lng;o.lng+=A>180?-360:A<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&n.q.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,c,A){const R=Math.ceil(15*c/1e3),C=[],P=o(A.clone());for(let L=0;L<=R;L++){const j=P(L/R);C.push(j.clone())}return C}_preloadTiles(o,c){}}class bf{constructor(o={}){this.options=o,n.aQ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const c=this.options&&this.options.compact,A=o._getUIString("AttributionControl.ToggleAttribution");this._map=o,this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=H("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",A);const R=H("span","mapboxgl-ctrl-icon",this._compactButton);return R.setAttribute("aria-hidden","true"),R.setAttribute("title",A),this._innerContainer=H("div","mapboxgl-ctrl-attrib-inner",this._container),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.e.ACCESS_TOKEN}];if(o){const A=c.reduce((R,C,P)=>(C.value&&(R+=`${C.key}=${C.value}${P<c.length-1?"&":""}`),R),"?");o.href=`${n.e.FEEDBACK_URL}/${A}#${Gg(this._map,!0)}`,o.rel="noopener nofollow"}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const R=this._map.style.stylesheet;this.styleOwner=R.owner,this.styleId=R.id}const c=this._map.style._mergedSourceCaches;for(const R in c){const C=c[R];if(C.used){const P=C.getSource();P.attribution&&o.indexOf(P.attribution)<0&&o.push(P.attribution)}}o.sort((R,C)=>R.length-C.length),o=o.filter((R,C)=>{for(let P=C+1;P<o.length;P++)if(o[P].indexOf(R)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const A=o.join(" | ");A!==this._attribHTML&&(this._attribHTML=A,o.length?(this._innerContainer.innerHTML=A,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Bo{constructor(){n.aQ(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=H("div","mapboxgl-ctrl");const c=H("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const c in o){const A=o[c].getSource();if(A.hasOwnProperty("mapbox_logo")&&!A.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const c=o[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class Wu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const c=++this._id;return this._queue.push({callback:o,id:c,cancelled:!1}),c}remove(o){const c=this._currentlyRunning,A=c?this._queue.concat(c):this._queue;for(const R of A)if(R.id===o)return void(R.cancelled=!0)}run(o=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const A of c)if(!A.cancelled&&(A.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class ip{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const c=n.cC((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,c,A){this._start=this.getValue(c),this._end=o,this._startTime=c,this._endTime=c+A}}const Rc={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class sl extends n.A{constructor(o,c,A,R){const{point:C,lngLat:P,originalEvent:L,target:j}=o;super(o.type,{point:C,lngLat:P,originalEvent:L,target:j}),this.preventDefault=()=>{o.preventDefault()},this.id=c,this.interaction=A,this.feature=R}}class Iy{constructor(o){this.map=o,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(o,c){if(this.typeById.has(o))throw new Error(`Interaction id "${o}" already exists.`);const A=c.filter;let R=c.type;A&&this.filters.set(o,n.a_(A)),R==="mouseover"&&(R="mouseenter"),R==="mouseout"&&(R="mouseleave");const C=this.interactionsByType.get(R)||new Map;R==="mouseenter"||R==="mouseleave"?(this.delegatedInteractions.size===0&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(o,c)):C.size===0&&this.map.on(R,this.handleType),C.size===0&&this.interactionsByType.set(R,C),C.set(o,c),this.typeById.set(o,R)}get(o){const c=this.typeById.get(o);if(!c)return;const A=this.interactionsByType.get(c);return A?A.get(o):void 0}remove(o){const c=this.typeById.get(o);if(!c)return;this.typeById.delete(o),this.filters.delete(o);const A=this.interactionsByType.get(c);A&&(A.delete(o),c==="mouseenter"||c==="mouseleave"?(this.delegatedInteractions.delete(o),this.delegatedInteractions.size===0&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):A.size===0&&this.map.off(c,this.handleType))}queryTargets(o,c){const A=[];for(const[R,C]of c)C.target&&A.push({targetId:R,target:C.target,filter:this.filters.get(R)});return this.map.style.queryRenderedTargets(o,A,this.map.transform)}handleMove(o){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const c=this.queryTargets(o.point,Array.from(this.delegatedInteractions).reverse());c.length&&(o.type="mouseenter",this.handleType(o,c));const A=new Map;for(const[R,{feature:C}]of this.prevHoveredFeatures)this.hoveredFeatures.has(R)||A.set(C.id,C);A.size&&(o.type="mouseleave",this.handleType(o,Array.from(A.values())))}handleOut(o){const c=Array.from(this.hoveredFeatures.values()).map(({feature:A})=>A);c.length&&(o.type="mouseleave",this.handleType(o,c)),this.hoveredFeatures.clear()}handleType(o,c){const A=Array.from(this.interactionsByType.get(o.type)).reverse(),R=!!c;c=c||this.queryTargets(o.point,A);const C=o.type==="mouseenter";let P=!1;const L=new Set;for(const j of c){for(const[Z,K]of A){if(!K.target)continue;const te=j.variants?j.variants[Z]:null;if(te){for(const ae of te){if(Nc(ae,j,L,Z))continue;const ce=new n.cx(j,ae),Ce=yd(ae,j,Z);R&&(ce.state=this.map.getFeatureState(ce));const Re=C?this.prevHoveredFeatures.get(Ce):null,Pe=new sl(o,Z,K,ce),Ne=Re?Re.stop:K.handler(Pe);if(C&&this.hoveredFeatures.set(Ce,{feature:j,stop:Ne}),Ne!==!1){P=!0;break}}if(P)break}}if(P)break}if(!P)for(const[j,Z]of A){const{handler:K,target:te}=Z;if(!te&&K(new sl(o,j,Z,null))!==!1)break}}}function Ln(g,o){if(Array.isArray(g)&&Array.isArray(o)){const c=new Set(g),A=new Set(o);return c.size===A.size&&g.every(R=>A.has(R))}return n.bn(g,o)}const Zh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},Qg={showCompass:!0,showZoom:!0,visualizePitch:!1};class eA{constructor(o,c,A=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new Fd({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,A&&(this.mousePitch=new vc({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),n.aQ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(o,c){this.mouseRotate.mousedown(o,c),this.mousePitch&&this.mousePitch.mousedown(o,c),ge()}move(o,c){const A=this.map,R=this.mouseRotate.mousemoveWindow(o,c),C=R&&R.bearingDelta;if(C&&A.setBearing(A.getBearing()+C),this.mousePitch){const P=this.mousePitch.mousemoveWindow(o,c),L=P&&P.pitchDelta;L&&A.setPitch(A.getPitch()+L)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){fe(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(n.l({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),Ae(this.element,o)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,Ae(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Te(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=Te(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function sp(g,o,c){if(g=new n.bO(g.lng,g.lat),o){const A=new n.bO(g.lng-360,g.lat),R=new n.bO(g.lng+360,g.lat),C=360*Math.ceil(Math.abs(g.lng-c.center.lng)/360),P=c.locationPoint3D(g).distSqr(o),L=o.x<0||o.y<0||o.x>c.width||o.y>c.height;c.locationPoint3D(A).distSqr(o)<P&&(L||Math.abs(A.lng-c.center.lng)<C)?g=A:c.locationPoint3D(R).distSqr(o)<P&&(L||Math.abs(R.lng-c.center.lng)<C)&&(g=R)}for(;Math.abs(g.lng-c.center.lng)>180;){const A=c.locationPoint3D(g);if(A.x>=0&&A.y>=0&&A.x<=c.width&&A.y<=c.height)break;g.lng>c.center.lng?g.lng-=360:g.lng+=360}return g}const yl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},xi={anchor:"center",color:"#3FB1CE",scale:1,draggable:!1,clickTolerance:0,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class Go extends n.E{constructor(o,c){super(),(o instanceof HTMLElement||c)&&(o=n.l({element:o},c)),n.aQ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),o=n.l({},xi,o),this._anchor=o.anchor,this._color=o.color,this._scale=o.scale,this._draggable=o.draggable,this._clickTolerance=o.clickTolerance,this._rotation=o.rotation,this._rotationAlignment=o.rotationAlignment,this._pitchAlignment=o.pitchAlignment,this._occludedOpacity=o.occludedOpacity,this._altitude=o.altitude,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),o&&o.element?(this._element=o.element,this._offset=n.P.convert(o&&o.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=n.P.convert(o&&o.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",C=>{C.preventDefault()}),this._element.addEventListener("mousedown",C=>{C.preventDefault()});const A=this._element.classList;for(const C in yl)A.remove(`mapboxgl-marker-anchor-${C}`);A.add(`mapboxgl-marker-anchor-${this._anchor}`);const R=o&&o.className?o.className.trim().split(/\s+/):[];A.add(...R),this._popup=null}_createDefaultMarker(){const o=H("div"),c=$("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},o);if(this._altitude===0){const A=$("radialGradient",{id:"shadowGradient"},$("defs",{},c));$("stop",{offset:"10%","stop-opacity":.4},A),$("stop",{offset:"100%","stop-opacity":.05},A),$("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c)}return $("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),$("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),$("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=n.bO.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(o){return o===this._altitude||(this._defaultMarker&&(this._altitude===0&&o!==0||this._altitude!==0&&o===0)&&(this._element=this._createDefaultMarker()),this._altitude=o||xi.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const R=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[R,-1*(38.1-13.5+R)],"bottom-right":[-R,-1*(38.1-13.5+R)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,o._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const c=o.code,A=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&A!==32&&A!==13||this.togglePopup()}_onMapClick(o){const c=o.originalEvent.target,A=this._element;this._popup&&(c===A||A.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,c=this._pos;if(!o||!c)return!1;const A=o.unproject(c,this._altitude),R=o.getFreeCameraOptions();if(!R.position)return!1;const C=R.position.toLngLat();return C.distanceTo(A)<.9*C.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const c=this._pos;if(!c||c.x<0||c.x>o.transform.width||c.y<0||c.y>o.transform.height)return void this._clearFadeTimer();const A=o.unproject(c,this._altitude);let R;o._showingGlobe()&&n.dK(o.transform,this._lngLat)?R=0:(R=1-o._queryFogOpacity(A),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(R*=this._occludedOpacity)),this._element.style.opacity=`${R}`,this._element.style.pointerEvents=R>0?"auto":"none",this._popup&&this._popup._setOpacity(R),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${yl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const o=this._pos,c=this._map,A=this.getPitchAlignment();if(!c||!o||A!=="map")return"";if(!c._showingGlobe()){const j=c.getPitch();return j?`rotateX(${j}deg)`:""}const R=n.c4(n.dL(c.transform,this._lngLat)),C=o.sub(n.dM(c.transform)),P=Math.abs(C.x)+Math.abs(C.y);if(P===0)return"";const L=R/P;return`rotateX(${-C.y*L}deg) rotateY(${C.x*L}deg)`}_calculateZTransform(){const o=this._pos,c=this._map;if(!c||!o)return"";let A=0;const R=this.getRotationAlignment();if(R==="map")if(c._showingGlobe()){const C=c.project(new n.bO(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),P=c.project(new n.bO(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(C);A=n.c4(Math.atan2(P.y,P.x))-90}else A=-c.getBearing();else if(R==="horizon"){const C=n.ae(4,6,c.getZoom()),P=n.dM(c.transform);P.y+=C*c.transform.height;const L=o.sub(P),j=n.c4(Math.atan2(L.y,L.x));A=(j>90?j-270:j+90)*(1-C)}return A+=this._rotation,A?`rotateZ(${A}deg)`:""}_update(o){cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=sp(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat,this._altitude),o===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=n.P.convert(o),this._update(),this}addClassName(o){return this._element.classList.add(o),this}removeClassName(o){return this._element.classList.remove(o),this}toggleClassName(o){return this._element.classList.toggle(o)}_onMove(o){const c=this._map;if(!c)return;const A=this._pointerdownPos,R=this._positionDelta;if(A&&R){if(!this._isDragging){const C=this._clickTolerance||c._clickTolerance;if(o.point.dist(A)<C)return;this._isDragging=!0}this._pos=o.point.sub(R),this._lngLat=c.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.A("dragstart"))),this.fire(new n.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new n.A("dragend")),this._state="inactive"}_addDragHandler(o){const c=this._map,A=this._pos;c&&A&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(A),this._pointerdownPos=o.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const c=this._map;return c&&(o?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||xi.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||xi.rotationAlignment,this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||xi.pitchAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||xi.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Pu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},wi={maxWidth:100,unit:"metric"},Ly={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Eu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},tA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function qh(g=new n.P(0,0),o="bottom"){if(typeof g=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(o){case"top":return new n.P(0,g);case"top-left":return new n.P(c,c);case"top-right":return new n.P(-c,c);case"bottom":return new n.P(0,-g);case"bottom-left":return new n.P(c,-c);case"bottom-right":return new n.P(-c,-c);case"left":return new n.P(g,0);case"right":return new n.P(-g,0)}return new n.P(0,0)}return g instanceof n.P||Array.isArray(g)?n.P.convert(g):n.P.convert(g[o]||[0,0])}return{version:w,supported:q.supported,setRTLTextPlugin:n.dN,getRTLTextPluginStatus:n.dO,Map:class extends np{constructor(g){E.mark(T.create);const o=g;if((g=n.l({},Zh,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&n.dI(window)&&(g.antialias=!1,n.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Td(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies,null,null),g),this._repaint=!!g.repaint,this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new Wu,this._domRenderTaskQueue=new Wu,this._controls=[],this._markers=[],this._popups=[],this._mapId=n.aW(),this._locale=n.l({},Rc,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._tessellationStep=g.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=g.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ip(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=g.scaleFactor,this._requestManager=new Ve(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,this._contextCreateOptions=g.contextCreateOptions?Object.assign({},g.contextCreateOptions):{},typeof g.container=="string"){const c=document.getElementById(g.container);if(!c)throw new Error(`Container '${g.container.toString()}' not found.`);this._container=c}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&n.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),this._spriteFormat=g.spriteFormat,n.aQ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new bu),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Kp(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,(g.style||!g.testMode)&&this.setStyle(g.style||n.e.DEFAULT_STYLE,{config:g.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),this.indoor=new Dc(this),g.hash&&(this._hash=new zy(typeof g.hash=="string"&&g.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){o.center==null&&o.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch});const c=g.bounds;c&&(this.resize(),this.fitBounds(c,n.l({},g.fitBoundsOptions,{duration:0})))}this.resize(),g.attributionControl&&this.addControl(new bf({customAttribution:g.customAttribution})),this._logoControl=new Bo,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new n.A(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new n.A(`${c.dataType}dataloading`,c))}),this._interactions=new Iy(this)}_getMapId(){return this._mapId}addControl(g,o){if(o===void 0&&(o=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new n.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=g.onAdd(this);this._controls.push(g);const A=this._controlPositions[o];return o.indexOf("bottom")!==-1?A.insertBefore(c,A.firstChild):A.appendChild(c),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new n.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(g);return o>-1&&this._controls.splice(o,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new n.A("movestart",g)).fire(new n.A("move",g)),this.fire(new n.A("resize",g)),o&&this.fire(new n.A("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(n.aB.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new n.A("zoomstart")).fire(new n.A("zoom")).fire(new n.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new n.A("pitchstart")).fire(new n.A("pitch")).fire(new n.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(g){return this._scaleFactor=g,this.painter.scaleFactor=g,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(o=>o.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(o=>o==="auto"?navigator.language:o):g}setLanguage(g){const o=this._parseLanguage(g);if(!this.style||o===this._language)return this;this._language=o,this.style.reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,o=g.projection.name;let c;o==="globe"&&g.zoom>=n.bY?(g.setMercatorFromTransition(),c=!0):o==="mercator"&&g.zoom<n.bY&&(g.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,o){return this._updateProjection(g||o||{name:"mercator"})}_updateProjection(g){let o;return o=g.name==="globe"&&this.transform.zoom>=n.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),o&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(g,o){return this.transform.locationPoint3D(n.bO.convert(g),o)}unproject(g,o){return this.transform.pointLocation3D(n.P.convert(g),o)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,o,c){const A=R=>{let C=[];if(Array.isArray(o)){const P=o.filter(L=>this.getLayer(L));C=P.length?this.queryRenderedFeatures(R,{layers:P}):[]}else C=this.queryRenderedFeatures(R,{target:o});return C};if(g==="mouseenter"||g==="mouseover"){let R=!1;return{listener:c,targets:o,delegates:{mousemove:P=>{const L=A(P.point);L.length?R||(R=!0,c.call(this,new pl(g,this,P.originalEvent,{features:L}))):R=!1},mouseout:()=>{R=!1}}}}if(g==="mouseleave"||g==="mouseout"){let R=!1;return{listener:c,targets:o,delegates:{mousemove:L=>{A(L.point).length?R=!0:R&&(R=!1,c.call(this,new pl(g,this,L.originalEvent)))},mouseout:L=>{R&&(R=!1,c.call(this,new pl(g,this,L.originalEvent)))}}}}{const R=C=>{const P=A(C.point);P.length&&(C.features=P,c.call(this,C),delete C.features)};return{listener:c,targets:o,delegates:{[g]:R}}}}on(g,o,c){if(typeof o=="function"||c===void 0)return super.on(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(g,o,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(A);for(const R in A.delegates)this.on(R,A.delegates[R]);return this}once(g,o,c){if(typeof o=="function"||c===void 0)return super.once(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._createDelegatedListener(g,o,c);for(const R in A.delegates)this.once(R,A.delegates[R]);return this}off(g,o,c){if(typeof o=="function"||c===void 0)return super.off(g,o);if(typeof o=="string"&&(o=[o]),!this._areTargetsValid(o))return this;const A=this._delegatedListeners?this._delegatedListeners[g]:void 0;return A&&(R=>{for(let C=0;C<R.length;C++){const P=R[C];if(P.listener===c&&Ln(P.targets,o)){for(const L in P.delegates)this.off(L,P.delegates[L]);return R.splice(C,1),this}}})(A),this}queryRenderedFeatures(g,o){if(!this.style)return[];if(g===void 0||g instanceof n.P||Array.isArray(g)||o!==void 0||(o=g,g=void 0),g=g||[[0,0],[this.transform.width,this.transform.height]],!o){const C=this.style.queryRenderedFeatures(g,void 0,this.transform),P=this.style.queryRenderedFeatureset(g,void 0,this.transform);return C.concat(P)}let c=!0;if(o.target&&(c=this._isTargetValid(o.target),c&&!o.layers))return this.style.queryRenderedFeatureset(g,o,this.transform);let A=!0;if(o.layers&&Array.isArray(o.layers)){for(const C of o.layers)if(!this._isValidId(C)){A=!1;break}if(A&&!o.target)return this.style.queryRenderedFeatures(g,o,this.transform)}let R=[];return A&&(R=R.concat(this.style.queryRenderedFeatures(g,o,this.transform))),c&&(R=R.concat(this.style.queryRenderedFeatureset(g,o,this.transform))),R}querySourceFeatures(g,o){return!g||typeof g=="string"&&!this._isValidId(g)?[]:this.style.querySourceFeatures(g,o)}isPointOnSurface(g){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&n.w(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(n.P.convert(g))}addInteraction(g,o){return this._interactions.add(g,o),this}removeInteraction(g){return this._interactions.remove(g),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(g){return this._cooperativeGestures=g,this}setStyle(g,o){return o=n.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o),this.style&&g&&o.diff!==!1&&o.localFontFamily===this._localFontFamily&&o.localIdeographFontFamily===this._localIdeographFontFamily&&!o.config?(this.style._diffStyle(g,(c,A)=>{c?(n.w(`Unable to perform style diff: ${String(c.message||c.error||c)}. Rebuilding the style from scratch.`),this._updateStyle(g,o)):A&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(g,o))}_getUIString(g){const o=this._locale[g];if(o==null)throw new Error(`Missing UI string '${g}'`);return o}_updateStyle(g,o){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g){const c=n.l({},o);o&&o.config&&(c.initialConfig=o.config,delete c.config),this.style=new Qs(this,c).load(g),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Qs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(n.w("There is no style added to the map."),!1)}_isValidId(g){return g==null?(this.fire(new n.z(new Error("IDs can't be empty."))),!1):!n.cs(g)||(this.fire(new n.z(new Error(`IDs can't contain special symbols: "${g}".`))),!1)}_isTargetValid(g){return"featuresetId"in g?this._isValidId("importId"in g?g.importId:g.featuresetId):"layerId"in g&&this._isValidId(g.layerId)}_areTargetsValid(g){if(Array.isArray(g)){for(const o of g)if(!this._isValidId(o))return!1;return!0}return this._isTargetValid(g)}addSource(g,o){return this._isValidId(g)?(this._lazyInitEmptyStyle(),this.style.addSource(g,o),this._update(!0)):this}isSourceLoaded(g){return!!this._isValidId(g)&&!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(g,o,c){this._lazyInitEmptyStyle(),this.style.addSourceType(g,o,c)}removeSource(g){return this._isValidId(g)?(this.style.removeSource(g),this._updateTerrain(),this._update(!0)):this}getSource(g){return this._isValidId(g)?this.style.getOwnSource(g):null}addImage(g,o,{pixelRatio:c=1,sdf:A=!1,stretchX:R,stretchY:C,content:P}={}){this._lazyInitEmptyStyle();const L=n.I.from(g);if(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap){const{width:j,height:Z,data:K}=n.q.getImageData(o);this.style.addImage(L,{data:new n.r({width:j,height:Z},K),pixelRatio:c,stretchX:R,stretchY:C,content:P,sdf:A,version:0,usvg:!1})}else if(o.width===void 0||o.height===void 0)this.fire(new n.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:j,height:Z}=o,K=o;this.style.addImage(L,{data:new n.r({width:j,height:Z},new Uint8Array(K.data)),pixelRatio:c,stretchX:R,stretchY:C,content:P,sdf:A,usvg:!1,version:0,userImage:K}),K.onAdd&&K.onAdd(this,g)}}updateImage(g,o){this._lazyInitEmptyStyle();const c=n.I.from(g),A=this.style.getImage(c);if(!A)return void this.fire(new n.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const R=o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap?n.q.getImageData(o):o,{width:C,height:P,data:L}=R;if(C===void 0||P===void 0)return void this.fire(new n.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==(A.usvg?A.icon.usvg_tree.width:A.data.width)||P!==(A.usvg?A.icon.usvg_tree.height:A.data.height))return void this.fire(new n.z(new Error(`The width and height of the updated image (${C}, ${P})
                must be that same as the previous version of the image
                (${A.data.width}, ${A.data.height})`)));const j=!(o instanceof HTMLImageElement||ImageBitmap&&o instanceof ImageBitmap);let Z=!1;A.usvg?(A.data=new n.r({width:C,height:P},new Uint8Array(L)),A.usvg=!1,A.icon=void 0,Z=!0):A.data.replace(L,j),this.style.updateImage(c,A,Z)}hasImage(g){return g?!!this.style&&!!this.style.getImage(n.I.from(g)):(this.fire(new n.z(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(n.I.from(g))}loadImage(g,o){n.o(this._requestManager.transformRequest(g,n.R.Image),(c,A)=>{o(c,A instanceof HTMLImageElement?n.q.getImageData(A):A)})}listImages(){return this.style.listImages().map(g=>g.name)}addModel(g,o){this._lazyInitEmptyStyle(),this.style.addModel(g,o)}hasModel(g){return g?this.style.hasModel(g):(this.fire(new n.z(new Error("Missing required model id"))),!1)}removeModel(g){this.style.removeModel(g)}listModels(){return this.style.listModels()}addLayer(g,o){return this._isValidId(g.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(g,o),this._update(!0)):this}getSlot(g){const o=this.getLayer(g);return o&&o.slot||null}setSlot(g,o){return this.style.setSlot(g,o),this.style.mergeLayers(),this._update(!0)}addImport(g,o){return this.style.addImport(g,o),this}updateImport(g,o){return typeof o!="string"&&o.id!==g?(this.removeImport(g),this.addImport(o)):(this.style.updateImport(g,o),this._update(!0))}removeImport(g){return this.style.removeImport(g),this}moveImport(g,o){return this.style.moveImport(g,o),this._update(!0)}moveLayer(g,o){return this._isValidId(g)?(this.style.moveLayer(g,o),this._update(!0)):this}removeLayer(g){return this._isValidId(g)?(this.style.removeLayer(g),this._update(!0)):this}getLayer(g){if(!this._isValidId(g))return null;const o=this.style.getOwnLayer(g);return o?o.type==="custom"?o.implementation:o.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(g,o,c){return this._isValidId(g)?(this.style.setLayerZoomRange(g,o,c),this._update(!0)):this}setFilter(g,o,c={}){return this._isValidId(g)?(this.style.setFilter(g,o,c),this._update(!0)):this}getFilter(g){return this._isValidId(g)?this.style.getFilter(g):null}setPaintProperty(g,o,c,A={}){return this._isValidId(g)?(this.style.setPaintProperty(g,o,c,A),this._update(!0)):this}getPaintProperty(g,o){return this._isValidId(g)?this.style.getPaintProperty(g,o):null}setLayoutProperty(g,o,c,A={}){return this._isValidId(g)?(this.style.setLayoutProperty(g,o,c,A),this._update(!0)):this}getLayoutProperty(g,o){return this._isValidId(g)?this.style.getLayoutProperty(g,o):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(g){return this.style.setGlyphsUrl(g),this._update(!0)}getSchema(g){return this.style.getSchema(g)}setSchema(g,o){return this.style.setSchema(g,o),this._update(!0)}getConfig(g){return this.style.getConfig(g)}setConfig(g,o){return this.style.setConfig(g,o),this._update(!0)}getConfigProperty(g,o){return this.style.getConfigProperty(g,o)}setConfigProperty(g,o,c){return this.style.setConfigProperty(g,o,c),this._update(!0)}getFeaturesetDescriptors(g){return this.style.getFeaturesetDescriptors(g)}setLights(g){if(this._lazyInitEmptyStyle(),g&&g.length===1&&g[0].type==="flat"){const o=g[0];o.properties?this.style.setFlatLight(o.properties,o.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(g),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const g=this.style.getLights()||[];return g.length===0&&g.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),g}setLight(g,o={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:g}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(g){return this._lazyInitEmptyStyle(),this.style.setSnow(g),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(g){return this._lazyInitEmptyStyle(),this.style.setRain(g),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(g){return this._lazyInitEmptyStyle(),this.style.setColorTheme(g),this._update(!0)}setImportColorTheme(g,o){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(g,o),this._update(!0)}setCamera(g){return this.style.setCamera(g),this._triggerCameraUpdate(g)}_triggerCameraUpdate(g){return this._update(this.transform.setOrthographicProjectionAtLowPitch(g["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(n.bO.convert(g),this.transform):0}setFeatureState(g,o){return g.source&&!this._isValidId(g.source)?this:(this.style.setFeatureState(g,o),this._update())}removeFeatureState(g,o){return g.source&&!this._isValidId(g.source)?this:(this.style.removeFeatureState(g,o),this._update())}getFeatureState(g){return g.source&&!this._isValidId(g.source)?null:this.style.getFeatureState(g)}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let c,A,R,C=this._container;for(;C&&(!A||!R);){const P=window.getComputedStyle(C).transform;P&&P!=="none"&&(c=P.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(A=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(R=c[3])),C=C.parentElement}this._containerWidth=A?Math.abs(g/A):g,this._containerHeight=R?Math.abs(o/R):o}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&n.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=H("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=H("div","mapboxgl-canvas-container",g);this._canvas=H("canvas","mapboxgl-canvas",o),this._interactive&&(o.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=H("div","mapboxgl-control-container",g),A=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(R=>{A[R]=H("div",`mapboxgl-ctrl-${R}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,o){const c=n.q.devicePixelRatio||1;this._canvas.width=c*Math.ceil(g),this._canvas.height=c*Math.ceil(o),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${o}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const o=this._markers.indexOf(g);o!==-1&&this._markers.splice(o,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const o=this._popups.indexOf(g);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const g=n.l({},q.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl2",g);o?(Kt(o,!0),this.painter=new Gp(o,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",c=>{c.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),n.m.testSupport(o)):this.fire(new n.z(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.A("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style.reloadModels(),this.style.clearSources(),this._update(),this.fire(new n.A("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let o;this.fire(new n.A("renderstart")),++this._frameId;const c=this.painter.context.extTimerQuery,A=n.q.now(),R=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(o=R.createQuery(),R.beginQuery(c.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const C=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const Z=this.transform.zoom,K=this.transform.pitch,te=n.q.now(),ae=new n.aa(Z,{now:te,fadeDuration:C,pitch:K,transition:this.style.transition});this.style.update(ae)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let P=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),P=this._updateAverageElevation(A),this.style.updateSources(this.transform),this.isMoving()||this._forceMarkerAndPopupUpdate()):P=this._updateAverageElevation(A);const L=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),L&&(this._placementDirty=L.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new n.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,E.mark(T.load),this.fire(new n.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const Z=n.q.now()-A;R.endQuery(c.TIME_ELAPSED_EXT),setTimeout(()=>{const K=R.getQueryParameter(o,R.QUERY_RESULT)/1e6;R.deleteQuery(o),this.fire(new n.A("gpu-timing-frame",{cpuTime:Z,gpuTime:K}))},50)}if(this.listens("gpu-timing-layer")){const Z=this.painter.collectGpuTimers();setTimeout(()=>{const K=this.painter.queryGpuTimers(Z);this.fire(new n.A("gpu-timing-layer",{layerTimes:K}))},50)}if(this.listens("gpu-timing-deferred-render")){const Z=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const K=this.painter.queryGpuTimeDeferredRender(Z);this.fire(new n.A("gpu-timing-deferred-render",{gpuTime:K}))},50)}const j=this._sourcesDirty||this._styleDirty||this._placementDirty||P;if(j||this._repaint)this.triggerRepaint();else{const Z=this.idle();if(Z&&(P=this._updateAverageElevation(A,!0)),P)this.triggerRepaint();else if(this._triggerFrame(!1),Z&&(this.fire(new n.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const K=this._calculateSpeedIndex();this.fire(new n.A("speedindexcompleted",{speedIndex:K})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||j||(this._fullyLoaded=!0,E.mark(T.fullLoad),this._performanceMetricsCollection&&dt(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const o of this._markers)g&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!g||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(g,o=!1){const c=R=>(this.transform.averageElevation=R,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);const A=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(A||(o||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const R=this.transform.averageElevation;let C=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(C)?C=0:this._averageElevationLastSampledAt=g;const P=Math.abs(R-C);if(P>1){if(this._isInitialLoad||A)return this._averageElevation.jumpTo(C),c(C);this._averageElevation.easeTo(C,g,300)}else if(P>1e-4)return this._averageElevation.jumpTo(C),c(C)}return!!this._averageElevation.isEasing(g)&&c(this._averageElevation.getValue(g))}_authenticate(){ve(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===Me||g.status===401)){const o=this.painter.context.gl;Kt(o,!1),this._logoControl instanceof Bo&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new n.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),We(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&vt(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const c=this.painter.context.gl,A=c.createFramebuffer();function R(C){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,C,0);const P=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,P),P}return c.bindFramebuffer(c.FRAMEBUFFER,A),this._canvasPixelComparison(R(g),o.canvasCopies.map(R),o.timeStamps)}_canvasPixelComparison(g,o,c){let A=c[1]-c[0];const R=g.length/4;for(let C=0;C<o.length;C++){const P=o[C];let L=0;for(let j=0;j<P.length;j+=4)P[j]===g[j]&&P[j+1]===g[j+1]&&P[j+2]===g[j+2]&&P[j+3]===g[j+3]&&(L+=1);A+=(c[C+2]-c[C+1])*(1-L/R)}return A}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),ea.delete(this.painter.context.gl),pt.remove(),ze.remove(),this._removed=!0,this.fire(new n.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=n.q.frame(o=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(o)}))}_preloadTiles(g){const o=this.style?this.style.getSourceCaches():[];return n.bl(o,(c,A)=>c._preloadTiles(g,A),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(g){this._showParseStatus!==g&&(this._showParseStatus=g,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(g){this._showLayers2DWireframe!==g&&(this._showLayers2DWireframe=g,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(g){this._showLayers3DWireframe!==g&&(this._showLayers3DWireframe=g,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,this._tp.refreshUI(),g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,this._tp.refreshUI(),g&&this._update())}_setCacheLimits(g,o){n.dJ(g,o)}get version(){return w}},NavigationControl:class{constructor(g={}){this.options=n.l({},Qg,g),this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(n.aQ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),H("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),H("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(n.aQ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:o}):c.resetNorth({},{originalEvent:o}))}),this._compassIcon=H("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const o=g.getZoom(),c=o===g.getMaxZoom(),A=o===g.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=A,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",A.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new eA(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,o){const c=H("button",g,this._container);return c.type="button",c.addEventListener("click",o),c}_setButtonTitle(g,o){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${o}`);g.setAttribute("aria-label",c),g.firstElementChild&&g.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends n.E{constructor(g={}){super();const o=navigator.geolocation;this.options=n.l({geolocation:o},Pu,g),n.aQ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=km(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const o=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,g(c)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(c=>o(c.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(g){const o=this._map.getMaxBounds(),c=g.coords;return!!o&&(c.longitude<o.getWest()||c.longitude>o.getEast()||c.latitude<o.getSouth()||c.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new n.A("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("geolocate",g)),this._finish()}}_updateCamera(g){const o=new n.bO(g.coords.longitude,g.coords.latitude),c=g.coords.accuracy,A=this._map.getBearing(),R=n.l({bearing:A},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(c),R,{geolocateSource:!0})}_updateMarker(g){if(g){const o=new n.bO(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,o=n.bH(1,g._center.lat)*g.worldSize,c=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new n.A("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=H("button","mapboxgl-ctrl-geolocate",this._container),H("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H("div","mapboxgl-user-location"),this._dotElement.appendChild(H("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(H("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Go({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=H("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Go({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new n.A("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:bf,ScaleControl:class{constructor(g={}){this.options=n.l({},wi,g),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),n.aQ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,o=this._map,c=o._containerHeight/2,A=o._containerWidth/2-g/2,R=o.unproject([A,c]),C=o.unproject([A+g,c]),P=R.distanceTo(C);if(this.options.unit==="imperial"){const L=3.2808*P;L>5280?this._setScale(g,L/5280,"mile"):this._setScale(g,L,"foot")}else this.options.unit==="nautical"?this._setScale(g,P/1852,"nautical-mile"):P>=1e3?this._setScale(g,P/1e3,"kilometer"):this._setScale(g,P,"meter")}_setScale(g,o,c){this._map._requestDomTask(()=>{const A=function(C){const P=Math.pow(10,`${Math.floor(C)}`.length-1);let L=C/P;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:function(j){const Z=Math.pow(10,Math.ceil(-Math.log(j)/Math.LN10));return Math.round(j*Z)/Z}(L),P*L}(o),R=A/o;this._container.innerHTML=this._isNumberFormatSupported&&c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:c}).format(A):`${A}&nbsp;${Ly[c]}`,this._container.style.width=g*R+"px"})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=H("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g={}){this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:n.w("Full screen control 'container' must be a DOM element.")),n.aQ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=H("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=H("button","mapboxgl-ctrl-fullscreen",this._controlContainer);H("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends n.E{constructor(g){super(),this.options=n.l(Object.create(Eu),g),this._altitude=this.options.altitude,n.aQ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new n.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new n.A("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=n.bO.convert(g),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(g){return this._altitude=g,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const o=document.createDocumentFragment(),c=document.createElement("body");let A;for(c.innerHTML=g;A=c.firstChild,A;)o.appendChild(A);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=H("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(g),this.options.closeButton){const c=this._closeButton=H("button","mapboxgl-popup-close-button",o);c.type="button",c.setAttribute("aria-label","Close popup"),c.innerHTML='<span aria-hidden="true">&#215;</span>',c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let o;return this._classList.delete(g)?o=!1:(this._classList.add(g),o=!0),this._updateClassList(),o}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const o=this._map,c=this._container,A=this._pos;if(!o||!c||!A)return"bottom";const R=c.offsetWidth,C=c.offsetHeight,P=A.x<R/2,L=A.x>o.transform.width-R/2;if(A.y+g<C)return P?"top-left":L?"top-right":"top";if(A.y>o.transform.height-C){if(P)return"bottom-left";if(L)return"bottom-right"}return P?"left":L?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),g.className=o.join(" ")}_update(g){const o=this._map,c=this._content;if(!o||!this._lngLat&&!this._trackPointer||!c)return;let A=this._container;if(A||(A=this._container=H("div","mapboxgl-popup",o.getContainer()),this._tip=H("div","mapboxgl-popup-tip",A),A.appendChild(c)),this.options.maxWidth&&A.style.maxWidth!==this.options.maxWidth&&(A.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=sp(this._lngLat,this._pos,o.transform)),!this._trackPointer||g){const R=this._pos=this._trackPointer&&g instanceof n.P?g:o.project(this._lngLat,this._altitude),C=qh(this.options.offset),P=this._anchor=this._getAnchor(C.y),L=qh(this.options.offset,P),j=R.add(L).round();o._requestDomTask(()=>{this._container&&P&&(this._container.style.transform=`${yl[P]} translate(${j.x}px,${j.y}px)`)})}if(!this._marker&&o._showingGlobe()){const R=n.dK(o.transform,this._lngLat)?0:1;this._setOpacity(R)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(tA);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:Go,Style:Qs,LngLat:n.bO,LngLatBounds:n.aB,Point:n.P,MercatorCoordinate:n.ac,FreeCameraOptions:Rd,Evented:n.E,config:n.e,prewarm:n.dP,clearPrewarmedResources:n.dQ,get accessToken(){return n.e.ACCESS_TOKEN},set accessToken(g){n.e.ACCESS_TOKEN=g},get baseApiUrl(){return n.e.API_URL},set baseApiUrl(g){n.e.API_URL=g},get workerCount(){return n.dR.workerCount},set workerCount(g){n.dR.workerCount=g},get maxParallelImageRequests(){return n.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){n.e.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){n.dS(g)},get workerUrl(){return n.dT.workerUrl},set workerUrl(g){n.dT.workerUrl=g},get workerClass(){return n.dT.workerClass},set workerClass(g){n.dT.workerClass=g},get workerParams(){return n.dT.workerParams},set workerParams(g){n.dT.workerParams=g},get dracoUrl(){return n.dU()},set dracoUrl(g){n.dV(g)},get meshoptUrl(){return n.dW()},set meshoptUrl(g){n.dX(g)},setNow:n.q.setNow,restoreNow:n.q.restoreNow}});var h=s;return h})}(EC)),EC.exports}var sce=ice();const ef=Xi(sce);function gK(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(a=gK(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function hi(){for(var t,e,a=0,r="",s=arguments.length;a<s;a++)(t=arguments[a])&&(e=gK(t))&&(r&&(r+=" "),r+=e);return r}var EE,CU;function Ph(){if(CU)return EE;CU=1;var t=Array.isArray;return EE=t,EE}var NE,bU;function AK(){if(bU)return NE;bU=1;var t=typeof US=="object"&&US&&US.Object===Object&&US;return NE=t,NE}var VE,xU;function Nm(){if(xU)return VE;xU=1;var t=AK(),e=typeof self=="object"&&self&&self.Object===Object&&self,a=t||e||Function("return this")();return VE=a,VE}var zE,PU;function AT(){if(PU)return zE;PU=1;var t=Nm(),e=t.Symbol;return zE=e,zE}var OE,EU;function oce(){if(EU)return OE;EU=1;var t=AT(),e=Object.prototype,a=e.hasOwnProperty,r=e.toString,s=t?t.toStringTag:void 0;function l(h){var n=a.call(h,s),w=h[s];try{h[s]=void 0;var T=!0}catch{}var E=r.call(h);return T&&(n?h[s]=w:delete h[s]),E}return OE=l,OE}var DE,NU;function lce(){if(NU)return DE;NU=1;var t=Object.prototype,e=t.toString;function a(r){return e.call(r)}return DE=a,DE}var ME,VU;function Cy(){if(VU)return ME;VU=1;var t=AT(),e=oce(),a=lce(),r="[object Null]",s="[object Undefined]",l=t?t.toStringTag:void 0;function h(n){return n==null?n===void 0?s:r:l&&l in Object(n)?e(n):a(n)}return ME=h,ME}var IE,zU;function by(){if(zU)return IE;zU=1;function t(e){return e!=null&&typeof e=="object"}return IE=t,IE}var LE,OU;function Fv(){if(OU)return LE;OU=1;var t=Cy(),e=by(),a="[object Symbol]";function r(s){return typeof s=="symbol"||e(s)&&t(s)==a}return LE=r,LE}var FE,DU;function l3(){if(DU)return FE;DU=1;var t=Ph(),e=Fv(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(l,h){if(t(l))return!1;var n=typeof l;return n=="number"||n=="symbol"||n=="boolean"||l==null||e(l)?!0:r.test(l)||!a.test(l)||h!=null&&l in Object(h)}return FE=s,FE}var UE,MU;function Lg(){if(MU)return UE;MU=1;function t(e){var a=typeof e;return e!=null&&(a=="object"||a=="function")}return UE=t,UE}var kE,IU;function u3(){if(IU)return kE;IU=1;var t=Cy(),e=Lg(),a="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";function h(n){if(!e(n))return!1;var w=t(n);return w==r||w==s||w==a||w==l}return kE=h,kE}var BE,LU;function uce(){if(LU)return BE;LU=1;var t=Nm(),e=t["__core-js_shared__"];return BE=e,BE}var GE,FU;function cce(){if(FU)return GE;FU=1;var t=uce(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function a(r){return!!e&&e in r}return GE=a,GE}var jE,UU;function _K(){if(UU)return jE;UU=1;var t=Function.prototype,e=t.toString;function a(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return jE=a,jE}var ZE,kU;function dce(){if(kU)return ZE;kU=1;var t=u3(),e=cce(),a=Lg(),r=_K(),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,h=Function.prototype,n=Object.prototype,w=h.toString,T=n.hasOwnProperty,E=RegExp("^"+w.call(T).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function z(k){if(!a(k)||e(k))return!1;var U=t(k)?E:l;return U.test(r(k))}return ZE=z,ZE}var qE,BU;function hce(){if(BU)return qE;BU=1;function t(e,a){return e==null?void 0:e[a]}return qE=t,qE}var HE,GU;function y0(){if(GU)return HE;GU=1;var t=dce(),e=hce();function a(r,s){var l=e(r,s);return t(l)?l:void 0}return HE=a,HE}var $E,jU;function i2(){if(jU)return $E;jU=1;var t=y0(),e=t(Object,"create");return $E=e,$E}var KE,ZU;function fce(){if(ZU)return KE;ZU=1;var t=i2();function e(){this.__data__=t?t(null):{},this.size=0}return KE=e,KE}var WE,qU;function pce(){if(qU)return WE;qU=1;function t(e){var a=this.has(e)&&delete this.__data__[e];return this.size-=a?1:0,a}return WE=t,WE}var YE,HU;function mce(){if(HU)return YE;HU=1;var t=i2(),e="__lodash_hash_undefined__",a=Object.prototype,r=a.hasOwnProperty;function s(l){var h=this.__data__;if(t){var n=h[l];return n===e?void 0:n}return r.call(h,l)?h[l]:void 0}return YE=s,YE}var XE,$U;function yce(){if($U)return XE;$U=1;var t=i2(),e=Object.prototype,a=e.hasOwnProperty;function r(s){var l=this.__data__;return t?l[s]!==void 0:a.call(l,s)}return XE=r,XE}var JE,KU;function gce(){if(KU)return JE;KU=1;var t=i2(),e="__lodash_hash_undefined__";function a(r,s){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=t&&s===void 0?e:s,this}return JE=a,JE}var QE,WU;function Ace(){if(WU)return QE;WU=1;var t=fce(),e=pce(),a=mce(),r=yce(),s=gce();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,QE=l,QE}var eN,YU;function _ce(){if(YU)return eN;YU=1;function t(){this.__data__=[],this.size=0}return eN=t,eN}var tN,XU;function c3(){if(XU)return tN;XU=1;function t(e,a){return e===a||e!==e&&a!==a}return tN=t,tN}var aN,JU;function s2(){if(JU)return aN;JU=1;var t=c3();function e(a,r){for(var s=a.length;s--;)if(t(a[s][0],r))return s;return-1}return aN=e,aN}var rN,QU;function vce(){if(QU)return rN;QU=1;var t=s2(),e=Array.prototype,a=e.splice;function r(s){var l=this.__data__,h=t(l,s);if(h<0)return!1;var n=l.length-1;return h==n?l.pop():a.call(l,h,1),--this.size,!0}return rN=r,rN}var nN,ek;function wce(){if(ek)return nN;ek=1;var t=s2();function e(a){var r=this.__data__,s=t(r,a);return s<0?void 0:r[s][1]}return nN=e,nN}var iN,tk;function Rce(){if(tk)return iN;tk=1;var t=s2();function e(a){return t(this.__data__,a)>-1}return iN=e,iN}var sN,ak;function Tce(){if(ak)return sN;ak=1;var t=s2();function e(a,r){var s=this.__data__,l=t(s,a);return l<0?(++this.size,s.push([a,r])):s[l][1]=r,this}return sN=e,sN}var oN,rk;function o2(){if(rk)return oN;rk=1;var t=_ce(),e=vce(),a=wce(),r=Rce(),s=Tce();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,oN=l,oN}var lN,nk;function d3(){if(nk)return lN;nk=1;var t=y0(),e=Nm(),a=t(e,"Map");return lN=a,lN}var uN,ik;function Sce(){if(ik)return uN;ik=1;var t=Ace(),e=o2(),a=d3();function r(){this.size=0,this.__data__={hash:new t,map:new(a||e),string:new t}}return uN=r,uN}var cN,sk;function Cce(){if(sk)return cN;sk=1;function t(e){var a=typeof e;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?e!=="__proto__":e===null}return cN=t,cN}var dN,ok;function l2(){if(ok)return dN;ok=1;var t=Cce();function e(a,r){var s=a.__data__;return t(r)?s[typeof r=="string"?"string":"hash"]:s.map}return dN=e,dN}var hN,lk;function bce(){if(lk)return hN;lk=1;var t=l2();function e(a){var r=t(this,a).delete(a);return this.size-=r?1:0,r}return hN=e,hN}var fN,uk;function xce(){if(uk)return fN;uk=1;var t=l2();function e(a){return t(this,a).get(a)}return fN=e,fN}var pN,ck;function Pce(){if(ck)return pN;ck=1;var t=l2();function e(a){return t(this,a).has(a)}return pN=e,pN}var mN,dk;function Ece(){if(dk)return mN;dk=1;var t=l2();function e(a,r){var s=t(this,a),l=s.size;return s.set(a,r),this.size+=s.size==l?0:1,this}return mN=e,mN}var yN,hk;function h3(){if(hk)return yN;hk=1;var t=Sce(),e=bce(),a=xce(),r=Pce(),s=Ece();function l(h){var n=-1,w=h==null?0:h.length;for(this.clear();++n<w;){var T=h[n];this.set(T[0],T[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=a,l.prototype.has=r,l.prototype.set=s,yN=l,yN}var gN,fk;function vK(){if(fk)return gN;fk=1;var t=h3(),e="Expected a function";function a(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var l=function(){var h=arguments,n=s?s.apply(this,h):h[0],w=l.cache;if(w.has(n))return w.get(n);var T=r.apply(this,h);return l.cache=w.set(n,T)||w,T};return l.cache=new(a.Cache||t),l}return a.Cache=t,gN=a,gN}var AN,pk;function Nce(){if(pk)return AN;pk=1;var t=vK(),e=500;function a(r){var s=t(r,function(h){return l.size===e&&l.clear(),h}),l=s.cache;return s}return AN=a,AN}var _N,mk;function Vce(){if(mk)return _N;mk=1;var t=Nce(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=t(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(e,function(h,n,w,T){l.push(w?T.replace(a,"$1"):n||h)}),l});return _N=r,_N}var vN,yk;function f3(){if(yk)return vN;yk=1;function t(e,a){for(var r=-1,s=e==null?0:e.length,l=Array(s);++r<s;)l[r]=a(e[r],r,e);return l}return vN=t,vN}var wN,gk;function zce(){if(gk)return wN;gk=1;var t=AT(),e=f3(),a=Ph(),r=Fv(),s=t?t.prototype:void 0,l=s?s.toString:void 0;function h(n){if(typeof n=="string")return n;if(a(n))return e(n,h)+"";if(r(n))return l?l.call(n):"";var w=n+"";return w=="0"&&1/n==-1/0?"-0":w}return wN=h,wN}var RN,Ak;function wK(){if(Ak)return RN;Ak=1;var t=zce();function e(a){return a==null?"":t(a)}return RN=e,RN}var TN,_k;function RK(){if(_k)return TN;_k=1;var t=Ph(),e=l3(),a=Vce(),r=wK();function s(l,h){return t(l)?l:e(l,h)?[l]:a(r(l))}return TN=s,TN}var SN,vk;function u2(){if(vk)return SN;vk=1;var t=Fv();function e(a){if(typeof a=="string"||t(a))return a;var r=a+"";return r=="0"&&1/a==-1/0?"-0":r}return SN=e,SN}var CN,wk;function p3(){if(wk)return CN;wk=1;var t=RK(),e=u2();function a(r,s){s=t(s,r);for(var l=0,h=s.length;r!=null&&l<h;)r=r[e(s[l++])];return l&&l==h?r:void 0}return CN=a,CN}var bN,Rk;function TK(){if(Rk)return bN;Rk=1;var t=p3();function e(a,r,s){var l=a==null?void 0:t(a,r);return l===void 0?s:l}return bN=e,bN}var Oce=TK();const sf=Xi(Oce);var xN,Tk;function Dce(){if(Tk)return xN;Tk=1;function t(e){return e==null}return xN=t,xN}var Mce=Dce();const si=Xi(Mce);var PN,Sk;function Ice(){if(Sk)return PN;Sk=1;var t=Cy(),e=Ph(),a=by(),r="[object String]";function s(l){return typeof l=="string"||!e(l)&&a(l)&&t(l)==r}return PN=s,PN}var Lce=Ice();const _T=Xi(Lce);var Fce=u3();const Gn=Xi(Fce);var Uce=Lg();const Uv=Xi(Uce);var EN={exports:{}},Vs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck;function kce(){if(Ck)return Vs;Ck=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),n=Symbol.for("react.server_context"),w=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),q;q=Symbol.for("react.module.reference");function H($){if(typeof $=="object"&&$!==null){var Q=$.$$typeof;switch(Q){case t:switch($=$.type,$){case a:case s:case r:case T:case E:return $;default:switch($=$&&$.$$typeof,$){case n:case h:case w:case k:case z:case l:return $;default:return Q}}case e:return Q}}}return Vs.ContextConsumer=h,Vs.ContextProvider=l,Vs.Element=t,Vs.ForwardRef=w,Vs.Fragment=a,Vs.Lazy=k,Vs.Memo=z,Vs.Portal=e,Vs.Profiler=s,Vs.StrictMode=r,Vs.Suspense=T,Vs.SuspenseList=E,Vs.isAsyncMode=function(){return!1},Vs.isConcurrentMode=function(){return!1},Vs.isContextConsumer=function($){return H($)===h},Vs.isContextProvider=function($){return H($)===l},Vs.isElement=function($){return typeof $=="object"&&$!==null&&$.$$typeof===t},Vs.isForwardRef=function($){return H($)===w},Vs.isFragment=function($){return H($)===a},Vs.isLazy=function($){return H($)===k},Vs.isMemo=function($){return H($)===z},Vs.isPortal=function($){return H($)===e},Vs.isProfiler=function($){return H($)===s},Vs.isStrictMode=function($){return H($)===r},Vs.isSuspense=function($){return H($)===T},Vs.isSuspenseList=function($){return H($)===E},Vs.isValidElementType=function($){return typeof $=="string"||typeof $=="function"||$===a||$===s||$===r||$===T||$===E||$===U||typeof $=="object"&&$!==null&&($.$$typeof===k||$.$$typeof===z||$.$$typeof===l||$.$$typeof===h||$.$$typeof===w||$.$$typeof===q||$.getModuleId!==void 0)},Vs.typeOf=H,Vs}var bk;function Bce(){return bk||(bk=1,EN.exports=kce()),EN.exports}var Gce=Bce(),NN,xk;function SK(){if(xk)return NN;xk=1;var t=Cy(),e=by(),a="[object Number]";function r(s){return typeof s=="number"||e(s)&&t(s)==a}return NN=r,NN}var VN,Pk;function jce(){if(Pk)return VN;Pk=1;var t=SK();function e(a){return t(a)&&a!=+a}return VN=e,VN}var Zce=jce();const kv=Xi(Zce);var qce=SK();const Hce=Xi(qce);var Kd=function(e){return e===0?0:e>0?1:-1},kA=function(e){return _T(e)&&e.indexOf("%")===e.length-1},mr=function(e){return Hce(e)&&!kv(e)},Mu=function(e){return mr(e)||_T(e)},$ce=0,g0=function(e){var a=++$ce;return"".concat(e||"").concat(a)},Wd=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mr(e)&&!_T(e))return r;var l;if(kA(e)){var h=e.indexOf("%");l=a*parseFloat(e.slice(0,h))/100}else l=+e;return kv(l)&&(l=r),s&&l>a&&(l=a),l},gg=function(e){if(!e)return null;var a=Object.keys(e);return a&&a.length?e[a[0]]:null},Kce=function(e){if(!Array.isArray(e))return!1;for(var a=e.length,r={},s=0;s<a;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},Du=function(e,a){return mr(e)&&mr(a)?function(r){return e+r*(a-e)}:function(){return a}};function pb(t,e,a){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):sf(r,e))===a})}function F_(t,e){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(e,a)||t[a]!==e[a]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function X5(t){"@babel/helpers - typeof";return X5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X5(t)}var Wce=["viewBox","children"],Yce=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ek=["points","pathLength"],zN={svg:Wce,polygon:Ek,polyline:Ek},m3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],mb=function(e,a){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(rt.isValidElement(e)&&(r=e.props),!Uv(r))return null;var s={};return Object.keys(r).forEach(function(l){m3.includes(l)&&(s[l]=a||function(h){return r[l](r,h)})}),s},Xce=function(e,a,r){return function(s){return e(a,r,s),null}},i0=function(e,a,r){if(!Uv(e)||X5(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(l){var h=e[l];m3.includes(l)&&typeof h=="function"&&(s||(s={}),s[l]=Xce(h,a,r))}),s},Jce=["children"],Qce=["children"];function Nk(t,e){if(t==null)return{};var a=ede(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ede(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function J5(t){"@babel/helpers - typeof";return J5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J5(t)}var Vk={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},cy=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},zk=null,ON=null,y3=function t(e){if(e===zk&&Array.isArray(ON))return ON;var a=[];return rt.Children.forEach(e,function(r){si(r)||(Gce.isFragment(r)?a=a.concat(t(r.props.children)):a.push(r))}),ON=a,zk=e,a};function of(t,e){var a=[],r=[];return Array.isArray(e)?r=e.map(function(s){return cy(s)}):r=[cy(e)],y3(t).forEach(function(s){var l=sf(s,"type.displayName")||sf(s,"type.name");r.indexOf(l)!==-1&&a.push(s)}),a}function Qh(t,e){var a=of(t,e);return a&&a[0]}var Ok=function(e){if(!e||!e.props)return!1;var a=e.props,r=a.width,s=a.height;return!(!mr(r)||r<=0||!mr(s)||s<=0)},tde=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ade=function(e){return e&&e.type&&_T(e.type)&&tde.indexOf(e.type)>=0},CK=function(e){return e&&J5(e)==="object"&&"clipDot"in e},rde=function(e,a,r,s){var l,h=(l=zN==null?void 0:zN[s])!==null&&l!==void 0?l:[];return!Gn(e)&&(s&&h.includes(a)||Yce.includes(a))||r&&m3.includes(a)},fn=function(e,a,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(rt.isValidElement(e)&&(s=e.props),!Uv(s))return null;var l={};return Object.keys(s).forEach(function(h){var n;rde((n=s)===null||n===void 0?void 0:n[h],h,a,r)&&(l[h]=s[h])}),l},Q5=function t(e,a){if(e===a)return!0;var r=rt.Children.count(e);if(r!==rt.Children.count(a))return!1;if(r===0)return!0;if(r===1)return Dk(Array.isArray(e)?e[0]:e,Array.isArray(a)?a[0]:a);for(var s=0;s<r;s++){var l=e[s],h=a[s];if(Array.isArray(l)||Array.isArray(h)){if(!t(l,h))return!1}else if(!Dk(l,h))return!1}return!0},Dk=function(e,a){if(si(e)&&si(a))return!0;if(!si(e)&&!si(a)){var r=e.props||{},s=r.children,l=Nk(r,Jce),h=a.props||{},n=h.children,w=Nk(h,Qce);return s&&n?F_(l,w)&&Q5(s,n):!s&&!n?F_(l,w):!1}return!1},Mk=function(e,a){var r=[],s={};return y3(e).forEach(function(l,h){if(ade(l))r.push(l);else if(l){var n=cy(l.type),w=a[n]||{},T=w.handler,E=w.once;if(T&&(!E||!s[n])){var z=T(l,n,h);r.push(z),s[n]=!0}}}),r},nde=function(e){var a=e&&e.type;return a&&Vk[a]?Vk[a]:null},ide=function(e,a){return y3(a).indexOf(e)},sde=["children","width","height","viewBox","className","style","title","desc"];function eD(){return eD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},eD.apply(this,arguments)}function ode(t,e){if(t==null)return{};var a=lde(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function lde(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function tD(t){var e=t.children,a=t.width,r=t.height,s=t.viewBox,l=t.className,h=t.style,n=t.title,w=t.desc,T=ode(t,sde),E=s||{width:a,height:r,x:0,y:0},z=hi("recharts-surface",l);return It.createElement("svg",eD({},fn(T,!0,"svg"),{className:z,width:a,height:r,style:h,viewBox:"".concat(E.x," ").concat(E.y," ").concat(E.width," ").concat(E.height)}),It.createElement("title",null,n),It.createElement("desc",null,w),e)}var ude=["children","className"];function aD(){return aD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},aD.apply(this,arguments)}function cde(t,e){if(t==null)return{};var a=dde(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function dde(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var Ii=It.forwardRef(function(t,e){var a=t.children,r=t.className,s=cde(t,ude),l=hi("recharts-layer",r);return It.createElement("g",aD({className:l},fn(s,!0),{ref:e}),a)}),Cp=function(e,a){for(var r=arguments.length,s=new Array(r>2?r-2:0),l=2;l<r;l++)s[l-2]=arguments[l]},DN,Ik;function hde(){if(Ik)return DN;Ik=1;function t(e,a,r){var s=-1,l=e.length;a<0&&(a=-a>l?0:l+a),r=r>l?l:r,r<0&&(r+=l),l=a>r?0:r-a>>>0,a>>>=0;for(var h=Array(l);++s<l;)h[s]=e[s+a];return h}return DN=t,DN}var MN,Lk;function fde(){if(Lk)return MN;Lk=1;var t=hde();function e(a,r,s){var l=a.length;return s=s===void 0?l:s,!r&&s>=l?a:t(a,r,s)}return MN=e,MN}var IN,Fk;function bK(){if(Fk)return IN;Fk=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=e+a+r,l="\\ufe0e\\ufe0f",h="\\u200d",n=RegExp("["+h+t+s+l+"]");function w(T){return n.test(T)}return IN=w,IN}var LN,Uk;function pde(){if(Uk)return LN;Uk=1;function t(e){return e.split("")}return LN=t,LN}var FN,kk;function mde(){if(kk)return FN;kk=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",a="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=e+a+r,l="\\ufe0e\\ufe0f",h="["+t+"]",n="["+s+"]",w="\\ud83c[\\udffb-\\udfff]",T="(?:"+n+"|"+w+")",E="[^"+t+"]",z="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",U="\\u200d",q=T+"?",H="["+l+"]?",$="(?:"+U+"(?:"+[E,z,k].join("|")+")"+H+q+")*",Q=H+q+$,ne="(?:"+[E+n+"?",n,z,k,h].join("|")+")",de=RegExp(w+"(?="+w+")|"+ne+Q,"g");function ge(fe){return fe.match(de)||[]}return FN=ge,FN}var UN,Bk;function yde(){if(Bk)return UN;Bk=1;var t=pde(),e=bK(),a=mde();function r(s){return e(s)?a(s):t(s)}return UN=r,UN}var kN,Gk;function gde(){if(Gk)return kN;Gk=1;var t=fde(),e=bK(),a=yde(),r=wK();function s(l){return function(h){h=r(h);var n=e(h)?a(h):void 0,w=n?n[0]:h.charAt(0),T=n?t(n,1).join(""):h.slice(1);return w[l]()+T}}return kN=s,kN}var BN,jk;function Ade(){if(jk)return BN;jk=1;var t=gde(),e=t("toUpperCase");return BN=e,BN}var _de=Ade();const c2=Xi(_de);function vo(t){return function(){return t}}const xK=Math.cos,yb=Math.sin,zp=Math.sqrt,gb=Math.PI,d2=2*gb,rD=Math.PI,nD=2*rD,zA=1e-6,vde=nD-zA;function PK(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}function wde(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return PK;const a=10**e;return function(r){this._+=r[0];for(let s=1,l=r.length;s<l;++s)this._+=Math.round(arguments[s]*a)/a+r[s]}}class Rde{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?PK:wde(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,r,s){this._append`Q${+e},${+a},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,a,r,s,l,h){this._append`C${+e},${+a},${+r},${+s},${this._x1=+l},${this._y1=+h}`}arcTo(e,a,r,s,l){if(e=+e,a=+a,r=+r,s=+s,l=+l,l<0)throw new Error(`negative radius: ${l}`);let h=this._x1,n=this._y1,w=r-e,T=s-a,E=h-e,z=n-a,k=E*E+z*z;if(this._x1===null)this._append`M${this._x1=e},${this._y1=a}`;else if(k>zA)if(!(Math.abs(z*w-T*E)>zA)||!l)this._append`L${this._x1=e},${this._y1=a}`;else{let U=r-h,q=s-n,H=w*w+T*T,$=U*U+q*q,Q=Math.sqrt(H),ne=Math.sqrt(k),de=l*Math.tan((rD-Math.acos((H+k-$)/(2*Q*ne)))/2),ge=de/ne,fe=de/Q;Math.abs(ge-1)>zA&&this._append`L${e+ge*E},${a+ge*z}`,this._append`A${l},${l},0,0,${+(z*U>E*q)},${this._x1=e+fe*w},${this._y1=a+fe*T}`}}arc(e,a,r,s,l,h){if(e=+e,a=+a,r=+r,h=!!h,r<0)throw new Error(`negative radius: ${r}`);let n=r*Math.cos(s),w=r*Math.sin(s),T=e+n,E=a+w,z=1^h,k=h?s-l:l-s;this._x1===null?this._append`M${T},${E}`:(Math.abs(this._x1-T)>zA||Math.abs(this._y1-E)>zA)&&this._append`L${T},${E}`,r&&(k<0&&(k=k%nD+nD),k>vde?this._append`A${r},${r},0,1,${z},${e-n},${a-w}A${r},${r},0,1,${z},${this._x1=T},${this._y1=E}`:k>zA&&this._append`A${r},${r},0,${+(k>=rD)},${z},${this._x1=e+r*Math.cos(l)},${this._y1=a+r*Math.sin(l)}`)}rect(e,a,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function g3(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(a==null)e=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);e=r}return t},()=>new Rde(e)}function A3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function EK(t){this._context=t}EK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function h2(t){return new EK(t)}function NK(t){return t[0]}function VK(t){return t[1]}function zK(t,e){var a=vo(!0),r=null,s=h2,l=null,h=g3(n);t=typeof t=="function"?t:t===void 0?NK:vo(t),e=typeof e=="function"?e:e===void 0?VK:vo(e);function n(w){var T,E=(w=A3(w)).length,z,k=!1,U;for(r==null&&(l=s(U=h())),T=0;T<=E;++T)!(T<E&&a(z=w[T],T,w))===k&&((k=!k)?l.lineStart():l.lineEnd()),k&&l.point(+t(z,T,w),+e(z,T,w));if(U)return l=null,U+""||null}return n.x=function(w){return arguments.length?(t=typeof w=="function"?w:vo(+w),n):t},n.y=function(w){return arguments.length?(e=typeof w=="function"?w:vo(+w),n):e},n.defined=function(w){return arguments.length?(a=typeof w=="function"?w:vo(!!w),n):a},n.curve=function(w){return arguments.length?(s=w,r!=null&&(l=s(r)),n):s},n.context=function(w){return arguments.length?(w==null?r=l=null:l=s(r=w),n):r},n}function JS(t,e,a){var r=null,s=vo(!0),l=null,h=h2,n=null,w=g3(T);t=typeof t=="function"?t:t===void 0?NK:vo(+t),e=typeof e=="function"?e:vo(e===void 0?0:+e),a=typeof a=="function"?a:a===void 0?VK:vo(+a);function T(z){var k,U,q,H=(z=A3(z)).length,$,Q=!1,ne,de=new Array(H),ge=new Array(H);for(l==null&&(n=h(ne=w())),k=0;k<=H;++k){if(!(k<H&&s($=z[k],k,z))===Q)if(Q=!Q)U=k,n.areaStart(),n.lineStart();else{for(n.lineEnd(),n.lineStart(),q=k-1;q>=U;--q)n.point(de[q],ge[q]);n.lineEnd(),n.areaEnd()}Q&&(de[k]=+t($,k,z),ge[k]=+e($,k,z),n.point(r?+r($,k,z):de[k],a?+a($,k,z):ge[k]))}if(ne)return n=null,ne+""||null}function E(){return zK().defined(s).curve(h).context(l)}return T.x=function(z){return arguments.length?(t=typeof z=="function"?z:vo(+z),r=null,T):t},T.x0=function(z){return arguments.length?(t=typeof z=="function"?z:vo(+z),T):t},T.x1=function(z){return arguments.length?(r=z==null?null:typeof z=="function"?z:vo(+z),T):r},T.y=function(z){return arguments.length?(e=typeof z=="function"?z:vo(+z),a=null,T):e},T.y0=function(z){return arguments.length?(e=typeof z=="function"?z:vo(+z),T):e},T.y1=function(z){return arguments.length?(a=z==null?null:typeof z=="function"?z:vo(+z),T):a},T.lineX0=T.lineY0=function(){return E().x(t).y(e)},T.lineY1=function(){return E().x(t).y(a)},T.lineX1=function(){return E().x(r).y(e)},T.defined=function(z){return arguments.length?(s=typeof z=="function"?z:vo(!!z),T):s},T.curve=function(z){return arguments.length?(h=z,l!=null&&(n=h(l)),T):h},T.context=function(z){return arguments.length?(z==null?l=n=null:n=h(l=z),T):l},T}class OK{constructor(e,a){this._context=e,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,a){switch(e=+e,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,a):this._context.moveTo(e,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,a,e,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,e,this._y0,e,a);break}}this._x0=e,this._y0=a}}function Tde(t){return new OK(t,!0)}function Sde(t){return new OK(t,!1)}const _3={draw(t,e){const a=zp(e/gb);t.moveTo(a,0),t.arc(0,0,a,0,d2)}},Cde={draw(t,e){const a=zp(e/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},DK=zp(1/3),bde=DK*2,xde={draw(t,e){const a=zp(e/bde),r=a*DK;t.moveTo(0,-a),t.lineTo(r,0),t.lineTo(0,a),t.lineTo(-r,0),t.closePath()}},Pde={draw(t,e){const a=zp(e),r=-a/2;t.rect(r,r,a,a)}},Ede=.8908130915292852,MK=yb(gb/10)/yb(7*gb/10),Nde=yb(d2/10)*MK,Vde=-xK(d2/10)*MK,zde={draw(t,e){const a=zp(e*Ede),r=Nde*a,s=Vde*a;t.moveTo(0,-a),t.lineTo(r,s);for(let l=1;l<5;++l){const h=d2*l/5,n=xK(h),w=yb(h);t.lineTo(w*a,-n*a),t.lineTo(n*r-w*s,w*r+n*s)}t.closePath()}},GN=zp(3),Ode={draw(t,e){const a=-zp(e/(GN*3));t.moveTo(0,a*2),t.lineTo(-GN*a,-a),t.lineTo(GN*a,-a),t.closePath()}},Df=-.5,Mf=zp(3)/2,iD=1/zp(12),Dde=(iD/2+1)*3,Mde={draw(t,e){const a=zp(e/Dde),r=a/2,s=a*iD,l=r,h=a*iD+a,n=-l,w=h;t.moveTo(r,s),t.lineTo(l,h),t.lineTo(n,w),t.lineTo(Df*r-Mf*s,Mf*r+Df*s),t.lineTo(Df*l-Mf*h,Mf*l+Df*h),t.lineTo(Df*n-Mf*w,Mf*n+Df*w),t.lineTo(Df*r+Mf*s,Df*s-Mf*r),t.lineTo(Df*l+Mf*h,Df*h-Mf*l),t.lineTo(Df*n+Mf*w,Df*w-Mf*n),t.closePath()}};function Ide(t,e){let a=null,r=g3(s);t=typeof t=="function"?t:vo(t||_3),e=typeof e=="function"?e:vo(e===void 0?64:+e);function s(){let l;if(a||(a=l=r()),t.apply(this,arguments).draw(a,+e.apply(this,arguments)),l)return a=null,l+""||null}return s.type=function(l){return arguments.length?(t=typeof l=="function"?l:vo(l),s):t},s.size=function(l){return arguments.length?(e=typeof l=="function"?l:vo(+l),s):e},s.context=function(l){return arguments.length?(a=l??null,s):a},s}function Ab(){}function _b(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function IK(t){this._context=t}IK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_b(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_b(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Lde(t){return new IK(t)}function LK(t){this._context=t}LK.prototype={areaStart:Ab,areaEnd:Ab,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:_b(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Fde(t){return new LK(t)}function FK(t){this._context=t}FK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:_b(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ude(t){return new FK(t)}function UK(t){this._context=t}UK.prototype={areaStart:Ab,areaEnd:Ab,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function kde(t){return new UK(t)}function Zk(t){return t<0?-1:1}function qk(t,e,a){var r=t._x1-t._x0,s=e-t._x1,l=(t._y1-t._y0)/(r||s<0&&-0),h=(a-t._y1)/(s||r<0&&-0),n=(l*s+h*r)/(r+s);return(Zk(l)+Zk(h))*Math.min(Math.abs(l),Math.abs(h),.5*Math.abs(n))||0}function Hk(t,e){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-e)/2:e}function jN(t,e,a){var r=t._x0,s=t._y0,l=t._x1,h=t._y1,n=(l-r)/3;t._context.bezierCurveTo(r+n,s+n*e,l-n,h-n*a,l,h)}function vb(t){this._context=t}vb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jN(this,this._t0,Hk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var a=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,jN(this,Hk(this,a=qk(this,t,e)),a);break;default:jN(this,this._t0,a=qk(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=a}}};function kK(t){this._context=new BK(t)}(kK.prototype=Object.create(vb.prototype)).point=function(t,e){vb.prototype.point.call(this,e,t)};function BK(t){this._context=t}BK.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,a,r,s,l){this._context.bezierCurveTo(e,t,r,a,l,s)}};function Bde(t){return new vb(t)}function Gde(t){return new kK(t)}function GK(t){this._context=t}GK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),a===2)this._context.lineTo(t[1],e[1]);else for(var r=$k(t),s=$k(e),l=0,h=1;h<a;++l,++h)this._context.bezierCurveTo(r[0][l],s[0][l],r[1][l],s[1][l],t[h],e[h]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function $k(t){var e,a=t.length-1,r,s=new Array(a),l=new Array(a),h=new Array(a);for(s[0]=0,l[0]=2,h[0]=t[0]+2*t[1],e=1;e<a-1;++e)s[e]=1,l[e]=4,h[e]=4*t[e]+2*t[e+1];for(s[a-1]=2,l[a-1]=7,h[a-1]=8*t[a-1]+t[a],e=1;e<a;++e)r=s[e]/l[e-1],l[e]-=r,h[e]-=r*h[e-1];for(s[a-1]=h[a-1]/l[a-1],e=a-2;e>=0;--e)s[e]=(h[e]-s[e+1])/l[e];for(l[a-1]=(t[a]+s[a-1])/2,e=0;e<a-1;++e)l[e]=2*t[e+1]-s[e+1];return[s,l]}function jde(t){return new GK(t)}function f2(t,e){this._context=t,this._t=e}f2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,e)}break}}this._x=t,this._y=e}};function Zde(t){return new f2(t,.5)}function qde(t){return new f2(t,0)}function Hde(t){return new f2(t,1)}function tv(t,e){if((h=t.length)>1)for(var a=1,r,s,l=t[e[0]],h,n=l.length;a<h;++a)for(s=l,l=t[e[a]],r=0;r<n;++r)l[r][1]+=l[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function sD(t){for(var e=t.length,a=new Array(e);--e>=0;)a[e]=e;return a}function $de(t,e){return t[e]}function Kde(t){const e=[];return e.key=t,e}function Wde(){var t=vo([]),e=sD,a=tv,r=$de;function s(l){var h=Array.from(t.apply(this,arguments),Kde),n,w=h.length,T=-1,E;for(const z of l)for(n=0,++T;n<w;++n)(h[n][T]=[0,+r(z,h[n].key,T,l)]).data=z;for(n=0,E=A3(e(h));n<w;++n)h[E[n]].index=n;return a(h,E),h}return s.keys=function(l){return arguments.length?(t=typeof l=="function"?l:vo(Array.from(l)),s):t},s.value=function(l){return arguments.length?(r=typeof l=="function"?l:vo(+l),s):r},s.order=function(l){return arguments.length?(e=l==null?sD:typeof l=="function"?l:vo(Array.from(l)),s):e},s.offset=function(l){return arguments.length?(a=l??tv,s):a},s}function Yde(t,e){if((r=t.length)>0){for(var a,r,s=0,l=t[0].length,h;s<l;++s){for(h=a=0;a<r;++a)h+=t[a][s][1]||0;if(h)for(a=0;a<r;++a)t[a][s][1]/=h}tv(t,e)}}function Xde(t,e){if((s=t.length)>0){for(var a=0,r=t[e[0]],s,l=r.length;a<l;++a){for(var h=0,n=0;h<s;++h)n+=t[h][a][1]||0;r[a][1]+=r[a][0]=-n/2}tv(t,e)}}function Jde(t,e){if(!(!((h=t.length)>0)||!((l=(s=t[e[0]]).length)>0))){for(var a=0,r=1,s,l,h;r<l;++r){for(var n=0,w=0,T=0;n<h;++n){for(var E=t[e[n]],z=E[r][1]||0,k=E[r-1][1]||0,U=(z-k)/2,q=0;q<n;++q){var H=t[e[q]],$=H[r][1]||0,Q=H[r-1][1]||0;U+=$-Q}w+=z,T+=U*z}s[r-1][1]+=s[r-1][0]=a,w&&(a-=T/w)}s[r-1][1]+=s[r-1][0]=a,tv(t,e)}}function lR(t){"@babel/helpers - typeof";return lR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lR(t)}var Qde=["type","size","sizeType"];function oD(){return oD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},oD.apply(this,arguments)}function Kk(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Wk(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(a),!0).forEach(function(r){ehe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Kk(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ehe(t,e,a){return e=the(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function the(t){var e=ahe(t,"string");return lR(e)=="symbol"?e:e+""}function ahe(t,e){if(lR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(lR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rhe(t,e){if(t==null)return{};var a=nhe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nhe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var jK={symbolCircle:_3,symbolCross:Cde,symbolDiamond:xde,symbolSquare:Pde,symbolStar:zde,symbolTriangle:Ode,symbolWye:Mde},ihe=Math.PI/180,she=function(e){var a="symbol".concat(c2(e));return jK[a]||_3},ohe=function(e,a,r){if(a==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*ihe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},lhe=function(e,a){jK["symbol".concat(c2(e))]=a},v3=function(e){var a=e.type,r=a===void 0?"circle":a,s=e.size,l=s===void 0?64:s,h=e.sizeType,n=h===void 0?"area":h,w=rhe(e,Qde),T=Wk(Wk({},w),{},{type:r,size:l,sizeType:n}),E=function(){var $=she(r),Q=Ide().type($).size(ohe(l,n,r));return Q()},z=T.className,k=T.cx,U=T.cy,q=fn(T,!0);return k===+k&&U===+U&&l===+l?It.createElement("path",oD({},q,{className:hi("recharts-symbols",z),transform:"translate(".concat(k,", ").concat(U,")"),d:E()})):null};v3.registerSymbol=lhe;function av(t){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(t)}function lD(){return lD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},lD.apply(this,arguments)}function Yk(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function uhe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(a),!0).forEach(function(r){uR(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Yk(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function che(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dhe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qK(r.key),r)}}function hhe(t,e,a){return e&&dhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fhe(t,e,a){return e=wb(e),phe(t,ZK()?Reflect.construct(e,a||[],wb(t).constructor):e.apply(t,a))}function phe(t,e){if(e&&(av(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mhe(t)}function mhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZK=function(){return!!t})()}function wb(t){return wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},wb(t)}function yhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uD(t,e)}function uD(t,e){return uD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},uD(t,e)}function uR(t,e,a){return e=qK(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qK(t){var e=ghe(t,"string");return av(e)=="symbol"?e:e+""}function ghe(t,e){if(av(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(av(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yp=32,w3=function(t){function e(){return che(this,e),fhe(this,e,arguments)}return yhe(e,t),hhe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,l=yp/2,h=yp/6,n=yp/3,w=r.inactive?s:r.color;if(r.type==="plainline")return It.createElement("line",{strokeWidth:4,fill:"none",stroke:w,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:l,x2:yp,y2:l,className:"recharts-legend-icon"});if(r.type==="line")return It.createElement("path",{strokeWidth:4,fill:"none",stroke:w,d:"M0,".concat(l,"h").concat(n,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(2*n,",").concat(l,`
            H`).concat(yp,"M").concat(2*n,",").concat(l,`
            A`).concat(h,",").concat(h,",0,1,1,").concat(n,",").concat(l),className:"recharts-legend-icon"});if(r.type==="rect")return It.createElement("path",{stroke:"none",fill:w,d:"M0,".concat(yp/8,"h").concat(yp,"v").concat(yp*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(It.isValidElement(r.legendIcon)){var T=uhe({},r);return delete T.legendIcon,It.cloneElement(r.legendIcon,T)}return It.createElement(v3,{fill:w,cx:l,cy:l,size:yp,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,l=s.payload,h=s.iconSize,n=s.layout,w=s.formatter,T=s.inactiveColor,E={x:0,y:0,width:yp,height:yp},z={display:n==="horizontal"?"inline-block":"block",marginRight:10},k={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(U,q){var H=U.formatter||w,$=hi(uR(uR({"recharts-legend-item":!0},"legend-item-".concat(q),!0),"inactive",U.inactive));if(U.type==="none")return null;var Q=Gn(U.value)?null:U.value;Cp(!Gn(U.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var ne=U.inactive?T:U.color;return It.createElement("li",lD({className:$,style:z,key:"legend-item-".concat(q)},i0(r.props,U,q)),It.createElement(tD,{width:h,height:h,viewBox:E,style:k},r.renderIcon(U)),It.createElement("span",{className:"recharts-legend-item-text",style:{color:ne}},H?H(Q,U,q):Q))})}},{key:"render",value:function(){var r=this.props,s=r.payload,l=r.layout,h=r.align;if(!s||!s.length)return null;var n={padding:0,margin:0,textAlign:l==="horizontal"?h:"left"};return It.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}])}(rt.PureComponent);uR(w3,"displayName","Legend");uR(w3,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ZN,Xk;function Ahe(){if(Xk)return ZN;Xk=1;var t=o2();function e(){this.__data__=new t,this.size=0}return ZN=e,ZN}var qN,Jk;function _he(){if(Jk)return qN;Jk=1;function t(e){var a=this.__data__,r=a.delete(e);return this.size=a.size,r}return qN=t,qN}var HN,Qk;function vhe(){if(Qk)return HN;Qk=1;function t(e){return this.__data__.get(e)}return HN=t,HN}var $N,eB;function whe(){if(eB)return $N;eB=1;function t(e){return this.__data__.has(e)}return $N=t,$N}var KN,tB;function Rhe(){if(tB)return KN;tB=1;var t=o2(),e=d3(),a=h3(),r=200;function s(l,h){var n=this.__data__;if(n instanceof t){var w=n.__data__;if(!e||w.length<r-1)return w.push([l,h]),this.size=++n.size,this;n=this.__data__=new a(w)}return n.set(l,h),this.size=n.size,this}return KN=s,KN}var WN,aB;function HK(){if(aB)return WN;aB=1;var t=o2(),e=Ahe(),a=_he(),r=vhe(),s=whe(),l=Rhe();function h(n){var w=this.__data__=new t(n);this.size=w.size}return h.prototype.clear=e,h.prototype.delete=a,h.prototype.get=r,h.prototype.has=s,h.prototype.set=l,WN=h,WN}var YN,rB;function The(){if(rB)return YN;rB=1;var t="__lodash_hash_undefined__";function e(a){return this.__data__.set(a,t),this}return YN=e,YN}var XN,nB;function She(){if(nB)return XN;nB=1;function t(e){return this.__data__.has(e)}return XN=t,XN}var JN,iB;function $K(){if(iB)return JN;iB=1;var t=h3(),e=The(),a=She();function r(s){var l=-1,h=s==null?0:s.length;for(this.__data__=new t;++l<h;)this.add(s[l])}return r.prototype.add=r.prototype.push=e,r.prototype.has=a,JN=r,JN}var QN,sB;function KK(){if(sB)return QN;sB=1;function t(e,a){for(var r=-1,s=e==null?0:e.length;++r<s;)if(a(e[r],r,e))return!0;return!1}return QN=t,QN}var eV,oB;function WK(){if(oB)return eV;oB=1;function t(e,a){return e.has(a)}return eV=t,eV}var tV,lB;function YK(){if(lB)return tV;lB=1;var t=$K(),e=KK(),a=WK(),r=1,s=2;function l(h,n,w,T,E,z){var k=w&r,U=h.length,q=n.length;if(U!=q&&!(k&&q>U))return!1;var H=z.get(h),$=z.get(n);if(H&&$)return H==n&&$==h;var Q=-1,ne=!0,de=w&s?new t:void 0;for(z.set(h,n),z.set(n,h);++Q<U;){var ge=h[Q],fe=n[Q];if(T)var _e=k?T(fe,ge,Q,n,h,z):T(ge,fe,Q,h,n,z);if(_e!==void 0){if(_e)continue;ne=!1;break}if(de){if(!e(n,function(me,Ae){if(!a(de,Ae)&&(ge===me||E(ge,me,w,T,z)))return de.push(Ae)})){ne=!1;break}}else if(!(ge===fe||E(ge,fe,w,T,z))){ne=!1;break}}return z.delete(h),z.delete(n),ne}return tV=l,tV}var aV,uB;function Che(){if(uB)return aV;uB=1;var t=Nm(),e=t.Uint8Array;return aV=e,aV}var rV,cB;function bhe(){if(cB)return rV;cB=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(s,l){r[++a]=[l,s]}),r}return rV=t,rV}var nV,dB;function R3(){if(dB)return nV;dB=1;function t(e){var a=-1,r=Array(e.size);return e.forEach(function(s){r[++a]=s}),r}return nV=t,nV}var iV,hB;function xhe(){if(hB)return iV;hB=1;var t=AT(),e=Che(),a=c3(),r=YK(),s=bhe(),l=R3(),h=1,n=2,w="[object Boolean]",T="[object Date]",E="[object Error]",z="[object Map]",k="[object Number]",U="[object RegExp]",q="[object Set]",H="[object String]",$="[object Symbol]",Q="[object ArrayBuffer]",ne="[object DataView]",de=t?t.prototype:void 0,ge=de?de.valueOf:void 0;function fe(_e,me,Ae,Te,Oe,ie,we){switch(Ae){case ne:if(_e.byteLength!=me.byteLength||_e.byteOffset!=me.byteOffset)return!1;_e=_e.buffer,me=me.buffer;case Q:return!(_e.byteLength!=me.byteLength||!ie(new e(_e),new e(me)));case w:case T:case k:return a(+_e,+me);case E:return _e.name==me.name&&_e.message==me.message;case U:case H:return _e==me+"";case z:var Me=s;case q:var Ve=Te&h;if(Me||(Me=l),_e.size!=me.size&&!Ve)return!1;var Ie=we.get(_e);if(Ie)return Ie==me;Te|=n,we.set(_e,me);var Ue=r(Me(_e),Me(me),Te,Oe,ie,we);return we.delete(_e),Ue;case $:if(ge)return ge.call(_e)==ge.call(me)}return!1}return iV=fe,iV}var sV,fB;function XK(){if(fB)return sV;fB=1;function t(e,a){for(var r=-1,s=a.length,l=e.length;++r<s;)e[l+r]=a[r];return e}return sV=t,sV}var oV,pB;function Phe(){if(pB)return oV;pB=1;var t=XK(),e=Ph();function a(r,s,l){var h=s(r);return e(r)?h:t(h,l(r))}return oV=a,oV}var lV,mB;function Ehe(){if(mB)return lV;mB=1;function t(e,a){for(var r=-1,s=e==null?0:e.length,l=0,h=[];++r<s;){var n=e[r];a(n,r,e)&&(h[l++]=n)}return h}return lV=t,lV}var uV,yB;function Nhe(){if(yB)return uV;yB=1;function t(){return[]}return uV=t,uV}var cV,gB;function Vhe(){if(gB)return cV;gB=1;var t=Ehe(),e=Nhe(),a=Object.prototype,r=a.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(h){return h==null?[]:(h=Object(h),t(s(h),function(n){return r.call(h,n)}))}:e;return cV=l,cV}var dV,AB;function zhe(){if(AB)return dV;AB=1;function t(e,a){for(var r=-1,s=Array(e);++r<e;)s[r]=a(r);return s}return dV=t,dV}var hV,_B;function Ohe(){if(_B)return hV;_B=1;var t=Cy(),e=by(),a="[object Arguments]";function r(s){return e(s)&&t(s)==a}return hV=r,hV}var fV,vB;function T3(){if(vB)return fV;vB=1;var t=Ohe(),e=by(),a=Object.prototype,r=a.hasOwnProperty,s=a.propertyIsEnumerable,l=t(function(){return arguments}())?t:function(h){return e(h)&&r.call(h,"callee")&&!s.call(h,"callee")};return fV=l,fV}var bw={exports:{}},pV,wB;function Dhe(){if(wB)return pV;wB=1;function t(){return!1}return pV=t,pV}bw.exports;var RB;function JK(){return RB||(RB=1,function(t,e){var a=Nm(),r=Dhe(),s=e&&!e.nodeType&&e,l=s&&!0&&t&&!t.nodeType&&t,h=l&&l.exports===s,n=h?a.Buffer:void 0,w=n?n.isBuffer:void 0,T=w||r;t.exports=T}(bw,bw.exports)),bw.exports}var mV,TB;function S3(){if(TB)return mV;TB=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function a(r,s){var l=typeof r;return s=s??t,!!s&&(l=="number"||l!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<s}return mV=a,mV}var yV,SB;function C3(){if(SB)return yV;SB=1;var t=9007199254740991;function e(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=t}return yV=e,yV}var gV,CB;function Mhe(){if(CB)return gV;CB=1;var t=Cy(),e=C3(),a=by(),r="[object Arguments]",s="[object Array]",l="[object Boolean]",h="[object Date]",n="[object Error]",w="[object Function]",T="[object Map]",E="[object Number]",z="[object Object]",k="[object RegExp]",U="[object Set]",q="[object String]",H="[object WeakMap]",$="[object ArrayBuffer]",Q="[object DataView]",ne="[object Float32Array]",de="[object Float64Array]",ge="[object Int8Array]",fe="[object Int16Array]",_e="[object Int32Array]",me="[object Uint8Array]",Ae="[object Uint8ClampedArray]",Te="[object Uint16Array]",Oe="[object Uint32Array]",ie={};ie[ne]=ie[de]=ie[ge]=ie[fe]=ie[_e]=ie[me]=ie[Ae]=ie[Te]=ie[Oe]=!0,ie[r]=ie[s]=ie[$]=ie[l]=ie[Q]=ie[h]=ie[n]=ie[w]=ie[T]=ie[E]=ie[z]=ie[k]=ie[U]=ie[q]=ie[H]=!1;function we(Me){return a(Me)&&e(Me.length)&&!!ie[t(Me)]}return gV=we,gV}var AV,bB;function QK(){if(bB)return AV;bB=1;function t(e){return function(a){return e(a)}}return AV=t,AV}var xw={exports:{}};xw.exports;var xB;function Ihe(){return xB||(xB=1,function(t,e){var a=AK(),r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,l=s&&s.exports===r,h=l&&a.process,n=function(){try{var w=s&&s.require&&s.require("util").types;return w||h&&h.binding&&h.binding("util")}catch{}}();t.exports=n}(xw,xw.exports)),xw.exports}var _V,PB;function eW(){if(PB)return _V;PB=1;var t=Mhe(),e=QK(),a=Ihe(),r=a&&a.isTypedArray,s=r?e(r):t;return _V=s,_V}var vV,EB;function Lhe(){if(EB)return vV;EB=1;var t=zhe(),e=T3(),a=Ph(),r=JK(),s=S3(),l=eW(),h=Object.prototype,n=h.hasOwnProperty;function w(T,E){var z=a(T),k=!z&&e(T),U=!z&&!k&&r(T),q=!z&&!k&&!U&&l(T),H=z||k||U||q,$=H?t(T.length,String):[],Q=$.length;for(var ne in T)(E||n.call(T,ne))&&!(H&&(ne=="length"||U&&(ne=="offset"||ne=="parent")||q&&(ne=="buffer"||ne=="byteLength"||ne=="byteOffset")||s(ne,Q)))&&$.push(ne);return $}return vV=w,vV}var wV,NB;function Fhe(){if(NB)return wV;NB=1;var t=Object.prototype;function e(a){var r=a&&a.constructor,s=typeof r=="function"&&r.prototype||t;return a===s}return wV=e,wV}var RV,VB;function tW(){if(VB)return RV;VB=1;function t(e,a){return function(r){return e(a(r))}}return RV=t,RV}var TV,zB;function Uhe(){if(zB)return TV;zB=1;var t=tW(),e=t(Object.keys,Object);return TV=e,TV}var SV,OB;function khe(){if(OB)return SV;OB=1;var t=Fhe(),e=Uhe(),a=Object.prototype,r=a.hasOwnProperty;function s(l){if(!t(l))return e(l);var h=[];for(var n in Object(l))r.call(l,n)&&n!="constructor"&&h.push(n);return h}return SV=s,SV}var CV,DB;function vT(){if(DB)return CV;DB=1;var t=u3(),e=C3();function a(r){return r!=null&&e(r.length)&&!t(r)}return CV=a,CV}var bV,MB;function p2(){if(MB)return bV;MB=1;var t=Lhe(),e=khe(),a=vT();function r(s){return a(s)?t(s):e(s)}return bV=r,bV}var xV,IB;function Bhe(){if(IB)return xV;IB=1;var t=Phe(),e=Vhe(),a=p2();function r(s){return t(s,a,e)}return xV=r,xV}var PV,LB;function Ghe(){if(LB)return PV;LB=1;var t=Bhe(),e=1,a=Object.prototype,r=a.hasOwnProperty;function s(l,h,n,w,T,E){var z=n&e,k=t(l),U=k.length,q=t(h),H=q.length;if(U!=H&&!z)return!1;for(var $=U;$--;){var Q=k[$];if(!(z?Q in h:r.call(h,Q)))return!1}var ne=E.get(l),de=E.get(h);if(ne&&de)return ne==h&&de==l;var ge=!0;E.set(l,h),E.set(h,l);for(var fe=z;++$<U;){Q=k[$];var _e=l[Q],me=h[Q];if(w)var Ae=z?w(me,_e,Q,h,l,E):w(_e,me,Q,l,h,E);if(!(Ae===void 0?_e===me||T(_e,me,n,w,E):Ae)){ge=!1;break}fe||(fe=Q=="constructor")}if(ge&&!fe){var Te=l.constructor,Oe=h.constructor;Te!=Oe&&"constructor"in l&&"constructor"in h&&!(typeof Te=="function"&&Te instanceof Te&&typeof Oe=="function"&&Oe instanceof Oe)&&(ge=!1)}return E.delete(l),E.delete(h),ge}return PV=s,PV}var EV,FB;function jhe(){if(FB)return EV;FB=1;var t=y0(),e=Nm(),a=t(e,"DataView");return EV=a,EV}var NV,UB;function Zhe(){if(UB)return NV;UB=1;var t=y0(),e=Nm(),a=t(e,"Promise");return NV=a,NV}var VV,kB;function aW(){if(kB)return VV;kB=1;var t=y0(),e=Nm(),a=t(e,"Set");return VV=a,VV}var zV,BB;function qhe(){if(BB)return zV;BB=1;var t=y0(),e=Nm(),a=t(e,"WeakMap");return zV=a,zV}var OV,GB;function Hhe(){if(GB)return OV;GB=1;var t=jhe(),e=d3(),a=Zhe(),r=aW(),s=qhe(),l=Cy(),h=_K(),n="[object Map]",w="[object Object]",T="[object Promise]",E="[object Set]",z="[object WeakMap]",k="[object DataView]",U=h(t),q=h(e),H=h(a),$=h(r),Q=h(s),ne=l;return(t&&ne(new t(new ArrayBuffer(1)))!=k||e&&ne(new e)!=n||a&&ne(a.resolve())!=T||r&&ne(new r)!=E||s&&ne(new s)!=z)&&(ne=function(de){var ge=l(de),fe=ge==w?de.constructor:void 0,_e=fe?h(fe):"";if(_e)switch(_e){case U:return k;case q:return n;case H:return T;case $:return E;case Q:return z}return ge}),OV=ne,OV}var DV,jB;function $he(){if(jB)return DV;jB=1;var t=HK(),e=YK(),a=xhe(),r=Ghe(),s=Hhe(),l=Ph(),h=JK(),n=eW(),w=1,T="[object Arguments]",E="[object Array]",z="[object Object]",k=Object.prototype,U=k.hasOwnProperty;function q(H,$,Q,ne,de,ge){var fe=l(H),_e=l($),me=fe?E:s(H),Ae=_e?E:s($);me=me==T?z:me,Ae=Ae==T?z:Ae;var Te=me==z,Oe=Ae==z,ie=me==Ae;if(ie&&h(H)){if(!h($))return!1;fe=!0,Te=!1}if(ie&&!Te)return ge||(ge=new t),fe||n(H)?e(H,$,Q,ne,de,ge):a(H,$,me,Q,ne,de,ge);if(!(Q&w)){var we=Te&&U.call(H,"__wrapped__"),Me=Oe&&U.call($,"__wrapped__");if(we||Me){var Ve=we?H.value():H,Ie=Me?$.value():$;return ge||(ge=new t),de(Ve,Ie,Q,ne,ge)}}return ie?(ge||(ge=new t),r(H,$,Q,ne,de,ge)):!1}return DV=q,DV}var MV,ZB;function b3(){if(ZB)return MV;ZB=1;var t=$he(),e=by();function a(r,s,l,h,n){return r===s?!0:r==null||s==null||!e(r)&&!e(s)?r!==r&&s!==s:t(r,s,l,h,a,n)}return MV=a,MV}var IV,qB;function Khe(){if(qB)return IV;qB=1;var t=HK(),e=b3(),a=1,r=2;function s(l,h,n,w){var T=n.length,E=T,z=!w;if(l==null)return!E;for(l=Object(l);T--;){var k=n[T];if(z&&k[2]?k[1]!==l[k[0]]:!(k[0]in l))return!1}for(;++T<E;){k=n[T];var U=k[0],q=l[U],H=k[1];if(z&&k[2]){if(q===void 0&&!(U in l))return!1}else{var $=new t;if(w)var Q=w(q,H,U,l,h,$);if(!(Q===void 0?e(H,q,a|r,w,$):Q))return!1}}return!0}return IV=s,IV}var LV,HB;function rW(){if(HB)return LV;HB=1;var t=Lg();function e(a){return a===a&&!t(a)}return LV=e,LV}var FV,$B;function Whe(){if($B)return FV;$B=1;var t=rW(),e=p2();function a(r){for(var s=e(r),l=s.length;l--;){var h=s[l],n=r[h];s[l]=[h,n,t(n)]}return s}return FV=a,FV}var UV,KB;function nW(){if(KB)return UV;KB=1;function t(e,a){return function(r){return r==null?!1:r[e]===a&&(a!==void 0||e in Object(r))}}return UV=t,UV}var kV,WB;function Yhe(){if(WB)return kV;WB=1;var t=Khe(),e=Whe(),a=nW();function r(s){var l=e(s);return l.length==1&&l[0][2]?a(l[0][0],l[0][1]):function(h){return h===s||t(h,s,l)}}return kV=r,kV}var BV,YB;function Xhe(){if(YB)return BV;YB=1;function t(e,a){return e!=null&&a in Object(e)}return BV=t,BV}var GV,XB;function Jhe(){if(XB)return GV;XB=1;var t=RK(),e=T3(),a=Ph(),r=S3(),s=C3(),l=u2();function h(n,w,T){w=t(w,n);for(var E=-1,z=w.length,k=!1;++E<z;){var U=l(w[E]);if(!(k=n!=null&&T(n,U)))break;n=n[U]}return k||++E!=z?k:(z=n==null?0:n.length,!!z&&s(z)&&r(U,z)&&(a(n)||e(n)))}return GV=h,GV}var jV,JB;function Qhe(){if(JB)return jV;JB=1;var t=Xhe(),e=Jhe();function a(r,s){return r!=null&&e(r,s,t)}return jV=a,jV}var ZV,QB;function efe(){if(QB)return ZV;QB=1;var t=b3(),e=TK(),a=Qhe(),r=l3(),s=rW(),l=nW(),h=u2(),n=1,w=2;function T(E,z){return r(E)&&s(z)?l(h(E),z):function(k){var U=e(k,E);return U===void 0&&U===z?a(k,E):t(z,U,n|w)}}return ZV=T,ZV}var qV,e8;function Bv(){if(e8)return qV;e8=1;function t(e){return e}return qV=t,qV}var HV,t8;function tfe(){if(t8)return HV;t8=1;function t(e){return function(a){return a==null?void 0:a[e]}}return HV=t,HV}var $V,a8;function afe(){if(a8)return $V;a8=1;var t=p3();function e(a){return function(r){return t(r,a)}}return $V=e,$V}var KV,r8;function rfe(){if(r8)return KV;r8=1;var t=tfe(),e=afe(),a=l3(),r=u2();function s(l){return a(l)?t(r(l)):e(l)}return KV=s,KV}var WV,n8;function Vm(){if(n8)return WV;n8=1;var t=Yhe(),e=efe(),a=Bv(),r=Ph(),s=rfe();function l(h){return typeof h=="function"?h:h==null?a:typeof h=="object"?r(h)?e(h[0],h[1]):t(h):s(h)}return WV=l,WV}var YV,i8;function iW(){if(i8)return YV;i8=1;function t(e,a,r,s){for(var l=e.length,h=r+(s?1:-1);s?h--:++h<l;)if(a(e[h],h,e))return h;return-1}return YV=t,YV}var XV,s8;function nfe(){if(s8)return XV;s8=1;function t(e){return e!==e}return XV=t,XV}var JV,o8;function ife(){if(o8)return JV;o8=1;function t(e,a,r){for(var s=r-1,l=e.length;++s<l;)if(e[s]===a)return s;return-1}return JV=t,JV}var QV,l8;function sfe(){if(l8)return QV;l8=1;var t=iW(),e=nfe(),a=ife();function r(s,l,h){return l===l?a(s,l,h):t(s,e,h)}return QV=r,QV}var ez,u8;function ofe(){if(u8)return ez;u8=1;var t=sfe();function e(a,r){var s=a==null?0:a.length;return!!s&&t(a,r,0)>-1}return ez=e,ez}var tz,c8;function lfe(){if(c8)return tz;c8=1;function t(e,a,r){for(var s=-1,l=e==null?0:e.length;++s<l;)if(r(a,e[s]))return!0;return!1}return tz=t,tz}var az,d8;function ufe(){if(d8)return az;d8=1;function t(){}return az=t,az}var rz,h8;function cfe(){if(h8)return rz;h8=1;var t=aW(),e=ufe(),a=R3(),r=1/0,s=t&&1/a(new t([,-0]))[1]==r?function(l){return new t(l)}:e;return rz=s,rz}var nz,f8;function dfe(){if(f8)return nz;f8=1;var t=$K(),e=ofe(),a=lfe(),r=WK(),s=cfe(),l=R3(),h=200;function n(w,T,E){var z=-1,k=e,U=w.length,q=!0,H=[],$=H;if(E)q=!1,k=a;else if(U>=h){var Q=T?null:s(w);if(Q)return l(Q);q=!1,k=r,$=new t}else $=T?[]:H;e:for(;++z<U;){var ne=w[z],de=T?T(ne):ne;if(ne=E||ne!==0?ne:0,q&&de===de){for(var ge=$.length;ge--;)if($[ge]===de)continue e;T&&$.push(de),H.push(ne)}else k($,de,E)||($!==H&&$.push(de),H.push(ne))}return H}return nz=n,nz}var iz,p8;function hfe(){if(p8)return iz;p8=1;var t=Vm(),e=dfe();function a(r,s){return r&&r.length?e(r,t(s,2)):[]}return iz=a,iz}var ffe=hfe();const m8=Xi(ffe);function sW(t,e,a){return e===!0?m8(t,a):Gn(e)?m8(t,e):t}function rv(t){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rv(t)}var pfe=["ref"];function y8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Xm(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?y8(Object(a),!0).forEach(function(r){m2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function mfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g8(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lW(r.key),r)}}function yfe(t,e,a){return e&&g8(t.prototype,e),a&&g8(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gfe(t,e,a){return e=Rb(e),Afe(t,oW()?Reflect.construct(e,a||[],Rb(t).constructor):e.apply(t,a))}function Afe(t,e){if(e&&(rv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _fe(t)}function _fe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oW=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Rb(t)}function vfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cD(t,e)}function cD(t,e){return cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},cD(t,e)}function m2(t,e,a){return e=lW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function lW(t){var e=wfe(t,"string");return rv(e)=="symbol"?e:e+""}function wfe(t,e){if(rv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Rfe(t,e){if(t==null)return{};var a=Tfe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Tfe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Sfe(t){return t.value}function Cfe(t,e){if(It.isValidElement(t))return It.cloneElement(t,e);if(typeof t=="function")return It.createElement(t,e);e.ref;var a=Rfe(e,pfe);return It.createElement(w3,a)}var A8=1,If=function(t){function e(){var a;mfe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=gfe(this,e,[].concat(s)),m2(a,"lastBoundingBox",{width:-1,height:-1}),a}return vfe(e,t),yfe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>A8||Math.abs(s.height-this.lastBoundingBox.height)>A8)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Xm({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,l=s.layout,h=s.align,n=s.verticalAlign,w=s.margin,T=s.chartWidth,E=s.chartHeight,z,k;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(h==="center"&&l==="vertical"){var U=this.getBBoxSnapshot();z={left:((T||0)-U.width)/2}}else z=h==="right"?{right:w&&w.right||0}:{left:w&&w.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(n==="middle"){var q=this.getBBoxSnapshot();k={top:((E||0)-q.height)/2}}else k=n==="bottom"?{bottom:w&&w.bottom||0}:{top:w&&w.top||0};return Xm(Xm({},z),k)}},{key:"render",value:function(){var r=this,s=this.props,l=s.content,h=s.width,n=s.height,w=s.wrapperStyle,T=s.payloadUniqBy,E=s.payload,z=Xm(Xm({position:"absolute",width:h||"auto",height:n||"auto"},this.getDefaultPosition(w)),w);return It.createElement("div",{className:"recharts-legend-wrapper",style:z,ref:function(U){r.wrapperNode=U}},Cfe(l,Xm(Xm({},this.props),{},{payload:sW(E,T,Sfe)})))}}],[{key:"getWithHeight",value:function(r,s){var l=Xm(Xm({},this.defaultProps),r.props),h=l.layout;return h==="vertical"&&mr(r.props.height)?{height:r.props.height}:h==="horizontal"?{width:r.props.width||s}:null}}])}(rt.PureComponent);m2(If,"displayName","Legend");m2(If,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var sz,_8;function bfe(){if(_8)return sz;_8=1;var t=AT(),e=T3(),a=Ph(),r=t?t.isConcatSpreadable:void 0;function s(l){return a(l)||e(l)||!!(r&&l&&l[r])}return sz=s,sz}var oz,v8;function uW(){if(v8)return oz;v8=1;var t=XK(),e=bfe();function a(r,s,l,h,n){var w=-1,T=r.length;for(l||(l=e),n||(n=[]);++w<T;){var E=r[w];s>0&&l(E)?s>1?a(E,s-1,l,h,n):t(n,E):h||(n[n.length]=E)}return n}return oz=a,oz}var lz,w8;function xfe(){if(w8)return lz;w8=1;function t(e){return function(a,r,s){for(var l=-1,h=Object(a),n=s(a),w=n.length;w--;){var T=n[e?w:++l];if(r(h[T],T,h)===!1)break}return a}}return lz=t,lz}var uz,R8;function Pfe(){if(R8)return uz;R8=1;var t=xfe(),e=t();return uz=e,uz}var cz,T8;function cW(){if(T8)return cz;T8=1;var t=Pfe(),e=p2();function a(r,s){return r&&t(r,s,e)}return cz=a,cz}var dz,S8;function Efe(){if(S8)return dz;S8=1;var t=vT();function e(a,r){return function(s,l){if(s==null)return s;if(!t(s))return a(s,l);for(var h=s.length,n=r?h:-1,w=Object(s);(r?n--:++n<h)&&l(w[n],n,w)!==!1;);return s}}return dz=e,dz}var hz,C8;function x3(){if(C8)return hz;C8=1;var t=cW(),e=Efe(),a=e(t);return hz=a,hz}var fz,b8;function dW(){if(b8)return fz;b8=1;var t=x3(),e=vT();function a(r,s){var l=-1,h=e(r)?Array(r.length):[];return t(r,function(n,w,T){h[++l]=s(n,w,T)}),h}return fz=a,fz}var pz,x8;function Nfe(){if(x8)return pz;x8=1;function t(e,a){var r=e.length;for(e.sort(a);r--;)e[r]=e[r].value;return e}return pz=t,pz}var mz,P8;function Vfe(){if(P8)return mz;P8=1;var t=Fv();function e(a,r){if(a!==r){var s=a!==void 0,l=a===null,h=a===a,n=t(a),w=r!==void 0,T=r===null,E=r===r,z=t(r);if(!T&&!z&&!n&&a>r||n&&w&&E&&!T&&!z||l&&w&&E||!s&&E||!h)return 1;if(!l&&!n&&!z&&a<r||z&&s&&h&&!l&&!n||T&&s&&h||!w&&h||!E)return-1}return 0}return mz=e,mz}var yz,E8;function zfe(){if(E8)return yz;E8=1;var t=Vfe();function e(a,r,s){for(var l=-1,h=a.criteria,n=r.criteria,w=h.length,T=s.length;++l<w;){var E=t(h[l],n[l]);if(E){if(l>=T)return E;var z=s[l];return E*(z=="desc"?-1:1)}}return a.index-r.index}return yz=e,yz}var gz,N8;function Ofe(){if(N8)return gz;N8=1;var t=f3(),e=p3(),a=Vm(),r=dW(),s=Nfe(),l=QK(),h=zfe(),n=Bv(),w=Ph();function T(E,z,k){z.length?z=t(z,function(H){return w(H)?function($){return e($,H.length===1?H[0]:H)}:H}):z=[n];var U=-1;z=t(z,l(a));var q=r(E,function(H,$,Q){var ne=t(z,function(de){return de(H)});return{criteria:ne,index:++U,value:H}});return s(q,function(H,$){return h(H,$,k)})}return gz=T,gz}var Az,V8;function Dfe(){if(V8)return Az;V8=1;function t(e,a,r){switch(r.length){case 0:return e.call(a);case 1:return e.call(a,r[0]);case 2:return e.call(a,r[0],r[1]);case 3:return e.call(a,r[0],r[1],r[2])}return e.apply(a,r)}return Az=t,Az}var _z,z8;function Mfe(){if(z8)return _z;z8=1;var t=Dfe(),e=Math.max;function a(r,s,l){return s=e(s===void 0?r.length-1:s,0),function(){for(var h=arguments,n=-1,w=e(h.length-s,0),T=Array(w);++n<w;)T[n]=h[s+n];n=-1;for(var E=Array(s+1);++n<s;)E[n]=h[n];return E[s]=l(T),t(r,this,E)}}return _z=a,_z}var vz,O8;function Ife(){if(O8)return vz;O8=1;function t(e){return function(){return e}}return vz=t,vz}var wz,D8;function hW(){if(D8)return wz;D8=1;var t=y0(),e=function(){try{var a=t(Object,"defineProperty");return a({},"",{}),a}catch{}}();return wz=e,wz}var Rz,M8;function Lfe(){if(M8)return Rz;M8=1;var t=Ife(),e=hW(),a=Bv(),r=e?function(s,l){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(l),writable:!0})}:a;return Rz=r,Rz}var Tz,I8;function Ffe(){if(I8)return Tz;I8=1;var t=800,e=16,a=Date.now;function r(s){var l=0,h=0;return function(){var n=a(),w=e-(n-h);if(h=n,w>0){if(++l>=t)return arguments[0]}else l=0;return s.apply(void 0,arguments)}}return Tz=r,Tz}var Sz,L8;function Ufe(){if(L8)return Sz;L8=1;var t=Lfe(),e=Ffe(),a=e(t);return Sz=a,Sz}var Cz,F8;function kfe(){if(F8)return Cz;F8=1;var t=Bv(),e=Mfe(),a=Ufe();function r(s,l){return a(e(s,l,t),s+"")}return Cz=r,Cz}var bz,U8;function y2(){if(U8)return bz;U8=1;var t=c3(),e=vT(),a=S3(),r=Lg();function s(l,h,n){if(!r(n))return!1;var w=typeof h;return(w=="number"?e(n)&&a(h,n.length):w=="string"&&h in n)?t(n[h],l):!1}return bz=s,bz}var xz,k8;function Bfe(){if(k8)return xz;k8=1;var t=uW(),e=Ofe(),a=kfe(),r=y2(),s=a(function(l,h){if(l==null)return[];var n=h.length;return n>1&&r(l,h[0],h[1])?h=[]:n>2&&r(h[0],h[1],h[2])&&(h=[h[0]]),e(l,t(h,1),[])});return xz=s,xz}var Gfe=Bfe();const P3=Xi(Gfe);function cR(t){"@babel/helpers - typeof";return cR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cR(t)}function dD(){return dD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},dD.apply(this,arguments)}function jfe(t,e){return $fe(t)||Hfe(t,e)||qfe(t,e)||Zfe()}function Zfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qfe(t,e){if(t){if(typeof t=="string")return B8(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return B8(t,e)}}function B8(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Hfe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function $fe(t){if(Array.isArray(t))return t}function G8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Pz(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?G8(Object(a),!0).forEach(function(r){Kfe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):G8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Kfe(t,e,a){return e=Wfe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Wfe(t){var e=Yfe(t,"string");return cR(e)=="symbol"?e:e+""}function Yfe(t,e){if(cR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(cR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xfe(t){return Array.isArray(t)&&Mu(t[0])&&Mu(t[1])?t.join(" ~ "):t}var Jfe=function(e){var a=e.separator,r=a===void 0?" : ":a,s=e.contentStyle,l=s===void 0?{}:s,h=e.itemStyle,n=h===void 0?{}:h,w=e.labelStyle,T=w===void 0?{}:w,E=e.payload,z=e.formatter,k=e.itemSorter,U=e.wrapperClassName,q=e.labelClassName,H=e.label,$=e.labelFormatter,Q=e.accessibilityLayer,ne=Q===void 0?!1:Q,de=function(){if(E&&E.length){var we={padding:0,margin:0},Me=(k?P3(E,k):E).map(function(Ve,Ie){if(Ve.type==="none")return null;var Ue=Pz({display:"block",paddingTop:4,paddingBottom:4,color:Ve.color||"#000"},n),Be=Ve.formatter||z||Xfe,ke=Ve.value,Je=Ve.name,Le=ke,qe=Je;if(Be&&Le!=null&&qe!=null){var ye=Be(ke,Je,Ve,Ie,E);if(Array.isArray(ye)){var ze=jfe(ye,2);Le=ze[0],qe=ze[1]}else Le=ye}return It.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Ie),style:Ue},Mu(qe)?It.createElement("span",{className:"recharts-tooltip-item-name"},qe):null,Mu(qe)?It.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,It.createElement("span",{className:"recharts-tooltip-item-value"},Le),It.createElement("span",{className:"recharts-tooltip-item-unit"},Ve.unit||""))});return It.createElement("ul",{className:"recharts-tooltip-item-list",style:we},Me)}return null},ge=Pz({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},l),fe=Pz({margin:0},T),_e=!si(H),me=_e?H:"",Ae=hi("recharts-default-tooltip",U),Te=hi("recharts-tooltip-label",q);_e&&$&&E!==void 0&&E!==null&&(me=$(H,E));var Oe=ne?{role:"status","aria-live":"assertive"}:{};return It.createElement("div",dD({className:Ae,style:ge},Oe),It.createElement("p",{className:Te,style:fe},It.isValidElement(me)?me:"".concat(me)),de())};function dR(t){"@babel/helpers - typeof";return dR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dR(t)}function QS(t,e,a){return e=Qfe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Qfe(t){var e=epe(t,"string");return dR(e)=="symbol"?e:e+""}function epe(t,e){if(dR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(dR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nw="recharts-tooltip-wrapper",tpe={visibility:"hidden"};function ape(t){var e=t.coordinate,a=t.translateX,r=t.translateY;return hi(nw,QS(QS(QS(QS({},"".concat(nw,"-right"),mr(a)&&e&&mr(e.x)&&a>=e.x),"".concat(nw,"-left"),mr(a)&&e&&mr(e.x)&&a<e.x),"".concat(nw,"-bottom"),mr(r)&&e&&mr(e.y)&&r>=e.y),"".concat(nw,"-top"),mr(r)&&e&&mr(e.y)&&r<e.y))}function j8(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.key,s=t.offsetTopLeft,l=t.position,h=t.reverseDirection,n=t.tooltipDimension,w=t.viewBox,T=t.viewBoxDimension;if(l&&mr(l[r]))return l[r];var E=a[r]-n-s,z=a[r]+s;if(e[r])return h[r]?E:z;if(h[r]){var k=E,U=w[r];return k<U?Math.max(z,w[r]):Math.max(E,w[r])}var q=z+n,H=w[r]+T;return q>H?Math.max(E,w[r]):Math.max(z,w[r])}function rpe(t){var e=t.translateX,a=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(a,"px, 0)"):"translate(".concat(e,"px, ").concat(a,"px)")}}function npe(t){var e=t.allowEscapeViewBox,a=t.coordinate,r=t.offsetTopLeft,s=t.position,l=t.reverseDirection,h=t.tooltipBox,n=t.useTranslate3d,w=t.viewBox,T,E,z;return h.height>0&&h.width>0&&a?(E=j8({allowEscapeViewBox:e,coordinate:a,key:"x",offsetTopLeft:r,position:s,reverseDirection:l,tooltipDimension:h.width,viewBox:w,viewBoxDimension:w.width}),z=j8({allowEscapeViewBox:e,coordinate:a,key:"y",offsetTopLeft:r,position:s,reverseDirection:l,tooltipDimension:h.height,viewBox:w,viewBoxDimension:w.height}),T=rpe({translateX:E,translateY:z,useTranslate3d:n})):T=tpe,{cssProperties:T,cssClasses:ape({translateX:E,translateY:z,coordinate:a})}}function nv(t){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nv(t)}function Z8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function q8(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Z8(Object(a),!0).forEach(function(r){fD(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ipe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function spe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pW(r.key),r)}}function ope(t,e,a){return e&&spe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lpe(t,e,a){return e=Tb(e),upe(t,fW()?Reflect.construct(e,a||[],Tb(t).constructor):e.apply(t,a))}function upe(t,e){if(e&&(nv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cpe(t)}function cpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fW=function(){return!!t})()}function Tb(t){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Tb(t)}function dpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hD(t,e)}function hD(t,e){return hD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},hD(t,e)}function fD(t,e,a){return e=pW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pW(t){var e=hpe(t,"string");return nv(e)=="symbol"?e:e+""}function hpe(t,e){if(nv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(nv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var H8=1,fpe=function(t){function e(){var a;ipe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=lpe(this,e,[].concat(s)),fD(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),fD(a,"handleKeyDown",function(h){if(h.key==="Escape"){var n,w,T,E;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(w=a.props.coordinate)===null||w===void 0?void 0:w.x)!==null&&n!==void 0?n:0,y:(T=(E=a.props.coordinate)===null||E===void 0?void 0:E.y)!==null&&T!==void 0?T:0}})}}),a}return dpe(e,t),ope(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>H8||Math.abs(r.height-this.state.lastBoundingBox.height)>H8)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,l=s.active,h=s.allowEscapeViewBox,n=s.animationDuration,w=s.animationEasing,T=s.children,E=s.coordinate,z=s.hasPayload,k=s.isAnimationActive,U=s.offset,q=s.position,H=s.reverseDirection,$=s.useTranslate3d,Q=s.viewBox,ne=s.wrapperStyle,de=npe({allowEscapeViewBox:h,coordinate:E,offsetTopLeft:U,position:q,reverseDirection:H,tooltipBox:this.state.lastBoundingBox,useTranslate3d:$,viewBox:Q}),ge=de.cssClasses,fe=de.cssProperties,_e=q8(q8({transition:k&&l?"transform ".concat(n,"ms ").concat(w):void 0},fe),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&z?"visible":"hidden",position:"absolute",top:0,left:0},ne);return It.createElement("div",{tabIndex:-1,className:ge,style:_e,ref:function(Ae){r.wrapperNode=Ae}},T)}}])}(rt.PureComponent),ppe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Fg={isSsr:ppe()};function iv(t){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iv(t)}function $8(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function K8(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?$8(Object(a),!0).forEach(function(r){E3(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$8(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function mpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ype(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yW(r.key),r)}}function gpe(t,e,a){return e&&ype(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ape(t,e,a){return e=Sb(e),_pe(t,mW()?Reflect.construct(e,a||[],Sb(t).constructor):e.apply(t,a))}function _pe(t,e){if(e&&(iv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vpe(t)}function vpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mW=function(){return!!t})()}function Sb(t){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Sb(t)}function wpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pD(t,e)}function pD(t,e){return pD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},pD(t,e)}function E3(t,e,a){return e=yW(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function yW(t){var e=Rpe(t,"string");return iv(e)=="symbol"?e:e+""}function Rpe(t,e){if(iv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Tpe(t){return t.dataKey}function Spe(t,e){return It.isValidElement(t)?It.cloneElement(t,e):typeof t=="function"?It.createElement(t,e):It.createElement(Jfe,e)}var Ou=function(t){function e(){return mpe(this,e),Ape(this,e,arguments)}return wpe(e,t),gpe(e,[{key:"render",value:function(){var r=this,s=this.props,l=s.active,h=s.allowEscapeViewBox,n=s.animationDuration,w=s.animationEasing,T=s.content,E=s.coordinate,z=s.filterNull,k=s.isAnimationActive,U=s.offset,q=s.payload,H=s.payloadUniqBy,$=s.position,Q=s.reverseDirection,ne=s.useTranslate3d,de=s.viewBox,ge=s.wrapperStyle,fe=q??[];z&&fe.length&&(fe=sW(q.filter(function(me){return me.value!=null&&(me.hide!==!0||r.props.includeHidden)}),H,Tpe));var _e=fe.length>0;return It.createElement(fpe,{allowEscapeViewBox:h,animationDuration:n,animationEasing:w,isAnimationActive:k,active:l,coordinate:E,hasPayload:_e,offset:U,position:$,reverseDirection:Q,useTranslate3d:ne,viewBox:de,wrapperStyle:ge},Spe(T,K8(K8({},this.props),{},{payload:fe})))}}])}(rt.PureComponent);E3(Ou,"displayName","Tooltip");E3(Ou,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Fg.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Ez,W8;function Cpe(){if(W8)return Ez;W8=1;var t=Nm(),e=function(){return t.Date.now()};return Ez=e,Ez}var Nz,Y8;function bpe(){if(Y8)return Nz;Y8=1;var t=/\s/;function e(a){for(var r=a.length;r--&&t.test(a.charAt(r)););return r}return Nz=e,Nz}var Vz,X8;function xpe(){if(X8)return Vz;X8=1;var t=bpe(),e=/^\s+/;function a(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Vz=a,Vz}var zz,J8;function gW(){if(J8)return zz;J8=1;var t=xpe(),e=Lg(),a=Fv(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,h=/^0o[0-7]+$/i,n=parseInt;function w(T){if(typeof T=="number")return T;if(a(T))return r;if(e(T)){var E=typeof T.valueOf=="function"?T.valueOf():T;T=e(E)?E+"":E}if(typeof T!="string")return T===0?T:+T;T=t(T);var z=l.test(T);return z||h.test(T)?n(T.slice(2),z?2:8):s.test(T)?r:+T}return zz=w,zz}var Oz,Q8;function Ppe(){if(Q8)return Oz;Q8=1;var t=Lg(),e=Cpe(),a=gW(),r="Expected a function",s=Math.max,l=Math.min;function h(n,w,T){var E,z,k,U,q,H,$=0,Q=!1,ne=!1,de=!0;if(typeof n!="function")throw new TypeError(r);w=a(w)||0,t(T)&&(Q=!!T.leading,ne="maxWait"in T,k=ne?s(a(T.maxWait)||0,w):k,de="trailing"in T?!!T.trailing:de);function ge(Me){var Ve=E,Ie=z;return E=z=void 0,$=Me,U=n.apply(Ie,Ve),U}function fe(Me){return $=Me,q=setTimeout(Ae,w),Q?ge(Me):U}function _e(Me){var Ve=Me-H,Ie=Me-$,Ue=w-Ve;return ne?l(Ue,k-Ie):Ue}function me(Me){var Ve=Me-H,Ie=Me-$;return H===void 0||Ve>=w||Ve<0||ne&&Ie>=k}function Ae(){var Me=e();if(me(Me))return Te(Me);q=setTimeout(Ae,_e(Me))}function Te(Me){return q=void 0,de&&E?ge(Me):(E=z=void 0,U)}function Oe(){q!==void 0&&clearTimeout(q),$=0,E=H=z=q=void 0}function ie(){return q===void 0?U:Te(e())}function we(){var Me=e(),Ve=me(Me);if(E=arguments,z=this,H=Me,Ve){if(q===void 0)return fe(H);if(ne)return clearTimeout(q),q=setTimeout(Ae,w),ge(H)}return q===void 0&&(q=setTimeout(Ae,w)),U}return we.cancel=Oe,we.flush=ie,we}return Oz=h,Oz}var Dz,eG;function Epe(){if(eG)return Dz;eG=1;var t=Ppe(),e=Lg(),a="Expected a function";function r(s,l,h){var n=!0,w=!0;if(typeof s!="function")throw new TypeError(a);return e(h)&&(n="leading"in h?!!h.leading:n,w="trailing"in h?!!h.trailing:w),t(s,l,{leading:n,maxWait:l,trailing:w})}return Dz=r,Dz}var Npe=Epe();const AW=Xi(Npe);function hR(t){"@babel/helpers - typeof";return hR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hR(t)}function tG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function eC(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?tG(Object(a),!0).forEach(function(r){Vpe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Vpe(t,e,a){return e=zpe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function zpe(t){var e=Ope(t,"string");return hR(e)=="symbol"?e:e+""}function Ope(t,e){if(hR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(hR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dpe(t,e){return Fpe(t)||Lpe(t,e)||Ipe(t,e)||Mpe()}function Mpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ipe(t,e){if(t){if(typeof t=="string")return aG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return aG(t,e)}}function aG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Lpe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function Fpe(t){if(Array.isArray(t))return t}var hm=rt.forwardRef(function(t,e){var a=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,l=t.width,h=l===void 0?"100%":l,n=t.height,w=n===void 0?"100%":n,T=t.minWidth,E=T===void 0?0:T,z=t.minHeight,k=t.maxHeight,U=t.children,q=t.debounce,H=q===void 0?0:q,$=t.id,Q=t.className,ne=t.onResize,de=t.style,ge=de===void 0?{}:de,fe=rt.useRef(null),_e=rt.useRef();_e.current=ne,rt.useImperativeHandle(e,function(){return Object.defineProperty(fe.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),fe.current},configurable:!0})});var me=rt.useState({containerWidth:s.width,containerHeight:s.height}),Ae=Dpe(me,2),Te=Ae[0],Oe=Ae[1],ie=rt.useCallback(function(Me,Ve){Oe(function(Ie){var Ue=Math.round(Me),Be=Math.round(Ve);return Ie.containerWidth===Ue&&Ie.containerHeight===Be?Ie:{containerWidth:Ue,containerHeight:Be}})},[]);rt.useEffect(function(){var Me=function(Je){var Le,qe=Je[0].contentRect,ye=qe.width,ze=qe.height;ie(ye,ze),(Le=_e.current)===null||Le===void 0||Le.call(_e,ye,ze)};H>0&&(Me=AW(Me,H,{trailing:!0,leading:!1}));var Ve=new ResizeObserver(Me),Ie=fe.current.getBoundingClientRect(),Ue=Ie.width,Be=Ie.height;return ie(Ue,Be),Ve.observe(fe.current),function(){Ve.disconnect()}},[ie,H]);var we=rt.useMemo(function(){var Me=Te.containerWidth,Ve=Te.containerHeight;if(Me<0||Ve<0)return null;Cp(kA(h)||kA(w),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,h,w),Cp(!a||a>0,"The aspect(%s) must be greater than zero.",a);var Ie=kA(h)?Me:h,Ue=kA(w)?Ve:w;a&&a>0&&(Ie?Ue=Ie/a:Ue&&(Ie=Ue*a),k&&Ue>k&&(Ue=k)),Cp(Ie>0||Ue>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Ie,Ue,h,w,E,z,a);var Be=!Array.isArray(U)&&cy(U.type).endsWith("Chart");return It.Children.map(U,function(ke){return It.isValidElement(ke)?rt.cloneElement(ke,eC({width:Ie,height:Ue},Be?{style:eC({height:"100%",width:"100%",maxHeight:Ue,maxWidth:Ie},ke.props.style)}:{})):ke})},[a,U,w,k,z,E,Te,h]);return It.createElement("div",{id:$?"".concat($):void 0,className:hi("recharts-responsive-container",Q),style:eC(eC({},ge),{},{width:h,height:w,minWidth:E,minHeight:z,maxHeight:k}),ref:fe},we)}),fR=function(e){return null};fR.displayName="Cell";function pR(t){"@babel/helpers - typeof";return pR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pR(t)}function rG(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function mD(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?rG(Object(a),!0).forEach(function(r){Upe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rG(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Upe(t,e,a){return e=kpe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function kpe(t){var e=Bpe(t,"string");return pR(e)=="symbol"?e:e+""}function Bpe(t,e){if(pR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(pR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u_={widthCache:{},cacheCount:0},Gpe=2e3,jpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},nG="recharts_measurement_span";function Zpe(t){var e=mD({},t);return Object.keys(e).forEach(function(a){e[a]||delete e[a]}),e}var Dw=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Fg.isSsr)return{width:0,height:0};var r=Zpe(a),s=JSON.stringify({text:e,copyStyle:r});if(u_.widthCache[s])return u_.widthCache[s];try{var l=document.getElementById(nG);l||(l=document.createElement("span"),l.setAttribute("id",nG),l.setAttribute("aria-hidden","true"),document.body.appendChild(l));var h=mD(mD({},jpe),r);Object.assign(l.style,h),l.textContent="".concat(e);var n=l.getBoundingClientRect(),w={width:n.width,height:n.height};return u_.widthCache[s]=w,++u_.cacheCount>Gpe&&(u_.cacheCount=0,u_.widthCache={}),w}catch{return{width:0,height:0}}},qpe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function mR(t){"@babel/helpers - typeof";return mR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mR(t)}function Cb(t,e){return Wpe(t)||Kpe(t,e)||$pe(t,e)||Hpe()}function Hpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $pe(t,e){if(t){if(typeof t=="string")return iG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return iG(t,e)}}function iG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Kpe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;w=!1}else for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function Wpe(t){if(Array.isArray(t))return t}function Ype(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sG(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jpe(r.key),r)}}function Xpe(t,e,a){return e&&sG(t.prototype,e),a&&sG(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jpe(t){var e=Qpe(t,"string");return mR(e)=="symbol"?e:e+""}function Qpe(t,e){if(mR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(mR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_W={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ame=Object.keys(_W),S_="NaN";function rme(t,e){return t*_W[e]}var tC=function(){function t(e,a){Ype(this,t),this.num=e,this.unit=a,this.num=e,this.unit=a,Number.isNaN(e)&&(this.unit=""),a!==""&&!eme.test(a)&&(this.num=NaN,this.unit=""),ame.includes(a)&&(this.num=rme(e,a),this.unit="px")}return Xpe(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,s=(r=tme.exec(a))!==null&&r!==void 0?r:[],l=Cb(s,3),h=l[1],n=l[2];return new t(parseFloat(h),n??"")}}])}();function vW(t){if(t.includes(S_))return S_;for(var e=t;e.includes("*")||e.includes("/");){var a,r=(a=oG.exec(e))!==null&&a!==void 0?a:[],s=Cb(r,4),l=s[1],h=s[2],n=s[3],w=tC.parse(l??""),T=tC.parse(n??""),E=h==="*"?w.multiply(T):w.divide(T);if(E.isNaN())return S_;e=e.replace(oG,E.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var z,k=(z=lG.exec(e))!==null&&z!==void 0?z:[],U=Cb(k,4),q=U[1],H=U[2],$=U[3],Q=tC.parse(q??""),ne=tC.parse($??""),de=H==="+"?Q.add(ne):Q.subtract(ne);if(de.isNaN())return S_;e=e.replace(lG,de.toString())}return e}var uG=/\(([^()]*)\)/;function nme(t){for(var e=t;e.includes("(");){var a=uG.exec(e),r=Cb(a,2),s=r[1];e=e.replace(uG,vW(s))}return e}function ime(t){var e=t.replace(/\s+/g,"");return e=nme(e),e=vW(e),e}function sme(t){try{return ime(t)}catch{return S_}}function Mz(t){var e=sme(t.slice(5,-1));return e===S_?"":e}var ome=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],lme=["dx","dy","angle","className","breakAll"];function yD(){return yD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},yD.apply(this,arguments)}function cG(t,e){if(t==null)return{};var a=ume(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ume(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function dG(t,e){return fme(t)||hme(t,e)||dme(t,e)||cme()}function cme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dme(t,e){if(t){if(typeof t=="string")return hG(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return hG(t,e)}}function hG(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function hme(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e===0){if(Object(a)!==a)return;w=!1}else for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function fme(t){if(Array.isArray(t))return t}var wW=/[ \f\n\r\t\v\u2028\u2029]+/,RW=function(e){var a=e.children,r=e.breakAll,s=e.style;try{var l=[];si(a)||(r?l=a.toString().split(""):l=a.toString().split(wW));var h=l.map(function(w){return{word:w,width:Dw(w,s).width}}),n=r?0:Dw(" ",s).width;return{wordsWithComputedWidth:h,spaceWidth:n}}catch{return null}},pme=function(e,a,r,s,l){var h=e.maxLines,n=e.children,w=e.style,T=e.breakAll,E=mr(h),z=n,k=function(){var Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ie.reduce(function(Ue,Be){var ke=Be.word,Je=Be.width,Le=Ue[Ue.length-1];if(Le&&(s==null||l||Le.width+Je+r<Number(s)))Le.words.push(ke),Le.width+=Je+r;else{var qe={words:[ke],width:Je};Ue.push(qe)}return Ue},[])},U=k(a),q=function(Ie){return Ie.reduce(function(Ue,Be){return Ue.width>Be.width?Ue:Be})};if(!E)return U;for(var H="…",$=function(Ie){var Ue=z.slice(0,Ie),Be=RW({breakAll:T,style:w,children:Ue+H}).wordsWithComputedWidth,ke=k(Be),Je=ke.length>h||q(ke).width>Number(s);return[Je,ke]},Q=0,ne=z.length-1,de=0,ge;Q<=ne&&de<=z.length-1;){var fe=Math.floor((Q+ne)/2),_e=fe-1,me=$(_e),Ae=dG(me,2),Te=Ae[0],Oe=Ae[1],ie=$(fe),we=dG(ie,1),Me=we[0];if(!Te&&!Me&&(Q=fe+1),Te&&Me&&(ne=fe-1),!Te&&Me){ge=Oe;break}de++}return ge||U},fG=function(e){var a=si(e)?[]:e.toString().split(wW);return[{words:a}]},mme=function(e){var a=e.width,r=e.scaleToFit,s=e.children,l=e.style,h=e.breakAll,n=e.maxLines;if((a||r)&&!Fg.isSsr){var w,T,E=RW({breakAll:h,children:s,style:l});if(E){var z=E.wordsWithComputedWidth,k=E.spaceWidth;w=z,T=k}else return fG(s);return pme({breakAll:h,children:s,maxLines:n,style:l},w,T,a,r)}return fG(s)},pG="#808080",s0=function(e){var a=e.x,r=a===void 0?0:a,s=e.y,l=s===void 0?0:s,h=e.lineHeight,n=h===void 0?"1em":h,w=e.capHeight,T=w===void 0?"0.71em":w,E=e.scaleToFit,z=E===void 0?!1:E,k=e.textAnchor,U=k===void 0?"start":k,q=e.verticalAnchor,H=q===void 0?"end":q,$=e.fill,Q=$===void 0?pG:$,ne=cG(e,ome),de=rt.useMemo(function(){return mme({breakAll:ne.breakAll,children:ne.children,maxLines:ne.maxLines,scaleToFit:z,style:ne.style,width:ne.width})},[ne.breakAll,ne.children,ne.maxLines,z,ne.style,ne.width]),ge=ne.dx,fe=ne.dy,_e=ne.angle,me=ne.className,Ae=ne.breakAll,Te=cG(ne,lme);if(!Mu(r)||!Mu(l))return null;var Oe=r+(mr(ge)?ge:0),ie=l+(mr(fe)?fe:0),we;switch(H){case"start":we=Mz("calc(".concat(T,")"));break;case"middle":we=Mz("calc(".concat((de.length-1)/2," * -").concat(n," + (").concat(T," / 2))"));break;default:we=Mz("calc(".concat(de.length-1," * -").concat(n,")"));break}var Me=[];if(z){var Ve=de[0].width,Ie=ne.width;Me.push("scale(".concat((mr(Ie)?Ie/Ve:1)/Ve,")"))}return _e&&Me.push("rotate(".concat(_e,", ").concat(Oe,", ").concat(ie,")")),Me.length&&(Te.transform=Me.join(" ")),It.createElement("text",yD({},fn(Te,!0),{x:Oe,y:ie,className:hi("recharts-text",me),textAnchor:U,fill:Q.includes("url")?pG:Q}),de.map(function(Ue,Be){var ke=Ue.words.join(Ae?"":" ");return It.createElement("tspan",{x:Oe,dy:Be===0?we:n,key:"".concat(ke,"-").concat(Be)},ke)}))};function bg(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function yme(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function N3(t){let e,a,r;t.length!==2?(e=bg,a=(n,w)=>bg(t(n),w),r=(n,w)=>t(n)-w):(e=t===bg||t===yme?t:gme,a=t,r=t);function s(n,w,T=0,E=n.length){if(T<E){if(e(w,w)!==0)return E;do{const z=T+E>>>1;a(n[z],w)<0?T=z+1:E=z}while(T<E)}return T}function l(n,w,T=0,E=n.length){if(T<E){if(e(w,w)!==0)return E;do{const z=T+E>>>1;a(n[z],w)<=0?T=z+1:E=z}while(T<E)}return T}function h(n,w,T=0,E=n.length){const z=s(n,w,T,E-1);return z>T&&r(n[z-1],w)>-r(n[z],w)?z-1:z}return{left:s,center:h,right:l}}function gme(){return 0}function TW(t){return t===null?NaN:+t}function*Ame(t,e){for(let a of t)a!=null&&(a=+a)>=a&&(yield a)}const _me=N3(bg),wT=_me.right;N3(TW).center;class mG extends Map{constructor(e,a=Rme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(yG(this,e))}has(e){return super.has(yG(this,e))}set(e,a){return super.set(vme(this,e),a)}delete(e){return super.delete(wme(this,e))}}function yG({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):a}function vme({_intern:t,_key:e},a){const r=e(a);return t.has(r)?t.get(r):(t.set(r,a),a)}function wme({_intern:t,_key:e},a){const r=e(a);return t.has(r)&&(a=t.get(r),t.delete(r)),a}function Rme(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Tme(t=bg){if(t===bg)return SW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,a)=>{const r=t(e,a);return r||r===0?r:(t(a,a)===0)-(t(e,e)===0)}}function SW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Sme=Math.sqrt(50),Cme=Math.sqrt(10),bme=Math.sqrt(2);function bb(t,e,a){const r=(e-t)/Math.max(0,a),s=Math.floor(Math.log10(r)),l=r/Math.pow(10,s),h=l>=Sme?10:l>=Cme?5:l>=bme?2:1;let n,w,T;return s<0?(T=Math.pow(10,-s)/h,n=Math.round(t*T),w=Math.round(e*T),n/T<t&&++n,w/T>e&&--w,T=-T):(T=Math.pow(10,s)*h,n=Math.round(t/T),w=Math.round(e/T),n*T<t&&++n,w*T>e&&--w),w<n&&.5<=a&&a<2?bb(t,e,a*2):[n,w,T]}function gD(t,e,a){if(e=+e,t=+t,a=+a,!(a>0))return[];if(t===e)return[t];const r=e<t,[s,l,h]=r?bb(e,t,a):bb(t,e,a);if(!(l>=s))return[];const n=l-s+1,w=new Array(n);if(r)if(h<0)for(let T=0;T<n;++T)w[T]=(l-T)/-h;else for(let T=0;T<n;++T)w[T]=(l-T)*h;else if(h<0)for(let T=0;T<n;++T)w[T]=(s+T)/-h;else for(let T=0;T<n;++T)w[T]=(s+T)*h;return w}function AD(t,e,a){return e=+e,t=+t,a=+a,bb(t,e,a)[2]}function _D(t,e,a){e=+e,t=+t,a=+a;const r=e<t,s=r?AD(e,t,a):AD(t,e,a);return(r?-1:1)*(s<0?1/-s:s)}function gG(t,e){let a;for(const r of t)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);return a}function AG(t,e){let a;for(const r of t)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);return a}function CW(t,e,a=0,r=1/0,s){if(e=Math.floor(e),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=e&&e<=r))return t;for(s=s===void 0?SW:Tme(s);r>a;){if(r-a>600){const w=r-a+1,T=e-a+1,E=Math.log(w),z=.5*Math.exp(2*E/3),k=.5*Math.sqrt(E*z*(w-z)/w)*(T-w/2<0?-1:1),U=Math.max(a,Math.floor(e-T*z/w+k)),q=Math.min(r,Math.floor(e+(w-T)*z/w+k));CW(t,e,U,q,s)}const l=t[e];let h=a,n=r;for(iw(t,a,e),s(t[r],l)>0&&iw(t,a,r);h<n;){for(iw(t,h,n),++h,--n;s(t[h],l)<0;)++h;for(;s(t[n],l)>0;)--n}s(t[a],l)===0?iw(t,a,n):(++n,iw(t,n,r)),n<=e&&(a=n+1),e<=n&&(r=n-1)}return t}function iw(t,e,a){const r=t[e];t[e]=t[a],t[a]=r}function xme(t,e,a){if(t=Float64Array.from(Ame(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return AG(t);if(e>=1)return gG(t);var r,s=(r-1)*e,l=Math.floor(s),h=gG(CW(t,l).subarray(0,l+1)),n=AG(t.subarray(l+1));return h+(n-h)*(s-l)}}function Pme(t,e,a=TW){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+a(t[0],0,t);if(e>=1)return+a(t[r-1],r-1,t);var r,s=(r-1)*e,l=Math.floor(s),h=+a(t[l],l,t),n=+a(t[l+1],l+1,t);return h+(n-h)*(s-l)}}function Eme(t,e,a){t=+t,e=+e,a=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+a;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/a))|0,l=new Array(s);++r<s;)l[r]=t+r*a;return l}function Gf(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function xy(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vD=Symbol("implicit");function V3(){var t=new mG,e=[],a=[],r=vD;function s(l){let h=t.get(l);if(h===void 0){if(r!==vD)return r;t.set(l,h=e.push(l)-1)}return a[h%a.length]}return s.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new mG;for(const h of l)t.has(h)||t.set(h,e.push(h)-1);return s},s.range=function(l){return arguments.length?(a=Array.from(l),s):a.slice()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.copy=function(){return V3(e,a).unknown(r)},Gf.apply(s,arguments),s}function yR(){var t=V3().unknown(void 0),e=t.domain,a=t.range,r=0,s=1,l,h,n=!1,w=0,T=0,E=.5;delete t.unknown;function z(){var k=e().length,U=s<r,q=U?s:r,H=U?r:s;l=(H-q)/Math.max(1,k-w+T*2),n&&(l=Math.floor(l)),q+=(H-q-l*(k-w))*E,h=l*(1-w),n&&(q=Math.round(q),h=Math.round(h));var $=Eme(k).map(function(Q){return q+l*Q});return a(U?$.reverse():$)}return t.domain=function(k){return arguments.length?(e(k),z()):e()},t.range=function(k){return arguments.length?([r,s]=k,r=+r,s=+s,z()):[r,s]},t.rangeRound=function(k){return[r,s]=k,r=+r,s=+s,n=!0,z()},t.bandwidth=function(){return h},t.step=function(){return l},t.round=function(k){return arguments.length?(n=!!k,z()):n},t.padding=function(k){return arguments.length?(w=Math.min(1,T=+k),z()):w},t.paddingInner=function(k){return arguments.length?(w=Math.min(1,k),z()):w},t.paddingOuter=function(k){return arguments.length?(T=+k,z()):T},t.align=function(k){return arguments.length?(E=Math.max(0,Math.min(1,k)),z()):E},t.copy=function(){return yR(e(),[r,s]).round(n).paddingInner(w).paddingOuter(T).align(E)},Gf.apply(z(),arguments)}function bW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return bW(e())},t}function Mw(){return bW(yR.apply(null,arguments).paddingInner(1))}function z3(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function xW(t,e){var a=Object.create(t.prototype);for(var r in e)a[r]=e[r];return a}function RT(){}var gR=.7,xb=1/gR,U_="\\s*([+-]?\\d+)\\s*",AR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nme=/^#([0-9a-f]{3,8})$/,Vme=new RegExp(`^rgb\\(${U_},${U_},${U_}\\)$`),zme=new RegExp(`^rgb\\(${Tm},${Tm},${Tm}\\)$`),Ome=new RegExp(`^rgba\\(${U_},${U_},${U_},${AR}\\)$`),Dme=new RegExp(`^rgba\\(${Tm},${Tm},${Tm},${AR}\\)$`),Mme=new RegExp(`^hsl\\(${AR},${Tm},${Tm}\\)$`),Ime=new RegExp(`^hsla\\(${AR},${Tm},${Tm},${AR}\\)$`),_G={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};z3(RT,_R,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:vG,formatHex:vG,formatHex8:Lme,formatHsl:Fme,formatRgb:wG,toString:wG});function vG(){return this.rgb().formatHex()}function Lme(){return this.rgb().formatHex8()}function Fme(){return PW(this).formatHsl()}function wG(){return this.rgb().formatRgb()}function _R(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Nme.exec(t))?(a=e[1].length,e=parseInt(e[1],16),a===6?RG(e):a===3?new Ch(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):a===8?aC(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):a===4?aC(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Vme.exec(t))?new Ch(e[1],e[2],e[3],1):(e=zme.exec(t))?new Ch(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ome.exec(t))?aC(e[1],e[2],e[3],e[4]):(e=Dme.exec(t))?aC(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Mme.exec(t))?CG(e[1],e[2]/100,e[3]/100,1):(e=Ime.exec(t))?CG(e[1],e[2]/100,e[3]/100,e[4]):_G.hasOwnProperty(t)?RG(_G[t]):t==="transparent"?new Ch(NaN,NaN,NaN,0):null}function RG(t){return new Ch(t>>16&255,t>>8&255,t&255,1)}function aC(t,e,a,r){return r<=0&&(t=e=a=NaN),new Ch(t,e,a,r)}function Ume(t){return t instanceof RT||(t=_R(t)),t?(t=t.rgb(),new Ch(t.r,t.g,t.b,t.opacity)):new Ch}function wD(t,e,a,r){return arguments.length===1?Ume(t):new Ch(t,e,a,r??1)}function Ch(t,e,a,r){this.r=+t,this.g=+e,this.b=+a,this.opacity=+r}z3(Ch,wD,xW(RT,{brighter(t){return t=t==null?xb:Math.pow(xb,t),new Ch(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gR:Math.pow(gR,t),new Ch(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ch(KA(this.r),KA(this.g),KA(this.b),Pb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TG,formatHex:TG,formatHex8:kme,formatRgb:SG,toString:SG}));function TG(){return`#${BA(this.r)}${BA(this.g)}${BA(this.b)}`}function kme(){return`#${BA(this.r)}${BA(this.g)}${BA(this.b)}${BA((isNaN(this.opacity)?1:this.opacity)*255)}`}function SG(){const t=Pb(this.opacity);return`${t===1?"rgb(":"rgba("}${KA(this.r)}, ${KA(this.g)}, ${KA(this.b)}${t===1?")":`, ${t})`}`}function Pb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function KA(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function BA(t){return t=KA(t),(t<16?"0":"")+t.toString(16)}function CG(t,e,a,r){return r<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new Sp(t,e,a,r)}function PW(t){if(t instanceof Sp)return new Sp(t.h,t.s,t.l,t.opacity);if(t instanceof RT||(t=_R(t)),!t)return new Sp;if(t instanceof Sp)return t;t=t.rgb();var e=t.r/255,a=t.g/255,r=t.b/255,s=Math.min(e,a,r),l=Math.max(e,a,r),h=NaN,n=l-s,w=(l+s)/2;return n?(e===l?h=(a-r)/n+(a<r)*6:a===l?h=(r-e)/n+2:h=(e-a)/n+4,n/=w<.5?l+s:2-l-s,h*=60):n=w>0&&w<1?0:h,new Sp(h,n,w,t.opacity)}function Bme(t,e,a,r){return arguments.length===1?PW(t):new Sp(t,e,a,r??1)}function Sp(t,e,a,r){this.h=+t,this.s=+e,this.l=+a,this.opacity=+r}z3(Sp,Bme,xW(RT,{brighter(t){return t=t==null?xb:Math.pow(xb,t),new Sp(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gR:Math.pow(gR,t),new Sp(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*e,s=2*a-r;return new Ch(Iz(t>=240?t-240:t+120,s,r),Iz(t,s,r),Iz(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Sp(bG(this.h),rC(this.s),rC(this.l),Pb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Pb(this.opacity);return`${t===1?"hsl(":"hsla("}${bG(this.h)}, ${rC(this.s)*100}%, ${rC(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bG(t){return t=(t||0)%360,t<0?t+360:t}function rC(t){return Math.max(0,Math.min(1,t||0))}function Iz(t,e,a){return(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)*255}const O3=t=>()=>t;function Gme(t,e){return function(a){return t+a*e}}function jme(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(r){return Math.pow(t+r*e,a)}}function Zme(t){return(t=+t)==1?EW:function(e,a){return a-e?jme(e,a,t):O3(isNaN(e)?a:e)}}function EW(t,e){var a=e-t;return a?Gme(t,a):O3(isNaN(t)?e:t)}const xG=function t(e){var a=Zme(e);function r(s,l){var h=a((s=wD(s)).r,(l=wD(l)).r),n=a(s.g,l.g),w=a(s.b,l.b),T=EW(s.opacity,l.opacity);return function(E){return s.r=h(E),s.g=n(E),s.b=w(E),s.opacity=T(E),s+""}}return r.gamma=t,r}(1);function qme(t,e){e||(e=[]);var a=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(l){for(s=0;s<a;++s)r[s]=t[s]*(1-l)+e[s]*l;return r}}function Hme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $me(t,e){var a=e?e.length:0,r=t?Math.min(a,t.length):0,s=new Array(r),l=new Array(a),h;for(h=0;h<r;++h)s[h]=Gv(t[h],e[h]);for(;h<a;++h)l[h]=e[h];return function(n){for(h=0;h<r;++h)l[h]=s[h](n);return l}}function Kme(t,e){var a=new Date;return t=+t,e=+e,function(r){return a.setTime(t*(1-r)+e*r),a}}function Eb(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}function Wme(t,e){var a={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?a[s]=Gv(t[s],e[s]):r[s]=e[s];return function(l){for(s in a)r[s]=a[s](l);return r}}var RD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lz=new RegExp(RD.source,"g");function Yme(t){return function(){return t}}function Xme(t){return function(e){return t(e)+""}}function Jme(t,e){var a=RD.lastIndex=Lz.lastIndex=0,r,s,l,h=-1,n=[],w=[];for(t=t+"",e=e+"";(r=RD.exec(t))&&(s=Lz.exec(e));)(l=s.index)>a&&(l=e.slice(a,l),n[h]?n[h]+=l:n[++h]=l),(r=r[0])===(s=s[0])?n[h]?n[h]+=s:n[++h]=s:(n[++h]=null,w.push({i:h,x:Eb(r,s)})),a=Lz.lastIndex;return a<e.length&&(l=e.slice(a),n[h]?n[h]+=l:n[++h]=l),n.length<2?w[0]?Xme(w[0].x):Yme(e):(e=w.length,function(T){for(var E=0,z;E<e;++E)n[(z=w[E]).i]=z.x(T);return n.join("")})}function Gv(t,e){var a=typeof e,r;return e==null||a==="boolean"?O3(e):(a==="number"?Eb:a==="string"?(r=_R(e))?(e=r,xG):Jme:e instanceof _R?xG:e instanceof Date?Kme:Hme(e)?qme:Array.isArray(e)?$me:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Wme:Eb)(t,e)}function D3(t,e){return t=+t,e=+e,function(a){return Math.round(t*(1-a)+e*a)}}function Qme(t,e){e===void 0&&(e=t,t=Gv);for(var a=0,r=e.length-1,s=e[0],l=new Array(r<0?0:r);a<r;)l[a]=t(s,s=e[++a]);return function(h){var n=Math.max(0,Math.min(r-1,Math.floor(h*=r)));return l[n](h-n)}}function eye(t){return function(){return t}}function Nb(t){return+t}var PG=[0,1];function Yd(t){return t}function TD(t,e){return(e-=t=+t)?function(a){return(a-t)/e}:eye(isNaN(e)?NaN:.5)}function tye(t,e){var a;return t>e&&(a=t,t=e,e=a),function(r){return Math.max(t,Math.min(e,r))}}function aye(t,e,a){var r=t[0],s=t[1],l=e[0],h=e[1];return s<r?(r=TD(s,r),l=a(h,l)):(r=TD(r,s),l=a(l,h)),function(n){return l(r(n))}}function rye(t,e,a){var r=Math.min(t.length,e.length)-1,s=new Array(r),l=new Array(r),h=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++h<r;)s[h]=TD(t[h],t[h+1]),l[h]=a(e[h],e[h+1]);return function(n){var w=wT(t,n,1,r)-1;return l[w](s[w](n))}}function TT(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function g2(){var t=PG,e=PG,a=Gv,r,s,l,h=Yd,n,w,T;function E(){var k=Math.min(t.length,e.length);return h!==Yd&&(h=tye(t[0],t[k-1])),n=k>2?rye:aye,w=T=null,z}function z(k){return k==null||isNaN(k=+k)?l:(w||(w=n(t.map(r),e,a)))(r(h(k)))}return z.invert=function(k){return h(s((T||(T=n(e,t.map(r),Eb)))(k)))},z.domain=function(k){return arguments.length?(t=Array.from(k,Nb),E()):t.slice()},z.range=function(k){return arguments.length?(e=Array.from(k),E()):e.slice()},z.rangeRound=function(k){return e=Array.from(k),a=D3,E()},z.clamp=function(k){return arguments.length?(h=k?!0:Yd,E()):h!==Yd},z.interpolate=function(k){return arguments.length?(a=k,E()):a},z.unknown=function(k){return arguments.length?(l=k,z):l},function(k,U){return r=k,s=U,E()}}function M3(){return g2()(Yd,Yd)}function nye(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vb(t,e){if((a=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var a,r=t.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+t.slice(a+1)]}function sv(t){return t=Vb(Math.abs(t)),t?t[1]:NaN}function iye(t,e){return function(a,r){for(var s=a.length,l=[],h=0,n=t[0],w=0;s>0&&n>0&&(w+n+1>r&&(n=Math.max(1,r-w)),l.push(a.substring(s-=n,s+n)),!((w+=n+1)>r));)n=t[h=(h+1)%t.length];return l.reverse().join(e)}}function sye(t){return function(e){return e.replace(/[0-9]/g,function(a){return t[+a]})}}var oye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vR(t){if(!(e=oye.exec(t)))throw new Error("invalid format: "+t);var e;return new I3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}vR.prototype=I3.prototype;function I3(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}I3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lye(t){e:for(var e=t.length,a=1,r=-1,s;a<e;++a)switch(t[a]){case".":r=s=a;break;case"0":r===0&&(r=a),s=a;break;default:if(!+t[a])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var NW;function uye(t,e){var a=Vb(t,e);if(!a)return t+"";var r=a[0],s=a[1],l=s-(NW=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,h=r.length;return l===h?r:l>h?r+new Array(l-h+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+Vb(t,Math.max(0,e+l-1))[0]}function EG(t,e){var a=Vb(t,e);if(!a)return t+"";var r=a[0],s=a[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const NG={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:nye,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>EG(t*100,e),r:EG,s:uye,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function VG(t){return t}var zG=Array.prototype.map,OG=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function cye(t){var e=t.grouping===void 0||t.thousands===void 0?VG:iye(zG.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?VG:sye(zG.call(t.numerals,String)),h=t.percent===void 0?"%":t.percent+"",n=t.minus===void 0?"−":t.minus+"",w=t.nan===void 0?"NaN":t.nan+"";function T(z){z=vR(z);var k=z.fill,U=z.align,q=z.sign,H=z.symbol,$=z.zero,Q=z.width,ne=z.comma,de=z.precision,ge=z.trim,fe=z.type;fe==="n"?(ne=!0,fe="g"):NG[fe]||(de===void 0&&(de=12),ge=!0,fe="g"),($||k==="0"&&U==="=")&&($=!0,k="0",U="=");var _e=H==="$"?a:H==="#"&&/[boxX]/.test(fe)?"0"+fe.toLowerCase():"",me=H==="$"?r:/[%p]/.test(fe)?h:"",Ae=NG[fe],Te=/[defgprs%]/.test(fe);de=de===void 0?6:/[gprs]/.test(fe)?Math.max(1,Math.min(21,de)):Math.max(0,Math.min(20,de));function Oe(ie){var we=_e,Me=me,Ve,Ie,Ue;if(fe==="c")Me=Ae(ie)+Me,ie="";else{ie=+ie;var Be=ie<0||1/ie<0;if(ie=isNaN(ie)?w:Ae(Math.abs(ie),de),ge&&(ie=lye(ie)),Be&&+ie==0&&q!=="+"&&(Be=!1),we=(Be?q==="("?q:n:q==="-"||q==="("?"":q)+we,Me=(fe==="s"?OG[8+NW/3]:"")+Me+(Be&&q==="("?")":""),Te){for(Ve=-1,Ie=ie.length;++Ve<Ie;)if(Ue=ie.charCodeAt(Ve),48>Ue||Ue>57){Me=(Ue===46?s+ie.slice(Ve+1):ie.slice(Ve))+Me,ie=ie.slice(0,Ve);break}}}ne&&!$&&(ie=e(ie,1/0));var ke=we.length+ie.length+Me.length,Je=ke<Q?new Array(Q-ke+1).join(k):"";switch(ne&&$&&(ie=e(Je+ie,Je.length?Q-Me.length:1/0),Je=""),U){case"<":ie=we+ie+Me+Je;break;case"=":ie=we+Je+ie+Me;break;case"^":ie=Je.slice(0,ke=Je.length>>1)+we+ie+Me+Je.slice(ke);break;default:ie=Je+we+ie+Me;break}return l(ie)}return Oe.toString=function(){return z+""},Oe}function E(z,k){var U=T((z=vR(z),z.type="f",z)),q=Math.max(-8,Math.min(8,Math.floor(sv(k)/3)))*3,H=Math.pow(10,-q),$=OG[8+q/3];return function(Q){return U(H*Q)+$}}return{format:T,formatPrefix:E}}var nC,L3,VW;dye({thousands:",",grouping:[3],currency:["$",""]});function dye(t){return nC=cye(t),L3=nC.format,VW=nC.formatPrefix,nC}function hye(t){return Math.max(0,-sv(Math.abs(t)))}function fye(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sv(e)/3)))*3-sv(Math.abs(t)))}function pye(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,sv(e)-sv(t))+1}function zW(t,e,a,r){var s=_D(t,e,a),l;switch(r=vR(r??",f"),r.type){case"s":{var h=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(l=fye(s,h))&&(r.precision=l),VW(r,h)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=pye(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=hye(s))&&(r.precision=l-(r.type==="%")*2);break}}return L3(r)}function Ug(t){var e=t.domain;return t.ticks=function(a){var r=e();return gD(r[0],r[r.length-1],a??10)},t.tickFormat=function(a,r){var s=e();return zW(s[0],s[s.length-1],a??10,r)},t.nice=function(a){a==null&&(a=10);var r=e(),s=0,l=r.length-1,h=r[s],n=r[l],w,T,E=10;for(n<h&&(T=h,h=n,n=T,T=s,s=l,l=T);E-- >0;){if(T=AD(h,n,a),T===w)return r[s]=h,r[l]=n,e(r);if(T>0)h=Math.floor(h/T)*T,n=Math.ceil(n/T)*T;else if(T<0)h=Math.ceil(h*T)/T,n=Math.floor(n*T)/T;else break;w=T}return t},t}function zb(){var t=M3();return t.copy=function(){return TT(t,zb())},Gf.apply(t,arguments),Ug(t)}function OW(t){var e;function a(r){return r==null||isNaN(r=+r)?e:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(t=Array.from(r,Nb),a):t.slice()},a.unknown=function(r){return arguments.length?(e=r,a):e},a.copy=function(){return OW(t).unknown(e)},t=arguments.length?Array.from(t,Nb):[0,1],Ug(a)}function DW(t,e){t=t.slice();var a=0,r=t.length-1,s=t[a],l=t[r],h;return l<s&&(h=a,a=r,r=h,h=s,s=l,l=h),t[a]=e.floor(s),t[r]=e.ceil(l),t}function DG(t){return Math.log(t)}function MG(t){return Math.exp(t)}function mye(t){return-Math.log(-t)}function yye(t){return-Math.exp(-t)}function gye(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Aye(t){return t===10?gye:t===Math.E?Math.exp:e=>Math.pow(t,e)}function _ye(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function IG(t){return(e,a)=>-t(-e,a)}function F3(t){const e=t(DG,MG),a=e.domain;let r=10,s,l;function h(){return s=_ye(r),l=Aye(r),a()[0]<0?(s=IG(s),l=IG(l),t(mye,yye)):t(DG,MG),e}return e.base=function(n){return arguments.length?(r=+n,h()):r},e.domain=function(n){return arguments.length?(a(n),h()):a()},e.ticks=n=>{const w=a();let T=w[0],E=w[w.length-1];const z=E<T;z&&([T,E]=[E,T]);let k=s(T),U=s(E),q,H;const $=n==null?10:+n;let Q=[];if(!(r%1)&&U-k<$){if(k=Math.floor(k),U=Math.ceil(U),T>0){for(;k<=U;++k)for(q=1;q<r;++q)if(H=k<0?q/l(-k):q*l(k),!(H<T)){if(H>E)break;Q.push(H)}}else for(;k<=U;++k)for(q=r-1;q>=1;--q)if(H=k>0?q/l(-k):q*l(k),!(H<T)){if(H>E)break;Q.push(H)}Q.length*2<$&&(Q=gD(T,E,$))}else Q=gD(k,U,Math.min(U-k,$)).map(l);return z?Q.reverse():Q},e.tickFormat=(n,w)=>{if(n==null&&(n=10),w==null&&(w=r===10?"s":","),typeof w!="function"&&(!(r%1)&&(w=vR(w)).precision==null&&(w.trim=!0),w=L3(w)),n===1/0)return w;const T=Math.max(1,r*n/e.ticks().length);return E=>{let z=E/l(Math.round(s(E)));return z*r<r-.5&&(z*=r),z<=T?w(E):""}},e.nice=()=>a(DW(a(),{floor:n=>l(Math.floor(s(n))),ceil:n=>l(Math.ceil(s(n)))})),e}function MW(){const t=F3(g2()).domain([1,10]);return t.copy=()=>TT(t,MW()).base(t.base()),Gf.apply(t,arguments),t}function LG(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function FG(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function U3(t){var e=1,a=t(LG(e),FG(e));return a.constant=function(r){return arguments.length?t(LG(e=+r),FG(e)):e},Ug(a)}function IW(){var t=U3(g2());return t.copy=function(){return TT(t,IW()).constant(t.constant())},Gf.apply(t,arguments)}function UG(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function vye(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function wye(t){return t<0?-t*t:t*t}function k3(t){var e=t(Yd,Yd),a=1;function r(){return a===1?t(Yd,Yd):a===.5?t(vye,wye):t(UG(a),UG(1/a))}return e.exponent=function(s){return arguments.length?(a=+s,r()):a},Ug(e)}function B3(){var t=k3(g2());return t.copy=function(){return TT(t,B3()).exponent(t.exponent())},Gf.apply(t,arguments),t}function Rye(){return B3.apply(null,arguments).exponent(.5)}function kG(t){return Math.sign(t)*t*t}function Tye(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function LW(){var t=M3(),e=[0,1],a=!1,r;function s(l){var h=Tye(t(l));return isNaN(h)?r:a?Math.round(h):h}return s.invert=function(l){return t.invert(kG(l))},s.domain=function(l){return arguments.length?(t.domain(l),s):t.domain()},s.range=function(l){return arguments.length?(t.range((e=Array.from(l,Nb)).map(kG)),s):e.slice()},s.rangeRound=function(l){return s.range(l).round(!0)},s.round=function(l){return arguments.length?(a=!!l,s):a},s.clamp=function(l){return arguments.length?(t.clamp(l),s):t.clamp()},s.unknown=function(l){return arguments.length?(r=l,s):r},s.copy=function(){return LW(t.domain(),e).round(a).clamp(t.clamp()).unknown(r)},Gf.apply(s,arguments),Ug(s)}function FW(){var t=[],e=[],a=[],r;function s(){var h=0,n=Math.max(1,e.length);for(a=new Array(n-1);++h<n;)a[h-1]=Pme(t,h/n);return l}function l(h){return h==null||isNaN(h=+h)?r:e[wT(a,h)]}return l.invertExtent=function(h){var n=e.indexOf(h);return n<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},l.domain=function(h){if(!arguments.length)return t.slice();t=[];for(let n of h)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(bg),s()},l.range=function(h){return arguments.length?(e=Array.from(h),s()):e.slice()},l.unknown=function(h){return arguments.length?(r=h,l):r},l.quantiles=function(){return a.slice()},l.copy=function(){return FW().domain(t).range(e).unknown(r)},Gf.apply(l,arguments)}function UW(){var t=0,e=1,a=1,r=[.5],s=[0,1],l;function h(w){return w!=null&&w<=w?s[wT(r,w,0,a)]:l}function n(){var w=-1;for(r=new Array(a);++w<a;)r[w]=((w+1)*e-(w-a)*t)/(a+1);return h}return h.domain=function(w){return arguments.length?([t,e]=w,t=+t,e=+e,n()):[t,e]},h.range=function(w){return arguments.length?(a=(s=Array.from(w)).length-1,n()):s.slice()},h.invertExtent=function(w){var T=s.indexOf(w);return T<0?[NaN,NaN]:T<1?[t,r[0]]:T>=a?[r[a-1],e]:[r[T-1],r[T]]},h.unknown=function(w){return arguments.length&&(l=w),h},h.thresholds=function(){return r.slice()},h.copy=function(){return UW().domain([t,e]).range(s).unknown(l)},Gf.apply(Ug(h),arguments)}function kW(){var t=[.5],e=[0,1],a,r=1;function s(l){return l!=null&&l<=l?e[wT(t,l,0,r)]:a}return s.domain=function(l){return arguments.length?(t=Array.from(l),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(l){return arguments.length?(e=Array.from(l),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(l){var h=e.indexOf(l);return[t[h-1],t[h]]},s.unknown=function(l){return arguments.length?(a=l,s):a},s.copy=function(){return kW().domain(t).range(e).unknown(a)},Gf.apply(s,arguments)}const Fz=new Date,Uz=new Date;function Lu(t,e,a,r){function s(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return s.floor=l=>(t(l=new Date(+l)),l),s.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),s.round=l=>{const h=s(l),n=s.ceil(l);return l-h<n-l?h:n},s.offset=(l,h)=>(e(l=new Date(+l),h==null?1:Math.floor(h)),l),s.range=(l,h,n)=>{const w=[];if(l=s.ceil(l),n=n==null?1:Math.floor(n),!(l<h)||!(n>0))return w;let T;do w.push(T=new Date(+l)),e(l,n),t(l);while(T<l&&l<h);return w},s.filter=l=>Lu(h=>{if(h>=h)for(;t(h),!l(h);)h.setTime(h-1)},(h,n)=>{if(h>=h)if(n<0)for(;++n<=0;)for(;e(h,-1),!l(h););else for(;--n>=0;)for(;e(h,1),!l(h););}),a&&(s.count=(l,h)=>(Fz.setTime(+l),Uz.setTime(+h),t(Fz),t(Uz),Math.floor(a(Fz,Uz))),s.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?s.filter(r?h=>r(h)%l===0:h=>s.count(0,h)%l===0):s)),s}const Ob=Lu(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ob.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Lu(e=>{e.setTime(Math.floor(e/t)*t)},(e,a)=>{e.setTime(+e+a*t)},(e,a)=>(a-e)/t):Ob);Ob.range;const iy=1e3,kf=iy*60,sy=kf*60,_y=sy*24,G3=_y*7,BG=_y*30,kz=_y*365,GA=Lu(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*iy)},(t,e)=>(e-t)/iy,t=>t.getUTCSeconds());GA.range;const j3=Lu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*iy)},(t,e)=>{t.setTime(+t+e*kf)},(t,e)=>(e-t)/kf,t=>t.getMinutes());j3.range;const Z3=Lu(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*kf)},(t,e)=>(e-t)/kf,t=>t.getUTCMinutes());Z3.range;const q3=Lu(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*iy-t.getMinutes()*kf)},(t,e)=>{t.setTime(+t+e*sy)},(t,e)=>(e-t)/sy,t=>t.getHours());q3.range;const H3=Lu(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*sy)},(t,e)=>(e-t)/sy,t=>t.getUTCHours());H3.range;const ST=Lu(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*kf)/_y,t=>t.getDate()-1);ST.range;const A2=Lu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/_y,t=>t.getUTCDate()-1);A2.range;const BW=Lu(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/_y,t=>Math.floor(t/_y));BW.range;function A0(t){return Lu(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,a)=>{e.setDate(e.getDate()+a*7)},(e,a)=>(a-e-(a.getTimezoneOffset()-e.getTimezoneOffset())*kf)/G3)}const _2=A0(0),Db=A0(1),Sye=A0(2),Cye=A0(3),ov=A0(4),bye=A0(5),xye=A0(6);_2.range;Db.range;Sye.range;Cye.range;ov.range;bye.range;xye.range;function _0(t){return Lu(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCDate(e.getUTCDate()+a*7)},(e,a)=>(a-e)/G3)}const v2=_0(0),Mb=_0(1),Pye=_0(2),Eye=_0(3),lv=_0(4),Nye=_0(5),Vye=_0(6);v2.range;Mb.range;Pye.range;Eye.range;lv.range;Nye.range;Vye.range;const $3=Lu(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());$3.range;const K3=Lu(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());K3.range;const vy=Lu(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());vy.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lu(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,a)=>{e.setFullYear(e.getFullYear()+a*t)});vy.range;const wy=Lu(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());wy.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Lu(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,a)=>{e.setUTCFullYear(e.getUTCFullYear()+a*t)});wy.range;function GW(t,e,a,r,s,l){const h=[[GA,1,iy],[GA,5,5*iy],[GA,15,15*iy],[GA,30,30*iy],[l,1,kf],[l,5,5*kf],[l,15,15*kf],[l,30,30*kf],[s,1,sy],[s,3,3*sy],[s,6,6*sy],[s,12,12*sy],[r,1,_y],[r,2,2*_y],[a,1,G3],[e,1,BG],[e,3,3*BG],[t,1,kz]];function n(T,E,z){const k=E<T;k&&([T,E]=[E,T]);const U=z&&typeof z.range=="function"?z:w(T,E,z),q=U?U.range(T,+E+1):[];return k?q.reverse():q}function w(T,E,z){const k=Math.abs(E-T)/z,U=N3(([,,$])=>$).right(h,k);if(U===h.length)return t.every(_D(T/kz,E/kz,z));if(U===0)return Ob.every(Math.max(_D(T,E,z),1));const[q,H]=h[k/h[U-1][2]<h[U][2]/k?U-1:U];return q.every(H)}return[n,w]}const[zye,Oye]=GW(wy,K3,v2,BW,H3,Z3),[Dye,Mye]=GW(vy,$3,_2,ST,q3,j3);function Bz(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Gz(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sw(t,e,a){return{y:t,m:e,d:a,H:0,M:0,S:0,L:0}}function Iye(t){var e=t.dateTime,a=t.date,r=t.time,s=t.periods,l=t.days,h=t.shortDays,n=t.months,w=t.shortMonths,T=ow(s),E=lw(s),z=ow(l),k=lw(l),U=ow(h),q=lw(h),H=ow(n),$=lw(n),Q=ow(w),ne=lw(w),de={a:Be,A:ke,b:Je,B:Le,c:null,d:$G,e:$G,f:ige,g:mge,G:gge,H:age,I:rge,j:nge,L:jW,m:sge,M:oge,p:qe,q:ye,Q:YG,s:XG,S:lge,u:uge,U:cge,V:dge,w:hge,W:fge,x:null,X:null,y:pge,Y:yge,Z:Age,"%":WG},ge={a:ze,A:We,b:lt,B:vt,c:null,d:KG,e:KG,f:Rge,g:zge,G:Dge,H:_ge,I:vge,j:wge,L:qW,m:Tge,M:Sge,p:Ot,q:dt,Q:YG,s:XG,S:Cge,u:bge,U:xge,V:Pge,w:Ege,W:Nge,x:null,X:null,y:Vge,Y:Oge,Z:Mge,"%":WG},fe={a:Oe,A:ie,b:we,B:Me,c:Ve,d:qG,e:qG,f:Jye,g:ZG,G:jG,H:HG,I:HG,j:Kye,L:Xye,m:$ye,M:Wye,p:Te,q:Hye,Q:ege,s:tge,S:Yye,u:Bye,U:Gye,V:jye,w:kye,W:Zye,x:Ie,X:Ue,y:ZG,Y:jG,Z:qye,"%":Qye};de.x=_e(a,de),de.X=_e(r,de),de.c=_e(e,de),ge.x=_e(a,ge),ge.X=_e(r,ge),ge.c=_e(e,ge);function _e(pt,ve){return function(ea){var Kt=[],Ea=-1,Bt=0,la=pt.length,St,vr,Va;for(ea instanceof Date||(ea=new Date(+ea));++Ea<la;)pt.charCodeAt(Ea)===37&&(Kt.push(pt.slice(Bt,Ea)),(vr=GG[St=pt.charAt(++Ea)])!=null?St=pt.charAt(++Ea):vr=St==="e"?" ":"0",(Va=ve[St])&&(St=Va(ea,vr)),Kt.push(St),Bt=Ea+1);return Kt.push(pt.slice(Bt,Ea)),Kt.join("")}}function me(pt,ve){return function(ea){var Kt=sw(1900,void 0,1),Ea=Ae(Kt,pt,ea+="",0),Bt,la;if(Ea!=ea.length)return null;if("Q"in Kt)return new Date(Kt.Q);if("s"in Kt)return new Date(Kt.s*1e3+("L"in Kt?Kt.L:0));if(ve&&!("Z"in Kt)&&(Kt.Z=0),"p"in Kt&&(Kt.H=Kt.H%12+Kt.p*12),Kt.m===void 0&&(Kt.m="q"in Kt?Kt.q:0),"V"in Kt){if(Kt.V<1||Kt.V>53)return null;"w"in Kt||(Kt.w=1),"Z"in Kt?(Bt=Gz(sw(Kt.y,0,1)),la=Bt.getUTCDay(),Bt=la>4||la===0?Mb.ceil(Bt):Mb(Bt),Bt=A2.offset(Bt,(Kt.V-1)*7),Kt.y=Bt.getUTCFullYear(),Kt.m=Bt.getUTCMonth(),Kt.d=Bt.getUTCDate()+(Kt.w+6)%7):(Bt=Bz(sw(Kt.y,0,1)),la=Bt.getDay(),Bt=la>4||la===0?Db.ceil(Bt):Db(Bt),Bt=ST.offset(Bt,(Kt.V-1)*7),Kt.y=Bt.getFullYear(),Kt.m=Bt.getMonth(),Kt.d=Bt.getDate()+(Kt.w+6)%7)}else("W"in Kt||"U"in Kt)&&("w"in Kt||(Kt.w="u"in Kt?Kt.u%7:"W"in Kt?1:0),la="Z"in Kt?Gz(sw(Kt.y,0,1)).getUTCDay():Bz(sw(Kt.y,0,1)).getDay(),Kt.m=0,Kt.d="W"in Kt?(Kt.w+6)%7+Kt.W*7-(la+5)%7:Kt.w+Kt.U*7-(la+6)%7);return"Z"in Kt?(Kt.H+=Kt.Z/100|0,Kt.M+=Kt.Z%100,Gz(Kt)):Bz(Kt)}}function Ae(pt,ve,ea,Kt){for(var Ea=0,Bt=ve.length,la=ea.length,St,vr;Ea<Bt;){if(Kt>=la)return-1;if(St=ve.charCodeAt(Ea++),St===37){if(St=ve.charAt(Ea++),vr=fe[St in GG?ve.charAt(Ea++):St],!vr||(Kt=vr(pt,ea,Kt))<0)return-1}else if(St!=ea.charCodeAt(Kt++))return-1}return Kt}function Te(pt,ve,ea){var Kt=T.exec(ve.slice(ea));return Kt?(pt.p=E.get(Kt[0].toLowerCase()),ea+Kt[0].length):-1}function Oe(pt,ve,ea){var Kt=U.exec(ve.slice(ea));return Kt?(pt.w=q.get(Kt[0].toLowerCase()),ea+Kt[0].length):-1}function ie(pt,ve,ea){var Kt=z.exec(ve.slice(ea));return Kt?(pt.w=k.get(Kt[0].toLowerCase()),ea+Kt[0].length):-1}function we(pt,ve,ea){var Kt=Q.exec(ve.slice(ea));return Kt?(pt.m=ne.get(Kt[0].toLowerCase()),ea+Kt[0].length):-1}function Me(pt,ve,ea){var Kt=H.exec(ve.slice(ea));return Kt?(pt.m=$.get(Kt[0].toLowerCase()),ea+Kt[0].length):-1}function Ve(pt,ve,ea){return Ae(pt,e,ve,ea)}function Ie(pt,ve,ea){return Ae(pt,a,ve,ea)}function Ue(pt,ve,ea){return Ae(pt,r,ve,ea)}function Be(pt){return h[pt.getDay()]}function ke(pt){return l[pt.getDay()]}function Je(pt){return w[pt.getMonth()]}function Le(pt){return n[pt.getMonth()]}function qe(pt){return s[+(pt.getHours()>=12)]}function ye(pt){return 1+~~(pt.getMonth()/3)}function ze(pt){return h[pt.getUTCDay()]}function We(pt){return l[pt.getUTCDay()]}function lt(pt){return w[pt.getUTCMonth()]}function vt(pt){return n[pt.getUTCMonth()]}function Ot(pt){return s[+(pt.getUTCHours()>=12)]}function dt(pt){return 1+~~(pt.getUTCMonth()/3)}return{format:function(pt){var ve=_e(pt+="",de);return ve.toString=function(){return pt},ve},parse:function(pt){var ve=me(pt+="",!1);return ve.toString=function(){return pt},ve},utcFormat:function(pt){var ve=_e(pt+="",ge);return ve.toString=function(){return pt},ve},utcParse:function(pt){var ve=me(pt+="",!0);return ve.toString=function(){return pt},ve}}}var GG={"-":"",_:" ",0:"0"},rc=/^\s*\d+/,Lye=/^%/,Fye=/[\\^$*+?|[\]().{}]/g;function ps(t,e,a){var r=t<0?"-":"",s=(r?-t:t)+"",l=s.length;return r+(l<a?new Array(a-l+1).join(e)+s:s)}function Uye(t){return t.replace(Fye,"\\$&")}function ow(t){return new RegExp("^(?:"+t.map(Uye).join("|")+")","i")}function lw(t){return new Map(t.map((e,a)=>[e.toLowerCase(),a]))}function kye(t,e,a){var r=rc.exec(e.slice(a,a+1));return r?(t.w=+r[0],a+r[0].length):-1}function Bye(t,e,a){var r=rc.exec(e.slice(a,a+1));return r?(t.u=+r[0],a+r[0].length):-1}function Gye(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.U=+r[0],a+r[0].length):-1}function jye(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.V=+r[0],a+r[0].length):-1}function Zye(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.W=+r[0],a+r[0].length):-1}function jG(t,e,a){var r=rc.exec(e.slice(a,a+4));return r?(t.y=+r[0],a+r[0].length):-1}function ZG(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function qye(t,e,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(a,a+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function Hye(t,e,a){var r=rc.exec(e.slice(a,a+1));return r?(t.q=r[0]*3-3,a+r[0].length):-1}function $ye(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.m=r[0]-1,a+r[0].length):-1}function qG(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.d=+r[0],a+r[0].length):-1}function Kye(t,e,a){var r=rc.exec(e.slice(a,a+3));return r?(t.m=0,t.d=+r[0],a+r[0].length):-1}function HG(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.H=+r[0],a+r[0].length):-1}function Wye(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.M=+r[0],a+r[0].length):-1}function Yye(t,e,a){var r=rc.exec(e.slice(a,a+2));return r?(t.S=+r[0],a+r[0].length):-1}function Xye(t,e,a){var r=rc.exec(e.slice(a,a+3));return r?(t.L=+r[0],a+r[0].length):-1}function Jye(t,e,a){var r=rc.exec(e.slice(a,a+6));return r?(t.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function Qye(t,e,a){var r=Lye.exec(e.slice(a,a+1));return r?a+r[0].length:-1}function ege(t,e,a){var r=rc.exec(e.slice(a));return r?(t.Q=+r[0],a+r[0].length):-1}function tge(t,e,a){var r=rc.exec(e.slice(a));return r?(t.s=+r[0],a+r[0].length):-1}function $G(t,e){return ps(t.getDate(),e,2)}function age(t,e){return ps(t.getHours(),e,2)}function rge(t,e){return ps(t.getHours()%12||12,e,2)}function nge(t,e){return ps(1+ST.count(vy(t),t),e,3)}function jW(t,e){return ps(t.getMilliseconds(),e,3)}function ige(t,e){return jW(t,e)+"000"}function sge(t,e){return ps(t.getMonth()+1,e,2)}function oge(t,e){return ps(t.getMinutes(),e,2)}function lge(t,e){return ps(t.getSeconds(),e,2)}function uge(t){var e=t.getDay();return e===0?7:e}function cge(t,e){return ps(_2.count(vy(t)-1,t),e,2)}function ZW(t){var e=t.getDay();return e>=4||e===0?ov(t):ov.ceil(t)}function dge(t,e){return t=ZW(t),ps(ov.count(vy(t),t)+(vy(t).getDay()===4),e,2)}function hge(t){return t.getDay()}function fge(t,e){return ps(Db.count(vy(t)-1,t),e,2)}function pge(t,e){return ps(t.getFullYear()%100,e,2)}function mge(t,e){return t=ZW(t),ps(t.getFullYear()%100,e,2)}function yge(t,e){return ps(t.getFullYear()%1e4,e,4)}function gge(t,e){var a=t.getDay();return t=a>=4||a===0?ov(t):ov.ceil(t),ps(t.getFullYear()%1e4,e,4)}function Age(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ps(e/60|0,"0",2)+ps(e%60,"0",2)}function KG(t,e){return ps(t.getUTCDate(),e,2)}function _ge(t,e){return ps(t.getUTCHours(),e,2)}function vge(t,e){return ps(t.getUTCHours()%12||12,e,2)}function wge(t,e){return ps(1+A2.count(wy(t),t),e,3)}function qW(t,e){return ps(t.getUTCMilliseconds(),e,3)}function Rge(t,e){return qW(t,e)+"000"}function Tge(t,e){return ps(t.getUTCMonth()+1,e,2)}function Sge(t,e){return ps(t.getUTCMinutes(),e,2)}function Cge(t,e){return ps(t.getUTCSeconds(),e,2)}function bge(t){var e=t.getUTCDay();return e===0?7:e}function xge(t,e){return ps(v2.count(wy(t)-1,t),e,2)}function HW(t){var e=t.getUTCDay();return e>=4||e===0?lv(t):lv.ceil(t)}function Pge(t,e){return t=HW(t),ps(lv.count(wy(t),t)+(wy(t).getUTCDay()===4),e,2)}function Ege(t){return t.getUTCDay()}function Nge(t,e){return ps(Mb.count(wy(t)-1,t),e,2)}function Vge(t,e){return ps(t.getUTCFullYear()%100,e,2)}function zge(t,e){return t=HW(t),ps(t.getUTCFullYear()%100,e,2)}function Oge(t,e){return ps(t.getUTCFullYear()%1e4,e,4)}function Dge(t,e){var a=t.getUTCDay();return t=a>=4||a===0?lv(t):lv.ceil(t),ps(t.getUTCFullYear()%1e4,e,4)}function Mge(){return"+0000"}function WG(){return"%"}function YG(t){return+t}function XG(t){return Math.floor(+t/1e3)}var c_,$W,KW;Ige({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ige(t){return c_=Iye(t),$W=c_.format,c_.parse,KW=c_.utcFormat,c_.utcParse,c_}function Lge(t){return new Date(t)}function Fge(t){return t instanceof Date?+t:+new Date(+t)}function W3(t,e,a,r,s,l,h,n,w,T){var E=M3(),z=E.invert,k=E.domain,U=T(".%L"),q=T(":%S"),H=T("%I:%M"),$=T("%I %p"),Q=T("%a %d"),ne=T("%b %d"),de=T("%B"),ge=T("%Y");function fe(_e){return(w(_e)<_e?U:n(_e)<_e?q:h(_e)<_e?H:l(_e)<_e?$:r(_e)<_e?s(_e)<_e?Q:ne:a(_e)<_e?de:ge)(_e)}return E.invert=function(_e){return new Date(z(_e))},E.domain=function(_e){return arguments.length?k(Array.from(_e,Fge)):k().map(Lge)},E.ticks=function(_e){var me=k();return t(me[0],me[me.length-1],_e??10)},E.tickFormat=function(_e,me){return me==null?fe:T(me)},E.nice=function(_e){var me=k();return(!_e||typeof _e.range!="function")&&(_e=e(me[0],me[me.length-1],_e??10)),_e?k(DW(me,_e)):E},E.copy=function(){return TT(E,W3(t,e,a,r,s,l,h,n,w,T))},E}function Uge(){return Gf.apply(W3(Dye,Mye,vy,$3,_2,ST,q3,j3,GA,$W).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function kge(){return Gf.apply(W3(zye,Oye,wy,K3,v2,A2,H3,Z3,GA,KW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function w2(){var t=0,e=1,a,r,s,l,h=Yd,n=!1,w;function T(z){return z==null||isNaN(z=+z)?w:h(s===0?.5:(z=(l(z)-a)*s,n?Math.max(0,Math.min(1,z)):z))}T.domain=function(z){return arguments.length?([t,e]=z,a=l(t=+t),r=l(e=+e),s=a===r?0:1/(r-a),T):[t,e]},T.clamp=function(z){return arguments.length?(n=!!z,T):n},T.interpolator=function(z){return arguments.length?(h=z,T):h};function E(z){return function(k){var U,q;return arguments.length?([U,q]=k,h=z(U,q),T):[h(0),h(1)]}}return T.range=E(Gv),T.rangeRound=E(D3),T.unknown=function(z){return arguments.length?(w=z,T):w},function(z){return l=z,a=z(t),r=z(e),s=a===r?0:1/(r-a),T}}function kg(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function WW(){var t=Ug(w2()(Yd));return t.copy=function(){return kg(t,WW())},xy.apply(t,arguments)}function YW(){var t=F3(w2()).domain([1,10]);return t.copy=function(){return kg(t,YW()).base(t.base())},xy.apply(t,arguments)}function XW(){var t=U3(w2());return t.copy=function(){return kg(t,XW()).constant(t.constant())},xy.apply(t,arguments)}function Y3(){var t=k3(w2());return t.copy=function(){return kg(t,Y3()).exponent(t.exponent())},xy.apply(t,arguments)}function Bge(){return Y3.apply(null,arguments).exponent(.5)}function JW(){var t=[],e=Yd;function a(r){if(r!=null&&!isNaN(r=+r))return e((wT(t,r,1)-1)/(t.length-1))}return a.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(bg),a},a.interpolator=function(r){return arguments.length?(e=r,a):e},a.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(s,l)=>xme(t,l/r))},a.copy=function(){return JW(e).domain(t)},xy.apply(a,arguments)}function R2(){var t=0,e=.5,a=1,r=1,s,l,h,n,w,T=Yd,E,z=!1,k;function U(H){return isNaN(H=+H)?k:(H=.5+((H=+E(H))-l)*(r*H<r*l?n:w),T(z?Math.max(0,Math.min(1,H)):H))}U.domain=function(H){return arguments.length?([t,e,a]=H,s=E(t=+t),l=E(e=+e),h=E(a=+a),n=s===l?0:.5/(l-s),w=l===h?0:.5/(h-l),r=l<s?-1:1,U):[t,e,a]},U.clamp=function(H){return arguments.length?(z=!!H,U):z},U.interpolator=function(H){return arguments.length?(T=H,U):T};function q(H){return function($){var Q,ne,de;return arguments.length?([Q,ne,de]=$,T=Qme(H,[Q,ne,de]),U):[T(0),T(.5),T(1)]}}return U.range=q(Gv),U.rangeRound=q(D3),U.unknown=function(H){return arguments.length?(k=H,U):k},function(H){return E=H,s=H(t),l=H(e),h=H(a),n=s===l?0:.5/(l-s),w=l===h?0:.5/(h-l),r=l<s?-1:1,U}}function QW(){var t=Ug(R2()(Yd));return t.copy=function(){return kg(t,QW())},xy.apply(t,arguments)}function eY(){var t=F3(R2()).domain([.1,1,10]);return t.copy=function(){return kg(t,eY()).base(t.base())},xy.apply(t,arguments)}function tY(){var t=U3(R2());return t.copy=function(){return kg(t,tY()).constant(t.constant())},xy.apply(t,arguments)}function X3(){var t=k3(R2());return t.copy=function(){return kg(t,X3()).exponent(t.exponent())},xy.apply(t,arguments)}function Gge(){return X3.apply(null,arguments).exponent(.5)}const JG=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yR,scaleDiverging:QW,scaleDivergingLog:eY,scaleDivergingPow:X3,scaleDivergingSqrt:Gge,scaleDivergingSymlog:tY,scaleIdentity:OW,scaleImplicit:vD,scaleLinear:zb,scaleLog:MW,scaleOrdinal:V3,scalePoint:Mw,scalePow:B3,scaleQuantile:FW,scaleQuantize:UW,scaleRadial:LW,scaleSequential:WW,scaleSequentialLog:YW,scaleSequentialPow:Y3,scaleSequentialQuantile:JW,scaleSequentialSqrt:Bge,scaleSequentialSymlog:XW,scaleSqrt:Rye,scaleSymlog:IW,scaleThreshold:kW,scaleTime:Uge,scaleUtc:kge,tickFormat:zW},Symbol.toStringTag,{value:"Module"}));var jz,QG;function T2(){if(QG)return jz;QG=1;var t=Fv();function e(a,r,s){for(var l=-1,h=a.length;++l<h;){var n=a[l],w=r(n);if(w!=null&&(T===void 0?w===w&&!t(w):s(w,T)))var T=w,E=n}return E}return jz=e,jz}var Zz,e7;function aY(){if(e7)return Zz;e7=1;function t(e,a){return e>a}return Zz=t,Zz}var qz,t7;function jge(){if(t7)return qz;t7=1;var t=T2(),e=aY(),a=Bv();function r(s){return s&&s.length?t(s,a,e):void 0}return qz=r,qz}var Zge=jge();const _g=Xi(Zge);var Hz,a7;function rY(){if(a7)return Hz;a7=1;function t(e,a){return e<a}return Hz=t,Hz}var $z,r7;function qge(){if(r7)return $z;r7=1;var t=T2(),e=rY(),a=Bv();function r(s){return s&&s.length?t(s,a,e):void 0}return $z=r,$z}var Hge=qge();const S2=Xi(Hge);var Kz,n7;function $ge(){if(n7)return Kz;n7=1;var t=f3(),e=Vm(),a=dW(),r=Ph();function s(l,h){var n=r(l)?t:a;return n(l,e(h,3))}return Kz=s,Kz}var Wz,i7;function Kge(){if(i7)return Wz;i7=1;var t=uW(),e=$ge();function a(r,s){return t(e(r,s),1)}return Wz=a,Wz}var Wge=Kge();const Yge=Xi(Wge);var Yz,s7;function Xge(){if(s7)return Yz;s7=1;var t=b3();function e(a,r){return t(a,r)}return Yz=e,Yz}var Jge=Xge();const o0=Xi(Jge);var jv=1e9,Qge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Q3,Ho=!0,Bf="[DecimalError] ",WA=Bf+"Invalid argument: ",J3=Bf+"Exponent out of range: ",Zv=Math.floor,OA=Math.pow,eAe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,tf,Ju=1e7,Po=7,nY=9007199254740991,Ib=Zv(nY/Po),Wr={};Wr.absoluteValue=Wr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Wr.comparedTo=Wr.cmp=function(t){var e,a,r,s,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(r=l.d.length,s=t.d.length,e=0,a=r<s?r:s;e<a;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return r===s?0:r>s^l.s<0?1:-1};Wr.decimalPlaces=Wr.dp=function(){var t=this,e=t.d.length-1,a=(e-t.e)*Po;if(e=t.d[e],e)for(;e%10==0;e/=10)a--;return a<0?0:a};Wr.dividedBy=Wr.div=function(t){return dy(this,new this.constructor(t))};Wr.dividedToIntegerBy=Wr.idiv=function(t){var e=this,a=e.constructor;return so(dy(e,new a(t),0,1),a.precision)};Wr.equals=Wr.eq=function(t){return!this.cmp(t)};Wr.exponent=function(){return su(this)};Wr.greaterThan=Wr.gt=function(t){return this.cmp(t)>0};Wr.greaterThanOrEqualTo=Wr.gte=function(t){return this.cmp(t)>=0};Wr.isInteger=Wr.isint=function(){return this.e>this.d.length-2};Wr.isNegative=Wr.isneg=function(){return this.s<0};Wr.isPositive=Wr.ispos=function(){return this.s>0};Wr.isZero=function(){return this.s===0};Wr.lessThan=Wr.lt=function(t){return this.cmp(t)<0};Wr.lessThanOrEqualTo=Wr.lte=function(t){return this.cmp(t)<1};Wr.logarithm=Wr.log=function(t){var e,a=this,r=a.constructor,s=r.precision,l=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(tf))throw Error(Bf+"NaN");if(a.s<1)throw Error(Bf+(a.s?"NaN":"-Infinity"));return a.eq(tf)?new r(0):(Ho=!1,e=dy(wR(a,l),wR(t,l),l),Ho=!0,so(e,s))};Wr.minus=Wr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?oY(e,t):iY(e,(t.s=-t.s,t))};Wr.modulo=Wr.mod=function(t){var e,a=this,r=a.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(Bf+"NaN");return a.s?(Ho=!1,e=dy(a,t,0,1).times(t),Ho=!0,a.minus(e)):so(new r(a),s)};Wr.naturalExponential=Wr.exp=function(){return sY(this)};Wr.naturalLogarithm=Wr.ln=function(){return wR(this)};Wr.negated=Wr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Wr.plus=Wr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?iY(e,t):oY(e,(t.s=-t.s,t))};Wr.precision=Wr.sd=function(t){var e,a,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(WA+t);if(e=su(s)+1,r=s.d.length-1,a=r*Po+1,r=s.d[r],r){for(;r%10==0;r/=10)a--;for(r=s.d[0];r>=10;r/=10)a++}return t&&e>a?e:a};Wr.squareRoot=Wr.sqrt=function(){var t,e,a,r,s,l,h,n=this,w=n.constructor;if(n.s<1){if(!n.s)return new w(0);throw Error(Bf+"NaN")}for(t=su(n),Ho=!1,s=Math.sqrt(+n),s==0||s==1/0?(e=gm(n.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Zv((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new w(e)):r=new w(s.toString()),a=w.precision,s=h=a+3;;)if(l=r,r=l.plus(dy(n,l,h+2)).times(.5),gm(l.d).slice(0,h)===(e=gm(r.d)).slice(0,h)){if(e=e.slice(h-3,h+1),s==h&&e=="4999"){if(so(l,a+1,0),l.times(l).eq(n)){r=l;break}}else if(e!="9999")break;h+=4}return Ho=!0,so(r,a)};Wr.times=Wr.mul=function(t){var e,a,r,s,l,h,n,w,T,E=this,z=E.constructor,k=E.d,U=(t=new z(t)).d;if(!E.s||!t.s)return new z(0);for(t.s*=E.s,a=E.e+t.e,w=k.length,T=U.length,w<T&&(l=k,k=U,U=l,h=w,w=T,T=h),l=[],h=w+T,r=h;r--;)l.push(0);for(r=T;--r>=0;){for(e=0,s=w+r;s>r;)n=l[s]+U[r]*k[s-r-1]+e,l[s--]=n%Ju|0,e=n/Ju|0;l[s]=(l[s]+e)%Ju|0}for(;!l[--h];)l.pop();return e?++a:l.shift(),t.d=l,t.e=a,Ho?so(t,z.precision):t};Wr.toDecimalPlaces=Wr.todp=function(t,e){var a=this,r=a.constructor;return a=new r(a),t===void 0?a:(Pm(t,0,jv),e===void 0?e=r.rounding:Pm(e,0,8),so(a,t+su(a)+1,e))};Wr.toExponential=function(t,e){var a,r=this,s=r.constructor;return t===void 0?a=l0(r,!0):(Pm(t,0,jv),e===void 0?e=s.rounding:Pm(e,0,8),r=so(new s(r),t+1,e),a=l0(r,!0,t+1)),a};Wr.toFixed=function(t,e){var a,r,s=this,l=s.constructor;return t===void 0?l0(s):(Pm(t,0,jv),e===void 0?e=l.rounding:Pm(e,0,8),r=so(new l(s),t+su(s)+1,e),a=l0(r.abs(),!1,t+su(r)+1),s.isneg()&&!s.isZero()?"-"+a:a)};Wr.toInteger=Wr.toint=function(){var t=this,e=t.constructor;return so(new e(t),su(t)+1,e.rounding)};Wr.toNumber=function(){return+this};Wr.toPower=Wr.pow=function(t){var e,a,r,s,l,h,n=this,w=n.constructor,T=12,E=+(t=new w(t));if(!t.s)return new w(tf);if(n=new w(n),!n.s){if(t.s<1)throw Error(Bf+"Infinity");return n}if(n.eq(tf))return n;if(r=w.precision,t.eq(tf))return so(n,r);if(e=t.e,a=t.d.length-1,h=e>=a,l=n.s,h){if((a=E<0?-E:E)<=nY){for(s=new w(tf),e=Math.ceil(r/Po+4),Ho=!1;a%2&&(s=s.times(n),l7(s.d,e)),a=Zv(a/2),a!==0;)n=n.times(n),l7(n.d,e);return Ho=!0,t.s<0?new w(tf).div(s):so(s,r)}}else if(l<0)throw Error(Bf+"NaN");return l=l<0&&t.d[Math.max(e,a)]&1?-1:1,n.s=1,Ho=!1,s=t.times(wR(n,r+T)),Ho=!0,s=sY(s),s.s=l,s};Wr.toPrecision=function(t,e){var a,r,s=this,l=s.constructor;return t===void 0?(a=su(s),r=l0(s,a<=l.toExpNeg||a>=l.toExpPos)):(Pm(t,1,jv),e===void 0?e=l.rounding:Pm(e,0,8),s=so(new l(s),t,e),a=su(s),r=l0(s,t<=a||a<=l.toExpNeg,t)),r};Wr.toSignificantDigits=Wr.tosd=function(t,e){var a=this,r=a.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Pm(t,1,jv),e===void 0?e=r.rounding:Pm(e,0,8)),so(new r(a),t,e)};Wr.toString=Wr.valueOf=Wr.val=Wr.toJSON=Wr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=su(t),a=t.constructor;return l0(t,e<=a.toExpNeg||e>=a.toExpPos)};function iY(t,e){var a,r,s,l,h,n,w,T,E=t.constructor,z=E.precision;if(!t.s||!e.s)return e.s||(e=new E(t)),Ho?so(e,z):e;if(w=t.d,T=e.d,h=t.e,s=e.e,w=w.slice(),l=h-s,l){for(l<0?(r=w,l=-l,n=T.length):(r=T,s=h,n=w.length),h=Math.ceil(z/Po),n=h>n?h+1:n+1,l>n&&(l=n,r.length=1),r.reverse();l--;)r.push(0);r.reverse()}for(n=w.length,l=T.length,n-l<0&&(l=n,r=T,T=w,w=r),a=0;l;)a=(w[--l]=w[l]+T[l]+a)/Ju|0,w[l]%=Ju;for(a&&(w.unshift(a),++s),n=w.length;w[--n]==0;)w.pop();return e.d=w,e.e=s,Ho?so(e,z):e}function Pm(t,e,a){if(t!==~~t||t<e||t>a)throw Error(WA+t)}function gm(t){var e,a,r,s=t.length-1,l="",h=t[0];if(s>0){for(l+=h,e=1;e<s;e++)r=t[e]+"",a=Po-r.length,a&&(l+=hg(a)),l+=r;h=t[e],r=h+"",a=Po-r.length,a&&(l+=hg(a))}else if(h===0)return"0";for(;h%10===0;)h/=10;return l+h}var dy=function(){function t(r,s){var l,h=0,n=r.length;for(r=r.slice();n--;)l=r[n]*s+h,r[n]=l%Ju|0,h=l/Ju|0;return h&&r.unshift(h),r}function e(r,s,l,h){var n,w;if(l!=h)w=l>h?1:-1;else for(n=w=0;n<l;n++)if(r[n]!=s[n]){w=r[n]>s[n]?1:-1;break}return w}function a(r,s,l){for(var h=0;l--;)r[l]-=h,h=r[l]<s[l]?1:0,r[l]=h*Ju+r[l]-s[l];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,l,h){var n,w,T,E,z,k,U,q,H,$,Q,ne,de,ge,fe,_e,me,Ae,Te=r.constructor,Oe=r.s==s.s?1:-1,ie=r.d,we=s.d;if(!r.s)return new Te(r);if(!s.s)throw Error(Bf+"Division by zero");for(w=r.e-s.e,me=we.length,fe=ie.length,U=new Te(Oe),q=U.d=[],T=0;we[T]==(ie[T]||0);)++T;if(we[T]>(ie[T]||0)&&--w,l==null?ne=l=Te.precision:h?ne=l+(su(r)-su(s))+1:ne=l,ne<0)return new Te(0);if(ne=ne/Po+2|0,T=0,me==1)for(E=0,we=we[0],ne++;(T<fe||E)&&ne--;T++)de=E*Ju+(ie[T]||0),q[T]=de/we|0,E=de%we|0;else{for(E=Ju/(we[0]+1)|0,E>1&&(we=t(we,E),ie=t(ie,E),me=we.length,fe=ie.length),ge=me,H=ie.slice(0,me),$=H.length;$<me;)H[$++]=0;Ae=we.slice(),Ae.unshift(0),_e=we[0],we[1]>=Ju/2&&++_e;do E=0,n=e(we,H,me,$),n<0?(Q=H[0],me!=$&&(Q=Q*Ju+(H[1]||0)),E=Q/_e|0,E>1?(E>=Ju&&(E=Ju-1),z=t(we,E),k=z.length,$=H.length,n=e(z,H,k,$),n==1&&(E--,a(z,me<k?Ae:we,k))):(E==0&&(n=E=1),z=we.slice()),k=z.length,k<$&&z.unshift(0),a(H,z,$),n==-1&&($=H.length,n=e(we,H,me,$),n<1&&(E++,a(H,me<$?Ae:we,$))),$=H.length):n===0&&(E++,H=[0]),q[T++]=E,n&&H[0]?H[$++]=ie[ge]||0:(H=[ie[ge]],$=1);while((ge++<fe||H[0]!==void 0)&&ne--)}return q[0]||q.shift(),U.e=w,so(U,h?l+su(U)+1:l)}}();function sY(t,e){var a,r,s,l,h,n,w=0,T=0,E=t.constructor,z=E.precision;if(su(t)>16)throw Error(J3+su(t));if(!t.s)return new E(tf);for(Ho=!1,n=z,h=new E(.03125);t.abs().gte(.1);)t=t.times(h),T+=5;for(r=Math.log(OA(2,T))/Math.LN10*2+5|0,n+=r,a=s=l=new E(tf),E.precision=n;;){if(s=so(s.times(t),n),a=a.times(++w),h=l.plus(dy(s,a,n)),gm(h.d).slice(0,n)===gm(l.d).slice(0,n)){for(;T--;)l=so(l.times(l),n);return E.precision=z,e==null?(Ho=!0,so(l,z)):l}l=h}}function su(t){for(var e=t.e*Po,a=t.d[0];a>=10;a/=10)e++;return e}function Xz(t,e,a){if(e>t.LN10.sd())throw Ho=!0,a&&(t.precision=a),Error(Bf+"LN10 precision limit exceeded");return so(new t(t.LN10),e)}function hg(t){for(var e="";t--;)e+="0";return e}function wR(t,e){var a,r,s,l,h,n,w,T,E,z=1,k=10,U=t,q=U.d,H=U.constructor,$=H.precision;if(U.s<1)throw Error(Bf+(U.s?"NaN":"-Infinity"));if(U.eq(tf))return new H(0);if(e==null?(Ho=!1,T=$):T=e,U.eq(10))return e==null&&(Ho=!0),Xz(H,T);if(T+=k,H.precision=T,a=gm(q),r=a.charAt(0),l=su(U),Math.abs(l)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)U=U.times(t),a=gm(U.d),r=a.charAt(0),z++;l=su(U),r>1?(U=new H("0."+a),l++):U=new H(r+"."+a.slice(1))}else return w=Xz(H,T+2,$).times(l+""),U=wR(new H(r+"."+a.slice(1)),T-k).plus(w),H.precision=$,e==null?(Ho=!0,so(U,$)):U;for(n=h=U=dy(U.minus(tf),U.plus(tf),T),E=so(U.times(U),T),s=3;;){if(h=so(h.times(E),T),w=n.plus(dy(h,new H(s),T)),gm(w.d).slice(0,T)===gm(n.d).slice(0,T))return n=n.times(2),l!==0&&(n=n.plus(Xz(H,T+2,$).times(l+""))),n=dy(n,new H(z),T),H.precision=$,e==null?(Ho=!0,so(n,$)):n;n=w,s+=2}}function o7(t,e){var a,r,s;for((a=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(a<0&&(a=r),a+=+e.slice(r+1),e=e.substring(0,r)):a<0&&(a=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,a=a-r-1,t.e=Zv(a/Po),t.d=[],r=(a+1)%Po,a<0&&(r+=Po),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=Po;r<s;)t.d.push(+e.slice(r,r+=Po));e=e.slice(r),r=Po-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Ho&&(t.e>Ib||t.e<-Ib))throw Error(J3+a)}else t.s=0,t.e=0,t.d=[0];return t}function so(t,e,a){var r,s,l,h,n,w,T,E,z=t.d;for(h=1,l=z[0];l>=10;l/=10)h++;if(r=e-h,r<0)r+=Po,s=e,T=z[E=0];else{if(E=Math.ceil((r+1)/Po),l=z.length,E>=l)return t;for(T=l=z[E],h=1;l>=10;l/=10)h++;r%=Po,s=r-Po+h}if(a!==void 0&&(l=OA(10,h-s-1),n=T/l%10|0,w=e<0||z[E+1]!==void 0||T%l,w=a<4?(n||w)&&(a==0||a==(t.s<0?3:2)):n>5||n==5&&(a==4||w||a==6&&(r>0?s>0?T/OA(10,h-s):0:z[E-1])%10&1||a==(t.s<0?8:7))),e<1||!z[0])return w?(l=su(t),z.length=1,e=e-l-1,z[0]=OA(10,(Po-e%Po)%Po),t.e=Zv(-e/Po)||0):(z.length=1,z[0]=t.e=t.s=0),t;if(r==0?(z.length=E,l=1,E--):(z.length=E+1,l=OA(10,Po-r),z[E]=s>0?(T/OA(10,h-s)%OA(10,s)|0)*l:0),w)for(;;)if(E==0){(z[0]+=l)==Ju&&(z[0]=1,++t.e);break}else{if(z[E]+=l,z[E]!=Ju)break;z[E--]=0,l=1}for(r=z.length;z[--r]===0;)z.pop();if(Ho&&(t.e>Ib||t.e<-Ib))throw Error(J3+su(t));return t}function oY(t,e){var a,r,s,l,h,n,w,T,E,z,k=t.constructor,U=k.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new k(t),Ho?so(e,U):e;if(w=t.d,z=e.d,r=e.e,T=t.e,w=w.slice(),h=T-r,h){for(E=h<0,E?(a=w,h=-h,n=z.length):(a=z,r=T,n=w.length),s=Math.max(Math.ceil(U/Po),n)+2,h>s&&(h=s,a.length=1),a.reverse(),s=h;s--;)a.push(0);a.reverse()}else{for(s=w.length,n=z.length,E=s<n,E&&(n=s),s=0;s<n;s++)if(w[s]!=z[s]){E=w[s]<z[s];break}h=0}for(E&&(a=w,w=z,z=a,e.s=-e.s),n=w.length,s=z.length-n;s>0;--s)w[n++]=0;for(s=z.length;s>h;){if(w[--s]<z[s]){for(l=s;l&&w[--l]===0;)w[l]=Ju-1;--w[l],w[s]+=Ju}w[s]-=z[s]}for(;w[--n]===0;)w.pop();for(;w[0]===0;w.shift())--r;return w[0]?(e.d=w,e.e=r,Ho?so(e,U):e):new k(0)}function l0(t,e,a){var r,s=su(t),l=gm(t.d),h=l.length;return e?(a&&(r=a-h)>0?l=l.charAt(0)+"."+l.slice(1)+hg(r):h>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(s<0?"e":"e+")+s):s<0?(l="0."+hg(-s-1)+l,a&&(r=a-h)>0&&(l+=hg(r))):s>=h?(l+=hg(s+1-h),a&&(r=a-s-1)>0&&(l=l+"."+hg(r))):((r=s+1)<h&&(l=l.slice(0,r)+"."+l.slice(r)),a&&(r=a-h)>0&&(s+1===h&&(l+="."),l+=hg(r))),t.s<0?"-"+l:l}function l7(t,e){if(t.length>e)return t.length=e,!0}function lY(t){var e,a,r;function s(l){var h=this;if(!(h instanceof s))return new s(l);if(h.constructor=s,l instanceof s){h.s=l.s,h.e=l.e,h.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(WA+l);if(l>0)h.s=1;else if(l<0)l=-l,h.s=-1;else{h.s=0,h.e=0,h.d=[0];return}if(l===~~l&&l<1e7){h.e=0,h.d=[l];return}return o7(h,l.toString())}else if(typeof l!="string")throw Error(WA+l);if(l.charCodeAt(0)===45?(l=l.slice(1),h.s=-1):h.s=1,eAe.test(l))o7(h,l);else throw Error(WA+l)}if(s.prototype=Wr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=lY,s.config=s.set=tAe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(a=r[e++])||(t[a]=this[a]);return s.config(t),s}function tAe(t){if(!t||typeof t!="object")throw Error(Bf+"Object expected");var e,a,r,s=["precision",1,jv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[a=s[e]])!==void 0)if(Zv(r)===r&&r>=s[e+1]&&r<=s[e+2])this[a]=r;else throw Error(WA+a+": "+r);if((r=t[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(WA+a+": "+r);return this}var Q3=lY(Qge);tf=new Q3(1);const Ws=Q3;function aAe(t){return sAe(t)||iAe(t)||nAe(t)||rAe()}function rAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nAe(t,e){if(t){if(typeof t=="string")return SD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return SD(t,e)}}function iAe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function sAe(t){if(Array.isArray(t))return SD(t)}function SD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var oAe=function(e){return e},uY={},cY=function(e){return e===uY},u7=function(e){return function a(){return arguments.length===0||arguments.length===1&&cY(arguments.length<=0?void 0:arguments[0])?a:e.apply(void 0,arguments)}},lAe=function t(e,a){return e===1?a:u7(function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];var h=s.filter(function(n){return n!==uY}).length;return h>=e?a.apply(void 0,s):t(e-h,u7(function(){for(var n=arguments.length,w=new Array(n),T=0;T<n;T++)w[T]=arguments[T];var E=s.map(function(z){return cY(z)?w.shift():z});return a.apply(void 0,aAe(E).concat(w))}))})},C2=function(e){return lAe(e.length,e)},CD=function(e,a){for(var r=[],s=e;s<a;++s)r[s-e]=s;return r},uAe=C2(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(a){return e[a]}).map(t)}),cAe=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];if(!a.length)return oAe;var s=a.reverse(),l=s[0],h=s.slice(1);return function(){return h.reduce(function(n,w){return w(n)},l.apply(void 0,arguments))}},bD=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},dY=function(e){var a=null,r=null;return function(){for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return a&&l.every(function(n,w){return n===a[w]})||(a=l,r=e.apply(void 0,l)),r}};function dAe(t){var e;return t===0?e=1:e=Math.floor(new Ws(t).abs().log(10).toNumber())+1,e}function hAe(t,e,a){for(var r=new Ws(t),s=0,l=[];r.lt(e)&&s<1e5;)l.push(r.toNumber()),r=r.add(a),s++;return l}var fAe=C2(function(t,e,a){var r=+t,s=+e;return r+a*(s-r)}),pAe=C2(function(t,e,a){var r=e-+t;return r=r||1/0,(a-t)/r}),mAe=C2(function(t,e,a){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(a-t)/r))});const b2={rangeStep:hAe,getDigitCount:dAe,interpolateNumber:fAe,uninterpolateNumber:pAe,uninterpolateTruncation:mAe};function xD(t){return AAe(t)||gAe(t)||hY(t)||yAe()}function yAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gAe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function AAe(t){if(Array.isArray(t))return PD(t)}function RR(t,e){return wAe(t)||vAe(t,e)||hY(t,e)||_Ae()}function _Ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hY(t,e){if(t){if(typeof t=="string")return PD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return PD(t,e)}}function PD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function vAe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],r=!0,s=!1,l=void 0;try{for(var h=t[Symbol.iterator](),n;!(r=(n=h.next()).done)&&(a.push(n.value),!(e&&a.length===e));r=!0);}catch(w){s=!0,l=w}finally{try{!r&&h.return!=null&&h.return()}finally{if(s)throw l}}return a}}function wAe(t){if(Array.isArray(t))return t}function fY(t){var e=RR(t,2),a=e[0],r=e[1],s=a,l=r;return a>r&&(s=r,l=a),[s,l]}function pY(t,e,a){if(t.lte(0))return new Ws(0);var r=b2.getDigitCount(t.toNumber()),s=new Ws(10).pow(r),l=t.div(s),h=r!==1?.05:.1,n=new Ws(Math.ceil(l.div(h).toNumber())).add(a).mul(h),w=n.mul(s);return e?w:new Ws(Math.ceil(w))}function RAe(t,e,a){var r=1,s=new Ws(t);if(!s.isint()&&a){var l=Math.abs(t);l<1?(r=new Ws(10).pow(b2.getDigitCount(t)-1),s=new Ws(Math.floor(s.div(r).toNumber())).mul(r)):l>1&&(s=new Ws(Math.floor(t)))}else t===0?s=new Ws(Math.floor((e-1)/2)):a||(s=new Ws(Math.floor(t)));var h=Math.floor((e-1)/2),n=cAe(uAe(function(w){return s.add(new Ws(w-h).mul(r)).toNumber()}),CD);return n(0,e)}function mY(t,e,a,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(a-1)))return{step:new Ws(0),tickMin:new Ws(0),tickMax:new Ws(0)};var l=pY(new Ws(e).sub(t).div(a-1),r,s),h;t<=0&&e>=0?h=new Ws(0):(h=new Ws(t).add(e).div(2),h=h.sub(new Ws(h).mod(l)));var n=Math.ceil(h.sub(t).div(l).toNumber()),w=Math.ceil(new Ws(e).sub(h).div(l).toNumber()),T=n+w+1;return T>a?mY(t,e,a,r,s+1):(T<a&&(w=e>0?w+(a-T):w,n=e>0?n:n+(a-T)),{step:l,tickMin:h.sub(new Ws(n).mul(l)),tickMax:h.add(new Ws(w).mul(l))})}function TAe(t){var e=RR(t,2),a=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=Math.max(s,2),n=fY([a,r]),w=RR(n,2),T=w[0],E=w[1];if(T===-1/0||E===1/0){var z=E===1/0?[T].concat(xD(CD(0,s-1).map(function(){return 1/0}))):[].concat(xD(CD(0,s-1).map(function(){return-1/0})),[E]);return a>r?bD(z):z}if(T===E)return RAe(T,s,l);var k=mY(T,E,h,l),U=k.step,q=k.tickMin,H=k.tickMax,$=b2.rangeStep(q,H.add(new Ws(.1).mul(U)),U);return a>r?bD($):$}function SAe(t,e){var a=RR(t,2),r=a[0],s=a[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=fY([r,s]),n=RR(h,2),w=n[0],T=n[1];if(w===-1/0||T===1/0)return[r,s];if(w===T)return[w];var E=Math.max(e,2),z=pY(new Ws(T).sub(w).div(E-1),l,0),k=[].concat(xD(b2.rangeStep(new Ws(w),new Ws(T).sub(new Ws(.99).mul(z)),z)),[T]);return r>s?bD(k):k}var CAe=dY(TAe),bAe=dY(SAe),xAe="Invariant failed";function u0(t,e){throw new Error(xAe)}var PAe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function uv(t){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(t)}function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Lb.apply(this,arguments)}function EAe(t,e){return OAe(t)||zAe(t,e)||VAe(t,e)||NAe()}function NAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VAe(t,e){if(t){if(typeof t=="string")return c7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c7(t,e)}}function c7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function zAe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function OAe(t){if(Array.isArray(t))return t}function DAe(t,e){if(t==null)return{};var a=MAe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function MAe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function IAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LAe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AY(r.key),r)}}function FAe(t,e,a){return e&&LAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UAe(t,e,a){return e=Fb(e),kAe(t,yY()?Reflect.construct(e,a||[],Fb(t).constructor):e.apply(t,a))}function kAe(t,e){if(e&&(uv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BAe(t)}function BAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yY=function(){return!!t})()}function Fb(t){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Fb(t)}function GAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ED(t,e)}function ED(t,e){return ED=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ED(t,e)}function gY(t,e,a){return e=AY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function AY(t){var e=jAe(t,"string");return uv(e)=="symbol"?e:e+""}function jAe(t,e){if(uv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CT=function(t){function e(){return IAe(this,e),UAe(this,e,arguments)}return GAe(e,t),FAe(e,[{key:"render",value:function(){var r=this.props,s=r.offset,l=r.layout,h=r.width,n=r.dataKey,w=r.data,T=r.dataPointFormatter,E=r.xAxis,z=r.yAxis,k=DAe(r,PAe),U=fn(k,!1);this.props.direction==="x"&&E.type!=="number"&&u0();var q=w.map(function(H){var $=T(H,n),Q=$.x,ne=$.y,de=$.value,ge=$.errorVal;if(!ge)return null;var fe=[],_e,me;if(Array.isArray(ge)){var Ae=EAe(ge,2);_e=Ae[0],me=Ae[1]}else _e=me=ge;if(l==="vertical"){var Te=E.scale,Oe=ne+s,ie=Oe+h,we=Oe-h,Me=Te(de-_e),Ve=Te(de+me);fe.push({x1:Ve,y1:ie,x2:Ve,y2:we}),fe.push({x1:Me,y1:Oe,x2:Ve,y2:Oe}),fe.push({x1:Me,y1:ie,x2:Me,y2:we})}else if(l==="horizontal"){var Ie=z.scale,Ue=Q+s,Be=Ue-h,ke=Ue+h,Je=Ie(de-_e),Le=Ie(de+me);fe.push({x1:Be,y1:Le,x2:ke,y2:Le}),fe.push({x1:Ue,y1:Je,x2:Ue,y2:Le}),fe.push({x1:Be,y1:Je,x2:ke,y2:Je})}return It.createElement(Ii,Lb({className:"recharts-errorBar",key:"bar-".concat(fe.map(function(qe){return"".concat(qe.x1,"-").concat(qe.x2,"-").concat(qe.y1,"-").concat(qe.y2)}))},U),fe.map(function(qe){return It.createElement("line",Lb({},qe,{key:"line-".concat(qe.x1,"-").concat(qe.x2,"-").concat(qe.y1,"-").concat(qe.y2)}))}))});return It.createElement(Ii,{className:"recharts-errorBars"},q)}}])}(It.Component);gY(CT,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});gY(CT,"displayName","ErrorBar");function TR(t){"@babel/helpers - typeof";return TR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TR(t)}function d7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function xA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?d7(Object(a),!0).forEach(function(r){ZAe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ZAe(t,e,a){return e=qAe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qAe(t){var e=HAe(t,"string");return TR(e)=="symbol"?e:e+""}function HAe(t,e){if(TR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(TR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _Y=function(e){var a=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,l=e.legendContent,h=Qh(a,If);if(!h)return null;var n=If.defaultProps,w=n!==void 0?xA(xA({},n),h.props):{},T;return h.props&&h.props.payload?T=h.props&&h.props.payload:l==="children"?T=(r||[]).reduce(function(E,z){var k=z.item,U=z.props,q=U.sectors||U.data||[];return E.concat(q.map(function(H){return{type:h.props.iconType||k.props.legendType,value:H.name,color:H.fill,payload:H}}))},[]):T=(r||[]).map(function(E){var z=E.item,k=z.type.defaultProps,U=k!==void 0?xA(xA({},k),z.props):{},q=U.dataKey,H=U.name,$=U.legendType,Q=U.hide;return{inactive:Q,dataKey:q,type:w.iconType||$||"square",color:e4(z),value:H||q,payload:U}}),xA(xA(xA({},w),If.getWithHeight(h,s)),{},{payload:T,item:h})};function SR(t){"@babel/helpers - typeof";return SR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SR(t)}function h7(t){return YAe(t)||WAe(t)||KAe(t)||$Ae()}function $Ae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KAe(t,e){if(t){if(typeof t=="string")return ND(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ND(t,e)}}function WAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function YAe(t){if(Array.isArray(t))return ND(t)}function ND(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function f7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function vl(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?f7(Object(a),!0).forEach(function(r){k_(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function k_(t,e,a){return e=XAe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function XAe(t){var e=JAe(t,"string");return SR(e)=="symbol"?e:e+""}function JAe(t,e){if(SR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(SR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ul(t,e,a){return si(t)||si(e)?a:Mu(e)?sf(t,e,a):Gn(e)?e(t):a}function Iw(t,e,a,r){var s=Yge(t,function(n){return Ul(n,e)});if(a==="number"){var l=s.filter(function(n){return mr(n)||parseFloat(n)});return l.length?[S2(l),_g(l)]:[1/0,-1/0]}var h=r?s.filter(function(n){return!si(n)}):s;return h.map(function(n){return Mu(n)||n instanceof Date?n:""})}var QAe=function(e){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,h=-1,n=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(n<=1)return 0;if(l&&l.axisType==="angleAxis"&&Math.abs(Math.abs(l.range[1]-l.range[0])-360)<=1e-6)for(var w=l.range,T=0;T<n;T++){var E=T>0?s[T-1].coordinate:s[n-1].coordinate,z=s[T].coordinate,k=T>=n-1?s[0].coordinate:s[T+1].coordinate,U=void 0;if(Kd(z-E)!==Kd(k-z)){var q=[];if(Kd(k-z)===Kd(w[1]-w[0])){U=k;var H=z+w[1]-w[0];q[0]=Math.min(H,(H+E)/2),q[1]=Math.max(H,(H+E)/2)}else{U=E;var $=k+w[1]-w[0];q[0]=Math.min(z,($+z)/2),q[1]=Math.max(z,($+z)/2)}var Q=[Math.min(z,(U+z)/2),Math.max(z,(U+z)/2)];if(e>Q[0]&&e<=Q[1]||e>=q[0]&&e<=q[1]){h=s[T].index;break}}else{var ne=Math.min(E,k),de=Math.max(E,k);if(e>(ne+z)/2&&e<=(de+z)/2){h=s[T].index;break}}}else for(var ge=0;ge<n;ge++)if(ge===0&&e<=(r[ge].coordinate+r[ge+1].coordinate)/2||ge>0&&ge<n-1&&e>(r[ge].coordinate+r[ge-1].coordinate)/2&&e<=(r[ge].coordinate+r[ge+1].coordinate)/2||ge===n-1&&e>(r[ge].coordinate+r[ge-1].coordinate)/2){h=r[ge].index;break}return h},e4=function(e){var a,r=e,s=r.type.displayName,l=(a=e.type)!==null&&a!==void 0&&a.defaultProps?vl(vl({},e.type.defaultProps),e.props):e.props,h=l.stroke,n=l.fill,w;switch(s){case"Line":w=h;break;case"Area":case"Radar":w=h&&h!=="none"?h:n;break;default:w=n;break}return w},e0e=function(e){var a=e.barSize,r=e.totalSize,s=e.stackGroups,l=s===void 0?{}:s;if(!l)return{};for(var h={},n=Object.keys(l),w=0,T=n.length;w<T;w++)for(var E=l[n[w]].stackGroups,z=Object.keys(E),k=0,U=z.length;k<U;k++){var q=E[z[k]],H=q.items,$=q.cateAxisId,Q=H.filter(function(me){return cy(me.type).indexOf("Bar")>=0});if(Q&&Q.length){var ne=Q[0].type.defaultProps,de=ne!==void 0?vl(vl({},ne),Q[0].props):Q[0].props,ge=de.barSize,fe=de[$];h[fe]||(h[fe]=[]);var _e=si(ge)?a:ge;h[fe].push({item:Q[0],stackList:Q.slice(1),barSize:si(_e)?void 0:Wd(_e,r,0)})}}return h},t0e=function(e){var a=e.barGap,r=e.barCategoryGap,s=e.bandSize,l=e.sizeList,h=l===void 0?[]:l,n=e.maxBarSize,w=h.length;if(w<1)return null;var T=Wd(a,s,0,!0),E,z=[];if(h[0].barSize===+h[0].barSize){var k=!1,U=s/w,q=h.reduce(function(ge,fe){return ge+fe.barSize||0},0);q+=(w-1)*T,q>=s&&(q-=(w-1)*T,T=0),q>=s&&U>0&&(k=!0,U*=.9,q=w*U);var H=(s-q)/2>>0,$={offset:H-T,size:0};E=h.reduce(function(ge,fe){var _e={item:fe.item,position:{offset:$.offset+$.size+T,size:k?U:fe.barSize}},me=[].concat(h7(ge),[_e]);return $=me[me.length-1].position,fe.stackList&&fe.stackList.length&&fe.stackList.forEach(function(Ae){me.push({item:Ae,position:$})}),me},z)}else{var Q=Wd(r,s,0,!0);s-2*Q-(w-1)*T<=0&&(T=0);var ne=(s-2*Q-(w-1)*T)/w;ne>1&&(ne>>=0);var de=n===+n?Math.min(ne,n):ne;E=h.reduce(function(ge,fe,_e){var me=[].concat(h7(ge),[{item:fe.item,position:{offset:Q+(ne+T)*_e+(ne-de)/2,size:de}}]);return fe.stackList&&fe.stackList.length&&fe.stackList.forEach(function(Ae){me.push({item:Ae,position:me[me.length-1].position})}),me},z)}return E},a0e=function(e,a,r,s){var l=r.children,h=r.width,n=r.margin,w=h-(n.left||0)-(n.right||0),T=_Y({children:l,legendWidth:w});if(T){var E=s||{},z=E.width,k=E.height,U=T.align,q=T.verticalAlign,H=T.layout;if((H==="vertical"||H==="horizontal"&&q==="middle")&&U!=="center"&&mr(e[U]))return vl(vl({},e),{},k_({},U,e[U]+(z||0)));if((H==="horizontal"||H==="vertical"&&U==="center")&&q!=="middle"&&mr(e[q]))return vl(vl({},e),{},k_({},q,e[q]+(k||0)))}return e},r0e=function(e,a,r){return si(a)?!0:e==="horizontal"?a==="yAxis":e==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},vY=function(e,a,r,s,l){var h=a.props.children,n=of(h,CT).filter(function(T){return r0e(s,l,T.props.direction)});if(n&&n.length){var w=n.map(function(T){return T.props.dataKey});return e.reduce(function(T,E){var z=Ul(E,r);if(si(z))return T;var k=Array.isArray(z)?[S2(z),_g(z)]:[z,z],U=w.reduce(function(q,H){var $=Ul(E,H,0),Q=k[0]-Math.abs(Array.isArray($)?$[0]:$),ne=k[1]+Math.abs(Array.isArray($)?$[1]:$);return[Math.min(Q,q[0]),Math.max(ne,q[1])]},[1/0,-1/0]);return[Math.min(U[0],T[0]),Math.max(U[1],T[1])]},[1/0,-1/0])}return null},n0e=function(e,a,r,s,l){var h=a.map(function(n){return vY(e,n,r,l,s)}).filter(function(n){return!si(n)});return h&&h.length?h.reduce(function(n,w){return[Math.min(n[0],w[0]),Math.max(n[1],w[1])]},[1/0,-1/0]):null},wY=function(e,a,r,s,l){var h=a.map(function(w){var T=w.props.dataKey;return r==="number"&&T&&vY(e,w,T,s)||Iw(e,T,r,l)});if(r==="number")return h.reduce(function(w,T){return[Math.min(w[0],T[0]),Math.max(w[1],T[1])]},[1/0,-1/0]);var n={};return h.reduce(function(w,T){for(var E=0,z=T.length;E<z;E++)n[T[E]]||(n[T[E]]=!0,w.push(T[E]));return w},[])},RY=function(e,a){return e==="horizontal"&&a==="xAxis"||e==="vertical"&&a==="yAxis"||e==="centric"&&a==="angleAxis"||e==="radial"&&a==="radiusAxis"},TY=function(e,a,r,s){if(s)return e.map(function(w){return w.coordinate});var l,h,n=e.map(function(w){return w.coordinate===a&&(l=!0),w.coordinate===r&&(h=!0),w.coordinate});return l||n.push(a),h||n.push(r),n},oy=function(e,a,r){if(!e)return null;var s=e.scale,l=e.duplicateDomain,h=e.type,n=e.range,w=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,T=(a||r)&&h==="category"&&s.bandwidth?s.bandwidth()/w:0;if(T=e.axisType==="angleAxis"&&(n==null?void 0:n.length)>=2?Kd(n[0]-n[1])*2*T:T,a&&(e.ticks||e.niceTicks)){var E=(e.ticks||e.niceTicks).map(function(z){var k=l?l.indexOf(z):z;return{coordinate:s(k)+T,value:z,offset:T}});return E.filter(function(z){return!kv(z.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(z,k){return{coordinate:s(z)+T,value:z,index:k,offset:T}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(z){return{coordinate:s(z)+T,value:z,offset:T}}):s.domain().map(function(z,k){return{coordinate:s(z)+T,value:l?l[z]:z,index:k,offset:T}})},Jz=new WeakMap,iC=function(e,a){if(typeof a!="function")return e;Jz.has(e)||Jz.set(e,new WeakMap);var r=Jz.get(e);if(r.has(a))return r.get(a);var s=function(){e.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,s),s},SY=function(e,a,r){var s=e.scale,l=e.type,h=e.layout,n=e.axisType;if(s==="auto")return h==="radial"&&n==="radiusAxis"?{scale:yR(),realScaleType:"band"}:h==="radial"&&n==="angleAxis"?{scale:zb(),realScaleType:"linear"}:l==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:Mw(),realScaleType:"point"}:l==="category"?{scale:yR(),realScaleType:"band"}:{scale:zb(),realScaleType:"linear"};if(_T(s)){var w="scale".concat(c2(s));return{scale:(JG[w]||Mw)(),realScaleType:JG[w]?w:"point"}}return Gn(s)?{scale:s}:{scale:Mw(),realScaleType:"point"}},p7=1e-4,CY=function(e){var a=e.domain();if(!(!a||a.length<=2)){var r=a.length,s=e.range(),l=Math.min(s[0],s[1])-p7,h=Math.max(s[0],s[1])+p7,n=e(a[0]),w=e(a[r-1]);(n<l||n>h||w<l||w>h)&&e.domain([a[0],a[r-1]])}},i0e=function(e,a){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===a)return e[r].position;return null},s0e=function(e,a){if(!a||a.length!==2||!mr(a[0])||!mr(a[1]))return e;var r=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]),l=[e[0],e[1]];return(!mr(e[0])||e[0]<r)&&(l[0]=r),(!mr(e[1])||e[1]>s)&&(l[1]=s),l[0]>s&&(l[0]=s),l[1]<r&&(l[1]=r),l},o0e=function(e){var a=e.length;if(!(a<=0))for(var r=0,s=e[0].length;r<s;++r)for(var l=0,h=0,n=0;n<a;++n){var w=kv(e[n][r][1])?e[n][r][0]:e[n][r][1];w>=0?(e[n][r][0]=l,e[n][r][1]=l+w,l=e[n][r][1]):(e[n][r][0]=h,e[n][r][1]=h+w,h=e[n][r][1])}},l0e=function(e){var a=e.length;if(!(a<=0))for(var r=0,s=e[0].length;r<s;++r)for(var l=0,h=0;h<a;++h){var n=kv(e[h][r][1])?e[h][r][0]:e[h][r][1];n>=0?(e[h][r][0]=l,e[h][r][1]=l+n,l=e[h][r][1]):(e[h][r][0]=0,e[h][r][1]=0)}},u0e={sign:o0e,expand:Yde,none:tv,silhouette:Xde,wiggle:Jde,positive:l0e},c0e=function(e,a,r){var s=a.map(function(n){return n.props.dataKey}),l=u0e[r],h=Wde().keys(s).value(function(n,w){return+Ul(n,w,0)}).order(sD).offset(l);return h(e)},d0e=function(e,a,r,s,l,h){if(!e)return null;var n=h?a.reverse():a,w={},T=n.reduce(function(z,k){var U,q=(U=k.type)!==null&&U!==void 0&&U.defaultProps?vl(vl({},k.type.defaultProps),k.props):k.props,H=q.stackId,$=q.hide;if($)return z;var Q=q[r],ne=z[Q]||{hasStack:!1,stackGroups:{}};if(Mu(H)){var de=ne.stackGroups[H]||{numericAxisId:r,cateAxisId:s,items:[]};de.items.push(k),ne.hasStack=!0,ne.stackGroups[H]=de}else ne.stackGroups[g0("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[k]};return vl(vl({},z),{},k_({},Q,ne))},w),E={};return Object.keys(T).reduce(function(z,k){var U=T[k];if(U.hasStack){var q={};U.stackGroups=Object.keys(U.stackGroups).reduce(function(H,$){var Q=U.stackGroups[$];return vl(vl({},H),{},k_({},$,{numericAxisId:r,cateAxisId:s,items:Q.items,stackedData:c0e(e,Q.items,l)}))},q)}return vl(vl({},z),{},k_({},k,U))},E)},bY=function(e,a){var r=a.realScaleType,s=a.type,l=a.tickCount,h=a.originalDomain,n=a.allowDecimals,w=r||a.scale;if(w!=="auto"&&w!=="linear")return null;if(l&&s==="number"&&h&&(h[0]==="auto"||h[1]==="auto")){var T=e.domain();if(!T.length)return null;var E=CAe(T,l,n);return e.domain([S2(E),_g(E)]),{niceTicks:E}}if(l&&s==="number"){var z=e.domain(),k=bAe(z,l,n);return{niceTicks:k}}return null};function Ub(t){var e=t.axis,a=t.ticks,r=t.bandSize,s=t.entry,l=t.index,h=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!si(s[e.dataKey])){var n=pb(a,"value",s[e.dataKey]);if(n)return n.coordinate+r/2}return a[l]?a[l].coordinate+r/2:null}var w=Ul(s,si(h)?e.dataKey:h);return si(w)?null:e.scale(w)}var m7=function(e){var a=e.axis,r=e.ticks,s=e.offset,l=e.bandSize,h=e.entry,n=e.index;if(a.type==="category")return r[n]?r[n].coordinate+s:null;var w=Ul(h,a.dataKey,a.domain[n]);return si(w)?null:a.scale(w)-l/2+s},h0e=function(e){var a=e.numericAxis,r=a.scale.domain();if(a.type==="number"){var s=Math.min(r[0],r[1]),l=Math.max(r[0],r[1]);return s<=0&&l>=0?0:l<0?l:s}return r[0]},f0e=function(e,a){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?vl(vl({},e.type.defaultProps),e.props):e.props,l=s.stackId;if(Mu(l)){var h=a[l];if(h){var n=h.items.indexOf(e);return n>=0?h.stackedData[n]:null}}return null},p0e=function(e){return e.reduce(function(a,r){return[S2(r.concat([a[0]]).filter(mr)),_g(r.concat([a[1]]).filter(mr))]},[1/0,-1/0])},xY=function(e,a,r){return Object.keys(e).reduce(function(s,l){var h=e[l],n=h.stackedData,w=n.reduce(function(T,E){var z=p0e(E.slice(a,r+1));return[Math.min(T[0],z[0]),Math.max(T[1],z[1])]},[1/0,-1/0]);return[Math.min(w[0],s[0]),Math.max(w[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},y7=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,g7=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VD=function(e,a,r){if(Gn(e))return e(a,r);if(!Array.isArray(e))return a;var s=[];if(mr(e[0]))s[0]=r?e[0]:Math.min(e[0],a[0]);else if(y7.test(e[0])){var l=+y7.exec(e[0])[1];s[0]=a[0]-l}else Gn(e[0])?s[0]=e[0](a[0]):s[0]=a[0];if(mr(e[1]))s[1]=r?e[1]:Math.max(e[1],a[1]);else if(g7.test(e[1])){var h=+g7.exec(e[1])[1];s[1]=a[1]+h}else Gn(e[1])?s[1]=e[1](a[1]):s[1]=a[1];return s},kb=function(e,a,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&a&&a.length>=2){for(var l=P3(a,function(z){return z.coordinate}),h=1/0,n=1,w=l.length;n<w;n++){var T=l[n],E=l[n-1];h=Math.min((T.coordinate||0)-(E.coordinate||0),h)}return h===1/0?0:h}return r?void 0:0},A7=function(e,a,r){return!e||!e.length||o0(e,sf(r,"type.defaultProps.domain"))?a:e},PY=function(e,a){var r=e.type.defaultProps?vl(vl({},e.type.defaultProps),e.props):e.props,s=r.dataKey,l=r.name,h=r.unit,n=r.formatter,w=r.tooltipType,T=r.chartType,E=r.hide;return vl(vl({},fn(e,!1)),{},{dataKey:s,unit:h,formatter:n,name:l||s,color:e4(e),value:Ul(a,s),type:w,payload:a,chartType:T,hide:E})};function CR(t){"@babel/helpers - typeof";return CR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CR(t)}function _7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function ey(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?_7(Object(a),!0).forEach(function(r){EY(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function EY(t,e,a){return e=m0e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function m0e(t){var e=y0e(t,"string");return CR(e)=="symbol"?e:e+""}function y0e(t,e){if(CR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(CR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function g0e(t,e){return w0e(t)||v0e(t,e)||_0e(t,e)||A0e()}function A0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _0e(t,e){if(t){if(typeof t=="string")return v7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return v7(t,e)}}function v7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function v0e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function w0e(t){if(Array.isArray(t))return t}var Bb=Math.PI/180,R0e=function(e){return e*180/Math.PI},wo=function(e,a,r,s){return{x:e+Math.cos(-Bb*s)*r,y:a+Math.sin(-Bb*s)*r}},NY=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(a-(r.top||0)-(r.bottom||0)))/2},T0e=function(e,a,r,s,l){var h=e.width,n=e.height,w=e.startAngle,T=e.endAngle,E=Wd(e.cx,h,h/2),z=Wd(e.cy,n,n/2),k=NY(h,n,r),U=Wd(e.innerRadius,k,0),q=Wd(e.outerRadius,k,k*.8),H=Object.keys(a);return H.reduce(function($,Q){var ne=a[Q],de=ne.domain,ge=ne.reversed,fe;if(si(ne.range))s==="angleAxis"?fe=[w,T]:s==="radiusAxis"&&(fe=[U,q]),ge&&(fe=[fe[1],fe[0]]);else{fe=ne.range;var _e=fe,me=g0e(_e,2);w=me[0],T=me[1]}var Ae=SY(ne,l),Te=Ae.realScaleType,Oe=Ae.scale;Oe.domain(de).range(fe),CY(Oe);var ie=bY(Oe,ey(ey({},ne),{},{realScaleType:Te})),we=ey(ey(ey({},ne),ie),{},{range:fe,radius:q,realScaleType:Te,scale:Oe,cx:E,cy:z,innerRadius:U,outerRadius:q,startAngle:w,endAngle:T});return ey(ey({},$),{},EY({},Q,we))},{})},S0e=function(e,a){var r=e.x,s=e.y,l=a.x,h=a.y;return Math.sqrt(Math.pow(r-l,2)+Math.pow(s-h,2))},C0e=function(e,a){var r=e.x,s=e.y,l=a.cx,h=a.cy,n=S0e({x:r,y:s},{x:l,y:h});if(n<=0)return{radius:n};var w=(r-l)/n,T=Math.acos(w);return s>h&&(T=2*Math.PI-T),{radius:n,angle:R0e(T),angleInRadian:T}},b0e=function(e){var a=e.startAngle,r=e.endAngle,s=Math.floor(a/360),l=Math.floor(r/360),h=Math.min(s,l);return{startAngle:a-h*360,endAngle:r-h*360}},x0e=function(e,a){var r=a.startAngle,s=a.endAngle,l=Math.floor(r/360),h=Math.floor(s/360),n=Math.min(l,h);return e+n*360},w7=function(e,a){var r=e.x,s=e.y,l=C0e({x:r,y:s},a),h=l.radius,n=l.angle,w=a.innerRadius,T=a.outerRadius;if(h<w||h>T)return!1;if(h===0)return!0;var E=b0e(a),z=E.startAngle,k=E.endAngle,U=n,q;if(z<=k){for(;U>k;)U-=360;for(;U<z;)U+=360;q=U>=z&&U<=k}else{for(;U>z;)U-=360;for(;U<k;)U+=360;q=U>=k&&U<=z}return q?ey(ey({},a),{},{radius:h,angle:x0e(U,a)}):null},VY=function(e){return!rt.isValidElement(e)&&!Gn(e)&&typeof e!="boolean"?e.className:""};function bR(t){"@babel/helpers - typeof";return bR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bR(t)}var P0e=["offset"];function E0e(t){return O0e(t)||z0e(t)||V0e(t)||N0e()}function N0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V0e(t,e){if(t){if(typeof t=="string")return zD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return zD(t,e)}}function z0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function O0e(t){if(Array.isArray(t))return zD(t)}function zD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function D0e(t,e){if(t==null)return{};var a=M0e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function M0e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function R7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function zu(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?R7(Object(a),!0).forEach(function(r){I0e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):R7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function I0e(t,e,a){return e=L0e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function L0e(t){var e=F0e(t,"string");return bR(e)=="symbol"?e:e+""}function F0e(t,e){if(bR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(bR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xR(){return xR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},xR.apply(this,arguments)}var U0e=function(e){var a=e.value,r=e.formatter,s=si(e.children)?a:e.children;return Gn(r)?r(s):s},k0e=function(e,a){var r=Kd(a-e),s=Math.min(Math.abs(a-e),360);return r*s},B0e=function(e,a,r){var s=e.position,l=e.viewBox,h=e.offset,n=e.className,w=l,T=w.cx,E=w.cy,z=w.innerRadius,k=w.outerRadius,U=w.startAngle,q=w.endAngle,H=w.clockWise,$=(z+k)/2,Q=k0e(U,q),ne=Q>=0?1:-1,de,ge;s==="insideStart"?(de=U+ne*h,ge=H):s==="insideEnd"?(de=q-ne*h,ge=!H):s==="end"&&(de=q+ne*h,ge=H),ge=Q<=0?ge:!ge;var fe=wo(T,E,$,de),_e=wo(T,E,$,de+(ge?1:-1)*359),me="M".concat(fe.x,",").concat(fe.y,`
    A`).concat($,",").concat($,",0,1,").concat(ge?0:1,`,
    `).concat(_e.x,",").concat(_e.y),Ae=si(e.id)?g0("recharts-radial-line-"):e.id;return It.createElement("text",xR({},r,{dominantBaseline:"central",className:hi("recharts-radial-bar-label",n)}),It.createElement("defs",null,It.createElement("path",{id:Ae,d:me})),It.createElement("textPath",{xlinkHref:"#".concat(Ae)},a))},G0e=function(e){var a=e.viewBox,r=e.offset,s=e.position,l=a,h=l.cx,n=l.cy,w=l.innerRadius,T=l.outerRadius,E=l.startAngle,z=l.endAngle,k=(E+z)/2;if(s==="outside"){var U=wo(h,n,T+r,k),q=U.x,H=U.y;return{x:q,y:H,textAnchor:q>=h?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:h,y:n,textAnchor:"middle",verticalAnchor:"end"};var $=(w+T)/2,Q=wo(h,n,$,k),ne=Q.x,de=Q.y;return{x:ne,y:de,textAnchor:"middle",verticalAnchor:"middle"}},j0e=function(e){var a=e.viewBox,r=e.parentViewBox,s=e.offset,l=e.position,h=a,n=h.x,w=h.y,T=h.width,E=h.height,z=E>=0?1:-1,k=z*s,U=z>0?"end":"start",q=z>0?"start":"end",H=T>=0?1:-1,$=H*s,Q=H>0?"end":"start",ne=H>0?"start":"end";if(l==="top"){var de={x:n+T/2,y:w-z*s,textAnchor:"middle",verticalAnchor:U};return zu(zu({},de),r?{height:Math.max(w-r.y,0),width:T}:{})}if(l==="bottom"){var ge={x:n+T/2,y:w+E+k,textAnchor:"middle",verticalAnchor:q};return zu(zu({},ge),r?{height:Math.max(r.y+r.height-(w+E),0),width:T}:{})}if(l==="left"){var fe={x:n-$,y:w+E/2,textAnchor:Q,verticalAnchor:"middle"};return zu(zu({},fe),r?{width:Math.max(fe.x-r.x,0),height:E}:{})}if(l==="right"){var _e={x:n+T+$,y:w+E/2,textAnchor:ne,verticalAnchor:"middle"};return zu(zu({},_e),r?{width:Math.max(r.x+r.width-_e.x,0),height:E}:{})}var me=r?{width:T,height:E}:{};return l==="insideLeft"?zu({x:n+$,y:w+E/2,textAnchor:ne,verticalAnchor:"middle"},me):l==="insideRight"?zu({x:n+T-$,y:w+E/2,textAnchor:Q,verticalAnchor:"middle"},me):l==="insideTop"?zu({x:n+T/2,y:w+k,textAnchor:"middle",verticalAnchor:q},me):l==="insideBottom"?zu({x:n+T/2,y:w+E-k,textAnchor:"middle",verticalAnchor:U},me):l==="insideTopLeft"?zu({x:n+$,y:w+k,textAnchor:ne,verticalAnchor:q},me):l==="insideTopRight"?zu({x:n+T-$,y:w+k,textAnchor:Q,verticalAnchor:q},me):l==="insideBottomLeft"?zu({x:n+$,y:w+E-k,textAnchor:ne,verticalAnchor:U},me):l==="insideBottomRight"?zu({x:n+T-$,y:w+E-k,textAnchor:Q,verticalAnchor:U},me):Uv(l)&&(mr(l.x)||kA(l.x))&&(mr(l.y)||kA(l.y))?zu({x:n+Wd(l.x,T),y:w+Wd(l.y,E),textAnchor:"end",verticalAnchor:"end"},me):zu({x:n+T/2,y:w+E/2,textAnchor:"middle",verticalAnchor:"middle"},me)},Z0e=function(e){return"cx"in e&&mr(e.cx)};function ec(t){var e=t.offset,a=e===void 0?5:e,r=D0e(t,P0e),s=zu({offset:a},r),l=s.viewBox,h=s.position,n=s.value,w=s.children,T=s.content,E=s.className,z=E===void 0?"":E,k=s.textBreakAll;if(!l||si(n)&&si(w)&&!rt.isValidElement(T)&&!Gn(T))return null;if(rt.isValidElement(T))return rt.cloneElement(T,s);var U;if(Gn(T)){if(U=rt.createElement(T,s),rt.isValidElement(U))return U}else U=U0e(s);var q=Z0e(l),H=fn(s,!0);if(q&&(h==="insideStart"||h==="insideEnd"||h==="end"))return B0e(s,U,H);var $=q?G0e(s):j0e(s);return It.createElement(s0,xR({className:hi("recharts-label",z)},H,$,{breakAll:k}),U)}ec.displayName="Label";var zY=function(e){var a=e.cx,r=e.cy,s=e.angle,l=e.startAngle,h=e.endAngle,n=e.r,w=e.radius,T=e.innerRadius,E=e.outerRadius,z=e.x,k=e.y,U=e.top,q=e.left,H=e.width,$=e.height,Q=e.clockWise,ne=e.labelViewBox;if(ne)return ne;if(mr(H)&&mr($)){if(mr(z)&&mr(k))return{x:z,y:k,width:H,height:$};if(mr(U)&&mr(q))return{x:U,y:q,width:H,height:$}}return mr(z)&&mr(k)?{x:z,y:k,width:0,height:0}:mr(a)&&mr(r)?{cx:a,cy:r,startAngle:l||s||0,endAngle:h||s||0,innerRadius:T||0,outerRadius:E||w||n||0,clockWise:Q}:e.viewBox?e.viewBox:{}},q0e=function(e,a){return e?e===!0?It.createElement(ec,{key:"label-implicit",viewBox:a}):Mu(e)?It.createElement(ec,{key:"label-implicit",viewBox:a,value:e}):rt.isValidElement(e)?e.type===ec?rt.cloneElement(e,{key:"label-implicit",viewBox:a}):It.createElement(ec,{key:"label-implicit",content:e,viewBox:a}):Gn(e)?It.createElement(ec,{key:"label-implicit",content:e,viewBox:a}):Uv(e)?It.createElement(ec,xR({viewBox:a},e,{key:"label-implicit"})):null:null},H0e=function(e,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,l=zY(e),h=of(s,ec).map(function(w,T){return rt.cloneElement(w,{viewBox:a||l,key:"label-".concat(T)})});if(!r)return h;var n=q0e(e.label,a||l);return[n].concat(E0e(h))};ec.parseViewBox=zY;ec.renderCallByParent=H0e;var Qz,T7;function $0e(){if(T7)return Qz;T7=1;function t(e){var a=e==null?0:e.length;return a?e[a-1]:void 0}return Qz=t,Qz}var K0e=$0e();const W0e=Xi(K0e);function PR(t){"@babel/helpers - typeof";return PR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PR(t)}var Y0e=["valueAccessor"],X0e=["data","dataKey","clockWise","id","textBreakAll"];function J0e(t){return a_e(t)||t_e(t)||e_e(t)||Q0e()}function Q0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e_e(t,e){if(t){if(typeof t=="string")return OD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return OD(t,e)}}function t_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function a_e(t){if(Array.isArray(t))return OD(t)}function OD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Gb(){return Gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Gb.apply(this,arguments)}function S7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function C7(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?S7(Object(a),!0).forEach(function(r){r_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function r_e(t,e,a){return e=n_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n_e(t){var e=i_e(t,"string");return PR(e)=="symbol"?e:e+""}function i_e(t,e){if(PR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(PR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b7(t,e){if(t==null)return{};var a=s_e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function s_e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var o_e=function(e){return Array.isArray(e.value)?W0e(e.value):e.value};function bp(t){var e=t.valueAccessor,a=e===void 0?o_e:e,r=b7(t,Y0e),s=r.data,l=r.dataKey,h=r.clockWise,n=r.id,w=r.textBreakAll,T=b7(r,X0e);return!s||!s.length?null:It.createElement(Ii,{className:"recharts-label-list"},s.map(function(E,z){var k=si(l)?a(E,z):Ul(E&&E.payload,l),U=si(n)?{}:{id:"".concat(n,"-").concat(z)};return It.createElement(ec,Gb({},fn(E,!0),T,U,{parentViewBox:E.parentViewBox,value:k,textBreakAll:w,viewBox:ec.parseViewBox(si(h)?E:C7(C7({},E),{},{clockWise:h})),key:"label-".concat(z),index:z}))}))}bp.displayName="LabelList";function l_e(t,e){return t?t===!0?It.createElement(bp,{key:"labelList-implicit",data:e}):It.isValidElement(t)||Gn(t)?It.createElement(bp,{key:"labelList-implicit",data:e,content:t}):Uv(t)?It.createElement(bp,Gb({data:e},t,{key:"labelList-implicit"})):null:null}function u_e(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var r=t.children,s=of(r,bp).map(function(h,n){return rt.cloneElement(h,{data:e,key:"labelList-".concat(n)})});if(!a)return s;var l=l_e(t.label,e);return[l].concat(J0e(s))}bp.renderCallByParent=u_e;function ER(t){"@babel/helpers - typeof";return ER=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ER(t)}function DD(){return DD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},DD.apply(this,arguments)}function x7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function P7(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?x7(Object(a),!0).forEach(function(r){c_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function c_e(t,e,a){return e=d_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function d_e(t){var e=h_e(t,"string");return ER(e)=="symbol"?e:e+""}function h_e(t,e){if(ER(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ER(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f_e=function(e,a){var r=Kd(a-e),s=Math.min(Math.abs(a-e),359.999);return r*s},sC=function(e){var a=e.cx,r=e.cy,s=e.radius,l=e.angle,h=e.sign,n=e.isExternal,w=e.cornerRadius,T=e.cornerIsExternal,E=w*(n?1:-1)+s,z=Math.asin(w/E)/Bb,k=T?l:l+h*z,U=wo(a,r,E,k),q=wo(a,r,s,k),H=T?l-h*z:l,$=wo(a,r,E*Math.cos(z*Bb),H);return{center:U,circleTangency:q,lineTangency:$,theta:z}},OY=function(e){var a=e.cx,r=e.cy,s=e.innerRadius,l=e.outerRadius,h=e.startAngle,n=e.endAngle,w=f_e(h,n),T=h+w,E=wo(a,r,l,h),z=wo(a,r,l,T),k="M ".concat(E.x,",").concat(E.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(w)>180),",").concat(+(h>T),`,
    `).concat(z.x,",").concat(z.y,`
  `);if(s>0){var U=wo(a,r,s,h),q=wo(a,r,s,T);k+="L ".concat(q.x,",").concat(q.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(w)>180),",").concat(+(h<=T),`,
            `).concat(U.x,",").concat(U.y," Z")}else k+="L ".concat(a,",").concat(r," Z");return k},p_e=function(e){var a=e.cx,r=e.cy,s=e.innerRadius,l=e.outerRadius,h=e.cornerRadius,n=e.forceCornerRadius,w=e.cornerIsExternal,T=e.startAngle,E=e.endAngle,z=Kd(E-T),k=sC({cx:a,cy:r,radius:l,angle:T,sign:z,cornerRadius:h,cornerIsExternal:w}),U=k.circleTangency,q=k.lineTangency,H=k.theta,$=sC({cx:a,cy:r,radius:l,angle:E,sign:-z,cornerRadius:h,cornerIsExternal:w}),Q=$.circleTangency,ne=$.lineTangency,de=$.theta,ge=w?Math.abs(T-E):Math.abs(T-E)-H-de;if(ge<0)return n?"M ".concat(q.x,",").concat(q.y,`
        a`).concat(h,",").concat(h,",0,0,1,").concat(h*2,`,0
        a`).concat(h,",").concat(h,",0,0,1,").concat(-h*2,`,0
      `):OY({cx:a,cy:r,innerRadius:s,outerRadius:l,startAngle:T,endAngle:E});var fe="M ".concat(q.x,",").concat(q.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(U.x,",").concat(U.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(ge>180),",").concat(+(z<0),",").concat(Q.x,",").concat(Q.y,`
    A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(ne.x,",").concat(ne.y,`
  `);if(s>0){var _e=sC({cx:a,cy:r,radius:s,angle:T,sign:z,isExternal:!0,cornerRadius:h,cornerIsExternal:w}),me=_e.circleTangency,Ae=_e.lineTangency,Te=_e.theta,Oe=sC({cx:a,cy:r,radius:s,angle:E,sign:-z,isExternal:!0,cornerRadius:h,cornerIsExternal:w}),ie=Oe.circleTangency,we=Oe.lineTangency,Me=Oe.theta,Ve=w?Math.abs(T-E):Math.abs(T-E)-Te-Me;if(Ve<0&&h===0)return"".concat(fe,"L").concat(a,",").concat(r,"Z");fe+="L".concat(we.x,",").concat(we.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(ie.x,",").concat(ie.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(Ve>180),",").concat(+(z>0),",").concat(me.x,",").concat(me.y,`
      A`).concat(h,",").concat(h,",0,0,").concat(+(z<0),",").concat(Ae.x,",").concat(Ae.y,"Z")}else fe+="L".concat(a,",").concat(r,"Z");return fe},m_e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},DY=function(e){var a=P7(P7({},m_e),e),r=a.cx,s=a.cy,l=a.innerRadius,h=a.outerRadius,n=a.cornerRadius,w=a.forceCornerRadius,T=a.cornerIsExternal,E=a.startAngle,z=a.endAngle,k=a.className;if(h<l||E===z)return null;var U=hi("recharts-sector",k),q=h-l,H=Wd(n,q,0,!0),$;return H>0&&Math.abs(E-z)<360?$=p_e({cx:r,cy:s,innerRadius:l,outerRadius:h,cornerRadius:Math.min(H,q/2),forceCornerRadius:w,cornerIsExternal:T,startAngle:E,endAngle:z}):$=OY({cx:r,cy:s,innerRadius:l,outerRadius:h,startAngle:E,endAngle:z}),It.createElement("path",DD({},fn(a,!0),{className:U,d:$,role:"img"}))};function NR(t){"@babel/helpers - typeof";return NR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NR(t)}function MD(){return MD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},MD.apply(this,arguments)}function E7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function N7(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?E7(Object(a),!0).forEach(function(r){y_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function y_e(t,e,a){return e=g_e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function g_e(t){var e=A_e(t,"string");return NR(e)=="symbol"?e:e+""}function A_e(t,e){if(NR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(NR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V7={curveBasisClosed:Fde,curveBasisOpen:Ude,curveBasis:Lde,curveBumpX:Tde,curveBumpY:Sde,curveLinearClosed:kde,curveLinear:h2,curveMonotoneX:Bde,curveMonotoneY:Gde,curveNatural:jde,curveStep:Zde,curveStepAfter:Hde,curveStepBefore:qde},oC=function(e){return e.x===+e.x&&e.y===+e.y},uw=function(e){return e.x},cw=function(e){return e.y},__e=function(e,a){if(Gn(e))return e;var r="curve".concat(c2(e));return(r==="curveMonotone"||r==="curveBump")&&a?V7["".concat(r).concat(a==="vertical"?"Y":"X")]:V7[r]||h2},v_e=function(e){var a=e.type,r=a===void 0?"linear":a,s=e.points,l=s===void 0?[]:s,h=e.baseLine,n=e.layout,w=e.connectNulls,T=w===void 0?!1:w,E=__e(r,n),z=T?l.filter(function(H){return oC(H)}):l,k;if(Array.isArray(h)){var U=T?h.filter(function(H){return oC(H)}):h,q=z.map(function(H,$){return N7(N7({},H),{},{base:U[$]})});return n==="vertical"?k=JS().y(cw).x1(uw).x0(function(H){return H.base.x}):k=JS().x(uw).y1(cw).y0(function(H){return H.base.y}),k.defined(oC).curve(E),k(q)}return n==="vertical"&&mr(h)?k=JS().y(cw).x1(uw).x0(h):mr(h)?k=JS().x(uw).y1(cw).y0(h):k=zK().x(uw).y(cw),k.defined(oC).curve(E),k(z)},YA=function(e){var a=e.className,r=e.points,s=e.path,l=e.pathRef;if((!r||!r.length)&&!s)return null;var h=r&&r.length?v_e(e):s;return It.createElement("path",MD({},fn(e,!1),mb(e),{className:hi("recharts-curve",a),d:h,ref:l}))},eO={exports:{}},tO,z7;function w_e(){if(z7)return tO;z7=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return tO=t,tO}var aO,O7;function R_e(){if(O7)return aO;O7=1;var t=w_e();function e(){}function a(){}return a.resetWarningCache=e,aO=function(){function r(h,n,w,T,E,z){if(z!==t){var k=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw k.name="Invariant Violation",k}}r.isRequired=r;function s(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:a,resetWarningCache:e};return l.PropTypes=l,l},aO}var D7;function T_e(){return D7||(D7=1,eO.exports=R_e()()),eO.exports}var S_e=T_e();const zs=Xi(S_e);var C_e=Object.getOwnPropertyNames,b_e=Object.getOwnPropertySymbols,x_e=Object.prototype.hasOwnProperty;function M7(t,e){return function(r,s,l){return t(r,s,l)&&e(r,s,l)}}function lC(t){return function(a,r,s){if(!a||!r||typeof a!="object"||typeof r!="object")return t(a,r,s);var l=s.cache,h=l.get(a),n=l.get(r);if(h&&n)return h===r&&n===a;l.set(a,r),l.set(r,a);var w=t(a,r,s);return l.delete(a),l.delete(r),w}}function I7(t){return C_e(t).concat(b_e(t))}var P_e=Object.hasOwn||function(t,e){return x_e.call(t,e)};function v0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var E_e="__v",N_e="__o",V_e="_owner",L7=Object.getOwnPropertyDescriptor,F7=Object.keys;function z_e(t,e,a){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!a.equals(t[r],e[r],r,r,t,e,a))return!1;return!0}function O_e(t,e){return v0(t.getTime(),e.getTime())}function D_e(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function M_e(t,e){return t===e}function U7(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),l=t.entries(),h,n,w=0;(h=l.next())&&!h.done;){for(var T=e.entries(),E=!1,z=0;(n=T.next())&&!n.done;){if(s[z]){z++;continue}var k=h.value,U=n.value;if(a.equals(k[0],U[0],w,z,t,e,a)&&a.equals(k[1],U[1],k[0],U[0],t,e,a)){E=s[z]=!0;break}z++}if(!E)return!1;w++}return!0}var I_e=v0;function L_e(t,e,a){var r=F7(t),s=r.length;if(F7(e).length!==s)return!1;for(;s-- >0;)if(!MY(t,e,a,r[s]))return!1;return!0}function dw(t,e,a){var r=I7(t),s=r.length;if(I7(e).length!==s)return!1;for(var l,h,n;s-- >0;)if(l=r[s],!MY(t,e,a,l)||(h=L7(t,l),n=L7(e,l),(h||n)&&(!h||!n||h.configurable!==n.configurable||h.enumerable!==n.enumerable||h.writable!==n.writable)))return!1;return!0}function F_e(t,e){return v0(t.valueOf(),e.valueOf())}function U_e(t,e){return t.source===e.source&&t.flags===e.flags}function k7(t,e,a){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),l=t.values(),h,n;(h=l.next())&&!h.done;){for(var w=e.values(),T=!1,E=0;(n=w.next())&&!n.done;){if(!s[E]&&a.equals(h.value,n.value,h.value,n.value,t,e,a)){T=s[E]=!0;break}E++}if(!T)return!1}return!0}function k_e(t,e){var a=t.length;if(e.length!==a)return!1;for(;a-- >0;)if(t[a]!==e[a])return!1;return!0}function B_e(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function MY(t,e,a,r){return(r===V_e||r===N_e||r===E_e)&&(t.$$typeof||e.$$typeof)?!0:P_e(e,r)&&a.equals(t[r],e[r],r,r,t,e,a)}var G_e="[object Arguments]",j_e="[object Boolean]",Z_e="[object Date]",q_e="[object Error]",H_e="[object Map]",$_e="[object Number]",K_e="[object Object]",W_e="[object RegExp]",Y_e="[object Set]",X_e="[object String]",J_e="[object URL]",Q_e=Array.isArray,B7=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,G7=Object.assign,eve=Object.prototype.toString.call.bind(Object.prototype.toString);function tve(t){var e=t.areArraysEqual,a=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,l=t.areMapsEqual,h=t.areNumbersEqual,n=t.areObjectsEqual,w=t.arePrimitiveWrappersEqual,T=t.areRegExpsEqual,E=t.areSetsEqual,z=t.areTypedArraysEqual,k=t.areUrlsEqual;return function(q,H,$){if(q===H)return!0;if(q==null||H==null)return!1;var Q=typeof q;if(Q!==typeof H)return!1;if(Q!=="object")return Q==="number"?h(q,H,$):Q==="function"?s(q,H,$):!1;var ne=q.constructor;if(ne!==H.constructor)return!1;if(ne===Object)return n(q,H,$);if(Q_e(q))return e(q,H,$);if(B7!=null&&B7(q))return z(q,H,$);if(ne===Date)return a(q,H,$);if(ne===RegExp)return T(q,H,$);if(ne===Map)return l(q,H,$);if(ne===Set)return E(q,H,$);var de=eve(q);return de===Z_e?a(q,H,$):de===W_e?T(q,H,$):de===H_e?l(q,H,$):de===Y_e?E(q,H,$):de===K_e?typeof q.then!="function"&&typeof H.then!="function"&&n(q,H,$):de===J_e?k(q,H,$):de===q_e?r(q,H,$):de===G_e?n(q,H,$):de===j_e||de===$_e||de===X_e?w(q,H,$):!1}}function ave(t){var e=t.circular,a=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?dw:z_e,areDatesEqual:O_e,areErrorsEqual:D_e,areFunctionsEqual:M_e,areMapsEqual:r?M7(U7,dw):U7,areNumbersEqual:I_e,areObjectsEqual:r?dw:L_e,arePrimitiveWrappersEqual:F_e,areRegExpsEqual:U_e,areSetsEqual:r?M7(k7,dw):k7,areTypedArraysEqual:r?dw:k_e,areUrlsEqual:B_e};if(a&&(s=G7({},s,a(s))),e){var l=lC(s.areArraysEqual),h=lC(s.areMapsEqual),n=lC(s.areObjectsEqual),w=lC(s.areSetsEqual);s=G7({},s,{areArraysEqual:l,areMapsEqual:h,areObjectsEqual:n,areSetsEqual:w})}return s}function rve(t){return function(e,a,r,s,l,h,n){return t(e,a,n)}}function nve(t){var e=t.circular,a=t.comparator,r=t.createState,s=t.equals,l=t.strict;if(r)return function(w,T){var E=r(),z=E.cache,k=z===void 0?e?new WeakMap:void 0:z,U=E.meta;return a(w,T,{cache:k,equals:s,meta:U,strict:l})};if(e)return function(w,T){return a(w,T,{cache:new WeakMap,equals:s,meta:void 0,strict:l})};var h={cache:void 0,equals:s,meta:void 0,strict:l};return function(w,T){return a(w,T,h)}}var ive=Bg();Bg({strict:!0});Bg({circular:!0});Bg({circular:!0,strict:!0});Bg({createInternalComparator:function(){return v0}});Bg({strict:!0,createInternalComparator:function(){return v0}});Bg({circular:!0,createInternalComparator:function(){return v0}});Bg({circular:!0,createInternalComparator:function(){return v0},strict:!0});function Bg(t){t===void 0&&(t={});var e=t.circular,a=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,l=t.strict,h=l===void 0?!1:l,n=ave(t),w=tve(n),T=r?r(w):rve(w);return nve({circular:a,comparator:w,createState:s,equals:T,strict:h})}function sve(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function j7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function s(l){a<0&&(a=l),l-a>e?(t(l),a=-1):sve(s)};requestAnimationFrame(r)}function ID(t){"@babel/helpers - typeof";return ID=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ID(t)}function ove(t){return dve(t)||cve(t)||uve(t)||lve()}function lve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uve(t,e){if(t){if(typeof t=="string")return Z7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Z7(t,e)}}function Z7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function cve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dve(t){if(Array.isArray(t))return t}function hve(){var t={},e=function(){return null},a=!1,r=function s(l){if(!a){if(Array.isArray(l)){if(!l.length)return;var h=l,n=ove(h),w=n[0],T=n.slice(1);if(typeof w=="number"){j7(s.bind(null,T),w);return}s(w),j7(s.bind(null,T));return}ID(l)==="object"&&(t=l,e(t)),typeof l=="function"&&l()}};return{stop:function(){a=!0},start:function(l){a=!1,r(l)},subscribe:function(l){return e=l,function(){e=function(){return null}}}}}function VR(t){"@babel/helpers - typeof";return VR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VR(t)}function q7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function H7(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?q7(Object(a),!0).forEach(function(r){IY(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):q7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function IY(t,e,a){return e=fve(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function fve(t){var e=pve(t,"string");return VR(e)==="symbol"?e:String(e)}function pve(t,e){if(VR(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(VR(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mve=function(e,a){return[Object.keys(e),Object.keys(a)].reduce(function(r,s){return r.filter(function(l){return s.includes(l)})})},yve=function(e){return e},gve=function(e){return e.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},Lw=function(e,a){return Object.keys(a).reduce(function(r,s){return H7(H7({},r),{},IY({},s,e(s,a[s])))},{})},$7=function(e,a,r){return e.map(function(s){return"".concat(gve(s)," ").concat(a,"ms ").concat(r)}).join(",")};function Ave(t,e){return wve(t)||vve(t,e)||LY(t,e)||_ve()}function _ve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vve(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function wve(t){if(Array.isArray(t))return t}function Rve(t){return Cve(t)||Sve(t)||LY(t)||Tve()}function Tve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LY(t,e){if(t){if(typeof t=="string")return LD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return LD(t,e)}}function Sve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Cve(t){if(Array.isArray(t))return LD(t)}function LD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var jb=1e-4,FY=function(e,a){return[0,3*e,3*a-6*e,3*e-3*a+1]},UY=function(e,a){return e.map(function(r,s){return r*Math.pow(a,s)}).reduce(function(r,s){return r+s})},K7=function(e,a){return function(r){var s=FY(e,a);return UY(s,r)}},bve=function(e,a){return function(r){var s=FY(e,a),l=[].concat(Rve(s.map(function(h,n){return h*n}).slice(1)),[0]);return UY(l,r)}},W7=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var s=a[0],l=a[1],h=a[2],n=a[3];if(a.length===1)switch(a[0]){case"linear":s=0,l=0,h=1,n=1;break;case"ease":s=.25,l=.1,h=.25,n=1;break;case"ease-in":s=.42,l=0,h=1,n=1;break;case"ease-out":s=.42,l=0,h=.58,n=1;break;case"ease-in-out":s=0,l=0,h=.58,n=1;break;default:{var w=a[0].split("(");if(w[0]==="cubic-bezier"&&w[1].split(")")[0].split(",").length===4){var T=w[1].split(")")[0].split(",").map(function($){return parseFloat($)}),E=Ave(T,4);s=E[0],l=E[1],h=E[2],n=E[3]}}}var z=K7(s,h),k=K7(l,n),U=bve(s,h),q=function(Q){return Q>1?1:Q<0?0:Q},H=function(Q){for(var ne=Q>1?1:Q,de=ne,ge=0;ge<8;++ge){var fe=z(de)-ne,_e=U(de);if(Math.abs(fe-ne)<jb||_e<jb)return k(de);de=q(de-fe/_e)}return k(de)};return H.isStepper=!1,H},xve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=e.stiff,r=a===void 0?100:a,s=e.damping,l=s===void 0?8:s,h=e.dt,n=h===void 0?17:h,w=function(E,z,k){var U=-(E-z)*r,q=k*l,H=k+(U-q)*n/1e3,$=k*n/1e3+E;return Math.abs($-z)<jb&&Math.abs(H)<jb?[z,0]:[$,H]};return w.isStepper=!0,w.dt=n,w},Pve=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var s=a[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return W7(s);case"spring":return xve();default:if(s.split("(")[0]==="cubic-bezier")return W7(s)}return typeof s=="function"?s:null};function zR(t){"@babel/helpers - typeof";return zR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zR(t)}function Y7(t){return Vve(t)||Nve(t)||kY(t)||Eve()}function Eve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Vve(t){if(Array.isArray(t))return UD(t)}function X7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Cc(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?X7(Object(a),!0).forEach(function(r){FD(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function FD(t,e,a){return e=zve(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function zve(t){var e=Ove(t,"string");return zR(e)==="symbol"?e:String(e)}function Ove(t,e){if(zR(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(zR(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dve(t,e){return Lve(t)||Ive(t,e)||kY(t,e)||Mve()}function Mve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kY(t,e){if(t){if(typeof t=="string")return UD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return UD(t,e)}}function UD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function Ive(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function Lve(t){if(Array.isArray(t))return t}var Zb=function(e,a,r){return e+(a-e)*r},kD=function(e){var a=e.from,r=e.to;return a!==r},Fve=function t(e,a,r){var s=Lw(function(l,h){if(kD(h)){var n=e(h.from,h.to,h.velocity),w=Dve(n,2),T=w[0],E=w[1];return Cc(Cc({},h),{},{from:T,velocity:E})}return h},a);return r<1?Lw(function(l,h){return kD(h)?Cc(Cc({},h),{},{velocity:Zb(h.velocity,s[l].velocity,r),from:Zb(h.from,s[l].from,r)}):h},a):t(e,s,r-1)};const Uve=function(t,e,a,r,s){var l=mve(t,e),h=l.reduce(function($,Q){return Cc(Cc({},$),{},FD({},Q,[t[Q],e[Q]]))},{}),n=l.reduce(function($,Q){return Cc(Cc({},$),{},FD({},Q,{from:t[Q],velocity:0,to:e[Q]}))},{}),w=-1,T,E,z=function(){return null},k=function(){return Lw(function(Q,ne){return ne.from},n)},U=function(){return!Object.values(n).filter(kD).length},q=function(Q){T||(T=Q);var ne=Q-T,de=ne/a.dt;n=Fve(a,n,de),s(Cc(Cc(Cc({},t),e),k())),T=Q,U()||(w=requestAnimationFrame(z))},H=function(Q){E||(E=Q);var ne=(Q-E)/r,de=Lw(function(fe,_e){return Zb.apply(void 0,Y7(_e).concat([a(ne)]))},h);if(s(Cc(Cc(Cc({},t),e),de)),ne<1)w=requestAnimationFrame(z);else{var ge=Lw(function(fe,_e){return Zb.apply(void 0,Y7(_e).concat([a(1)]))},h);s(Cc(Cc(Cc({},t),e),ge))}};return z=a.isStepper?q:H,function(){return requestAnimationFrame(z),function(){cancelAnimationFrame(w)}}};function cv(t){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(t)}var kve=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Bve(t,e){if(t==null)return{};var a=Gve(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Gve(t,e){if(t==null)return{};var a={},r=Object.keys(t),s,l;for(l=0;l<r.length;l++)s=r[l],!(e.indexOf(s)>=0)&&(a[s]=t[s]);return a}function rO(t){return Hve(t)||qve(t)||Zve(t)||jve()}function jve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zve(t,e){if(t){if(typeof t=="string")return BD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return BD(t,e)}}function qve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hve(t){if(Array.isArray(t))return BD(t)}function BD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function J7(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function gp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?J7(Object(a),!0).forEach(function(r){Pw(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):J7(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Pw(t,e,a){return e=BY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function $ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kve(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,BY(r.key),r)}}function Wve(t,e,a){return e&&Kve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BY(t){var e=Yve(t,"string");return cv(e)==="symbol"?e:String(e)}function Yve(t,e){if(cv(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(cv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GD(t,e)}function GD(t,e){return GD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GD(t,e)}function Jve(t){var e=Qve();return function(){var r=qb(t),s;if(e){var l=qb(this).constructor;s=Reflect.construct(r,arguments,l)}else s=r.apply(this,arguments);return jD(this,s)}}function jD(t,e){if(e&&(cv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZD(t)}function ZD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qb(t){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},qb(t)}var Vp=function(t){Xve(a,t);var e=Jve(a);function a(r,s){var l;$ve(this,a),l=e.call(this,r,s);var h=l.props,n=h.isActive,w=h.attributeName,T=h.from,E=h.to,z=h.steps,k=h.children,U=h.duration;if(l.handleStyleChange=l.handleStyleChange.bind(ZD(l)),l.changeStyle=l.changeStyle.bind(ZD(l)),!n||U<=0)return l.state={style:{}},typeof k=="function"&&(l.state={style:E}),jD(l);if(z&&z.length)l.state={style:z[0].style};else if(T){if(typeof k=="function")return l.state={style:T},jD(l);l.state={style:w?Pw({},w,T):T}}else l.state={style:{}};return l}return Wve(a,[{key:"componentDidMount",value:function(){var s=this.props,l=s.isActive,h=s.canBegin;this.mounted=!0,!(!l||!h)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var l=this.props,h=l.isActive,n=l.canBegin,w=l.attributeName,T=l.shouldReAnimate,E=l.to,z=l.from,k=this.state.style;if(n){if(!h){var U={style:w?Pw({},w,E):E};this.state&&k&&(w&&k[w]!==E||!w&&k!==E)&&this.setState(U);return}if(!(ive(s.to,E)&&s.canBegin&&s.isActive)){var q=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var H=q||T?z:s.to;if(this.state&&k){var $={style:w?Pw({},w,H):H};(w&&k[w]!==H||!w&&k!==H)&&this.setState($)}this.runAnimation(gp(gp({},this.props),{},{from:H,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var l=this,h=s.from,n=s.to,w=s.duration,T=s.easing,E=s.begin,z=s.onAnimationEnd,k=s.onAnimationStart,U=Uve(h,n,Pve(T),w,this.changeStyle),q=function(){l.stopJSAnimation=U()};this.manager.start([k,E,q,w,z])}},{key:"runStepAnimation",value:function(s){var l=this,h=s.steps,n=s.begin,w=s.onAnimationStart,T=h[0],E=T.style,z=T.duration,k=z===void 0?0:z,U=function(H,$,Q){if(Q===0)return H;var ne=$.duration,de=$.easing,ge=de===void 0?"ease":de,fe=$.style,_e=$.properties,me=$.onAnimationEnd,Ae=Q>0?h[Q-1]:$,Te=_e||Object.keys(fe);if(typeof ge=="function"||ge==="spring")return[].concat(rO(H),[l.runJSAnimation.bind(l,{from:Ae.style,to:fe,duration:ne,easing:ge}),ne]);var Oe=$7(Te,ne,ge),ie=gp(gp(gp({},Ae.style),fe),{},{transition:Oe});return[].concat(rO(H),[ie,ne,me]).filter(yve)};return this.manager.start([w].concat(rO(h.reduce(U,[E,Math.max(k,n)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=hve());var l=s.begin,h=s.duration,n=s.attributeName,w=s.to,T=s.easing,E=s.onAnimationStart,z=s.onAnimationEnd,k=s.steps,U=s.children,q=this.manager;if(this.unSubscribe=q.subscribe(this.handleStyleChange),typeof T=="function"||typeof U=="function"||T==="spring"){this.runJSAnimation(s);return}if(k.length>1){this.runStepAnimation(s);return}var H=n?Pw({},n,w):w,$=$7(Object.keys(H),h,T);q.start([E,l,gp(gp({},H),{},{transition:$}),h,z])}},{key:"render",value:function(){var s=this.props,l=s.children;s.begin;var h=s.duration;s.attributeName,s.easing;var n=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var w=Bve(s,kve),T=rt.Children.count(l),E=this.state.style;if(typeof l=="function")return l(E);if(!n||T===0||h<=0)return l;var z=function(U){var q=U.props,H=q.style,$=H===void 0?{}:H,Q=q.className,ne=rt.cloneElement(U,gp(gp({},w),{},{style:gp(gp({},$),E),className:Q}));return ne};return T===1?z(rt.Children.only(l)):It.createElement("div",null,rt.Children.map(l,function(k){return z(k)}))}}]),a}(rt.PureComponent);Vp.displayName="Animate";Vp.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Vp.propTypes={from:zs.oneOfType([zs.object,zs.string]),to:zs.oneOfType([zs.object,zs.string]),attributeName:zs.string,duration:zs.number,begin:zs.number,easing:zs.oneOfType([zs.string,zs.func]),steps:zs.arrayOf(zs.shape({duration:zs.number.isRequired,style:zs.object.isRequired,easing:zs.oneOfType([zs.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),zs.func]),properties:zs.arrayOf("string"),onAnimationEnd:zs.func})),children:zs.oneOfType([zs.node,zs.func]),isActive:zs.bool,canBegin:zs.bool,onAnimationEnd:zs.func,shouldReAnimate:zs.bool,onAnimationStart:zs.func,onAnimationReStart:zs.func};function OR(t){"@babel/helpers - typeof";return OR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OR(t)}function Hb(){return Hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Hb.apply(this,arguments)}function e1e(t,e){return n1e(t)||r1e(t,e)||a1e(t,e)||t1e()}function t1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a1e(t,e){if(t){if(typeof t=="string")return Q7(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Q7(t,e)}}function Q7(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function r1e(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function n1e(t){if(Array.isArray(t))return t}function ej(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function tj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ej(Object(a),!0).forEach(function(r){i1e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ej(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function i1e(t,e,a){return e=s1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function s1e(t){var e=o1e(t,"string");return OR(e)=="symbol"?e:e+""}function o1e(t,e){if(OR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(OR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aj=function(e,a,r,s,l){var h=Math.min(Math.abs(r)/2,Math.abs(s)/2),n=s>=0?1:-1,w=r>=0?1:-1,T=s>=0&&r>=0||s<0&&r<0?1:0,E;if(h>0&&l instanceof Array){for(var z=[0,0,0,0],k=0,U=4;k<U;k++)z[k]=l[k]>h?h:l[k];E="M".concat(e,",").concat(a+n*z[0]),z[0]>0&&(E+="A ".concat(z[0],",").concat(z[0],",0,0,").concat(T,",").concat(e+w*z[0],",").concat(a)),E+="L ".concat(e+r-w*z[1],",").concat(a),z[1]>0&&(E+="A ".concat(z[1],",").concat(z[1],",0,0,").concat(T,`,
        `).concat(e+r,",").concat(a+n*z[1])),E+="L ".concat(e+r,",").concat(a+s-n*z[2]),z[2]>0&&(E+="A ".concat(z[2],",").concat(z[2],",0,0,").concat(T,`,
        `).concat(e+r-w*z[2],",").concat(a+s)),E+="L ".concat(e+w*z[3],",").concat(a+s),z[3]>0&&(E+="A ".concat(z[3],",").concat(z[3],",0,0,").concat(T,`,
        `).concat(e,",").concat(a+s-n*z[3])),E+="Z"}else if(h>0&&l===+l&&l>0){var q=Math.min(h,l);E="M ".concat(e,",").concat(a+n*q,`
            A `).concat(q,",").concat(q,",0,0,").concat(T,",").concat(e+w*q,",").concat(a,`
            L `).concat(e+r-w*q,",").concat(a,`
            A `).concat(q,",").concat(q,",0,0,").concat(T,",").concat(e+r,",").concat(a+n*q,`
            L `).concat(e+r,",").concat(a+s-n*q,`
            A `).concat(q,",").concat(q,",0,0,").concat(T,",").concat(e+r-w*q,",").concat(a+s,`
            L `).concat(e+w*q,",").concat(a+s,`
            A `).concat(q,",").concat(q,",0,0,").concat(T,",").concat(e,",").concat(a+s-n*q," Z")}else E="M ".concat(e,",").concat(a," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return E},l1e=function(e,a){if(!e||!a)return!1;var r=e.x,s=e.y,l=a.x,h=a.y,n=a.width,w=a.height;if(Math.abs(n)>0&&Math.abs(w)>0){var T=Math.min(l,l+n),E=Math.max(l,l+n),z=Math.min(h,h+w),k=Math.max(h,h+w);return r>=T&&r<=E&&s>=z&&s<=k}return!1},u1e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},t4=function(e){var a=tj(tj({},u1e),e),r=rt.useRef(),s=rt.useState(-1),l=e1e(s,2),h=l[0],n=l[1];rt.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var ge=r.current.getTotalLength();ge&&n(ge)}catch{}},[]);var w=a.x,T=a.y,E=a.width,z=a.height,k=a.radius,U=a.className,q=a.animationEasing,H=a.animationDuration,$=a.animationBegin,Q=a.isAnimationActive,ne=a.isUpdateAnimationActive;if(w!==+w||T!==+T||E!==+E||z!==+z||E===0||z===0)return null;var de=hi("recharts-rectangle",U);return ne?It.createElement(Vp,{canBegin:h>0,from:{width:E,height:z,x:w,y:T},to:{width:E,height:z,x:w,y:T},duration:H,animationEasing:q,isActive:ne},function(ge){var fe=ge.width,_e=ge.height,me=ge.x,Ae=ge.y;return It.createElement(Vp,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:H,isActive:Q,easing:q},It.createElement("path",Hb({},fn(a,!0),{className:de,d:aj(me,Ae,fe,_e,k),ref:r})))}):It.createElement("path",Hb({},fn(a,!0),{className:de,d:aj(w,T,E,z,k)}))},c1e=["points","className","baseLinePoints","connectNulls"];function C_(){return C_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},C_.apply(this,arguments)}function d1e(t,e){if(t==null)return{};var a=h1e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function h1e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function rj(t){return y1e(t)||m1e(t)||p1e(t)||f1e()}function f1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p1e(t,e){if(t){if(typeof t=="string")return qD(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qD(t,e)}}function m1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function y1e(t){if(Array.isArray(t))return qD(t)}function qD(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var nj=function(e){return e&&e.x===+e.x&&e.y===+e.y},g1e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(r){nj(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),nj(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},Fw=function(e,a){var r=g1e(e);a&&(r=[r.reduce(function(l,h){return[].concat(rj(l),rj(h))},[])]);var s=r.map(function(l){return l.reduce(function(h,n,w){return"".concat(h).concat(w===0?"M":"L").concat(n.x,",").concat(n.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},A1e=function(e,a,r){var s=Fw(e,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Fw(a.reverse(),r).slice(1))},_1e=function(e){var a=e.points,r=e.className,s=e.baseLinePoints,l=e.connectNulls,h=d1e(e,c1e);if(!a||!a.length)return null;var n=hi("recharts-polygon",r);if(s&&s.length){var w=h.stroke&&h.stroke!=="none",T=A1e(a,s,l);return It.createElement("g",{className:n},It.createElement("path",C_({},fn(h,!0),{fill:T.slice(-1)==="Z"?h.fill:"none",stroke:"none",d:T})),w?It.createElement("path",C_({},fn(h,!0),{fill:"none",d:Fw(a,l)})):null,w?It.createElement("path",C_({},fn(h,!0),{fill:"none",d:Fw(s,l)})):null)}var E=Fw(a,l);return It.createElement("path",C_({},fn(h,!0),{fill:E.slice(-1)==="Z"?h.fill:"none",className:n,d:E}))};function HD(){return HD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},HD.apply(this,arguments)}var bT=function(e){var a=e.cx,r=e.cy,s=e.r,l=e.className,h=hi("recharts-dot",l);return a===+a&&r===+r&&s===+s?It.createElement("circle",HD({},fn(e,!1),mb(e),{className:h,cx:a,cy:r,r:s})):null};function DR(t){"@babel/helpers - typeof";return DR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DR(t)}var v1e=["x","y","top","left","width","height","className"];function $D(){return $D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$D.apply(this,arguments)}function ij(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function w1e(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?ij(Object(a),!0).forEach(function(r){R1e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ij(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function R1e(t,e,a){return e=T1e(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function T1e(t){var e=S1e(t,"string");return DR(e)=="symbol"?e:e+""}function S1e(t,e){if(DR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(DR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C1e(t,e){if(t==null)return{};var a=b1e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function b1e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var x1e=function(e,a,r,s,l,h){return"M".concat(e,",").concat(l,"v").concat(s,"M").concat(h,",").concat(a,"h").concat(r)},P1e=function(e){var a=e.x,r=a===void 0?0:a,s=e.y,l=s===void 0?0:s,h=e.top,n=h===void 0?0:h,w=e.left,T=w===void 0?0:w,E=e.width,z=E===void 0?0:E,k=e.height,U=k===void 0?0:k,q=e.className,H=C1e(e,v1e),$=w1e({x:r,y:l,top:n,left:T,width:z,height:U},H);return!mr(r)||!mr(l)||!mr(z)||!mr(U)||!mr(n)||!mr(T)?null:It.createElement("path",$D({},fn($,!0),{className:hi("recharts-cross",q),d:x1e(r,l,z,U,n,T)}))},nO,sj;function E1e(){if(sj)return nO;sj=1;var t=T2(),e=aY(),a=Vm();function r(s,l){return s&&s.length?t(s,a(l,2),e):void 0}return nO=r,nO}var N1e=E1e();const V1e=Xi(N1e);var iO,oj;function z1e(){if(oj)return iO;oj=1;var t=T2(),e=Vm(),a=rY();function r(s,l){return s&&s.length?t(s,e(l,2),a):void 0}return iO=r,iO}var O1e=z1e();const D1e=Xi(O1e);var M1e=["cx","cy","angle","ticks","axisLine"],I1e=["ticks","tick","angle","tickFormatter","stroke"];function dv(t){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dv(t)}function Uw(){return Uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Uw.apply(this,arguments)}function lj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function PA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?lj(Object(a),!0).forEach(function(r){x2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function uj(t,e){if(t==null)return{};var a=L1e(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function L1e(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function F1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jY(r.key),r)}}function U1e(t,e,a){return e&&cj(t.prototype,e),a&&cj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function k1e(t,e,a){return e=$b(e),B1e(t,GY()?Reflect.construct(e,a||[],$b(t).constructor):e.apply(t,a))}function B1e(t,e){if(e&&(dv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G1e(t)}function G1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GY=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},$b(t)}function j1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KD(t,e)}function KD(t,e){return KD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},KD(t,e)}function x2(t,e,a){return e=jY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function jY(t){var e=Z1e(t,"string");return dv(e)=="symbol"?e:e+""}function Z1e(t,e){if(dv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(dv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var P2=function(t){function e(){return F1e(this,e),k1e(this,e,arguments)}return j1e(e,t),U1e(e,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,l=this.props,h=l.angle,n=l.cx,w=l.cy;return wo(n,w,s,h)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.angle,n=r.ticks,w=V1e(n,function(E){return E.coordinate||0}),T=D1e(n,function(E){return E.coordinate||0});return{cx:s,cy:l,startAngle:h,endAngle:h,innerRadius:T.coordinate||0,outerRadius:w.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.angle,n=r.ticks,w=r.axisLine,T=uj(r,M1e),E=n.reduce(function(q,H){return[Math.min(q[0],H.coordinate),Math.max(q[1],H.coordinate)]},[1/0,-1/0]),z=wo(s,l,E[0],h),k=wo(s,l,E[1],h),U=PA(PA(PA({},fn(T,!1)),{},{fill:"none"},fn(w,!1)),{},{x1:z.x,y1:z.y,x2:k.x,y2:k.y});return It.createElement("line",Uw({className:"recharts-polar-radius-axis-line"},U))}},{key:"renderTicks",value:function(){var r=this,s=this.props,l=s.ticks,h=s.tick,n=s.angle,w=s.tickFormatter,T=s.stroke,E=uj(s,I1e),z=this.getTickTextAnchor(),k=fn(E,!1),U=fn(h,!1),q=l.map(function(H,$){var Q=r.getTickValueCoord(H),ne=PA(PA(PA(PA({textAnchor:z,transform:"rotate(".concat(90-n,", ").concat(Q.x,", ").concat(Q.y,")")},k),{},{stroke:"none",fill:T},U),{},{index:$},Q),{},{payload:H});return It.createElement(Ii,Uw({className:hi("recharts-polar-radius-axis-tick",VY(h)),key:"tick-".concat(H.coordinate)},i0(r.props,H,$)),e.renderTickItem(h,ne,w?w(H.value,$):H.value))});return It.createElement(Ii,{className:"recharts-polar-radius-axis-ticks"},q)}},{key:"render",value:function(){var r=this.props,s=r.ticks,l=r.axisLine,h=r.tick;return!s||!s.length?null:It.createElement(Ii,{className:hi("recharts-polar-radius-axis",this.props.className)},l&&this.renderAxisLine(),h&&this.renderTicks(),ec.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,l){var h;return It.isValidElement(r)?h=It.cloneElement(r,s):Gn(r)?h=r(s):h=It.createElement(s0,Uw({},s,{className:"recharts-polar-radius-axis-tick-value"}),l),h}}])}(rt.PureComponent);x2(P2,"displayName","PolarRadiusAxis");x2(P2,"axisType","radiusAxis");x2(P2,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function hv(t){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(t)}function MA(){return MA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},MA.apply(this,arguments)}function dj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function EA(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?dj(Object(a),!0).forEach(function(r){E2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function q1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qY(r.key),r)}}function H1e(t,e,a){return e&&hj(t.prototype,e),a&&hj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function $1e(t,e,a){return e=Kb(e),K1e(t,ZY()?Reflect.construct(e,a||[],Kb(t).constructor):e.apply(t,a))}function K1e(t,e){if(e&&(hv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W1e(t)}function W1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZY=function(){return!!t})()}function Kb(t){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Kb(t)}function Y1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WD(t,e)}function WD(t,e){return WD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},WD(t,e)}function E2(t,e,a){return e=qY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function qY(t){var e=X1e(t,"string");return hv(e)=="symbol"?e:e+""}function X1e(t,e){if(hv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(hv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var J1e=Math.PI/180,Q1e=1e-5,N2=function(t){function e(){return q1e(this,e),$1e(this,e,arguments)}return Y1e(e,t),H1e(e,[{key:"getTickLineCoord",value:function(r){var s=this.props,l=s.cx,h=s.cy,n=s.radius,w=s.orientation,T=s.tickSize,E=T||8,z=wo(l,h,n,r.coordinate),k=wo(l,h,n+(w==="inner"?-1:1)*E,r.coordinate);return{x1:z.x,y1:z.y,x2:k.x,y2:k.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,l=Math.cos(-r.coordinate*J1e),h;return l>Q1e?h=s==="outer"?"start":"end":l<-1e-5?h=s==="outer"?"end":"start":h="middle",h}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,l=r.cy,h=r.radius,n=r.axisLine,w=r.axisLineType,T=EA(EA({},fn(this.props,!1)),{},{fill:"none"},fn(n,!1));if(w==="circle")return It.createElement(bT,MA({className:"recharts-polar-angle-axis-line"},T,{cx:s,cy:l,r:h}));var E=this.props.ticks,z=E.map(function(k){return wo(s,l,h,k.coordinate)});return It.createElement(_1e,MA({className:"recharts-polar-angle-axis-line"},T,{points:z}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,l=s.ticks,h=s.tick,n=s.tickLine,w=s.tickFormatter,T=s.stroke,E=fn(this.props,!1),z=fn(h,!1),k=EA(EA({},E),{},{fill:"none"},fn(n,!1)),U=l.map(function(q,H){var $=r.getTickLineCoord(q),Q=r.getTickTextAnchor(q),ne=EA(EA(EA({textAnchor:Q},E),{},{stroke:"none",fill:T},z),{},{index:H,payload:q,x:$.x2,y:$.y2});return It.createElement(Ii,MA({className:hi("recharts-polar-angle-axis-tick",VY(h)),key:"tick-".concat(q.coordinate)},i0(r.props,q,H)),n&&It.createElement("line",MA({className:"recharts-polar-angle-axis-tick-line"},k,$)),h&&e.renderTickItem(h,ne,w?w(q.value,H):q.value))});return It.createElement(Ii,{className:"recharts-polar-angle-axis-ticks"},U)}},{key:"render",value:function(){var r=this.props,s=r.ticks,l=r.radius,h=r.axisLine;return l<=0||!s||!s.length?null:It.createElement(Ii,{className:hi("recharts-polar-angle-axis",this.props.className)},h&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,l){var h;return It.isValidElement(r)?h=It.cloneElement(r,s):Gn(r)?h=r(s):h=It.createElement(s0,MA({},s,{className:"recharts-polar-angle-axis-tick-value"}),l),h}}])}(rt.PureComponent);E2(N2,"displayName","PolarAngleAxis");E2(N2,"axisType","angleAxis");E2(N2,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var sO,fj;function ewe(){if(fj)return sO;fj=1;var t=tW(),e=t(Object.getPrototypeOf,Object);return sO=e,sO}var oO,pj;function twe(){if(pj)return oO;pj=1;var t=Cy(),e=ewe(),a=by(),r="[object Object]",s=Function.prototype,l=Object.prototype,h=s.toString,n=l.hasOwnProperty,w=h.call(Object);function T(E){if(!a(E)||t(E)!=r)return!1;var z=e(E);if(z===null)return!0;var k=n.call(z,"constructor")&&z.constructor;return typeof k=="function"&&k instanceof k&&h.call(k)==w}return oO=T,oO}var awe=twe();const rwe=Xi(awe);var lO,mj;function nwe(){if(mj)return lO;mj=1;var t=Cy(),e=by(),a="[object Boolean]";function r(s){return s===!0||s===!1||e(s)&&t(s)==a}return lO=r,lO}var iwe=nwe();const swe=Xi(iwe);function MR(t){"@babel/helpers - typeof";return MR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},MR(t)}function Wb(){return Wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Wb.apply(this,arguments)}function owe(t,e){return dwe(t)||cwe(t,e)||uwe(t,e)||lwe()}function lwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uwe(t,e){if(t){if(typeof t=="string")return yj(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return yj(t,e)}}function yj(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function cwe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function dwe(t){if(Array.isArray(t))return t}function gj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Aj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?gj(Object(a),!0).forEach(function(r){hwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):gj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function hwe(t,e,a){return e=fwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function fwe(t){var e=pwe(t,"string");return MR(e)=="symbol"?e:e+""}function pwe(t,e){if(MR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(MR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _j=function(e,a,r,s,l){var h=r-s,n;return n="M ".concat(e,",").concat(a),n+="L ".concat(e+r,",").concat(a),n+="L ".concat(e+r-h/2,",").concat(a+l),n+="L ".concat(e+r-h/2-s,",").concat(a+l),n+="L ".concat(e,",").concat(a," Z"),n},mwe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ywe=function(e){var a=Aj(Aj({},mwe),e),r=rt.useRef(),s=rt.useState(-1),l=owe(s,2),h=l[0],n=l[1];rt.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var de=r.current.getTotalLength();de&&n(de)}catch{}},[]);var w=a.x,T=a.y,E=a.upperWidth,z=a.lowerWidth,k=a.height,U=a.className,q=a.animationEasing,H=a.animationDuration,$=a.animationBegin,Q=a.isUpdateAnimationActive;if(w!==+w||T!==+T||E!==+E||z!==+z||k!==+k||E===0&&z===0||k===0)return null;var ne=hi("recharts-trapezoid",U);return Q?It.createElement(Vp,{canBegin:h>0,from:{upperWidth:0,lowerWidth:0,height:k,x:w,y:T},to:{upperWidth:E,lowerWidth:z,height:k,x:w,y:T},duration:H,animationEasing:q,isActive:Q},function(de){var ge=de.upperWidth,fe=de.lowerWidth,_e=de.height,me=de.x,Ae=de.y;return It.createElement(Vp,{canBegin:h>0,from:"0px ".concat(h===-1?1:h,"px"),to:"".concat(h,"px 0px"),attributeName:"strokeDasharray",begin:$,duration:H,easing:q},It.createElement("path",Wb({},fn(a,!0),{className:ne,d:_j(me,Ae,ge,fe,_e),ref:r})))}):It.createElement("g",null,It.createElement("path",Wb({},fn(a,!0),{className:ne,d:_j(w,T,E,z,k)})))},gwe=["option","shapeType","propTransformer","activeClassName","isActive"];function IR(t){"@babel/helpers - typeof";return IR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},IR(t)}function Awe(t,e){if(t==null)return{};var a=_we(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _we(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function vj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Yb(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?vj(Object(a),!0).forEach(function(r){vwe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function vwe(t,e,a){return e=wwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function wwe(t){var e=Rwe(t,"string");return IR(e)=="symbol"?e:e+""}function Rwe(t,e){if(IR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(IR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Twe(t,e){return Yb(Yb({},e),t)}function Swe(t,e){return t==="symbols"}function wj(t){var e=t.shapeType,a=t.elementProps;switch(e){case"rectangle":return It.createElement(t4,a);case"trapezoid":return It.createElement(ywe,a);case"sector":return It.createElement(DY,a);case"symbols":if(Swe(e))return It.createElement(v3,a);break;default:return null}}function Cwe(t){return rt.isValidElement(t)?t.props:t}function HY(t){var e=t.option,a=t.shapeType,r=t.propTransformer,s=r===void 0?Twe:r,l=t.activeClassName,h=l===void 0?"recharts-active-shape":l,n=t.isActive,w=Awe(t,gwe),T;if(rt.isValidElement(e))T=rt.cloneElement(e,Yb(Yb({},w),Cwe(e)));else if(Gn(e))T=e(w);else if(rwe(e)&&!swe(e)){var E=s(e,w);T=It.createElement(wj,{shapeType:a,elementProps:E})}else{var z=w;T=It.createElement(wj,{shapeType:a,elementProps:z})}return n?It.createElement(Ii,{className:h},T):T}function V2(t,e){return e!=null&&"trapezoids"in t.props}function z2(t,e){return e!=null&&"sectors"in t.props}function LR(t,e){return e!=null&&"points"in t.props}function bwe(t,e){var a,r,s=t.x===(e==null||(a=e.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===e.x,l=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&l}function xwe(t,e){var a=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return a&&r}function Pwe(t,e){var a=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return a&&r&&s}function Ewe(t,e){var a;return V2(t,e)?a=bwe:z2(t,e)?a=xwe:LR(t,e)&&(a=Pwe),a}function Nwe(t,e){var a;return V2(t,e)?a="trapezoids":z2(t,e)?a="sectors":LR(t,e)&&(a="points"),a}function Vwe(t,e){if(V2(t,e)){var a;return(a=e.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(z2(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return LR(t,e)?e.payload:{}}function zwe(t){var e=t.activeTooltipItem,a=t.graphicalItem,r=t.itemData,s=Nwe(a,e),l=Vwe(a,e),h=r.filter(function(w,T){var E=o0(l,w),z=a.props[s].filter(function(q){var H=Ewe(a,e);return H(q,e)}),k=a.props[s].indexOf(z[z.length-1]),U=T===k;return E&&U}),n=r.indexOf(h[h.length-1]);return n}var NC;function fv(t){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fv(t)}function b_(){return b_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},b_.apply(this,arguments)}function Rj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function _o(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Rj(Object(a),!0).forEach(function(r){Ff(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Rj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Owe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KY(r.key),r)}}function Dwe(t,e,a){return e&&Tj(t.prototype,e),a&&Tj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mwe(t,e,a){return e=Xb(e),Iwe(t,$Y()?Reflect.construct(e,a||[],Xb(t).constructor):e.apply(t,a))}function Iwe(t,e){if(e&&(fv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lwe(t)}function Lwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($Y=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Xb(t)}function Fwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YD(t,e)}function YD(t,e){return YD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},YD(t,e)}function Ff(t,e,a){return e=KY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function KY(t){var e=Uwe(t,"string");return fv(e)=="symbol"?e:e+""}function Uwe(t,e){if(fv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Py=function(t){function e(a){var r;return Owe(this,e),r=Mwe(this,e,[a]),Ff(r,"pieRef",null),Ff(r,"sectorRefs",[]),Ff(r,"id",g0("recharts-pie-")),Ff(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Gn(s)&&s()}),Ff(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Gn(s)&&s()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return Fwe(e,t),Dwe(e,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.label,n=l.labelLine,w=l.dataKey,T=l.valueKey,E=fn(this.props,!1),z=fn(h,!1),k=fn(n,!1),U=h&&h.offsetRadius||20,q=r.map(function(H,$){var Q=(H.startAngle+H.endAngle)/2,ne=wo(H.cx,H.cy,H.outerRadius+U,Q),de=_o(_o(_o(_o({},E),H),{},{stroke:"none"},z),{},{index:$,textAnchor:e.getTextAnchor(ne.x,H.cx)},ne),ge=_o(_o(_o(_o({},E),H),{},{fill:"none",stroke:H.fill},k),{},{index:$,points:[wo(H.cx,H.cy,H.outerRadius,Q),ne]}),fe=w;return si(w)&&si(T)?fe="value":si(w)&&(fe=T),It.createElement(Ii,{key:"label-".concat(H.startAngle,"-").concat(H.endAngle,"-").concat(H.midAngle,"-").concat($)},n&&e.renderLabelLineItem(n,ge,"line"),e.renderLabelItem(h,de,Ul(H,fe)))});return It.createElement(Ii,{className:"recharts-pie-labels"},q)}},{key:"renderSectorsStatically",value:function(r){var s=this,l=this.props,h=l.activeShape,n=l.blendStroke,w=l.inactiveShape;return r.map(function(T,E){if((T==null?void 0:T.startAngle)===0&&(T==null?void 0:T.endAngle)===0&&r.length!==1)return null;var z=s.isActiveIndex(E),k=w&&s.hasActiveIndex()?w:null,U=z?h:k,q=_o(_o({},T),{},{stroke:n?T.fill:T.stroke,tabIndex:-1});return It.createElement(Ii,b_({ref:function($){$&&!s.sectorRefs.includes($)&&s.sectorRefs.push($)},tabIndex:-1,className:"recharts-pie-sector"},i0(s.props,T,E),{key:"sector-".concat(T==null?void 0:T.startAngle,"-").concat(T==null?void 0:T.endAngle,"-").concat(T.midAngle,"-").concat(E)}),It.createElement(HY,b_({option:U,isActive:z,shapeType:"sector"},q)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,l=s.sectors,h=s.isAnimationActive,n=s.animationBegin,w=s.animationDuration,T=s.animationEasing,E=s.animationId,z=this.state,k=z.prevSectors,U=z.prevIsAnimationActive;return It.createElement(Vp,{begin:n,duration:w,isActive:h,easing:T,from:{t:0},to:{t:1},key:"pie-".concat(E,"-").concat(U),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(q){var H=q.t,$=[],Q=l&&l[0],ne=Q.startAngle;return l.forEach(function(de,ge){var fe=k&&k[ge],_e=ge>0?sf(de,"paddingAngle",0):0;if(fe){var me=Du(fe.endAngle-fe.startAngle,de.endAngle-de.startAngle),Ae=_o(_o({},de),{},{startAngle:ne+_e,endAngle:ne+me(H)+_e});$.push(Ae),ne=Ae.endAngle}else{var Te=de.endAngle,Oe=de.startAngle,ie=Du(0,Te-Oe),we=ie(H),Me=_o(_o({},de),{},{startAngle:ne+_e,endAngle:ne+we+_e});$.push(Me),ne=Me.endAngle}}),It.createElement(Ii,null,r.renderSectorsStatically($))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(l){if(!l.altKey)switch(l.key){case"ArrowLeft":{var h=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[h].focus(),s.setState({sectorToFocus:h});break}case"ArrowRight":{var n=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[n].focus(),s.setState({sectorToFocus:n});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,l=r.isAnimationActive,h=this.state.prevSectors;return l&&s&&s.length&&(!h||!o0(h,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,l=s.hide,h=s.sectors,n=s.className,w=s.label,T=s.cx,E=s.cy,z=s.innerRadius,k=s.outerRadius,U=s.isAnimationActive,q=this.state.isAnimationFinished;if(l||!h||!h.length||!mr(T)||!mr(E)||!mr(z)||!mr(k))return null;var H=hi("recharts-pie",n);return It.createElement(Ii,{tabIndex:this.props.rootTabIndex,className:H,ref:function(Q){r.pieRef=Q}},this.renderSectors(),w&&this.renderLabels(h),ec.renderCallByParent(this.props,null,!1),(!U||q)&&bp.renderCallByParent(this.props,h,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,l){if(It.isValidElement(r))return It.cloneElement(r,s);if(Gn(r))return r(s);var h=hi("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return It.createElement(YA,b_({},s,{key:l,type:"linear",className:h}))}},{key:"renderLabelItem",value:function(r,s,l){if(It.isValidElement(r))return It.cloneElement(r,s);var h=l;if(Gn(r)&&(h=r(s),It.isValidElement(h)))return h;var n=hi("recharts-pie-label-text",typeof r!="boolean"&&!Gn(r)?r.className:"");return It.createElement(s0,b_({},s,{alignmentBaseline:"middle",className:n}),h)}}])}(rt.PureComponent);NC=Py;Ff(Py,"displayName","Pie");Ff(Py,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Fg.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ff(Py,"parseDeltaAngle",function(t,e){var a=Kd(e-t),r=Math.min(Math.abs(e-t),360);return a*r});Ff(Py,"getRealPieData",function(t){var e=t.data,a=t.children,r=fn(t,!1),s=of(a,fR);return e&&e.length?e.map(function(l,h){return _o(_o(_o({payload:l},r),l),s&&s[h]&&s[h].props)}):s&&s.length?s.map(function(l){return _o(_o({},r),l.props)}):[]});Ff(Py,"parseCoordinateOfPie",function(t,e){var a=e.top,r=e.left,s=e.width,l=e.height,h=NY(s,l),n=r+Wd(t.cx,s,s/2),w=a+Wd(t.cy,l,l/2),T=Wd(t.innerRadius,h,0),E=Wd(t.outerRadius,h,h*.8),z=t.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:n,cy:w,innerRadius:T,outerRadius:E,maxRadius:z}});Ff(Py,"getComposedData",function(t){var e=t.item,a=t.offset,r=e.type.defaultProps!==void 0?_o(_o({},e.type.defaultProps),e.props):e.props,s=NC.getRealPieData(r);if(!s||!s.length)return null;var l=r.cornerRadius,h=r.startAngle,n=r.endAngle,w=r.paddingAngle,T=r.dataKey,E=r.nameKey,z=r.valueKey,k=r.tooltipType,U=Math.abs(r.minAngle),q=NC.parseCoordinateOfPie(r,a),H=NC.parseDeltaAngle(h,n),$=Math.abs(H),Q=T;si(T)&&si(z)?(Cp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),Q="value"):si(T)&&(Cp(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),Q=z);var ne=s.filter(function(Ae){return Ul(Ae,Q,0)!==0}).length,de=($>=360?ne:ne-1)*w,ge=$-ne*U-de,fe=s.reduce(function(Ae,Te){var Oe=Ul(Te,Q,0);return Ae+(mr(Oe)?Oe:0)},0),_e;if(fe>0){var me;_e=s.map(function(Ae,Te){var Oe=Ul(Ae,Q,0),ie=Ul(Ae,E,Te),we=(mr(Oe)?Oe:0)/fe,Me;Te?Me=me.endAngle+Kd(H)*w*(Oe!==0?1:0):Me=h;var Ve=Me+Kd(H)*((Oe!==0?U:0)+we*ge),Ie=(Me+Ve)/2,Ue=(q.innerRadius+q.outerRadius)/2,Be=[{name:ie,value:Oe,payload:Ae,dataKey:Q,type:k}],ke=wo(q.cx,q.cy,Ue,Ie);return me=_o(_o(_o({percent:we,cornerRadius:l,name:ie,tooltipPayload:Be,midAngle:Ie,middleRadius:Ue,tooltipPosition:ke},Ae),q),{},{value:Ul(Ae,Q),startAngle:Me,endAngle:Ve,payload:Ae,paddingAngle:Kd(H)*w}),me})}return _o(_o({},q),{},{sectors:_e,data:s})});var uO,Sj;function kwe(){if(Sj)return uO;Sj=1;var t=Math.ceil,e=Math.max;function a(r,s,l,h){for(var n=-1,w=e(t((s-r)/(l||1)),0),T=Array(w);w--;)T[h?w:++n]=r,r+=l;return T}return uO=a,uO}var cO,Cj;function WY(){if(Cj)return cO;Cj=1;var t=gW(),e=1/0,a=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=t(s),s===e||s===-1/0){var l=s<0?-1:1;return l*a}return s===s?s:0}return cO=r,cO}var dO,bj;function Bwe(){if(bj)return dO;bj=1;var t=kwe(),e=y2(),a=WY();function r(s){return function(l,h,n){return n&&typeof n!="number"&&e(l,h,n)&&(h=n=void 0),l=a(l),h===void 0?(h=l,l=0):h=a(h),n=n===void 0?l<h?1:-1:a(n),t(l,h,n,s)}}return dO=r,dO}var hO,xj;function Gwe(){if(xj)return hO;xj=1;var t=Bwe(),e=t();return hO=e,hO}var jwe=Gwe();const Jb=Xi(jwe);function FR(t){"@babel/helpers - typeof";return FR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FR(t)}function Pj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Ej(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Pj(Object(a),!0).forEach(function(r){YY(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Pj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function YY(t,e,a){return e=Zwe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Zwe(t){var e=qwe(t,"string");return FR(e)=="symbol"?e:e+""}function qwe(t,e){if(FR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(FR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hwe=["Webkit","Moz","O","ms"],$we=function(e,a){var r=e.replace(/(\w)/,function(l){return l.toUpperCase()}),s=Hwe.reduce(function(l,h){return Ej(Ej({},l),{},YY({},h+r,a))},{});return s[e]=a,s};function pv(t){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(t)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Qb.apply(this,arguments)}function Nj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function fO(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Nj(Object(a),!0).forEach(function(r){Jh(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Nj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Kwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JY(r.key),r)}}function Wwe(t,e,a){return e&&Vj(t.prototype,e),a&&Vj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ywe(t,e,a){return e=ex(e),Xwe(t,XY()?Reflect.construct(e,a||[],ex(t).constructor):e.apply(t,a))}function Xwe(t,e){if(e&&(pv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jwe(t)}function Jwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XY(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XY=function(){return!!t})()}function ex(t){return ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ex(t)}function Qwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XD(t,e)}function XD(t,e){return XD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},XD(t,e)}function Jh(t,e,a){return e=JY(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function JY(t){var e=eRe(t,"string");return pv(e)=="symbol"?e:e+""}function eRe(t,e){if(pv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(pv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tRe=function(e){var a=e.data,r=e.startIndex,s=e.endIndex,l=e.x,h=e.width,n=e.travellerWidth;if(!a||!a.length)return{};var w=a.length,T=Mw().domain(Jb(0,w)).range([l,l+h-n]),E=T.domain().map(function(z){return T(z)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:T(r),endX:T(s),scale:T,scaleValues:E}},zj=function(e){return e.changedTouches&&!!e.changedTouches.length},mv=function(t){function e(a){var r;return Kwe(this,e),r=Ywe(this,e,[a]),Jh(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Jh(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Jh(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,l=s.endIndex,h=s.onDragEnd,n=s.startIndex;h==null||h({endIndex:l,startIndex:n})}),r.detachDragEndListener()}),Jh(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Jh(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Jh(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Jh(r,"handleSlideDragStart",function(s){var l=zj(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Qwe(e,t),Wwe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,l=r.endX,h=this.state.scaleValues,n=this.props,w=n.gap,T=n.data,E=T.length-1,z=Math.min(s,l),k=Math.max(s,l),U=e.getIndexInRange(h,z),q=e.getIndexInRange(h,k);return{startIndex:U-U%w,endIndex:q===E?E:q-q%w}}},{key:"getTextOfTick",value:function(r){var s=this.props,l=s.data,h=s.tickFormatter,n=s.dataKey,w=Ul(l[r],n,r);return Gn(h)?h(w,r):w}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,l=s.slideMoveStartX,h=s.startX,n=s.endX,w=this.props,T=w.x,E=w.width,z=w.travellerWidth,k=w.startIndex,U=w.endIndex,q=w.onChange,H=r.pageX-l;H>0?H=Math.min(H,T+E-z-n,T+E-z-h):H<0&&(H=Math.max(H,T-h,T-n));var $=this.getIndex({startX:h+H,endX:n+H});($.startIndex!==k||$.endIndex!==U)&&q&&q($),this.setState({startX:h+H,endX:n+H,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var l=zj(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,l=s.brushMoveStartX,h=s.movingTravellerId,n=s.endX,w=s.startX,T=this.state[h],E=this.props,z=E.x,k=E.width,U=E.travellerWidth,q=E.onChange,H=E.gap,$=E.data,Q={startX:this.state.startX,endX:this.state.endX},ne=r.pageX-l;ne>0?ne=Math.min(ne,z+k-U-T):ne<0&&(ne=Math.max(ne,z-T)),Q[h]=T+ne;var de=this.getIndex(Q),ge=de.startIndex,fe=de.endIndex,_e=function(){var Ae=$.length-1;return h==="startX"&&(n>w?ge%H===0:fe%H===0)||n<w&&fe===Ae||h==="endX"&&(n>w?fe%H===0:ge%H===0)||n>w&&fe===Ae};this.setState(Jh(Jh({},h,T+ne),"brushMoveStartX",r.pageX),function(){q&&_e()&&q(de)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var l=this,h=this.state,n=h.scaleValues,w=h.startX,T=h.endX,E=this.state[s],z=n.indexOf(E);if(z!==-1){var k=z+r;if(!(k===-1||k>=n.length)){var U=n[k];s==="startX"&&U>=T||s==="endX"&&U<=w||this.setState(Jh({},s,U),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.fill,T=r.stroke;return It.createElement("rect",{stroke:T,fill:w,x:s,y:l,width:h,height:n})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.data,T=r.children,E=r.padding,z=rt.Children.only(T);return z?It.cloneElement(z,{x:s,y:l,width:h,height:n,margin:E,compact:!0,data:w}):null}},{key:"renderTravellerLayer",value:function(r,s){var l,h,n=this,w=this.props,T=w.y,E=w.travellerWidth,z=w.height,k=w.traveller,U=w.ariaLabel,q=w.data,H=w.startIndex,$=w.endIndex,Q=Math.max(r,this.props.x),ne=fO(fO({},fn(this.props,!1)),{},{x:Q,y:T,width:E,height:z}),de=U||"Min value: ".concat((l=q[H])===null||l===void 0?void 0:l.name,", Max value: ").concat((h=q[$])===null||h===void 0?void 0:h.name);return It.createElement(Ii,{tabIndex:0,role:"slider","aria-label":de,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(fe){["ArrowLeft","ArrowRight"].includes(fe.key)&&(fe.preventDefault(),fe.stopPropagation(),n.handleTravellerMoveKeyboard(fe.key==="ArrowRight"?1:-1,s))},onFocus:function(){n.setState({isTravellerFocused:!0})},onBlur:function(){n.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(k,ne))}},{key:"renderSlide",value:function(r,s){var l=this.props,h=l.y,n=l.height,w=l.stroke,T=l.travellerWidth,E=Math.min(r,s)+T,z=Math.max(Math.abs(s-r)-T,0);return It.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:w,fillOpacity:.2,x:E,y:h,width:z,height:n})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,l=r.endIndex,h=r.y,n=r.height,w=r.travellerWidth,T=r.stroke,E=this.state,z=E.startX,k=E.endX,U=5,q={pointerEvents:"none",fill:T};return It.createElement(Ii,{className:"recharts-brush-texts"},It.createElement(s0,Qb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(z,k)-U,y:h+n/2},q),this.getTextOfTick(s)),It.createElement(s0,Qb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(z,k)+w+U,y:h+n/2},q),this.getTextOfTick(l)))}},{key:"render",value:function(){var r=this.props,s=r.data,l=r.className,h=r.children,n=r.x,w=r.y,T=r.width,E=r.height,z=r.alwaysShowText,k=this.state,U=k.startX,q=k.endX,H=k.isTextActive,$=k.isSlideMoving,Q=k.isTravellerMoving,ne=k.isTravellerFocused;if(!s||!s.length||!mr(n)||!mr(w)||!mr(T)||!mr(E)||T<=0||E<=0)return null;var de=hi("recharts-brush",l),ge=It.Children.count(h)===1,fe=$we("userSelect","none");return It.createElement(Ii,{className:de,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:fe},this.renderBackground(),ge&&this.renderPanorama(),this.renderSlide(U,q),this.renderTravellerLayer(U,"startX"),this.renderTravellerLayer(q,"endX"),(H||$||Q||ne||z)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,l=r.y,h=r.width,n=r.height,w=r.stroke,T=Math.floor(l+n/2)-1;return It.createElement(It.Fragment,null,It.createElement("rect",{x:s,y:l,width:h,height:n,fill:w,stroke:"none"}),It.createElement("line",{x1:s+1,y1:T,x2:s+h-1,y2:T,fill:"none",stroke:"#fff"}),It.createElement("line",{x1:s+1,y1:T+2,x2:s+h-1,y2:T+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var l;return It.isValidElement(r)?l=It.cloneElement(r,s):Gn(r)?l=r(s):l=e.renderDefaultTraveller(s),l}},{key:"getDerivedStateFromProps",value:function(r,s){var l=r.data,h=r.width,n=r.x,w=r.travellerWidth,T=r.updateId,E=r.startIndex,z=r.endIndex;if(l!==s.prevData||T!==s.prevUpdateId)return fO({prevData:l,prevTravellerWidth:w,prevUpdateId:T,prevX:n,prevWidth:h},l&&l.length?tRe({data:l,width:h,x:n,travellerWidth:w,startIndex:E,endIndex:z}):{scale:null,scaleValues:null});if(s.scale&&(h!==s.prevWidth||n!==s.prevX||w!==s.prevTravellerWidth)){s.scale.range([n,n+h-w]);var k=s.scale.domain().map(function(U){return s.scale(U)});return{prevData:l,prevTravellerWidth:w,prevUpdateId:T,prevX:n,prevWidth:h,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:k}}return null}},{key:"getIndexInRange",value:function(r,s){for(var l=r.length,h=0,n=l-1;n-h>1;){var w=Math.floor((h+n)/2);r[w]>s?n=w:h=w}return s>=r[n]?n:h}}])}(rt.PureComponent);Jh(mv,"displayName","Brush");Jh(mv,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var pO,Oj;function aRe(){if(Oj)return pO;Oj=1;var t=x3();function e(a,r){var s;return t(a,function(l,h,n){return s=r(l,h,n),!s}),!!s}return pO=e,pO}var mO,Dj;function rRe(){if(Dj)return mO;Dj=1;var t=KK(),e=Vm(),a=aRe(),r=Ph(),s=y2();function l(h,n,w){var T=r(h)?t:a;return w&&s(h,n,w)&&(n=void 0),T(h,e(n,3))}return mO=l,mO}var nRe=rRe();const iRe=Xi(nRe);var Sm=function(e,a){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===a},yO,Mj;function sRe(){if(Mj)return yO;Mj=1;var t=hW();function e(a,r,s){r=="__proto__"&&t?t(a,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):a[r]=s}return yO=e,yO}var gO,Ij;function oRe(){if(Ij)return gO;Ij=1;var t=sRe(),e=cW(),a=Vm();function r(s,l){var h={};return l=a(l,3),e(s,function(n,w,T){t(h,w,l(n,w,T))}),h}return gO=r,gO}var lRe=oRe();const uRe=Xi(lRe);var AO,Lj;function cRe(){if(Lj)return AO;Lj=1;function t(e,a){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!a(e[r],r,e))return!1;return!0}return AO=t,AO}var _O,Fj;function dRe(){if(Fj)return _O;Fj=1;var t=x3();function e(a,r){var s=!0;return t(a,function(l,h,n){return s=!!r(l,h,n),s}),s}return _O=e,_O}var vO,Uj;function hRe(){if(Uj)return vO;Uj=1;var t=cRe(),e=dRe(),a=Vm(),r=Ph(),s=y2();function l(h,n,w){var T=r(h)?t:e;return w&&s(h,n,w)&&(n=void 0),T(h,a(n,3))}return vO=l,vO}var fRe=hRe();const QY=Xi(fRe);var pRe=["x","y"];function UR(t){"@babel/helpers - typeof";return UR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UR(t)}function JD(){return JD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},JD.apply(this,arguments)}function kj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function hw(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?kj(Object(a),!0).forEach(function(r){mRe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):kj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function mRe(t,e,a){return e=yRe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function yRe(t){var e=gRe(t,"string");return UR(e)=="symbol"?e:e+""}function gRe(t,e){if(UR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(UR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ARe(t,e){if(t==null)return{};var a=_Re(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _Re(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function vRe(t,e){var a=t.x,r=t.y,s=ARe(t,pRe),l="".concat(a),h=parseInt(l,10),n="".concat(r),w=parseInt(n,10),T="".concat(e.height||s.height),E=parseInt(T,10),z="".concat(e.width||s.width),k=parseInt(z,10);return hw(hw(hw(hw(hw({},e),s),h?{x:h}:{}),w?{y:w}:{}),{},{height:E,width:k,name:e.name,radius:e.radius})}function Bj(t){return It.createElement(HY,JD({shapeType:"rectangle",propTransformer:vRe,activeClassName:"recharts-active-bar"},t))}var wRe=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var l=typeof r=="number";return l?e(r,s):(l||u0(),a)}},RRe=["value","background"],eX;function yv(t){"@babel/helpers - typeof";return yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yv(t)}function TRe(t,e){if(t==null)return{};var a=SRe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function SRe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function tx(){return tx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},tx.apply(this,arguments)}function Gj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function ru(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Gj(Object(a),!0).forEach(function(r){vg(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function CRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aX(r.key),r)}}function bRe(t,e,a){return e&&jj(t.prototype,e),a&&jj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function xRe(t,e,a){return e=ax(e),PRe(t,tX()?Reflect.construct(e,a||[],ax(t).constructor):e.apply(t,a))}function PRe(t,e){if(e&&(yv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ERe(t)}function ERe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tX=function(){return!!t})()}function ax(t){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ax(t)}function NRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QD(t,e)}function QD(t,e){return QD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},QD(t,e)}function vg(t,e,a){return e=aX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function aX(t){var e=VRe(t,"string");return yv(e)=="symbol"?e:e+""}function VRe(t,e){if(yv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(yv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ry=function(t){function e(){var a;CRe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=xRe(this,e,[].concat(s)),vg(a,"state",{isAnimationFinished:!1}),vg(a,"id",g0("recharts-bar-")),vg(a,"handleAnimationEnd",function(){var h=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),h&&h()}),vg(a,"handleAnimationStart",function(){var h=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),h&&h()}),a}return NRe(e,t),bRe(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,l=this.props,h=l.shape,n=l.dataKey,w=l.activeIndex,T=l.activeBar,E=fn(this.props,!1);return r&&r.map(function(z,k){var U=k===w,q=U?T:h,H=ru(ru(ru({},E),z),{},{isActive:U,option:q,index:k,dataKey:n,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return It.createElement(Ii,tx({className:"recharts-bar-rectangle"},i0(s.props,z,k),{key:"rectangle-".concat(z==null?void 0:z.x,"-").concat(z==null?void 0:z.y,"-").concat(z==null?void 0:z.value)}),It.createElement(Bj,H))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,l=s.data,h=s.layout,n=s.isAnimationActive,w=s.animationBegin,T=s.animationDuration,E=s.animationEasing,z=s.animationId,k=this.state.prevData;return It.createElement(Vp,{begin:w,duration:T,isActive:n,easing:E,from:{t:0},to:{t:1},key:"bar-".concat(z),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(U){var q=U.t,H=l.map(function($,Q){var ne=k&&k[Q];if(ne){var de=Du(ne.x,$.x),ge=Du(ne.y,$.y),fe=Du(ne.width,$.width),_e=Du(ne.height,$.height);return ru(ru({},$),{},{x:de(q),y:ge(q),width:fe(q),height:_e(q)})}if(h==="horizontal"){var me=Du(0,$.height),Ae=me(q);return ru(ru({},$),{},{y:$.y+$.height-Ae,height:Ae})}var Te=Du(0,$.width),Oe=Te(q);return ru(ru({},$),{},{width:Oe})});return It.createElement(Ii,null,r.renderRectanglesStatically(H))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,l=r.isAnimationActive,h=this.state.prevData;return l&&s&&s.length&&(!h||!o0(h,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,l=s.data,h=s.dataKey,n=s.activeIndex,w=fn(this.props.background,!1);return l.map(function(T,E){T.value;var z=T.background,k=TRe(T,RRe);if(!z)return null;var U=ru(ru(ru(ru(ru({},k),{},{fill:"#eee"},z),w),i0(r.props,T,E)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:h,index:E,className:"recharts-bar-background-rectangle"});return It.createElement(Bj,tx({key:"background-bar-".concat(E),option:r.props.background,isActive:E===n},U))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.data,n=l.xAxis,w=l.yAxis,T=l.layout,E=l.children,z=of(E,CT);if(!z)return null;var k=T==="vertical"?h[0].height/2:h[0].width/2,U=function($,Q){var ne=Array.isArray($.value)?$.value[1]:$.value;return{x:$.x,y:$.y,value:ne,errorVal:Ul($,Q)}},q={clipPath:r?"url(#clipPath-".concat(s,")"):null};return It.createElement(Ii,q,z.map(function(H){return It.cloneElement(H,{key:"error-bar-".concat(s,"-").concat(H.props.dataKey),data:h,xAxis:n,yAxis:w,layout:T,offset:k,dataPointFormatter:U})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,l=r.data,h=r.className,n=r.xAxis,w=r.yAxis,T=r.left,E=r.top,z=r.width,k=r.height,U=r.isAnimationActive,q=r.background,H=r.id;if(s||!l||!l.length)return null;var $=this.state.isAnimationFinished,Q=hi("recharts-bar",h),ne=n&&n.allowDataOverflow,de=w&&w.allowDataOverflow,ge=ne||de,fe=si(H)?this.id:H;return It.createElement(Ii,{className:Q},ne||de?It.createElement("defs",null,It.createElement("clipPath",{id:"clipPath-".concat(fe)},It.createElement("rect",{x:ne?T:T-z/2,y:de?E:E-k/2,width:ne?z:z*2,height:de?k:k*2}))):null,It.createElement(Ii,{className:"recharts-bar-rectangles",clipPath:ge?"url(#clipPath-".concat(fe,")"):null},q?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ge,fe),(!U||$)&&bp.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(rt.PureComponent);eX=Ry;vg(Ry,"displayName","Bar");vg(Ry,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Fg.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});vg(Ry,"getComposedData",function(t){var e=t.props,a=t.item,r=t.barPosition,s=t.bandSize,l=t.xAxis,h=t.yAxis,n=t.xAxisTicks,w=t.yAxisTicks,T=t.stackedData,E=t.dataStartIndex,z=t.displayedData,k=t.offset,U=i0e(r,a);if(!U)return null;var q=e.layout,H=a.type.defaultProps,$=H!==void 0?ru(ru({},H),a.props):a.props,Q=$.dataKey,ne=$.children,de=$.minPointSize,ge=q==="horizontal"?h:l,fe=T?ge.scale.domain():null,_e=h0e({numericAxis:ge}),me=of(ne,fR),Ae=z.map(function(Te,Oe){var ie,we,Me,Ve,Ie,Ue;T?ie=s0e(T[E+Oe],fe):(ie=Ul(Te,Q),Array.isArray(ie)||(ie=[_e,ie]));var Be=wRe(de,eX.defaultProps.minPointSize)(ie[1],Oe);if(q==="horizontal"){var ke,Je=[h.scale(ie[0]),h.scale(ie[1])],Le=Je[0],qe=Je[1];we=m7({axis:l,ticks:n,bandSize:s,offset:U.offset,entry:Te,index:Oe}),Me=(ke=qe??Le)!==null&&ke!==void 0?ke:void 0,Ve=U.size;var ye=Le-qe;if(Ie=Number.isNaN(ye)?0:ye,Ue={x:we,y:h.y,width:Ve,height:h.height},Math.abs(Be)>0&&Math.abs(Ie)<Math.abs(Be)){var ze=Kd(Ie||Be)*(Math.abs(Be)-Math.abs(Ie));Me-=ze,Ie+=ze}}else{var We=[l.scale(ie[0]),l.scale(ie[1])],lt=We[0],vt=We[1];if(we=lt,Me=m7({axis:h,ticks:w,bandSize:s,offset:U.offset,entry:Te,index:Oe}),Ve=vt-lt,Ie=U.size,Ue={x:l.x,y:Me,width:l.width,height:Ie},Math.abs(Be)>0&&Math.abs(Ve)<Math.abs(Be)){var Ot=Kd(Ve||Be)*(Math.abs(Be)-Math.abs(Ve));Ve+=Ot}}return ru(ru(ru({},Te),{},{x:we,y:Me,width:Ve,height:Ie,value:T?ie:ie[1],payload:Te,background:Ue},me&&me[Oe]&&me[Oe].props),{},{tooltipPayload:[PY(a,Te)],tooltipPosition:{x:we+Ve/2,y:Me+Ie/2}})});return ru({data:Ae,layout:q},k)});function kR(t){"@babel/helpers - typeof";return kR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kR(t)}function zRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zj(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rX(r.key),r)}}function ORe(t,e,a){return e&&Zj(t.prototype,e),a&&Zj(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function qj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Rp(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?qj(Object(a),!0).forEach(function(r){O2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function O2(t,e,a){return e=rX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function rX(t){var e=DRe(t,"string");return kR(e)=="symbol"?e:e+""}function DRe(t,e){if(kR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(kR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a4=function(e,a,r,s,l){var h=e.width,n=e.height,w=e.layout,T=e.children,E=Object.keys(a),z={left:r.left,leftMirror:r.left,right:h-r.right,rightMirror:h-r.right,top:r.top,topMirror:r.top,bottom:n-r.bottom,bottomMirror:n-r.bottom},k=!!Qh(T,Ry);return E.reduce(function(U,q){var H=a[q],$=H.orientation,Q=H.domain,ne=H.padding,de=ne===void 0?{}:ne,ge=H.mirror,fe=H.reversed,_e="".concat($).concat(ge?"Mirror":""),me,Ae,Te,Oe,ie;if(H.type==="number"&&(H.padding==="gap"||H.padding==="no-gap")){var we=Q[1]-Q[0],Me=1/0,Ve=H.categoricalDomain.sort();if(Ve.forEach(function(We,lt){lt>0&&(Me=Math.min((We||0)-(Ve[lt-1]||0),Me))}),Number.isFinite(Me)){var Ie=Me/we,Ue=H.layout==="vertical"?r.height:r.width;if(H.padding==="gap"&&(me=Ie*Ue/2),H.padding==="no-gap"){var Be=Wd(e.barCategoryGap,Ie*Ue),ke=Ie*Ue/2;me=ke-Be-(ke-Be)/Ue*Be}}}s==="xAxis"?Ae=[r.left+(de.left||0)+(me||0),r.left+r.width-(de.right||0)-(me||0)]:s==="yAxis"?Ae=w==="horizontal"?[r.top+r.height-(de.bottom||0),r.top+(de.top||0)]:[r.top+(de.top||0)+(me||0),r.top+r.height-(de.bottom||0)-(me||0)]:Ae=H.range,fe&&(Ae=[Ae[1],Ae[0]]);var Je=SY(H,l,k),Le=Je.scale,qe=Je.realScaleType;Le.domain(Q).range(Ae),CY(Le);var ye=bY(Le,Rp(Rp({},H),{},{realScaleType:qe}));s==="xAxis"?(ie=$==="top"&&!ge||$==="bottom"&&ge,Te=r.left,Oe=z[_e]-ie*H.height):s==="yAxis"&&(ie=$==="left"&&!ge||$==="right"&&ge,Te=z[_e]-ie*H.width,Oe=r.top);var ze=Rp(Rp(Rp({},H),ye),{},{realScaleType:qe,x:Te,y:Oe,scale:Le,width:s==="xAxis"?r.width:H.width,height:s==="yAxis"?r.height:H.height});return ze.bandSize=kb(ze,ye),!H.hide&&s==="xAxis"?z[_e]+=(ie?-1:1)*ze.height:H.hide||(z[_e]+=(ie?-1:1)*ze.width),Rp(Rp({},U),{},O2({},q,ze))},{})},nX=function(e,a){var r=e.x,s=e.y,l=a.x,h=a.y;return{x:Math.min(r,l),y:Math.min(s,h),width:Math.abs(l-r),height:Math.abs(h-s)}},MRe=function(e){var a=e.x1,r=e.y1,s=e.x2,l=e.y2;return nX({x:a,y:r},{x:s,y:l})},iX=function(){function t(e){zRe(this,t),this.scale=e}return ORe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,l=r.position;if(a!==void 0){if(l)switch(l){case"start":return this.scale(a);case"middle":{var h=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+h}case"end":{var n=this.bandwidth?this.bandwidth():0;return this.scale(a)+n}default:return this.scale(a)}if(s){var w=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+w}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),s=r[0],l=r[r.length-1];return s<=l?a>=s&&a<=l:a>=l&&a<=s}}],[{key:"create",value:function(a){return new t(a)}}])}();O2(iX,"EPS",1e-4);var r4=function(e){var a=Object.keys(e).reduce(function(r,s){return Rp(Rp({},r),{},O2({},s,iX.create(e[s])))},{});return Rp(Rp({},a),{},{apply:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=l.bandAware,n=l.position;return uRe(s,function(w,T){return a[T].apply(w,{bandAware:h,position:n})})},isInRange:function(s){return QY(s,function(l,h){return a[h].isInRange(l)})}})};function IRe(t){return(t%180+180)%180}var LRe=function(e){var a=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=IRe(s),h=l*Math.PI/180,n=Math.atan(r/a),w=h>n&&h<Math.PI-n?r/Math.sin(h):a/Math.cos(h);return Math.abs(w)},wO,Hj;function FRe(){if(Hj)return wO;Hj=1;var t=Vm(),e=vT(),a=p2();function r(s){return function(l,h,n){var w=Object(l);if(!e(l)){var T=t(h,3);l=a(l),h=function(z){return T(w[z],z,w)}}var E=s(l,h,n);return E>-1?w[T?l[E]:E]:void 0}}return wO=r,wO}var RO,$j;function URe(){if($j)return RO;$j=1;var t=WY();function e(a){var r=t(a),s=r%1;return r===r?s?r-s:r:0}return RO=e,RO}var TO,Kj;function kRe(){if(Kj)return TO;Kj=1;var t=iW(),e=Vm(),a=URe(),r=Math.max;function s(l,h,n){var w=l==null?0:l.length;if(!w)return-1;var T=n==null?0:a(n);return T<0&&(T=r(w+T,0)),t(l,e(h,3),T)}return TO=s,TO}var SO,Wj;function BRe(){if(Wj)return SO;Wj=1;var t=FRe(),e=kRe(),a=t(e);return SO=a,SO}var GRe=BRe();const jRe=Xi(GRe);var ZRe=vK();const qRe=Xi(ZRe);var HRe=qRe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),n4=rt.createContext(void 0),i4=rt.createContext(void 0),sX=rt.createContext(void 0),oX=rt.createContext({}),lX=rt.createContext(void 0),uX=rt.createContext(0),cX=rt.createContext(0),Yj=function(e){var a=e.state,r=a.xAxisMap,s=a.yAxisMap,l=a.offset,h=e.clipPathId,n=e.children,w=e.width,T=e.height,E=HRe(l);return It.createElement(n4.Provider,{value:r},It.createElement(i4.Provider,{value:s},It.createElement(oX.Provider,{value:l},It.createElement(sX.Provider,{value:E},It.createElement(lX.Provider,{value:h},It.createElement(uX.Provider,{value:T},It.createElement(cX.Provider,{value:w},n)))))))},$Re=function(){return rt.useContext(lX)},dX=function(e){var a=rt.useContext(n4);a==null&&u0();var r=a[e];return r==null&&u0(),r},KRe=function(){var e=rt.useContext(n4);return gg(e)},WRe=function(){var e=rt.useContext(i4),a=jRe(e,function(r){return QY(r.domain,Number.isFinite)});return a||gg(e)},hX=function(e){var a=rt.useContext(i4);a==null&&u0();var r=a[e];return r==null&&u0(),r},YRe=function(){var e=rt.useContext(sX);return e},XRe=function(){return rt.useContext(oX)},s4=function(){return rt.useContext(cX)},o4=function(){return rt.useContext(uX)};function gv(t){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(t)}function JRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QRe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pX(r.key),r)}}function eTe(t,e,a){return e&&QRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tTe(t,e,a){return e=rx(e),aTe(t,fX()?Reflect.construct(e,a||[],rx(t).constructor):e.apply(t,a))}function aTe(t,e){if(e&&(gv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rTe(t)}function rTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fX=function(){return!!t})()}function rx(t){return rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},rx(t)}function nTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eM(t,e)}function eM(t,e){return eM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},eM(t,e)}function Xj(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Jj(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Xj(Object(a),!0).forEach(function(r){l4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xj(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function l4(t,e,a){return e=pX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function pX(t){var e=iTe(t,"string");return gv(e)=="symbol"?e:e+""}function iTe(t,e){if(gv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(gv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function sTe(t,e){return cTe(t)||uTe(t,e)||lTe(t,e)||oTe()}function oTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lTe(t,e){if(t){if(typeof t=="string")return Qj(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qj(t,e)}}function Qj(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function uTe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function cTe(t){if(Array.isArray(t))return t}function tM(){return tM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},tM.apply(this,arguments)}var dTe=function(e,a){var r;return It.isValidElement(e)?r=It.cloneElement(e,a):Gn(e)?r=e(a):r=It.createElement("line",tM({},a,{className:"recharts-reference-line-line"})),r},hTe=function(e,a,r,s,l,h,n,w,T){var E=l.x,z=l.y,k=l.width,U=l.height;if(r){var q=T.y,H=e.y.apply(q,{position:h});if(Sm(T,"discard")&&!e.y.isInRange(H))return null;var $=[{x:E+k,y:H},{x:E,y:H}];return w==="left"?$.reverse():$}if(a){var Q=T.x,ne=e.x.apply(Q,{position:h});if(Sm(T,"discard")&&!e.x.isInRange(ne))return null;var de=[{x:ne,y:z+U},{x:ne,y:z}];return n==="top"?de.reverse():de}if(s){var ge=T.segment,fe=ge.map(function(_e){return e.apply(_e,{position:h})});return Sm(T,"discard")&&iRe(fe,function(_e){return!e.isInRange(_e)})?null:fe}return null};function fTe(t){var e=t.x,a=t.y,r=t.segment,s=t.xAxisId,l=t.yAxisId,h=t.shape,n=t.className,w=t.alwaysShow,T=$Re(),E=dX(s),z=hX(l),k=YRe();if(!T||!k)return null;Cp(w===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var U=r4({x:E.scale,y:z.scale}),q=Mu(e),H=Mu(a),$=r&&r.length===2,Q=hTe(U,q,H,$,k,t.position,E.orientation,z.orientation,t);if(!Q)return null;var ne=sTe(Q,2),de=ne[0],ge=de.x,fe=de.y,_e=ne[1],me=_e.x,Ae=_e.y,Te=Sm(t,"hidden")?"url(#".concat(T,")"):void 0,Oe=Jj(Jj({clipPath:Te},fn(t,!0)),{},{x1:ge,y1:fe,x2:me,y2:Ae});return It.createElement(Ii,{className:hi("recharts-reference-line",n)},dTe(h,Oe),ec.renderCallByParent(t,MRe({x1:ge,y1:fe,x2:me,y2:Ae})))}var u4=function(t){function e(){return JRe(this,e),tTe(this,e,arguments)}return nTe(e,t),eTe(e,[{key:"render",value:function(){return It.createElement(fTe,this.props)}}])}(It.Component);l4(u4,"displayName","ReferenceLine");l4(u4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function aM(){return aM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},aM.apply(this,arguments)}function Av(t){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(t)}function e9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function t9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?e9(Object(a),!0).forEach(function(r){D2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function pTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mTe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yX(r.key),r)}}function yTe(t,e,a){return e&&mTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gTe(t,e,a){return e=nx(e),ATe(t,mX()?Reflect.construct(e,a||[],nx(t).constructor):e.apply(t,a))}function ATe(t,e){if(e&&(Av(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Te(t)}function _Te(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mX=function(){return!!t})()}function nx(t){return nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},nx(t)}function vTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rM(t,e)}function rM(t,e){return rM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},rM(t,e)}function D2(t,e,a){return e=yX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function yX(t){var e=wTe(t,"string");return Av(e)=="symbol"?e:e+""}function wTe(t,e){if(Av(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Av(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var RTe=function(e){var a=e.x,r=e.y,s=e.xAxis,l=e.yAxis,h=r4({x:s.scale,y:l.scale}),n=h.apply({x:a,y:r},{bandAware:!0});return Sm(e,"discard")&&!h.isInRange(n)?null:n},M2=function(t){function e(){return pTe(this,e),gTe(this,e,arguments)}return vTe(e,t),yTe(e,[{key:"render",value:function(){var r=this.props,s=r.x,l=r.y,h=r.r,n=r.alwaysShow,w=r.clipPathId,T=Mu(s),E=Mu(l);if(Cp(n===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!T||!E)return null;var z=RTe(this.props);if(!z)return null;var k=z.x,U=z.y,q=this.props,H=q.shape,$=q.className,Q=Sm(this.props,"hidden")?"url(#".concat(w,")"):void 0,ne=t9(t9({clipPath:Q},fn(this.props,!0)),{},{cx:k,cy:U});return It.createElement(Ii,{className:hi("recharts-reference-dot",$)},e.renderDot(H,ne),ec.renderCallByParent(this.props,{x:k-h,y:U-h,width:2*h,height:2*h}))}}])}(It.Component);D2(M2,"displayName","ReferenceDot");D2(M2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});D2(M2,"renderDot",function(t,e){var a;return It.isValidElement(t)?a=It.cloneElement(t,e):Gn(t)?a=t(e):a=It.createElement(bT,aM({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),a});function nM(){return nM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},nM.apply(this,arguments)}function _v(t){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(t)}function a9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function r9(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?a9(Object(a),!0).forEach(function(r){I2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):a9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function TTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function STe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AX(r.key),r)}}function CTe(t,e,a){return e&&STe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bTe(t,e,a){return e=ix(e),xTe(t,gX()?Reflect.construct(e,a||[],ix(t).constructor):e.apply(t,a))}function xTe(t,e){if(e&&(_v(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PTe(t)}function PTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gX=function(){return!!t})()}function ix(t){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ix(t)}function ETe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iM(t,e)}function iM(t,e){return iM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},iM(t,e)}function I2(t,e,a){return e=AX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function AX(t){var e=NTe(t,"string");return _v(e)=="symbol"?e:e+""}function NTe(t,e){if(_v(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(_v(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var VTe=function(e,a,r,s,l){var h=l.x1,n=l.x2,w=l.y1,T=l.y2,E=l.xAxis,z=l.yAxis;if(!E||!z)return null;var k=r4({x:E.scale,y:z.scale}),U={x:e?k.x.apply(h,{position:"start"}):k.x.rangeMin,y:r?k.y.apply(w,{position:"start"}):k.y.rangeMin},q={x:a?k.x.apply(n,{position:"end"}):k.x.rangeMax,y:s?k.y.apply(T,{position:"end"}):k.y.rangeMax};return Sm(l,"discard")&&(!k.isInRange(U)||!k.isInRange(q))?null:nX(U,q)},L2=function(t){function e(){return TTe(this,e),bTe(this,e,arguments)}return ETe(e,t),CTe(e,[{key:"render",value:function(){var r=this.props,s=r.x1,l=r.x2,h=r.y1,n=r.y2,w=r.className,T=r.alwaysShow,E=r.clipPathId;Cp(T===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var z=Mu(s),k=Mu(l),U=Mu(h),q=Mu(n),H=this.props.shape;if(!z&&!k&&!U&&!q&&!H)return null;var $=VTe(z,k,U,q,this.props);if(!$&&!H)return null;var Q=Sm(this.props,"hidden")?"url(#".concat(E,")"):void 0;return It.createElement(Ii,{className:hi("recharts-reference-area",w)},e.renderRect(H,r9(r9({clipPath:Q},fn(this.props,!0)),$)),ec.renderCallByParent(this.props,$))}}])}(It.Component);I2(L2,"displayName","ReferenceArea");I2(L2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});I2(L2,"renderRect",function(t,e){var a;return It.isValidElement(t)?a=It.cloneElement(t,e):Gn(t)?a=t(e):a=It.createElement(t4,nM({},e,{className:"recharts-reference-area-rect"})),a});function _X(t,e,a){if(e<1)return[];if(e===1&&a===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function zTe(t,e,a){var r={width:t.width+e.width,height:t.height+e.height};return LRe(r,a)}function OTe(t,e,a){var r=a==="width",s=t.x,l=t.y,h=t.width,n=t.height;return e===1?{start:r?s:l,end:r?s+h:l+n}:{start:r?s+h:l+n,end:r?s:l}}function sx(t,e,a,r,s){if(t*e<t*r||t*e>t*s)return!1;var l=a();return t*(e-t*l/2-r)>=0&&t*(e+t*l/2-s)<=0}function DTe(t,e){return _X(t,e+1)}function MTe(t,e,a,r,s){for(var l=(r||[]).slice(),h=e.start,n=e.end,w=0,T=1,E=h,z=function(){var q=r==null?void 0:r[w];if(q===void 0)return{v:_X(r,T)};var H=w,$,Q=function(){return $===void 0&&($=a(q,H)),$},ne=q.coordinate,de=w===0||sx(t,ne,Q,E,n);de||(w=0,E=h,T+=1),de&&(E=ne+t*(Q()/2+s),w+=T)},k;T<=l.length;)if(k=z(),k)return k.v;return[]}function BR(t){"@babel/helpers - typeof";return BR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BR(t)}function n9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function id(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(a),!0).forEach(function(r){ITe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ITe(t,e,a){return e=LTe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function LTe(t){var e=FTe(t,"string");return BR(e)=="symbol"?e:e+""}function FTe(t,e){if(BR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(BR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UTe(t,e,a,r,s){for(var l=(r||[]).slice(),h=l.length,n=e.start,w=e.end,T=function(k){var U=l[k],q,H=function(){return q===void 0&&(q=a(U,k)),q};if(k===h-1){var $=t*(U.coordinate+t*H()/2-w);l[k]=U=id(id({},U),{},{tickCoord:$>0?U.coordinate-$*t:U.coordinate})}else l[k]=U=id(id({},U),{},{tickCoord:U.coordinate});var Q=sx(t,U.tickCoord,H,n,w);Q&&(w=U.tickCoord-t*(H()/2+s),l[k]=id(id({},U),{},{isShow:!0}))},E=h-1;E>=0;E--)T(E);return l}function kTe(t,e,a,r,s,l){var h=(r||[]).slice(),n=h.length,w=e.start,T=e.end;if(l){var E=r[n-1],z=a(E,n-1),k=t*(E.coordinate+t*z/2-T);h[n-1]=E=id(id({},E),{},{tickCoord:k>0?E.coordinate-k*t:E.coordinate});var U=sx(t,E.tickCoord,function(){return z},w,T);U&&(T=E.tickCoord-t*(z/2+s),h[n-1]=id(id({},E),{},{isShow:!0}))}for(var q=l?n-1:n,H=function(ne){var de=h[ne],ge,fe=function(){return ge===void 0&&(ge=a(de,ne)),ge};if(ne===0){var _e=t*(de.coordinate-t*fe()/2-w);h[ne]=de=id(id({},de),{},{tickCoord:_e<0?de.coordinate-_e*t:de.coordinate})}else h[ne]=de=id(id({},de),{},{tickCoord:de.coordinate});var me=sx(t,de.tickCoord,fe,w,T);me&&(w=de.tickCoord+t*(fe()/2+s),h[ne]=id(id({},de),{},{isShow:!0}))},$=0;$<q;$++)H($);return h}function c4(t,e,a){var r=t.tick,s=t.ticks,l=t.viewBox,h=t.minTickGap,n=t.orientation,w=t.interval,T=t.tickFormatter,E=t.unit,z=t.angle;if(!s||!s.length||!r)return[];if(mr(w)||Fg.isSsr)return DTe(s,typeof w=="number"&&mr(w)?w:0);var k=[],U=n==="top"||n==="bottom"?"width":"height",q=E&&U==="width"?Dw(E,{fontSize:e,letterSpacing:a}):{width:0,height:0},H=function(de,ge){var fe=Gn(T)?T(de.value,ge):de.value;return U==="width"?zTe(Dw(fe,{fontSize:e,letterSpacing:a}),q,z):Dw(fe,{fontSize:e,letterSpacing:a})[U]},$=s.length>=2?Kd(s[1].coordinate-s[0].coordinate):1,Q=OTe(l,$,U);return w==="equidistantPreserveStart"?MTe($,Q,H,s,h):(w==="preserveStart"||w==="preserveStartEnd"?k=kTe($,Q,H,s,h,w==="preserveStartEnd"):k=UTe($,Q,H,s,h),k.filter(function(ne){return ne.isShow}))}var BTe=["viewBox"],GTe=["viewBox"],jTe=["ticks"];function vv(t){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vv(t)}function x_(){return x_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},x_.apply(this,arguments)}function i9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function qd(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?i9(Object(a),!0).forEach(function(r){d4(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function CO(t,e){if(t==null)return{};var a=ZTe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ZTe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function qTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wX(r.key),r)}}function HTe(t,e,a){return e&&s9(t.prototype,e),a&&s9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Te(t,e,a){return e=ox(e),KTe(t,vX()?Reflect.construct(e,a||[],ox(t).constructor):e.apply(t,a))}function KTe(t,e){if(e&&(vv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WTe(t)}function WTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vX=function(){return!!t})()}function ox(t){return ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ox(t)}function YTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sM(t,e)}function sM(t,e){return sM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},sM(t,e)}function d4(t,e,a){return e=wX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function wX(t){var e=XTe(t,"string");return vv(e)=="symbol"?e:e+""}function XTe(t,e){if(vv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qv=function(t){function e(a){var r;return qTe(this,e),r=$Te(this,e,[a]),r.state={fontSize:"",letterSpacing:""},r}return YTe(e,t),HTe(e,[{key:"shouldComponentUpdate",value:function(r,s){var l=r.viewBox,h=CO(r,BTe),n=this.props,w=n.viewBox,T=CO(n,GTe);return!F_(l,w)||!F_(h,T)||!F_(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,l=s.x,h=s.y,n=s.width,w=s.height,T=s.orientation,E=s.tickSize,z=s.mirror,k=s.tickMargin,U,q,H,$,Q,ne,de=z?-1:1,ge=r.tickSize||E,fe=mr(r.tickCoord)?r.tickCoord:r.coordinate;switch(T){case"top":U=q=r.coordinate,$=h+ +!z*w,H=$-de*ge,ne=H-de*k,Q=fe;break;case"left":H=$=r.coordinate,q=l+ +!z*n,U=q-de*ge,Q=U-de*k,ne=fe;break;case"right":H=$=r.coordinate,q=l+ +z*n,U=q+de*ge,Q=U+de*k,ne=fe;break;default:U=q=r.coordinate,$=h+ +z*w,H=$+de*ge,ne=H+de*k,Q=fe;break}return{line:{x1:U,y1:H,x2:q,y2:$},tick:{x:Q,y:ne}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,l=r.mirror,h;switch(s){case"left":h=l?"start":"end";break;case"right":h=l?"end":"start";break;default:h="middle";break}return h}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,l=r.mirror,h="end";switch(s){case"left":case"right":h="middle";break;case"top":h=l?"start":"end";break;default:h=l?"end":"start";break}return h}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,l=r.y,h=r.width,n=r.height,w=r.orientation,T=r.mirror,E=r.axisLine,z=qd(qd(qd({},fn(this.props,!1)),fn(E,!1)),{},{fill:"none"});if(w==="top"||w==="bottom"){var k=+(w==="top"&&!T||w==="bottom"&&T);z=qd(qd({},z),{},{x1:s,y1:l+k*n,x2:s+h,y2:l+k*n})}else{var U=+(w==="left"&&!T||w==="right"&&T);z=qd(qd({},z),{},{x1:s+U*h,y1:l,x2:s+U*h,y2:l+n})}return It.createElement("line",x_({},z,{className:hi("recharts-cartesian-axis-line",sf(E,"className"))}))}},{key:"renderTicks",value:function(r,s,l){var h=this,n=this.props,w=n.tickLine,T=n.stroke,E=n.tick,z=n.tickFormatter,k=n.unit,U=c4(qd(qd({},this.props),{},{ticks:r}),s,l),q=this.getTickTextAnchor(),H=this.getTickVerticalAnchor(),$=fn(this.props,!1),Q=fn(E,!1),ne=qd(qd({},$),{},{fill:"none"},fn(w,!1)),de=U.map(function(ge,fe){var _e=h.getTickLineCoord(ge),me=_e.line,Ae=_e.tick,Te=qd(qd(qd(qd({textAnchor:q,verticalAnchor:H},$),{},{stroke:"none",fill:T},Q),Ae),{},{index:fe,payload:ge,visibleTicksCount:U.length,tickFormatter:z});return It.createElement(Ii,x_({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},i0(h.props,ge,fe)),w&&It.createElement("line",x_({},ne,me,{className:hi("recharts-cartesian-axis-tick-line",sf(w,"className"))})),E&&e.renderTickItem(E,Te,"".concat(Gn(z)?z(ge.value,fe):ge.value).concat(k||"")))});return It.createElement("g",{className:"recharts-cartesian-axis-ticks"},de)}},{key:"render",value:function(){var r=this,s=this.props,l=s.axisLine,h=s.width,n=s.height,w=s.ticksGenerator,T=s.className,E=s.hide;if(E)return null;var z=this.props,k=z.ticks,U=CO(z,jTe),q=k;return Gn(w)&&(q=k&&k.length>0?w(this.props):w(U)),h<=0||n<=0||!q||!q.length?null:It.createElement(Ii,{className:hi("recharts-cartesian-axis",T),ref:function($){r.layerReference=$}},l&&this.renderAxisLine(),this.renderTicks(q,this.state.fontSize,this.state.letterSpacing),ec.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,l){var h;return It.isValidElement(r)?h=It.cloneElement(r,s):Gn(r)?h=r(s):h=It.createElement(s0,x_({},s,{className:"recharts-cartesian-axis-tick-value"}),l),h}}])}(rt.Component);d4(qv,"displayName","CartesianAxis");d4(qv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var JTe=["x1","y1","x2","y2","key"],QTe=["offset"];function c0(t){"@babel/helpers - typeof";return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c0(t)}function o9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function ld(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?o9(Object(a),!0).forEach(function(r){eSe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function eSe(t,e,a){return e=tSe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function tSe(t){var e=aSe(t,"string");return c0(e)=="symbol"?e:e+""}function aSe(t,e){if(c0(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(c0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jA(){return jA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},jA.apply(this,arguments)}function l9(t,e){if(t==null)return{};var a=rSe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function rSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}var nSe=function(e){var a=e.fill;if(!a||a==="none")return null;var r=e.fillOpacity,s=e.x,l=e.y,h=e.width,n=e.height,w=e.ry;return It.createElement("rect",{x:s,y:l,ry:w,width:h,height:n,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function RX(t,e){var a;if(It.isValidElement(t))a=It.cloneElement(t,e);else if(Gn(t))a=t(e);else{var r=e.x1,s=e.y1,l=e.x2,h=e.y2,n=e.key,w=l9(e,JTe),T=fn(w,!1);T.offset;var E=l9(T,QTe);a=It.createElement("line",jA({},E,{x1:r,y1:s,x2:l,y2:h,fill:"none",key:n}))}return a}function iSe(t){var e=t.x,a=t.width,r=t.horizontal,s=r===void 0?!0:r,l=t.horizontalPoints;if(!s||!l||!l.length)return null;var h=l.map(function(n,w){var T=ld(ld({},t),{},{x1:e,y1:n,x2:e+a,y2:n,key:"line-".concat(w),index:w});return RX(s,T)});return It.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function sSe(t){var e=t.y,a=t.height,r=t.vertical,s=r===void 0?!0:r,l=t.verticalPoints;if(!s||!l||!l.length)return null;var h=l.map(function(n,w){var T=ld(ld({},t),{},{x1:n,y1:e,x2:n,y2:e+a,key:"line-".concat(w),index:w});return RX(s,T)});return It.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function oSe(t){var e=t.horizontalFill,a=t.fillOpacity,r=t.x,s=t.y,l=t.width,h=t.height,n=t.horizontalPoints,w=t.horizontal,T=w===void 0?!0:w;if(!T||!e||!e.length)return null;var E=n.map(function(k){return Math.round(k+s-s)}).sort(function(k,U){return k-U});s!==E[0]&&E.unshift(0);var z=E.map(function(k,U){var q=!E[U+1],H=q?s+h-k:E[U+1]-k;if(H<=0)return null;var $=U%e.length;return It.createElement("rect",{key:"react-".concat(U),y:k,x:r,height:H,width:l,stroke:"none",fill:e[$],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return It.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},z)}function lSe(t){var e=t.vertical,a=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,l=t.x,h=t.y,n=t.width,w=t.height,T=t.verticalPoints;if(!a||!r||!r.length)return null;var E=T.map(function(k){return Math.round(k+l-l)}).sort(function(k,U){return k-U});l!==E[0]&&E.unshift(0);var z=E.map(function(k,U){var q=!E[U+1],H=q?l+n-k:E[U+1]-k;if(H<=0)return null;var $=U%r.length;return It.createElement("rect",{key:"react-".concat(U),x:k,y:h,width:H,height:w,stroke:"none",fill:r[$],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return It.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},z)}var uSe=function(e,a){var r=e.xAxis,s=e.width,l=e.height,h=e.offset;return TY(c4(ld(ld(ld({},qv.defaultProps),r),{},{ticks:oy(r,!0),viewBox:{x:0,y:0,width:s,height:l}})),h.left,h.left+h.width,a)},cSe=function(e,a){var r=e.yAxis,s=e.width,l=e.height,h=e.offset;return TY(c4(ld(ld(ld({},qv.defaultProps),r),{},{ticks:oy(r,!0),viewBox:{x:0,y:0,width:s,height:l}})),h.top,h.top+h.height,a)},d_={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function fm(t){var e,a,r,s,l,h,n=s4(),w=o4(),T=XRe(),E=ld(ld({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:d_.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:d_.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:d_.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:d_.horizontalFill,vertical:(l=t.vertical)!==null&&l!==void 0?l:d_.vertical,verticalFill:(h=t.verticalFill)!==null&&h!==void 0?h:d_.verticalFill,x:mr(t.x)?t.x:T.left,y:mr(t.y)?t.y:T.top,width:mr(t.width)?t.width:T.width,height:mr(t.height)?t.height:T.height}),z=E.x,k=E.y,U=E.width,q=E.height,H=E.syncWithTicks,$=E.horizontalValues,Q=E.verticalValues,ne=KRe(),de=WRe();if(!mr(U)||U<=0||!mr(q)||q<=0||!mr(z)||z!==+z||!mr(k)||k!==+k)return null;var ge=E.verticalCoordinatesGenerator||uSe,fe=E.horizontalCoordinatesGenerator||cSe,_e=E.horizontalPoints,me=E.verticalPoints;if((!_e||!_e.length)&&Gn(fe)){var Ae=$&&$.length,Te=fe({yAxis:de?ld(ld({},de),{},{ticks:Ae?$:de.ticks}):void 0,width:n,height:w,offset:T},Ae?!0:H);Cp(Array.isArray(Te),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(c0(Te),"]")),Array.isArray(Te)&&(_e=Te)}if((!me||!me.length)&&Gn(ge)){var Oe=Q&&Q.length,ie=ge({xAxis:ne?ld(ld({},ne),{},{ticks:Oe?Q:ne.ticks}):void 0,width:n,height:w,offset:T},Oe?!0:H);Cp(Array.isArray(ie),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(c0(ie),"]")),Array.isArray(ie)&&(me=ie)}return It.createElement("g",{className:"recharts-cartesian-grid"},It.createElement(nSe,{fill:E.fill,fillOpacity:E.fillOpacity,x:E.x,y:E.y,width:E.width,height:E.height,ry:E.ry}),It.createElement(iSe,jA({},E,{offset:T,horizontalPoints:_e,xAxis:ne,yAxis:de})),It.createElement(sSe,jA({},E,{offset:T,verticalPoints:me,xAxis:ne,yAxis:de})),It.createElement(oSe,jA({},E,{horizontalPoints:_e})),It.createElement(lSe,jA({},E,{verticalPoints:me})))}fm.displayName="CartesianGrid";var dSe=["type","layout","connectNulls","ref"],hSe=["key"];function wv(t){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wv(t)}function u9(t,e){if(t==null)return{};var a=fSe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function fSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},kw.apply(this,arguments)}function c9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Xh(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?c9(Object(a),!0).forEach(function(r){Tp(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function h_(t){return gSe(t)||ySe(t)||mSe(t)||pSe()}function pSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mSe(t,e){if(t){if(typeof t=="string")return oM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oM(t,e)}}function ySe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gSe(t){if(Array.isArray(t))return oM(t)}function oM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function ASe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SX(r.key),r)}}function _Se(t,e,a){return e&&d9(t.prototype,e),a&&d9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function vSe(t,e,a){return e=lx(e),wSe(t,TX()?Reflect.construct(e,a||[],lx(t).constructor):e.apply(t,a))}function wSe(t,e){if(e&&(wv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RSe(t)}function RSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TX=function(){return!!t})()}function lx(t){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},lx(t)}function TSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lM(t,e)}function lM(t,e){return lM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},lM(t,e)}function Tp(t,e,a){return e=SX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function SX(t){var e=SSe(t,"string");return wv(e)=="symbol"?e:e+""}function SSe(t,e){if(wv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(wv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xT=function(t){function e(){var a;ASe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=vSe(this,e,[].concat(s)),Tp(a,"state",{isAnimationFinished:!0,totalLength:0}),Tp(a,"generateSimpleStrokeDasharray",function(h,n){return"".concat(n,"px ").concat(h-n,"px")}),Tp(a,"getStrokeDasharray",function(h,n,w){var T=w.reduce(function(Q,ne){return Q+ne});if(!T)return a.generateSimpleStrokeDasharray(n,h);for(var E=Math.floor(h/T),z=h%T,k=n-h,U=[],q=0,H=0;q<w.length;H+=w[q],++q)if(H+w[q]>z){U=[].concat(h_(w.slice(0,q)),[z-H]);break}var $=U.length%2===0?[0,k]:[k];return[].concat(h_(e.repeat(w,E)),h_(U),$).map(function(Q){return"".concat(Q,"px")}).join(", ")}),Tp(a,"id",g0("recharts-line-")),Tp(a,"pathRef",function(h){a.mainCurve=h}),Tp(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),Tp(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return TSe(e,t),_Se(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,h=l.points,n=l.xAxis,w=l.yAxis,T=l.layout,E=l.children,z=of(E,CT);if(!z)return null;var k=function(H,$){return{x:H.x,y:H.y,value:H.value,errorVal:Ul(H.payload,$)}},U={clipPath:r?"url(#clipPath-".concat(s,")"):null};return It.createElement(Ii,U,z.map(function(q){return It.cloneElement(q,{key:"bar-".concat(q.props.dataKey),data:h,xAxis:n,yAxis:w,layout:T,dataPointFormatter:k})}))}},{key:"renderDots",value:function(r,s,l){var h=this.props.isAnimationActive;if(h&&!this.state.isAnimationFinished)return null;var n=this.props,w=n.dot,T=n.points,E=n.dataKey,z=fn(this.props,!1),k=fn(w,!0),U=T.map(function(H,$){var Q=Xh(Xh(Xh({key:"dot-".concat($),r:3},z),k),{},{value:H.value,dataKey:E,cx:H.x,cy:H.y,index:$,payload:H.payload});return e.renderDotItem(w,Q)}),q={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return It.createElement(Ii,kw({className:"recharts-line-dots",key:"dots"},q),U)}},{key:"renderCurveStatically",value:function(r,s,l,h){var n=this.props,w=n.type,T=n.layout,E=n.connectNulls;n.ref;var z=u9(n,dSe),k=Xh(Xh(Xh({},fn(z,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(l,")"):null,points:r},h),{},{type:w,layout:T,connectNulls:E});return It.createElement(YA,kw({},k,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var l=this,h=this.props,n=h.points,w=h.strokeDasharray,T=h.isAnimationActive,E=h.animationBegin,z=h.animationDuration,k=h.animationEasing,U=h.animationId,q=h.animateNewValues,H=h.width,$=h.height,Q=this.state,ne=Q.prevPoints,de=Q.totalLength;return It.createElement(Vp,{begin:E,duration:z,isActive:T,easing:k,from:{t:0},to:{t:1},key:"line-".concat(U),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ge){var fe=ge.t;if(ne){var _e=ne.length/n.length,me=n.map(function(we,Me){var Ve=Math.floor(Me*_e);if(ne[Ve]){var Ie=ne[Ve],Ue=Du(Ie.x,we.x),Be=Du(Ie.y,we.y);return Xh(Xh({},we),{},{x:Ue(fe),y:Be(fe)})}if(q){var ke=Du(H*2,we.x),Je=Du($/2,we.y);return Xh(Xh({},we),{},{x:ke(fe),y:Je(fe)})}return Xh(Xh({},we),{},{x:we.x,y:we.y})});return l.renderCurveStatically(me,r,s)}var Ae=Du(0,de),Te=Ae(fe),Oe;if(w){var ie="".concat(w).split(/[,\s]+/gim).map(function(we){return parseFloat(we)});Oe=l.getStrokeDasharray(Te,de,ie)}else Oe=l.generateSimpleStrokeDasharray(de,Te);return l.renderCurveStatically(n,r,s,{strokeDasharray:Oe})})}},{key:"renderCurve",value:function(r,s){var l=this.props,h=l.points,n=l.isAnimationActive,w=this.state,T=w.prevPoints,E=w.totalLength;return n&&h&&h.length&&(!T&&E>0||!o0(T,h))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(h,r,s)}},{key:"render",value:function(){var r,s=this.props,l=s.hide,h=s.dot,n=s.points,w=s.className,T=s.xAxis,E=s.yAxis,z=s.top,k=s.left,U=s.width,q=s.height,H=s.isAnimationActive,$=s.id;if(l||!n||!n.length)return null;var Q=this.state.isAnimationFinished,ne=n.length===1,de=hi("recharts-line",w),ge=T&&T.allowDataOverflow,fe=E&&E.allowDataOverflow,_e=ge||fe,me=si($)?this.id:$,Ae=(r=fn(h,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},Te=Ae.r,Oe=Te===void 0?3:Te,ie=Ae.strokeWidth,we=ie===void 0?2:ie,Me=CK(h)?h:{},Ve=Me.clipDot,Ie=Ve===void 0?!0:Ve,Ue=Oe*2+we;return It.createElement(Ii,{className:de},ge||fe?It.createElement("defs",null,It.createElement("clipPath",{id:"clipPath-".concat(me)},It.createElement("rect",{x:ge?k:k-U/2,y:fe?z:z-q/2,width:ge?U:U*2,height:fe?q:q*2})),!Ie&&It.createElement("clipPath",{id:"clipPath-dots-".concat(me)},It.createElement("rect",{x:k-Ue/2,y:z-Ue/2,width:U+Ue,height:q+Ue}))):null,!ne&&this.renderCurve(_e,me),this.renderErrorBar(_e,me),(ne||h)&&this.renderDots(_e,Ie,me),(!H||Q)&&bp.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var l=r.length%2!==0?[].concat(h_(r),[0]):r,h=[],n=0;n<s;++n)h=[].concat(h_(h),h_(l));return h}},{key:"renderDotItem",value:function(r,s){var l;if(It.isValidElement(r))l=It.cloneElement(r,s);else if(Gn(r))l=r(s);else{var h=s.key,n=u9(s,hSe),w=hi("recharts-line-dot",typeof r!="boolean"?r.className:"");l=It.createElement(bT,kw({key:h},n,{className:w}))}return l}}])}(rt.PureComponent);Tp(xT,"displayName","Line");Tp(xT,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Fg.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Tp(xT,"getComposedData",function(t){var e=t.props,a=t.xAxis,r=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,h=t.dataKey,n=t.bandSize,w=t.displayedData,T=t.offset,E=e.layout,z=w.map(function(k,U){var q=Ul(k,h);return E==="horizontal"?{x:Ub({axis:a,ticks:s,bandSize:n,entry:k,index:U}),y:si(q)?null:r.scale(q),value:q,payload:k}:{x:si(q)?null:a.scale(q),y:Ub({axis:r,ticks:l,bandSize:n,entry:k,index:U}),value:q,payload:k}});return Xh({points:z,layout:E},T)});var CSe=["layout","type","stroke","connectNulls","isRange","ref"],bSe=["key"],CX;function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}function bX(t,e){if(t==null)return{};var a=xSe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function xSe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ZA(){return ZA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ZA.apply(this,arguments)}function h9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function dg(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?h9(Object(a),!0).forEach(function(r){Am(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function PSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f9(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,PX(r.key),r)}}function ESe(t,e,a){return e&&f9(t.prototype,e),a&&f9(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function NSe(t,e,a){return e=ux(e),VSe(t,xX()?Reflect.construct(e,a||[],ux(t).constructor):e.apply(t,a))}function VSe(t,e){if(e&&(Rv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zSe(t)}function zSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xX=function(){return!!t})()}function ux(t){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ux(t)}function OSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uM(t,e)}function uM(t,e){return uM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},uM(t,e)}function Am(t,e,a){return e=PX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function PX(t){var e=DSe(t,"string");return Rv(e)=="symbol"?e:e+""}function DSe(t,e){if(Rv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Rv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uf=function(t){function e(){var a;PSe(this,e);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return a=NSe(this,e,[].concat(s)),Am(a,"state",{isAnimationFinished:!0}),Am(a,"id",g0("recharts-area-")),Am(a,"handleAnimationEnd",function(){var h=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),Gn(h)&&h()}),Am(a,"handleAnimationStart",function(){var h=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),Gn(h)&&h()}),a}return OSe(e,t),ESe(e,[{key:"renderDots",value:function(r,s,l){var h=this.props.isAnimationActive,n=this.state.isAnimationFinished;if(h&&!n)return null;var w=this.props,T=w.dot,E=w.points,z=w.dataKey,k=fn(this.props,!1),U=fn(T,!0),q=E.map(function($,Q){var ne=dg(dg(dg({key:"dot-".concat(Q),r:3},k),U),{},{index:Q,cx:$.x,cy:$.y,dataKey:z,value:$.value,payload:$.payload,points:E});return e.renderDotItem(T,ne)}),H={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(l,")"):null};return It.createElement(Ii,ZA({className:"recharts-area-dots"},H),q)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,l=s.baseLine,h=s.points,n=s.strokeWidth,w=h[0].x,T=h[h.length-1].x,E=r*Math.abs(w-T),z=_g(h.map(function(k){return k.y||0}));return mr(l)&&typeof l=="number"?z=Math.max(l,z):l&&Array.isArray(l)&&l.length&&(z=Math.max(_g(l.map(function(k){return k.y||0})),z)),mr(z)?It.createElement("rect",{x:w<T?w:w-E,y:0,width:E,height:Math.floor(z+(n?parseInt("".concat(n),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,l=s.baseLine,h=s.points,n=s.strokeWidth,w=h[0].y,T=h[h.length-1].y,E=r*Math.abs(w-T),z=_g(h.map(function(k){return k.x||0}));return mr(l)&&typeof l=="number"?z=Math.max(l,z):l&&Array.isArray(l)&&l.length&&(z=Math.max(_g(l.map(function(k){return k.x||0})),z)),mr(z)?It.createElement("rect",{x:0,y:w<T?w:w-E,width:z+(n?parseInt("".concat(n),10):1),height:Math.floor(E)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,l,h){var n=this.props,w=n.layout,T=n.type,E=n.stroke,z=n.connectNulls,k=n.isRange;n.ref;var U=bX(n,CSe);return It.createElement(Ii,{clipPath:l?"url(#clipPath-".concat(h,")"):null},It.createElement(YA,ZA({},fn(U,!0),{points:r,connectNulls:z,type:T,baseLine:s,layout:w,stroke:"none",className:"recharts-area-area"})),E!=="none"&&It.createElement(YA,ZA({},fn(this.props,!1),{className:"recharts-area-curve",layout:w,type:T,connectNulls:z,fill:"none",points:r})),E!=="none"&&k&&It.createElement(YA,ZA({},fn(this.props,!1),{className:"recharts-area-curve",layout:w,type:T,connectNulls:z,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var l=this,h=this.props,n=h.points,w=h.baseLine,T=h.isAnimationActive,E=h.animationBegin,z=h.animationDuration,k=h.animationEasing,U=h.animationId,q=this.state,H=q.prevPoints,$=q.prevBaseLine;return It.createElement(Vp,{begin:E,duration:z,isActive:T,easing:k,from:{t:0},to:{t:1},key:"area-".concat(U),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(Q){var ne=Q.t;if(H){var de=H.length/n.length,ge=n.map(function(Ae,Te){var Oe=Math.floor(Te*de);if(H[Oe]){var ie=H[Oe],we=Du(ie.x,Ae.x),Me=Du(ie.y,Ae.y);return dg(dg({},Ae),{},{x:we(ne),y:Me(ne)})}return Ae}),fe;if(mr(w)&&typeof w=="number"){var _e=Du($,w);fe=_e(ne)}else if(si(w)||kv(w)){var me=Du($,0);fe=me(ne)}else fe=w.map(function(Ae,Te){var Oe=Math.floor(Te*de);if($[Oe]){var ie=$[Oe],we=Du(ie.x,Ae.x),Me=Du(ie.y,Ae.y);return dg(dg({},Ae),{},{x:we(ne),y:Me(ne)})}return Ae});return l.renderAreaStatically(ge,fe,r,s)}return It.createElement(Ii,null,It.createElement("defs",null,It.createElement("clipPath",{id:"animationClipPath-".concat(s)},l.renderClipRect(ne))),It.createElement(Ii,{clipPath:"url(#animationClipPath-".concat(s,")")},l.renderAreaStatically(n,w,r,s)))})}},{key:"renderArea",value:function(r,s){var l=this.props,h=l.points,n=l.baseLine,w=l.isAnimationActive,T=this.state,E=T.prevPoints,z=T.prevBaseLine,k=T.totalLength;return w&&h&&h.length&&(!E&&k>0||!o0(E,h)||!o0(z,n))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(h,n,r,s)}},{key:"render",value:function(){var r,s=this.props,l=s.hide,h=s.dot,n=s.points,w=s.className,T=s.top,E=s.left,z=s.xAxis,k=s.yAxis,U=s.width,q=s.height,H=s.isAnimationActive,$=s.id;if(l||!n||!n.length)return null;var Q=this.state.isAnimationFinished,ne=n.length===1,de=hi("recharts-area",w),ge=z&&z.allowDataOverflow,fe=k&&k.allowDataOverflow,_e=ge||fe,me=si($)?this.id:$,Ae=(r=fn(h,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},Te=Ae.r,Oe=Te===void 0?3:Te,ie=Ae.strokeWidth,we=ie===void 0?2:ie,Me=CK(h)?h:{},Ve=Me.clipDot,Ie=Ve===void 0?!0:Ve,Ue=Oe*2+we;return It.createElement(Ii,{className:de},ge||fe?It.createElement("defs",null,It.createElement("clipPath",{id:"clipPath-".concat(me)},It.createElement("rect",{x:ge?E:E-U/2,y:fe?T:T-q/2,width:ge?U:U*2,height:fe?q:q*2})),!Ie&&It.createElement("clipPath",{id:"clipPath-dots-".concat(me)},It.createElement("rect",{x:E-Ue/2,y:T-Ue/2,width:U+Ue,height:q+Ue}))):null,ne?null:this.renderArea(_e,me),(h||ne)&&this.renderDots(_e,Ie,me),(!H||Q)&&bp.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(rt.PureComponent);CX=Uf;Am(Uf,"displayName","Area");Am(Uf,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Fg.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Am(Uf,"getBaseValue",function(t,e,a,r){var s=t.layout,l=t.baseValue,h=e.props.baseValue,n=h??l;if(mr(n)&&typeof n=="number")return n;var w=s==="horizontal"?r:a,T=w.scale.domain();if(w.type==="number"){var E=Math.max(T[0],T[1]),z=Math.min(T[0],T[1]);return n==="dataMin"?z:n==="dataMax"||E<0?E:Math.max(Math.min(T[0],T[1]),0)}return n==="dataMin"?T[0]:n==="dataMax"?T[1]:T[0]});Am(Uf,"getComposedData",function(t){var e=t.props,a=t.item,r=t.xAxis,s=t.yAxis,l=t.xAxisTicks,h=t.yAxisTicks,n=t.bandSize,w=t.dataKey,T=t.stackedData,E=t.dataStartIndex,z=t.displayedData,k=t.offset,U=e.layout,q=T&&T.length,H=CX.getBaseValue(e,a,r,s),$=U==="horizontal",Q=!1,ne=z.map(function(ge,fe){var _e;q?_e=T[E+fe]:(_e=Ul(ge,w),Array.isArray(_e)?Q=!0:_e=[H,_e]);var me=_e[1]==null||q&&Ul(ge,w)==null;return $?{x:Ub({axis:r,ticks:l,bandSize:n,entry:ge,index:fe}),y:me?null:s.scale(_e[1]),value:_e,payload:ge}:{x:me?null:r.scale(_e[1]),y:Ub({axis:s,ticks:h,bandSize:n,entry:ge,index:fe}),value:_e,payload:ge}}),de;return q||Q?de=ne.map(function(ge){var fe=Array.isArray(ge.value)?ge.value[0]:null;return $?{x:ge.x,y:fe!=null&&ge.y!=null?s.scale(fe):null}:{x:fe!=null?r.scale(fe):null,y:ge.y}}):de=$?s.scale(H):r.scale(H),dg({points:ne,baseLine:de,layout:U,isRange:Q},k)});Am(Uf,"renderDotItem",function(t,e){var a;if(It.isValidElement(t))a=It.cloneElement(t,e);else if(Gn(t))a=t(e);else{var r=hi("recharts-area-dot",typeof t!="boolean"?t.className:""),s=e.key,l=bX(e,bSe);a=It.createElement(bT,ZA({},l,{key:s,className:r}))}return a});function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(t)}function MSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ISe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VX(r.key),r)}}function LSe(t,e,a){return e&&ISe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function FSe(t,e,a){return e=cx(e),USe(t,EX()?Reflect.construct(e,a||[],cx(t).constructor):e.apply(t,a))}function USe(t,e){if(e&&(Tv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kSe(t)}function kSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EX=function(){return!!t})()}function cx(t){return cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},cx(t)}function BSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cM(t,e)}function cM(t,e){return cM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},cM(t,e)}function NX(t,e,a){return e=VX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function VX(t){var e=GSe(t,"string");return Tv(e)=="symbol"?e:e+""}function GSe(t,e){if(Tv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Tv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function dM(){return dM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},dM.apply(this,arguments)}function jSe(t){var e=t.xAxisId,a=s4(),r=o4(),s=dX(e);return s==null?null:It.createElement(qv,dM({},s,{className:hi("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(h){return oy(h,!0)}}))}var Rh=function(t){function e(){return MSe(this,e),FSe(this,e,arguments)}return BSe(e,t),LSe(e,[{key:"render",value:function(){return It.createElement(jSe,this.props)}}])}(It.Component);NX(Rh,"displayName","XAxis");NX(Rh,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}function ZSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qSe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DX(r.key),r)}}function HSe(t,e,a){return e&&qSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Se(t,e,a){return e=dx(e),KSe(t,zX()?Reflect.construct(e,a||[],dx(t).constructor):e.apply(t,a))}function KSe(t,e){if(e&&(Sv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WSe(t)}function WSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zX=function(){return!!t})()}function dx(t){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},dx(t)}function YSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hM(t,e)}function hM(t,e){return hM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},hM(t,e)}function OX(t,e,a){return e=DX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function DX(t){var e=XSe(t,"string");return Sv(e)=="symbol"?e:e+""}function XSe(t,e){if(Sv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fM(){return fM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fM.apply(this,arguments)}var JSe=function(e){var a=e.yAxisId,r=s4(),s=o4(),l=hX(a);return l==null?null:It.createElement(qv,fM({},l,{className:hi("recharts-".concat(l.axisType," ").concat(l.axisType),l.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(n){return oy(n,!0)}}))},Th=function(t){function e(){return ZSe(this,e),$Se(this,e,arguments)}return YSe(e,t),HSe(e,[{key:"render",value:function(){return It.createElement(JSe,this.props)}}])}(It.Component);OX(Th,"displayName","YAxis");OX(Th,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function p9(t){return aCe(t)||tCe(t)||eCe(t)||QSe()}function QSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eCe(t,e){if(t){if(typeof t=="string")return pM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pM(t,e)}}function tCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aCe(t){if(Array.isArray(t))return pM(t)}function pM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var mM=function(e,a,r,s,l){var h=of(e,u4),n=of(e,M2),w=[].concat(p9(h),p9(n)),T=of(e,L2),E="".concat(s,"Id"),z=s[0],k=a;if(w.length&&(k=w.reduce(function(H,$){if($.props[E]===r&&Sm($.props,"extendDomain")&&mr($.props[z])){var Q=$.props[z];return[Math.min(H[0],Q),Math.max(H[1],Q)]}return H},k)),T.length){var U="".concat(z,"1"),q="".concat(z,"2");k=T.reduce(function(H,$){if($.props[E]===r&&Sm($.props,"extendDomain")&&mr($.props[U])&&mr($.props[q])){var Q=$.props[U],ne=$.props[q];return[Math.min(H[0],Q,ne),Math.max(H[1],Q,ne)]}return H},k)}return l&&l.length&&(k=l.reduce(function(H,$){return mr($)?[Math.min(H[0],$),Math.max(H[1],$)]:H},k)),k},bO={exports:{}},m9;function rCe(){return m9||(m9=1,function(t){var e=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function s(w,T,E){this.fn=w,this.context=T,this.once=E||!1}function l(w,T,E,z,k){if(typeof E!="function")throw new TypeError("The listener must be a function");var U=new s(E,z||w,k),q=a?a+T:T;return w._events[q]?w._events[q].fn?w._events[q]=[w._events[q],U]:w._events[q].push(U):(w._events[q]=U,w._eventsCount++),w}function h(w,T){--w._eventsCount===0?w._events=new r:delete w._events[T]}function n(){this._events=new r,this._eventsCount=0}n.prototype.eventNames=function(){var T=[],E,z;if(this._eventsCount===0)return T;for(z in E=this._events)e.call(E,z)&&T.push(a?z.slice(1):z);return Object.getOwnPropertySymbols?T.concat(Object.getOwnPropertySymbols(E)):T},n.prototype.listeners=function(T){var E=a?a+T:T,z=this._events[E];if(!z)return[];if(z.fn)return[z.fn];for(var k=0,U=z.length,q=new Array(U);k<U;k++)q[k]=z[k].fn;return q},n.prototype.listenerCount=function(T){var E=a?a+T:T,z=this._events[E];return z?z.fn?1:z.length:0},n.prototype.emit=function(T,E,z,k,U,q){var H=a?a+T:T;if(!this._events[H])return!1;var $=this._events[H],Q=arguments.length,ne,de;if($.fn){switch($.once&&this.removeListener(T,$.fn,void 0,!0),Q){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,E),!0;case 3:return $.fn.call($.context,E,z),!0;case 4:return $.fn.call($.context,E,z,k),!0;case 5:return $.fn.call($.context,E,z,k,U),!0;case 6:return $.fn.call($.context,E,z,k,U,q),!0}for(de=1,ne=new Array(Q-1);de<Q;de++)ne[de-1]=arguments[de];$.fn.apply($.context,ne)}else{var ge=$.length,fe;for(de=0;de<ge;de++)switch($[de].once&&this.removeListener(T,$[de].fn,void 0,!0),Q){case 1:$[de].fn.call($[de].context);break;case 2:$[de].fn.call($[de].context,E);break;case 3:$[de].fn.call($[de].context,E,z);break;case 4:$[de].fn.call($[de].context,E,z,k);break;default:if(!ne)for(fe=1,ne=new Array(Q-1);fe<Q;fe++)ne[fe-1]=arguments[fe];$[de].fn.apply($[de].context,ne)}}return!0},n.prototype.on=function(T,E,z){return l(this,T,E,z,!1)},n.prototype.once=function(T,E,z){return l(this,T,E,z,!0)},n.prototype.removeListener=function(T,E,z,k){var U=a?a+T:T;if(!this._events[U])return this;if(!E)return h(this,U),this;var q=this._events[U];if(q.fn)q.fn===E&&(!k||q.once)&&(!z||q.context===z)&&h(this,U);else{for(var H=0,$=[],Q=q.length;H<Q;H++)(q[H].fn!==E||k&&!q[H].once||z&&q[H].context!==z)&&$.push(q[H]);$.length?this._events[U]=$.length===1?$[0]:$:h(this,U)}return this},n.prototype.removeAllListeners=function(T){var E;return T?(E=a?a+T:T,this._events[E]&&h(this,E)):(this._events=new r,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=a,n.EventEmitter=n,t.exports=n}(bO)),bO.exports}var nCe=rCe();const iCe=Xi(nCe);var xO=new iCe,PO="recharts.syncMouseEvents";function GR(t){"@babel/helpers - typeof";return GR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GR(t)}function sCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oCe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MX(r.key),r)}}function lCe(t,e,a){return e&&oCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function EO(t,e,a){return e=MX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function MX(t){var e=uCe(t,"string");return GR(e)=="symbol"?e:e+""}function uCe(t,e){if(GR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(GR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cCe=function(){function t(){sCe(this,t),EO(this,"activeIndex",0),EO(this,"coordinateList",[]),EO(this,"layout","horizontal")}return lCe(t,[{key:"setDetails",value:function(a){var r,s=a.coordinateList,l=s===void 0?null:s,h=a.container,n=h===void 0?null:h,w=a.layout,T=w===void 0?null:w,E=a.offset,z=E===void 0?null:E,k=a.mouseHandlerCallback,U=k===void 0?null:k;this.coordinateList=(r=l??this.coordinateList)!==null&&r!==void 0?r:[],this.container=n??this.container,this.layout=T??this.layout,this.offset=z??this.offset,this.mouseHandlerCallback=U??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),l=s.x,h=s.y,n=s.height,w=this.coordinateList[this.activeIndex].coordinate,T=((a=window)===null||a===void 0?void 0:a.scrollX)||0,E=((r=window)===null||r===void 0?void 0:r.scrollY)||0,z=l+w+T,k=h+this.offset.top+n/2+E;this.mouseHandlerCallback({pageX:z,pageY:k})}}}])}();function dCe(t,e,a){if(a==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&mr(r)&&mr(s))return!0}return!1}function hCe(t,e,a,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:a.left+.5,y:t==="horizontal"?a.top+.5:e.y-s,width:t==="horizontal"?r:a.width-1,height:t==="horizontal"?a.height-1:r}}function IX(t){var e=t.cx,a=t.cy,r=t.radius,s=t.startAngle,l=t.endAngle,h=wo(e,a,r,s),n=wo(e,a,r,l);return{points:[h,n],cx:e,cy:a,radius:r,startAngle:s,endAngle:l}}function fCe(t,e,a){var r,s,l,h;if(t==="horizontal")r=e.x,l=r,s=a.top,h=a.top+a.height;else if(t==="vertical")s=e.y,h=s,r=a.left,l=a.left+a.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var n=e.cx,w=e.cy,T=e.innerRadius,E=e.outerRadius,z=e.angle,k=wo(n,w,T,z),U=wo(n,w,E,z);r=k.x,s=k.y,l=U.x,h=U.y}else return IX(e);return[{x:r,y:s},{x:l,y:h}]}function jR(t){"@babel/helpers - typeof";return jR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jR(t)}function y9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function uC(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?y9(Object(a),!0).forEach(function(r){pCe(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function pCe(t,e,a){return e=mCe(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function mCe(t){var e=yCe(t,"string");return jR(e)=="symbol"?e:e+""}function yCe(t,e){if(jR(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(jR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gCe(t){var e,a,r=t.element,s=t.tooltipEventType,l=t.isActive,h=t.activeCoordinate,n=t.activePayload,w=t.offset,T=t.activeTooltipIndex,E=t.tooltipAxisBandSize,z=t.layout,k=t.chartName,U=(e=r.props.cursor)!==null&&e!==void 0?e:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!U||!l||!h||k!=="ScatterChart"&&s!=="axis")return null;var q,H=YA;if(k==="ScatterChart")q=h,H=P1e;else if(k==="BarChart")q=hCe(z,h,w,E),H=t4;else if(z==="radial"){var $=IX(h),Q=$.cx,ne=$.cy,de=$.radius,ge=$.startAngle,fe=$.endAngle;q={cx:Q,cy:ne,startAngle:ge,endAngle:fe,innerRadius:de,outerRadius:de},H=DY}else q={points:fCe(z,h,w)},H=YA;var _e=uC(uC(uC(uC({stroke:"#ccc",pointerEvents:"none"},w),q),fn(U,!1)),{},{payload:n,payloadIndex:T,className:hi("recharts-tooltip-cursor",U.className)});return rt.isValidElement(U)?rt.cloneElement(U,_e):rt.createElement(H,_e)}var ACe=["item"],_Ce=["children","className","width","height","style","compact","title","desc"];function Cv(t){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(t)}function P_(){return P_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},P_.apply(this,arguments)}function g9(t,e){return RCe(t)||wCe(t,e)||FX(t,e)||vCe()}function vCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wCe(t,e){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,s,l,h,n=[],w=!0,T=!1;try{if(l=(a=a.call(t)).next,e!==0)for(;!(w=(r=l.call(a)).done)&&(n.push(r.value),n.length!==e);w=!0);}catch(E){T=!0,s=E}finally{try{if(!w&&a.return!=null&&(h=a.return(),Object(h)!==h))return}finally{if(T)throw s}}return n}}function RCe(t){if(Array.isArray(t))return t}function A9(t,e){if(t==null)return{};var a=TCe(t,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function TCe(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function SCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CCe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UX(r.key),r)}}function bCe(t,e,a){return e&&CCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function xCe(t,e,a){return e=hx(e),PCe(t,LX()?Reflect.construct(e,a||[],hx(t).constructor):e.apply(t,a))}function PCe(t,e){if(e&&(Cv(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ECe(t)}function ECe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LX=function(){return!!t})()}function hx(t){return hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},hx(t)}function NCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yM(t,e)}function yM(t,e){return yM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},yM(t,e)}function bv(t){return OCe(t)||zCe(t)||FX(t)||VCe()}function VCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FX(t,e){if(t){if(typeof t=="string")return gM(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return gM(t,e)}}function zCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function OCe(t){if(Array.isArray(t))return gM(t)}function gM(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function _9(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),a.push.apply(a,r)}return a}function Ha(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?_9(Object(a),!0).forEach(function(r){kn(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_9(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function kn(t,e,a){return e=UX(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function UX(t){var e=DCe(t,"string");return Cv(e)=="symbol"?e:e+""}function DCe(t,e){if(Cv(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(Cv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MCe={xAxis:["bottom","top"],yAxis:["left","right"]},ICe={width:"100%",height:"100%"},kX={x:0,y:0};function cC(t){return t}var LCe=function(e,a){return a==="horizontal"?e.x:a==="vertical"?e.y:a==="centric"?e.angle:e.radius},FCe=function(e,a,r,s){var l=a.find(function(E){return E&&E.index===r});if(l){if(e==="horizontal")return{x:l.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:l.coordinate};if(e==="centric"){var h=l.coordinate,n=s.radius;return Ha(Ha(Ha({},s),wo(s.cx,s.cy,n,h)),{},{angle:h,radius:n})}var w=l.coordinate,T=s.angle;return Ha(Ha(Ha({},s),wo(s.cx,s.cy,w,T)),{},{angle:T,radius:w})}return kX},F2=function(e,a){var r=a.graphicalItems,s=a.dataStartIndex,l=a.dataEndIndex,h=(r??[]).reduce(function(n,w){var T=w.props.data;return T&&T.length?[].concat(bv(n),bv(T)):n},[]);return h.length>0?h:e&&e.length&&mr(s)&&mr(l)?e.slice(s,l+1):[]};function BX(t){return t==="number"?[0,"auto"]:void 0}var AM=function(e,a,r,s){var l=e.graphicalItems,h=e.tooltipAxis,n=F2(a,e);return r<0||!l||!l.length||r>=n.length?null:l.reduce(function(w,T){var E,z=(E=T.props.data)!==null&&E!==void 0?E:a;z&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(z=z.slice(e.dataStartIndex,e.dataEndIndex+1));var k;if(h.dataKey&&!h.allowDuplicatedCategory){var U=z===void 0?n:z;k=pb(U,h.dataKey,s)}else k=z&&z[r]||n[r];return k?[].concat(bv(w),[PY(T,k)]):w},[])},v9=function(e,a,r,s){var l=s||{x:e.chartX,y:e.chartY},h=LCe(l,r),n=e.orderedTooltipTicks,w=e.tooltipAxis,T=e.tooltipTicks,E=QAe(h,n,T,w);if(E>=0&&T){var z=T[E]&&T[E].value,k=AM(e,a,E,z),U=FCe(r,n,E,l);return{activeTooltipIndex:E,activeLabel:z,activePayload:k,activeCoordinate:U}}return null},UCe=function(e,a){var r=a.axes,s=a.graphicalItems,l=a.axisType,h=a.axisIdKey,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,E=e.layout,z=e.children,k=e.stackOffset,U=RY(E,l);return r.reduce(function(q,H){var $,Q=H.type.defaultProps!==void 0?Ha(Ha({},H.type.defaultProps),H.props):H.props,ne=Q.type,de=Q.dataKey,ge=Q.allowDataOverflow,fe=Q.allowDuplicatedCategory,_e=Q.scale,me=Q.ticks,Ae=Q.includeHidden,Te=Q[h];if(q[Te])return q;var Oe=F2(e.data,{graphicalItems:s.filter(function(ye){var ze,We=h in ye.props?ye.props[h]:(ze=ye.type.defaultProps)===null||ze===void 0?void 0:ze[h];return We===Te}),dataStartIndex:w,dataEndIndex:T}),ie=Oe.length,we,Me,Ve;dCe(Q.domain,ge,ne)&&(we=VD(Q.domain,null,ge),U&&(ne==="number"||_e!=="auto")&&(Ve=Iw(Oe,de,"category")));var Ie=BX(ne);if(!we||we.length===0){var Ue,Be=(Ue=Q.domain)!==null&&Ue!==void 0?Ue:Ie;if(de){if(we=Iw(Oe,de,ne),ne==="category"&&U){var ke=Kce(we);fe&&ke?(Me=we,we=Jb(0,ie)):fe||(we=A7(Be,we,H).reduce(function(ye,ze){return ye.indexOf(ze)>=0?ye:[].concat(bv(ye),[ze])},[]))}else if(ne==="category")fe?we=we.filter(function(ye){return ye!==""&&!si(ye)}):we=A7(Be,we,H).reduce(function(ye,ze){return ye.indexOf(ze)>=0||ze===""||si(ze)?ye:[].concat(bv(ye),[ze])},[]);else if(ne==="number"){var Je=n0e(Oe,s.filter(function(ye){var ze,We,lt=h in ye.props?ye.props[h]:(ze=ye.type.defaultProps)===null||ze===void 0?void 0:ze[h],vt="hide"in ye.props?ye.props.hide:(We=ye.type.defaultProps)===null||We===void 0?void 0:We.hide;return lt===Te&&(Ae||!vt)}),de,l,E);Je&&(we=Je)}U&&(ne==="number"||_e!=="auto")&&(Ve=Iw(Oe,de,"category"))}else U?we=Jb(0,ie):n&&n[Te]&&n[Te].hasStack&&ne==="number"?we=k==="expand"?[0,1]:xY(n[Te].stackGroups,w,T):we=wY(Oe,s.filter(function(ye){var ze=h in ye.props?ye.props[h]:ye.type.defaultProps[h],We="hide"in ye.props?ye.props.hide:ye.type.defaultProps.hide;return ze===Te&&(Ae||!We)}),ne,E,!0);if(ne==="number")we=mM(z,we,Te,l,me),Be&&(we=VD(Be,we,ge));else if(ne==="category"&&Be){var Le=Be,qe=we.every(function(ye){return Le.indexOf(ye)>=0});qe&&(we=Le)}}return Ha(Ha({},q),{},kn({},Te,Ha(Ha({},Q),{},{axisType:l,domain:we,categoricalDomain:Ve,duplicateDomain:Me,originalDomain:($=Q.domain)!==null&&$!==void 0?$:Ie,isCategorical:U,layout:E})))},{})},kCe=function(e,a){var r=a.graphicalItems,s=a.Axis,l=a.axisType,h=a.axisIdKey,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,E=e.layout,z=e.children,k=F2(e.data,{graphicalItems:r,dataStartIndex:w,dataEndIndex:T}),U=k.length,q=RY(E,l),H=-1;return r.reduce(function($,Q){var ne=Q.type.defaultProps!==void 0?Ha(Ha({},Q.type.defaultProps),Q.props):Q.props,de=ne[h],ge=BX("number");if(!$[de]){H++;var fe;return q?fe=Jb(0,U):n&&n[de]&&n[de].hasStack?(fe=xY(n[de].stackGroups,w,T),fe=mM(z,fe,de,l)):(fe=VD(ge,wY(k,r.filter(function(_e){var me,Ae,Te=h in _e.props?_e.props[h]:(me=_e.type.defaultProps)===null||me===void 0?void 0:me[h],Oe="hide"in _e.props?_e.props.hide:(Ae=_e.type.defaultProps)===null||Ae===void 0?void 0:Ae.hide;return Te===de&&!Oe}),"number",E),s.defaultProps.allowDataOverflow),fe=mM(z,fe,de,l)),Ha(Ha({},$),{},kn({},de,Ha(Ha({axisType:l},s.defaultProps),{},{hide:!0,orientation:sf(MCe,"".concat(l,".").concat(H%2),null),domain:fe,originalDomain:ge,isCategorical:q,layout:E})))}return $},{})},BCe=function(e,a){var r=a.axisType,s=r===void 0?"xAxis":r,l=a.AxisComp,h=a.graphicalItems,n=a.stackGroups,w=a.dataStartIndex,T=a.dataEndIndex,E=e.children,z="".concat(s,"Id"),k=of(E,l),U={};return k&&k.length?U=UCe(e,{axes:k,graphicalItems:h,axisType:s,axisIdKey:z,stackGroups:n,dataStartIndex:w,dataEndIndex:T}):h&&h.length&&(U=kCe(e,{Axis:l,graphicalItems:h,axisType:s,axisIdKey:z,stackGroups:n,dataStartIndex:w,dataEndIndex:T})),U},GCe=function(e){var a=gg(e),r=oy(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:P3(r,function(s){return s.coordinate}),tooltipAxis:a,tooltipAxisBandSize:kb(a,r)}},w9=function(e){var a=e.children,r=e.defaultShowTooltip,s=Qh(a,mv),l=0,h=0;return e.data&&e.data.length!==0&&(h=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(l=s.props.startIndex),s.props.endIndex>=0&&(h=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:l,dataEndIndex:h,activeTooltipIndex:-1,isTooltipActive:!!r}},jCe=function(e){return!e||!e.length?!1:e.some(function(a){var r=cy(a&&a.type);return r&&r.indexOf("Bar")>=0})},R9=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ZCe=function(e,a){var r=e.props,s=e.graphicalItems,l=e.xAxisMap,h=l===void 0?{}:l,n=e.yAxisMap,w=n===void 0?{}:n,T=r.width,E=r.height,z=r.children,k=r.margin||{},U=Qh(z,mv),q=Qh(z,If),H=Object.keys(w).reduce(function(fe,_e){var me=w[_e],Ae=me.orientation;return!me.mirror&&!me.hide?Ha(Ha({},fe),{},kn({},Ae,fe[Ae]+me.width)):fe},{left:k.left||0,right:k.right||0}),$=Object.keys(h).reduce(function(fe,_e){var me=h[_e],Ae=me.orientation;return!me.mirror&&!me.hide?Ha(Ha({},fe),{},kn({},Ae,sf(fe,"".concat(Ae))+me.height)):fe},{top:k.top||0,bottom:k.bottom||0}),Q=Ha(Ha({},$),H),ne=Q.bottom;U&&(Q.bottom+=U.props.height||mv.defaultProps.height),q&&a&&(Q=a0e(Q,s,r,a));var de=T-Q.left-Q.right,ge=E-Q.top-Q.bottom;return Ha(Ha({brushBottom:ne},Q),{},{width:Math.max(de,0),height:Math.max(ge,0)})},qCe=function(e,a){if(a==="xAxis")return e[a].width;if(a==="yAxis")return e[a].height},U2=function(e){var a=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,l=s===void 0?"axis":s,h=e.validateTooltipEventTypes,n=h===void 0?["axis"]:h,w=e.axisComponents,T=e.legendContent,E=e.formatAxisMap,z=e.defaultProps,k=function(Q,ne){var de=ne.graphicalItems,ge=ne.stackGroups,fe=ne.offset,_e=ne.updateId,me=ne.dataStartIndex,Ae=ne.dataEndIndex,Te=Q.barSize,Oe=Q.layout,ie=Q.barGap,we=Q.barCategoryGap,Me=Q.maxBarSize,Ve=R9(Oe),Ie=Ve.numericAxisName,Ue=Ve.cateAxisName,Be=jCe(de),ke=[];return de.forEach(function(Je,Le){var qe=F2(Q.data,{graphicalItems:[Je],dataStartIndex:me,dataEndIndex:Ae}),ye=Je.type.defaultProps!==void 0?Ha(Ha({},Je.type.defaultProps),Je.props):Je.props,ze=ye.dataKey,We=ye.maxBarSize,lt=ye["".concat(Ie,"Id")],vt=ye["".concat(Ue,"Id")],Ot={},dt=w.reduce(function(cr,ur){var Pr=ne["".concat(ur.axisType,"Map")],ka=ye["".concat(ur.axisType,"Id")];Pr&&Pr[ka]||ur.axisType==="zAxis"||u0();var jr=Pr[ka];return Ha(Ha({},cr),{},kn(kn({},ur.axisType,jr),"".concat(ur.axisType,"Ticks"),oy(jr)))},Ot),pt=dt[Ue],ve=dt["".concat(Ue,"Ticks")],ea=ge&&ge[lt]&&ge[lt].hasStack&&f0e(Je,ge[lt].stackGroups),Kt=cy(Je.type).indexOf("Bar")>=0,Ea=kb(pt,ve),Bt=[],la=Be&&e0e({barSize:Te,stackGroups:ge,totalSize:qCe(dt,Ue)});if(Kt){var St,vr,Va=si(We)?Me:We,za=(St=(vr=kb(pt,ve,!0))!==null&&vr!==void 0?vr:Va)!==null&&St!==void 0?St:0;Bt=t0e({barGap:ie,barCategoryGap:we,bandSize:za!==Ea?za:Ea,sizeList:la[vt],maxBarSize:Va}),za!==Ea&&(Bt=Bt.map(function(cr){return Ha(Ha({},cr),{},{position:Ha(Ha({},cr.position),{},{offset:cr.position.offset-za/2})})}))}var nr=Je&&Je.type&&Je.type.getComposedData;nr&&ke.push({props:Ha(Ha({},nr(Ha(Ha({},dt),{},{displayedData:qe,props:Q,dataKey:ze,item:Je,bandSize:Ea,barPosition:Bt,offset:fe,stackedData:ea,layout:Oe,dataStartIndex:me,dataEndIndex:Ae}))),{},kn(kn(kn({key:Je.key||"item-".concat(Le)},Ie,dt[Ie]),Ue,dt[Ue]),"animationId",_e)),childIndex:ide(Je,Q.children),item:Je})}),ke},U=function(Q,ne){var de=Q.props,ge=Q.dataStartIndex,fe=Q.dataEndIndex,_e=Q.updateId;if(!Ok({props:de}))return null;var me=de.children,Ae=de.layout,Te=de.stackOffset,Oe=de.data,ie=de.reverseStackOrder,we=R9(Ae),Me=we.numericAxisName,Ve=we.cateAxisName,Ie=of(me,r),Ue=d0e(Oe,Ie,"".concat(Me,"Id"),"".concat(Ve,"Id"),Te,ie),Be=w.reduce(function(ye,ze){var We="".concat(ze.axisType,"Map");return Ha(Ha({},ye),{},kn({},We,BCe(de,Ha(Ha({},ze),{},{graphicalItems:Ie,stackGroups:ze.axisType===Me&&Ue,dataStartIndex:ge,dataEndIndex:fe}))))},{}),ke=ZCe(Ha(Ha({},Be),{},{props:de,graphicalItems:Ie}),ne==null?void 0:ne.legendBBox);Object.keys(Be).forEach(function(ye){Be[ye]=E(de,Be[ye],ke,ye.replace("Map",""),a)});var Je=Be["".concat(Ve,"Map")],Le=GCe(Je),qe=k(de,Ha(Ha({},Be),{},{dataStartIndex:ge,dataEndIndex:fe,updateId:_e,graphicalItems:Ie,stackGroups:Ue,offset:ke}));return Ha(Ha({formattedGraphicalItems:qe,graphicalItems:Ie,offset:ke,stackGroups:Ue},Le),Be)},q=function($){function Q(ne){var de,ge,fe;return SCe(this,Q),fe=xCe(this,Q,[ne]),kn(fe,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),kn(fe,"accessibilityManager",new cCe),kn(fe,"handleLegendBBoxUpdate",function(_e){if(_e){var me=fe.state,Ae=me.dataStartIndex,Te=me.dataEndIndex,Oe=me.updateId;fe.setState(Ha({legendBBox:_e},U({props:fe.props,dataStartIndex:Ae,dataEndIndex:Te,updateId:Oe},Ha(Ha({},fe.state),{},{legendBBox:_e}))))}}),kn(fe,"handleReceiveSyncEvent",function(_e,me,Ae){if(fe.props.syncId===_e){if(Ae===fe.eventEmitterSymbol&&typeof fe.props.syncMethod!="function")return;fe.applySyncEvent(me)}}),kn(fe,"handleBrushChange",function(_e){var me=_e.startIndex,Ae=_e.endIndex;if(me!==fe.state.dataStartIndex||Ae!==fe.state.dataEndIndex){var Te=fe.state.updateId;fe.setState(function(){return Ha({dataStartIndex:me,dataEndIndex:Ae},U({props:fe.props,dataStartIndex:me,dataEndIndex:Ae,updateId:Te},fe.state))}),fe.triggerSyncEvent({dataStartIndex:me,dataEndIndex:Ae})}}),kn(fe,"handleMouseEnter",function(_e){var me=fe.getMouseInfo(_e);if(me){var Ae=Ha(Ha({},me),{},{isTooltipActive:!0});fe.setState(Ae),fe.triggerSyncEvent(Ae);var Te=fe.props.onMouseEnter;Gn(Te)&&Te(Ae,_e)}}),kn(fe,"triggeredAfterMouseMove",function(_e){var me=fe.getMouseInfo(_e),Ae=me?Ha(Ha({},me),{},{isTooltipActive:!0}):{isTooltipActive:!1};fe.setState(Ae),fe.triggerSyncEvent(Ae);var Te=fe.props.onMouseMove;Gn(Te)&&Te(Ae,_e)}),kn(fe,"handleItemMouseEnter",function(_e){fe.setState(function(){return{isTooltipActive:!0,activeItem:_e,activePayload:_e.tooltipPayload,activeCoordinate:_e.tooltipPosition||{x:_e.cx,y:_e.cy}}})}),kn(fe,"handleItemMouseLeave",function(){fe.setState(function(){return{isTooltipActive:!1}})}),kn(fe,"handleMouseMove",function(_e){_e.persist(),fe.throttleTriggeredAfterMouseMove(_e)}),kn(fe,"handleMouseLeave",function(_e){fe.throttleTriggeredAfterMouseMove.cancel();var me={isTooltipActive:!1};fe.setState(me),fe.triggerSyncEvent(me);var Ae=fe.props.onMouseLeave;Gn(Ae)&&Ae(me,_e)}),kn(fe,"handleOuterEvent",function(_e){var me=nde(_e),Ae=sf(fe.props,"".concat(me));if(me&&Gn(Ae)){var Te,Oe;/.*touch.*/i.test(me)?Oe=fe.getMouseInfo(_e.changedTouches[0]):Oe=fe.getMouseInfo(_e),Ae((Te=Oe)!==null&&Te!==void 0?Te:{},_e)}}),kn(fe,"handleClick",function(_e){var me=fe.getMouseInfo(_e);if(me){var Ae=Ha(Ha({},me),{},{isTooltipActive:!0});fe.setState(Ae),fe.triggerSyncEvent(Ae);var Te=fe.props.onClick;Gn(Te)&&Te(Ae,_e)}}),kn(fe,"handleMouseDown",function(_e){var me=fe.props.onMouseDown;if(Gn(me)){var Ae=fe.getMouseInfo(_e);me(Ae,_e)}}),kn(fe,"handleMouseUp",function(_e){var me=fe.props.onMouseUp;if(Gn(me)){var Ae=fe.getMouseInfo(_e);me(Ae,_e)}}),kn(fe,"handleTouchMove",function(_e){_e.changedTouches!=null&&_e.changedTouches.length>0&&fe.throttleTriggeredAfterMouseMove(_e.changedTouches[0])}),kn(fe,"handleTouchStart",function(_e){_e.changedTouches!=null&&_e.changedTouches.length>0&&fe.handleMouseDown(_e.changedTouches[0])}),kn(fe,"handleTouchEnd",function(_e){_e.changedTouches!=null&&_e.changedTouches.length>0&&fe.handleMouseUp(_e.changedTouches[0])}),kn(fe,"handleDoubleClick",function(_e){var me=fe.props.onDoubleClick;if(Gn(me)){var Ae=fe.getMouseInfo(_e);me(Ae,_e)}}),kn(fe,"handleContextMenu",function(_e){var me=fe.props.onContextMenu;if(Gn(me)){var Ae=fe.getMouseInfo(_e);me(Ae,_e)}}),kn(fe,"triggerSyncEvent",function(_e){fe.props.syncId!==void 0&&xO.emit(PO,fe.props.syncId,_e,fe.eventEmitterSymbol)}),kn(fe,"applySyncEvent",function(_e){var me=fe.props,Ae=me.layout,Te=me.syncMethod,Oe=fe.state.updateId,ie=_e.dataStartIndex,we=_e.dataEndIndex;if(_e.dataStartIndex!==void 0||_e.dataEndIndex!==void 0)fe.setState(Ha({dataStartIndex:ie,dataEndIndex:we},U({props:fe.props,dataStartIndex:ie,dataEndIndex:we,updateId:Oe},fe.state)));else if(_e.activeTooltipIndex!==void 0){var Me=_e.chartX,Ve=_e.chartY,Ie=_e.activeTooltipIndex,Ue=fe.state,Be=Ue.offset,ke=Ue.tooltipTicks;if(!Be)return;if(typeof Te=="function")Ie=Te(ke,_e);else if(Te==="value"){Ie=-1;for(var Je=0;Je<ke.length;Je++)if(ke[Je].value===_e.activeLabel){Ie=Je;break}}var Le=Ha(Ha({},Be),{},{x:Be.left,y:Be.top}),qe=Math.min(Me,Le.x+Le.width),ye=Math.min(Ve,Le.y+Le.height),ze=ke[Ie]&&ke[Ie].value,We=AM(fe.state,fe.props.data,Ie),lt=ke[Ie]?{x:Ae==="horizontal"?ke[Ie].coordinate:qe,y:Ae==="horizontal"?ye:ke[Ie].coordinate}:kX;fe.setState(Ha(Ha({},_e),{},{activeLabel:ze,activeCoordinate:lt,activePayload:We,activeTooltipIndex:Ie}))}else fe.setState(_e)}),kn(fe,"renderCursor",function(_e){var me,Ae=fe.state,Te=Ae.isTooltipActive,Oe=Ae.activeCoordinate,ie=Ae.activePayload,we=Ae.offset,Me=Ae.activeTooltipIndex,Ve=Ae.tooltipAxisBandSize,Ie=fe.getTooltipEventType(),Ue=(me=_e.props.active)!==null&&me!==void 0?me:Te,Be=fe.props.layout,ke=_e.key||"_recharts-cursor";return It.createElement(gCe,{key:ke,activeCoordinate:Oe,activePayload:ie,activeTooltipIndex:Me,chartName:a,element:_e,isActive:Ue,layout:Be,offset:we,tooltipAxisBandSize:Ve,tooltipEventType:Ie})}),kn(fe,"renderPolarAxis",function(_e,me,Ae){var Te=sf(_e,"type.axisType"),Oe=sf(fe.state,"".concat(Te,"Map")),ie=_e.type.defaultProps,we=ie!==void 0?Ha(Ha({},ie),_e.props):_e.props,Me=Oe&&Oe[we["".concat(Te,"Id")]];return rt.cloneElement(_e,Ha(Ha({},Me),{},{className:hi(Te,Me.className),key:_e.key||"".concat(me,"-").concat(Ae),ticks:oy(Me,!0)}))}),kn(fe,"renderPolarGrid",function(_e){var me=_e.props,Ae=me.radialLines,Te=me.polarAngles,Oe=me.polarRadius,ie=fe.state,we=ie.radiusAxisMap,Me=ie.angleAxisMap,Ve=gg(we),Ie=gg(Me),Ue=Ie.cx,Be=Ie.cy,ke=Ie.innerRadius,Je=Ie.outerRadius;return rt.cloneElement(_e,{polarAngles:Array.isArray(Te)?Te:oy(Ie,!0).map(function(Le){return Le.coordinate}),polarRadius:Array.isArray(Oe)?Oe:oy(Ve,!0).map(function(Le){return Le.coordinate}),cx:Ue,cy:Be,innerRadius:ke,outerRadius:Je,key:_e.key||"polar-grid",radialLines:Ae})}),kn(fe,"renderLegend",function(){var _e=fe.state.formattedGraphicalItems,me=fe.props,Ae=me.children,Te=me.width,Oe=me.height,ie=fe.props.margin||{},we=Te-(ie.left||0)-(ie.right||0),Me=_Y({children:Ae,formattedGraphicalItems:_e,legendWidth:we,legendContent:T});if(!Me)return null;var Ve=Me.item,Ie=A9(Me,ACe);return rt.cloneElement(Ve,Ha(Ha({},Ie),{},{chartWidth:Te,chartHeight:Oe,margin:ie,onBBoxUpdate:fe.handleLegendBBoxUpdate}))}),kn(fe,"renderTooltip",function(){var _e,me=fe.props,Ae=me.children,Te=me.accessibilityLayer,Oe=Qh(Ae,Ou);if(!Oe)return null;var ie=fe.state,we=ie.isTooltipActive,Me=ie.activeCoordinate,Ve=ie.activePayload,Ie=ie.activeLabel,Ue=ie.offset,Be=(_e=Oe.props.active)!==null&&_e!==void 0?_e:we;return rt.cloneElement(Oe,{viewBox:Ha(Ha({},Ue),{},{x:Ue.left,y:Ue.top}),active:Be,label:Ie,payload:Be?Ve:[],coordinate:Me,accessibilityLayer:Te})}),kn(fe,"renderBrush",function(_e){var me=fe.props,Ae=me.margin,Te=me.data,Oe=fe.state,ie=Oe.offset,we=Oe.dataStartIndex,Me=Oe.dataEndIndex,Ve=Oe.updateId;return rt.cloneElement(_e,{key:_e.key||"_recharts-brush",onChange:iC(fe.handleBrushChange,_e.props.onChange),data:Te,x:mr(_e.props.x)?_e.props.x:ie.left,y:mr(_e.props.y)?_e.props.y:ie.top+ie.height+ie.brushBottom-(Ae.bottom||0),width:mr(_e.props.width)?_e.props.width:ie.width,startIndex:we,endIndex:Me,updateId:"brush-".concat(Ve)})}),kn(fe,"renderReferenceElement",function(_e,me,Ae){if(!_e)return null;var Te=fe,Oe=Te.clipPathId,ie=fe.state,we=ie.xAxisMap,Me=ie.yAxisMap,Ve=ie.offset,Ie=_e.type.defaultProps||{},Ue=_e.props,Be=Ue.xAxisId,ke=Be===void 0?Ie.xAxisId:Be,Je=Ue.yAxisId,Le=Je===void 0?Ie.yAxisId:Je;return rt.cloneElement(_e,{key:_e.key||"".concat(me,"-").concat(Ae),xAxis:we[ke],yAxis:Me[Le],viewBox:{x:Ve.left,y:Ve.top,width:Ve.width,height:Ve.height},clipPathId:Oe})}),kn(fe,"renderActivePoints",function(_e){var me=_e.item,Ae=_e.activePoint,Te=_e.basePoint,Oe=_e.childIndex,ie=_e.isRange,we=[],Me=me.props.key,Ve=me.item.type.defaultProps!==void 0?Ha(Ha({},me.item.type.defaultProps),me.item.props):me.item.props,Ie=Ve.activeDot,Ue=Ve.dataKey,Be=Ha(Ha({index:Oe,dataKey:Ue,cx:Ae.x,cy:Ae.y,r:4,fill:e4(me.item),strokeWidth:2,stroke:"#fff",payload:Ae.payload,value:Ae.value},fn(Ie,!1)),mb(Ie));return we.push(Q.renderActiveDot(Ie,Be,"".concat(Me,"-activePoint-").concat(Oe))),Te?we.push(Q.renderActiveDot(Ie,Ha(Ha({},Be),{},{cx:Te.x,cy:Te.y}),"".concat(Me,"-basePoint-").concat(Oe))):ie&&we.push(null),we}),kn(fe,"renderGraphicChild",function(_e,me,Ae){var Te=fe.filterFormatItem(_e,me,Ae);if(!Te)return null;var Oe=fe.getTooltipEventType(),ie=fe.state,we=ie.isTooltipActive,Me=ie.tooltipAxis,Ve=ie.activeTooltipIndex,Ie=ie.activeLabel,Ue=fe.props.children,Be=Qh(Ue,Ou),ke=Te.props,Je=ke.points,Le=ke.isRange,qe=ke.baseLine,ye=Te.item.type.defaultProps!==void 0?Ha(Ha({},Te.item.type.defaultProps),Te.item.props):Te.item.props,ze=ye.activeDot,We=ye.hide,lt=ye.activeBar,vt=ye.activeShape,Ot=!!(!We&&we&&Be&&(ze||lt||vt)),dt={};Oe!=="axis"&&Be&&Be.props.trigger==="click"?dt={onClick:iC(fe.handleItemMouseEnter,_e.props.onClick)}:Oe!=="axis"&&(dt={onMouseLeave:iC(fe.handleItemMouseLeave,_e.props.onMouseLeave),onMouseEnter:iC(fe.handleItemMouseEnter,_e.props.onMouseEnter)});var pt=rt.cloneElement(_e,Ha(Ha({},Te.props),dt));function ve(ur){return typeof Me.dataKey=="function"?Me.dataKey(ur.payload):null}if(Ot)if(Ve>=0){var ea,Kt;if(Me.dataKey&&!Me.allowDuplicatedCategory){var Ea=typeof Me.dataKey=="function"?ve:"payload.".concat(Me.dataKey.toString());ea=pb(Je,Ea,Ie),Kt=Le&&qe&&pb(qe,Ea,Ie)}else ea=Je==null?void 0:Je[Ve],Kt=Le&&qe&&qe[Ve];if(vt||lt){var Bt=_e.props.activeIndex!==void 0?_e.props.activeIndex:Ve;return[rt.cloneElement(_e,Ha(Ha(Ha({},Te.props),dt),{},{activeIndex:Bt})),null,null]}if(!si(ea))return[pt].concat(bv(fe.renderActivePoints({item:Te,activePoint:ea,basePoint:Kt,childIndex:Ve,isRange:Le})))}else{var la,St=(la=fe.getItemByXY(fe.state.activeCoordinate))!==null&&la!==void 0?la:{graphicalItem:pt},vr=St.graphicalItem,Va=vr.item,za=Va===void 0?_e:Va,nr=vr.childIndex,cr=Ha(Ha(Ha({},Te.props),dt),{},{activeIndex:nr});return[rt.cloneElement(za,cr),null,null]}return Le?[pt,null,null]:[pt,null]}),kn(fe,"renderCustomized",function(_e,me,Ae){return rt.cloneElement(_e,Ha(Ha({key:"recharts-customized-".concat(Ae)},fe.props),fe.state))}),kn(fe,"renderMap",{CartesianGrid:{handler:cC,once:!0},ReferenceArea:{handler:fe.renderReferenceElement},ReferenceLine:{handler:cC},ReferenceDot:{handler:fe.renderReferenceElement},XAxis:{handler:cC},YAxis:{handler:cC},Brush:{handler:fe.renderBrush,once:!0},Bar:{handler:fe.renderGraphicChild},Line:{handler:fe.renderGraphicChild},Area:{handler:fe.renderGraphicChild},Radar:{handler:fe.renderGraphicChild},RadialBar:{handler:fe.renderGraphicChild},Scatter:{handler:fe.renderGraphicChild},Pie:{handler:fe.renderGraphicChild},Funnel:{handler:fe.renderGraphicChild},Tooltip:{handler:fe.renderCursor,once:!0},PolarGrid:{handler:fe.renderPolarGrid,once:!0},PolarAngleAxis:{handler:fe.renderPolarAxis},PolarRadiusAxis:{handler:fe.renderPolarAxis},Customized:{handler:fe.renderCustomized}}),fe.clipPathId="".concat((de=ne.id)!==null&&de!==void 0?de:g0("recharts"),"-clip"),fe.throttleTriggeredAfterMouseMove=AW(fe.triggeredAfterMouseMove,(ge=ne.throttleDelay)!==null&&ge!==void 0?ge:1e3/60),fe.state={},fe}return NCe(Q,$),bCe(Q,[{key:"componentDidMount",value:function(){var de,ge;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(de=this.props.margin.left)!==null&&de!==void 0?de:0,top:(ge=this.props.margin.top)!==null&&ge!==void 0?ge:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var de=this.props,ge=de.children,fe=de.data,_e=de.height,me=de.layout,Ae=Qh(ge,Ou);if(Ae){var Te=Ae.props.defaultIndex;if(!(typeof Te!="number"||Te<0||Te>this.state.tooltipTicks.length-1)){var Oe=this.state.tooltipTicks[Te]&&this.state.tooltipTicks[Te].value,ie=AM(this.state,fe,Te,Oe),we=this.state.tooltipTicks[Te].coordinate,Me=(this.state.offset.top+_e)/2,Ve=me==="horizontal",Ie=Ve?{x:we,y:Me}:{y:we,x:Me},Ue=this.state.formattedGraphicalItems.find(function(ke){var Je=ke.item;return Je.type.name==="Scatter"});Ue&&(Ie=Ha(Ha({},Ie),Ue.props.points[Te].tooltipPosition),ie=Ue.props.points[Te].tooltipPayload);var Be={activeTooltipIndex:Te,isTooltipActive:!0,activeLabel:Oe,activePayload:ie,activeCoordinate:Ie};this.setState(Be),this.renderCursor(Ae),this.accessibilityManager.setIndex(Te)}}}},{key:"getSnapshotBeforeUpdate",value:function(de,ge){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ge.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==de.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==de.margin){var fe,_e;this.accessibilityManager.setDetails({offset:{left:(fe=this.props.margin.left)!==null&&fe!==void 0?fe:0,top:(_e=this.props.margin.top)!==null&&_e!==void 0?_e:0}})}return null}},{key:"componentDidUpdate",value:function(de){Q5([Qh(de.children,Ou)],[Qh(this.props.children,Ou)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var de=Qh(this.props.children,Ou);if(de&&typeof de.props.shared=="boolean"){var ge=de.props.shared?"axis":"item";return n.indexOf(ge)>=0?ge:l}return l}},{key:"getMouseInfo",value:function(de){if(!this.container)return null;var ge=this.container,fe=ge.getBoundingClientRect(),_e=qpe(fe),me={chartX:Math.round(de.pageX-_e.left),chartY:Math.round(de.pageY-_e.top)},Ae=fe.width/ge.offsetWidth||1,Te=this.inRange(me.chartX,me.chartY,Ae);if(!Te)return null;var Oe=this.state,ie=Oe.xAxisMap,we=Oe.yAxisMap,Me=this.getTooltipEventType();if(Me!=="axis"&&ie&&we){var Ve=gg(ie).scale,Ie=gg(we).scale,Ue=Ve&&Ve.invert?Ve.invert(me.chartX):null,Be=Ie&&Ie.invert?Ie.invert(me.chartY):null;return Ha(Ha({},me),{},{xValue:Ue,yValue:Be})}var ke=v9(this.state,this.props.data,this.props.layout,Te);return ke?Ha(Ha({},me),ke):null}},{key:"inRange",value:function(de,ge){var fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_e=this.props.layout,me=de/fe,Ae=ge/fe;if(_e==="horizontal"||_e==="vertical"){var Te=this.state.offset,Oe=me>=Te.left&&me<=Te.left+Te.width&&Ae>=Te.top&&Ae<=Te.top+Te.height;return Oe?{x:me,y:Ae}:null}var ie=this.state,we=ie.angleAxisMap,Me=ie.radiusAxisMap;if(we&&Me){var Ve=gg(we);return w7({x:me,y:Ae},Ve)}return null}},{key:"parseEventsOfWrapper",value:function(){var de=this.props.children,ge=this.getTooltipEventType(),fe=Qh(de,Ou),_e={};fe&&ge==="axis"&&(fe.props.trigger==="click"?_e={onClick:this.handleClick}:_e={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var me=mb(this.props,this.handleOuterEvent);return Ha(Ha({},me),_e)}},{key:"addListener",value:function(){xO.on(PO,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){xO.removeListener(PO,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(de,ge,fe){for(var _e=this.state.formattedGraphicalItems,me=0,Ae=_e.length;me<Ae;me++){var Te=_e[me];if(Te.item===de||Te.props.key===de.key||ge===cy(Te.item.type)&&fe===Te.childIndex)return Te}return null}},{key:"renderClipPath",value:function(){var de=this.clipPathId,ge=this.state.offset,fe=ge.left,_e=ge.top,me=ge.height,Ae=ge.width;return It.createElement("defs",null,It.createElement("clipPath",{id:de},It.createElement("rect",{x:fe,y:_e,height:me,width:Ae})))}},{key:"getXScales",value:function(){var de=this.state.xAxisMap;return de?Object.entries(de).reduce(function(ge,fe){var _e=g9(fe,2),me=_e[0],Ae=_e[1];return Ha(Ha({},ge),{},kn({},me,Ae.scale))},{}):null}},{key:"getYScales",value:function(){var de=this.state.yAxisMap;return de?Object.entries(de).reduce(function(ge,fe){var _e=g9(fe,2),me=_e[0],Ae=_e[1];return Ha(Ha({},ge),{},kn({},me,Ae.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(de){var ge;return(ge=this.state.xAxisMap)===null||ge===void 0||(ge=ge[de])===null||ge===void 0?void 0:ge.scale}},{key:"getYScaleByAxisId",value:function(de){var ge;return(ge=this.state.yAxisMap)===null||ge===void 0||(ge=ge[de])===null||ge===void 0?void 0:ge.scale}},{key:"getItemByXY",value:function(de){var ge=this.state,fe=ge.formattedGraphicalItems,_e=ge.activeItem;if(fe&&fe.length)for(var me=0,Ae=fe.length;me<Ae;me++){var Te=fe[me],Oe=Te.props,ie=Te.item,we=ie.type.defaultProps!==void 0?Ha(Ha({},ie.type.defaultProps),ie.props):ie.props,Me=cy(ie.type);if(Me==="Bar"){var Ve=(Oe.data||[]).find(function(ke){return l1e(de,ke)});if(Ve)return{graphicalItem:Te,payload:Ve}}else if(Me==="RadialBar"){var Ie=(Oe.data||[]).find(function(ke){return w7(de,ke)});if(Ie)return{graphicalItem:Te,payload:Ie}}else if(V2(Te,_e)||z2(Te,_e)||LR(Te,_e)){var Ue=zwe({graphicalItem:Te,activeTooltipItem:_e,itemData:we.data}),Be=we.activeIndex===void 0?Ue:we.activeIndex;return{graphicalItem:Ha(Ha({},Te),{},{childIndex:Be}),payload:LR(Te,_e)?we.data[Ue]:Te.props.data[Ue]}}}return null}},{key:"render",value:function(){var de=this;if(!Ok(this))return null;var ge=this.props,fe=ge.children,_e=ge.className,me=ge.width,Ae=ge.height,Te=ge.style,Oe=ge.compact,ie=ge.title,we=ge.desc,Me=A9(ge,_Ce),Ve=fn(Me,!1);if(Oe)return It.createElement(Yj,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},It.createElement(tD,P_({},Ve,{width:me,height:Ae,title:ie,desc:we}),this.renderClipPath(),Mk(fe,this.renderMap)));if(this.props.accessibilityLayer){var Ie,Ue;Ve.tabIndex=(Ie=this.props.tabIndex)!==null&&Ie!==void 0?Ie:0,Ve.role=(Ue=this.props.role)!==null&&Ue!==void 0?Ue:"application",Ve.onKeyDown=function(ke){de.accessibilityManager.keyboardEvent(ke)},Ve.onFocus=function(){de.accessibilityManager.focus()}}var Be=this.parseEventsOfWrapper();return It.createElement(Yj,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},It.createElement("div",P_({className:hi("recharts-wrapper",_e),style:Ha({position:"relative",cursor:"default",width:me,height:Ae},Te)},Be,{ref:function(Je){de.container=Je}}),It.createElement(tD,P_({},Ve,{width:me,height:Ae,title:ie,desc:we,style:ICe}),this.renderClipPath(),Mk(fe,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(rt.Component);kn(q,"displayName",a),kn(q,"defaultProps",Ha({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},z)),kn(q,"getDerivedStateFromProps",function($,Q){var ne=$.dataKey,de=$.data,ge=$.children,fe=$.width,_e=$.height,me=$.layout,Ae=$.stackOffset,Te=$.margin,Oe=Q.dataStartIndex,ie=Q.dataEndIndex;if(Q.updateId===void 0){var we=w9($);return Ha(Ha(Ha({},we),{},{updateId:0},U(Ha(Ha({props:$},we),{},{updateId:0}),Q)),{},{prevDataKey:ne,prevData:de,prevWidth:fe,prevHeight:_e,prevLayout:me,prevStackOffset:Ae,prevMargin:Te,prevChildren:ge})}if(ne!==Q.prevDataKey||de!==Q.prevData||fe!==Q.prevWidth||_e!==Q.prevHeight||me!==Q.prevLayout||Ae!==Q.prevStackOffset||!F_(Te,Q.prevMargin)){var Me=w9($),Ve={chartX:Q.chartX,chartY:Q.chartY,isTooltipActive:Q.isTooltipActive},Ie=Ha(Ha({},v9(Q,de,me)),{},{updateId:Q.updateId+1}),Ue=Ha(Ha(Ha({},Me),Ve),Ie);return Ha(Ha(Ha({},Ue),U(Ha({props:$},Ue),Q)),{},{prevDataKey:ne,prevData:de,prevWidth:fe,prevHeight:_e,prevLayout:me,prevStackOffset:Ae,prevMargin:Te,prevChildren:ge})}if(!Q5(ge,Q.prevChildren)){var Be,ke,Je,Le,qe=Qh(ge,mv),ye=qe&&(Be=(ke=qe.props)===null||ke===void 0?void 0:ke.startIndex)!==null&&Be!==void 0?Be:Oe,ze=qe&&(Je=(Le=qe.props)===null||Le===void 0?void 0:Le.endIndex)!==null&&Je!==void 0?Je:ie,We=ye!==Oe||ze!==ie,lt=!si(de),vt=lt&&!We?Q.updateId:Q.updateId+1;return Ha(Ha({updateId:vt},U(Ha(Ha({props:$},Q),{},{updateId:vt,dataStartIndex:ye,dataEndIndex:ze}),Q)),{},{prevChildren:ge,dataStartIndex:ye,dataEndIndex:ze})}return null}),kn(q,"renderActiveDot",function($,Q,ne){var de;return rt.isValidElement($)?de=rt.cloneElement($,Q):Gn($)?de=$(Q):de=It.createElement(bT,Q),It.createElement(Ii,{className:"recharts-active-dot",key:ne},de)});var H=rt.forwardRef(function(Q,ne){return It.createElement(q,P_({},Q,{ref:ne}))});return H.displayName=q.displayName,H},HCe=U2({chartName:"LineChart",GraphicalChild:xT,axisComponents:[{axisType:"xAxis",AxisComp:Rh},{axisType:"yAxis",AxisComp:Th}],formatAxisMap:a4}),_M=U2({chartName:"BarChart",GraphicalChild:Ry,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Rh},{axisType:"yAxis",AxisComp:Th}],formatAxisMap:a4}),$Ce=U2({chartName:"PieChart",GraphicalChild:Py,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:N2},{axisType:"radiusAxis",AxisComp:P2}],formatAxisMap:T0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),fw=U2({chartName:"AreaChart",GraphicalChild:Uf,axisComponents:[{axisType:"xAxis",AxisComp:Rh},{axisType:"yAxis",AxisComp:Th}],formatAxisMap:a4}),VC={exports:{}},KCe=VC.exports,T9;function WCe(){return T9||(T9=1,function(t,e){(function(a,r){t.exports=r()})(KCe,function(){var a=1e3,r=6e4,s=36e5,l="millisecond",h="second",n="minute",w="hour",T="day",E="week",z="month",k="quarter",U="year",q="date",H="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ne={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ve){var Ie=["th","st","nd","rd"],Ue=Ve%100;return"["+Ve+(Ie[(Ue-20)%10]||Ie[Ue]||Ie[0])+"]"}},de=function(Ve,Ie,Ue){var Be=String(Ve);return!Be||Be.length>=Ie?Ve:""+Array(Ie+1-Be.length).join(Ue)+Ve},ge={s:de,z:function(Ve){var Ie=-Ve.utcOffset(),Ue=Math.abs(Ie),Be=Math.floor(Ue/60),ke=Ue%60;return(Ie<=0?"+":"-")+de(Be,2,"0")+":"+de(ke,2,"0")},m:function Ve(Ie,Ue){if(Ie.date()<Ue.date())return-Ve(Ue,Ie);var Be=12*(Ue.year()-Ie.year())+(Ue.month()-Ie.month()),ke=Ie.clone().add(Be,z),Je=Ue-ke<0,Le=Ie.clone().add(Be+(Je?-1:1),z);return+(-(Be+(Ue-ke)/(Je?ke-Le:Le-ke))||0)},a:function(Ve){return Ve<0?Math.ceil(Ve)||0:Math.floor(Ve)},p:function(Ve){return{M:z,y:U,w:E,d:T,D:q,h:w,m:n,s:h,ms:l,Q:k}[Ve]||String(Ve||"").toLowerCase().replace(/s$/,"")},u:function(Ve){return Ve===void 0}},fe="en",_e={};_e[fe]=ne;var me="$isDayjsObject",Ae=function(Ve){return Ve instanceof we||!(!Ve||!Ve[me])},Te=function Ve(Ie,Ue,Be){var ke;if(!Ie)return fe;if(typeof Ie=="string"){var Je=Ie.toLowerCase();_e[Je]&&(ke=Je),Ue&&(_e[Je]=Ue,ke=Je);var Le=Ie.split("-");if(!ke&&Le.length>1)return Ve(Le[0])}else{var qe=Ie.name;_e[qe]=Ie,ke=qe}return!Be&&ke&&(fe=ke),ke||!Be&&fe},Oe=function(Ve,Ie){if(Ae(Ve))return Ve.clone();var Ue=typeof Ie=="object"?Ie:{};return Ue.date=Ve,Ue.args=arguments,new we(Ue)},ie=ge;ie.l=Te,ie.i=Ae,ie.w=function(Ve,Ie){return Oe(Ve,{locale:Ie.$L,utc:Ie.$u,x:Ie.$x,$offset:Ie.$offset})};var we=function(){function Ve(Ue){this.$L=Te(Ue.locale,null,!0),this.parse(Ue),this.$x=this.$x||Ue.x||{},this[me]=!0}var Ie=Ve.prototype;return Ie.parse=function(Ue){this.$d=function(Be){var ke=Be.date,Je=Be.utc;if(ke===null)return new Date(NaN);if(ie.u(ke))return new Date;if(ke instanceof Date)return new Date(ke);if(typeof ke=="string"&&!/Z$/i.test(ke)){var Le=ke.match($);if(Le){var qe=Le[2]-1||0,ye=(Le[7]||"0").substring(0,3);return Je?new Date(Date.UTC(Le[1],qe,Le[3]||1,Le[4]||0,Le[5]||0,Le[6]||0,ye)):new Date(Le[1],qe,Le[3]||1,Le[4]||0,Le[5]||0,Le[6]||0,ye)}}return new Date(ke)}(Ue),this.init()},Ie.init=function(){var Ue=this.$d;this.$y=Ue.getFullYear(),this.$M=Ue.getMonth(),this.$D=Ue.getDate(),this.$W=Ue.getDay(),this.$H=Ue.getHours(),this.$m=Ue.getMinutes(),this.$s=Ue.getSeconds(),this.$ms=Ue.getMilliseconds()},Ie.$utils=function(){return ie},Ie.isValid=function(){return this.$d.toString()!==H},Ie.isSame=function(Ue,Be){var ke=Oe(Ue);return this.startOf(Be)<=ke&&ke<=this.endOf(Be)},Ie.isAfter=function(Ue,Be){return Oe(Ue)<this.startOf(Be)},Ie.isBefore=function(Ue,Be){return this.endOf(Be)<Oe(Ue)},Ie.$g=function(Ue,Be,ke){return ie.u(Ue)?this[Be]:this.set(ke,Ue)},Ie.unix=function(){return Math.floor(this.valueOf()/1e3)},Ie.valueOf=function(){return this.$d.getTime()},Ie.startOf=function(Ue,Be){var ke=this,Je=!!ie.u(Be)||Be,Le=ie.p(Ue),qe=function(pt,ve){var ea=ie.w(ke.$u?Date.UTC(ke.$y,ve,pt):new Date(ke.$y,ve,pt),ke);return Je?ea:ea.endOf(T)},ye=function(pt,ve){return ie.w(ke.toDate()[pt].apply(ke.toDate("s"),(Je?[0,0,0,0]:[23,59,59,999]).slice(ve)),ke)},ze=this.$W,We=this.$M,lt=this.$D,vt="set"+(this.$u?"UTC":"");switch(Le){case U:return Je?qe(1,0):qe(31,11);case z:return Je?qe(1,We):qe(0,We+1);case E:var Ot=this.$locale().weekStart||0,dt=(ze<Ot?ze+7:ze)-Ot;return qe(Je?lt-dt:lt+(6-dt),We);case T:case q:return ye(vt+"Hours",0);case w:return ye(vt+"Minutes",1);case n:return ye(vt+"Seconds",2);case h:return ye(vt+"Milliseconds",3);default:return this.clone()}},Ie.endOf=function(Ue){return this.startOf(Ue,!1)},Ie.$set=function(Ue,Be){var ke,Je=ie.p(Ue),Le="set"+(this.$u?"UTC":""),qe=(ke={},ke[T]=Le+"Date",ke[q]=Le+"Date",ke[z]=Le+"Month",ke[U]=Le+"FullYear",ke[w]=Le+"Hours",ke[n]=Le+"Minutes",ke[h]=Le+"Seconds",ke[l]=Le+"Milliseconds",ke)[Je],ye=Je===T?this.$D+(Be-this.$W):Be;if(Je===z||Je===U){var ze=this.clone().set(q,1);ze.$d[qe](ye),ze.init(),this.$d=ze.set(q,Math.min(this.$D,ze.daysInMonth())).$d}else qe&&this.$d[qe](ye);return this.init(),this},Ie.set=function(Ue,Be){return this.clone().$set(Ue,Be)},Ie.get=function(Ue){return this[ie.p(Ue)]()},Ie.add=function(Ue,Be){var ke,Je=this;Ue=Number(Ue);var Le=ie.p(Be),qe=function(We){var lt=Oe(Je);return ie.w(lt.date(lt.date()+Math.round(We*Ue)),Je)};if(Le===z)return this.set(z,this.$M+Ue);if(Le===U)return this.set(U,this.$y+Ue);if(Le===T)return qe(1);if(Le===E)return qe(7);var ye=(ke={},ke[n]=r,ke[w]=s,ke[h]=a,ke)[Le]||1,ze=this.$d.getTime()+Ue*ye;return ie.w(ze,this)},Ie.subtract=function(Ue,Be){return this.add(-1*Ue,Be)},Ie.format=function(Ue){var Be=this,ke=this.$locale();if(!this.isValid())return ke.invalidDate||H;var Je=Ue||"YYYY-MM-DDTHH:mm:ssZ",Le=ie.z(this),qe=this.$H,ye=this.$m,ze=this.$M,We=ke.weekdays,lt=ke.months,vt=ke.meridiem,Ot=function(ve,ea,Kt,Ea){return ve&&(ve[ea]||ve(Be,Je))||Kt[ea].slice(0,Ea)},dt=function(ve){return ie.s(qe%12||12,ve,"0")},pt=vt||function(ve,ea,Kt){var Ea=ve<12?"AM":"PM";return Kt?Ea.toLowerCase():Ea};return Je.replace(Q,function(ve,ea){return ea||function(Kt){switch(Kt){case"YY":return String(Be.$y).slice(-2);case"YYYY":return ie.s(Be.$y,4,"0");case"M":return ze+1;case"MM":return ie.s(ze+1,2,"0");case"MMM":return Ot(ke.monthsShort,ze,lt,3);case"MMMM":return Ot(lt,ze);case"D":return Be.$D;case"DD":return ie.s(Be.$D,2,"0");case"d":return String(Be.$W);case"dd":return Ot(ke.weekdaysMin,Be.$W,We,2);case"ddd":return Ot(ke.weekdaysShort,Be.$W,We,3);case"dddd":return We[Be.$W];case"H":return String(qe);case"HH":return ie.s(qe,2,"0");case"h":return dt(1);case"hh":return dt(2);case"a":return pt(qe,ye,!0);case"A":return pt(qe,ye,!1);case"m":return String(ye);case"mm":return ie.s(ye,2,"0");case"s":return String(Be.$s);case"ss":return ie.s(Be.$s,2,"0");case"SSS":return ie.s(Be.$ms,3,"0");case"Z":return Le}return null}(ve)||Le.replace(":","")})},Ie.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ie.diff=function(Ue,Be,ke){var Je,Le=this,qe=ie.p(Be),ye=Oe(Ue),ze=(ye.utcOffset()-this.utcOffset())*r,We=this-ye,lt=function(){return ie.m(Le,ye)};switch(qe){case U:Je=lt()/12;break;case z:Je=lt();break;case k:Je=lt()/3;break;case E:Je=(We-ze)/6048e5;break;case T:Je=(We-ze)/864e5;break;case w:Je=We/s;break;case n:Je=We/r;break;case h:Je=We/a;break;default:Je=We}return ke?Je:ie.a(Je)},Ie.daysInMonth=function(){return this.endOf(z).$D},Ie.$locale=function(){return _e[this.$L]},Ie.locale=function(Ue,Be){if(!Ue)return this.$L;var ke=this.clone(),Je=Te(Ue,Be,!0);return Je&&(ke.$L=Je),ke},Ie.clone=function(){return ie.w(this.$d,this)},Ie.toDate=function(){return new Date(this.valueOf())},Ie.toJSON=function(){return this.isValid()?this.toISOString():null},Ie.toISOString=function(){return this.$d.toISOString()},Ie.toString=function(){return this.$d.toUTCString()},Ve}(),Me=we.prototype;return Oe.prototype=Me,[["$ms",l],["$s",h],["$m",n],["$H",w],["$W",T],["$M",z],["$y",U],["$D",q]].forEach(function(Ve){Me[Ve[1]]=function(Ie){return this.$g(Ie,Ve[0],Ve[1])}}),Oe.extend=function(Ve,Ie){return Ve.$i||(Ve(Ie,we,Oe),Ve.$i=!0),Oe},Oe.locale=Te,Oe.isDayjs=Ae,Oe.unix=function(Ve){return Oe(1e3*Ve)},Oe.en=_e[fe],Oe.Ls=_e,Oe.p={},Oe})}(VC)),VC.exports}var YCe=WCe();const ls=Xi(YCe);var zC={exports:{}},XCe=zC.exports,S9;function JCe(){return S9||(S9=1,function(t,e){(function(a,r){t.exports=r()})(XCe,function(){var a={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d/,l=/\d\d/,h=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,w={},T=function($){return($=+$)+($>68?1900:2e3)},E=function($){return function(Q){this[$]=+Q}},z=[/[+-]\d\d:?(\d\d)?|Z/,function($){(this.zone||(this.zone={})).offset=function(Q){if(!Q||Q==="Z")return 0;var ne=Q.match(/([+-]|\d\d)/g),de=60*ne[1]+(+ne[2]||0);return de===0?0:ne[0]==="+"?-de:de}($)}],k=function($){var Q=w[$];return Q&&(Q.indexOf?Q:Q.s.concat(Q.f))},U=function($,Q){var ne,de=w.meridiem;if(de){for(var ge=1;ge<=24;ge+=1)if($.indexOf(de(ge,0,Q))>-1){ne=ge>12;break}}else ne=$===(Q?"pm":"PM");return ne},q={A:[n,function($){this.afternoon=U($,!1)}],a:[n,function($){this.afternoon=U($,!0)}],Q:[s,function($){this.month=3*($-1)+1}],S:[s,function($){this.milliseconds=100*+$}],SS:[l,function($){this.milliseconds=10*+$}],SSS:[/\d{3}/,function($){this.milliseconds=+$}],s:[h,E("seconds")],ss:[h,E("seconds")],m:[h,E("minutes")],mm:[h,E("minutes")],H:[h,E("hours")],h:[h,E("hours")],HH:[h,E("hours")],hh:[h,E("hours")],D:[h,E("day")],DD:[l,E("day")],Do:[n,function($){var Q=w.ordinal,ne=$.match(/\d+/);if(this.day=ne[0],Q)for(var de=1;de<=31;de+=1)Q(de).replace(/\[|\]/g,"")===$&&(this.day=de)}],w:[h,E("week")],ww:[l,E("week")],M:[h,E("month")],MM:[l,E("month")],MMM:[n,function($){var Q=k("months"),ne=(k("monthsShort")||Q.map(function(de){return de.slice(0,3)})).indexOf($)+1;if(ne<1)throw new Error;this.month=ne%12||ne}],MMMM:[n,function($){var Q=k("months").indexOf($)+1;if(Q<1)throw new Error;this.month=Q%12||Q}],Y:[/[+-]?\d+/,E("year")],YY:[l,function($){this.year=T($)}],YYYY:[/\d{4}/,E("year")],Z:z,ZZ:z};function H($){var Q,ne;Q=$,ne=w&&w.formats;for(var de=($=Q.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Oe,ie,we){var Me=we&&we.toUpperCase();return ie||ne[we]||a[we]||ne[Me].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ve,Ie,Ue){return Ie||Ue.slice(1)})})).match(r),ge=de.length,fe=0;fe<ge;fe+=1){var _e=de[fe],me=q[_e],Ae=me&&me[0],Te=me&&me[1];de[fe]=Te?{regex:Ae,parser:Te}:_e.replace(/^\[|\]$/g,"")}return function(Oe){for(var ie={},we=0,Me=0;we<ge;we+=1){var Ve=de[we];if(typeof Ve=="string")Me+=Ve.length;else{var Ie=Ve.regex,Ue=Ve.parser,Be=Oe.slice(Me),ke=Ie.exec(Be)[0];Ue.call(ie,ke),Oe=Oe.replace(ke,"")}}return function(Je){var Le=Je.afternoon;if(Le!==void 0){var qe=Je.hours;Le?qe<12&&(Je.hours+=12):qe===12&&(Je.hours=0),delete Je.afternoon}}(ie),ie}}return function($,Q,ne){ne.p.customParseFormat=!0,$&&$.parseTwoDigitYear&&(T=$.parseTwoDigitYear);var de=Q.prototype,ge=de.parse;de.parse=function(fe){var _e=fe.date,me=fe.utc,Ae=fe.args;this.$u=me;var Te=Ae[1];if(typeof Te=="string"){var Oe=Ae[2]===!0,ie=Ae[3]===!0,we=Oe||ie,Me=Ae[2];ie&&(Me=Ae[2]),w=this.$locale(),!Oe&&Me&&(w=ne.Ls[Me]),this.$d=function(Be,ke,Je,Le){try{if(["x","X"].indexOf(ke)>-1)return new Date((ke==="X"?1e3:1)*Be);var qe=H(ke)(Be),ye=qe.year,ze=qe.month,We=qe.day,lt=qe.hours,vt=qe.minutes,Ot=qe.seconds,dt=qe.milliseconds,pt=qe.zone,ve=qe.week,ea=new Date,Kt=We||(ye||ze?1:ea.getDate()),Ea=ye||ea.getFullYear(),Bt=0;ye&&!ze||(Bt=ze>0?ze-1:ea.getMonth());var la,St=lt||0,vr=vt||0,Va=Ot||0,za=dt||0;return pt?new Date(Date.UTC(Ea,Bt,Kt,St,vr,Va,za+60*pt.offset*1e3)):Je?new Date(Date.UTC(Ea,Bt,Kt,St,vr,Va,za)):(la=new Date(Ea,Bt,Kt,St,vr,Va,za),ve&&(la=Le(la).week(ve).toDate()),la)}catch{return new Date("")}}(_e,Te,me,ne),this.init(),Me&&Me!==!0&&(this.$L=this.locale(Me).$L),we&&_e!=this.format(Te)&&(this.$d=new Date("")),w={}}else if(Te instanceof Array)for(var Ve=Te.length,Ie=1;Ie<=Ve;Ie+=1){Ae[1]=Te[Ie-1];var Ue=ne.apply(this,Ae);if(Ue.isValid()){this.$d=Ue.$d,this.$L=Ue.$L,this.init();break}Ie===Ve&&(this.$d=new Date(""))}else ge.call(this,fe)}}})}(zC)),zC.exports}var QCe=JCe();const ebe=Xi(QCe);ls.extend(ebe);ef.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const tbe=()=>{const[t,e]=rt.useState(""),[a,r]=rt.useState(0),[s,l]=rt.useState(0),[h,n]=rt.useState(!1),[w,T]=rt.useState(null),[E,z]=rt.useState([]),[k,U]=rt.useState({}),[q,H]=rt.useState(0),[$,Q]=rt.useState({totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0}),[ne,de]=rt.useState({today:0,weekly:0,monthly:0}),[ge,fe]=rt.useState(Array(24).fill(0)),[_e,me]=rt.useState(0),Ae=rt.useRef(null),Te=rt.useRef(null),Oe=rt.useRef(null),ie=rt.useRef({}),we=ye=>{let ze=ye.replace("UTC+","+").replace("UTC-","-");return ze=ze.replace(/([+\-]\d{1,2})$/,"$1:00"),ls(ze,"D MMMM YYYY [at] HH:mm:ss Z")},Me=ye=>typeof ye=="string"?we(ye):ye&&typeof ye.toDate=="function"?ls(ye.toDate()):ls(ye),Ve=async()=>{try{const ye=await Yi(Wn(kr,"bikes"));r(ye.size)}catch(ye){console.error("Error fetching total bikes:",ye)}},Ie=async()=>{try{const ye=ls().startOf("day"),ze=Wn(kr,"ride_history"),We=await Yi(ze);let lt=0;We.forEach(vt=>{const dt=vt.data().rideEndedAt;dt&&Me(dt).isSame(ye,"day")&&lt++}),console.log("Today's total rides:",lt),l(lt)}catch(ye){console.error("Error fetching total rides today:",ye)}},Ue=async()=>{try{const ye=ls().startOf("day"),ze=Wn(kr,"ride_history"),We=await Yi(ze);let lt={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0};We.forEach(vt=>{var dt,pt,ve;const Ot=vt.data();Ot.rideEndedAt&&Me(Ot.rideEndedAt).isSame(ye,"day")&&(lt.totalDistance+=((dt=Ot.currentMetrics)==null?void 0:dt.distance)||0,lt.totalDuration+=((pt=Ot.currentMetrics)==null?void 0:pt.duration)||0,lt.totalCalories+=((ve=Ot.currentMetrics)==null?void 0:ve.calories)||0,lt.totalCarbon+=Ot.carbonSaved||0,lt.totalRevenue+=Ot.amountPaid||0)}),Q({totalDistance:lt.totalDistance||0,totalDuration:lt.totalDuration||0,totalCalories:lt.totalCalories||0,totalCarbon:lt.totalCarbon||0,totalRevenue:lt.totalRevenue||0})}catch(ye){console.error("Error fetching today's metrics:",ye)}},Be=async()=>{try{const ye=await Yi(Wn(kr,"approved_users"));let ze=0,We=0,lt=0;const vt=ls().startOf("day"),Ot=ls().startOf("week"),dt=ls().startOf("month");for(const pt of ye.docs){const ve=Wn(kr,"approved_users",pt.id,"rideHistory"),ea=await Yi(ve);for(const Kt of ea.docs){const Ea=Kt.data(),Bt=Me(Ea.rideStartedAt),la=Ea.amountPaid||0;Bt.isSame(vt,"day")&&(ze+=la),Bt.isAfter(Ot)&&(We+=la),Bt.isAfter(dt)&&(lt+=la)}}de({today:ze,weekly:We,monthly:lt})}catch(ye){console.error("Error fetching revenue:",ye)}},ke=async()=>{try{const ye=ls().startOf("day"),ze=Wn(kr,"ride_history");return Qm(ze,lt=>{let vt=Array(24).fill(0);lt.forEach(Ot=>{const dt=Ot.data();if(dt.rideEndedAt&&dt.amountPaid){const pt=Me(dt.rideEndedAt);if(pt.isSame(ye,"day")){const ve=pt.hour();vt[ve]+=Number(dt.amountPaid||0)}}}),console.log("Hourly revenue data:",vt),fe(vt)})}catch(ye){console.error("Error fetching hourly revenue:",ye)}},Je=()=>{try{const ye=Wn(kr,"activeRides"),ze=T_(ye,XS("rideStatus","==","started"));return Qm(ze,async lt=>{const vt=[];for(const Ot of lt.docs){const dt=Ot.data();console.log("Ride data:",dt);try{const pt=io(kr,"approved_users",dt.userId),ve=await ny(pt),ea=ve.exists()?ve.data():{};console.log("User data:",ea);const Kt=io(kr,"bikes",dt.bikeId),Ea=await ny(Kt),Bt=Ea.exists()?Ea.data():{};console.log("Bike data:",Bt);let la="Unknown Station";if(dt.startStation){console.log("Attempting to fetch station with ID:",dt.startStation);const vr=io(kr,"stations",dt.startStation),Va=await ny(vr);if(console.log("Station doc exists:",Va.exists()),Va.exists()){const za=Va.data();console.log("Station data:",za),la=za.stationName||za.name||"Unknown Station"}}const St={rideId:Ot.id,userName:ea.name||`${ea.first_name||""} ${ea.surname||""}`.trim(),startTime:dt.startTime,bikeName:Bt.bikeName||"Unknown Bike",stationName:la};console.log("Pushing ride info:",St),vt.push(St)}catch(pt){console.error("Error fetching related documents:",pt),console.error("Error details:",{rideId:Ot.id,userId:dt.userId,bikeId:dt.bikeId,startStation:dt.startStation})}}console.log("Final active rides array:",vt),z(vt)})}catch(ye){return console.error("Error in fetchActiveRides:",ye),()=>{}}},Le=()=>{try{const ye=Wn(kr,"admins");return Qm(ye,ze=>{const We=ze.docs.reduce((lt,vt)=>{const Ot=vt.data();return Ot.status==="Active"&&Ot.stationAssignedTo?lt+1:lt},0);me(We)})}catch(ye){return console.error("Error fetching active admins:",ye),()=>{}}};rt.useEffect(()=>{Ve(),Ie(),Ue(),ke(),Be();const ye=Lv.onAuthStateChanged(async ze=>{if(ze)try{const We=io(kr,"users",ze.uid),lt=await ny(We);if(lt.exists()){const vt=lt.data(),Ot=(vt==null?void 0:vt.name)||"Super Admin";e(Ot)}else e("Super Admin")}catch(We){console.error("Error fetching user data:",We),e("Super Admin")}else e("Unknown User")});return()=>ye()},[]),rt.useEffect(()=>{if(!(Te.current||!Ae.current))try{Te.current=new ef.Map({container:Ae.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),Te.current.addControl(new ef.NavigationControl,"top-right");const ye=Wn(kr,"activeRides"),ze=Qm(T_(ye,XS("rideStatus","==","started")),We=>{Te.current});return()=>{ze(),Te.current&&(Te.current.remove(),Te.current=null)}}catch(ye){console.error("Error initializing map:",ye)}},[Ae.current]),rt.useEffect(()=>{if(!Te.current||!h||!w)return;const ye=Qm(io(kr,"activeRides",w),ze=>{const We=ze.data();if(We&&We.locationData){const{latitude:lt,longitude:vt}=We.locationData;Oe.current?Oe.current.setLngLat([vt,lt]):Oe.current=new ef.Marker({color:"#FF0000",scale:.8}).setLngLat([vt,lt]).addTo(Te.current),Te.current.flyTo({center:[vt,lt],zoom:15})}});return()=>{ye(),Oe.current&&(Oe.current.remove(),Oe.current=null)}},[h,w]),rt.useEffect(()=>{if(!Te.current||!h)return;const ye=Wn(kr,"activeRides"),ze=T_(ye,XS("rideStatus","==","started")),We=Qm(ze,lt=>{lt.docChanges().forEach(vt=>{const Ot=vt.doc.data(),dt=vt.doc.id;(vt.type==="added"||vt.type==="modified")&&Ot.locationData&&(U(pt=>({...pt,[dt]:Ot.locationData})),ie.current[dt]?ie.current[dt].setLngLat([Ot.locationData.longitude,Ot.locationData.latitude]):ie.current[dt]=new ef.Marker({color:"#FF0000",scale:.8}).setLngLat([Ot.locationData.longitude,Ot.locationData.latitude]).setPopup(new ef.Popup().setHTML(`Ride ID: ${dt}`)).addTo(Te.current)),vt.type==="removed"&&(ie.current[dt]&&(ie.current[dt].remove(),delete ie.current[dt]),U(pt=>{const ve={...pt};return delete ve[dt],ve}))})});return()=>{We(),Object.values(ie.current).forEach(lt=>lt.remove()),ie.current={}}},[h]),rt.useEffect(()=>{const ye=Wn(kr,"activeRides"),ze=T_(ye,XS("rideStatus","==","started")),We=Qm(ze,lt=>{H(lt.size)});return()=>We()},[]),rt.useEffect(()=>{let ye;try{ye=Je()}catch(ze){console.error("Error setting up active rides listener:",ze)}return()=>{typeof ye=="function"&&ye()}},[]),rt.useEffect(()=>{const ye=Le();return()=>{typeof ye=="function"&&ye()}},[]),rt.useEffect(()=>{const ye=ls().startOf("day"),ze=Wn(kr,"ride_history");let We=null;try{We=Qm(ze,lt=>{let vt={totalDistance:0,totalDuration:0,totalCalories:0,totalCarbon:0,totalRevenue:0},Ot=Array(24).fill(0),dt=0;lt.forEach(pt=>{const ve=pt.data();if(ve.rideEndedAt){const ea=Me(ve.rideEndedAt);if(ea.isSame(ye,"day")){vt.totalDistance+=Number(ve.distance||0),vt.totalDuration+=Number(ve.duration||0),vt.totalCalories+=Number(ve.caloriesBurned||0),vt.totalCarbon+=Number(ve.carbonSaved||0),vt.totalRevenue+=Number(ve.amountPaid||0);const Kt=ea.hour();Ot[Kt]+=Number(ve.amountPaid||0),dt++}}}),Q(vt),fe(Ot),l(dt)})}catch(lt){console.error("Error setting up ride history listener:",lt)}return()=>{typeof We=="function"&&We()}},[]);const qe=[{name:"Bikes Available",value:a},{name:"Active Users",value:q},{name:"Active Admins",value:_e},{name:"Today's Revenue",value:Number(($==null?void 0:$.totalRevenue)||0)},{name:"Rides Today",value:s}];return X.jsxs("div",{className:"content-container",children:[X.jsxs("div",{className:"content-header",children:[X.jsxs("h1",{className:"content-header__title",children:["Hello ",t,"!"]}),X.jsx("p",{className:"content-header__subtitle",children:"Keeping the wheels turning for a greener future."})]}),X.jsx("div",{className:"stats-section",children:qe.map((ye,ze)=>X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{className:"stat-card__title",children:ye.name}),X.jsx("p",{className:"stat-card__value",children:ye.name==="Today's Revenue"?Number(ye.value).toFixed(2):typeof ye.value>"u"?"0":ye.value})]},ze))}),X.jsxs("div",{className:"tracking-section",children:[X.jsxs("div",{className:"active-rides-table",children:[X.jsx("h3",{className:"section-title",children:"Active Rides"}),X.jsxs("table",{children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Rider Name"}),X.jsx("th",{children:"Start Time"}),X.jsx("th",{children:"Bike Name"}),X.jsx("th",{children:"Station"})]})}),X.jsxs("tbody",{children:[E.slice(0,5).map(ye=>X.jsxs("tr",{children:[X.jsx("td",{children:ye.userName}),X.jsx("td",{children:Me(ye.startTime).format("HH:mm:ss")}),X.jsx("td",{children:ye.bikeName}),X.jsx("td",{children:ye.stationName})]},ye.rideId)),E.length===0&&X.jsx("tr",{children:X.jsx("td",{colSpan:"4",className:"no-rides",children:"No active rides at the moment"})})]})]})]}),X.jsx("div",{className:"map-container",children:X.jsx("div",{ref:Ae,className:"ride-tracking-map"})})]}),X.jsxs("div",{className:"charts-grid",children:[X.jsxs("div",{className:"charts-row",children:[X.jsxs("div",{className:"chart-container",children:[X.jsx("h3",{className:"chart-title",children:"Today's Ride Metrics"}),X.jsx(hm,{width:"100%",height:300,children:X.jsxs(_M,{data:[{name:"Distance",value:parseFloat($.totalDistance||0),unit:"km"},{name:"Duration",value:parseFloat(($.totalDuration||0)/60),unit:"min"},{name:"Calories",value:parseFloat($.totalCalories||0),unit:"cal"},{name:"CO2 Saved",value:parseFloat($.totalCarbon||0),unit:"kg"}],margin:{top:5,right:30,left:20,bottom:60},children:[X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),X.jsx(Th,{tickFormatter:ye=>ye.toFixed(2),tick:{fontSize:12}}),X.jsx(Ou,{formatter:(ye,ze,We)=>We&&We.payload?[`${ye.toFixed(2)} ${We.payload.unit}`,ze]:[ye,ze],contentStyle:{fontSize:12}}),X.jsx(Ry,{dataKey:"value",fill:"#009C8C",children:X.jsx(bp,{dataKey:"value",position:"top",formatter:(ye,ze)=>ze&&ze.payload?`${ye.toFixed(2)} ${ze.payload.unit}`:ye.toFixed(2),style:{fontSize:"11px"}})})]})})]}),X.jsxs("div",{className:"chart-container",children:[X.jsx("h3",{className:"chart-title",children:"System Overview"}),X.jsx(hm,{width:"100%",height:300,children:X.jsxs(_M,{data:qe,margin:{top:5,right:30,left:20,bottom:60},children:[X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"name",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12},interval:0}),X.jsx(Th,{tick:{fontSize:12}}),X.jsx(Ou,{contentStyle:{fontSize:12}}),X.jsx(Ry,{dataKey:"value",fill:"#009C8C"})]})})]})]}),X.jsxs("div",{className:"revenue-section",children:[X.jsx("h3",{className:"chart-title",children:"Today's Hourly Revenue"}),X.jsx(hm,{width:"100%",height:300,children:X.jsxs(HCe,{data:ge.map((ye,ze)=>({hour:`${String(ze).padStart(2,"0")}:00`,value:ye})),margin:{top:5,right:30,left:20,bottom:5},children:[X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"hour",tick:{fontSize:12},interval:2}),X.jsx(Th,{tick:{fontSize:12},tickFormatter:ye=>`₱${ye.toFixed(2)}`}),X.jsx(Ou,{formatter:ye=>[`₱${Number(ye).toFixed(2)}`,"Revenue"],contentStyle:{fontSize:12}}),X.jsx(xT,{type:"monotone",dataKey:"value",stroke:"#4CAF50",strokeWidth:2,dot:{fill:"#4CAF50"}})]})})]})]})]})},NO=()=>X.jsxs("div",{className:"dashboard",children:[X.jsx(mK,{})," ",X.jsxs("div",{className:"dashboard-content",children:[X.jsx(Ig,{})," ",X.jsx(tbe,{})," "]})]}),lm=()=>{const t=kM(),[e,a]=rt.useState(""),[r,s]=rt.useState(""),[l,h]=rt.useState(""),n=T=>`/ecpcaps/assets/${T}`,w=async T=>{T.preventDefault();try{await Sne(Lv,e,r),t("/dashboard")}catch(E){h(E.message)}};return X.jsxs("div",{className:"login-container",children:[X.jsx("div",{className:"login-logo-container",children:X.jsx("img",{src:n("ecoridelogo2.png"),alt:"Eco Ride Logo",className:"login-logo"})}),X.jsx("p",{className:"login-subtitle",children:"Drive Green, Ride Clean!"}),X.jsx("h2",{className:"login-title",children:"Super Admin Login"}),X.jsxs("form",{className:"login-form",onSubmit:w,children:[l&&X.jsx("p",{className:"error",children:l}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Email"}),X.jsx("input",{type:"email",value:e,onChange:T=>a(T.target.value),required:!0})]}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Password"}),X.jsx("input",{type:"password",required:!0,autoComplete:"current-password",value:r,onChange:T=>s(T.target.value)})]}),X.jsx("button",{type:"submit",className:"login-button",children:"LOG IN"})]})]})},abe=JSON.parse('[{"Raw Address":"168 SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"235 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"118-CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"21 EARTH STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ST.RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"188 M DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"9 E&E COMP. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"155 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"338 T.MANAG ST. PARADA Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"9R CABRAL STREET Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"195 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"250 S. DE GUZMAN ST BO Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FV4 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"98 7TH ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 19TH ST. Parada Valenzuela City"},{"Raw Address":"TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"0002 Parada Valenzuela City"},{"Raw Address":"T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"249 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"91 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"095 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"012 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"244 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"12 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"187 UNIT14 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"230 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA T. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT 101 CAPT CRUZ ST COR Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"140 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"441 P GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"234 Fortune Village 5 19T Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT1 Parada Valenzuela City"},{"Raw Address":"36-A PARADA RD. Parada Valenzuela City"},{"Raw Address":"93 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 LAGMDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST Parada Valenzuela City"},{"Raw Address":"74 PARADA ST. Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APRT. 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"178 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMPD. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1992 1ST. BENMARIE COMP FV5 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"166 SALAZAR Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"93 E. CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"21ST PARADA ROAD Parada Valenzuela City"},{"Raw Address":"339 BO. Parada Valenzuela City"},{"Raw Address":"295 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"276B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"04 Parada Valenzuela City"},{"Raw Address":"436 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"5 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"191 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B6 L7 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CPD. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS HOMES. PARADA Valenzuela City"},{"Raw Address":"39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"LOT 23 BLK 14 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"259 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA ST. Parada Valenzuela City"},{"Raw Address":"99 SATURN ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE VillageAG 5 Parada Valenzuela City"},{"Raw Address":"234 ALOHA COMP. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L13 B19 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"07 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"43 B. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"250 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"234 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"121 CONZUELO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPITAN CRUZ ST Parada Valenzuela City"},{"Raw Address":"19921 ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN ST. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"15 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"232 SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 LAGADAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"321 S. DEG GUZMAN Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 6TH ST. FORTUNE   Parada Valenzuela City"},{"Raw Address":"77 PARADA RD. EXT. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"264 25TH ST. FORTUNE VIL 5 Parada Valenzuela City"},{"Raw Address":"0090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"412 Fortune Village 7 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"UNIT 3 LOT 16 BLK 8 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"278 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"306-A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"114-E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"58 PARADA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"466 KA BERONG Parada Valenzuela City"},{"Raw Address":"321 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"190 B MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STEET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"386 IMPONG JUANA STREET Parada Valenzuela City"},{"Raw Address":"0419 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B5 L7GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. BO.PARADA Valenzuela City"},{"Raw Address":"388 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"71 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"20 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"032 Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BK3 LT12 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"302-B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"125 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"320 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 MOLAVE Parada Valenzuela City"},{"Raw Address":"0011 UNIT C MOLAVE ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Parada Valenzuela City"},{"Raw Address":"236 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FV 5 Parada Valenzuela City"},{"Raw Address":"AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"7 CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"414 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"184 RAMON ST FV4 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"19-B ZAMORA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"18 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"# 43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"083 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"391 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"90 G. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"297-D T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 PARADA RD. Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR STREET Parada Valenzuela City"},{"Raw Address":"114 YAKAL ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"452 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO Parada Valenzuela City"},{"Raw Address":"22 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6. PARADA Valenzuela City"},{"Raw Address":"276A S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"0094 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"101 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"301 T.MANANG Parada Valenzuela City"},{"Raw Address":"004 Parada Valenzuela City"},{"Raw Address":"246 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#93 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B5L3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"87 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"317 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"8-FIFTH ST. Parada Valenzuela City"},{"Raw Address":"157 ELAGDAMEO ST. FV4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"#12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"89 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"468-G KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"6 Parada Valenzuela City"},{"Raw Address":"333 A TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"242 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. COR. Parada Valenzuela City"},{"Raw Address":"043 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"339 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"031 PARADA RD Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"35 Parada Valenzuela City"},{"Raw Address":"184 Fortune Village 6 MOLAVE ST. PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR Parada Valenzuela City"},{"Raw Address":"20 EUGENIO Parada Valenzuela City"},{"Raw Address":"01 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B13L27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"253 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORUNE Village4 Parada Valenzuela City"},{"Raw Address":"B1 L9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"00002 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"187 UNIT 11 3RD FLOOR FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"181 FELIZA Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"200 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"214-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"# 86 C. CAPITAN CRUZ Parada Valenzuela City"},{"Raw Address":"# 95 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK3 LOT20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"241 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"268 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"5 PARADA Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"405-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE Parada Valenzuela City"},{"Raw Address":"339 T. MANANG Parada Valenzuela City"},{"Raw Address":"39 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"188 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"412-B P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"204B F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"162 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK. 2 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"L 9 B 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"185 B. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"231 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"FRANCISCO Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"21ST PARADA RD Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#39D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"3A LOT 13 BLK 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"9001 LOT 4 A CALLE ONCE Parada Valenzuela City"},{"Raw Address":"450 Parada Valenzuela City"},{"Raw Address":"283 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"043 6TH ST. CORNER NARRRA ST. Parada Valenzuela City"},{"Raw Address":"413-J P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L26 NARRA ST Parada Valenzuela City"},{"Raw Address":"065 BO.PARADA Valenzuela City"},{"Raw Address":"27 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"140 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"84 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"123 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"91-A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#12 PARADA ST. Parada Valenzuela City"},{"Raw Address":"276-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"420 ZAMORA FV7 Parada Valenzuela City"},{"Raw Address":"18 A F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. MANALANG APT. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"UNIT1 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"413 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ ST. PARADA Valenzuela City"},{"Raw Address":"20 EUGENIO ST. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"39 D RAMON ST. SANTIAGO COMPOUND F4 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"SERVE 1 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"220D 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"11 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"26 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"176 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"259 2ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 C P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"410-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"36-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"413 FV7 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. COR. M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"248 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0006 BLOCK 3 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RUMARAO COMPD Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"134 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"COR. PEARL & CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"192 RAMON FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPUND Parada Valenzuela City"},{"Raw Address":"29 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"414 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"227 ABLERADO ST. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1F DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"119A KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"22 Parada Valenzuela City"},{"Raw Address":"10 5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ABELARDO Parada Valenzuela City"},{"Raw Address":"199 6TH Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"65 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"109 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"283 MARTA ST. Parada Valenzuela City"},{"Raw Address":"371 -A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT A 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L22 JADE ST Parada Valenzuela City"},{"Raw Address":"2 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"067 PARADA RD Parada Valenzuela City"},{"Raw Address":"165 G ACACIA ST Parada Valenzuela City"},{"Raw Address":"441 GOMEZ Parada Valenzuela City"},{"Raw Address":"18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"9 VENUS ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK1 LOT5 TMHOA T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"207 FELA BUKID Parada Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"RAMON ST. Parada Valenzuela City"},{"Raw Address":"93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"91B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 A CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 4 CALYE 7 Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"080 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"322 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"122 CALE ONCE ST. Parada Valenzuela City"},{"Raw Address":"193-C M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"62 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"201 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 26 MARS ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"4389 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 ST. Parada Valenzuela City"},{"Raw Address":"94A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0118A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"139 Fortune Village 5 DRIVE Village Parada Valenzuela City"},{"Raw Address":"ADOR ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"30B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"361 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST.PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"307 JIMENEZ ST.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. CORNER NARRA Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"123 C. CRUZ Parada Valenzuela City"},{"Raw Address":"414 PARADA ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"CANDIDO APT. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMPOUND WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"1243 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"169 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FORUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"CALL ONSE Parada Valenzuela City"},{"Raw Address":"097 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"104 A CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"#330 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"B2L20 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"449 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO FV 4 Parada Valenzuela City"},{"Raw Address":"279-B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"35 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"28 PARADA RD Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"# 12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG STREET. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"365 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK9 LOT29-A KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"169 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONCE Parada Valenzuela City"},{"Raw Address":"464 KAINGIN Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 ROSILOS Parada Valenzuela City"},{"Raw Address":"470 CARACTA VillageE KAINGIN ST Parada Valenzuela City"},{"Raw Address":"457 F KAINGIN ST Parada Valenzuela City"},{"Raw Address":"0147E LOT 0147 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"105 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"283 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"348 CAPT.CRUZ ST. BO. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"8 M. LAUREL DRIVE Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"JORGE EMBUSCADO Parada Valenzuela City"},{"Raw Address":"#153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"3 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"332 T MANANG ST Parada Valenzuela City"},{"Raw Address":"514 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"412 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"224 2OTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 BELARDO ST. FV 4 Village Parada Valenzuela City"},{"Raw Address":"25 GUENIO Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"136 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"199 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 14 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"307 JIMENES ST. Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 6 TANDANG MANANG HOWA Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. Parada Valenzuela City"},{"Raw Address":"100 E. DE GULA COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#6 Fortune Village 5 5TH STREET Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR DOON COMPD. Parada Valenzuela City"},{"Raw Address":"301 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"172 23 ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Fortune Village 5 MOLAVE EXT. Parada Valenzuela City"},{"Raw Address":"111 Fortune Village 6 Village YAKAL ST. Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN BLK. 5 LOT 15 Parada Valenzuela City"},{"Raw Address":"458 KAINGIN Parada Valenzuela City"},{"Raw Address":"2 YAKAL ST. CORNER ACACIA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"471-A KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"205 FELISA ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO Parada Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"L10 B 2 PARADA EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"413H SANTOS TWNH P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"L6 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"#70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"0281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"#91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L-10 B-4 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"363 APT E. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"222C ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"161 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. Parada Valenzuela City"},{"Raw Address":"456-C KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"333 APTC. KAMAGONG ST FV6 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST Parada Valenzuela City"},{"Raw Address":"BL 3 LT 5 GINTONG SILANGAN 349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"201 A. FELIZA Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"HIYAS HOME PARADA RD. Parada Valenzuela City"},{"Raw Address":"233 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"226 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLOCK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"470 PARADA ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"MACABALO APARTMENT PILAR ST. Parada Valenzuela City"},{"Raw Address":"118 E CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"21ST F5 MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"15 F AANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"046 Fortune Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"95P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E AND E COMPD. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"0222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"467-A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"410 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"0394L SAN ADNRES ST. Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"SAPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"352 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"121 E LAGDAME ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"171 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 5THV ST. FV 5 Parada Valenzuela City"},{"Raw Address":"468 KAINGI ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK. 11 FORTUNE DRIVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LOT 10 NIPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"DIZON COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"28 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"363 D. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"91-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 F. FRANCISCOST Parada Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 7 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"171 A.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 5TH ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"254 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"272 DOOR 3 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0339 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B1 L2 24TH ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"444 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"121 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"02 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. Parada Valenzuela City"},{"Raw Address":"4365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"327 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"184 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"273 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"407 Parada Valenzuela City"},{"Raw Address":"188 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"3201 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"193 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1548 F PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST DOON COMPD Parada Valenzuela City"},{"Raw Address":"257 RIZALINA STREET Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"258 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"091 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"166 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"278 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"342 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"193 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"140 E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"PEARL CORNER SAPPHIRE ST. B.Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"013 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 7 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"# 10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"312 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO Parada Valenzuela City"},{"Raw Address":"2970 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"312 INT.JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"250 25TH ST. FORTUNE DRIVE Village 5 Parada Valenzuela City"},{"Raw Address":"13 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 STREET 21 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"187 Parada Valenzuela City"},{"Raw Address":"414 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"466 KABERONG KAINGIN Parada Valenzuela City"},{"Raw Address":"BLK 2 GINTONG SILANGAN SAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"392-B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PARADA ST. SALAZAR Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"443 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"161 FELISA SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ. PARADA Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"186 FELIZA Parada Valenzuela City"},{"Raw Address":"22 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"121 CAPITAN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"#185 FILIZA Parada Valenzuela City"},{"Raw Address":"362 B. TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 10 LOT 5 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. Parada Valenzuela City"},{"Raw Address":"4542 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN Parada Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"88 A. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT3A B9L30 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"174 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"140 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"1252 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"319 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"278 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG. PARADA Valenzuela City"},{"Raw Address":"LOT 29 A BLK. 9 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"111-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 6THST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"12 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39C PARADA RD Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"91A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"70 PARADA Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"150 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"233 19 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"433 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"124 -B CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"9 M. LAUREL STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"88 I. SANTIAGO Parada Valenzuela City"},{"Raw Address":"31 U4&5 KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L8 B2 TINDALO ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"B2 L8 349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#136 NARRA ST. Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST.PARADA Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARI CPD. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD WEST Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"DAET CMPD.PARADA Valenzuela City"},{"Raw Address":"417 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"9 PARADA RD. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"150 AVELIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 BLK. B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"Q02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"338 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"40 PARADA RD Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"24TH STREET BEN MARIE COMPD. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"094 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"417 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"45-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"333 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"60 Fortune Village 6 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"466 KAINGIN ST . PARADA Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 T.EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"333-A KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST. BENMARE COMP. Parada Valenzuela City"},{"Raw Address":"139 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"65 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"39 D SANTIAGO CPMD. FV4 Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"170 SLAZAR ST. Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B 2 L19 SAPPHIRE ST.HIYAS HOME Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138-E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1114 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"14 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"220 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"DOOR 4 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"4-D S.DE GUZMAN ST. EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"328 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"360-J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"INT. CAPT.CRUZ. ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204-B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 S. DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"225 A BELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"267 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"410P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"34 PARADA RD Parada Valenzuela City"},{"Raw Address":"365 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"351-C CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"DOOR B. MACABALO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"78-B PARADA EXTN. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"E. QUENIO ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP 21 ST FORTUNE Parada Valenzuela City"},{"Raw Address":"203 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 1 SALAZAR Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"067 E PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 STREET Parada Valenzuela City"},{"Raw Address":"CABRAL ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA ST Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"310 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"FELISA ST Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"435 B. ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"67 FORTUNE VIILAGE 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"19921 ST. Parada Valenzuela City"},{"Raw Address":"410 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD Parada Valenzuela City"},{"Raw Address":"B5 L6 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"15 F. Parada Valenzuela City"},{"Raw Address":"MENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT10 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"B4L7 MHOAI TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L24 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"239 PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST FV4 Parada Valenzuela City"},{"Raw Address":"055 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"339TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"BLK.14 L3 M. DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"392-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN EXT. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"193 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"233 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"170 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FANCISCO ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"FORTUNE5 5 Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 3 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"465B KAINGIN ST Parada Valenzuela City"},{"Raw Address":"CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"185 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":". Parada Valenzuela City"},{"Raw Address":"WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 B DOON SALAZAR ST. COMPD. Parada Valenzuela City"},{"Raw Address":"230-S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"L 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"199 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"273 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"154 ALICICA ST. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village. 5 Parada Valenzuela City"},{"Raw Address":"296 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"COR. 6TH ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"365-A TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"347 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"351 D. CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"TOMASA Parada Valenzuela City"},{"Raw Address":"276 J S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"91-E CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"316 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"110 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FELIZA ABUKID Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. PARADA Valenzuela City"},{"Raw Address":"0177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLIHAN COMPD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STR Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"172 RAMON ST. Parada Valenzuela City"},{"Raw Address":"202-A FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"9-E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"05 118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST Parada Valenzuela City"},{"Raw Address":"324 TANGDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BLK.8 LOT31 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"327 T. MANANG Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMP Parada Valenzuela City"},{"Raw Address":"L14 B 5 GINTONG SILANGAN ST. Parada Valenzuela City"},{"Raw Address":"172 Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"85 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"LOT 17 BLK 2 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"28 PARADA Valenzuela City"},{"Raw Address":"LOT 4 BLK 21 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"33 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"249 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"168-B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"052 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"363-D TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"236 7TH ST. PARADA Valenzuela City"},{"Raw Address":"5 Parada Valenzuela City"},{"Raw Address":"5 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"18 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"40 PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"255 TOMAS ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"119 PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"279 PILAR ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD Parada Valenzuela City"},{"Raw Address":"0349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"271 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD ST. Parada Valenzuela City"},{"Raw Address":"L6 B2 TINDALO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"01 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"FELIZA Parada Valenzuela City"},{"Raw Address":"146 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"09 BO. PARADA RD. Parada Valenzuela City"},{"Raw Address":"405 B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST Parada Valenzuela City"},{"Raw Address":"342 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 M DEGULA Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"416 TATA ERO Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"422 GOMEZ ST. FORUNE Village 7 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"380 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"410 A- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR 12 118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"199 AGLIHAM COMPD. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"384 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 ABELARDO FAVillageA Parada Valenzuela City"},{"Raw Address":"5JUPITER ST. Parada Valenzuela City"},{"Raw Address":"333-F KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"111 YAKAL STREET Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"L8 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"352 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"235 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0260 1 TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"84 A CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"131-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"PARADA ROAD 28 Parada Valenzuela City"},{"Raw Address":"14 B PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SNTIAGO ST. Parada Valenzuela City"},{"Raw Address":"16 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"314 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"184 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"25 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"410 T. MANANG Parada Valenzuela City"},{"Raw Address":"313 MENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWAN HOUSE Parada Valenzuela City"},{"Raw Address":"202 FELIZA Parada Valenzuela City"},{"Raw Address":"278 PILAR STREET Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"131-CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"325 Parada Valenzuela City"},{"Raw Address":"055 PARADA RD. COR. IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"311 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG LOT 3 BLOCK 14 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"DELA CRUZ COMP. CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"026 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 GINTONG SILANGAN A . FRANCISCO Parada Valenzuela City"},{"Raw Address":"046 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"002 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"11-B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407-B P. DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"200 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"061 PARADA RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"D: Parada Valenzuela City"},{"Raw Address":"330 TIA. MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"407 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"#267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"007 PARADA RD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 ST.PARADA Valenzuela City"},{"Raw Address":"5TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"150 NARRA STREET Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"146 DALAWAN Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"384 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE V FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"119 Fortune Village 5 6 ST. Parada Valenzuela City"},{"Raw Address":"161 B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"L2 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"192-3 6TH ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 22 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"0320 D S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"262 25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"416 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 VENUS ST CMPD SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 19 HIYAS HOMES SAPHIRE ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"F.FRNCISCO ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"30 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"124B CUPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"37 PARADA RD Parada Valenzuela City"},{"Raw Address":"200 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"168 INT. SALAZAR ST. BO.PARADA Valenzuela City"},{"Raw Address":"94- B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"419 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"222 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"0394 (G.) SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"8 VENANIO RD. P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F. SANT IAGOS T. Parada Valenzuela City"},{"Raw Address":"200C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"310 MENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"#255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"0306 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"168N SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"LT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT7 TANDANG MANANG TMHOA Parada Valenzuela City"},{"Raw Address":"287 BO. PARADA SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"457-F KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"320 A SANTIAGO DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"442 P GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT12 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"307 FELISA STREET Parada Valenzuela City"},{"Raw Address":"KALYE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"268 25TH Fortune Village 5. Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SALASAR ST. Parada Valenzuela City"},{"Raw Address":"2860 140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"357 FRANCISCO Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN PARADA Valenzuela City"},{"Raw Address":"FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"150 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B3L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"264 B 4TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FILISA BUKID Parada Valenzuela City"},{"Raw Address":"095 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"39-K RAMON ST. Parada Valenzuela City"},{"Raw Address":"246 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"245 19TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE PARADA RD. Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"284 P. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"149 A 6TH ST. KAMAGONG ROAD Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"207 STREET FILISA BUKID Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"233 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"366 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"155 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Parada Valenzuela City"},{"Raw Address":"B4 L11 GINTONG SILANGAN COMP. F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"B4 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"50 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"1288 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 S.DEGUZMAN Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"2532 140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"274 Parada Valenzuela City"},{"Raw Address":"250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"207 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L1 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST Parada Valenzuela City"},{"Raw Address":"121 Parada Valenzuela City"},{"Raw Address":"169 DON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"158 NARRA ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 25TH. Parada Valenzuela City"},{"Raw Address":"424 BURGOS Parada Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"33 Parada Valenzuela City"},{"Raw Address":"466C KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"158 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1288 KAMAGONG STREET CORNER 6TH STREET Parada Valenzuela City"},{"Raw Address":"138 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"415 Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"100 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"237 19TH Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Parada Valenzuela City"},{"Raw Address":"252 DEGUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"107 E.LAGDAMEO ST. FVF. 4 PARADA Valenzuela City"},{"Raw Address":"258 INT. S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"210 21TH STREET COR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CORNER 23 RD. ST. FOERTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. STREET Parada Valenzuela City"},{"Raw Address":"412-B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"SISCAR APARTMENT ADOR ST Parada Valenzuela City"},{"Raw Address":"369 T.ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"028 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"67 B PARADA ROAD EXIT FORTUNE6 Parada Valenzuela City"},{"Raw Address":"407-B P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"122 CALLE II PARADA Valenzuela City"},{"Raw Address":"249 Parada Valenzuela City"},{"Raw Address":"161 YAKAL ST. COR. MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR Parada Valenzuela City"},{"Raw Address":"FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"175-B RAMON STREET Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"215 PARADA Valenzuela City"},{"Raw Address":"39-B RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"101 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD FVG Parada Valenzuela City"},{"Raw Address":"201 22ND ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BENMARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"231 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG ST.KAINGIN Parada Valenzuela City"},{"Raw Address":"34 PARADA ST. Parada Valenzuela City"},{"Raw Address":"406 Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"#92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"339 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"139 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"021 EUGENIO BARIO Parada Valenzuela City"},{"Raw Address":"175 FELISA ST. Parada Valenzuela City"},{"Raw Address":"F. Village 5 Parada Valenzuela City"},{"Raw Address":"422 BURGOZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"201 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LT 6 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"469-B KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"487 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"# 95 A. F. SNTIAGO Parada Valenzuela City"},{"Raw Address":"99 SATURN ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"227 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"236 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"441 Parada Valenzuela City"},{"Raw Address":"41 B. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0506 UNIT 2 TINDALO ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"95 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"308 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"206 D 22ND ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"86 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"264 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. PARADA Valenzuela City"},{"Raw Address":"387 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"53 SALAZAR RD. BOPARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"136 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ADOR ST. Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ ST Parada Valenzuela City"},{"Raw Address":"B1 L3 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"186 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"180 23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST Parada Valenzuela City"},{"Raw Address":"224 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 22ND ST. Parada Valenzuela City"},{"Raw Address":"161 A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"146 Fortune Village 6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"378 A. TATA ANDRES Parada Valenzuela City"},{"Raw Address":"169 D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"249 ABELLARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"2531 M.DELOS REYES ST. PARADA Valenzuela City"},{"Raw Address":"456 KAINGIN Parada Valenzuela City"},{"Raw Address":"MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"B-7 L-7 BURGOS ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"458 P. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"009 CABRAL ST. Parada Valenzuela City"},{"Raw Address":"WEST CVR Parada Valenzuela City"},{"Raw Address":"9E PARADA RD. PARADA Valenzuela City"},{"Raw Address":"# 347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"07 HIYAS HOMES CORAL ST. Parada Valenzuela City"},{"Raw Address":"199 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"389 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"325 T MANANG ST Parada Valenzuela City"},{"Raw Address":"188 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"0002 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"415 B TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"223 A BELARDO ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"#15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 RAMON FORUNTE Village 4 Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK. 2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON Parada Valenzuela City"},{"Raw Address":"448 ROMARAO SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 S DU GUZMAN ST Parada Valenzuela City"},{"Raw Address":"254 25ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"B1L5 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. BO. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON CPND. Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 12 BURGOS ST. FV7 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"272 IMPONG JUANA ST. S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"101 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD. Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"25 ST. FV5 Parada Valenzuela City"},{"Raw Address":"268 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"ure Name and Signature Parada Valenzuela City"},{"Raw Address":"BLOCK 7 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"297 TADANG MANANG Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"366 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"87 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"183 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"185 D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4-3 GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND 21ST STREET Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. PARADA Valenzuela City"},{"Raw Address":"26 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"112 Parada Valenzuela City"},{"Raw Address":"019 PARADA Valenzuela City"},{"Raw Address":"33 EARTH F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALIN ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"mplete. Parada Valenzuela City"},{"Raw Address":"80 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"156 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"442 ST. PARADA Valenzuela City"},{"Raw Address":"377 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"412B P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2345 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"98L KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAINGIN Parada Valenzuela City"},{"Raw Address":"244 7 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"153 PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. BRGY. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"311 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Parada Valenzuela City"},{"Raw Address":"199 BM COMP. 21 ST FV5 Parada Valenzuela City"},{"Raw Address":"ILOCTO ST. PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"B19 EARTH ST Parada Valenzuela City"},{"Raw Address":"261 25ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"429 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"220 SALVADOR ST. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"166 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 7 Parada Valenzuela City"},{"Raw Address":"99 VENUS Parada Valenzuela City"},{"Raw Address":"94 B. FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 12 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"2OO C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"LOT 31 EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST Parada Valenzuela City"},{"Raw Address":"B3L16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Parada Valenzuela City"},{"Raw Address":"192 A M . DEGULA ST. Parada Valenzuela City"},{"Raw Address":"B2L23 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"Village 5&6 Parada Valenzuela City"},{"Raw Address":"230 - 1 D. S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"368 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"091 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"77 CCAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"192 RAMON ST FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"LOT 1 BLK 1 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"466 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"B4 L 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"BLK. 7 37 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1ST ST. BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"50 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"440 RUMARAO ST. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 20 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"440 RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"DOOR2 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"349 F FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"233 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO STREET Parada Valenzuela City"},{"Raw Address":"B6 L9 PEARL CORNER JADE HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"302 B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"W77 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"12 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"BLK4 LOT3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"314 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"252 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"497 Parada Valenzuela City"},{"Raw Address":"181 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"297 PARADA Valenzuela City"},{"Raw Address":"403-B TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"40 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"UNIT 2 #14 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"68 B PARADA RD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"193-A M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"349 F. FARNCISCO ST. Parada Valenzuela City"},{"Raw Address":"199 6STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO Parada Valenzuela City"},{"Raw Address":"DOOR B PILAR ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"264 Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. BO. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"409 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"206 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"272- A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32B 258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"19 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"37 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"28 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"415 ZAMORA STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"216 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"391 SANTALON RD. Parada Valenzuela City"},{"Raw Address":"BET 6 AND 7 ST. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"12 - I CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"320 2nd Floor E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"440 ROMARAO COMPD. WESTSERVICE ROAD Parada Valenzuela City"},{"Raw Address":"96 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"JVC PARADA Valenzuela City"},{"Raw Address":"BEN MARIE CMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA Parada Valenzuela City"},{"Raw Address":"130 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#77 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"CORNER HIYAS STREET Parada Valenzuela City"},{"Raw Address":"16 VENUS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"VAL. M.M. Parada Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"17 D. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"6 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"283 S . MARTHA ST. Parada Valenzuela City"},{"Raw Address":"276 PILAR ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"468 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"309 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"45 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"083 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B5 L 2 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST. SILANGAN Parada Valenzuela City"},{"Raw Address":"117A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"064 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. FV5 Parada Valenzuela City"},{"Raw Address":"443-3 SERVICE RD Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DR. PARADA Valenzuela City"},{"Raw Address":"289 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"97A CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"COR. OLIVA ST. & RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"341 20TH ST.FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"216 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"200 C. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"9 PLUTO F .SANTIAGO Parada Valenzuela City"},{"Raw Address":"32 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"DE GULA APT. Parada Valenzuela City"},{"Raw Address":"344 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST Parada Valenzuela City"},{"Raw Address":"358 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"355 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"2735 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0909 ADOR STREET Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 FRANCISCO ST.PARADA Valenzuela City"},{"Raw Address":"203 B. VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"250 UNIT 9 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 E S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"064 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"442 18TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"LT 6-B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"015 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 3 ACACIA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"149 NARRA ST. Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"25TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"88 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"416 TATAERO Parada Valenzuela City"},{"Raw Address":"161 SALAZAR Parada Valenzuela City"},{"Raw Address":"306 CAPT.DAET COMP. Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON STREET Parada Valenzuela City"},{"Raw Address":"270 A.S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"ALICIA ST.Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 16 LOT 12 M DELOS REYES ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"77 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B1 L 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1827 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"68 B PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"L1 B2 A. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"111E LAGDAMEO STREET Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"SANTOAGO ST. Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 ANTHONY Parada Valenzuela City"},{"Raw Address":"107 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"451 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"245 7 TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"193 FORTUNE DR. ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"299 B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"321-1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 B. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO ST. GINTOMG Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"277 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"362A TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"182 K MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"341 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"#230 18TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0098 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"281 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"388 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"145 UNIT B NARRA FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. CORNER IPIL FV6 Parada Valenzuela City"},{"Raw Address":"1-DEMBUSCADO APT. 230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN RD. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLACK 6 LOT 11 F FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN Parada Valenzuela City"},{"Raw Address":"# 61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. E&E SUBD. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"39 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"169 F. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"348 CAPT. F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0385 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"173 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"007 Parada Valenzuela City"},{"Raw Address":"14 B PEARL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. IPIL Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"011 PARADA ST. Parada Valenzuela City"},{"Raw Address":"166 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"186-D 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"310 MENEZ STREET Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"354 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 6B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"453 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"194 19TH STREET Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"333 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"207 ANTHONY ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 Parada Valenzuela City"},{"Raw Address":"24 ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"236 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 18ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141 Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"190 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village.. Parada Valenzuela City"},{"Raw Address":"362-B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"243 SOUTH DE GUZMAN Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"LOT 12 BLOCK 5 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"317 F Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"247 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"257 A. M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"29 PARADA RD Parada Valenzuela City"},{"Raw Address":"157-B PARADA Valenzuela City"},{"Raw Address":"61 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"349 A FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0035 KAINGIN Parada Valenzuela City"},{"Raw Address":"04 MARS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"073 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"182 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"173 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"270 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"249 ABELARDO Parada Valenzuela City"},{"Raw Address":"45 PARADA RD. FORTUNE Village 5 Valenzuela City Parada Valenzuela City"},{"Raw Address":"15 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA RD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"258-S.DE GUZMANST. PARADA Valenzuela City"},{"Raw Address":"22A EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"#131 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID STREET Parada Valenzuela City"},{"Raw Address":"109 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"347 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"19 BLK. 4 FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 4 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Parada Valenzuela City"},{"Raw Address":"098 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR Parada Valenzuela City"},{"Raw Address":"349 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"#28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"172 23RD ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. FORTUNE FOUR Parada Valenzuela City"},{"Raw Address":"100 LAGMADEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"21ST. FORTUNE DRIVE COFR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"111 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"259 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"132 C KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"317 A.TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"96 PARADA Valenzuela City"},{"Raw Address":"193 6TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"252 ABELARDO Parada Valenzuela City"},{"Raw Address":"285 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"015 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"203-18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Q5151 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"411 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ. PARADA Valenzuela City"},{"Raw Address":"199 ANTHONY ST. PARADA Valenzuela City"},{"Raw Address":"177 FELISA ST. Parada Valenzuela City"},{"Raw Address":"78 PARADA ROAD EXTN. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA Parada Valenzuela City"},{"Raw Address":"68 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"135 A CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"KALYE ONSE Parada Valenzuela City"},{"Raw Address":"PARADA ST. Parada Valenzuela City"},{"Raw Address":"250-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q 551 CASTRO COMPD. Parada Valenzuela City"},{"Raw Address":"130 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"2-B F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"2695 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"ADOR STREET Parada Valenzuela City"},{"Raw Address":"67 PARADA RD. Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 FORTUNE STREET Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 A. MOLAVE ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"424 A. BURGOS ST Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. ROMARAO COMP. Parada Valenzuela City"},{"Raw Address":"93 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"1010 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"44 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"11 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"230-1-D S. D GUZMAN ST EMBUSCADO APT. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"207 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"218 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"175 23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"85 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ADOR ST SISCAR APT. Parada Valenzuela City"},{"Raw Address":"19 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"8 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"LOT 12 BLK 1 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#3 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"247 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"278 TATA ENTONG ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"282 SANTALON RD. PARADA Valenzuela City"},{"Raw Address":"257 ADOR ST Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"330 T.AMANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"1223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"200 A. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"091-B CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"325 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"140 NARRA ST FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO BAGONG SILANG Parada Valenzuela City"},{"Raw Address":"32- F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. RIVERA CMPD. Parada Valenzuela City"},{"Raw Address":"165 ACACIA Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE 501 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"35 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"02 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 207 22ND ST. Parada Valenzuela City"},{"Raw Address":"97 KAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"12B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"257 20ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"UNIT 1 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"204 6 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"003 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"242 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"306 - A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA RD. Parada Valenzuela City"},{"Raw Address":"287 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"272 A S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435-C ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"15 DIAMOND STREET Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"452 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"0024 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"24 JENUS Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILLAR ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"425-T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"Fortune Village 5 21ST. STREET Parada Valenzuela City"},{"Raw Address":"122 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. Parada Valenzuela City"},{"Raw Address":"18 ROAD Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST. Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE IV Parada Valenzuela City"},{"Raw Address":"0378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"243F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#73 B. PARADA RD. EXT. FV7 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Parada Valenzuela City"},{"Raw Address":"469 C. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"441 PARADA Valenzuela City"},{"Raw Address":"470 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"120 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"35 PARADA RD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"273 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#45 A. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDES ST. Parada Valenzuela City"},{"Raw Address":"198 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"297 - D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"192 RAMON ST. Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"#203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"182-D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"385 Parada Valenzuela City"},{"Raw Address":"M.DEGULA Parada Valenzuela City"},{"Raw Address":"155 ALICIA Parada Valenzuela City"},{"Raw Address":"360 DE GUZMAN ST. J- FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"202 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"9 PLUTO ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0013 7TH UNIT C FV 5 Parada Valenzuela City"},{"Raw Address":"101 DE GULA PARADA Valenzuela City"},{"Raw Address":"185-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"15-F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"022 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"231 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"243 19TH ST. Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"135 CONSUELO ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"357 Parada Valenzuela City"},{"Raw Address":"242 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"09 PARADA RD. Parada Valenzuela City"},{"Raw Address":"377 APT. 4 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"189 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE FOUR Village Parada Valenzuela City"},{"Raw Address":"29 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"468 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"462 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B1 L12 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"011 PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"58 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"230-S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"115 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0334 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"207 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"009 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"332 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"197 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#93 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"44B PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR STREET Parada Valenzuela City"},{"Raw Address":"258 S. D EGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"219 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"93 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"397 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"225 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"257 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"111 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. BUKID Parada Valenzuela City"},{"Raw Address":"05 FORTUNE Village 6TH ST. Parada Valenzuela City"},{"Raw Address":"111 A KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"193 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"186 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"062 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 PARADA Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"416 TATA ERRO Parada Valenzuela City"},{"Raw Address":"25 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"#39C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"255 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"1819 PEARLS ST. Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"170 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"446 F. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE ST. Parada Valenzuela City"},{"Raw Address":"56 P. DE GUZMAN TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"28 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"1 MO DIZON COMP. TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ Parada Valenzuela City"},{"Raw Address":"031 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"168 A CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"297-D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"96 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"172 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"310 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"470-A KAINGIN Parada Valenzuela City"},{"Raw Address":"135 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"FATIMA COMP. PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"443 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 20 GINTONG SILANGAN F. Parada Valenzuela City"},{"Raw Address":"215 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE DULO Parada Valenzuela City"},{"Raw Address":"27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"409 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 B TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELEZA ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"546 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"246 C S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"012 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"141 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"340 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"MERCURY STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"351 P. FRNACISCO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"121 C CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"175 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"#9E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"110 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"158 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B3 L 3 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 14 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"289 D SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. Parada Valenzuela City"},{"Raw Address":"32 B 258 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"112 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"42 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"195 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B1 L13 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168- SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"071 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"207 FILEZA BUKID Parada Valenzuela City"},{"Raw Address":"204 B ANTHONY STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"A CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"291 PARADA RD. Parada Valenzuela City"},{"Raw Address":"DR. 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"37 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"268 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"155 ALICIA FV 4 Parada Valenzuela City"},{"Raw Address":"43 PARADA RD. Parada Valenzuela City"},{"Raw Address":"236 7TH STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG STREET Parada Valenzuela City"},{"Raw Address":"0104 AS8 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#94 A. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"002 YAKAL ST COR ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"405 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"176 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L22 EARTH F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. FORTRUNE 4 Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"032 PARADA Valenzuela City"},{"Raw Address":"190 6TH ST. COR. MOLAVE PARADA Valenzuela City"},{"Raw Address":"181 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L11 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"329 T.MANANG Parada Valenzuela City"},{"Raw Address":"5TH ST. Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"359 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO RD. PARADA Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"2645 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10E FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 23RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. Parada Valenzuela City"},{"Raw Address":"99 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"412 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"18 PARAD ROAD Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"097 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"L19 B3 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"L-5 BLK-06 NARRA ST. Parada Valenzuela City"},{"Raw Address":"466-C KAINGIN KABERONG Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO 31 EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 CALLE ONSE BO.PARADA Valenzuela City"},{"Raw Address":"19 CARACTA VillageE KAINGIN Parada Valenzuela City"},{"Raw Address":"77 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"141 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"266 F 24TH STREET Parada Valenzuela City"},{"Raw Address":"45A EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"365 F TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"206-4 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"441 RUMARAO CPD. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"341 21ST FOTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"171 SALAZAL Parada Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"120 CORNER ST. 25TH ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"224H 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 - 21 ST. FV5 Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"212 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"242 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"096 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BL 3 LT 24 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0351 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21ST FORTUNE Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"391F P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"37 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"DULO Parada Valenzuela City"},{"Raw Address":"438-SERVILE ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA Parada Valenzuela City"},{"Raw Address":"219 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 22 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"JADE CORNER SAPPHIRE Parada Valenzuela City"},{"Raw Address":"413 H P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"# 9 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"411-B P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMA ST.N Parada Valenzuela City"},{"Raw Address":"452 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"230 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"ILOCTO C5 Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"8 IPIL ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 19TH ST. COR. 21ST. Fortune Village 5 BO. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"98 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"194 6TH STREET Parada Valenzuela City"},{"Raw Address":"# 94 A. FELEZA ST. Parada Valenzuela City"},{"Raw Address":"338 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"109 25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"220 C 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"207 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"#18 GP WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"412 TATAERO 6 Parada Valenzuela City"},{"Raw Address":"257 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT10 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMP. FORTUNE Parada Valenzuela City"},{"Raw Address":"267 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"430 GOME ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"123 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"359 J. FRNACISCO ST. Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"DR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"122 CONSUELO ST. FORTUNE 04 Parada Valenzuela City"},{"Raw Address":"290 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"44 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"114 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"B2L14 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"153 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"26. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"91-B S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"10 E.FRANCISCO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG ST. Parada Valenzuela City"},{"Raw Address":"185 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"330 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"099 PARADA Valenzuela City"},{"Raw Address":"507 23ST FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"24 A CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"251 25TH ST. Parada Valenzuela City"},{"Raw Address":"169 ACACIA STREET Parada Valenzuela City"},{"Raw Address":"F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"36 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"204 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"144 DALAWAN ST.PARADA Valenzuela City"},{"Raw Address":"113 LAGDAMEO ST. FV. 4 PARADA Valenzuela City"},{"Raw Address":"199 21 ST. Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#27 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"189-24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"50 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 15 A207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 LOT15 AREA-A FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"168 MOLAVE Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"37 C PARADA RD. PARADA Valenzuela City"},{"Raw Address":"203B VENUS ST. Parada Valenzuela City"},{"Raw Address":"#41 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"150 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"190-C 6TH ST. COR KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"272 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE 05 Village Parada Valenzuela City"},{"Raw Address":"316 JIMINEZ CMPD. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA BUKID Parada Valenzuela City"},{"Raw Address":"0192 E 6TH ST. FORTUNE Village PH 6 Parada Valenzuela City"},{"Raw Address":"229 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"100 A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"160 NARRA ST. COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"377 18ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"71 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"325 TADANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"B2 L20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"23 EUGENIO Parada Valenzuela City"},{"Raw Address":"MM. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"486 KAINGEN ST. Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"454 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"155 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"351 Parada Valenzuela City"},{"Raw Address":"148 DALAWAN Parada Valenzuela City"},{"Raw Address":"0279 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"34 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"464 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"502 FORTUNE DRIVE COR. 23RD ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"381 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"160 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"ACASIA ST. KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"34 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"DOOR2 M. DE GULA ST Parada Valenzuela City"},{"Raw Address":"20 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"203 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"396 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"B5 L8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"278 PILAR ST Parada Valenzuela City"},{"Raw Address":"7 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"341 BO.PARADA Valenzuela City"},{"Raw Address":"242 19TH ST. Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLK 03 LOT 12 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"233 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"442 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"343 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"107 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0258 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"3 200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"243 7 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"87 BO Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"81 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"266 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"467 Parada Valenzuela City"},{"Raw Address":"173 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"182 D MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"250B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"409A P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"450 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"283 S DE GUZMAN SR. Parada Valenzuela City"},{"Raw Address":"308 MENES Parada Valenzuela City"},{"Raw Address":"146 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"B1L17 PARADA RD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"19 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"65 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"205 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 17 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B 4 L 10 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"18 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"85 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"162 MOLABE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. COR. YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST Parada Valenzuela City"},{"Raw Address":"165 YAKAL STREET FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"225 Fortune Village 4 ABILARDO ST. Parada Valenzuela City"},{"Raw Address":"F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"2 PASO DE BLAS Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"249 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"200 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"146 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L10 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"403 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"471 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND FORTUNE Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"297 D T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 6 BF SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"052 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 6ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"39B RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"18223 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"165 FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"456 -H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"COR. 23 STREET FV 5 Parada Valenzuela City"},{"Raw Address":"LAGDAMO ST. Parada Valenzuela City"},{"Raw Address":"374 Parada Valenzuela City"},{"Raw Address":"108 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B1 L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"79 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"45 A F SANTIAGO Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"68 B PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 12 7TH STREET Parada Valenzuela City"},{"Raw Address":"248 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. FOERTUNE 4 Village Parada Valenzuela City"},{"Raw Address":"320 D S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"27 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 BLK 2 TINADALOST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"241 S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"340 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"123 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"030 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. MANUKAN Parada Valenzuela City"},{"Raw Address":"444 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"163 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"293 A.ILOCTO ST. PARADA Valenzuela City"},{"Raw Address":"#002 YAKAL ST. Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"220 D 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"225 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST Parada Valenzuela City"},{"Raw Address":"297-C TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2675 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"442 ROSILLAS ST. Parada Valenzuela City"},{"Raw Address":"276 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"179 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"7 ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"LOT 1 BLCK 7 PARADA RD. Parada Valenzuela City"},{"Raw Address":"B1 L12 BUGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 5 21ST Parada Valenzuela City"},{"Raw Address":"438 SERVICE ROAD. Parada Valenzuela City"},{"Raw Address":"1956 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 Parada Valenzuela City"},{"Raw Address":"210 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"68 PARADA RD. Parada Valenzuela City"},{"Raw Address":"CA[T.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"#2 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"321-1 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 07 Parada Valenzuela City"},{"Raw Address":"247 DE GUZM Parada Valenzuela City"},{"Raw Address":"UNIT 3 SALAZAR Parada Valenzuela City"},{"Raw Address":"122 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"234 19 Fortune Village 5 ST Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELISA BUKID Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"279 Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"162E SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"103 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"164 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"006 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"151DALAWAN ST Parada Valenzuela City"},{"Raw Address":"137 KAINGIN Parada Valenzuela City"},{"Raw Address":"301 7TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"# 95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"525 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"F. FRANCISO ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"56 PARADA ROAD CORNER IPIL ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 4 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"S-8104 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"447 GOMEZ Parada Valenzuela City"},{"Raw Address":"143 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"70 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"BLK.1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"411 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"23 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"002 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN Parada Valenzuela City"},{"Raw Address":"39 K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 11 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 B SALAZAR ST Parada Valenzuela City"},{"Raw Address":"1314A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"248 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237-S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"087 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"FATIMA COMPOUND Parada Valenzuela City"},{"Raw Address":"L1 B2 S. DE GUZMAN ST. VillageA Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST.3 Parada Valenzuela City"},{"Raw Address":"BL 1 LT 12 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"39 D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"14 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"192 M.DE GULA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES STREET Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"108-B RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"56 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Parada Valenzuela City"},{"Raw Address":"457 INT. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"09 BO PARADA RD Parada Valenzuela City"},{"Raw Address":"281-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"164 Parada Valenzuela City"},{"Raw Address":"93 C CAP. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"299 PARADA JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"268 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"131 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"31 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"141 Fortune Village 5&6 Village Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"LOT 8 MERCURY ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"0260 I TATA ROMAN S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR. 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"201 SELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"9 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"269 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO COMPOUND Parada Valenzuela City"},{"Raw Address":"INT. ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"Village 5 Parada Valenzuela City"},{"Raw Address":"267 PETRA ST S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"136 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"08 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"357 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"204 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 L7 PARADA ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. Parada Valenzuela City"},{"Raw Address":"341 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"SUBDIVISION Parada Valenzuela City"},{"Raw Address":"LOT 11 BLK 5 JADE ST. Parada Valenzuela City"},{"Raw Address":"118 DOOR 4 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0094B C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"096 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"456 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"320 T.MANANG PARADA Valenzuela City"},{"Raw Address":"B4L12 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"125 CONSUELO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"95 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"137 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"455 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"82 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"123A KAMAGONG ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"353 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"94-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"175 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0250 DR2 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN CMPD ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"170SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"184 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"198 Parada Valenzuela City"},{"Raw Address":"310 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"411 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"8 C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"FORTUNE7 Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"177 ST. CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"195 FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"824 BURGOS ST. F.V 7 Parada Valenzuela City"},{"Raw Address":"028 PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"161 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VINUS ST. Parada Valenzuela City"},{"Raw Address":"341 21ST BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"110 LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"387 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"299 BO. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"192E 6ST. FORTUNR Village 5 Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"467 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"213 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"175 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"262 Parada Valenzuela City"},{"Raw Address":"289-D S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"171 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0345 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"187 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"266 24TH STREET Parada Valenzuela City"},{"Raw Address":"3 B F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"244 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B5 L7 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"391 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"443 B SERVICE RD. Parada Valenzuela City"},{"Raw Address":"26 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"269 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39-D SANTIAGO COMPD. FV4 Parada Valenzuela City"},{"Raw Address":"97 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"417 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"194 6 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187-A FELISA ST. PARADA Valenzuela City"},{"Raw Address":"31F SANTIANGO VENUS ST Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"0014 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 7 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"178 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"145 C NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"196 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATA ROMAN Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. Parada Valenzuela City"},{"Raw Address":"411 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"260 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"INT. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"111 UNIT B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"194 COR. 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"389 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93-A CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"119B PEARL ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"192 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"93-A CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"393 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG Parada Valenzuela City"},{"Raw Address":"411 C P.DE GUZMAN ST. TATA ERO Parada Valenzuela City"},{"Raw Address":"140-B E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. FORTUEN 7 Parada Valenzuela City"},{"Raw Address":"E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"148 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"101A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ST Parada Valenzuela City"},{"Raw Address":"367 FELISA Parada Valenzuela City"},{"Raw Address":"14 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FORT Village Parada Valenzuela City"},{"Raw Address":"169D 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"460 GOMEZ STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"13 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297B TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMPOUND SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"B1 Parada Valenzuela City"},{"Raw Address":"259 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"356 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"174 FELISA Parada Valenzuela City"},{"Raw Address":"351 PINAGPALA F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"9 PLOTO ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"030 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"12 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"444 SERVICE RR. Parada Valenzuela City"},{"Raw Address":"123-2 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"90 ADOR STREET Parada Valenzuela City"},{"Raw Address":"327 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"357 J. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"186 UNIT 3 FELIZA ST Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRESS STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"179 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"406 T. MANANG Parada Valenzuela City"},{"Raw Address":"184 FELISA ST. Parada Valenzuela City"},{"Raw Address":"271 Parada Valenzuela City"},{"Raw Address":"185 FELISA Parada Valenzuela City"},{"Raw Address":"384 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"268 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"241 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 6 LOT 4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"111 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"ADOR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"310 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"AURORA COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"14 B. PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 TMHOA Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"69 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 21ST AGLEHAM COMPD. Parada Valenzuela City"},{"Raw Address":"3498 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"476 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FV 4 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"094 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"180 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"23 T EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"9001 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4792 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"227 A BELARDO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"38 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"468 KINGIN ST. Parada Valenzuela City"},{"Raw Address":"347-F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"341 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"220 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"311 MENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"124 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"225 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"469 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"199 21ST FV5 Parada Valenzuela City"},{"Raw Address":"243 PACING Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 5 TMHOA Parada Valenzuela City"},{"Raw Address":"0250 UNIT 11 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. BO.PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"#283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"95 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"188 MOLAVE ST. CORNER 6TH ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"275 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"DE GULA APT. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"377 18 STREET Village Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"264 19TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"20 F. SANTIAGO EARTH ST. Parada Valenzuela City"},{"Raw Address":"195 KALYE ONSE Parada Valenzuela City"},{"Raw Address":"26 NARRA ST. FV 5&6 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"75 GOMEZ STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"279 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. E-E COMP. Parada Valenzuela City"},{"Raw Address":"504 FORTNE DRIVE Parada Valenzuela City"},{"Raw Address":"168 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"286 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"317 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"349F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"004 BO. Parada Valenzuela City"},{"Raw Address":"27 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"194 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#97 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"456 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"346 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"1106 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"FORT Village 4 Parada Valenzuela City"},{"Raw Address":"135 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"88 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"115 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"162-D SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"203 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"CALLE 11 BUKID ST. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"412 PARADA Valenzuela City"},{"Raw Address":"214 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"141DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"190D 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"258 GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"306 CAPT. DAET CPD. PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"291 Parada Valenzuela City"},{"Raw Address":"178 RAMON STREET Parada Valenzuela City"},{"Raw Address":"113 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 A CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B1 L10 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"050 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"272 S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"141 UNIT 4 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. Parada Valenzuela City"},{"Raw Address":"203 6TH STREET FORTUNE VillageE 5-6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"411 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"PEARL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"225 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"274 BO.PARADA Valenzuela City"},{"Raw Address":"10 PARADA RD. Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"B1L8 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"390 Parada Valenzuela City"},{"Raw Address":"403 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"165 SALAZAR ST. BO. PARADA Valenzuela City"},{"Raw Address":"412 A P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. PARADA Valenzuela City"},{"Raw Address":"TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"73-B PARADA RD. EXT FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"415 TATA ERO Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"59 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 AGLEHAM COMPD. 21ST ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4 Parada Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"410 A-P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"33 E. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"0346 FELISA ST. Parada Valenzuela City"},{"Raw Address":"24 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"19 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"172 MOLAVE ST Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"018 EUGENIO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"863 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"31 UNIT 4&5 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"271 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"8F CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"196 MALAVE ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"124 B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"24TH BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"24 B F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"271 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD.PARADA Valenzuela City"},{"Raw Address":"36 C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40- P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"RASILIA 438 PARADA Valenzuela City"},{"Raw Address":"39-C RD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"211 21TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"95 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"393 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"212 21ST. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"E & E COMP. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"223 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"455 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"056 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"352 G. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"183 23RD. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"202 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"176 23RD ST. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"254 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"B5 L11 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"NO 172 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"252-A BLOCK 2 LOT 2 S. DE GUZMANS ST. Parada Valenzuela City"},{"Raw Address":"14-B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"196 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"188 RAMON ST Parada Valenzuela City"},{"Raw Address":"215 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"17 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"199 B CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"17 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"117 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"007 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"168 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"320 Parada Valenzuela City"},{"Raw Address":"8 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"460 P GOMEZ ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"148 NARRA ST. Parada Valenzuela City"},{"Raw Address":"E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"30 B. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"140 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"#170 SALAZAR T. DOON CMPD Parada Valenzuela City"},{"Raw Address":"009 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"185C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"T.EUGENIO Parada Valenzuela City"},{"Raw Address":"121 CONSUELA ST.FV4 Village Parada Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B-4 L-28 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"185 B FELIZA ST Parada Valenzuela City"},{"Raw Address":"139 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"121 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"365B TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"20 SALAZAR Parada Valenzuela City"},{"Raw Address":"T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ CMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"314 BO.PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"464-A KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"279 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"218 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"142 DALAWAN Parada Valenzuela City"},{"Raw Address":"310 MENES ST. Parada Valenzuela City"},{"Raw Address":"RUMARAO COMP. Parada Valenzuela City"},{"Raw Address":"127 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"118 C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"153 PINAGPALA PHASE 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"96 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"075 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"251 25TH ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"182 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD Parada Valenzuela City"},{"Raw Address":"091 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES B.O Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"130 NARRA ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. FORTUNE Village 5 B PARADA Valenzuela City"},{"Raw Address":"19TH ST. Parada Valenzuela City"},{"Raw Address":"271 A. MARIA ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"225 AVELARDO ST. Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG STREET Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"413 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"L16 B5 349 F.FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA ROAD FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"NO. 199 21 ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"181 RAMON ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"6 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"60 PARADA RD. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"#113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"325 PARADA Valenzuela City"},{"Raw Address":"158 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 18 PEARL HIYAS Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"415 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"067 PARADA ST. Parada Valenzuela City"},{"Raw Address":"126 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"110 KAMAGONG Parada Valenzuela City"},{"Raw Address":"207 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"18 GP ST. WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ Parada Valenzuela City"},{"Raw Address":"341 PARADA 2OTH ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"LOT 8 BLK.3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"116 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"888 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA STREET Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"402 7TH ST. FV. 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"397 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"423 ZAMORA ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"224 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"111-A E.LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"88 D CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BF SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"248 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"463 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"351 PHASE 2 PINAGPALA F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"320S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"207 PILISA BUKID Parada Valenzuela City"},{"Raw Address":"LE 116 CAPT. CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B1L10 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"6 NARRA ST. Parada Valenzuela City"},{"Raw Address":"12-B KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"143 CAPT. CRYZ ST. Parada Valenzuela City"},{"Raw Address":"207 ST. FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"165 UNIT 4 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"324 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Village 6 Parada Valenzuela City"},{"Raw Address":"217 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 11 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"103 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"112 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"GINTONG SILANG F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"24TH ST. FORTUNE5 Parada Valenzuela City"},{"Raw Address":"273 PILAR Parada Valenzuela City"},{"Raw Address":"171 RAMON ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOP ST. Parada Valenzuela City"},{"Raw Address":"#88 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"235 S Parada Valenzuela City"},{"Raw Address":"466-C KABERONG KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"439 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"01 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"244 7TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City. Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"018 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"9 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"8 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"407 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"02 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"188 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"333 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"450 NORTH DIVERSION PARADA Valenzuela City"},{"Raw Address":"258 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"22 ST. FORTUNE Village 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. Parada Valenzuela City"},{"Raw Address":"98 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#39 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"36A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"320-E S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"0345 KALYE 11 Parada Valenzuela City"},{"Raw Address":"59 BANDINO CORP. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"456 KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"290 KAINGIN Parada Valenzuela City"},{"Raw Address":"204 C.F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANAG ST. Parada Valenzuela City"},{"Raw Address":"#468 M KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PUROK 1 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"407 M DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"504 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"136 E LAGDAMEO ST. Fortune Village 4 VIL Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"45 A FSANTIAGO Parada Valenzuela City"},{"Raw Address":"001 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 CORNER 6 TH ST. Parada Valenzuela City"},{"Raw Address":"068A PARADA RAOD Parada Valenzuela City"},{"Raw Address":"0317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"86 SALVADOR STREET Parada Valenzuela City"},{"Raw Address":"8 FIFTH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"501 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 43 LOT 23 FORTUNES 5 Parada Valenzuela City"},{"Raw Address":"291 PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"94 PARADA RD. Parada Valenzuela City"},{"Raw Address":"199 Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"199 21 STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK. 6 LOT 5 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"122 B KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"187 24TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B 1 L10 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"410 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH. ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"307 A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. 215 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"L1 PHASE 2 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK 1 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"10 5TH FORTUNE Parada Valenzuela City"},{"Raw Address":"18 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"199 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"PILAR ST. FORTUNE Village4 MALINTA Valenzuela City Parada Valenzuela City"},{"Raw Address":"204 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"FELIZA ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"409 P. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"290 PARADA Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"315 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"294 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"165 SALZAR ST Parada Valenzuela City"},{"Raw Address":"78 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B3 L2 GINTONG SILANGAN 349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"FORTUNE Village 4. PARADA Valenzuela City"},{"Raw Address":"054 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMPOUND Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"132 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"091 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"COR. KAMAGONG Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"34A F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"259 25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"78B PARADA Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"035 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"039 D.SANTIAGO COMP. RAMON ST. F.V.PH4 Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"278 SANTOLAN RD Parada Valenzuela City"},{"Raw Address":"KAINGIN RD. PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUMAN ST. Parada Valenzuela City"},{"Raw Address":"412 TATA ERO ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"COR. CORAL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"59 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"147 DALAWA ST. Parada Valenzuela City"},{"Raw Address":"117 E. LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"378 A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"386 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"320 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"90 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR Parada Valenzuela City"},{"Raw Address":"199F 6TH FORTUNE Village Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN Parada Valenzuela City"},{"Raw Address":"FELISA STREET Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ DE GULA COMP Parada Valenzuela City"},{"Raw Address":"93C CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST. BO. Parada Valenzuela City"},{"Raw Address":"255 TOMASA Parada Valenzuela City"},{"Raw Address":"125 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"297 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"272-A S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 6TH ST. Parada Valenzuela City"},{"Raw Address":"111-C KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"CORNER 120 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"08 MARS ST. Parada Valenzuela City"},{"Raw Address":"299 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407B P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365-G TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"80 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"5 PARADA RD Parada Valenzuela City"},{"Raw Address":"39-C PARADA RD. Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"0036 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"141FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"145 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"260 TATA ROMAN ST. PARADA Valenzuela City"},{"Raw Address":"390 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"330 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"39 RAMON Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"352 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"302 ABELLARDO Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"13 UNIT 4 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"92 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LACAY APT.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"207 FILIPA BUKID Parada Valenzuela City"},{"Raw Address":"22 AT EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"94 A. FELISA STREEET Parada Valenzuela City"},{"Raw Address":"FORTUNEVillage6 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#33 EARTH ST. E. SANTIAGO Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN ST. Parada Valenzuela City"},{"Raw Address":"1740 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 KAINGEN Parada Valenzuela City"},{"Raw Address":"2745 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"7 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"834 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"131 K. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 A.P. DE GUZMAN TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"267 PETRA ST Parada Valenzuela City"},{"Raw Address":"21 BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD FORTUNE Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST FV5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 5 AGLEHAM 2IST ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"257 25TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"88 H CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"252 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"279 PILAR ST.FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST . Parada Valenzuela City"},{"Raw Address":"177 CAPTIAN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD CORNER FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 1/E DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"240 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"039 PARADA Valenzuela City"},{"Raw Address":"TATA ERRO Parada Valenzuela City"},{"Raw Address":"319 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"30 PARADA RD. Parada Valenzuela City"},{"Raw Address":"FELISA ST.PARADA Valenzuela City"},{"Raw Address":"79 CAPT.CRUZST. PARADA Valenzuela City"},{"Raw Address":"39 B UNIT 5 RAMON ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"#201 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"97 B CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"067 C PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"239 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PESAHAV Village Parada Valenzuela City"},{"Raw Address":"457 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"181 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"232 ABELARDO STREET FORTUNE Village NO.4 Parada Valenzuela City"},{"Raw Address":"152 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"12 VENUS ST Parada Valenzuela City"},{"Raw Address":"228 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"128 Parada Valenzuela City"},{"Raw Address":"220 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"513 ABCO COMPD. TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-469 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 9 BLK. 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"96 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"472 PETRA Parada Valenzuela City"},{"Raw Address":"168 ALICIA Parada Valenzuela City"},{"Raw Address":"320 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"140 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"100 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"I207 Parada Valenzuela City"},{"Raw Address":"411 A P. DE GUZMAN TATA ERO Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"Q-4 289 KAMAGONG ST.PARADA Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. DE GULA CPD. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST.FV 6 PARADA Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"94-D FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"B13 Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"331 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"127 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"307 PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"157 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"038 PARADA RD. Parada Valenzuela City"},{"Raw Address":"315 MENES COMP. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"L10 &12 UNITE 7ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"365-J TATA ANDRES Parada Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"308 A. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 DOON COMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"416 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"1262 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"24 T EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"411 C TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"173 23RD ST. Parada Valenzuela City"},{"Raw Address":"104 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"Valenzuela City Parada Valenzuela City"},{"Raw Address":"334 A. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"342 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"197 ANTHONY Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"UNIT 3-A BLOCK 9 LOT 30 NARRA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"JADE COR. SAPHIRE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"314 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 13 FRANCISCO G. SILANGAN Parada Valenzuela City"},{"Raw Address":"288 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"468-I KAINGIN ST Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"51 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"230 11-F S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"80 Parada Valenzuela City"},{"Raw Address":"45 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMP Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 20 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"V.P.S. COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"BLK2 LOT19 HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"121 CONSEULO ST. Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST.FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 BO. PARADA Valenzuela City"},{"Raw Address":"068 A PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"207 CALLE ONSE BUKID DULO Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"333-C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"8 SAPPHIRE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"172 SALAZAR Parada Valenzuela City"},{"Raw Address":"206 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"176 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122C KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"0004 BLOCK 4 LOT 3 JADE ST. Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"115 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"248 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"282 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"8 M LAUREL DRIVE Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"118 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"410 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"232 G. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"173 SALAZAR Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. Parada Valenzuela City"},{"Raw Address":"LOT5 BLK 5 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"204 22ND ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"237 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"330 T. MANANG Parada Valenzuela City"},{"Raw Address":"0331 D TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Parada Valenzuela City"},{"Raw Address":"297 B. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"287 SANTOLON RD Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"262 25TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"245 RAMON ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. EXTENSION Parada Valenzuela City"},{"Raw Address":"468 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"109 KAMAGONG STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"234 FORTUNE 19 ST. Parada Valenzuela City"},{"Raw Address":"467 A. KAINGIN Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"BLK. 4 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG ST.PARADA Valenzuela City"},{"Raw Address":"207 FELISA STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"363 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"3204 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185-A MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"249 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"232 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"259 ADOR Parada Valenzuela City"},{"Raw Address":"315 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 2 TMHOA Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"5 5TH ST. Parada Valenzuela City"},{"Raw Address":"12D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"155 C. ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"114 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICI ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67B PARADA RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"374 TATA ANDREZ STREET Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"142 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"415 TAERO ST. Parada Valenzuela City"},{"Raw Address":"229 18TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L2 B6 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 BAN MARIE ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPOUND ST. PARADA Valenzuela City"},{"Raw Address":"202 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"262 25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"227 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMES STREET Parada Valenzuela City"},{"Raw Address":"257 S.DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"K 39 RAMON STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"501 NARRA ST. FORYUNE 6 Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100-E DE GULA COMPOUND Parada Valenzuela City"},{"Raw Address":"444 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE GARDEN 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"084 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"216 ANTHONY ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"392 ILOCTO COMP. KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"228 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"36 PARADA RD Parada Valenzuela City"},{"Raw Address":"062 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"KABERONG ST. Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"266 24TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"454 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"157 SALAZAR Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 B. MOLAVE ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"402 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 6 LOT 5 GINTONG Parada Valenzuela City"},{"Raw Address":"97B CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"442 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT Parada Valenzuela City"},{"Raw Address":"248 PARADA RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"401 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"258 INT. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"186 FELIZA ST Parada Valenzuela City"},{"Raw Address":"409 BIASON COMPD. P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"88 D CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"152 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"ALFONSO APARTMENT"},{"Raw Address":"148 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"BL10 L5 D NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"0343-C FELISA ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST FORTUNE IV Parada Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1 D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"228 18TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"37 PARADA Valenzuela City"},{"Raw Address":"P DE GUMAN Parada Valenzuela City"},{"Raw Address":"110 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"23RD ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"152 ACACIA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"027 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21 ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"278 7TH FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"199 21 ST. FV 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"164 SALAZAR Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"0320 B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"071 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"42 MARS ST. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"113 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. PARADA Valenzuela City"},{"Raw Address":"121 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"360 Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"YAKAL ST. COR. ACACIA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST. PARADA Valenzuela City"},{"Raw Address":"22 EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CORNER HIYAS Parada Valenzuela City"},{"Raw Address":"179 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"443 B. WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"24 T. EUGENIO Parada Valenzuela City"},{"Raw Address":"376 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"313 JEMENEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. Parada Valenzuela City"},{"Raw Address":"046 FORTUNE RD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"22 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"513 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"156 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"283 MARTHA Parada Valenzuela City"},{"Raw Address":"203 B. VENUS STREET Parada Valenzuela City"},{"Raw Address":"# 94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET SAN MIGUEL COMP Parada Valenzuela City"},{"Raw Address":"351 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"440 B. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149B 6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"#39 D. SANTIAGO COMPD. F4 Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"135 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"310 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"33 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"287 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"30 C TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. COMP. Parada Valenzuela City"},{"Raw Address":"43 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"242 19 TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"289 SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"362 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"108 CORNER YAKAL KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"2585 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"244 7TH STRET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"355 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"63 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"416 TATA-ERO ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"UNIT 1 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"L5 B10 A NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"274 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"369 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"199 BEN MARI COMPOUND 22 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"128 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"27 PARADA RD. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"258 INTERIOR M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"0011 ADOR ST. Parada Valenzuela City"},{"Raw Address":"106 KAMAGONG ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"162-C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"322 PEÑA COMP. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"228 - B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"72 FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"247 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"123 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"018 BARRIO Parada Valenzuela City"},{"Raw Address":"BLOCK 3 LOT 16 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"170 C. SALAZAR ST. DOON COMP. Parada Valenzuela City"},{"Raw Address":"297 T.MANANG ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"182 23RD ST. FORTUNE VIILAGE 5 Parada Valenzuela City"},{"Raw Address":"Q487 IPIL STREET Parada Valenzuela City"},{"Raw Address":"187 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"0359 J.F. FRANCISCO ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"326 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B-7 L-25 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"20 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"F.FRANCISCO S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRE ST. Parada Valenzuela City"},{"Raw Address":"PARADA Valenzuela City"},{"Raw Address":"B4L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"285 25TH ST. FORTUNE Village PH5 Parada Valenzuela City"},{"Raw Address":"469 PARADA KAINGIN Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"317 A T.MANANG ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B 5 L 9 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"1336 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE MARCELO COMPD. Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 10 E FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"122B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"238 19TH ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. PARADA Valenzuela City"},{"Raw Address":"161 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 -G S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"116 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"276 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"187 24TH ST Parada Valenzuela City"},{"Raw Address":"428 SEVICE RD. Parada Valenzuela City"},{"Raw Address":"PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"A 94 FELISA ST. Parada Valenzuela City"},{"Raw Address":"117 E LAGDAMEO ST.FV 4 Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 M. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"119 21 ST. BENMARIE COMP. FORTUNE V Parada Valenzuela City"},{"Raw Address":"24 VENUZ E2E COMP. F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5. Parada Valenzuela City"},{"Raw Address":"#109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"456-G KAKAWATE ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"458 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"241 7TH Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 C S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"243 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"26 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"LOT 10 E&E COMPOUND Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"33A. FATIMA COMP. Parada Valenzuela City"},{"Raw Address":"248 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J FRANCISCO Parada Valenzuela City"},{"Raw Address":"415 T MANANG ST. Parada Valenzuela City"},{"Raw Address":"274 S Parada Valenzuela City"},{"Raw Address":"37-D PARADA RD. Parada Valenzuela City"},{"Raw Address":"391 P.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"APB MOLAVE ST. 6TH Parada Valenzuela City"},{"Raw Address":"83 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST HIYAS HOMES SUBD Parada Valenzuela City"},{"Raw Address":"B1L4 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"257 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#1 24 ST. FORTUINE 5 Parada Valenzuela City"},{"Raw Address":"165 SALASZAR ST. Parada Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"90 ADOR ST. Parada Valenzuela City"},{"Raw Address":"188 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"0042 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"430 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"438 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"ALICIA ST.FV 4 Parada Valenzuela City"},{"Raw Address":"118 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"206 UNIT 1 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT 3 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B1L2 TMOA Parada Valenzuela City"},{"Raw Address":"438 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"192 RAMON Parada Valenzuela City"},{"Raw Address":"10 10 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"204 6TH ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONCE CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"357 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"392-B S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"406 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"201 A. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E. Parada Valenzuela City"},{"Raw Address":"154 C SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"106 LAG DAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"172 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"377 18 ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. PARADA Valenzuela City. Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"4684 HIYAS HOME SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 20 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B 2 L 13 349 FRACISCO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"168 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"450 CARREON CPD. WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"246 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"199 Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"138 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"179 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"204 BF SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"260 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Parada Valenzuela City"},{"Raw Address":"B2 L14 F. FRANCISCO GUINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"44 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"32 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON COMP. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"362 B TATA ANDRES Parada Valenzuela City"},{"Raw Address":"179 RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"253 ABVELARDO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"12 VENUS ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"B4 L9 349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"273 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"287 SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"29207 FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK5 LOT18 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"4480 25TH ST. Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE FORTUNE Village Parada Valenzuela City"},{"Raw Address":"#244 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"279 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 NARRA ST. Parada Valenzuela City"},{"Raw Address":"#122 B. CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"235 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"5880 CORAL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"257 RIZALINA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"89 Parada Valenzuela City"},{"Raw Address":"279-3 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 13 LOT 27 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. Parada Valenzuela City"},{"Raw Address":"249 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"BLOCK 1 LOT 7 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. PARADA Valenzuela City"},{"Raw Address":"384 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"270 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"29 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"239 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"365 TATA ANDRESS Parada Valenzuela City"},{"Raw Address":"372 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"124 LAGDAMEO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"402 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L-31 B-8 PARADA ROAD FORTUNE VILLAGE Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 C. CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"21ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"462 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FV7 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"285 S.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"456 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 TATA IRRO ST. Parada Valenzuela City"},{"Raw Address":"260 RIZALINA ST. Parada Valenzuela City"},{"Raw Address":"#207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"47 B. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"56 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0325 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"186 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"145B NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"351 CAPT. FRANCISCO EXT. Parada Valenzuela City"},{"Raw Address":"22 IMPONG JUANA ST. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1752 3RD STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"226 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"424 BUROGOS Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 BO. Parada Valenzuela City"},{"Raw Address":"091 FORTUNE DR. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 5 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"102 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"94 FELIZA ST Parada Valenzuela City"},{"Raw Address":"440B GOMEZ ST. FORTUNE Village7 MALINTA Parada Valenzuela City"},{"Raw Address":"174 FELIZA Parada Valenzuela City"},{"Raw Address":"152 ALICIA Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"86 SALVADOR ST. PARADA Valenzuela City"},{"Raw Address":"L7 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"B1 L9 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"255 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"234 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 PARADA PEARL Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"275 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST Parada Valenzuela City"},{"Raw Address":"255 TOMASA PARADA Valenzuela City"},{"Raw Address":"302 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"259 25TH ST. Parada Valenzuela City"},{"Raw Address":"411 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"145-C NARRA STREET Parada Valenzuela City"},{"Raw Address":"256 25TH STREET Parada Valenzuela City"},{"Raw Address":"66 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"40 PEARL STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"140 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"341 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"89 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"70 PARADA RD. Parada Valenzuela City"},{"Raw Address":"39 D. SANTIAGO CMPD. FV4 Parada Valenzuela City"},{"Raw Address":"407 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"L8 B6 GINTONG SILANGANAN F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"412 ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"99 VENUZ ST. F.SNTIAGO Parada Valenzuela City"},{"Raw Address":"270 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"389 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"125 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"351-C F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"87 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"243 Fortune Village 5 7TH ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"403 FORTUNE Village 5 ST. PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"045 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. BO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"468-O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"BLK 10 LOT41 NARRA ST Parada Valenzuela City"},{"Raw Address":"27A NEW BLOCK 10 NARRA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"CASTILLO COMPD. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENES COMPD. BO. PARADA Valenzuela City"},{"Raw Address":"7 5TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"315 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"384 S.DEGUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 6ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"135 LAGDAMEO ST. Fortune Village 4 VillageE Parada Valenzuela City"},{"Raw Address":"451 ZAMORA Parada Valenzuela City"},{"Raw Address":"168 DOON CMP SALAZAR ST Parada Valenzuela City"},{"Raw Address":"246 C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"94 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"456-D KAKAWATE ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST. FV4 Parada Valenzuela City"},{"Raw Address":"218 ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"125 Parada Valenzuela City"},{"Raw Address":"224 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 10 JADE ST. SUBD. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6B F-SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"474 KA BERONG Parada Valenzuela City"},{"Raw Address":"40 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 2 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"31 F-SANTIAGO Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"GOMES ST. Parada Valenzuela City"},{"Raw Address":"CITY MM. Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD ST Parada Valenzuela City"},{"Raw Address":"5 JUPITER ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"96 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"236 19TH ST. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"146 Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"19B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. LOT 8 Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"1548-A PEARL ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"200 A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"255 TOMASA ST Parada Valenzuela City"},{"Raw Address":"200 CALLE ONCE PARADA Valenzuela City"},{"Raw Address":"114 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"184 23RD ST. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO MANUKAN Parada Valenzuela City"},{"Raw Address":"18A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"169 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"246 PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MORONG ST. Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"023 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"202 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"267 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGOMARS ST. Parada Valenzuela City"},{"Raw Address":"171-A SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"098 Fortune Village 5 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA STREET Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"215 ANTHONY STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"272 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"201 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"276 B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"354 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"199 21ST VF5 Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Fortune Village 5&6 Parada Valenzuela City"},{"Raw Address":"240 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1028 B. KAMAGONG ST. FV6&5 Parada Valenzuela City"},{"Raw Address":"0468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"193 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"135 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21ST ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"423 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"131 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1430 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"229 18TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"256 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"200 CAPT. CRUZ CALLE ONSE Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"427 BURGOS ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. 21ST FV5 Parada Valenzuela City"},{"Raw Address":"53 3RD FORTUNE V Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"B1 L12 BURGOS Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"325 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"1213 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"3B P.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"91 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"055 PARADA FORTUNE5 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"15 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"27 A. PARADA RD. Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ PARADA Valenzuela City"},{"Raw Address":"004 PARADA Valenzuela City"},{"Raw Address":"117 LAGDAMEO FV 4 Parada Valenzuela City"},{"Raw Address":"462 P GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN Parada Valenzuela City"},{"Raw Address":"147 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"134 E LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"220-C 21 ST. Fortune Village 5 SUBD. Parada Valenzuela City"},{"Raw Address":"1 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"192 M. DE GULA Parada Valenzuela City"},{"Raw Address":"6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"274 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"391 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"376 Parada Valenzuela City"},{"Raw Address":"153 6TH ST. FORTUNE FIVE Parada Valenzuela City"},{"Raw Address":"437-M GOMEZ ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"16B SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"243 7TH ST. Parada Valenzuela City"},{"Raw Address":"269 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST Parada Valenzuela City"},{"Raw Address":"202 22ND ST. Parada Valenzuela City"},{"Raw Address":"# 31 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"467 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"4560 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36D PARADA RD. Parada Valenzuela City"},{"Raw Address":"190 6TH ST FORTUNE Village 5 &6 Parada Valenzuela City"},{"Raw Address":"266 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"201 22ND ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"219 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"307 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"199 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"390 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"154 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"232 DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FV7 Parada Valenzuela City"},{"Raw Address":"264 B 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"190 DE GULA STREET Parada Valenzuela City"},{"Raw Address":"128 PARADA ROAD Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"34 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"246 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"377 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"#26 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"# 66 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST. SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0005 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"351 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"100 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"122 A. KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"454 7TH ST. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"190 6ST MOLAVE Fortune Village 5-6 Parada Valenzuela City"},{"Raw Address":"279 PILAR Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"196 MOLALE ST. Parada Valenzuela City"},{"Raw Address":"170 DOON COMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"160 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"4387 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"192 M. DE GULA STREET Parada Valenzuela City"},{"Raw Address":"199 21 ST. BENMARIE COMP. Parada Valenzuela City"},{"Raw Address":"275 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"119 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 21ST STREET Parada Valenzuela City"},{"Raw Address":"340 2OTH STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"260 TATAROMAN ST Parada Valenzuela City"},{"Raw Address":"TATA ERO ST. PARADA Valenzuela City"},{"Raw Address":"S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"168 DOON COMP Parada Valenzuela City"},{"Raw Address":"273 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"72 JADE ST. Parada Valenzuela City"},{"Raw Address":"332M T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO ST FV4 Parada Valenzuela City"},{"Raw Address":"122 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"216 D DE GUZMAN Parada Valenzuela City"},{"Raw Address":"192 C 6TH ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"BLK 12 LOT 5 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"313 MENES CMPD. PARADA Valenzuela City"},{"Raw Address":"207 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"212 21ST STREET FORTUNE V Parada Valenzuela City"},{"Raw Address":"137 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"120 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 20 A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"95 P. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"BLK. 6 LOT 9 JADE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"91 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"139 NARRA STREET Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"FORTUNE IV RAMON ST. Parada Valenzuela City"},{"Raw Address":"198 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"88 Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"LE 116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"201 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"254 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"311 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"185 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"414 NO.4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"003 PARADA Valenzuela City"},{"Raw Address":"94-B FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"202 MOLAVE Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Parada Valenzuela City"},{"Raw Address":"488 ZAMORA ST Parada Valenzuela City"},{"Raw Address":"068 PARADA FORTUNE Village6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"181 RAMON STREET Parada Valenzuela City"},{"Raw Address":"119 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"377 18 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"31 F Parada Valenzuela City"},{"Raw Address":"172-B MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"#45 A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"273 S.DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"256 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 BLK 9 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"152 23RD ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG HOUSING PROJECT Parada Valenzuela City"},{"Raw Address":"FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"176 CAPTAIN CRUZ ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"28 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"321 B. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"27A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"306 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"L10 NEPTUNE ST Parada Valenzuela City"},{"Raw Address":"39 PARADA RD. Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"140 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"165 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"354 J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"19921 ST FORTUNE` Parada Valenzuela City"},{"Raw Address":"116 CALLE ONCE STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"2150 DAET COMPD. Parada Valenzuela City"},{"Raw Address":"386 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"104 E. LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"231 18ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5F SANTIAGO STREET. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"2507 - FILIZA BUKID Parada Valenzuela City"},{"Raw Address":"22 EUGENIO Parada Valenzuela City"},{"Raw Address":"279 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS ST. Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"348 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"371 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"282 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"BLK 9 LOT 30 UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN RD. Parada Valenzuela City"},{"Raw Address":"241 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"234 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"512 ABCO COMP FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"282 PILAR ST. Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE VILALGE 5 Parada Valenzuela City"},{"Raw Address":"207 A FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"166 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"015 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"359 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"162 E.SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"329 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"467 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"#199 21ST STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"134 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"064 PARADA ROAD FORTUNE Village Parada Valenzuela City"},{"Raw Address":"63 PARADA RD EXT. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"14 C PEARL ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"199 6TH STREET Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE. FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 C KAMAGONG ST. FORTUNE VI Parada Valenzuela City"},{"Raw Address":"199 21 ST Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CALLE ONCE ST. Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"93 C/ CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD ROMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"106 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"349 CAPT.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"L17-B2 SAPPHIRE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"10 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"464 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"#5 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"028 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"271 CONSUELO FV 4 Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"258 25TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 DAHOA PARAFORT Parada Valenzuela City"},{"Raw Address":"369 TATAANDRES ST Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"36 B PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#319 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"137 FORTUNE DR. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#97 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"411 C. TATA ERRO Parada Valenzuela City"},{"Raw Address":"12 Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"365 PARADA TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"LOT 15A 207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"19 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"404 P.DE GUZMAN PARADA RD. Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES ST.BO.Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B5 LOT 2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"177 GONZALES COMP. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"413 P/ DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"45 A. EARTH ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"FATIMA ANEX CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"228 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"472 KA BERONG ST. PARADA Valenzuela City"},{"Raw Address":"330 Parada Valenzuela City"},{"Raw Address":"168 KAMAGONG ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP Parada Valenzuela City"},{"Raw Address":"199 21ST ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"392-C P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"A334 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"Q4 289 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"31 F BO. Parada Valenzuela City"},{"Raw Address":"064 PARADA RD. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPD. Parada Valenzuela City"},{"Raw Address":"TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"274 TATA ENRONG STREET S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"20 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"0250 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"SAN MIGUEL COMP. ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST Parada Valenzuela City"},{"Raw Address":"0343-C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"181 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"349 F-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"330 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"314 SANTIAGO Parada Valenzuela City"},{"Raw Address":"261 25TH STREET Parada Valenzuela City"},{"Raw Address":"259 ADOR ST Parada Valenzuela City"},{"Raw Address":"185 CASTILLO COMPOUND FELIZA ST. Parada Valenzuela City"},{"Raw Address":"PARADA RD. PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"314 PARADA Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"B1L9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUGENIO F.A APT. Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. Parada Valenzuela City"},{"Raw Address":"19 B ZAMORA ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. FV 6 Parada Valenzuela City"},{"Raw Address":"068A PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"242 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"244 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-D. CALLE ONSE CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"# 207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"390S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"90 CAPT. ST. Parada Valenzuela City"},{"Raw Address":"175 A MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO STREET BLK4 LOT5 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"267 PETRA ST. Parada Valenzuela City"},{"Raw Address":"211 21ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"036 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"394 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"219 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"377 18 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"94 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"15 PARADA ST Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0013 TEMPO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"437 FV7 Parada Valenzuela City"},{"Raw Address":"5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"114 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. BLK 2 LOT 19 GINTONG Parada Valenzuela City"},{"Raw Address":"39 PARADA Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"68 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"B3 Parada Valenzuela City"},{"Raw Address":"282 S. DEGUZMAN Parada Valenzuela City"},{"Raw Address":"320B S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"KM 19 BO. PARADA ST. Parada Valenzuela City"},{"Raw Address":"6TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1727 B TATA ERO Parada Valenzuela City"},{"Raw Address":"245 B SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"439 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"204 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"187 B FELIZA STREET Parada Valenzuela City"},{"Raw Address":"144 E. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"345 CAPT FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"144 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"257 S DEGUZMAN STREET Parada Valenzuela City"},{"Raw Address":"PARADA RD. Parada Valenzuela City"},{"Raw Address":"185-D FELIZA STREET Parada Valenzuela City"},{"Raw Address":"7 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4781 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE ST. Parada Valenzuela City"},{"Raw Address":"200 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"199 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"204 VENUS STREET E.N.E COMPOUND Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CPD. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"449 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"CORNER SAPPHIRE ST. HIYAS SUBD. PEARL ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"290 SANTOLAN ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR Parada Valenzuela City"},{"Raw Address":"7 5TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"307 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"216 21ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FELISA ST. Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"367 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"SISCARA APT ADOR ST Parada Valenzuela City"},{"Raw Address":"BLK6 LOT7 GINTONG SILANGAN F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"B5 L1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"168 21 STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"187 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"336 T.MANANG BO. PARADA Valenzuela City"},{"Raw Address":"227 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"182 Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FV 4 Parada Valenzuela City"},{"Raw Address":"HIYAS HOME SUBD. SAPHIRE Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 9 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 8 LOT 10 CARACTA VillageE Parada Valenzuela City"},{"Raw Address":"403 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"269 INT S DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"244 7TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"255 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"46 P. DE GUZMAN BANDINO STREET Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SANTIAGO Parada Valenzuela City"},{"Raw Address":"40 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0147-E DOON ST. Parada Valenzuela City"},{"Raw Address":"468 - O KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"260 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"31 MARS ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 7 199 BENMARIE COMP. 21 ST. Parada Valenzuela City"},{"Raw Address":"180 FELISA ST. Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"206 22ND ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY Parada Valenzuela City"},{"Raw Address":"Q4289 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"#118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FV5 Parada Valenzuela City"},{"Raw Address":"KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"315 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"139 FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"468 Q KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 BF. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"1882 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"WEST SERVICE ROAD CARREON COMPD. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"240 7 STREET Parada Valenzuela City"},{"Raw Address":"202A 22 STREET Parada Valenzuela City"},{"Raw Address":"5TH ST. FV 5 PARADA RD. Parada Valenzuela City"},{"Raw Address":"141 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"252-A LOT 2 BLOCK 2 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"2157 BORNALES CPD.KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"90 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"#94 Parada Valenzuela City"},{"Raw Address":"036 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"327 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"283 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"313 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"167 6TH ST. Parada Valenzuela City"},{"Raw Address":"P DE GUZMAN COR TATA ERO Parada Valenzuela City"},{"Raw Address":"161 FELIZA Parada Valenzuela City"},{"Raw Address":"443 ROSELLA ST. Parada Valenzuela City"},{"Raw Address":"130 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"0290 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B1 L6 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"024 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"1 PARADA ST Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"242 S. DE GUZMAN COR. MARY ANN THIS WAY ST. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN BARRIO Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"270 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"032 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283-D DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"33 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. ST. FORTUNE Village Valenzuela City Parada Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"242 Parada Valenzuela City"},{"Raw Address":"101 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"ROAD Parada Valenzuela City"},{"Raw Address":"012 PARADA Valenzuela City"},{"Raw Address":"BL3LT9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"244 7TH ST.FORTUNE Village Parada Valenzuela City"},{"Raw Address":"185B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"235 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"336 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"468-E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"151 ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"177 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"111 UNIT KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"115 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"200 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"240 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"266 24 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"210 21ST COR. FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"188 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"243 S. D GUZMAN ST Parada Valenzuela City"},{"Raw Address":"315 MENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"30 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"A22 T. EUGENIO STREET Parada Valenzuela City"},{"Raw Address":"309 JEMENES COMP. Parada Valenzuela City"},{"Raw Address":"45A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST Parada Valenzuela City"},{"Raw Address":"3A 144 E. FRANCISCO Parada Valenzuela City"},{"Raw Address":"199 21ST BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"181 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"DOOR 1 151 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. Parada Valenzuela City"},{"Raw Address":"431-B GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"331 D TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"340 20TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"039 D. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"091FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 21ST BEN MARIE COMP. FV6 Parada Valenzuela City"},{"Raw Address":"133 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"122 B CALLE ONSE Parada Valenzuela City"},{"Raw Address":"101 M. DE Parada Valenzuela City"},{"Raw Address":"28 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"273 Parada Valenzuela City"},{"Raw Address":"VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"470KAINGIN ST Parada Valenzuela City"},{"Raw Address":"4480 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"99 VENUST ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"334 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"098D FORTUNE Village 7TH ST. Parada Valenzuela City"},{"Raw Address":"336 UNIT 2 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"310 JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"4680 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"123 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"251 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"114E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"0012 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"4078 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"131 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"28 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"07 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"222 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"291 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"256 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK5 LOT2 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"200-C CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"217 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 C DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"B5 L2 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"391 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"077 PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"345 CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"297-C T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"824 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"009 Parada Valenzuela City"},{"Raw Address":"308 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"267 INANG PETRA ST. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"1253 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"PETRA ST. PARADA Valenzuela City"},{"Raw Address":"412 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"92 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"276 E.S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"173 SALAZAR ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"83 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BEN MARIE GARDENS Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"167 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"#79 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"362 TATAANDRES ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE V Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK 5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"444 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 6TH ST. Parada Valenzuela City"},{"Raw Address":"84 PARADA ROAD EXT. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"Fortune Village 6 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"200 F. SANTIAGO MERCURY ST. Parada Valenzuela City"},{"Raw Address":"98 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST. E&E COMPD. Parada Valenzuela City"},{"Raw Address":"269 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"012 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 17 F.FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"090 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 E AND E COMPD. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4. Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"UNIT 2 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"281 PILAR STREET Parada Valenzuela City"},{"Raw Address":"209 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"269 INT. S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"071 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"200 6TH ST. Parada Valenzuela City"},{"Raw Address":"187 DE GULA COMP CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"228 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"190 6TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466-C KA BERONG Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"B2 LOT10 F FRANCISCO ST. G SILANGAN Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST. FOTRUNE 4 Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 13 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"Q487 IPIL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Parada Valenzuela City"},{"Raw Address":"334 #1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"35C 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"202 FELISA ST. Parada Valenzuela City"},{"Raw Address":"144 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"04 KAINGIN Parada Valenzuela City"},{"Raw Address":"28 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"02 157 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"184 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"414 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"1548 Parada Valenzuela City"},{"Raw Address":"361 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"500 FORTUNE DRIVE FORTUNE V Parada Valenzuela City"},{"Raw Address":"50 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"83 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"GULA ST. Parada Valenzuela City"},{"Raw Address":"267 Parada Valenzuela City"},{"Raw Address":"B1 L1 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"193 AM DE GULA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO STREET Parada Valenzuela City"},{"Raw Address":"183 FELIZA Parada Valenzuela City"},{"Raw Address":"243 7TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"25 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"315 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"270 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"69 Parada Valenzuela City"},{"Raw Address":"247 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"290 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"154 FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"384 BO. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B7L1 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"109 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 GOMEZ Parada Valenzuela City"},{"Raw Address":"291KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"0009 BLK 3 LOT 9 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"100 DOOR 3 CAPT CRUZ ST.Parada Valenzuela City"},{"Raw Address":"88-D CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"31 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"308 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"157-A SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"158 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 2 BLK 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"099 CAPT.CRUZ Parada Valenzuela City"},{"Raw Address":"270 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"415 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"274 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"122 CALLEONSE STREET Parada Valenzuela City"},{"Raw Address":"113 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"139 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRV. Parada Valenzuela City"},{"Raw Address":"230 1F EMBUSCADO COMP. S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"347 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"18 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"244 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"228 B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"23 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"220 C 21 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"168 SALAZASR Parada Valenzuela City"},{"Raw Address":"B2 L4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"343 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"258 INTERIOR S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"020 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"412 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"255 SALVADOR Parada Valenzuela City"},{"Raw Address":"39 B RAMON ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"338 T. MANANG Parada Valenzuela City"},{"Raw Address":"451 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"97B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"207 PELESA BOKED Parada Valenzuela City"},{"Raw Address":"4180 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"104 LAGDAMEO FV4 Parada Valenzuela City"},{"Raw Address":"239 ABELARDO Parada Valenzuela City"},{"Raw Address":"405 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA STREET Parada Valenzuela City"},{"Raw Address":"260B RIZALINA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"152 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"100 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"152 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"4389 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE COR. 22 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"254 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"FELIZA STREET Parada Valenzuela City"},{"Raw Address":"TATAERO ST. Parada Valenzuela City"},{"Raw Address":"172 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"172 INTERIOR SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"1827 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"230 18TH ST Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"262 OLIVA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"3B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"125 LAGDAMEO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST.Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"9 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"255 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"130 B 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"473 KA BERONG ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. PARADA Valenzuela City"},{"Raw Address":"M DE GULA ST Parada Valenzuela City"},{"Raw Address":"GINTONG SILANGAN F FRANCISCO Parada Valenzuela City"},{"Raw Address":"296 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"98 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F.SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"271 MARTA ST Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"446 GOMEZ ST. FORTUNE Village P. 7 Parada Valenzuela City"},{"Raw Address":"50 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"#95 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST.` Parada Valenzuela City"},{"Raw Address":"137-A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"30 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 A FELIZA Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND SALAZAR Parada Valenzuela City"},{"Raw Address":"119 KAMAGONG ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"235 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"170 UNIT SALAZAR ST Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"22 PARADA ST. Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 2 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"2626 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE 21ST ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"185 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"94 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"B3 L19 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"445 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"418-A ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"186 FILISA ST Parada Valenzuela City"},{"Raw Address":"036 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"12 B- KAMAGONG ST. F. Village 6 Parada Valenzuela City"},{"Raw Address":"006 F.SANTIAGO Parada Valenzuela City"},{"Raw Address":"230 18ST Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"331 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"31 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"NO.14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"SINILANGAN Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"32 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"334 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"357 J-FRANCISCO Parada Valenzuela City"},{"Raw Address":"KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"320 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"349 F Parada Valenzuela City"},{"Raw Address":"21 BENMARIE ST. Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 20 349 FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"224 21ST ST Parada Valenzuela City"},{"Raw Address":"283 A S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST.PARADA Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"188 MOLAVE COR 6TH ST. Parada Valenzuela City"},{"Raw Address":"10 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"165-G5 ACASIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"212 ANTHONY ST.FV 4 Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"245 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"460 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"154 SALAZAR Parada Valenzuela City"},{"Raw Address":"ST. 4 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"168 FELISA ST Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"25TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ SAN MIGUEL COMP. Parada Valenzuela City"},{"Raw Address":"T. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"420 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"91B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"90 F. CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"222 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"138 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"151 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. E&E COMP Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 12 BURGOS Parada Valenzuela City"},{"Raw Address":"203 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"19 B.F SANTIAGO E&E COMP. Parada Valenzuela City"},{"Raw Address":"258 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"468-K KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"121 CONSUELO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"144 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"138 NARRA ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"203 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"341 20TH ST Parada Valenzuela City"},{"Raw Address":"#80 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"192 RAMOS ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"LOT 10 NEPTUNE Parada Valenzuela City"},{"Raw Address":"9 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"02 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 15 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"305 DAET COMPD. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"315 JEMINEZ COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK10 LOT7 F. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"276 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"0099 B. CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKDI ST. Parada Valenzuela City"},{"Raw Address":"68 FORTUNE Village 6 PARADA Valenzuela City"},{"Raw Address":"# 343 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK 10/12 LOT 12 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"188DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"094 CAPT. CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"438 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 8 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"64 PARADA RD. FORTUNE Village 5 4 6 Valenzuela City Parada Valenzuela City"},{"Raw Address":"417 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"187 M DE GULA COMPOUD CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"456 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"203 FELIZA ST Parada Valenzuela City"},{"Raw Address":"233 19TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 UNIT 3 DOON CMPD. SALAZAR Parada Valenzuela City"},{"Raw Address":"351 FRANCISCO Parada Valenzuela City"},{"Raw Address":"198 RAMON ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"89 F. SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"B4 L21 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"254 25TH Parada Valenzuela City"},{"Raw Address":"206C 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"385 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"431 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARA ST. Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FV 7 Parada Valenzuela City"},{"Raw Address":"281 PILAR FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"55 KAMAGONG ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"357 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 11 F. FRANCISCO ST GINTONG Parada Valenzuela City"},{"Raw Address":"233 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37 B PARADA RD. PARADA Valenzuela City"},{"Raw Address":"305 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"077 PARADA RD. EXT. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN SANTOS TOWNHOUSE Parada Valenzuela City"},{"Raw Address":"106 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"09 R CABRAL Parada Valenzuela City"},{"Raw Address":"135 E FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"10 CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"129 NARRA ST FV 6 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"# 70 PARADA ROAD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"3651 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"170 Fortune Village 5 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"009 PARADA Valenzuela City"},{"Raw Address":"151 ALICIA Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST Parada Valenzuela City"},{"Raw Address":"471 KA BERONG Parada Valenzuela City"},{"Raw Address":"55 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"127 E.LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"194 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"176 23RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"203 6TH STREET Parada Valenzuela City"},{"Raw Address":"377 APT.5 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"208 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"50 RD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"233 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"269 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"309 JIMENEZ COMPPOUND Parada Valenzuela City"},{"Raw Address":"175 A. MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"9 E & E COMP. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"4560 SAPHIRE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"29 PARADA ST. Parada Valenzuela City"},{"Raw Address":"275-A S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"176 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"207 FELIA ST. Parada Valenzuela City"},{"Raw Address":"#177 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"160 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"193 M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"130 D 5TH STREET Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"#18 PARADA RD. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 3 199 BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"395 E.SAN ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"257 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"256 RIZALINA Fortune Village 4 ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"359 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"203 18TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"349 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"11 PARADA RD. Parada Valenzuela City"},{"Raw Address":"226 18TH ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"469 KAINGIN Parada Valenzuela City"},{"Raw Address":"14E FRANCISCO ST NLEX CORNER Parada Valenzuela City"},{"Raw Address":"225 ABELARDO Parada Valenzuela City"},{"Raw Address":"252 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"4 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"160 NARRA ST Parada Valenzuela City"},{"Raw Address":"101 M. DEGULA ST. ALFONSO APARTMENT"},{"Raw Address":"249 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"159 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"195 CAPT.CRUZ ST. CALLE ONSE Parada Valenzuela City"},{"Raw Address":"193 B.M DE GULA ST. Parada Valenzuela City"},{"Raw Address":"442 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"94 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 14 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. PARADA Valenzuela City"},{"Raw Address":"94 SALAZAR Parada Valenzuela City"},{"Raw Address":"31-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"177 24TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"354 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 20 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK 10A NARRA ST. Parada Valenzuela City"},{"Raw Address":"491 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"377 18TH ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"456 E KAINGIN Parada Valenzuela City"},{"Raw Address":"184 RAMON ST. FORTUNE Village 4 BO. Parada Valenzuela City"},{"Raw Address":"190 6TH ST. CORNER KAMAGONG FORTUNE Village Parada Valenzuela City"},{"Raw Address":"168 DOON CMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"4698 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"239 7TH ST. FORTUNE Village 5. PARADA Valenzuela City"},{"Raw Address":"448 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR ST. PARADA VALENZUELA Parada Valenzuela City"},{"Raw Address":"#349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"440 Parada Valenzuela City"},{"Raw Address":"044 PARADA RD. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"387 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"440 WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGOS T. Parada Valenzuela City"},{"Raw Address":"402 SAN ANDRES PARADA Valenzuela City"},{"Raw Address":"420 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"37-A PARADA RD.PARADA Valenzuela City"},{"Raw Address":"150 ST. Parada Valenzuela City"},{"Raw Address":"170 RAMON ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"165 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"273 PILAR ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"111E LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"#39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"04 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"320 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"GP.STREET WES SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"460 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 MENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"HIYAS HOMES SUBD. CORNER DIAMOND Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST Parada Valenzuela City"},{"Raw Address":"167 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"190 M. DEGULA STREET Parada Valenzuela City"},{"Raw Address":"132 CAPTAIN CROSS Parada Valenzuela City"},{"Raw Address":"9-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"166 ACACIA ST. Parada Valenzuela City"},{"Raw Address":"151 DALAWAN Parada Valenzuela City"},{"Raw Address":"038 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"FELIZA BUKIT ST. Parada Valenzuela City"},{"Raw Address":"438 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"444 ZAMORA ST Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"131 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"168 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"372 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR STREET Parada Valenzuela City"},{"Raw Address":"ADOR Parada Valenzuela City"},{"Raw Address":"111-E LAGDAMEO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"140 E FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"168 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"73 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"JEMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"039 RAMON SANTIAGO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"193 A.M DE GULA Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"L10 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"648 CAINGIN ST. Parada Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"286 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"449 PARADA Valenzuela City"},{"Raw Address":"B3 L5 GINTONG SILANGAN 3497 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"145 NARRA STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"130 WEST SERVICE RD Parada Valenzuela City"},{"Raw Address":"186-D FELIZA ST. Parada Valenzuela City"},{"Raw Address":"21ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"#13TH 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"305 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"1-G EMBUSCADO APT. 230 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"291 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"098 FORTUNE DRIVE COR. OF 7TH ST. FV5 Parada Valenzuela City"},{"Raw Address":"143 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA RD Parada Valenzuela City"},{"Raw Address":"391 Parada Valenzuela City"},{"Raw Address":"B4L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"93-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"469KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"4181 NARRA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CVOMPD.ST. PARADA Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"230-B S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"056 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"341 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"114 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"393 FELISA ST. Parada Valenzuela City"},{"Raw Address":"22 EUGENIO COMPD. Parada Valenzuela City"},{"Raw Address":"234 7TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"0406 MARTHA ST Parada Valenzuela City"},{"Raw Address":"314 MENES COMP. Parada Valenzuela City"},{"Raw Address":"B2 L11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"12 PARADA RD. Parada Valenzuela City"},{"Raw Address":"412 B P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"91 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"15 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"297 TANDAND MANANG Parada Valenzuela City"},{"Raw Address":"DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"42 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"134 E. LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"67 PARADA RD.VAL.CITY Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"135 C CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"413 P DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"471 C KABERONG ST. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"244 7TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"185 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"87 PARADA Valenzuela City"},{"Raw Address":"108 RAMON ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FELISA ST. PARADA Valenzuela City"},{"Raw Address":"BLK 5 LOT 9 349 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"24 E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"314 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"385 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"130 D. 5TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"FRANSISCO ST. Parada Valenzuela City"},{"Raw Address":"148 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"293 ILOCTO COMP. Parada Valenzuela City"},{"Raw Address":"174 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"349 F FRANCSISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"146 NARRA STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"268 25TH ST. Parada Valenzuela City"},{"Raw Address":"26F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DE GULA APARTMENT Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"238 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"349 E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"190- B. MOLAVE ST FORTUNE6 Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CALYE II ST. Parada Valenzuela City"},{"Raw Address":"182 UNIT G. MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"385 MERCURY ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"ALICIA ST. FORTUNE Village4 PARADA Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 6TH ST. Parada Valenzuela City"},{"Raw Address":"298 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"272 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"395-DOOK1 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"28 EUGENIO Parada Valenzuela City"},{"Raw Address":"740 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"141 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"NO. 51 FORTUNE FIVE THIRD ST. Parada Valenzuela City"},{"Raw Address":"228-A S. DE GUSMAN ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. DOON CMP Parada Valenzuela City"},{"Raw Address":"A ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"72 PARADA RD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"#223 21 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"506 TINDALO ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"175 23RD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLOCK 02 LOT 14 F. FRANCISCO GINTONG Parada Valenzuela City"},{"Raw Address":"3 CORAL ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"LOT 41 BLOCK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"172 MOLAVE Parada Valenzuela City"},{"Raw Address":"BLK13 LOT 27 FORTUNE DRIVE FORTUNE VIILL. 5 Parada Valenzuela City"},{"Raw Address":"2225 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"220D 21STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"465 KAINGIN Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"137 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JEMENES COMPD Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"17 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"132 LAGDAMEO ST.Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"216 ANTHONY Parada Valenzuela City"},{"Raw Address":"YAKAL Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"187- A FELISA ST. Parada Valenzuela City"},{"Raw Address":"39 C PARADA RD. Parada Valenzuela City"},{"Raw Address":"317 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"412 Parada Valenzuela City"},{"Raw Address":"244 7ST. ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"109 E. LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"443 ROSELLA PARADA Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST Parada Valenzuela City"},{"Raw Address":"313 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"250 B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"258 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"828 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"460P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"199 21ST STREET BEN MARIE COMPD. FORTUNE Parada Valenzuela City"},{"Raw Address":"5TH ST. FORTUNE Village 5 RD. Parada Valenzuela City"},{"Raw Address":"361 J-FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"188 MOLAVE ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"156 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"039 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"168 TATA ERO ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST Parada Valenzuela City"},{"Raw Address":"301 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"435 C. ZAMORA ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"412 C.P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"457 F. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"16 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"40 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"44 B PARADA ROAD FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"214 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"94 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"438 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"039 RAMON Parada Valenzuela City"},{"Raw Address":"379 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"#85 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"239 ABELARDO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"FATIMA CMPD. PARADA Valenzuela City"},{"Raw Address":"437 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"440 RUMARAO COMP. SERVICE RD. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 6 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"54 KAMAGONG Parada Valenzuela City"},{"Raw Address":"136 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"331-A TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"88 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"310 MENEZ COMP Parada Valenzuela City"},{"Raw Address":"181 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"339 21ST Parada Valenzuela City"},{"Raw Address":"01-31 MERCURY F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"140 E Parada Valenzuela City"},{"Raw Address":"88 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"456 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"70 PARADA ROAD FORTUNE SIX Parada Valenzuela City"},{"Raw Address":"26 NARRA ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"LOT 14 BLK. 4 349 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. PARADA Valenzuela City"},{"Raw Address":"087 SALVADOR ST. Parada Valenzuela City"},{"Raw Address":"5 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"36 G. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA S. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91-A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"170 RAMON STREET Parada Valenzuela City"},{"Raw Address":"145 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"188 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"FELIZA ST. Parada Valenzuela City"},{"Raw Address":"290 BO. PARADA ST. SANTOLAN ROAD Parada Valenzuela City"},{"Raw Address":"138 CAPT. CRUZ ST. BO. Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST. E & E COMP. Parada Valenzuela City"},{"Raw Address":"BLK 1 GINTONG SILANGAN COMP. Parada Valenzuela City"},{"Raw Address":"468- KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"258 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"99 SATURN ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"240 7TH ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"144 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"195 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"93 PARADA RD. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS Parada Valenzuela City"},{"Raw Address":"79 A. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"302 Parada Valenzuela City"},{"Raw Address":"32 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"260 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"285 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"296-B T.MANANAG ST Parada Valenzuela City"},{"Raw Address":"296-B T. MANANG Parada Valenzuela City"},{"Raw Address":"009 PARADA RD Parada Valenzuela City"},{"Raw Address":"237 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"37E PARADA ROAD Parada Valenzuela City"},{"Raw Address":"067 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"349 CAPTAIN FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"438 PARADA Valenzuela City"},{"Raw Address":"# 488 ZAMORA STREET Parada Valenzuela City"},{"Raw Address":"001 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"888 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"230 EMBUSCADO APT. S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"466B KAINGIN Parada Valenzuela City"},{"Raw Address":"320E S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 C CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"111 E LAGDAMEO Parada Valenzuela City"},{"Raw Address":"UNIT B 276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 - AFELIZA ST. Parada Valenzuela City"},{"Raw Address":"287 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"165-4 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO PARADA Valenzuela City"},{"Raw Address":"0006 LOT 3 BLK 4 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 ST. FRANCIS Parada Valenzuela City"},{"Raw Address":"411C P. DE GUZMAN ST. TATAERO Parada Valenzuela City"},{"Raw Address":"351 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 29 A. BLK 9 KAMANGONG ST. FV.6 Parada Valenzuela City"},{"Raw Address":"179 MOLAVE ST Parada Valenzuela City"},{"Raw Address":"057 Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"09 Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 10 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"228 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"128 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"31 P. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"274 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"358 FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"14 DIAMOND ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"107 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"#45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"147 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"0118 DOOR 12 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"118 ST. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"BLK5 L17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"470 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"175 MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. SKYLINE SUBD. Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID ST Parada Valenzuela City"},{"Raw Address":"169 ACACIA ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"BO. Parada Valenzuela City"},{"Raw Address":"297 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. FORTUNE Village 4 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO Parada Valenzuela City"},{"Raw Address":"22T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"B1 L5 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 M INT. ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"468 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"302 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"223 ABELARDO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"248 PARADA RD Parada Valenzuela City"},{"Raw Address":"412 TATA ERRO ST. Parada Valenzuela City"},{"Raw Address":"470 KAINIGIN ST Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRESS ST. Parada Valenzuela City"},{"Raw Address":"182-23RD ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"21ST ST. AGLEHAM COMP. Parada Valenzuela City"},{"Raw Address":"#244 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"116-B CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH ST F SANTIAGO Parada Valenzuela City"},{"Raw Address":"L12 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"KALYE 11 BUKID Parada Valenzuela City"},{"Raw Address":"277 PILAR Parada Valenzuela City"},{"Raw Address":"279-D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"222 20TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"259 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"ACACIA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"143 NARRA FORTUNE VIL 6 Parada Valenzuela City"},{"Raw Address":"#257 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B3L5 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"306 PARADA Valenzuela City"},{"Raw Address":"412 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"211 21ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE CMPD. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"440 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"456 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"195 6ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"119 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"286 P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"45 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"B4 L17 F FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"17 PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 11 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"365 TATA ANDREZ Parada Valenzuela City"},{"Raw Address":"006 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"107 MOLAVE ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"309 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"125 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"106 E. LAGDAMEO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"243 PASING ST. Parada Valenzuela City"},{"Raw Address":"402 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"457 INT SMC DUPLEX -D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"170B SALAZAR Parada Valenzuela City"},{"Raw Address":"135 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"0118 A. U2 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"360 FRANCISCO Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"525 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"SAN ANDRES Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 23 A.FRANCISCO Parada Valenzuela City"},{"Raw Address":"349 F. FERNANDO ST. Parada Valenzuela City"},{"Raw Address":"378A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"125 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"247 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"149 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"095 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"312 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"114 YAKAL STREET FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"84 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"270 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"93-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"308 APT 1 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"34 SALVADOR Parada Valenzuela City"},{"Raw Address":"306 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"33 EARTH ST. Parada Valenzuela City"},{"Raw Address":"320 DIMAUNAHAN CMPD.PARADA Valenzuela City"},{"Raw Address":"264 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"26 Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"279 B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"157-B SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"234 ABELARDO STREET Parada Valenzuela City"},{"Raw Address":"SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST.FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"1 FIFTH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"341 PARADA Valenzuela City"},{"Raw Address":"39D PARADA ROAD Parada Valenzuela City"},{"Raw Address":"BLK 4 LT 12 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"466 C. KABERONG ST. Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"9 Parada Valenzuela City"},{"Raw Address":"274 PILAR ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"022 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"TATA ERO Parada Valenzuela City"},{"Raw Address":"332 T.MANANG ST. BO. PARADA Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FV 6 Parada Valenzuela City"},{"Raw Address":"114 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"395-B P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"214 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMPOUND SALAZAR ST Parada Valenzuela City"},{"Raw Address":"109 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"157 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"269 INANG PETRA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"201 A FELIZA ST Parada Valenzuela City"},{"Raw Address":"386 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"162 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"320 B BS DE GUZMAN Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. ST. Parada Valenzuela City"},{"Raw Address":"255 ROMASA ST. Parada Valenzuela City"},{"Raw Address":"178 Parada Valenzuela City"},{"Raw Address":"UNIT A L17 B9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"93A CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"415B TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"111-A LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"31 F. SAN TIAGO Parada Valenzuela City"},{"Raw Address":"349 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"B2 L6 BENMARIE 21ST Parada Valenzuela City"},{"Raw Address":"313 MENES COMP. Parada Valenzuela City"},{"Raw Address":"001 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"467 KAINGIN Parada Valenzuela City"},{"Raw Address":"140 DALAWAN ST Parada Valenzuela City"},{"Raw Address":"198 RAMON FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND STREET HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"096 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"181 MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"25TH ST DULO. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"#183 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"46 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"94 A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"413 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"313 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"101 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"406 P DE GUZMAN BANDINO ST Parada Valenzuela City"},{"Raw Address":"227 18TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"93 B PARADA STREET Parada Valenzuela City"},{"Raw Address":"7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"99 VENUS STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"453 B WEST SERVICE RD. Parada Valenzuela City"},{"Raw Address":"268 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"122 CALYE ONSE Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"286 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"002 FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"417 TATA ERRO STREET Parada Valenzuela City"},{"Raw Address":"240 S DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"97 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"168 FELISA ST. Parada Valenzuela City"},{"Raw Address":"18 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. Parada Valenzuela City"},{"Raw Address":"214 IPIL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 21 ST FORTUNE VillageE 5 Parada Valenzuela City"},{"Raw Address":"256 RIZALINA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 13 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"357 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"232 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE FORTUNE5 Parada Valenzuela City"},{"Raw Address":"269 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L28 PARADA RD. Parada Valenzuela City"},{"Raw Address":"248 PARADA ROAD. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"199 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"145 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"468 N KAINGIN ST Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"234 7TH STREET Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"FORTUNE Village 7.PARADA Valenzuela City"},{"Raw Address":"235 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"365 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. Parada Valenzuela City"},{"Raw Address":"31F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"202 22ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"361 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"177 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"290 ILOCT CMPD. PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0257 ES DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"316 JIMENEZ CMPD Parada Valenzuela City"},{"Raw Address":"310 MENES T. Parada Valenzuela City"},{"Raw Address":"132 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"184 FELIZA ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 14 TMHAI TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"Village 7 Parada Valenzuela City"},{"Raw Address":"250 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"94 Parada Valenzuela City"},{"Raw Address":"roup Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"336 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"B2 L6 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"159 NARRA Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"60 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"B2L3 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"197 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"126 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"8 DR. M LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"265 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"101 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"237 19TH FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"MARS ST. #26 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"123 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"413 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0117 A CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"242 S . DE GUZMAN Parada Valenzuela City"},{"Raw Address":"462 P.GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"252A VillageA PARADA S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"406 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"omplete for the precinct. Parada Valenzuela City"},{"Raw Address":"161 Fortune Village 6 YAKAL ST.PARADA Valenzuela City"},{"Raw Address":"297-C T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87C SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"333 A KAMAGONG Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST. FORTUNE IV Parada Valenzuela City"},{"Raw Address":"442 P.GOMEZ ST. Fortune Village 7 PARADA Valenzuela City"},{"Raw Address":"360 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"407 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS HOME SUBD. Parada Valenzuela City"},{"Raw Address":"110 FELISA ST. Parada Valenzuela City"},{"Raw Address":"1112 CAPATAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"358 J FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"8 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUS ST. Parada Valenzuela City"},{"Raw Address":"466 C KA BERONG ST. KAINGIN Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"Parada Valenzuela City"},{"Raw Address":"273 PILAR ST. Parada Valenzuela City"},{"Raw Address":"341 21 ST. BENMARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"413 TATA ERO Parada Valenzuela City"},{"Raw Address":"466 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"119 A KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"384 S. DEGUZMAN ST Parada Valenzuela City"},{"Raw Address":"028 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE 5 Parada Valenzuela City"},{"Raw Address":"280 PILAR ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"22 ST FORTUNE Village Parada Valenzuela City"},{"Raw Address":"297 C-T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"260 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"440 BO. Parada Valenzuela City"},{"Raw Address":"#68 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"555 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"338 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"225 20 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"370 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE VIL6 Parada Valenzuela City"},{"Raw Address":"289-C P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"283 S.DE GHUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"412 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"266 Parada Valenzuela City"},{"Raw Address":"J.M.T.C. LAGDAMEO ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. Parada Valenzuela City"},{"Raw Address":"259 RIZALINA ST. Fortune Village 4 RD. Parada Valenzuela City"},{"Raw Address":"17-C F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"317 A.T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"339 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"9 31F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"395 SAN ANDRES Parada Valenzuela City"},{"Raw Address":"410 DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 19 F FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMES ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"392 P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"17 SALAZAR ST. DOON COMPD. Parada Valenzuela City"},{"Raw Address":"061 PARADA RD. Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"260 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"01 NEPTUNE ST. Parada Valenzuela City"},{"Raw Address":"25TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"234 S DEGUZMAN Parada Valenzuela City"},{"Raw Address":"186 6 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"04 5TH ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"167 RAMON ST. Parada Valenzuela City"},{"Raw Address":"279 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA Parada Valenzuela City"},{"Raw Address":"437 GOMEZ ST. FORTUNE Village PH.7 Parada Valenzuela City"},{"Raw Address":"234 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"CORNER CORAL Parada Valenzuela City"},{"Raw Address":"99 F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"96 FELISA ST. Parada Valenzuela City"},{"Raw Address":"62 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"161 Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID VENUS STREET Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG PARADA Valenzuela City"},{"Raw Address":"86 SALVADOR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"438 RUMARAO COMPOUND Parada Valenzuela City"},{"Raw Address":"MOLAVE ST. Fortune Village 6 182 D. Parada Valenzuela City"},{"Raw Address":"05 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"240 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"513 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"150 ALICIA Parada Valenzuela City"},{"Raw Address":"351 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"132 KAMAGONG Parada Valenzuela City"},{"Raw Address":"L5-207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"13 5TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"146 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK. 13 KAMAGONG STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"FV 4 Parada Valenzuela City"},{"Raw Address":"347 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"85 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE5 Village Parada Valenzuela City"},{"Raw Address":"447 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGANG Parada Valenzuela City"},{"Raw Address":"#257 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"230 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"10 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"100 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"SILANGAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT10 JADE ST. HIYAS HOME Parada Valenzuela City"},{"Raw Address":"141 E. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"451 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"F SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"185 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"454 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"294 TADANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"513 JIMENES CMPD. Parada Valenzuela City"},{"Raw Address":"77 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"2510 25 STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 D. T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"244 1ST. FV 5 Parada Valenzuela City"},{"Raw Address":"248 S. DEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 YAKAL COR. NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"290 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"329 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"067 PARADA RD. FORT. 6 Parada Valenzuela City"},{"Raw Address":"172 SALAZAR ST.  Parada Valenzuela City"},{"Raw Address":"320 E. MIURA APT. S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#336 TIA MANANG Parada Valenzuela City"},{"Raw Address":"233 19TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"132 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"38 PARADA STREET Parada Valenzuela City"},{"Raw Address":"227 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village NO. 4 Parada Valenzuela City"},{"Raw Address":"407-A P.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"0101 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"320 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"135 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"009 PARADA STREET Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"B6 Parada Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"CITY MM Parada Valenzuela City"},{"Raw Address":"371-A TATA ANDRES Parada Valenzuela City"},{"Raw Address":"300 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"179 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"230S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"207 FELIZA CALLE ONSE Parada Valenzuela City"},{"Raw Address":"211 CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"230 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"#16B DOON COMP. Parada Valenzuela City"},{"Raw Address":"209 ANTHONY ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"232 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"88 SAN MIGUEL COMP. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"26 MARS STREET F SANTIAGO Parada Valenzuela City"},{"Raw Address":"318 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"254 A S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 FELISA Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"258-1 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TANDANG MANANG BLK 3 LOT 19 HOE Parada Valenzuela City"},{"Raw Address":"101 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"234 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"31 F. SANTIAGO EARTH ST Parada Valenzuela City"},{"Raw Address":"258 RIZALINA ST. FORTUNE Village4 ST. Parada Valenzuela City"},{"Raw Address":"F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"339 Fortune Village 5 20ST Parada Valenzuela City"},{"Raw Address":"169 DOON COMPD. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"378 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"43 CAINGIN Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"2151 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"C-378 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"197 ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"471C KABERONG ST Parada Valenzuela City"},{"Raw Address":"6TH ST. MOLAVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2745 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"LOT 5 LOT 8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"449 GOMEZ STREET Parada Valenzuela City"},{"Raw Address":"200 FORTUNE DR. ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"39K RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"297 Parada Valenzuela City"},{"Raw Address":"291 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"474 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"12 5TH STREET FORTUNE FIVE Village Parada Valenzuela City"},{"Raw Address":"225 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"140 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"80 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"294 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"101 M DEGULA ST. Parada Valenzuela City"},{"Raw Address":"4541 MOLAVE ST. FORTUNE5/6 Village Parada Valenzuela City"},{"Raw Address":"7TH ST. Fortune Village 5 FORTUNE Village Parada Valenzuela City"},{"Raw Address":"115 CPT CRUZ Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"89 D. CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"035 PARADA Valenzuela City"},{"Raw Address":"EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"204 22ND ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"145 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. 21ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"177 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"094 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"228-B S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"99 SATURN STREET F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"834 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"14 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"247 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"240 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"1EE MARS F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"414 PARADA Valenzuela City"},{"Raw Address":"245 ABELARDO Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"CALLE ONSE DULO BUKID Parada Valenzuela City"},{"Raw Address":"57 PARADA RD. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"79 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"409 P. DE GUZMAN ST. BIAZON COMPOUND Parada Valenzuela City"},{"Raw Address":"863B KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"130 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"21ST BENMARIE COMP. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"161 FELIZA ST. SALAZAR RD. Parada Valenzuela City"},{"Raw Address":"70 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"CALLE 11 BUKID Parada Valenzuela City"},{"Raw Address":"116 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"0260 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"39-A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"35 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"1 F SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2932 ILOCTO ST. Parada Valenzuela City"},{"Raw Address":"207 CALLE ONSE FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"358 J. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 12 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 STREET BEN MARIE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"228 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"SINILNGAN Parada Valenzuela City"},{"Raw Address":"258 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"267 CORNER 19TH & 24TH ST Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANAG ST Parada Valenzuela City"},{"Raw Address":"201 CALLE ONCE ST. PARADA Valenzuela City"},{"Raw Address":"86 PARADA Valenzuela City"},{"Raw Address":"123 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"295 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"67 PARADA Valenzuela City"},{"Raw Address":"177 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"407 BANDIDO ST. Parada Valenzuela City"},{"Raw Address":"247 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"419 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"358-D J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT9 BLK1 SAPHIRE ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"L9 GINTONG SILANG Parada Valenzuela City"},{"Raw Address":"255 E TOMASA STREET Parada Valenzuela City"},{"Raw Address":"134 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"345 F. FRANCISCO ST BO. Parada Valenzuela City"},{"Raw Address":"137 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"199 6TH ST.MANALANG CMPD Parada Valenzuela City"},{"Raw Address":"267 CORNER 24TH & 19TH STREET Parada Valenzuela City"},{"Raw Address":"15 SANTIAGO Parada Valenzuela City"},{"Raw Address":"36 C. PARADA RD. Parada Valenzuela City"},{"Raw Address":"LOT 5 BLK. 10 A NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"168 ACACIA Parada Valenzuela City"},{"Raw Address":"233 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"15 DIAMOND HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"513 ABCO COMP. TINDALO ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"26 F. SANTAIGO Parada Valenzuela City"},{"Raw Address":"302 - B TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123-C CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"416 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"14 PARADA Valenzuela City"},{"Raw Address":"120 25TH ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"2 TINDALO ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"5 KAMAGONG Parada Valenzuela City"},{"Raw Address":"B2 L17 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"149 DALAWAN ST. BO.PARADA Valenzuela City"},{"Raw Address":"273 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"0067 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"11 5TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"473 ABERONG ST Parada Valenzuela City"},{"Raw Address":"182 FELIZA Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. FORTUNE7 Parada Valenzuela City"},{"Raw Address":"39 AJERO COMP. RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"03 F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"215 DAET COMP. Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"87 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"322 PEÑA COMP. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"182 FELISA Parada Valenzuela City"},{"Raw Address":"169 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 SANTIAGO Parada Valenzuela City"},{"Raw Address":"152 23RD ST.Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"609 7TH ST Parada Valenzuela City"},{"Raw Address":"36 G. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"434 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"457 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"208 22ND STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"339 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"58 A. Fortune Village 6 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"138 ELAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"366 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA Parada Valenzuela City"},{"Raw Address":"11-A F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"067 Fortune Village 6 PARADA RD. Parada Valenzuela City"},{"Raw Address":"136 D NARA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"#1 JADE ST.CORNER SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"253 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"178 RAMON ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA FORTUNE V5 Parada Valenzuela City"},{"Raw Address":"525 EUGENIO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. PARADA Valenzuela City"},{"Raw Address":"151 DALAWAN ST. Parada Valenzuela City"},{"Raw Address":"009 R.CABRAL Parada Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"258 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"10 E CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"312 MENES COMP. PARADA Valenzuela City"},{"Raw Address":"267 CORNER 19TH AND 24TH ST FORTUNE Parada Valenzuela City"},{"Raw Address":"4684 PEARL ST. HIYAS HOMES. Parada Valenzuela City"},{"Raw Address":"128 YAKAL ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"404 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"410-A PARADA Valenzuela City"},{"Raw Address":"21ST BELMARIE CMPD. AGLEHAM Parada Valenzuela City"},{"Raw Address":"291 KAINGIN Parada Valenzuela City"},{"Raw Address":"90 ADOR ST Parada Valenzuela City"},{"Raw Address":"269B S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"252 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"LOT 41 BLK 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FILIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"KAINGIN Parada Valenzuela City"},{"Raw Address":"FELIZAS ST. BUKID 207 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. MOLAVE FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"35 A PARADA RD. Parada Valenzuela City"},{"Raw Address":"L2 B11 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"BLK 7 LOT 4 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"004 PARADA ST. Parada Valenzuela City"},{"Raw Address":"0250 UNIT 6 CALLE ONSE STREET Parada Valenzuela City"},{"Raw Address":"184 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"178 23RD ST. Parada Valenzuela City"},{"Raw Address":"431 FORTUNE Village 7 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"394 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"317 T.MANANANG ST. PARADA Valenzuela City"},{"Raw Address":"330 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"22 EUQUINIO ST Parada Valenzuela City"},{"Raw Address":"367 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"242 19TH ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"170 DOON COMP. Parada Valenzuela City"},{"Raw Address":"068 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"440 P. GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"LOT 1 PHASE 2 PARADA F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"3661 KAMAGONG ST. COR. YAKAL ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"246 S Parada Valenzuela City"},{"Raw Address":"476 SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"187 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"215 21ST ST. FORTUNE DRIVE. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"414 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"169D 7ST FORTUNE5 Parada Valenzuela City"},{"Raw Address":"A 334 T. MANANG Parada Valenzuela City"},{"Raw Address":"023 T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"021 EUGENIO Parada Valenzuela City"},{"Raw Address":"LOT 6 B.F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"243 7TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 8 JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"# 95 P DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"400 SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"289 - D SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"409P. DE GUZMAN ST. VAL. M.M. Parada Valenzuela City"},{"Raw Address":"351 CAPTAIN FRANCISCO Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"243 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"359 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"403 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"207 FELEZA BUKID Parada Valenzuela City"},{"Raw Address":"349 Parada Valenzuela City"},{"Raw Address":"150 ALICIA STREET Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"B-5 L-8 JADE ST. HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS HOMES SUBDIVISION Parada Valenzuela City"},{"Raw Address":"249 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST FORTUNE VELLAGE4 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"38 D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"117 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"40 PEARL Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"073 FORTUNE Village 7 PARADA RD. EXT. Parada Valenzuela City"},{"Raw Address":"122 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"431 P. BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"276 AP DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 8 349 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST Parada Valenzuela City"},{"Raw Address":"24-B EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"JADE ST. Parada Valenzuela City"},{"Raw Address":"351 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"200A 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"265 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25TH ST. Fortune Village 5. PARADA Valenzuela City"},{"Raw Address":"352 Parada Valenzuela City"},{"Raw Address":"266 24TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"SMC- DUPLEX D Parada Valenzuela City"},{"Raw Address":"BLOCK 5 LOT 9 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"22 LOT F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village 5-6 Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"274 PILAR ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"93 D CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"B1L4 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. Parada Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"190 MOLAVE STREET Parada Valenzuela City"},{"Raw Address":"109 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"165-G ACACIA STREET Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"202 Parada Valenzuela City"},{"Raw Address":"299 T. MANANG ST. PARADA Valenzuela City"},{"Raw Address":"123 E.LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"431 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"118 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"241 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"320B S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"324 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"UNIT2 LOT17 BLK9 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"4815 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"360 J . FRANCISCO Parada Valenzuela City"},{"Raw Address":"L7A BLK8 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST. B4L10 GS Parada Valenzuela City"},{"Raw Address":"225 ABELARDO STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"67 PARADA ROAD Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"116 B. CALLE ONSE ST Parada Valenzuela City"},{"Raw Address":"33 F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"CALYE 11 ST. Parada Valenzuela City"},{"Raw Address":"325 TANDANG MANANG ST. BO.Parada Valenzuela City"},{"Raw Address":"098 Fortune Village 5 DRIVE Parada Valenzuela City"},{"Raw Address":"362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"E LAGDAMEO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"244 7 Fortune Village 5 STREET Parada Valenzuela City"},{"Raw Address":"438 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 MARS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"465 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"B4 L3 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"59 BANDINO ST Parada Valenzuela City"},{"Raw Address":"101 CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"320 T.MANANG ST.PARADA Valenzuela City"},{"Raw Address":"457 INT. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"94 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"148 Fortune Village 6 NARRA ST. Valenzuela City Parada Valenzuela City"},{"Raw Address":"122A KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"441 SERVICE ROAD RUMARAO COMPD. Parada Valenzuela City"},{"Raw Address":"253 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"09 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"312 INT. MENES CMPD.PARADA Valenzuela City"},{"Raw Address":"13 PARADA RD. Valenzuela City Parada Valenzuela City"},{"Raw Address":"4560 SAPPHIRE STREET Parada Valenzuela City"},{"Raw Address":"B3L2 TMHOA Parada Valenzuela City"},{"Raw Address":"14 B NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST FORTUNE Parada Valenzuela City"},{"Raw Address":"022 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"199 6TH ST. FORTUNE Village6 PARADA Valenzuela City"},{"Raw Address":"322 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLEHAM STREET Parada Valenzuela City"},{"Raw Address":"16-F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"247 7TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"133 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"225 Parada Valenzuela City"},{"Raw Address":"242 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"167 RAMON STREET Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"450 SERVICE RD Parada Valenzuela City"},{"Raw Address":"441 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"28 BARRIO Parada Valenzuela City"},{"Raw Address":"39 RAMON STREET Parada Valenzuela City"},{"Raw Address":"207 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"063 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"36 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"B7 L26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"354 J.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA ST. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"0232 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"45 A. F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"193 M.DE GULA ST.PARADA Valenzuela City"},{"Raw Address":"235 T. MANANG Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. Parada Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"440 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"250 ABELARDO ST. Fortune Village 4 MALINTA Parada Valenzuela City"},{"Raw Address":"283 MARTHA ST. Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"11 D EMBUSCADO COMP. Parada Valenzuela City"},{"Raw Address":"423 L3-B3 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"247-C S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"443 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"223 ABELARDO ST. FV4 Parada Valenzuela City"},{"Raw Address":"107 E. LAGDAMEO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"369 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"456-H KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"210 SALVADOR Parada Valenzuela City"},{"Raw Address":"117 KAMAGONG ST Parada Valenzuela City"},{"Raw Address":"12 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"137 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"391 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"218 ANTHONY FV 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST Parada Valenzuela City"},{"Raw Address":"379 TATA ANDREZ ST. Parada Valenzuela City"},{"Raw Address":"61 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"035 PARADA RD. Parada Valenzuela City"},{"Raw Address":"JIMENEZ ST. Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"BUKID Parada Valenzuela City"},{"Raw Address":"358 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"274 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"41 NARRA ST Parada Valenzuela City"},{"Raw Address":"310 MENEZ SMPD Parada Valenzuela City"},{"Raw Address":"264 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCIS OST. Parada Valenzuela City"},{"Raw Address":"157 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"199 21ST STREET BENMARIE COMPD. Parada Valenzuela City"},{"Raw Address":"340 20 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"SALAZAR ST Parada Valenzuela City"},{"Raw Address":"ANTHONY ST. Parada Valenzuela City"},{"Raw Address":"027 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"19 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"095 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 20 349 F.FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 8 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"438 Parada Valenzuela City"},{"Raw Address":"431 F. FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"114 KAMAGON ST. PARADA Valenzuela City"},{"Raw Address":"217 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"178 RAMON ST.FV 4 Parada Valenzuela City"},{"Raw Address":"31F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"103 KAMAGONG ST. FORT Village 6 Parada Valenzuela City"},{"Raw Address":"422 BURGOS STREET FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 12 BURGOS ST. Parada Valenzuela City"},{"Raw Address":"216 21ST STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"214 DE GUZMAN Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMP. 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"206F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B4 L13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"235 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"308 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"150 ALICIA ST. FV4 Parada Valenzuela City"},{"Raw Address":"128 PARADA RD. FV6 Parada Valenzuela City"},{"Raw Address":"389 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"312 MENES CMPD. Parada Valenzuela City"},{"Raw Address":"294 KAINGIN Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 3 LOT 17 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"327 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"200-B CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"320 UNIT 2 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"6ST. COR. KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 7 LOT 26 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"199 22ND ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"204 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"153 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"71 B. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"138 A NARRA ST. Parada Valenzuela City"},{"Raw Address":"259 ADOR ST. Parada Valenzuela City"},{"Raw Address":"B5 GOMEZ ST FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"134 CAPT.CRUZ PARADA Valenzuela City"},{"Raw Address":"131 KAMAGONG Parada Valenzuela City"},{"Raw Address":"#362 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"140 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"400-A ILOCTO ST. SANTOLAN RD. Parada Valenzuela City"},{"Raw Address":"153 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"324 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"107 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"150 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"101 LAGDAMEO ST Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"#281 PILAR ST. FV 4 Parada Valenzuela City"},{"Raw Address":"167 RAMON ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"339 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLA APT. 7TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"KM.14 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"91 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"442 P. GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"098 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"028 PARADA RD. Parada Valenzuela City"},{"Raw Address":"1 DR.MARIANO LAUREL DRIVE Parada Valenzuela City"},{"Raw Address":"161 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"1F SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"088 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"329 T. MANANG Parada Valenzuela City"},{"Raw Address":"151 ACACIA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"185 FELISA ST. Parada Valenzuela City"},{"Raw Address":"169 DOON COMP. Parada Valenzuela City"},{"Raw Address":"ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"127 E. LAGDAMEO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"095 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"207 FELISA Parada Valenzuela City"},{"Raw Address":"61 PARADA RD. Parada Valenzuela City"},{"Raw Address":"150 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"144 ALICIA FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"FATIMA COMPD. BARRIO Parada Valenzuela City"},{"Raw Address":"028 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"10TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 7 GOMEZ ST. PARADA Valenzuela City"},{"Raw Address":"328 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 8 GINTONG SILANGAN F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"37 Parada Valenzuela City"},{"Raw Address":"360 J.FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"177 MOLAVE ST. 6TH ST. FORTUN 5 Parada Valenzuela City"},{"Raw Address":"TATAERRO ST. Parada Valenzuela City"},{"Raw Address":"92 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"417 TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"111 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"154 ALICIA STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"424 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"72 PARADA RD. Parada Valenzuela City"},{"Raw Address":"470 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"164 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"157 ALICIA ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"39-B RAMON ST. Parada Valenzuela City"},{"Raw Address":"031 PARADA Valenzuela City"},{"Raw Address":"289-D S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"448 SERVICE RD. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"57 PARADA RD. Fortune Village 6 VillageParada Valenzuela City"},{"Raw Address":"438 SILENCE RD. Parada Valenzuela City"},{"Raw Address":"117 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"BO.PARADA Valenzuela City"},{"Raw Address":"409 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 23RD STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"FATIMA COMP Parada Valenzuela City"},{"Raw Address":"404 P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"438 PARADA FORTUNE Village7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"04 P DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"276 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO VENUS ST. Parada Valenzuela City"},{"Raw Address":"170 SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"237 19TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"ROMAN ST. FORTUNE Village 4. Parada Valenzuela City"},{"Raw Address":"LOT 2 DIAMOND STREET HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"198 COR. & 21ST. 19TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"JADE ST. HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST.F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"BLK. 5 LOT 1 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"LOT 3 BLK 7 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"333 KAMAGONG ST FV 5 & 6 Parada Valenzuela City"},{"Raw Address":"#287 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"UNIT 1 NARRA ST. Parada Valenzuela City"},{"Raw Address":"317 MENEZ CMPD Parada Valenzuela City"},{"Raw Address":"BLK 4 LOT 10 LUPANG SINILANGAN Parada Valenzuela City"},{"Raw Address":"LOT 10 FORTUNE F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"1548 E PEARL ST. HIYAS SUBD. Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"198 RAMON STREE FV4 Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"039 D. SANTIAGO COMP. FV4 Parada Valenzuela City"},{"Raw Address":"412 TATAERO ST. Parada Valenzuela City"},{"Raw Address":"242 S DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"202 FILISA ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"348 Parada Valenzuela City"},{"Raw Address":"92 FORTUNE DR. Parada Valenzuela City"},{"Raw Address":"468 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"308 JIMENEZ Parada Valenzuela City"},{"Raw Address":"96 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"204B F.SANTIAGO STR. Parada Valenzuela City"},{"Raw Address":"31 B.O Parada Valenzuela City"},{"Raw Address":"116 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"134 5TH ST. Parada Valenzuela City"},{"Raw Address":"6TH STREET FORTUNE Village 5 NARRA ST. Parada Valenzuela City"},{"Raw Address":"95 P. DE GUZMAN TS. Parada Valenzuela City"},{"Raw Address":"121 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"96 Parada Valenzuela City"},{"Raw Address":"2039 SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"134 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"1164 CALLE ONCE Parada Valenzuela City"},{"Raw Address":"39 C. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"#232 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"416 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"152 ALICIA ST. FORTUNE VillageE 4 Parada Valenzuela City"},{"Raw Address":"BLK 3 LOT 9 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"2311 8TH ST.FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE COMPOUND Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"132 KANMAGONG ST. FV5 Parada Valenzuela City"},{"Raw Address":"FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"185 FELIZA Parada Valenzuela City"},{"Raw Address":"215 DAET COMPD.PARADA Valenzuela City"},{"Raw Address":"256 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"202 FELISA Parada Valenzuela City"},{"Raw Address":"CALE ONSE Parada Valenzuela City"},{"Raw Address":"425 ZAMORA ST. PARADA Valenzuela City"},{"Raw Address":"69 PARADA RD. Parada Valenzuela City"},{"Raw Address":"349 F FRANCISCO ST. GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"154 ALICIA ST. Parada Valenzuela City"},{"Raw Address":"175-A MOLAVE ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"JADE ST. JADE HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"#5 IPIL ST. Parada Valenzuela City"},{"Raw Address":"032 PARADA ST. PARADA Valenzuela City"},{"Raw Address":"448 GOMEZ ST Parada Valenzuela City"},{"Raw Address":"116 CAPT.CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"181- RAMON ST. Parada Valenzuela City"},{"Raw Address":"353 J. FRANCIS ST. Parada Valenzuela City"},{"Raw Address":"206 22ND ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"39 Parada Valenzuela City"},{"Raw Address":"DE GUZMAN Parada Valenzuela City"},{"Raw Address":"255 TOMASA STREET Parada Valenzuela City"},{"Raw Address":"310 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"181 FELISA ST. Parada Valenzuela City"},{"Raw Address":"178 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257-B M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"18-A F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"Q4-176 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"116 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"158 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"316 MENES COMP. Parada Valenzuela City"},{"Raw Address":"108 COR. YAKAL AND KAMAGONG ST FORTUNE Parada Valenzuela City"},{"Raw Address":"469 B KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"223 ABELARDO FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"(Member) Parada Valenzuela City"},{"Raw Address":"206 F.SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"039 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"303 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"41 NARRA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"190-B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"237 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"211 21ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"407 P.DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"TATA ERO P DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"69 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"399 SAN ANDRES ST Parada Valenzuela City"},{"Raw Address":"194 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"B2 LOT 14 F. FRANCISCO GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"BLK. 3 LOT 1 F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"271 CONSUELO ST Parada Valenzuela City"},{"Raw Address":"244 ESTRELLIA APARTMENT Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"244 ABELARDO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"19 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"162 E SALAZAR ST. PARADA Valenzuela City"},{"Raw Address":"244 19TH STREET FORTUNE V Village Parada Valenzuela City"},{"Raw Address":"F SANTIAGO Parada Valenzuela City"},{"Raw Address":"TATA ANDRES Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. Parada Valenzuela City"},{"Raw Address":"F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"316 JEMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"108 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"455 KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"315 JIMENEZ COMP Parada Valenzuela City"},{"Raw Address":"419 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"93 A. CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"313 PARADA Valenzuela City"},{"Raw Address":"001 INTER ISLAND FEEDS PARADA Valenzuela City"},{"Raw Address":"154 NARRA ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLK. 1 LOT 5TM HOA TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"88 KAMAGONG ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID CALLE ONSE Parada Valenzuela City"},{"Raw Address":"203 B VENUS ST. F SANTIAGO Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L4 B10 25TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"402 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"160 ACACIA CORNER MOLAVE ST. Parada Valenzuela City"},{"Raw Address":"0004 JADE ST HIYAS HOMES Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. CAPT CRUZ. ST. Parada Valenzuela City"},{"Raw Address":"CALLE ONSE ST. DULO Parada Valenzuela City"},{"Raw Address":"222 ANTHONY STREET FORTUNE Village IV Parada Valenzuela City"},{"Raw Address":"#384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"168 E. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"001 BO Parada Valenzuela City"},{"Raw Address":"B2 L 1O GINTONG SILANGAN FRANCISCO Parada Valenzuela City"},{"Raw Address":"137 KAINGIN STREET Parada Valenzuela City"},{"Raw Address":"204 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"422 BURGOS ST. FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"75 GOMEZ ST FORTUNE Village7 Parada Valenzuela City"},{"Raw Address":"366 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"032 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"270 CONSUELO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"32 PARADA RD. Parada Valenzuela City"},{"Raw Address":"339 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"442 FORTUNE Village 7. Parada Valenzuela City"},{"Raw Address":"355 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"13 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"087 PARADA Valenzuela City"},{"Raw Address":"25 ST. FORTUNE VLL. 5 PARADA Valenzuela City"},{"Raw Address":"243 S.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 2 LOT 9 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"297 D. TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"332 T. MANANG ST Parada Valenzuela City"},{"Raw Address":"33 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"391 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"277 PILAR ST. Parada Valenzuela City"},{"Raw Address":"9 DR.LAUREL ST. FORTUNE Village4 Valenzuela City Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"ILOCTO CMPD. PARADA Valenzuela City"},{"Raw Address":"72 JADE ST. HIYAS SUBD. PARADA Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"147 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"222 ANTHONY ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"283 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"B2 L2 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"021 EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"367 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"421 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"40 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"264 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"42 PARADA RD Parada Valenzuela City"},{"Raw Address":"201 - A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"117 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"187 FELIZA ST. UNIT 12 Parada Valenzuela City"},{"Raw Address":"101 DE GULA CMPD. PARADA Valenzuela City"},{"Raw Address":"169 ACACIA FORTUNE Village Parada Valenzuela City"},{"Raw Address":"CAPT. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 2 BLOCK 10 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"269 E GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"L4 B10 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"125 CONSUELO ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"112 CALLE ONSE ST. Parada Valenzuela City"},{"Raw Address":"349F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"26 F Parada Valenzuela City"},{"Raw Address":"89 D CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"232 Parada Valenzuela City"},{"Raw Address":"349 A. FRANCISCO Parada Valenzuela City"},{"Raw Address":"L-11 BLK-2 SAPPHIRE ST. Parada Valenzuela City"},{"Raw Address":"104 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"2427 7TH ST. Parada Valenzuela City"},{"Raw Address":"377 I8ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"BLK3 LOT2 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"2646 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"129 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"235 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"130 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"141 DALAWAN Parada Valenzuela City"},{"Raw Address":"229 ABELARDO ST. PARADA Valenzuela City"},{"Raw Address":"247 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"11-C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"409 P.DE GUZMAN ST PARADA Valenzuela City"},{"Raw Address":"343 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"199 BEN MARIE AGLIHAM COMPOUND 21ST Parada Valenzuela City"},{"Raw Address":"410 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"39 RAMON ST . PARADA Valenzuela City"},{"Raw Address":"199 6ST Parada Valenzuela City"},{"Raw Address":"871 FELIZA ST Parada Valenzuela City"},{"Raw Address":"187 MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"424 A.BURGOS ST. Parada Valenzuela City"},{"Raw Address":"OLIVA COR. RAMON ST. Parada Valenzuela City"},{"Raw Address":"108 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"203 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"185 Parada Valenzuela City"},{"Raw Address":"141 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"94 CAPT CRUZ ST. Parada Valenzuela City"},{"Raw Address":"36C PARADA RD Parada Valenzuela City"},{"Raw Address":"#8 5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"0411 AP DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"138 LAGDAMEO RD. Parada Valenzuela City"},{"Raw Address":"406 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO COMPD. Parada Valenzuela City"},{"Raw Address":"199 ANTHONY ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"116 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"198 CALLE ONSE PARADA Valenzuela City"},{"Raw Address":"88 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"95 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"232 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"562 WEST SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"8 VENANCIO INT. RD. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN PARADA Valenzuela City"},{"Raw Address":"272 PILLAR STREET Parada Valenzuela City"},{"Raw Address":"118 1ST ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"140 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"239 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"J. FRANCISCO Parada Valenzuela City"},{"Raw Address":"LOT 10 BLK 2 PARADA ROAD EXT. FORTUNE Parada Valenzuela City"},{"Raw Address":"94B FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"100 F. CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"236 S DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"CONSUELO ST. Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"171 SALAZAR Parada Valenzuela City"},{"Raw Address":"99 UNI STAR F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"246-C S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"250 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"36 Parada Valenzuela City"},{"Raw Address":"333 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES ST. Parada Valenzuela City"},{"Raw Address":"83 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. BO. Parada Valenzuela City"},{"Raw Address":"142 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"42 PARADA RD/ Parada Valenzuela City"},{"Raw Address":"04 P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST.. PARADA Valenzuela City"},{"Raw Address":"224 CONSUELO ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"57 PARADA RD FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"139 DALAWAN ST. PARADA Valenzuela City"},{"Raw Address":"BLK. 4 LOT 6 GINTONG SILANGAN F.FRANCISCO Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"456-K KAINGIN ST. PARADA Valenzuela City"},{"Raw Address":"14 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"314 JIMENEZ CMPD. Parada Valenzuela City"},{"Raw Address":"130 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"12 D. PARADA ROAD Parada Valenzuela City"},{"Raw Address":"22ND ST. 207 FORTUEN 5 Village Parada Valenzuela City"},{"Raw Address":"12 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 RAMON ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"86 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"4488 SERVICE RD. Parada Valenzuela City"},{"Raw Address":"273 DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"404 P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"199 BEN MARIE COMPOUND Parada Valenzuela City"},{"Raw Address":"29 Parada Valenzuela City"},{"Raw Address":"168 ALICIA ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"121 CONSUELO Parada Valenzuela City"},{"Raw Address":"Village Parada Valenzuela City"},{"Raw Address":"1 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"441 P. GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"400 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"168 DOON COMPOUND Parada Valenzuela City"},{"Raw Address":"299 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"087 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 7 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"L9 B1 HIYAS Parada Valenzuela City"},{"Raw Address":"LOT 41 BLK. 10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"393 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"122 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"458 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"209 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"B22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"207 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"11 RD. PARADA ST. Parada Valenzuela City"},{"Raw Address":"86 CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"202 FELISA ST. PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"186 D. FELIZA ST. Parada Valenzuela City"},{"Raw Address":"187-A FELIZA ST. Parada Valenzuela City"},{"Raw Address":"DOOR 1 M. DE GULA Parada Valenzuela City"},{"Raw Address":"339 20TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"456-D KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"308 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"256 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"224 20TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"320 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"243 7ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"299 JIMENES Parada Valenzuela City"},{"Raw Address":"26 MARS F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"326 T. MANANG STREET Parada Valenzuela City"},{"Raw Address":"220-A 21ST STREET Parada Valenzuela City"},{"Raw Address":"308 T MANANG Parada Valenzuela City"},{"Raw Address":"11C 230 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"417 TATA ERO Parada Valenzuela City"},{"Raw Address":"145 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"154 C. SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"360 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"27 Parada Valenzuela City"},{"Raw Address":"028 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"109 LAGDAMEO ST. Parada Valenzuela City"},{"Raw Address":"457 E KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"B5L8 JADE ST HIYAS HOMES SUBD. Parada Valenzuela City"},{"Raw Address":"405 P. DE GUZMAN ST/ Parada Valenzuela City"},{"Raw Address":"088 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"178 KAMAGONG ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"162 SALAZAR Parada Valenzuela City"},{"Raw Address":"031 PARADA RD. Parada Valenzuela City"},{"Raw Address":"290 A.SANTOLAN RD. PARADA Valenzuela City"},{"Raw Address":"87 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"449 SERVICE RD. PARADA Valenzuela City"},{"Raw Address":"124-B CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. Parada Valenzuela City"},{"Raw Address":"102 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"BLK 6 LOT 7 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. P.SANTIAGO Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"# 39 RAMON ST. Parada Valenzuela City"},{"Raw Address":"340 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"442 GOMEZ ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"DOOR F SANTOS TOWNHOUSE P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"185 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE COMP. AGLIHAM Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"261 A 25TH STREET FORTUNE Village Parada Valenzuela City"},{"Raw Address":"412 TATA ERO Parada Valenzuela City"},{"Raw Address":"61 MARS ST. Parada Valenzuela City"},{"Raw Address":"130 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"248 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"A. TATAERO P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"182 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"168 SALAZAR STREET Parada Valenzuela City"},{"Raw Address":"455 BURGOS ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"185- C FELIZA ST. Parada Valenzuela City"},{"Raw Address":"P.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"94 PARADA Valenzuela City"},{"Raw Address":"002 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"3200 DIMAUNAHAN CMPD PARADA Valenzuela City"},{"Raw Address":"269 SDEGUZMAN ST. Parada Valenzuela City"},{"Raw Address":"225 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"147 DALAWAN STREET Parada Valenzuela City"},{"Raw Address":"390 IMPONG JUANA Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village V Parada Valenzuela City"},{"Raw Address":"365 TATA ANDRES ST. PARADA Valenzuela City"},{"Raw Address":"140 CAPT. CRUZ COR E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"99 VENUS ST. F.SANTIAGO COMPOUND Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. FORTUNE Village4 Parada Valenzuela City"},{"Raw Address":"278 PILAR ST FORTUNE VLL.4 Parada Valenzuela City"},{"Raw Address":"345 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"240 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"322 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"143 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"36 T. ANDRES ST. VAL. MM Parada Valenzuela City"},{"Raw Address":"#002 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"155 ALICIA ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"18 Parada Valenzuela City"},{"Raw Address":"190 6TH ST. FORTUNE Village 5&6 Parada Valenzuela City"},{"Raw Address":"252 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"365 Parada Valenzuela City"},{"Raw Address":"117-B CAPT CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"8 YAKAL ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"113 KAMAGONG FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"468 N. KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"406 BANDINO ST. P. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"194 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"135 YAKAL CORNER NARRA STREET Parada Valenzuela City"},{"Raw Address":"374 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"420 ZAMORA STREET FV7 Parada Valenzuela City"},{"Raw Address":"101 M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"165-G5 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"182 23RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"067 FURTUNE 6 Parada Valenzuela City"},{"Raw Address":"407 P DE GUZMAN Parada Valenzuela City"},{"Raw Address":"215 S. DE GUZMAN DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"170 MOLAVE STREET Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"44B SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"1727B-TATAERO Parada Valenzuela City"},{"Raw Address":"244 7TH ST. PARADA Valenzuela City"},{"Raw Address":"187 FELIZA ST. Parada Valenzuela City"},{"Raw Address":"30 PARADA RD Parada Valenzuela City"},{"Raw Address":"ALICIA ST. Fortune Village 4 Village Parada Valenzuela City"},{"Raw Address":"224 ABELARDO ST. FV 4 Parada Valenzuela City"},{"Raw Address":"#223 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"342 TIA MANANG ST. PARADA Valenzuela City"},{"Raw Address":"2345 DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"415 TATA ERO STREET Parada Valenzuela City"},{"Raw Address":"VENUS STREET 207 FELIZA BUKID Parada Valenzuela City"},{"Raw Address":"B2L23 F FRANCISCO Parada Valenzuela City"},{"Raw Address":"B1L9 T. MANANG Parada Valenzuela City"},{"Raw Address":"039 PARADA RD. Parada Valenzuela City"},{"Raw Address":"67B. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"314 MENES COMPOUND Parada Valenzuela City"},{"Raw Address":"BLK. 4 LOT 3 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"246 Parada Valenzuela City"},{"Raw Address":"440 SERVICE ROAD RUMARAO CMPD. Parada Valenzuela City"},{"Raw Address":"25TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"216 ANTHONY STREET Parada Valenzuela City"},{"Raw Address":"349 S. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"187-B FELIZA ST. Parada Valenzuela City"},{"Raw Address":"264 25 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"ROOM G 260 TATA ROMAN STREET Parada Valenzuela City"},{"Raw Address":"250 25 ST. FORTUNE DRIVE Village. 5&6 Parada Valenzuela City"},{"Raw Address":"45 AF SANTIAGO Parada Valenzuela City"},{"Raw Address":"B3 L22 TANDANG MANANG HOA Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"TELIZA BUKID Parada Valenzuela City"},{"Raw Address":"113 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"75 PARADA RD. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"7 F.SANTIAGO PARADA Valenzuela City"},{"Raw Address":"395 E. SAN ANDRES Parada Valenzuela City"},{"Raw Address":"T.EUGENIO ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 15 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"151 ALICIA ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"L6 Parada Valenzuela City"},{"Raw Address":"BLK 11 LOT 24 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. FORTUNE Parada Valenzuela City"},{"Raw Address":"243 PASING Parada Valenzuela City"},{"Raw Address":"# 80 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"105 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"192 M DE GULA ST Parada Valenzuela City"},{"Raw Address":"127 YAKAL ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"91 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"412 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"185B MOLAVE ST FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"20 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"423 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"28 CAPT. CRUZ STREET Parada Valenzuela City"},{"Raw Address":"105 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"240 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"206 F SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"286 S DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"311 PARADA Valenzuela City"},{"Raw Address":"372 TATA ANDRES STREET Parada Valenzuela City"},{"Raw Address":"23 T. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"347 FRANCISCO Parada Valenzuela City"},{"Raw Address":"165 SALAZAR Parada Valenzuela City"},{"Raw Address":"341 20TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"13 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"230 S.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"196 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"204 F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"245 7TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"174 FELISA ST. Parada Valenzuela City"},{"Raw Address":"308 JIMENIZ COMPOUND Parada Valenzuela City"},{"Raw Address":"123 CAPT. Parada Valenzuela City"},{"Raw Address":"222 ANTHONY Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"338 T.MANANG ST. Parada Valenzuela City"},{"Raw Address":"3-B F. SANTIAGO STREET Parada Valenzuela City"},{"Raw Address":"314 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"26 F SANTIAGO PARADA V.C Parada Valenzuela City"},{"Raw Address":"456 B. KAINGIN ST Parada Valenzuela City"},{"Raw Address":"204 ANTHONY ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"385 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"427 A BURGOS Parada Valenzuela City"},{"Raw Address":"17 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"Q5-151 SAPPHIRE ST. HIYAS SUBD. WEST Parada Valenzuela City"},{"Raw Address":"190 6TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"392 P. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"237 S.DE GUZMAN ST.PARADA Valenzuela City"},{"Raw Address":"158 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"40 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"39 RAMOS ST. Parada Valenzuela City"},{"Raw Address":"316 BO JIMENEZ Parada Valenzuela City"},{"Raw Address":"256 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"384 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"272 S. DE GUZMAN STREET Parada Valenzuela City"},{"Raw Address":"124 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"21 ST AGLEHAM COMP. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"073 PARADA RD EXT. FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ Parada Valenzuela City"},{"Raw Address":"138 E. LAGDAMEO STREET FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"204 FELISA ST. PARADA Valenzuela City"},{"Raw Address":"LOT 6 B. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"F FRANCISCO Parada Valenzuela City"},{"Raw Address":"45 A F.SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"234 ABELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"5-5TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237-19 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"183 MOLAVE Parada Valenzuela City"},{"Raw Address":"241 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"411 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"347 BO. PARADA Valenzuela City"},{"Raw Address":"470 A KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"CAPT.CRUZ ST PARADA Valenzuela City"},{"Raw Address":"BLK4 LOT 18 PEARL ST. HIYAS Parada Valenzuela City"},{"Raw Address":"199 BENMARY 21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"57 PARADA ROAD FV6 Parada Valenzuela City"},{"Raw Address":"198 COR 19TH & 21TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"297 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"426 BURGOS ST. Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"276 UNIT A Parada Valenzuela City"},{"Raw Address":"24TH ST. 266 Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"36 A PARADA ROAD Parada Valenzuela City"},{"Raw Address":"96 FELIZA Parada Valenzuela City"},{"Raw Address":"52 PARADA ROAD Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"273 S- DE GUZMAN Parada Valenzuela City"},{"Raw Address":"BLK5 LOT11 F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"093 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"187 24TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"316 JIMENEZ COMPD. Parada Valenzuela City"},{"Raw Address":"119 B PEARL ST HIYAS SUBD Parada Valenzuela City"},{"Raw Address":"192 M. DEGULA Parada Valenzuela City"},{"Raw Address":"DOON COMPD. 168 SALAZAR ST. Parada Valenzuela City"},{"Raw Address":"377 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"435 ZAMORA SR. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"055 KAMAGONG Parada Valenzuela City"},{"Raw Address":"185 23RD ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"266 24 ST. FORTUNE V-5 Parada Valenzuela City"},{"Raw Address":"113 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"316 MENEZ COMP. Parada Valenzuela City"},{"Raw Address":"COR. 23 RD ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"1 PARADA RD. Parada Valenzuela City"},{"Raw Address":"012 PARADA RD Parada Valenzuela City"},{"Raw Address":"419 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"316 MENES COMPD. Parada Valenzuela City"},{"Raw Address":"412 C. P. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"281 PILAR ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"271 MARTHA Parada Valenzuela City"},{"Raw Address":"241 7 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"194 FORTUNE Village 5 6TH ST. Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. PARADA Valenzuela City"},{"Raw Address":"13 5TH FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"B4 L9 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"5TH ST Parada Valenzuela City"},{"Raw Address":"UNIT 5 ALFONSO APARTMENT M. DE GULA ST. Parada Valenzuela City"},{"Raw Address":"BLK 2 LOT 11 SAPPHIRE ST. HIYAS Parada Valenzuela City"},{"Raw Address":"360 J FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"LOT 10 P. SANTIAGO Parada Valenzuela City"},{"Raw Address":"165 ACACIA ST. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"175 MOLAVE Parada Valenzuela City"},{"Raw Address":"225 A. BELARDO ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"78 B PARADA ROAD EXTENSION Parada Valenzuela City"},{"Raw Address":"120 LAGDAMEO ST.FV 4 PARADA Valenzuela City"},{"Raw Address":"322 TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"136 JIMENEZ COMP. Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"170 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"187 PARADA STREET Parada Valenzuela City"},{"Raw Address":"448 SERVICE ROAD DULO Parada Valenzuela City"},{"Raw Address":"FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"2 ACACIA COR. YAKAL ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"102 KAMAGONG ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"L49 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0457 KAINGIN ST. Parada Valenzuela City"},{"Raw Address":"204 VENUS Parada Valenzuela City"},{"Raw Address":"356 J. FRANCISCO STREET Parada Valenzuela City"},{"Raw Address":"258 M DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"224 ABELARDO Parada Valenzuela City"},{"Raw Address":"503 TINDALO ST. ABCO COMPD. Parada Valenzuela City"},{"Raw Address":"230 EMBUSADO S. DE GUZMAN ST.Parada Valenzuela City"},{"Raw Address":"230 1-F EMBUSCADO S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"0320 KAMAGONG ST. Parada Valenzuela City"},{"Raw Address":"90 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"199 2 ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"21 ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"349 FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"290 M. ILOCTO Parada Valenzuela City"},{"Raw Address":"170 DOON COMPOUND SSALAZAR ST. Parada Valenzuela City"},{"Raw Address":"318 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"202 FELIZA ST. PARADA Valenzuela City"},{"Raw Address":"106 LAGDAMEO ST FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"29A KAMAGONG Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"27A PARADA RD Parada Valenzuela City"},{"Raw Address":"F. SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"258 M. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA STREET Parada Valenzuela City"},{"Raw Address":"336 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"31 EARTH F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"SISCAR APT. Parada Valenzuela City"},{"Raw Address":"260 A. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"25 EUGENIO ST Parada Valenzuela City"},{"Raw Address":"121 CONSUELO ST. PARADA Valenzuela City"},{"Raw Address":"214 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"#1 E&E MARS ST F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"99 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. FORTUNE VillageE 6 Parada Valenzuela City"},{"Raw Address":"31 F SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"188 PARADA Valenzuela City"},{"Raw Address":"1618 PARAFORT M. DELOS REYES Parada Valenzuela City"},{"Raw Address":"469 KAINGIN ST.PARADA Valenzuela City"},{"Raw Address":"147 NARRA ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"153 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"94 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"071 Parada Valenzuela City"},{"Raw Address":"364 TATA ANDRES ST Parada Valenzuela City"},{"Raw Address":"228 S. DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"266 24TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"448 GOMEZ ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"2 TINDALO STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"199 BENMARIE GARDEN 21ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"315 JIMENES COMP. Parada Valenzuela City"},{"Raw Address":"214 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"39 C PARADA RD VALENZUELA CITY Parada Valenzuela City"},{"Raw Address":"446 RUMARAO COPMD. PARADA Valenzuela City"},{"Raw Address":"157 A. LITICIA ST. FV 4 Parada Valenzuela City"},{"Raw Address":"175 RAMON STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"LOT 19 BLK 8 FORTUNE DRIVE Parada Valenzuela City"},{"Raw Address":"76 PARADA RD. EXT. FORTUNE Village 7 Valenzuela City Parada Valenzuela City"},{"Raw Address":"415 ZAMORA ST. FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"440 ROMARAW COMPOUND Parada Valenzuela City"},{"Raw Address":"204 B F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"271 MARTA STREET Parada Valenzuela City"},{"Raw Address":"039 Parada Valenzuela City"},{"Raw Address":"14 DIAMOND ST. HIYAS SUBDIVISION Parada Valenzuela City"},{"Raw Address":"08 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"160 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"215 21ST. FORTUNE VillageS 5 Parada Valenzuela City"},{"Raw Address":"63 PARADA Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"254 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"203 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"313 MENEZ ST. PARADA Valenzuela City"},{"Raw Address":"24E EUGENIO ST Parada Valenzuela City"},{"Raw Address":"126 LAGDAMEO FORTUNE IV Village Parada Valenzuela City"},{"Raw Address":"PARADA RD. ST. Parada Valenzuela City"},{"Raw Address":"390 TATA ANDRES Parada Valenzuela City"},{"Raw Address":"241 19TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"241 S DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"173 23RD ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"133 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"320 TANDANG MANANG ST. PARADA Valenzuela City"},{"Raw Address":"278 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"202 ANTHONY ST Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"26 F. MARS ST. Parada Valenzuela City"},{"Raw Address":"405 P.DEGUZMAN PARADA Valenzuela City"},{"Raw Address":"BLK. 1 LOT 7 Fortune Village 5 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"118 CAPTAIN CRUZ STREET Parada Valenzuela City"},{"Raw Address":"450 SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"24 EUGENIO COMP. Parada Valenzuela City"},{"Raw Address":"45 ST. F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"437 ZAMORA Parada Valenzuela City"},{"Raw Address":"210 CALLE ONSE Parada Valenzuela City"},{"Raw Address":"#26 MARS ST. Parada Valenzuela City"},{"Raw Address":"312 D JIMENEZ COMPOUND ST. Parada Valenzuela City"},{"Raw Address":"2411 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"028 Parada Valenzuela City"},{"Raw Address":"31 EARTH ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"036-C PARADA ROAD Parada Valenzuela City"},{"Raw Address":"283 PILAR ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"257 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"290 ILOCTO COMPD. Parada Valenzuela City"},{"Raw Address":"375 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"24 VENUS ST. Parada Valenzuela City"},{"Raw Address":"203 18TH ST. Fortune Village 5 PARADA Valenzuela City"},{"Raw Address":"199 BENMARIE AGLEHAM COMP. 21ST ST. FV5 Parada Valenzuela City"},{"Raw Address":"388 IMPONG JUANA ST. Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. FORTUNE Village6 Parada Valenzuela City"},{"Raw Address":"BLOCK 4 LOT 19 F. FRANCISCO ST. GINTONG Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID ST. Parada Valenzuela City"},{"Raw Address":"222 SALVADOR ST Parada Valenzuela City"},{"Raw Address":"064 PARADA RD Fortune Village 5 & 6 Parada Valenzuela City"},{"Raw Address":"083 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"FORTUNE Village Parada Valenzuela City"},{"Raw Address":"269 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"234 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"36 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"APT.14 RIVERA CMPD. TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"0320 S. DE GUZMAN ST Parada Valenzuela City"},{"Raw Address":"161 SALAZAR ST.PARADA Valenzuela City"},{"Raw Address":"F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"93 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"215 DAET COMPOND Parada Valenzuela City"},{"Raw Address":"15 F. SANTIAGO ST. Parada Valenzuela City"},{"Raw Address":"#146 ALICIA ST. F4 Parada Valenzuela City"},{"Raw Address":"22 A. EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"199 21ST. BENMARIE COMPD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"471 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"167 ALICIA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"21 FORTUNE Village 5 STREET Parada Valenzuela City"},{"Raw Address":"267 PETER ST. Parada Valenzuela City"},{"Raw Address":"184 MOLAVE ST. Fortune Village 6 Village Parada Valenzuela City"},{"Raw Address":"CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"136 E.LAGDAMEO ST.PARADA Valenzuela City.A Parada Valenzuela City"},{"Raw Address":"BLK. 2 LOT 13 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"0147 DOON COMP. SALAZAR Parada Valenzuela City"},{"Raw Address":"199 21ST. FORTUNE Village PARADA Valenzuela City"},{"Raw Address":"68 PARADA RD. Fortune Village 6 PARADA Valenzuela City"},{"Raw Address":"513 TINDALO Parada Valenzuela City"},{"Raw Address":"413 T. MANANG ST. Parada Valenzuela City"},{"Raw Address":"B3 L11 TMHOA TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"123 CAPT. CRUZ ST. Parada Valenzuela City"},{"Raw Address":"21 ST. BEN MARIE COMP. Parada Valenzuela City"},{"Raw Address":"25 PARADA RD Parada Valenzuela City"},{"Raw Address":"198 CORNER 19TH &21ST STS. Parada Valenzuela City"},{"Raw Address":"#39 K. RAMON ST. Parada Valenzuela City"},{"Raw Address":"202 FELIZA ST.PARADA Valenzuela City"},{"Raw Address":"#22 EUGENIO ST. Parada Valenzuela City"},{"Raw Address":"44 PARADA RD. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"188 DE GULA COPD Parada Valenzuela City"},{"Raw Address":"39 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"39 PARADA ST. Parada Valenzuela City"},{"Raw Address":"9 5TH STREET FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"995 SANTIAGO ST Parada Valenzuela City"},{"Raw Address":"266 B 24TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"260 S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"039 D SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"243 S. DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"91 ADOR ST. Parada Valenzuela City"},{"Raw Address":"PUROK 6 207 FELIZA BUKID ST. Parada Valenzuela City"},{"Raw Address":"126 B CAPT. CRUZ ST Parada Valenzuela City"},{"Raw Address":"207 FELISA BUKID Parada Valenzuela City"},{"Raw Address":"472 KABERONG ST. PARADA Valenzuela City"},{"Raw Address":"99 VENUS ST. F. SANTIAGO Parada Valenzuela City"},{"Raw Address":"Fortune Village 4 PARADA Valenzuela City"},{"Raw Address":"668 P. GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"451 ZAMORA ST. Parada Valenzuela City"},{"Raw Address":"055 BURGOS ST. Fortune Village 7 Village Parada Valenzuela City"},{"Raw Address":"BLOCK 13 C LOT 8 7TH ST Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"274 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"140 NARRA ST. Parada Valenzuela City"},{"Raw Address":"418 ZAMORA ST FV7 Parada Valenzuela City"},{"Raw Address":"3 PARADA RD. PARADA Valenzuela City"},{"Raw Address":"M.M. Parada Valenzuela City"},{"Raw Address":"416 KAMAGONG ST. PARADA Valenzuela City"},{"Raw Address":"100 CAPT.CRUZ ST.DE GULA CMPD. Parada Valenzuela City"},{"Raw Address":"BLK3 LOT 2 349 F. FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"0320 UNIT 8 S.DE GUZMAN Parada Valenzuela City"},{"Raw Address":"6 6TH ST. Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"96 FORTUNE DRIVE FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"237 19TH ST. FORTUNE Village Parada Valenzuela City"},{"Raw Address":"2 ALICIA ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"C. CALLE ONSE BUKID Parada Valenzuela City"},{"Raw Address":"406 P.DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"369 A TATA ANDRESS ST Parada Valenzuela City"},{"Raw Address":"BLK 1 LOT 7 PARADA RD. FORTUNE VillageS Parada Valenzuela City"},{"Raw Address":"121 CAPT CRUZ Parada Valenzuela City"},{"Raw Address":"73 SAINT MARYS DULO Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"357 J/ FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"384 S DE GUZMAN Parada Valenzuela City"},{"Raw Address":"116 CALLEONCE Parada Valenzuela City"},{"Raw Address":"405 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"B4 L5 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"469 PARADA ST KAINGIN Parada Valenzuela City"},{"Raw Address":"87 CAPT. CRUZ Parada Valenzuela City"},{"Raw Address":"245 S.DE GUZMAN ST. PARADA Valenzuela City"},{"Raw Address":"273 PILAR STREET Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"108 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"257 DE GUZMAN ST. Parada Valenzuela City"},{"Raw Address":"471 KA BERONG ST. Parada Valenzuela City"},{"Raw Address":"153 ACACIA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"28 NARRA ST. Parada Valenzuela City"},{"Raw Address":"186 6TH ST. FORTUNE Village 5 PARADA Valenzuela City"},{"Raw Address":"BLK1 LOT 7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"118 DOOR 3 CAPT CRUZ ST.PARADA Valenzuela City"},{"Raw Address":"RUMARAO COMP. SERVICE ROAD Parada Valenzuela City"},{"Raw Address":"130 Parada Valenzuela City"},{"Raw Address":"BLOCK 2 LOT 2 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"72 SALAZAR ST Parada Valenzuela City"},{"Raw Address":"133 CAPT.CRUZ ST. Parada Valenzuela City"},{"Raw Address":"B2L7 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"229 18TH STREET Parada Valenzuela City"},{"Raw Address":"109 KAMAGONG ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"2451 RAMON ST. Fortune Village 4 Parada Valenzuela City"},{"Raw Address":"E FRANCISCO ST. Parada Valenzuela City"},{"Raw Address":"460 GOMEZ ST Fortune Village 7 Parada Valenzuela City"},{"Raw Address":"171 SALAZAR. ST. Parada Valenzuela City"},{"Raw Address":"235 F. FRANCISCO Parada Valenzuela City"},{"Raw Address":"442 GOMEZ FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"249 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"26 F SANTIAGO MARS STREET Parada Valenzuela City"},{"Raw Address":"332 TANDANG MANANG STREET Parada Valenzuela City"},{"Raw Address":"328 T.MANANG ST. PARADA Valenzuela City"},{"Raw Address":"82 RAMON ST. SANTIAGO COMP. Parada Valenzuela City"},{"Raw Address":"145 NARRA ST Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"26 F. SANTIAGO MARS ST. Parada Valenzuela City"},{"Raw Address":"316 JIMENES COMPOUND Parada Valenzuela City"},{"Raw Address":"348 CAPT. F FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"CALLE ONSE Parada Valenzuela City"},{"Raw Address":"091 DAET COMPOUND Parada Valenzuela City"},{"Raw Address":"330 TANDANG MANANG ST Parada Valenzuela City"},{"Raw Address":"166 6ST FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"139 NARRA ST. FORTUNE Village 4 Parada Valenzuela City"},{"Raw Address":"BLK 5 LOT 17 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"336 ST. TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"24 VENUS E&E COMPD.1 SANTIAGO Parada Valenzuela City"},{"Raw Address":"317 TANDANG MANANG Parada Valenzuela City"},{"Raw Address":"7 GSR SATIAGO ST. Parada Valenzuela City"},{"Raw Address":"190 DE GULA ST. Parada Valenzuela City"},{"Raw Address":"350 S. FRANCISCO ST. PARADA Valenzuela City"},{"Raw Address":"0089 B CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"L41 B10 NARRA ST. Fortune Village 6 Parada Valenzuela City"},{"Raw Address":"888 NARRA ST. Parada Valenzuela City"},{"Raw Address":"444 RUMARAO CMPD. PARADA Valenzuela City"},{"Raw Address":"141 DALAWIN ST. PARADA Valenzuela City"},{"Raw Address":"11 5TH STREET Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"382 TATA ANDRES ST. Parada Valenzuela City"},{"Raw Address":"447 FORTUNE Village 7 Parada Valenzuela City"},{"Raw Address":"31 Parada Valenzuela City"},{"Raw Address":"B3 L6 TINDALO ST. FV5 Parada Valenzuela City"},{"Raw Address":"90 CAPT.CRUZ ST. PARADA Valenzuela City"},{"Raw Address":"BLK 4 LOT 13 GINTONG SILANGAN Parada Valenzuela City"},{"Raw Address":"56 FORTUNE VillageE Parada Valenzuela City"},{"Raw Address":"251 25TH ST. FORTUNE Village 5 Parada Valenzuela City"},{"Raw Address":"26 CAPTAIN CRUZ ST. Parada Valenzuela City"},{"Raw Address":"349 F. FRANCISCO ST Parada Valenzuela City"},{"Raw Address":"442 P. GOMEZ Parada Valenzuela City"},{"Raw Address":"254 A S. DE GUZMAN Parada Valenzuela City"},{"Raw Address":"297D TANDANG MANANG ST. Parada Valenzuela City"},{"Raw Address":"174 MOLAVE ST. FORTUNE Village 6 Parada Valenzuela City"},{"Raw Address":"146 FORTUNE DRIVE Fortune Village 5 Parada Valenzuela City"},{"Raw Address":"23RD ST. Parada Valenzuela City"},{"Raw Address":"440 GOMEZ ST. Parada Valenzuela City"},{"Raw Address":"#17 PARADA ROAD Parada Valenzuela City"},{"Raw Address":"90 CAPT CRUZ ADOR ST Parada Valenzuela City"}]'),w0=({children:t})=>X.jsxs("div",{className:"layout",children:[X.jsx(mK,{}),X.jsx("div",{className:"content",children:t})]}),rbe=t=>abe.some(e=>e["Raw Address"].toLowerCase().includes(t.toLowerCase())),nbe=()=>{const[t,e]=rt.useState([]),[a,r]=rt.useState(""),[s,l]=rt.useState(1),[h,n]=rt.useState([]),[w,T]=rt.useState(""),[E,z]=rt.useState(1),[k,U]=rt.useState({registered:0,pending:0,rejected:0,total:0}),[q,H]=rt.useState(null),[$,Q]=rt.useState([]),[ne,de]=rt.useState(""),[ge,fe]=rt.useState(null),_e=5;rt.useEffect(()=>{me(),Ae(),Te()},[]);const me=async()=>{try{const ye=(await Yi(Wn(kr,"approved_users"))).docs.map(ze=>({uid:ze.id,...ze.data()}));e(ye)}catch(qe){console.error("Error fetching registered users:",qe)}},Ae=async()=>{try{const ye=(await Yi(Wn(kr,"pending_users"))).docs.map(ze=>({uid:ze.id,...ze.data()}));n(ye)}catch(qe){console.error("Error fetching pending users:",qe)}},Te=async()=>{try{const qe=await Yi(Wn(kr,"admins")),ye=new Map;qe.docs.forEach(Ot=>{var pt;const dt=Ot.data();ye.set(dt.uid,{name:dt.name,role:((pt=dt.roles)==null?void 0:pt[0])||"Admin"})});const We=(await Yi(Wn(kr,"user_reports"))).docs.map(Ot=>{var ve,ea;const dt=Ot.data(),pt=ye.get(dt.reportedBy);return{id:Ot.id,...dt,reportedByName:pt?`${pt.name} (${pt.role})`:"Unknown Admin",timestamp:(ve=dt.createdAt)!=null&&ve.toDate?dt.createdAt.toDate():new Date(((ea=dt.createdAt)==null?void 0:ea.seconds)*1e3),violationType:dt.violationType||"Not Specified",details:dt.details||"No details provided"}}),lt=[...new Set(We.map(Ot=>Ot.userId))],vt=await Promise.all(lt.map(async Ot=>{const pt=(await ny(io(kr,"approved_users",Ot))).data(),ve=We.filter(ea=>ea.userId===Ot);return{uid:Ot,...pt,reports:ve.map(ea=>({...ea,reportedBy:ea.reportedByName,timestamp:ea.timestamp,violationType:ea.violationType,details:ea.details})),isBanned:(pt==null?void 0:pt.isBanned)||!1}}));Q(vt)}catch(qe){console.error("Error fetching flagged users:",qe)}},Oe=async(qe,ye)=>{try{const ze=io(kr,"pending_users",qe),lt=(await ny(ze)).data();if(ye==="approve"){const vt=rbe(lt.address);if(!vt&&!window.confirm("This address is not in the validated list. Are you sure you want to approve this user?"))return;await oR(Wn(kr,"approved_users"),{...lt,status:"approved",approvedAt:new Date,addressValidated:vt}),await s3(ze)}else ye==="reject"&&await Hd(ze,{status:"rejected",rejectedAt:new Date});me(),Ae()}catch(ze){console.error("Error processing user action:",ze)}},ie=async(qe,ye)=>{try{const ze=io(kr,"approved_users",qe);await Hd(ze,{isBanned:ye,bannedAt:ye?new Date:null}),await oR(Wn(kr,"user_notifications"),{userId:qe,type:ye?"account_banned":"account_unbanned",title:ye?"Account Banned":"Account Reinstated",message:ye?"Your account has been banned due to violations.":"Your account has been reinstated.",createdAt:new Date,isRead:!1}),Te(),me()}catch(ze){console.error("Error updating user ban status:",ze)}},we=qe=>{fe({userName:`${qe.first_name} ${qe.middle_name} ${qe.surname}`,reports:qe.reports.map(ye=>{var We,lt;const ze=ye.timestamp instanceof Date?ye.timestamp:(We=ye.timestamp)!=null&&We.toDate?ye.timestamp.toDate():new Date(((lt=ye.timestamp)==null?void 0:lt.seconds)*1e3);return{...ye,timestamp:ze}})})},Me=()=>{fe(null)},Ve=rt.useMemo(()=>t.filter(qe=>`${qe.first_name} ${qe.middle_name} ${qe.surname} ${qe.email}`.toLowerCase().includes(a.toLowerCase())),[t,a]),Ie=Math.ceil(Ve.length/_e),Ue=rt.useMemo(()=>{const qe=(s-1)*_e;return Ve.slice(qe,qe+_e)},[Ve,s]),Be=rt.useMemo(()=>h.filter(qe=>`${qe.first_name} ${qe.middle_name} ${qe.surname} ${qe.email}`.toLowerCase().includes(w.toLowerCase())),[h,w]);rt.useEffect(()=>{(()=>{U({registered:t.length,pending:h.length,rejected:h.filter(ye=>ye.status==="rejected").length,total:t.length+h.length})})()},[t,h]);const ke=({status:qe,addressValidated:ye})=>qe==="approved"?X.jsxs("div",{className:"status-container",children:[X.jsx(RU,{className:"status-icon approved",title:"Approved"}),ye===!1&&X.jsx("span",{className:"warning-text",title:"Address not in validated list",children:"⚠️"})]}):qe==="pending"?X.jsx($ue,{className:"status-icon pending",title:"Pending"}):null,Je=qe=>{H(qe)},Le=()=>{H(null)};return X.jsxs(w0,{children:[X.jsx(Ig,{title:"User Management"}),q&&X.jsx("div",{className:"image-modal",onClick:Le,children:X.jsx("img",{src:q,alt:"Profile",className:"modal-image",onClick:qe=>qe.stopPropagation()})}),ge&&X.jsx("div",{className:"modal-overlay",onClick:Me,children:X.jsxs("div",{className:"modal-content reports-modal",onClick:qe=>qe.stopPropagation(),children:[X.jsxs("h3",{children:["Reports for ",ge.userName]}),X.jsx("div",{className:"reports-list",children:ge.reports.map((qe,ye)=>X.jsxs("div",{className:"report-item",children:[X.jsx("p",{className:"report-date",children:ls(qe.timestamp).isValid()?ls(qe.timestamp).format("MMM D, YYYY HH:mm"):"Date not available"}),X.jsxs("p",{className:"report-violation",children:[X.jsx("strong",{children:"Violation Type:"})," ",qe.violationType]}),X.jsxs("p",{className:"report-details",children:[X.jsx("strong",{children:"Details:"})," ",qe.details]}),X.jsxs("p",{className:"report-status",children:[X.jsx("strong",{children:"Status:"})," ",qe.status]}),X.jsxs("p",{className:"report-reporter",children:[X.jsx("strong",{children:"Reported by:"})," ",qe.reportedBy]})]},ye))}),X.jsx("button",{className:"close-btn",onClick:Me,children:"Close"})]})}),X.jsxs("div",{className:"user-management",children:[X.jsxs("div",{className:"stats-container",children:[X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Registered Users"}),X.jsx("p",{children:k.registered})]}),X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Pending Users"}),X.jsx("p",{children:k.pending})]}),X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Rejected Users"}),X.jsx("p",{children:k.rejected})]}),X.jsxs("div",{className:"stat-card total",children:[X.jsx("h3",{children:"Total Users"}),X.jsx("p",{children:k.total})]})]}),X.jsxs("div",{className:"section",children:[X.jsx("h2",{children:"Pending Users"}),X.jsx("input",{type:"text",placeholder:"🔍 Search pending users...",value:w,onChange:qe=>T(qe.target.value),className:"search-box"}),Be.length===0?X.jsx("p",{children:"No pending users found."}):X.jsx("div",{className:"user-list",children:X.jsxs("table",{children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Status"}),X.jsx("th",{className:"profile-column",children:"Profile Photo"}),X.jsx("th",{children:"Name"}),X.jsx("th",{children:"Email"}),X.jsx("th",{children:"Address"}),X.jsx("th",{children:"Actions"})]})}),X.jsx("tbody",{children:Be.map(qe=>X.jsxs("tr",{children:[X.jsx("td",{children:X.jsx(ke,{status:qe.status,addressValidated:qe.addressValidated})}),X.jsx("td",{className:"profile-column",children:qe.profile_photo_url?X.jsx("img",{src:qe.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Je(qe.profile_photo_url)}):X.jsx("div",{className:"no-photo",children:"No Photo"})}),X.jsx("td",{children:`${qe.first_name} ${qe.middle_name} ${qe.surname}`}),X.jsx("td",{children:qe.email}),X.jsx("td",{children:qe.address}),X.jsxs("td",{className:"action-buttons",children:[X.jsxs("button",{onClick:()=>Oe(qe.uid,"approve"),className:"approve-btn",children:[X.jsx(RU,{})," Approve"]}),X.jsxs("button",{onClick:()=>Oe(qe.uid,"reject"),className:"reject-btn",children:[X.jsx(fK,{})," Reject"]})]})]},qe.uid))})]})})]}),X.jsxs("div",{className:"section",children:[X.jsx("h2",{children:"Flagged Users"}),X.jsx("input",{type:"text",placeholder:"🔍 Search flagged users...",value:ne,onChange:qe=>de(qe.target.value),className:"search-box"}),$.length===0?X.jsx("p",{children:"No flagged users found."}):X.jsx("div",{className:"user-list",children:X.jsxs("table",{children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Status"}),X.jsx("th",{className:"profile-column",children:"Profile Photo"}),X.jsx("th",{children:"Name"}),X.jsx("th",{children:"Email"}),X.jsx("th",{children:"Reports"}),X.jsx("th",{children:"Actions"})]})}),X.jsx("tbody",{children:$.filter(qe=>`${qe.first_name} ${qe.middle_name} ${qe.surname} ${qe.email}`.toLowerCase().includes(ne.toLowerCase())).map(qe=>X.jsxs("tr",{children:[X.jsx("td",{children:qe.isBanned?X.jsx("span",{className:"banned-badge",children:"Banned"}):X.jsx("span",{className:"flagged-badge",children:"Flagged"})}),X.jsx("td",{className:"profile-column",children:qe.profile_photo_url?X.jsx("img",{src:qe.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Je(qe.profile_photo_url)}):X.jsx("div",{className:"no-photo",children:"No Photo"})}),X.jsx("td",{children:`${qe.first_name} ${qe.middle_name} ${qe.surname}`}),X.jsx("td",{children:qe.email}),X.jsx("td",{children:X.jsxs("button",{className:"view-reports-btn",onClick:()=>we(qe),children:["View Reports (",qe.reports.length,")"]})}),X.jsx("td",{children:X.jsx("button",{className:qe.isBanned?"unban-btn":"ban-btn",onClick:()=>ie(qe.uid,!qe.isBanned),children:qe.isBanned?"Unban User":"Ban User"})})]},qe.uid))})]})})]}),X.jsxs("div",{className:"section",children:[X.jsx("h2",{children:"Registered Users"}),X.jsx("input",{type:"text",placeholder:"🔍 Search registered users...",value:a,onChange:qe=>r(qe.target.value),className:"search-box"}),Ve.length===0?X.jsx("p",{children:"No registered users found."}):X.jsxs("div",{className:"user-list",children:[X.jsxs("table",{children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Status"}),X.jsx("th",{className:"profile-column",children:"Profile Photo"}),X.jsx("th",{children:"Name"}),X.jsx("th",{children:"Email"}),X.jsx("th",{children:"Address"})]})}),X.jsx("tbody",{children:Ue.map(qe=>X.jsxs("tr",{children:[X.jsx("td",{children:X.jsx(ke,{status:qe.status,addressValidated:qe.addressValidated})}),X.jsx("td",{className:"profile-column",children:qe.profile_photo_url?X.jsx("img",{src:qe.profile_photo_url,alt:"Profile",className:"profile-thumbnail",onClick:()=>Je(qe.profile_photo_url)}):X.jsx("div",{className:"no-photo",children:"No Photo"})}),X.jsx("td",{children:`${qe.first_name} ${qe.middle_name} ${qe.surname}`}),X.jsx("td",{children:qe.email}),X.jsx("td",{children:qe.address})]},qe.uid))})]}),X.jsxs("div",{className:"pagination",children:[X.jsx("button",{disabled:s===1,onClick:()=>l(s-1),children:"Previous"}),Array.from({length:Ie},(qe,ye)=>X.jsx("button",{className:s===ye+1?"active":"",onClick:()=>l(ye+1),children:ye+1},ye)),X.jsx("button",{disabled:s===Ie,onClick:()=>l(s+1),children:"Next"})]})]})]})]})]})};function GX(t,e){return function(){return t.apply(e,arguments)}}const{toString:ibe}=Object.prototype,{getPrototypeOf:h4}=Object,k2=(t=>e=>{const a=ibe.call(e);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Op=t=>(t=t.toLowerCase(),e=>k2(e)===t),B2=t=>e=>typeof e===t,{isArray:Hv}=Array,ZR=B2("undefined");function sbe(t){return t!==null&&!ZR(t)&&t.constructor!==null&&!ZR(t.constructor)&&lf(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const jX=Op("ArrayBuffer");function obe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&jX(t.buffer),e}const lbe=B2("string"),lf=B2("function"),ZX=B2("number"),G2=t=>t!==null&&typeof t=="object",ube=t=>t===!0||t===!1,OC=t=>{if(k2(t)!=="object")return!1;const e=h4(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},cbe=Op("Date"),dbe=Op("File"),hbe=Op("Blob"),fbe=Op("FileList"),pbe=t=>G2(t)&&lf(t.pipe),mbe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||lf(t.append)&&((e=k2(t))==="formdata"||e==="object"&&lf(t.toString)&&t.toString()==="[object FormData]"))},ybe=Op("URLSearchParams"),[gbe,Abe,_be,vbe]=["ReadableStream","Request","Response","Headers"].map(Op),wbe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function PT(t,e,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Hv(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const l=a?Object.getOwnPropertyNames(t):Object.keys(t),h=l.length;let n;for(r=0;r<h;r++)n=l[r],e.call(null,t[n],n,t)}}function qX(t,e){e=e.toLowerCase();const a=Object.keys(t);let r=a.length,s;for(;r-- >0;)if(s=a[r],e===s.toLowerCase())return s;return null}const qA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,HX=t=>!ZR(t)&&t!==qA;function vM(){const{caseless:t}=HX(this)&&this||{},e={},a=(r,s)=>{const l=t&&qX(e,s)||s;OC(e[l])&&OC(r)?e[l]=vM(e[l],r):OC(r)?e[l]=vM({},r):Hv(r)?e[l]=r.slice():e[l]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&PT(arguments[r],a);return e}const Rbe=(t,e,a,{allOwnKeys:r}={})=>(PT(e,(s,l)=>{a&&lf(s)?t[l]=GX(s,a):t[l]=s},{allOwnKeys:r}),t),Tbe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Sbe=(t,e,a,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),a&&Object.assign(t.prototype,a)},Cbe=(t,e,a,r)=>{let s,l,h;const n={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),l=s.length;l-- >0;)h=s[l],(!r||r(h,t,e))&&!n[h]&&(e[h]=t[h],n[h]=!0);t=a!==!1&&h4(t)}while(t&&(!a||a(t,e))&&t!==Object.prototype);return e},bbe=(t,e,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=e.length;const r=t.indexOf(e,a);return r!==-1&&r===a},xbe=t=>{if(!t)return null;if(Hv(t))return t;let e=t.length;if(!ZX(e))return null;const a=new Array(e);for(;e-- >0;)a[e]=t[e];return a},Pbe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&h4(Uint8Array)),Ebe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const l=s.value;e.call(t,l[0],l[1])}},Nbe=(t,e)=>{let a;const r=[];for(;(a=t.exec(e))!==null;)r.push(a);return r},Vbe=Op("HTMLFormElement"),zbe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,s){return r.toUpperCase()+s}),C9=(({hasOwnProperty:t})=>(e,a)=>t.call(e,a))(Object.prototype),Obe=Op("RegExp"),$X=(t,e)=>{const a=Object.getOwnPropertyDescriptors(t),r={};PT(a,(s,l)=>{let h;(h=e(s,l,t))!==!1&&(r[l]=h||s)}),Object.defineProperties(t,r)},Dbe=t=>{$X(t,(e,a)=>{if(lf(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(lf(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Mbe=(t,e)=>{const a={},r=s=>{s.forEach(l=>{a[l]=!0})};return Hv(t)?r(t):r(String(t).split(e)),a},Ibe=()=>{},Lbe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Fbe(t){return!!(t&&lf(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Ube=t=>{const e=new Array(10),a=(r,s)=>{if(G2(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const l=Hv(r)?[]:{};return PT(r,(h,n)=>{const w=a(h,s+1);!ZR(w)&&(l[n]=w)}),e[s]=void 0,l}}return r};return a(t,0)},kbe=Op("AsyncFunction"),Bbe=t=>t&&(G2(t)||lf(t))&&lf(t.then)&&lf(t.catch),KX=((t,e)=>t?setImmediate:e?((a,r)=>(qA.addEventListener("message",({source:s,data:l})=>{s===qA&&l===a&&r.length&&r.shift()()},!1),s=>{r.push(s),qA.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",lf(qA.postMessage)),Gbe=typeof queueMicrotask<"u"?queueMicrotask.bind(qA):typeof process<"u"&&process.nextTick||KX,Fa={isArray:Hv,isArrayBuffer:jX,isBuffer:sbe,isFormData:mbe,isArrayBufferView:obe,isString:lbe,isNumber:ZX,isBoolean:ube,isObject:G2,isPlainObject:OC,isReadableStream:gbe,isRequest:Abe,isResponse:_be,isHeaders:vbe,isUndefined:ZR,isDate:cbe,isFile:dbe,isBlob:hbe,isRegExp:Obe,isFunction:lf,isStream:pbe,isURLSearchParams:ybe,isTypedArray:Pbe,isFileList:fbe,forEach:PT,merge:vM,extend:Rbe,trim:wbe,stripBOM:Tbe,inherits:Sbe,toFlatObject:Cbe,kindOf:k2,kindOfTest:Op,endsWith:bbe,toArray:xbe,forEachEntry:Ebe,matchAll:Nbe,isHTMLForm:Vbe,hasOwnProperty:C9,hasOwnProp:C9,reduceDescriptors:$X,freezeMethods:Dbe,toObjectSet:Mbe,toCamelCase:zbe,noop:Ibe,toFiniteNumber:Lbe,findKey:qX,global:qA,isContextDefined:HX,isSpecCompliantForm:Fbe,toJSONObject:Ube,isAsyncFn:kbe,isThenable:Bbe,setImmediate:KX,asap:Gbe};function di(t,e,a,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),a&&(this.config=a),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Fa.inherits(di,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fa.toJSONObject(this.config),code:this.code,status:this.status}}});const WX=di.prototype,YX={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{YX[t]={value:t}});Object.defineProperties(di,YX);Object.defineProperty(WX,"isAxiosError",{value:!0});di.from=(t,e,a,r,s,l)=>{const h=Object.create(WX);return Fa.toFlatObject(t,h,function(w){return w!==Error.prototype},n=>n!=="isAxiosError"),di.call(h,t.message,e,a,r,s),h.cause=t,h.name=t.name,l&&Object.assign(h,l),h};const jbe=null;function wM(t){return Fa.isPlainObject(t)||Fa.isArray(t)}function XX(t){return Fa.endsWith(t,"[]")?t.slice(0,-2):t}function b9(t,e,a){return t?t.concat(e).map(function(s,l){return s=XX(s),!a&&l?"["+s+"]":s}).join(a?".":""):e}function Zbe(t){return Fa.isArray(t)&&!t.some(wM)}const qbe=Fa.toFlatObject(Fa,{},null,function(e){return/^is[A-Z]/.test(e)});function j2(t,e,a){if(!Fa.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,a=Fa.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(H,$){return!Fa.isUndefined($[H])});const r=a.metaTokens,s=a.visitor||E,l=a.dots,h=a.indexes,w=(a.Blob||typeof Blob<"u"&&Blob)&&Fa.isSpecCompliantForm(e);if(!Fa.isFunction(s))throw new TypeError("visitor must be a function");function T(q){if(q===null)return"";if(Fa.isDate(q))return q.toISOString();if(!w&&Fa.isBlob(q))throw new di("Blob is not supported. Use a Buffer instead.");return Fa.isArrayBuffer(q)||Fa.isTypedArray(q)?w&&typeof Blob=="function"?new Blob([q]):Buffer.from(q):q}function E(q,H,$){let Q=q;if(q&&!$&&typeof q=="object"){if(Fa.endsWith(H,"{}"))H=r?H:H.slice(0,-2),q=JSON.stringify(q);else if(Fa.isArray(q)&&Zbe(q)||(Fa.isFileList(q)||Fa.endsWith(H,"[]"))&&(Q=Fa.toArray(q)))return H=XX(H),Q.forEach(function(de,ge){!(Fa.isUndefined(de)||de===null)&&e.append(h===!0?b9([H],ge,l):h===null?H:H+"[]",T(de))}),!1}return wM(q)?!0:(e.append(b9($,H,l),T(q)),!1)}const z=[],k=Object.assign(qbe,{defaultVisitor:E,convertValue:T,isVisitable:wM});function U(q,H){if(!Fa.isUndefined(q)){if(z.indexOf(q)!==-1)throw Error("Circular reference detected in "+H.join("."));z.push(q),Fa.forEach(q,function(Q,ne){(!(Fa.isUndefined(Q)||Q===null)&&s.call(e,Q,Fa.isString(ne)?ne.trim():ne,H,k))===!0&&U(Q,H?H.concat(ne):[ne])}),z.pop()}}if(!Fa.isObject(t))throw new TypeError("data must be an object");return U(t),e}function x9(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function f4(t,e){this._pairs=[],t&&j2(t,this,e)}const JX=f4.prototype;JX.append=function(e,a){this._pairs.push([e,a])};JX.toString=function(e){const a=e?function(r){return e.call(this,r,x9)}:x9;return this._pairs.map(function(s){return a(s[0])+"="+a(s[1])},"").join("&")};function Hbe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function QX(t,e,a){if(!e)return t;const r=a&&a.encode||Hbe;Fa.isFunction(a)&&(a={serialize:a});const s=a&&a.serialize;let l;if(s?l=s(e,a):l=Fa.isURLSearchParams(e)?e.toString():new f4(e,a).toString(r),l){const h=t.indexOf("#");h!==-1&&(t=t.slice(0,h)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class P9{constructor(){this.handlers=[]}use(e,a,r){return this.handlers.push({fulfilled:e,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fa.forEach(this.handlers,function(r){r!==null&&e(r)})}}const eJ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$be=typeof URLSearchParams<"u"?URLSearchParams:f4,Kbe=typeof FormData<"u"?FormData:null,Wbe=typeof Blob<"u"?Blob:null,Ybe={isBrowser:!0,classes:{URLSearchParams:$be,FormData:Kbe,Blob:Wbe},protocols:["http","https","file","blob","url","data"]},p4=typeof window<"u"&&typeof document<"u",RM=typeof navigator=="object"&&navigator||void 0,Xbe=p4&&(!RM||["ReactNative","NativeScript","NS"].indexOf(RM.product)<0),Jbe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qbe=p4&&window.location.href||"http://localhost",exe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:p4,hasStandardBrowserEnv:Xbe,hasStandardBrowserWebWorkerEnv:Jbe,navigator:RM,origin:Qbe},Symbol.toStringTag,{value:"Module"})),ud={...exe,...Ybe};function txe(t,e){return j2(t,new ud.classes.URLSearchParams,Object.assign({visitor:function(a,r,s,l){return ud.isNode&&Fa.isBuffer(a)?(this.append(r,a.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function axe(t){return Fa.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rxe(t){const e={},a=Object.keys(t);let r;const s=a.length;let l;for(r=0;r<s;r++)l=a[r],e[l]=t[l];return e}function tJ(t){function e(a,r,s,l){let h=a[l++];if(h==="__proto__")return!0;const n=Number.isFinite(+h),w=l>=a.length;return h=!h&&Fa.isArray(s)?s.length:h,w?(Fa.hasOwnProp(s,h)?s[h]=[s[h],r]:s[h]=r,!n):((!s[h]||!Fa.isObject(s[h]))&&(s[h]=[]),e(a,r,s[h],l)&&Fa.isArray(s[h])&&(s[h]=rxe(s[h])),!n)}if(Fa.isFormData(t)&&Fa.isFunction(t.entries)){const a={};return Fa.forEachEntry(t,(r,s)=>{e(axe(r),s,a,0)}),a}return null}function nxe(t,e,a){if(Fa.isString(t))try{return(e||JSON.parse)(t),Fa.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const ET={transitional:eJ,adapter:["xhr","http","fetch"],transformRequest:[function(e,a){const r=a.getContentType()||"",s=r.indexOf("application/json")>-1,l=Fa.isObject(e);if(l&&Fa.isHTMLForm(e)&&(e=new FormData(e)),Fa.isFormData(e))return s?JSON.stringify(tJ(e)):e;if(Fa.isArrayBuffer(e)||Fa.isBuffer(e)||Fa.isStream(e)||Fa.isFile(e)||Fa.isBlob(e)||Fa.isReadableStream(e))return e;if(Fa.isArrayBufferView(e))return e.buffer;if(Fa.isURLSearchParams(e))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let n;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return txe(e,this.formSerializer).toString();if((n=Fa.isFileList(e))||r.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return j2(n?{"files[]":e}:e,w&&new w,this.formSerializer)}}return l||s?(a.setContentType("application/json",!1),nxe(e)):e}],transformResponse:[function(e){const a=this.transitional||ET.transitional,r=a&&a.forcedJSONParsing,s=this.responseType==="json";if(Fa.isResponse(e)||Fa.isReadableStream(e))return e;if(e&&Fa.isString(e)&&(r&&!this.responseType||s)){const h=!(a&&a.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(h)throw n.name==="SyntaxError"?di.from(n,di.ERR_BAD_RESPONSE,this,null,this.response):n}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ud.classes.FormData,Blob:ud.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fa.forEach(["delete","get","head","post","put","patch"],t=>{ET.headers[t]={}});const ixe=Fa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sxe=t=>{const e={};let a,r,s;return t&&t.split(`
`).forEach(function(h){s=h.indexOf(":"),a=h.substring(0,s).trim().toLowerCase(),r=h.substring(s+1).trim(),!(!a||e[a]&&ixe[a])&&(a==="set-cookie"?e[a]?e[a].push(r):e[a]=[r]:e[a]=e[a]?e[a]+", "+r:r)}),e},E9=Symbol("internals");function pw(t){return t&&String(t).trim().toLowerCase()}function DC(t){return t===!1||t==null?t:Fa.isArray(t)?t.map(DC):String(t)}function oxe(t){const e=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)e[r[1]]=r[2];return e}const lxe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function VO(t,e,a,r,s){if(Fa.isFunction(r))return r.call(this,e,a);if(s&&(e=a),!!Fa.isString(e)){if(Fa.isString(r))return e.indexOf(r)!==-1;if(Fa.isRegExp(r))return r.test(e)}}function uxe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,a,r)=>a.toUpperCase()+r)}function cxe(t,e){const a=Fa.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(s,l,h){return this[r].call(this,e,s,l,h)},configurable:!0})})}let xh=class{constructor(e){e&&this.set(e)}set(e,a,r){const s=this;function l(n,w,T){const E=pw(w);if(!E)throw new Error("header name must be a non-empty string");const z=Fa.findKey(s,E);(!z||s[z]===void 0||T===!0||T===void 0&&s[z]!==!1)&&(s[z||w]=DC(n))}const h=(n,w)=>Fa.forEach(n,(T,E)=>l(T,E,w));if(Fa.isPlainObject(e)||e instanceof this.constructor)h(e,a);else if(Fa.isString(e)&&(e=e.trim())&&!lxe(e))h(sxe(e),a);else if(Fa.isHeaders(e))for(const[n,w]of e.entries())l(w,n,r);else e!=null&&l(a,e,r);return this}get(e,a){if(e=pw(e),e){const r=Fa.findKey(this,e);if(r){const s=this[r];if(!a)return s;if(a===!0)return oxe(s);if(Fa.isFunction(a))return a.call(this,s,r);if(Fa.isRegExp(a))return a.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,a){if(e=pw(e),e){const r=Fa.findKey(this,e);return!!(r&&this[r]!==void 0&&(!a||VO(this,this[r],r,a)))}return!1}delete(e,a){const r=this;let s=!1;function l(h){if(h=pw(h),h){const n=Fa.findKey(r,h);n&&(!a||VO(r,r[n],n,a))&&(delete r[n],s=!0)}}return Fa.isArray(e)?e.forEach(l):l(e),s}clear(e){const a=Object.keys(this);let r=a.length,s=!1;for(;r--;){const l=a[r];(!e||VO(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const a=this,r={};return Fa.forEach(this,(s,l)=>{const h=Fa.findKey(r,l);if(h){a[h]=DC(s),delete a[l];return}const n=e?uxe(l):String(l).trim();n!==l&&delete a[l],a[n]=DC(s),r[n]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const a=Object.create(null);return Fa.forEach(this,(r,s)=>{r!=null&&r!==!1&&(a[s]=e&&Fa.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,a])=>e+": "+a).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...a){const r=new this(e);return a.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[E9]=this[E9]={accessors:{}}).accessors,s=this.prototype;function l(h){const n=pw(h);r[n]||(cxe(s,h),r[n]=!0)}return Fa.isArray(e)?e.forEach(l):l(e),this}};xh.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Fa.reduceDescriptors(xh.prototype,({value:t},e)=>{let a=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[a]=r}}});Fa.freezeMethods(xh);function zO(t,e){const a=this||ET,r=e||a,s=xh.from(r.headers);let l=r.data;return Fa.forEach(t,function(n){l=n.call(a,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function aJ(t){return!!(t&&t.__CANCEL__)}function $v(t,e,a){di.call(this,t??"canceled",di.ERR_CANCELED,e,a),this.name="CanceledError"}Fa.inherits($v,di,{__CANCEL__:!0});function rJ(t,e,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):e(new di("Request failed with status code "+a.status,[di.ERR_BAD_REQUEST,di.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function dxe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function hxe(t,e){t=t||10;const a=new Array(t),r=new Array(t);let s=0,l=0,h;return e=e!==void 0?e:1e3,function(w){const T=Date.now(),E=r[l];h||(h=T),a[s]=w,r[s]=T;let z=l,k=0;for(;z!==s;)k+=a[z++],z=z%t;if(s=(s+1)%t,s===l&&(l=(l+1)%t),T-h<e)return;const U=E&&T-E;return U?Math.round(k*1e3/U):void 0}}function fxe(t,e){let a=0,r=1e3/e,s,l;const h=(T,E=Date.now())=>{a=E,s=null,l&&(clearTimeout(l),l=null),t.apply(null,T)};return[(...T)=>{const E=Date.now(),z=E-a;z>=r?h(T,E):(s=T,l||(l=setTimeout(()=>{l=null,h(s)},r-z)))},()=>s&&h(s)]}const fx=(t,e,a=3)=>{let r=0;const s=hxe(50,250);return fxe(l=>{const h=l.loaded,n=l.lengthComputable?l.total:void 0,w=h-r,T=s(w),E=h<=n;r=h;const z={loaded:h,total:n,progress:n?h/n:void 0,bytes:w,rate:T||void 0,estimated:T&&n&&E?(n-h)/T:void 0,event:l,lengthComputable:n!=null,[e?"download":"upload"]:!0};t(z)},a)},N9=(t,e)=>{const a=t!=null;return[r=>e[0]({lengthComputable:a,total:t,loaded:r}),e[1]]},V9=t=>(...e)=>Fa.asap(()=>t(...e)),pxe=ud.hasStandardBrowserEnv?((t,e)=>a=>(a=new URL(a,ud.origin),t.protocol===a.protocol&&t.host===a.host&&(e||t.port===a.port)))(new URL(ud.origin),ud.navigator&&/(msie|trident)/i.test(ud.navigator.userAgent)):()=>!0,mxe=ud.hasStandardBrowserEnv?{write(t,e,a,r,s,l){const h=[t+"="+encodeURIComponent(e)];Fa.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),Fa.isString(r)&&h.push("path="+r),Fa.isString(s)&&h.push("domain="+s),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yxe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gxe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function nJ(t,e,a){let r=!yxe(e);return t&&(r||a==!1)?gxe(t,e):e}const z9=t=>t instanceof xh?{...t}:t;function d0(t,e){e=e||{};const a={};function r(T,E,z,k){return Fa.isPlainObject(T)&&Fa.isPlainObject(E)?Fa.merge.call({caseless:k},T,E):Fa.isPlainObject(E)?Fa.merge({},E):Fa.isArray(E)?E.slice():E}function s(T,E,z,k){if(Fa.isUndefined(E)){if(!Fa.isUndefined(T))return r(void 0,T,z,k)}else return r(T,E,z,k)}function l(T,E){if(!Fa.isUndefined(E))return r(void 0,E)}function h(T,E){if(Fa.isUndefined(E)){if(!Fa.isUndefined(T))return r(void 0,T)}else return r(void 0,E)}function n(T,E,z){if(z in e)return r(T,E);if(z in t)return r(void 0,T)}const w={url:l,method:l,data:l,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:n,headers:(T,E,z)=>s(z9(T),z9(E),z,!0)};return Fa.forEach(Object.keys(Object.assign({},t,e)),function(E){const z=w[E]||s,k=z(t[E],e[E],E);Fa.isUndefined(k)&&z!==n||(a[E]=k)}),a}const iJ=t=>{const e=d0({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:l,headers:h,auth:n}=e;e.headers=h=xh.from(h),e.url=QX(nJ(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),n&&h.set("Authorization","Basic "+btoa((n.username||"")+":"+(n.password?unescape(encodeURIComponent(n.password)):"")));let w;if(Fa.isFormData(a)){if(ud.hasStandardBrowserEnv||ud.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((w=h.getContentType())!==!1){const[T,...E]=w?w.split(";").map(z=>z.trim()).filter(Boolean):[];h.setContentType([T||"multipart/form-data",...E].join("; "))}}if(ud.hasStandardBrowserEnv&&(r&&Fa.isFunction(r)&&(r=r(e)),r||r!==!1&&pxe(e.url))){const T=s&&l&&mxe.read(l);T&&h.set(s,T)}return e},Axe=typeof XMLHttpRequest<"u",_xe=Axe&&function(t){return new Promise(function(a,r){const s=iJ(t);let l=s.data;const h=xh.from(s.headers).normalize();let{responseType:n,onUploadProgress:w,onDownloadProgress:T}=s,E,z,k,U,q;function H(){U&&U(),q&&q(),s.cancelToken&&s.cancelToken.unsubscribe(E),s.signal&&s.signal.removeEventListener("abort",E)}let $=new XMLHttpRequest;$.open(s.method.toUpperCase(),s.url,!0),$.timeout=s.timeout;function Q(){if(!$)return;const de=xh.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),fe={data:!n||n==="text"||n==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:de,config:t,request:$};rJ(function(me){a(me),H()},function(me){r(me),H()},fe),$=null}"onloadend"in $?$.onloadend=Q:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(Q)},$.onabort=function(){$&&(r(new di("Request aborted",di.ECONNABORTED,t,$)),$=null)},$.onerror=function(){r(new di("Network Error",di.ERR_NETWORK,t,$)),$=null},$.ontimeout=function(){let ge=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const fe=s.transitional||eJ;s.timeoutErrorMessage&&(ge=s.timeoutErrorMessage),r(new di(ge,fe.clarifyTimeoutError?di.ETIMEDOUT:di.ECONNABORTED,t,$)),$=null},l===void 0&&h.setContentType(null),"setRequestHeader"in $&&Fa.forEach(h.toJSON(),function(ge,fe){$.setRequestHeader(fe,ge)}),Fa.isUndefined(s.withCredentials)||($.withCredentials=!!s.withCredentials),n&&n!=="json"&&($.responseType=s.responseType),T&&([k,q]=fx(T,!0),$.addEventListener("progress",k)),w&&$.upload&&([z,U]=fx(w),$.upload.addEventListener("progress",z),$.upload.addEventListener("loadend",U)),(s.cancelToken||s.signal)&&(E=de=>{$&&(r(!de||de.type?new $v(null,t,$):de),$.abort(),$=null)},s.cancelToken&&s.cancelToken.subscribe(E),s.signal&&(s.signal.aborted?E():s.signal.addEventListener("abort",E)));const ne=dxe(s.url);if(ne&&ud.protocols.indexOf(ne)===-1){r(new di("Unsupported protocol "+ne+":",di.ERR_BAD_REQUEST,t));return}$.send(l||null)})},vxe=(t,e)=>{const{length:a}=t=t?t.filter(Boolean):[];if(e||a){let r=new AbortController,s;const l=function(T){if(!s){s=!0,n();const E=T instanceof Error?T:this.reason;r.abort(E instanceof di?E:new $v(E instanceof Error?E.message:E))}};let h=e&&setTimeout(()=>{h=null,l(new di(`timeout ${e} of ms exceeded`,di.ETIMEDOUT))},e);const n=()=>{t&&(h&&clearTimeout(h),h=null,t.forEach(T=>{T.unsubscribe?T.unsubscribe(l):T.removeEventListener("abort",l)}),t=null)};t.forEach(T=>T.addEventListener("abort",l));const{signal:w}=r;return w.unsubscribe=()=>Fa.asap(n),w}},wxe=function*(t,e){let a=t.byteLength;if(a<e){yield t;return}let r=0,s;for(;r<a;)s=r+e,yield t.slice(r,s),r=s},Rxe=async function*(t,e){for await(const a of Txe(t))yield*wxe(a,e)},Txe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:a,value:r}=await e.read();if(a)break;yield r}}finally{await e.cancel()}},O9=(t,e,a,r)=>{const s=Rxe(t,e);let l=0,h,n=w=>{h||(h=!0,r&&r(w))};return new ReadableStream({async pull(w){try{const{done:T,value:E}=await s.next();if(T){n(),w.close();return}let z=E.byteLength;if(a){let k=l+=z;a(k)}w.enqueue(new Uint8Array(E))}catch(T){throw n(T),T}},cancel(w){return n(w),s.return()}},{highWaterMark:2})},Z2=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sJ=Z2&&typeof ReadableStream=="function",Sxe=Z2&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),oJ=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Cxe=sJ&&oJ(()=>{let t=!1;const e=new Request(ud.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),D9=64*1024,TM=sJ&&oJ(()=>Fa.isReadableStream(new Response("").body)),px={stream:TM&&(t=>t.body)};Z2&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!px[e]&&(px[e]=Fa.isFunction(t[e])?a=>a[e]():(a,r)=>{throw new di(`Response type '${e}' is not supported`,di.ERR_NOT_SUPPORT,r)})})})(new Response);const bxe=async t=>{if(t==null)return 0;if(Fa.isBlob(t))return t.size;if(Fa.isSpecCompliantForm(t))return(await new Request(ud.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Fa.isArrayBufferView(t)||Fa.isArrayBuffer(t))return t.byteLength;if(Fa.isURLSearchParams(t)&&(t=t+""),Fa.isString(t))return(await Sxe(t)).byteLength},xxe=async(t,e)=>{const a=Fa.toFiniteNumber(t.getContentLength());return a??bxe(e)},Pxe=Z2&&(async t=>{let{url:e,method:a,data:r,signal:s,cancelToken:l,timeout:h,onDownloadProgress:n,onUploadProgress:w,responseType:T,headers:E,withCredentials:z="same-origin",fetchOptions:k}=iJ(t);T=T?(T+"").toLowerCase():"text";let U=vxe([s,l&&l.toAbortSignal()],h),q;const H=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let $;try{if(w&&Cxe&&a!=="get"&&a!=="head"&&($=await xxe(E,r))!==0){let fe=new Request(e,{method:"POST",body:r,duplex:"half"}),_e;if(Fa.isFormData(r)&&(_e=fe.headers.get("content-type"))&&E.setContentType(_e),fe.body){const[me,Ae]=N9($,fx(V9(w)));r=O9(fe.body,D9,me,Ae)}}Fa.isString(z)||(z=z?"include":"omit");const Q="credentials"in Request.prototype;q=new Request(e,{...k,signal:U,method:a.toUpperCase(),headers:E.normalize().toJSON(),body:r,duplex:"half",credentials:Q?z:void 0});let ne=await fetch(q);const de=TM&&(T==="stream"||T==="response");if(TM&&(n||de&&H)){const fe={};["status","statusText","headers"].forEach(Te=>{fe[Te]=ne[Te]});const _e=Fa.toFiniteNumber(ne.headers.get("content-length")),[me,Ae]=n&&N9(_e,fx(V9(n),!0))||[];ne=new Response(O9(ne.body,D9,me,()=>{Ae&&Ae(),H&&H()}),fe)}T=T||"text";let ge=await px[Fa.findKey(px,T)||"text"](ne,t);return!de&&H&&H(),await new Promise((fe,_e)=>{rJ(fe,_e,{data:ge,headers:xh.from(ne.headers),status:ne.status,statusText:ne.statusText,config:t,request:q})})}catch(Q){throw H&&H(),Q&&Q.name==="TypeError"&&/fetch/i.test(Q.message)?Object.assign(new di("Network Error",di.ERR_NETWORK,t,q),{cause:Q.cause||Q}):di.from(Q,Q&&Q.code,t,q)}}),SM={http:jbe,xhr:_xe,fetch:Pxe};Fa.forEach(SM,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const M9=t=>`- ${t}`,Exe=t=>Fa.isFunction(t)||t===null||t===!1,lJ={getAdapter:t=>{t=Fa.isArray(t)?t:[t];const{length:e}=t;let a,r;const s={};for(let l=0;l<e;l++){a=t[l];let h;if(r=a,!Exe(a)&&(r=SM[(h=String(a)).toLowerCase()],r===void 0))throw new di(`Unknown adapter '${h}'`);if(r)break;s[h||"#"+l]=r}if(!r){const l=Object.entries(s).map(([n,w])=>`adapter ${n} `+(w===!1?"is not supported by the environment":"is not available in the build"));let h=e?l.length>1?`since :
`+l.map(M9).join(`
`):" "+M9(l[0]):"as no adapter specified";throw new di("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:SM};function OO(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $v(null,t)}function I9(t){return OO(t),t.headers=xh.from(t.headers),t.data=zO.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),lJ.getAdapter(t.adapter||ET.adapter)(t).then(function(r){return OO(t),r.data=zO.call(t,t.transformResponse,r),r.headers=xh.from(r.headers),r},function(r){return aJ(r)||(OO(t),r&&r.response&&(r.response.data=zO.call(t,t.transformResponse,r.response),r.response.headers=xh.from(r.response.headers))),Promise.reject(r)})}const uJ="1.8.4",q2={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{q2[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const L9={};q2.transitional=function(e,a,r){function s(l,h){return"[Axios v"+uJ+"] Transitional option '"+l+"'"+h+(r?". "+r:"")}return(l,h,n)=>{if(e===!1)throw new di(s(h," has been removed"+(a?" in "+a:"")),di.ERR_DEPRECATED);return a&&!L9[h]&&(L9[h]=!0,console.warn(s(h," has been deprecated since v"+a+" and will be removed in the near future"))),e?e(l,h,n):!0}};q2.spelling=function(e){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Nxe(t,e,a){if(typeof t!="object")throw new di("options must be an object",di.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const l=r[s],h=e[l];if(h){const n=t[l],w=n===void 0||h(n,l,t);if(w!==!0)throw new di("option "+l+" must be "+w,di.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new di("Unknown option "+l,di.ERR_BAD_OPTION)}}const MC={assertOptions:Nxe,validators:q2},um=MC.validators;let XA=class{constructor(e){this.defaults=e,this.interceptors={request:new P9,response:new P9}}async request(e,a){try{return await this._request(e,a)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(e,a){typeof e=="string"?(a=a||{},a.url=e):a=e||{},a=d0(this.defaults,a);const{transitional:r,paramsSerializer:s,headers:l}=a;r!==void 0&&MC.assertOptions(r,{silentJSONParsing:um.transitional(um.boolean),forcedJSONParsing:um.transitional(um.boolean),clarifyTimeoutError:um.transitional(um.boolean)},!1),s!=null&&(Fa.isFunction(s)?a.paramsSerializer={serialize:s}:MC.assertOptions(s,{encode:um.function,serialize:um.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),MC.assertOptions(a,{baseUrl:um.spelling("baseURL"),withXsrfToken:um.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let h=l&&Fa.merge(l.common,l[a.method]);l&&Fa.forEach(["delete","get","head","post","put","patch","common"],q=>{delete l[q]}),a.headers=xh.concat(h,l);const n=[];let w=!0;this.interceptors.request.forEach(function(H){typeof H.runWhen=="function"&&H.runWhen(a)===!1||(w=w&&H.synchronous,n.unshift(H.fulfilled,H.rejected))});const T=[];this.interceptors.response.forEach(function(H){T.push(H.fulfilled,H.rejected)});let E,z=0,k;if(!w){const q=[I9.bind(this),void 0];for(q.unshift.apply(q,n),q.push.apply(q,T),k=q.length,E=Promise.resolve(a);z<k;)E=E.then(q[z++],q[z++]);return E}k=n.length;let U=a;for(z=0;z<k;){const q=n[z++],H=n[z++];try{U=q(U)}catch($){H.call(this,$);break}}try{E=I9.call(this,U)}catch(q){return Promise.reject(q)}for(z=0,k=T.length;z<k;)E=E.then(T[z++],T[z++]);return E}getUri(e){e=d0(this.defaults,e);const a=nJ(e.baseURL,e.url,e.allowAbsoluteUrls);return QX(a,e.params,e.paramsSerializer)}};Fa.forEach(["delete","get","head","options"],function(e){XA.prototype[e]=function(a,r){return this.request(d0(r||{},{method:e,url:a,data:(r||{}).data}))}});Fa.forEach(["post","put","patch"],function(e){function a(r){return function(l,h,n){return this.request(d0(n||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:h}))}}XA.prototype[e]=a(),XA.prototype[e+"Form"]=a(!0)});let Vxe=class cJ{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(l){a=l});const r=this;this.promise.then(s=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](s);r._listeners=null}),this.promise.then=s=>{let l;const h=new Promise(n=>{r.subscribe(n),l=n}).then(s);return h.cancel=function(){r.unsubscribe(l)},h},e(function(l,h,n){r.reason||(r.reason=new $v(l,h,n),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const a=this._listeners.indexOf(e);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const e=new AbortController,a=r=>{e.abort(r)};return this.subscribe(a),e.signal.unsubscribe=()=>this.unsubscribe(a),e.signal}static source(){let e;return{token:new cJ(function(s){e=s}),cancel:e}}};function zxe(t){return function(a){return t.apply(null,a)}}function Oxe(t){return Fa.isObject(t)&&t.isAxiosError===!0}const CM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(CM).forEach(([t,e])=>{CM[e]=t});function dJ(t){const e=new XA(t),a=GX(XA.prototype.request,e);return Fa.extend(a,XA.prototype,e,{allOwnKeys:!0}),Fa.extend(a,e,null,{allOwnKeys:!0}),a.create=function(s){return dJ(d0(t,s))},a}const $o=dJ(ET);$o.Axios=XA;$o.CanceledError=$v;$o.CancelToken=Vxe;$o.isCancel=aJ;$o.VERSION=uJ;$o.toFormData=j2;$o.AxiosError=di;$o.Cancel=$o.CanceledError;$o.all=function(e){return Promise.all(e)};$o.spread=zxe;$o.isAxiosError=Oxe;$o.mergeConfig=d0;$o.AxiosHeaders=xh;$o.formToJSON=t=>tJ(Fa.isHTMLForm(t)?new FormData(t):t);$o.getAdapter=lJ.getAdapter;$o.HttpStatusCode=CM;$o.default=$o;const{Axios:UPe,AxiosError:kPe,CanceledError:BPe,isCancel:GPe,CancelToken:jPe,VERSION:ZPe,all:qPe,Cancel:HPe,isAxiosError:$Pe,spread:KPe,toFormData:WPe,AxiosHeaders:YPe,HttpStatusCode:XPe,formToJSON:JPe,getAdapter:QPe,mergeConfig:eEe}=$o;var f_={},DO,F9;function Dxe(){return F9||(F9=1,DO=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),DO}var MO={},lg={},U9;function R0(){if(U9)return lg;U9=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return lg.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},lg.getSymbolTotalCodewords=function(r){return e[r]},lg.getBCHDigit=function(a){let r=0;for(;a!==0;)r++,a>>>=1;return r},lg.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');t=r},lg.isKanjiModeEnabled=function(){return typeof t<"u"},lg.toSJIS=function(r){return t(r)},lg}var IO={},k9;function m4(){return k9||(k9=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+a)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}}(IO)),IO}var LO,B9;function Mxe(){if(B9)return LO;B9=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const a=Math.floor(e/8);return(this.buffer[a]>>>7-e%8&1)===1},put:function(e,a){for(let r=0;r<a;r++)this.putBit((e>>>a-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const a=Math.floor(this.length/8);this.buffer.length<=a&&this.buffer.push(0),e&&(this.buffer[a]|=128>>>this.length%8),this.length++}},LO=t,LO}var FO,G9;function Ixe(){if(G9)return FO;G9=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,a,r,s){const l=e*this.size+a;this.data[l]=r,s&&(this.reservedBit[l]=!0)},t.prototype.get=function(e,a){return this.data[e*this.size+a]},t.prototype.xor=function(e,a,r){this.data[e*this.size+a]^=r},t.prototype.isReserved=function(e,a){return this.reservedBit[e*this.size+a]},FO=t,FO}var UO={},j9;function Lxe(){return j9||(j9=1,function(t){const e=R0().getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,l=e(r),h=l===145?26:Math.ceil((l-13)/(2*s-2))*2,n=[l-7];for(let w=1;w<s-1;w++)n[w]=n[w-1]-h;return n.push(6),n.reverse()},t.getPositions=function(r){const s=[],l=t.getRowColCoords(r),h=l.length;for(let n=0;n<h;n++)for(let w=0;w<h;w++)n===0&&w===0||n===0&&w===h-1||n===h-1&&w===0||s.push([l[n],l[w]]);return s}}(UO)),UO}var kO={},Z9;function Fxe(){if(Z9)return kO;Z9=1;const t=R0().getSymbolSize,e=7;return kO.getPositions=function(r){const s=t(r);return[[0,0],[s-e,0],[0,s-e]]},kO}var BO={},q9;function Uxe(){return q9||(q9=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){const l=s.size;let h=0,n=0,w=0,T=null,E=null;for(let z=0;z<l;z++){n=w=0,T=E=null;for(let k=0;k<l;k++){let U=s.get(z,k);U===T?n++:(n>=5&&(h+=e.N1+(n-5)),T=U,n=1),U=s.get(k,z),U===E?w++:(w>=5&&(h+=e.N1+(w-5)),E=U,w=1)}n>=5&&(h+=e.N1+(n-5)),w>=5&&(h+=e.N1+(w-5))}return h},t.getPenaltyN2=function(s){const l=s.size;let h=0;for(let n=0;n<l-1;n++)for(let w=0;w<l-1;w++){const T=s.get(n,w)+s.get(n,w+1)+s.get(n+1,w)+s.get(n+1,w+1);(T===4||T===0)&&h++}return h*e.N2},t.getPenaltyN3=function(s){const l=s.size;let h=0,n=0,w=0;for(let T=0;T<l;T++){n=w=0;for(let E=0;E<l;E++)n=n<<1&2047|s.get(T,E),E>=10&&(n===1488||n===93)&&h++,w=w<<1&2047|s.get(E,T),E>=10&&(w===1488||w===93)&&h++}return h*e.N3},t.getPenaltyN4=function(s){let l=0;const h=s.data.length;for(let w=0;w<h;w++)l+=s.data[w];return Math.abs(Math.ceil(l*100/h/5)-10)*e.N4};function a(r,s,l){switch(r){case t.Patterns.PATTERN000:return(s+l)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(s+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return s*l%2+s*l%3===0;case t.Patterns.PATTERN110:return(s*l%2+s*l%3)%2===0;case t.Patterns.PATTERN111:return(s*l%3+(s+l)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,l){const h=l.size;for(let n=0;n<h;n++)for(let w=0;w<h;w++)l.isReserved(w,n)||l.xor(w,n,a(s,w,n))},t.getBestMask=function(s,l){const h=Object.keys(t.Patterns).length;let n=0,w=1/0;for(let T=0;T<h;T++){l(T),t.applyMask(T,s);const E=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(T,s),E<w&&(w=E,n=T)}return n}}(BO)),BO}var dC={},H9;function hJ(){if(H9)return dC;H9=1;const t=m4(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return dC.getBlocksCount=function(s,l){switch(l){case t.L:return e[(s-1)*4+0];case t.M:return e[(s-1)*4+1];case t.Q:return e[(s-1)*4+2];case t.H:return e[(s-1)*4+3];default:return}},dC.getTotalCodewordsCount=function(s,l){switch(l){case t.L:return a[(s-1)*4+0];case t.M:return a[(s-1)*4+1];case t.Q:return a[(s-1)*4+2];case t.H:return a[(s-1)*4+3];default:return}},dC}var GO={},mw={},$9;function kxe(){if($9)return mw;$9=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let r=1;for(let s=0;s<255;s++)t[s]=r,e[r]=s,r<<=1,r&256&&(r^=285);for(let s=255;s<512;s++)t[s]=t[s-255]}(),mw.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},mw.exp=function(r){return t[r]},mw.mul=function(r,s){return r===0||s===0?0:t[e[r]+e[s]]},mw}var K9;function Bxe(){return K9||(K9=1,function(t){const e=kxe();t.mul=function(r,s){const l=new Uint8Array(r.length+s.length-1);for(let h=0;h<r.length;h++)for(let n=0;n<s.length;n++)l[h+n]^=e.mul(r[h],s[n]);return l},t.mod=function(r,s){let l=new Uint8Array(r);for(;l.length-s.length>=0;){const h=l[0];for(let w=0;w<s.length;w++)l[w]^=e.mul(s[w],h);let n=0;for(;n<l.length&&l[n]===0;)n++;l=l.slice(n)}return l},t.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let l=0;l<r;l++)s=t.mul(s,new Uint8Array([1,e.exp(l)]));return s}}(GO)),GO}var jO,W9;function Gxe(){if(W9)return jO;W9=1;const t=Bxe();function e(a){this.genPoly=void 0,this.degree=a,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(r.length+this.degree);s.set(r);const l=t.mod(s,this.genPoly),h=this.degree-l.length;if(h>0){const n=new Uint8Array(this.degree);return n.set(l,h),n}return l},jO=e,jO}var ZO={},qO={},HO={},Y9;function fJ(){return Y9||(Y9=1,HO.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),HO}var cm={},X9;function pJ(){if(X9)return cm;X9=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let a="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";a=a.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+a+`)(?:.|[\r
]))+`;cm.KANJI=new RegExp(a,"g"),cm.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),cm.BYTE=new RegExp(r,"g"),cm.NUMERIC=new RegExp(t,"g"),cm.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+a+"$"),l=new RegExp("^"+t+"$"),h=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return cm.testKanji=function(w){return s.test(w)},cm.testNumeric=function(w){return l.test(w)},cm.testAlphanumeric=function(w){return h.test(w)},cm}var J9;function T0(){return J9||(J9=1,function(t){const e=fJ(),a=pJ();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,h){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(h))throw new Error("Invalid version: "+h);return h>=1&&h<10?l.ccBits[0]:h<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return a.testNumeric(l)?t.NUMERIC:a.testAlphanumeric(l)?t.ALPHANUMERIC:a.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(l,h){if(t.isValid(l))return l;try{return r(l)}catch{return h}}}(qO)),qO}var Q9;function jxe(){return Q9||(Q9=1,function(t){const e=R0(),a=hJ(),r=m4(),s=T0(),l=fJ(),h=7973,n=e.getBCHDigit(h);function w(k,U,q){for(let H=1;H<=40;H++)if(U<=t.getCapacity(H,q,k))return H}function T(k,U){return s.getCharCountIndicator(k,U)+4}function E(k,U){let q=0;return k.forEach(function(H){const $=T(H.mode,U);q+=$+H.getBitsLength()}),q}function z(k,U){for(let q=1;q<=40;q++)if(E(k,q)<=t.getCapacity(q,U,s.MIXED))return q}t.from=function(U,q){return l.isValid(U)?parseInt(U,10):q},t.getCapacity=function(U,q,H){if(!l.isValid(U))throw new Error("Invalid QR Code version");typeof H>"u"&&(H=s.BYTE);const $=e.getSymbolTotalCodewords(U),Q=a.getTotalCodewordsCount(U,q),ne=($-Q)*8;if(H===s.MIXED)return ne;const de=ne-T(H,U);switch(H){case s.NUMERIC:return Math.floor(de/10*3);case s.ALPHANUMERIC:return Math.floor(de/11*2);case s.KANJI:return Math.floor(de/13);case s.BYTE:default:return Math.floor(de/8)}},t.getBestVersionForData=function(U,q){let H;const $=r.from(q,r.M);if(Array.isArray(U)){if(U.length>1)return z(U,$);if(U.length===0)return 1;H=U[0]}else H=U;return w(H.mode,H.getLength(),$)},t.getEncodedBits=function(U){if(!l.isValid(U)||U<7)throw new Error("Invalid QR Code version");let q=U<<12;for(;e.getBCHDigit(q)-n>=0;)q^=h<<e.getBCHDigit(q)-n;return U<<12|q}}(ZO)),ZO}var $O={},eZ;function Zxe(){if(eZ)return $O;eZ=1;const t=R0(),e=1335,a=21522,r=t.getBCHDigit(e);return $O.getEncodedBits=function(l,h){const n=l.bit<<3|h;let w=n<<10;for(;t.getBCHDigit(w)-r>=0;)w^=e<<t.getBCHDigit(w)-r;return(n<<10|w)^a},$O}var KO={},WO,tZ;function qxe(){if(tZ)return WO;tZ=1;const t=T0();function e(a){this.mode=t.NUMERIC,this.data=a.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let s,l,h;for(s=0;s+3<=this.data.length;s+=3)l=this.data.substr(s,3),h=parseInt(l,10),r.put(h,10);const n=this.data.length-s;n>0&&(l=this.data.substr(s),h=parseInt(l,10),r.put(h,n*3+1))},WO=e,WO}var YO,aZ;function Hxe(){if(aZ)return YO;aZ=1;const t=T0(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(r){this.mode=t.ALPHANUMERIC,this.data=r}return a.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(s){let l;for(l=0;l+2<=this.data.length;l+=2){let h=e.indexOf(this.data[l])*45;h+=e.indexOf(this.data[l+1]),s.put(h,11)}this.data.length%2&&s.put(e.indexOf(this.data[l]),6)},YO=a,YO}var XO,rZ;function $xe(){if(rZ)return XO;rZ=1;const t=T0();function e(a){this.mode=t.BYTE,typeof a=="string"?this.data=new TextEncoder().encode(a):this.data=new Uint8Array(a)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(a){for(let r=0,s=this.data.length;r<s;r++)a.put(this.data[r],8)},XO=e,XO}var JO,nZ;function Kxe(){if(nZ)return JO;nZ=1;const t=T0(),e=R0();function a(r){this.mode=t.KANJI,this.data=r}return a.getBitsLength=function(s){return s*13},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){let s;for(s=0;s<this.data.length;s++){let l=e.toSJIS(this.data[s]);if(l>=33088&&l<=40956)l-=33088;else if(l>=57408&&l<=60351)l-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);l=(l>>>8&255)*192+(l&255),r.put(l,13)}},JO=a,JO}var QO={exports:{}},iZ;function Wxe(){return iZ||(iZ=1,function(t){var e={single_source_shortest_paths:function(a,r,s){var l={},h={};h[r]=0;var n=e.PriorityQueue.make();n.push(r,0);for(var w,T,E,z,k,U,q,H,$;!n.empty();){w=n.pop(),T=w.value,z=w.cost,k=a[T]||{};for(E in k)k.hasOwnProperty(E)&&(U=k[E],q=z+U,H=h[E],$=typeof h[E]>"u",($||H>q)&&(h[E]=q,n.push(E,q),l[E]=T))}if(typeof s<"u"&&typeof h[s]>"u"){var Q=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(Q)}return l},extract_shortest_path_from_predecessor_list:function(a,r){for(var s=[],l=r;l;)s.push(l),a[l],l=a[l];return s.reverse(),s},find_path:function(a,r,s){var l=e.single_source_shortest_paths(a,r,s);return e.extract_shortest_path_from_predecessor_list(l,s)},PriorityQueue:{make:function(a){var r=e.PriorityQueue,s={},l;a=a||{};for(l in r)r.hasOwnProperty(l)&&(s[l]=r[l]);return s.queue=[],s.sorter=a.sorter||r.default_sorter,s},default_sorter:function(a,r){return a.cost-r.cost},push:function(a,r){var s={value:a,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(QO)),QO.exports}var sZ;function Yxe(){return sZ||(sZ=1,function(t){const e=T0(),a=qxe(),r=Hxe(),s=$xe(),l=Kxe(),h=pJ(),n=R0(),w=Wxe();function T(Q){return unescape(encodeURIComponent(Q)).length}function E(Q,ne,de){const ge=[];let fe;for(;(fe=Q.exec(de))!==null;)ge.push({data:fe[0],index:fe.index,mode:ne,length:fe[0].length});return ge}function z(Q){const ne=E(h.NUMERIC,e.NUMERIC,Q),de=E(h.ALPHANUMERIC,e.ALPHANUMERIC,Q);let ge,fe;return n.isKanjiModeEnabled()?(ge=E(h.BYTE,e.BYTE,Q),fe=E(h.KANJI,e.KANJI,Q)):(ge=E(h.BYTE_KANJI,e.BYTE,Q),fe=[]),ne.concat(de,ge,fe).sort(function(me,Ae){return me.index-Ae.index}).map(function(me){return{data:me.data,mode:me.mode,length:me.length}})}function k(Q,ne){switch(ne){case e.NUMERIC:return a.getBitsLength(Q);case e.ALPHANUMERIC:return r.getBitsLength(Q);case e.KANJI:return l.getBitsLength(Q);case e.BYTE:return s.getBitsLength(Q)}}function U(Q){return Q.reduce(function(ne,de){const ge=ne.length-1>=0?ne[ne.length-1]:null;return ge&&ge.mode===de.mode?(ne[ne.length-1].data+=de.data,ne):(ne.push(de),ne)},[])}function q(Q){const ne=[];for(let de=0;de<Q.length;de++){const ge=Q[de];switch(ge.mode){case e.NUMERIC:ne.push([ge,{data:ge.data,mode:e.ALPHANUMERIC,length:ge.length},{data:ge.data,mode:e.BYTE,length:ge.length}]);break;case e.ALPHANUMERIC:ne.push([ge,{data:ge.data,mode:e.BYTE,length:ge.length}]);break;case e.KANJI:ne.push([ge,{data:ge.data,mode:e.BYTE,length:T(ge.data)}]);break;case e.BYTE:ne.push([{data:ge.data,mode:e.BYTE,length:T(ge.data)}])}}return ne}function H(Q,ne){const de={},ge={start:{}};let fe=["start"];for(let _e=0;_e<Q.length;_e++){const me=Q[_e],Ae=[];for(let Te=0;Te<me.length;Te++){const Oe=me[Te],ie=""+_e+Te;Ae.push(ie),de[ie]={node:Oe,lastCount:0},ge[ie]={};for(let we=0;we<fe.length;we++){const Me=fe[we];de[Me]&&de[Me].node.mode===Oe.mode?(ge[Me][ie]=k(de[Me].lastCount+Oe.length,Oe.mode)-k(de[Me].lastCount,Oe.mode),de[Me].lastCount+=Oe.length):(de[Me]&&(de[Me].lastCount=Oe.length),ge[Me][ie]=k(Oe.length,Oe.mode)+4+e.getCharCountIndicator(Oe.mode,ne))}}fe=Ae}for(let _e=0;_e<fe.length;_e++)ge[fe[_e]].end=0;return{map:ge,table:de}}function $(Q,ne){let de;const ge=e.getBestModeForData(Q);if(de=e.from(ne,ge),de!==e.BYTE&&de.bit<ge.bit)throw new Error('"'+Q+'" cannot be encoded with mode '+e.toString(de)+`.
 Suggested mode is: `+e.toString(ge));switch(de===e.KANJI&&!n.isKanjiModeEnabled()&&(de=e.BYTE),de){case e.NUMERIC:return new a(Q);case e.ALPHANUMERIC:return new r(Q);case e.KANJI:return new l(Q);case e.BYTE:return new s(Q)}}t.fromArray=function(ne){return ne.reduce(function(de,ge){return typeof ge=="string"?de.push($(ge,null)):ge.data&&de.push($(ge.data,ge.mode)),de},[])},t.fromString=function(ne,de){const ge=z(ne,n.isKanjiModeEnabled()),fe=q(ge),_e=H(fe,de),me=w.find_path(_e.map,"start","end"),Ae=[];for(let Te=1;Te<me.length-1;Te++)Ae.push(_e.table[me[Te]].node);return t.fromArray(U(Ae))},t.rawSplit=function(ne){return t.fromArray(z(ne,n.isKanjiModeEnabled()))}}(KO)),KO}var oZ;function Xxe(){if(oZ)return MO;oZ=1;const t=R0(),e=m4(),a=Mxe(),r=Ixe(),s=Lxe(),l=Fxe(),h=Uxe(),n=hJ(),w=Gxe(),T=jxe(),E=Zxe(),z=T0(),k=Yxe();function U(_e,me){const Ae=_e.size,Te=l.getPositions(me);for(let Oe=0;Oe<Te.length;Oe++){const ie=Te[Oe][0],we=Te[Oe][1];for(let Me=-1;Me<=7;Me++)if(!(ie+Me<=-1||Ae<=ie+Me))for(let Ve=-1;Ve<=7;Ve++)we+Ve<=-1||Ae<=we+Ve||(Me>=0&&Me<=6&&(Ve===0||Ve===6)||Ve>=0&&Ve<=6&&(Me===0||Me===6)||Me>=2&&Me<=4&&Ve>=2&&Ve<=4?_e.set(ie+Me,we+Ve,!0,!0):_e.set(ie+Me,we+Ve,!1,!0))}}function q(_e){const me=_e.size;for(let Ae=8;Ae<me-8;Ae++){const Te=Ae%2===0;_e.set(Ae,6,Te,!0),_e.set(6,Ae,Te,!0)}}function H(_e,me){const Ae=s.getPositions(me);for(let Te=0;Te<Ae.length;Te++){const Oe=Ae[Te][0],ie=Ae[Te][1];for(let we=-2;we<=2;we++)for(let Me=-2;Me<=2;Me++)we===-2||we===2||Me===-2||Me===2||we===0&&Me===0?_e.set(Oe+we,ie+Me,!0,!0):_e.set(Oe+we,ie+Me,!1,!0)}}function $(_e,me){const Ae=_e.size,Te=T.getEncodedBits(me);let Oe,ie,we;for(let Me=0;Me<18;Me++)Oe=Math.floor(Me/3),ie=Me%3+Ae-8-3,we=(Te>>Me&1)===1,_e.set(Oe,ie,we,!0),_e.set(ie,Oe,we,!0)}function Q(_e,me,Ae){const Te=_e.size,Oe=E.getEncodedBits(me,Ae);let ie,we;for(ie=0;ie<15;ie++)we=(Oe>>ie&1)===1,ie<6?_e.set(ie,8,we,!0):ie<8?_e.set(ie+1,8,we,!0):_e.set(Te-15+ie,8,we,!0),ie<8?_e.set(8,Te-ie-1,we,!0):ie<9?_e.set(8,15-ie-1+1,we,!0):_e.set(8,15-ie-1,we,!0);_e.set(Te-8,8,1,!0)}function ne(_e,me){const Ae=_e.size;let Te=-1,Oe=Ae-1,ie=7,we=0;for(let Me=Ae-1;Me>0;Me-=2)for(Me===6&&Me--;;){for(let Ve=0;Ve<2;Ve++)if(!_e.isReserved(Oe,Me-Ve)){let Ie=!1;we<me.length&&(Ie=(me[we]>>>ie&1)===1),_e.set(Oe,Me-Ve,Ie),ie--,ie===-1&&(we++,ie=7)}if(Oe+=Te,Oe<0||Ae<=Oe){Oe-=Te,Te=-Te;break}}}function de(_e,me,Ae){const Te=new a;Ae.forEach(function(Ve){Te.put(Ve.mode.bit,4),Te.put(Ve.getLength(),z.getCharCountIndicator(Ve.mode,_e)),Ve.write(Te)});const Oe=t.getSymbolTotalCodewords(_e),ie=n.getTotalCodewordsCount(_e,me),we=(Oe-ie)*8;for(Te.getLengthInBits()+4<=we&&Te.put(0,4);Te.getLengthInBits()%8!==0;)Te.putBit(0);const Me=(we-Te.getLengthInBits())/8;for(let Ve=0;Ve<Me;Ve++)Te.put(Ve%2?17:236,8);return ge(Te,_e,me)}function ge(_e,me,Ae){const Te=t.getSymbolTotalCodewords(me),Oe=n.getTotalCodewordsCount(me,Ae),ie=Te-Oe,we=n.getBlocksCount(me,Ae),Me=Te%we,Ve=we-Me,Ie=Math.floor(Te/we),Ue=Math.floor(ie/we),Be=Ue+1,ke=Ie-Ue,Je=new w(ke);let Le=0;const qe=new Array(we),ye=new Array(we);let ze=0;const We=new Uint8Array(_e.buffer);for(let pt=0;pt<we;pt++){const ve=pt<Ve?Ue:Be;qe[pt]=We.slice(Le,Le+ve),ye[pt]=Je.encode(qe[pt]),Le+=ve,ze=Math.max(ze,ve)}const lt=new Uint8Array(Te);let vt=0,Ot,dt;for(Ot=0;Ot<ze;Ot++)for(dt=0;dt<we;dt++)Ot<qe[dt].length&&(lt[vt++]=qe[dt][Ot]);for(Ot=0;Ot<ke;Ot++)for(dt=0;dt<we;dt++)lt[vt++]=ye[dt][Ot];return lt}function fe(_e,me,Ae,Te){let Oe;if(Array.isArray(_e))Oe=k.fromArray(_e);else if(typeof _e=="string"){let Ie=me;if(!Ie){const Ue=k.rawSplit(_e);Ie=T.getBestVersionForData(Ue,Ae)}Oe=k.fromString(_e,Ie||40)}else throw new Error("Invalid data");const ie=T.getBestVersionForData(Oe,Ae);if(!ie)throw new Error("The amount of data is too big to be stored in a QR Code");if(!me)me=ie;else if(me<ie)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ie+`.
`);const we=de(me,Ae,Oe),Me=t.getSymbolSize(me),Ve=new r(Me);return U(Ve,me),q(Ve),H(Ve,me),Q(Ve,Ae,0),me>=7&&$(Ve,me),ne(Ve,we),isNaN(Te)&&(Te=h.getBestMask(Ve,Q.bind(null,Ve,Ae))),h.applyMask(Te,Ve),Q(Ve,Ae,Te),{modules:Ve,version:me,errorCorrectionLevel:Ae,maskPattern:Te,segments:Oe}}return MO.create=function(me,Ae){if(typeof me>"u"||me==="")throw new Error("No input text");let Te=e.M,Oe,ie;return typeof Ae<"u"&&(Te=e.from(Ae.errorCorrectionLevel,e.M),Oe=T.from(Ae.version),ie=h.from(Ae.maskPattern),Ae.toSJISFunc&&t.setToSJISFunction(Ae.toSJISFunc)),fe(me,Oe,Te,ie)},MO}var e5={},t5={},lZ;function mJ(){return lZ||(lZ=1,function(t){function e(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let r=a.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+a);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(l){return[l,l]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,l=r.width&&r.width>=21?r.width:void 0,h=r.scale||4;return{width:l,scale:l?4:h,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){const l=t.getScale(r,s);return Math.floor((r+s.margin*2)*l)},t.qrToImageData=function(r,s,l){const h=s.modules.size,n=s.modules.data,w=t.getScale(h,l),T=Math.floor((h+l.margin*2)*w),E=l.margin*w,z=[l.color.light,l.color.dark];for(let k=0;k<T;k++)for(let U=0;U<T;U++){let q=(k*T+U)*4,H=l.color.light;if(k>=E&&U>=E&&k<T-E&&U<T-E){const $=Math.floor((k-E)/w),Q=Math.floor((U-E)/w);H=z[n[$*h+Q]?1:0]}r[q++]=H.r,r[q++]=H.g,r[q++]=H.b,r[q]=H.a}}}(t5)),t5}var uZ;function Jxe(){return uZ||(uZ=1,function(t){const e=mJ();function a(s,l,h){s.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=h,l.width=h,l.style.height=h+"px",l.style.width=h+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,h,n){let w=n,T=h;typeof w>"u"&&(!h||!h.getContext)&&(w=h,h=void 0),h||(T=r()),w=e.getOptions(w);const E=e.getImageWidth(l.modules.size,w),z=T.getContext("2d"),k=z.createImageData(E,E);return e.qrToImageData(k.data,l,w),a(z,T,E),z.putImageData(k,0,0),T},t.renderToDataURL=function(l,h,n){let w=n;typeof w>"u"&&(!h||!h.getContext)&&(w=h,h=void 0),w||(w={});const T=t.render(l,h,w),E=w.type||"image/png",z=w.rendererOpts||{};return T.toDataURL(E,z.quality)}}(e5)),e5}var a5={},cZ;function Qxe(){if(cZ)return a5;cZ=1;const t=mJ();function e(s,l){const h=s.a/255,n=l+'="'+s.hex+'"';return h<1?n+" "+l+'-opacity="'+h.toFixed(2).slice(1)+'"':n}function a(s,l,h){let n=s+l;return typeof h<"u"&&(n+=" "+h),n}function r(s,l,h){let n="",w=0,T=!1,E=0;for(let z=0;z<s.length;z++){const k=Math.floor(z%l),U=Math.floor(z/l);!k&&!T&&(T=!0),s[z]?(E++,z>0&&k>0&&s[z-1]||(n+=T?a("M",k+h,.5+U+h):a("m",w,0),w=0,T=!1),k+1<l&&s[z+1]||(n+=a("h",E),E=0)):w++}return n}return a5.render=function(l,h,n){const w=t.getOptions(h),T=l.modules.size,E=l.modules.data,z=T+w.margin*2,k=w.color.light.a?"<path "+e(w.color.light,"fill")+' d="M0 0h'+z+"v"+z+'H0z"/>':"",U="<path "+e(w.color.dark,"stroke")+' d="'+r(E,T,w.margin)+'"/>',q='viewBox="0 0 '+z+" "+z+'"',$='<svg xmlns="http://www.w3.org/2000/svg" '+(w.width?'width="'+w.width+'" height="'+w.width+'" ':"")+q+' shape-rendering="crispEdges">'+k+U+`</svg>
`;return typeof n=="function"&&n(null,$),$},a5}var dZ;function e2e(){if(dZ)return f_;dZ=1;const t=Dxe(),e=Xxe(),a=Jxe(),r=Qxe();function s(l,h,n,w,T){const E=[].slice.call(arguments,1),z=E.length,k=typeof E[z-1]=="function";if(!k&&!t())throw new Error("Callback required as last argument");if(k){if(z<2)throw new Error("Too few arguments provided");z===2?(T=n,n=h,h=w=void 0):z===3&&(h.getContext&&typeof T>"u"?(T=w,w=void 0):(T=w,w=n,n=h,h=void 0))}else{if(z<1)throw new Error("Too few arguments provided");return z===1?(n=h,h=w=void 0):z===2&&!h.getContext&&(w=n,n=h,h=void 0),new Promise(function(U,q){try{const H=e.create(n,w);U(l(H,h,w))}catch(H){q(H)}})}try{const U=e.create(n,w);T(null,l(U,h,w))}catch(U){T(U)}}return f_.create=e.create,f_.toCanvas=s.bind(null,a.render),f_.toDataURL=s.bind(null,a.renderToDataURL),f_.toString=s.bind(null,function(l,h,n){return r.render(l,n)}),f_}var t2e=e2e();const a2e=Xi(t2e),r2e="modulepreload",n2e=function(t){return"/ecpcaps/"+t},hZ={},bM=function(e,a,r){let s=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),n=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=Promise.allSettled(a.map(w=>{if(w=n2e(w),w in hZ)return;hZ[w]=!0;const T=w.endsWith(".css"),E=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${E}`))return;const z=document.createElement("link");if(z.rel=T?"stylesheet":r2e,T||(z.as="script"),z.crossOrigin="",z.href=w,n&&z.setAttribute("nonce",n),document.head.appendChild(z),T)return new Promise((k,U)=>{z.addEventListener("load",k),z.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${w}`)))})}))}function l(h){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=h,window.dispatchEvent(n),!n.defaultPrevented)throw h}return s.then(h=>{for(const n of h||[])n.status==="rejected"&&l(n.reason);return e().catch(l)})};function Is(t){"@babel/helpers - typeof";return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Is(t)}var cd=Uint8Array,rf=Uint16Array,y4=Int32Array,H2=new cd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$2=new cd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xM=new cd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yJ=function(t,e){for(var a=new rf(31),r=0;r<31;++r)a[r]=e+=1<<t[r-1];for(var s=new y4(a[30]),r=1;r<30;++r)for(var l=a[r];l<a[r+1];++l)s[l]=l-a[r]<<5|r;return{b:a,r:s}},gJ=yJ(H2,2),AJ=gJ.b,PM=gJ.r;AJ[28]=258,PM[258]=28;var _J=yJ($2,0),i2e=_J.b,fZ=_J.r,EM=new rf(32768);for(var No=0;No<32768;++No){var ug=(No&43690)>>1|(No&21845)<<1;ug=(ug&52428)>>2|(ug&13107)<<2,ug=(ug&61680)>>4|(ug&3855)<<4,EM[No]=((ug&65280)>>8|(ug&255)<<8)>>1}var Cm=function(t,e,a){for(var r=t.length,s=0,l=new rf(e);s<r;++s)t[s]&&++l[t[s]-1];var h=new rf(e);for(s=1;s<e;++s)h[s]=h[s-1]+l[s-1]<<1;var n;if(a){n=new rf(1<<e);var w=15-e;for(s=0;s<r;++s)if(t[s])for(var T=s<<4|t[s],E=e-t[s],z=h[t[s]-1]++<<E,k=z|(1<<E)-1;z<=k;++z)n[EM[z]>>w]=T}else for(n=new rf(r),s=0;s<r;++s)t[s]&&(n[s]=EM[h[t[s]-1]++]>>15-t[s]);return n},Eg=new cd(288);for(var No=0;No<144;++No)Eg[No]=8;for(var No=144;No<256;++No)Eg[No]=9;for(var No=256;No<280;++No)Eg[No]=7;for(var No=280;No<288;++No)Eg[No]=8;var qR=new cd(32);for(var No=0;No<32;++No)qR[No]=5;var s2e=Cm(Eg,9,0),o2e=Cm(Eg,9,1),l2e=Cm(qR,5,0),u2e=Cm(qR,5,1),r5=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},Ap=function(t,e,a){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&a},n5=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},g4=function(t){return(t+7)/8|0},vJ=function(t,e,a){return(a==null||a>t.length)&&(a=t.length),new cd(t.subarray(e,a))},c2e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],wp=function(t,e,a){var r=new Error(e||c2e[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,wp),!a)throw r;return r},d2e=function(t,e,a,r){var s=t.length,l=0;if(!s||e.f&&!e.l)return a||new cd(0);var h=!a,n=h||e.i!=2,w=e.i;h&&(a=new cd(s*3));var T=function(ea){var Kt=a.length;if(ea>Kt){var Ea=new cd(Math.max(Kt*2,ea));Ea.set(a),a=Ea}},E=e.f||0,z=e.p||0,k=e.b||0,U=e.l,q=e.d,H=e.m,$=e.n,Q=s*8;do{if(!U){E=Ap(t,z,1);var ne=Ap(t,z+1,3);if(z+=3,ne)if(ne==1)U=o2e,q=u2e,H=9,$=5;else if(ne==2){var _e=Ap(t,z,31)+257,me=Ap(t,z+10,15)+4,Ae=_e+Ap(t,z+5,31)+1;z+=14;for(var Te=new cd(Ae),Oe=new cd(19),ie=0;ie<me;++ie)Oe[xM[ie]]=Ap(t,z+ie*3,7);z+=me*3;for(var we=r5(Oe),Me=(1<<we)-1,Ve=Cm(Oe,we,1),ie=0;ie<Ae;){var Ie=Ve[Ap(t,z,Me)];z+=Ie&15;var de=Ie>>4;if(de<16)Te[ie++]=de;else{var Ue=0,Be=0;for(de==16?(Be=3+Ap(t,z,3),z+=2,Ue=Te[ie-1]):de==17?(Be=3+Ap(t,z,7),z+=3):de==18&&(Be=11+Ap(t,z,127),z+=7);Be--;)Te[ie++]=Ue}}var ke=Te.subarray(0,_e),Je=Te.subarray(_e);H=r5(ke),$=r5(Je),U=Cm(ke,H,1),q=Cm(Je,$,1)}else wp(1);else{var de=g4(z)+4,ge=t[de-4]|t[de-3]<<8,fe=de+ge;if(fe>s){w&&wp(0);break}n&&T(k+ge),a.set(t.subarray(de,fe),k),e.b=k+=ge,e.p=z=fe*8,e.f=E;continue}if(z>Q){w&&wp(0);break}}n&&T(k+131072);for(var Le=(1<<H)-1,qe=(1<<$)-1,ye=z;;ye=z){var Ue=U[n5(t,z)&Le],ze=Ue>>4;if(z+=Ue&15,z>Q){w&&wp(0);break}if(Ue||wp(2),ze<256)a[k++]=ze;else if(ze==256){ye=z,U=null;break}else{var We=ze-254;if(ze>264){var ie=ze-257,lt=H2[ie];We=Ap(t,z,(1<<lt)-1)+AJ[ie],z+=lt}var vt=q[n5(t,z)&qe],Ot=vt>>4;vt||wp(3),z+=vt&15;var Je=i2e[Ot];if(Ot>3){var lt=$2[Ot];Je+=n5(t,z)&(1<<lt)-1,z+=lt}if(z>Q){w&&wp(0);break}n&&T(k+131072);var dt=k+We;if(k<Je){var pt=l-Je,ve=Math.min(Je,dt);for(pt+k<0&&wp(3);k<ve;++k)a[k]=r[pt+k]}for(;k<dt;++k)a[k]=a[k-Je]}}e.l=U,e.p=ye,e.b=k,e.f=E,U&&(E=1,e.m=H,e.d=q,e.n=$)}while(!E);return k!=a.length&&h?vJ(a,0,k):a.subarray(0,k)},Jm=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8},yw=function(t,e,a){a<<=e&7;var r=e/8|0;t[r]|=a,t[r+1]|=a>>8,t[r+2]|=a>>16},i5=function(t,e){for(var a=[],r=0;r<t.length;++r)t[r]&&a.push({s:r,f:t[r]});var s=a.length,l=a.slice();if(!s)return{t:RJ,l:0};if(s==1){var h=new cd(a[0].s+1);return h[a[0].s]=1,{t:h,l:1}}a.sort(function(fe,_e){return fe.f-_e.f}),a.push({s:-1,f:25001});var n=a[0],w=a[1],T=0,E=1,z=2;for(a[0]={s:-1,f:n.f+w.f,l:n,r:w};E!=s-1;)n=a[a[T].f<a[z].f?T++:z++],w=a[T!=E&&a[T].f<a[z].f?T++:z++],a[E++]={s:-1,f:n.f+w.f,l:n,r:w};for(var k=l[0].s,r=1;r<s;++r)l[r].s>k&&(k=l[r].s);var U=new rf(k+1),q=NM(a[E-1],U,0);if(q>e){var r=0,H=0,$=q-e,Q=1<<$;for(l.sort(function(_e,me){return U[me.s]-U[_e.s]||_e.f-me.f});r<s;++r){var ne=l[r].s;if(U[ne]>e)H+=Q-(1<<q-U[ne]),U[ne]=e;else break}for(H>>=$;H>0;){var de=l[r].s;U[de]<e?H-=1<<e-U[de]++-1:++r}for(;r>=0&&H;--r){var ge=l[r].s;U[ge]==e&&(--U[ge],++H)}q=e}return{t:new cd(U),l:q}},NM=function(t,e,a){return t.s==-1?Math.max(NM(t.l,e,a+1),NM(t.r,e,a+1)):e[t.s]=a},pZ=function(t){for(var e=t.length;e&&!t[--e];);for(var a=new rf(++e),r=0,s=t[0],l=1,h=function(w){a[r++]=w},n=1;n<=e;++n)if(t[n]==s&&n!=e)++l;else{if(!s&&l>2){for(;l>138;l-=138)h(32754);l>2&&(h(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(h(s),--l;l>6;l-=6)h(8304);l>2&&(h(l-3<<5|8208),l=0)}for(;l--;)h(s);l=1,s=t[n]}return{c:a.subarray(0,r),n:e}},gw=function(t,e){for(var a=0,r=0;r<e.length;++r)a+=t[r]*e[r];return a},wJ=function(t,e,a){var r=a.length,s=g4(e+2);t[s]=r&255,t[s+1]=r>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var l=0;l<r;++l)t[s+l+4]=a[l];return(s+4+r)*8},mZ=function(t,e,a,r,s,l,h,n,w,T,E){Jm(e,E++,a),++s[256];for(var z=i5(s,15),k=z.t,U=z.l,q=i5(l,15),H=q.t,$=q.l,Q=pZ(k),ne=Q.c,de=Q.n,ge=pZ(H),fe=ge.c,_e=ge.n,me=new rf(19),Ae=0;Ae<ne.length;++Ae)++me[ne[Ae]&31];for(var Ae=0;Ae<fe.length;++Ae)++me[fe[Ae]&31];for(var Te=i5(me,7),Oe=Te.t,ie=Te.l,we=19;we>4&&!Oe[xM[we-1]];--we);var Me=T+5<<3,Ve=gw(s,Eg)+gw(l,qR)+h,Ie=gw(s,k)+gw(l,H)+h+14+3*we+gw(me,Oe)+2*me[16]+3*me[17]+7*me[18];if(w>=0&&Me<=Ve&&Me<=Ie)return wJ(e,E,t.subarray(w,w+T));var Ue,Be,ke,Je;if(Jm(e,E,1+(Ie<Ve)),E+=2,Ie<Ve){Ue=Cm(k,U,0),Be=k,ke=Cm(H,$,0),Je=H;var Le=Cm(Oe,ie,0);Jm(e,E,de-257),Jm(e,E+5,_e-1),Jm(e,E+10,we-4),E+=14;for(var Ae=0;Ae<we;++Ae)Jm(e,E+3*Ae,Oe[xM[Ae]]);E+=3*we;for(var qe=[ne,fe],ye=0;ye<2;++ye)for(var ze=qe[ye],Ae=0;Ae<ze.length;++Ae){var We=ze[Ae]&31;Jm(e,E,Le[We]),E+=Oe[We],We>15&&(Jm(e,E,ze[Ae]>>5&127),E+=ze[Ae]>>12)}}else Ue=s2e,Be=Eg,ke=l2e,Je=qR;for(var Ae=0;Ae<n;++Ae){var lt=r[Ae];if(lt>255){var We=lt>>18&31;yw(e,E,Ue[We+257]),E+=Be[We+257],We>7&&(Jm(e,E,lt>>23&31),E+=H2[We]);var vt=lt&31;yw(e,E,ke[vt]),E+=Je[vt],vt>3&&(yw(e,E,lt>>5&8191),E+=$2[vt])}else yw(e,E,Ue[lt]),E+=Be[lt]}return yw(e,E,Ue[256]),E+Be[256]},h2e=new y4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),RJ=new cd(0),f2e=function(t,e,a,r,s,l){var h=l.z||t.length,n=new cd(r+h+5*(1+Math.ceil(h/7e3))+s),w=n.subarray(r,n.length-s),T=l.l,E=(l.r||0)&7;if(e){E&&(w[0]=l.r>>3);for(var z=h2e[e-1],k=z>>13,U=z&8191,q=(1<<a)-1,H=l.p||new rf(32768),$=l.h||new rf(q+1),Q=Math.ceil(a/3),ne=2*Q,de=function(Bt){return(t[Bt]^t[Bt+1]<<Q^t[Bt+2]<<ne)&q},ge=new y4(25e3),fe=new rf(288),_e=new rf(32),me=0,Ae=0,Te=l.i||0,Oe=0,ie=l.w||0,we=0;Te+2<h;++Te){var Me=de(Te),Ve=Te&32767,Ie=$[Me];if(H[Ve]=Ie,$[Me]=Ve,ie<=Te){var Ue=h-Te;if((me>7e3||Oe>24576)&&(Ue>423||!T)){E=mZ(t,w,0,ge,fe,_e,Ae,Oe,we,Te-we,E),Oe=me=Ae=0,we=Te;for(var Be=0;Be<286;++Be)fe[Be]=0;for(var Be=0;Be<30;++Be)_e[Be]=0}var ke=2,Je=0,Le=U,qe=Ve-Ie&32767;if(Ue>2&&Me==de(Te-qe))for(var ye=Math.min(k,Ue)-1,ze=Math.min(32767,Te),We=Math.min(258,Ue);qe<=ze&&--Le&&Ve!=Ie;){if(t[Te+ke]==t[Te+ke-qe]){for(var lt=0;lt<We&&t[Te+lt]==t[Te+lt-qe];++lt);if(lt>ke){if(ke=lt,Je=qe,lt>ye)break;for(var vt=Math.min(qe,lt-2),Ot=0,Be=0;Be<vt;++Be){var dt=Te-qe+Be&32767,pt=H[dt],ve=dt-pt&32767;ve>Ot&&(Ot=ve,Ie=dt)}}}Ve=Ie,Ie=H[Ve],qe+=Ve-Ie&32767}if(Je){ge[Oe++]=268435456|PM[ke]<<18|fZ[Je];var ea=PM[ke]&31,Kt=fZ[Je]&31;Ae+=H2[ea]+$2[Kt],++fe[257+ea],++_e[Kt],ie=Te+ke,++me}else ge[Oe++]=t[Te],++fe[t[Te]]}}for(Te=Math.max(Te,ie);Te<h;++Te)ge[Oe++]=t[Te],++fe[t[Te]];E=mZ(t,w,T,ge,fe,_e,Ae,Oe,we,Te-we,E),T||(l.r=E&7|w[E/8|0]<<3,E-=7,l.h=$,l.p=H,l.i=Te,l.w=ie)}else{for(var Te=l.w||0;Te<h+T;Te+=65535){var Ea=Te+65535;Ea>=h&&(w[E/8|0]=T,Ea=h),E=wJ(w,E+1,t.subarray(Te,Ea))}l.i=h}return vJ(n,0,r+g4(E)+s)},TJ=function(){var t=1,e=0;return{p:function(a){for(var r=t,s=e,l=a.length|0,h=0;h!=l;){for(var n=Math.min(h+2655,l);h<n;++h)s+=r+=a[h];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}t=r,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},p2e=function(t,e,a,r,s){if(!s&&(s={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),h=new cd(l.length+t.length);h.set(l),h.set(t,l.length),t=h,s.w=l.length}return f2e(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,a,r,s)},SJ=function(t,e,a){for(;a;++e)t[e]=a,a>>>=8},m2e=function(t,e){var a=e.level,r=a==0?0:a<6?1:a==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=TJ();s.p(e.dictionary),SJ(t,2,s.d())}},y2e=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&wp(6,"invalid zlib data"),(t[1]>>5&1)==1&&wp(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function VM(t,e){e||(e={});var a=TJ();a.p(t);var r=p2e(t,e,e.dictionary?6:2,4);return m2e(r,e),SJ(r,r.length-4,a.d()),r}function g2e(t,e){return d2e(t.subarray(y2e(t),-4),{i:2},e,e)}var A2e=typeof TextDecoder<"u"&&new TextDecoder,_2e=0;try{A2e.decode(RJ,{stream:!0}),_2e=1}catch{}var $n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function s5(){$n.console&&typeof $n.console.log=="function"&&$n.console.log.apply($n.console,arguments)}var no={log:s5,warn:function(t){$n.console&&(typeof $n.console.warn=="function"?$n.console.warn.apply($n.console,arguments):s5.call(null,arguments))},error:function(t){$n.console&&(typeof $n.console.error=="function"?$n.console.error.apply($n.console,arguments):s5(t))}};function o5(t,e,a){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){DA(r.response,e,a)},r.onerror=function(){no.error("could not download file")},r.send()}function yZ(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function hC(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Bw,zM,DA=$n.saveAs||((typeof window>"u"?"undefined":Is(window))!=="object"||window!==$n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,a){var r=$n.URL||$n.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?yZ(s.href)?o5(t,e,a):hC(s,s.target="_blank"):hC(s)):(s.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){hC(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,a){if(e=e||t.name||"download",typeof t=="string")if(yZ(t))o5(t,e,a);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){hC(r)})}else navigator.msSaveOrOpenBlob(function(s,l){return l===void 0?l={autoBom:!1}:Is(l)!=="object"&&(no.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,a),e)}:function(t,e,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return o5(t,e,a);var s=t.type==="application/octet-stream",l=/constructor/i.test($n.HTMLElement)||$n.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||s&&l)&&(typeof FileReader>"u"?"undefined":Is(FileReader))==="object"){var n=new FileReader;n.onloadend=function(){var E=n.result;E=h?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=E:location=E,r=null},n.readAsDataURL(t)}else{var w=$n.URL||$n.webkitURL,T=w.createObjectURL(t);r?r.location=T:location.href=T,r=null,setTimeout(function(){w.revokeObjectURL(T)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function CJ(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(n){return[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}],r=0;r<a.length;r++){var s=a[r].re,l=a[r].process,h=s.exec(t);h&&(e=l(h),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var n=this.r.toString(16),w=this.g.toString(16),T=this.b.toString(16);return n.length==1&&(n="0"+n),w.length==1&&(w="0"+w),T.length==1&&(T="0"+T),"#"+n+w+T}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function l5(t,e){var a=t[0],r=t[1],s=t[2],l=t[3];a=td(a,r,s,l,e[0],7,-680876936),l=td(l,a,r,s,e[1],12,-389564586),s=td(s,l,a,r,e[2],17,606105819),r=td(r,s,l,a,e[3],22,-1044525330),a=td(a,r,s,l,e[4],7,-176418897),l=td(l,a,r,s,e[5],12,1200080426),s=td(s,l,a,r,e[6],17,-1473231341),r=td(r,s,l,a,e[7],22,-45705983),a=td(a,r,s,l,e[8],7,1770035416),l=td(l,a,r,s,e[9],12,-1958414417),s=td(s,l,a,r,e[10],17,-42063),r=td(r,s,l,a,e[11],22,-1990404162),a=td(a,r,s,l,e[12],7,1804603682),l=td(l,a,r,s,e[13],12,-40341101),s=td(s,l,a,r,e[14],17,-1502002290),a=ad(a,r=td(r,s,l,a,e[15],22,1236535329),s,l,e[1],5,-165796510),l=ad(l,a,r,s,e[6],9,-1069501632),s=ad(s,l,a,r,e[11],14,643717713),r=ad(r,s,l,a,e[0],20,-373897302),a=ad(a,r,s,l,e[5],5,-701558691),l=ad(l,a,r,s,e[10],9,38016083),s=ad(s,l,a,r,e[15],14,-660478335),r=ad(r,s,l,a,e[4],20,-405537848),a=ad(a,r,s,l,e[9],5,568446438),l=ad(l,a,r,s,e[14],9,-1019803690),s=ad(s,l,a,r,e[3],14,-187363961),r=ad(r,s,l,a,e[8],20,1163531501),a=ad(a,r,s,l,e[13],5,-1444681467),l=ad(l,a,r,s,e[2],9,-51403784),s=ad(s,l,a,r,e[7],14,1735328473),a=rd(a,r=ad(r,s,l,a,e[12],20,-1926607734),s,l,e[5],4,-378558),l=rd(l,a,r,s,e[8],11,-2022574463),s=rd(s,l,a,r,e[11],16,1839030562),r=rd(r,s,l,a,e[14],23,-35309556),a=rd(a,r,s,l,e[1],4,-1530992060),l=rd(l,a,r,s,e[4],11,1272893353),s=rd(s,l,a,r,e[7],16,-155497632),r=rd(r,s,l,a,e[10],23,-1094730640),a=rd(a,r,s,l,e[13],4,681279174),l=rd(l,a,r,s,e[0],11,-358537222),s=rd(s,l,a,r,e[3],16,-722521979),r=rd(r,s,l,a,e[6],23,76029189),a=rd(a,r,s,l,e[9],4,-640364487),l=rd(l,a,r,s,e[12],11,-421815835),s=rd(s,l,a,r,e[15],16,530742520),a=nd(a,r=rd(r,s,l,a,e[2],23,-995338651),s,l,e[0],6,-198630844),l=nd(l,a,r,s,e[7],10,1126891415),s=nd(s,l,a,r,e[14],15,-1416354905),r=nd(r,s,l,a,e[5],21,-57434055),a=nd(a,r,s,l,e[12],6,1700485571),l=nd(l,a,r,s,e[3],10,-1894986606),s=nd(s,l,a,r,e[10],15,-1051523),r=nd(r,s,l,a,e[1],21,-2054922799),a=nd(a,r,s,l,e[8],6,1873313359),l=nd(l,a,r,s,e[15],10,-30611744),s=nd(s,l,a,r,e[6],15,-1560198380),r=nd(r,s,l,a,e[13],21,1309151649),a=nd(a,r,s,l,e[4],6,-145523070),l=nd(l,a,r,s,e[11],10,-1120210379),s=nd(s,l,a,r,e[2],15,718787259),r=nd(r,s,l,a,e[9],21,-343485551),t[0]=wg(a,t[0]),t[1]=wg(r,t[1]),t[2]=wg(s,t[2]),t[3]=wg(l,t[3])}function K2(t,e,a,r,s,l){return e=wg(wg(e,t),wg(r,l)),wg(e<<s|e>>>32-s,a)}function td(t,e,a,r,s,l,h){return K2(e&a|~e&r,t,e,s,l,h)}function ad(t,e,a,r,s,l,h){return K2(e&r|a&~r,t,e,s,l,h)}function rd(t,e,a,r,s,l,h){return K2(e^a^r,t,e,s,l,h)}function nd(t,e,a,r,s,l,h){return K2(a^(e|~r),t,e,s,l,h)}function bJ(t){var e,a=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)l5(r,v2e(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(l5(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*a,l5(r,s),r}function v2e(t){var e,a=[];for(e=0;e<64;e+=4)a[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return a}Bw=$n.atob.bind($n),zM=$n.btoa.bind($n);var gZ="0123456789abcdef".split("");function w2e(t){for(var e="",a=0;a<4;a++)e+=gZ[t>>8*a+4&15]+gZ[t>>8*a&15];return e}function R2e(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function OM(t){return bJ(t).map(R2e).join("")}var T2e=function(t){for(var e=0;e<t.length;e++)t[e]=w2e(t[e]);return t.join("")}(bJ("hello"))!="5d41402abc4b2a76b9719d911017c592";function wg(t,e){if(T2e){var a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function DM(t,e){var a,r,s,l;if(t!==a){for(var h=(s=t,l=1+(256/t.length>>0),new Array(l+1).join(s)),n=[],w=0;w<256;w++)n[w]=w;var T=0;for(w=0;w<256;w++){var E=n[w];T=(T+E+h.charCodeAt(w))%256,n[w]=n[T],n[T]=E}a=t,r=n}else n=r;var z=e.length,k=0,U=0,q="";for(w=0;w<z;w++)U=(U+(E=n[k=(k+1)%256]))%256,n[k]=n[U],n[U]=E,h=n[(n[k]+n[U])%256],q+=String.fromCharCode(e.charCodeAt(w)^h);return q}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var AZ={print:4,modify:8,copy:16,"annot-forms":32};function __(t,e,a,r){this.v=1,this.r=2;var s=192;t.forEach(function(n){if(AZ.perm!==void 0)throw new Error("Invalid permission: "+n);s+=AZ[n]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(e+this.padding).substr(0,32),h=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,h),this.P=-(1+(255^s)),this.encryptionKey=OM(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=DM(this.encryptionKey,this.padding)}function v_(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",a=t.length,r=0;r<a;r++){var s=t.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[r]}return e}function _Z(t){if(Is(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(a,r,s){if(s=s||!1,typeof a!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(a)||(e[a]={});var l=Math.random().toString(35);return e[a][l]=[r,!!s],l},this.unsubscribe=function(a){for(var r in e)if(e[r][a])return delete e[r][a],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(a){if(e.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var l in e[a]){var h=e[a][l];try{h[0].apply(t,r)}catch(n){$n.console&&no.error("jsPDF PubSub Error",n.message,n)}h[1]&&s.push(l)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function mx(t){if(!(this instanceof mx))return new mx(t);var e="opacity,stroke-opacity".split(",");for(var a in t)t.hasOwnProperty(a)&&e.indexOf(a)>=0&&(this[a]=t[a]);this.id="",this.objectNumber=-1}function xJ(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function IA(t,e,a,r,s){if(!(this instanceof IA))return new IA(t,e,a,r,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=a,xJ.call(this,r,s)}function E_(t,e,a,r,s){if(!(this instanceof E_))return new E_(t,e,a,r,s);this.boundingBox=t,this.xStep=e,this.yStep=a,this.stream="",this.cloneIndex=0,xJ.call(this,r,s)}function Bn(t){var e,a=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],l=arguments[3],h=[],n=1,w=16,T="S",E=null;Is(t=t||{})==="object"&&(a=t.orientation,r=t.unit||r,s=t.format||s,l=t.compress||t.compressPdf||l,(E=t.encryption||null)!==null&&(E.userPassword=E.userPassword||"",E.ownerPassword=E.ownerPassword||"",E.userPermissions=E.userPermissions||[]),n=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(w=t.floatPrecision),T=t.defaultPathOperation||"S"),h=t.filters||(l===!0?["FlateEncode"]:h),r=r||"mm",a=(""+(a||"P")).toLowerCase();var z=t.putOnlyUsedFonts||!1,k={},U={internal:{},__private__:{}};U.__private__.PubSub=_Z;var q="1.3",H=U.__private__.getPdfVersion=function(){return q};U.__private__.setPdfVersion=function(oe){q=oe};var $={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};U.__private__.getPageFormats=function(){return $};var Q=U.__private__.getPageFormat=function(oe){return $[oe]};s=s||"a4";var ne={COMPAT:"compat",ADVANCED:"advanced"},de=ne.COMPAT;function ge(){this.saveGraphicsState(),St(new De(ca,0,0,-ca,0,ql()*ca).toString()+" cm"),this.setFontSize(this.getFontSize()/ca),T="n",de=ne.ADVANCED}function fe(){this.restoreGraphicsState(),T="S",de=ne.COMPAT}var _e=U.__private__.combineFontStyleAndFontWeight=function(oe,$e){if(oe=="bold"&&$e=="normal"||oe=="bold"&&$e==400||oe=="normal"&&$e=="italic"||oe=="bold"&&$e=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $e&&(oe=$e==400||$e==="normal"?oe==="italic"?"italic":"normal":$e!=700&&$e!=="bold"||oe!=="normal"?($e==700?"bold":$e)+""+oe:"bold"),oe};U.advancedAPI=function(oe){var $e=de===ne.COMPAT;return $e&&ge.call(this),typeof oe!="function"||(oe(this),$e&&fe.call(this)),this},U.compatAPI=function(oe){var $e=de===ne.ADVANCED;return $e&&fe.call(this),typeof oe!="function"||(oe(this),$e&&ge.call(this)),this},U.isAdvancedAPI=function(){return de===ne.ADVANCED};var me,Ae=function(oe){if(de!==ne.ADVANCED)throw new Error(oe+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Te=U.roundToPrecision=U.__private__.roundToPrecision=function(oe,$e){var zt=e||$e;if(isNaN(oe)||isNaN(zt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return oe.toFixed(zt).replace(/0+$/,"")};me=U.hpf=U.__private__.hpf=typeof w=="number"?function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(oe,w)}:w==="smart"?function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(oe,oe>-1&&oe<1?16:5)}:function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.hpf");return Te(oe,16)};var Oe=U.f2=U.__private__.f2=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.f2");return Te(oe,2)},ie=U.__private__.f3=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.f3");return Te(oe,3)},we=U.scale=U.__private__.scale=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.scale");return de===ne.COMPAT?oe*ca:de===ne.ADVANCED?oe:void 0},Me=function(oe){return de===ne.COMPAT?ql()-oe:de===ne.ADVANCED?oe:void 0},Ve=function(oe){return we(Me(oe))};U.__private__.setPrecision=U.setPrecision=function(oe){typeof parseInt(oe,10)=="number"&&(e=parseInt(oe,10))};var Ie,Ue="00000000000000000000000000000000",Be=U.__private__.getFileId=function(){return Ue},ke=U.__private__.setFileId=function(oe){return Ue=oe!==void 0&&/^[a-fA-F0-9]{32}$/.test(oe)?oe.toUpperCase():Ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),E!==null&&(lo=new __(E.userPermissions,E.userPassword,E.ownerPassword,Ue)),Ue};U.setFileId=function(oe){return ke(oe),this},U.getFileId=function(){return Be()};var Je=U.__private__.convertDateToPDFDate=function(oe){var $e=oe.getTimezoneOffset(),zt=$e<0?"+":"-",Wt=Math.floor(Math.abs($e/60)),ha=Math.abs($e%60),Da=[zt,We(Wt),"'",We(ha),"'"].join("");return["D:",oe.getFullYear(),We(oe.getMonth()+1),We(oe.getDate()),We(oe.getHours()),We(oe.getMinutes()),We(oe.getSeconds()),Da].join("")},Le=U.__private__.convertPDFDateToDate=function(oe){var $e=parseInt(oe.substr(2,4),10),zt=parseInt(oe.substr(6,2),10)-1,Wt=parseInt(oe.substr(8,2),10),ha=parseInt(oe.substr(10,2),10),Da=parseInt(oe.substr(12,2),10),ar=parseInt(oe.substr(14,2),10);return new Date($e,zt,Wt,ha,Da,ar,0)},qe=U.__private__.setCreationDate=function(oe){var $e;if(oe===void 0&&(oe=new Date),oe instanceof Date)$e=Je(oe);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(oe))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$e=oe}return Ie=$e},ye=U.__private__.getCreationDate=function(oe){var $e=Ie;return oe==="jsDate"&&($e=Le(Ie)),$e};U.setCreationDate=function(oe){return qe(oe),this},U.getCreationDate=function(oe){return ye(oe)};var ze,We=U.__private__.padd2=function(oe){return("0"+parseInt(oe)).slice(-2)},lt=U.__private__.padd2Hex=function(oe){return("00"+(oe=oe.toString())).substr(oe.length)},vt=0,Ot=[],dt=[],pt=0,ve=[],ea=[],Kt=!1,Ea=dt,Bt=function(){vt=0,pt=0,dt=[],Ot=[],ve=[],Ht=kt(),Zt=kt()};U.__private__.setCustomOutputDestination=function(oe){Kt=!0,Ea=oe};var la=function(oe){Kt||(Ea=oe)};U.__private__.resetCustomOutputDestination=function(){Kt=!1,Ea=dt};var St=U.__private__.out=function(oe){return oe=oe.toString(),pt+=oe.length+1,Ea.push(oe),Ea},vr=U.__private__.write=function(oe){return St(arguments.length===1?oe.toString():Array.prototype.join.call(arguments," "))},Va=U.__private__.getArrayBuffer=function(oe){for(var $e=oe.length,zt=new ArrayBuffer($e),Wt=new Uint8Array(zt);$e--;)Wt[$e]=oe.charCodeAt($e);return zt},za=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];U.__private__.getStandardFonts=function(){return za};var nr=t.fontSize||16;U.__private__.setFontSize=U.setFontSize=function(oe){return nr=de===ne.ADVANCED?oe/ca:oe,this};var cr,ur=U.__private__.getFontSize=U.getFontSize=function(){return de===ne.COMPAT?nr:nr*ca},Pr=t.R2L||!1;U.__private__.setR2L=U.setR2L=function(oe){return Pr=oe,this},U.__private__.getR2L=U.getR2L=function(){return Pr};var ka,jr=U.__private__.setZoomMode=function(oe){var $e=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(oe))cr=oe;else if(isNaN(oe)){if($e.indexOf(oe)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+oe+'" is not recognized.');cr=oe}else cr=parseInt(oe,10)};U.__private__.getZoomMode=function(){return cr};var pn,Dn=U.__private__.setPageMode=function(oe){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(oe)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+oe+'" is not recognized.');ka=oe};U.__private__.getPageMode=function(){return ka};var Rn=U.__private__.setLayoutMode=function(oe){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(oe)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+oe+'" is not recognized.');pn=oe};U.__private__.getLayoutMode=function(){return pn},U.__private__.setDisplayMode=U.setDisplayMode=function(oe,$e,zt){return jr(oe),Rn($e),Dn(zt),this};var va={title:"",subject:"",author:"",keywords:"",creator:""};U.__private__.getDocumentProperty=function(oe){if(Object.keys(va).indexOf(oe)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return va[oe]},U.__private__.getDocumentProperties=function(){return va},U.__private__.setDocumentProperties=U.setProperties=U.setDocumentProperties=function(oe){for(var $e in va)va.hasOwnProperty($e)&&oe[$e]&&(va[$e]=oe[$e]);return this},U.__private__.setDocumentProperty=function(oe,$e){if(Object.keys(va).indexOf(oe)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return va[oe]=$e};var Wa,ca,Qa,yr,jn,Mn={},mn={},en=[],Er={},As={},ki={},Ji={},zo=null,Ei=0,hn=[],ui=new _Z(U),Ec=t.hotfixes||[],Fs={},Xt={},be=[],De=function oe($e,zt,Wt,ha,Da,ar){if(!(this instanceof oe))return new oe($e,zt,Wt,ha,Da,ar);isNaN($e)&&($e=1),isNaN(zt)&&(zt=0),isNaN(Wt)&&(Wt=0),isNaN(ha)&&(ha=1),isNaN(Da)&&(Da=0),isNaN(ar)&&(ar=0),this._matrix=[$e,zt,Wt,ha,Da,ar]};Object.defineProperty(De.prototype,"sx",{get:function(){return this._matrix[0]},set:function(oe){this._matrix[0]=oe}}),Object.defineProperty(De.prototype,"shy",{get:function(){return this._matrix[1]},set:function(oe){this._matrix[1]=oe}}),Object.defineProperty(De.prototype,"shx",{get:function(){return this._matrix[2]},set:function(oe){this._matrix[2]=oe}}),Object.defineProperty(De.prototype,"sy",{get:function(){return this._matrix[3]},set:function(oe){this._matrix[3]=oe}}),Object.defineProperty(De.prototype,"tx",{get:function(){return this._matrix[4]},set:function(oe){this._matrix[4]=oe}}),Object.defineProperty(De.prototype,"ty",{get:function(){return this._matrix[5]},set:function(oe){this._matrix[5]=oe}}),Object.defineProperty(De.prototype,"a",{get:function(){return this._matrix[0]},set:function(oe){this._matrix[0]=oe}}),Object.defineProperty(De.prototype,"b",{get:function(){return this._matrix[1]},set:function(oe){this._matrix[1]=oe}}),Object.defineProperty(De.prototype,"c",{get:function(){return this._matrix[2]},set:function(oe){this._matrix[2]=oe}}),Object.defineProperty(De.prototype,"d",{get:function(){return this._matrix[3]},set:function(oe){this._matrix[3]=oe}}),Object.defineProperty(De.prototype,"e",{get:function(){return this._matrix[4]},set:function(oe){this._matrix[4]=oe}}),Object.defineProperty(De.prototype,"f",{get:function(){return this._matrix[5]},set:function(oe){this._matrix[5]=oe}}),Object.defineProperty(De.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(De.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(De.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(De.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),De.prototype.join=function(oe){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(me).join(oe)},De.prototype.multiply=function(oe){var $e=oe.sx*this.sx+oe.shy*this.shx,zt=oe.sx*this.shy+oe.shy*this.sy,Wt=oe.shx*this.sx+oe.sy*this.shx,ha=oe.shx*this.shy+oe.sy*this.sy,Da=oe.tx*this.sx+oe.ty*this.shx+this.tx,ar=oe.tx*this.shy+oe.ty*this.sy+this.ty;return new De($e,zt,Wt,ha,Da,ar)},De.prototype.decompose=function(){var oe=this.sx,$e=this.shy,zt=this.shx,Wt=this.sy,ha=this.tx,Da=this.ty,ar=Math.sqrt(oe*oe+$e*$e),wr=(oe/=ar)*zt+($e/=ar)*Wt;zt-=oe*wr,Wt-=$e*wr;var $r=Math.sqrt(zt*zt+Wt*Wt);return wr/=$r,oe*(Wt/=$r)<$e*(zt/=$r)&&(oe=-oe,$e=-$e,wr=-wr,ar=-ar),{scale:new De(ar,0,0,$r,0,0),translate:new De(1,0,0,1,ha,Da),rotate:new De(oe,$e,-$e,oe,0,0),skew:new De(1,0,wr,1,0,0)}},De.prototype.toString=function(oe){return this.join(" ")},De.prototype.inversed=function(){var oe=this.sx,$e=this.shy,zt=this.shx,Wt=this.sy,ha=this.tx,Da=this.ty,ar=1/(oe*Wt-$e*zt),wr=Wt*ar,$r=-$e*ar,Sn=-zt*ar,Nn=oe*ar;return new De(wr,$r,Sn,Nn,-wr*ha-Sn*Da,-$r*ha-Nn*Da)},De.prototype.applyToPoint=function(oe){var $e=oe.x*this.sx+oe.y*this.shx+this.tx,zt=oe.x*this.shy+oe.y*this.sy+this.ty;return new hu($e,zt)},De.prototype.applyToRectangle=function(oe){var $e=this.applyToPoint(oe),zt=this.applyToPoint(new hu(oe.x+oe.w,oe.y+oe.h));return new fu($e.x,$e.y,zt.x-$e.x,zt.y-$e.y)},De.prototype.clone=function(){var oe=this.sx,$e=this.shy,zt=this.shx,Wt=this.sy,ha=this.tx,Da=this.ty;return new De(oe,$e,zt,Wt,ha,Da)},U.Matrix=De;var at=U.matrixMult=function(oe,$e){return $e.multiply(oe)},At=new De(1,0,0,1,0,0);U.unitMatrix=U.identityMatrix=At;var mt=function(oe,$e){if(!As[oe]){var zt=($e instanceof IA?"Sh":"P")+(Object.keys(Er).length+1).toString(10);$e.id=zt,As[oe]=zt,Er[zt]=$e,ui.publish("addPattern",$e)}};U.ShadingPattern=IA,U.TilingPattern=E_,U.addShadingPattern=function(oe,$e){return Ae("addShadingPattern()"),mt(oe,$e),this},U.beginTilingPattern=function(oe){Ae("beginTilingPattern()"),Zl(oe.boundingBox[0],oe.boundingBox[1],oe.boundingBox[2]-oe.boundingBox[0],oe.boundingBox[3]-oe.boundingBox[1],oe.matrix)},U.endTilingPattern=function(oe,$e){Ae("endTilingPattern()"),$e.stream=ea[ze].join(`
`),mt(oe,$e),ui.publish("endTilingPattern",$e),be.pop().restore()};var Ct=U.__private__.newObject=function(){var oe=kt();return Pt(oe,!0),oe},kt=U.__private__.newObjectDeferred=function(){return vt++,Ot[vt]=function(){return pt},vt},Pt=function(oe,$e){return $e=typeof $e=="boolean"&&$e,Ot[oe]=pt,$e&&St(oe+" 0 obj"),oe},qt=U.__private__.newAdditionalObject=function(){var oe={objId:kt(),content:""};return ve.push(oe),oe},Ht=kt(),Zt=kt(),Ra=U.__private__.decodeColorString=function(oe){var $e=oe.split(" ");if($e.length!==2||$e[1]!=="g"&&$e[1]!=="G")$e.length===5&&($e[4]==="k"||$e[4]==="K")&&($e=[(1-$e[0])*(1-$e[3]),(1-$e[1])*(1-$e[3]),(1-$e[2])*(1-$e[3]),"r"]);else{var zt=parseFloat($e[0]);$e=[zt,zt,zt,"r"]}for(var Wt="#",ha=0;ha<3;ha++)Wt+=("0"+Math.floor(255*parseFloat($e[ha])).toString(16)).slice(-2);return Wt},Ma=U.__private__.encodeColorString=function(oe){var $e;typeof oe=="string"&&(oe={ch1:oe});var zt=oe.ch1,Wt=oe.ch2,ha=oe.ch3,Da=oe.ch4,ar=oe.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof zt=="string"&&zt.charAt(0)!=="#"){var wr=new CJ(zt);if(wr.ok)zt=wr.toHex();else if(!/^\d*\.?\d*$/.test(zt))throw new Error('Invalid color "'+zt+'" passed to jsPDF.encodeColorString.')}if(typeof zt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(zt)&&(zt="#"+zt[1]+zt[1]+zt[2]+zt[2]+zt[3]+zt[3]),typeof zt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(zt)){var $r=parseInt(zt.substr(1),16);zt=$r>>16&255,Wt=$r>>8&255,ha=255&$r}if(Wt===void 0||Da===void 0&&zt===Wt&&Wt===ha)if(typeof zt=="string")$e=zt+" "+ar[0];else switch(oe.precision){case 2:$e=Oe(zt/255)+" "+ar[0];break;case 3:default:$e=ie(zt/255)+" "+ar[0]}else if(Da===void 0||Is(Da)==="object"){if(Da&&!isNaN(Da.a)&&Da.a===0)return $e=["1.","1.","1.",ar[1]].join(" ");if(typeof zt=="string")$e=[zt,Wt,ha,ar[1]].join(" ");else switch(oe.precision){case 2:$e=[Oe(zt/255),Oe(Wt/255),Oe(ha/255),ar[1]].join(" ");break;default:case 3:$e=[ie(zt/255),ie(Wt/255),ie(ha/255),ar[1]].join(" ")}}else if(typeof zt=="string")$e=[zt,Wt,ha,Da,ar[2]].join(" ");else switch(oe.precision){case 2:$e=[Oe(zt),Oe(Wt),Oe(ha),Oe(Da),ar[2]].join(" ");break;case 3:default:$e=[ie(zt),ie(Wt),ie(ha),ie(Da),ar[2]].join(" ")}return $e},Ba=U.__private__.getFilters=function(){return h},Ar=U.__private__.putStream=function(oe){var $e=(oe=oe||{}).data||"",zt=oe.filters||Ba(),Wt=oe.alreadyAppliedFilters||[],ha=oe.addLength1||!1,Da=$e.length,ar=oe.objectId,wr=function(Qi){return Qi};if(E!==null&&ar===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");E!==null&&(wr=lo.encryptor(ar,0));var $r={};zt===!0&&(zt=["FlateEncode"]);var Sn=oe.additionalKeyValues||[],Nn=($r=Bn.API.processDataByFilters!==void 0?Bn.API.processDataByFilters($e,zt):{data:$e,reverseChain:[]}).reverseChain+(Array.isArray(Wt)?Wt.join(" "):Wt.toString());if($r.data.length!==0&&(Sn.push({key:"Length",value:$r.data.length}),ha===!0&&Sn.push({key:"Length1",value:Da})),Nn.length!=0)if(Nn.split("/").length-1==1)Sn.push({key:"Filter",value:Nn});else{Sn.push({key:"Filter",value:"["+Nn+"]"});for(var pi=0;pi<Sn.length;pi+=1)if(Sn[pi].key==="DecodeParms"){for(var Ss=[],Cs=0;Cs<$r.reverseChain.split("/").length-1;Cs+=1)Ss.push("null");Ss.push(Sn[pi].value),Sn[pi].value="["+Ss.join(" ")+"]"}}St("<<");for(var Xs=0;Xs<Sn.length;Xs++)St("/"+Sn[Xs].key+" "+Sn[Xs].value);St(">>"),$r.data.length!==0&&(St("stream"),St(wr($r.data)),St("endstream"))},Nr=U.__private__.putPage=function(oe){var $e=oe.number,zt=oe.data,Wt=oe.objId,ha=oe.contentsObjId;Pt(Wt,!0),St("<</Type /Page"),St("/Parent "+oe.rootDictionaryObjId+" 0 R"),St("/Resources "+oe.resourceDictionaryObjId+" 0 R"),St("/MediaBox ["+parseFloat(me(oe.mediaBox.bottomLeftX))+" "+parseFloat(me(oe.mediaBox.bottomLeftY))+" "+me(oe.mediaBox.topRightX)+" "+me(oe.mediaBox.topRightY)+"]"),oe.cropBox!==null&&St("/CropBox ["+me(oe.cropBox.bottomLeftX)+" "+me(oe.cropBox.bottomLeftY)+" "+me(oe.cropBox.topRightX)+" "+me(oe.cropBox.topRightY)+"]"),oe.bleedBox!==null&&St("/BleedBox ["+me(oe.bleedBox.bottomLeftX)+" "+me(oe.bleedBox.bottomLeftY)+" "+me(oe.bleedBox.topRightX)+" "+me(oe.bleedBox.topRightY)+"]"),oe.trimBox!==null&&St("/TrimBox ["+me(oe.trimBox.bottomLeftX)+" "+me(oe.trimBox.bottomLeftY)+" "+me(oe.trimBox.topRightX)+" "+me(oe.trimBox.topRightY)+"]"),oe.artBox!==null&&St("/ArtBox ["+me(oe.artBox.bottomLeftX)+" "+me(oe.artBox.bottomLeftY)+" "+me(oe.artBox.topRightX)+" "+me(oe.artBox.topRightY)+"]"),typeof oe.userUnit=="number"&&oe.userUnit!==1&&St("/UserUnit "+oe.userUnit),ui.publish("putPage",{objId:Wt,pageContext:hn[$e],pageNumber:$e,page:zt}),St("/Contents "+ha+" 0 R"),St(">>"),St("endobj");var Da=zt.join(`
`);return de===ne.ADVANCED&&(Da+=`
Q`),Pt(ha,!0),Ar({data:Da,filters:Ba(),objectId:ha}),St("endobj"),Wt},Vr=U.__private__.putPages=function(){var oe,$e,zt=[];for(oe=1;oe<=Ei;oe++)hn[oe].objId=kt(),hn[oe].contentsObjId=kt();for(oe=1;oe<=Ei;oe++)zt.push(Nr({number:oe,data:ea[oe],objId:hn[oe].objId,contentsObjId:hn[oe].contentsObjId,mediaBox:hn[oe].mediaBox,cropBox:hn[oe].cropBox,bleedBox:hn[oe].bleedBox,trimBox:hn[oe].trimBox,artBox:hn[oe].artBox,userUnit:hn[oe].userUnit,rootDictionaryObjId:Ht,resourceDictionaryObjId:Zt}));Pt(Ht,!0),St("<</Type /Pages");var Wt="/Kids [";for($e=0;$e<Ei;$e++)Wt+=zt[$e]+" 0 R ";St(Wt+"]"),St("/Count "+Ei),St(">>"),St("endobj"),ui.publish("postPutPages")},Gr=function(oe){ui.publish("putFont",{font:oe,out:St,newObject:Ct,putStream:Ar}),oe.isAlreadyPutted!==!0&&(oe.objectNumber=Ct(),St("<<"),St("/Type /Font"),St("/BaseFont /"+v_(oe.postScriptName)),St("/Subtype /Type1"),typeof oe.encoding=="string"&&St("/Encoding /"+oe.encoding),St("/FirstChar 32"),St("/LastChar 255"),St(">>"),St("endobj"))},zn=function(){for(var oe in Mn)Mn.hasOwnProperty(oe)&&(z===!1||z===!0&&k.hasOwnProperty(oe))&&Gr(Mn[oe])},Xn=function(oe){oe.objectNumber=Ct();var $e=[];$e.push({key:"Type",value:"/XObject"}),$e.push({key:"Subtype",value:"/Form"}),$e.push({key:"BBox",value:"["+[me(oe.x),me(oe.y),me(oe.x+oe.width),me(oe.y+oe.height)].join(" ")+"]"}),$e.push({key:"Matrix",value:"["+oe.matrix.toString()+"]"});var zt=oe.pages[1].join(`
`);Ar({data:zt,additionalKeyValues:$e,objectId:oe.objectNumber}),St("endobj")},qr=function(){for(var oe in Fs)Fs.hasOwnProperty(oe)&&Xn(Fs[oe])},yn=function(oe,$e){var zt,Wt=[],ha=1/($e-1);for(zt=0;zt<1;zt+=ha)Wt.push(zt);if(Wt.push(1),oe[0].offset!=0){var Da={offset:0,color:oe[0].color};oe.unshift(Da)}if(oe[oe.length-1].offset!=1){var ar={offset:1,color:oe[oe.length-1].color};oe.push(ar)}for(var wr="",$r=0,Sn=0;Sn<Wt.length;Sn++){for(zt=Wt[Sn];zt>oe[$r+1].offset;)$r++;var Nn=oe[$r].offset,pi=(zt-Nn)/(oe[$r+1].offset-Nn),Ss=oe[$r].color,Cs=oe[$r+1].color;wr+=lt(Math.round((1-pi)*Ss[0]+pi*Cs[0]).toString(16))+lt(Math.round((1-pi)*Ss[1]+pi*Cs[1]).toString(16))+lt(Math.round((1-pi)*Ss[2]+pi*Cs[2]).toString(16))}return wr.trim()},Hr=function(oe,$e){$e||($e=21);var zt=Ct(),Wt=yn(oe.colors,$e),ha=[];ha.push({key:"FunctionType",value:"0"}),ha.push({key:"Domain",value:"[0.0 1.0]"}),ha.push({key:"Size",value:"["+$e+"]"}),ha.push({key:"BitsPerSample",value:"8"}),ha.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ha.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ar({data:Wt,additionalKeyValues:ha,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:zt}),St("endobj"),oe.objectNumber=Ct(),St("<< /ShadingType "+oe.type),St("/ColorSpace /DeviceRGB");var Da="/Coords ["+me(parseFloat(oe.coords[0]))+" "+me(parseFloat(oe.coords[1]))+" ";oe.type===2?Da+=me(parseFloat(oe.coords[2]))+" "+me(parseFloat(oe.coords[3])):Da+=me(parseFloat(oe.coords[2]))+" "+me(parseFloat(oe.coords[3]))+" "+me(parseFloat(oe.coords[4]))+" "+me(parseFloat(oe.coords[5])),St(Da+="]"),oe.matrix&&St("/Matrix ["+oe.matrix.toString()+"]"),St("/Function "+zt+" 0 R"),St("/Extend [true true]"),St(">>"),St("endobj")},In=function(oe,$e){var zt=kt(),Wt=Ct();$e.push({resourcesOid:zt,objectOid:Wt}),oe.objectNumber=Wt;var ha=[];ha.push({key:"Type",value:"/Pattern"}),ha.push({key:"PatternType",value:"1"}),ha.push({key:"PaintType",value:"1"}),ha.push({key:"TilingType",value:"1"}),ha.push({key:"BBox",value:"["+oe.boundingBox.map(me).join(" ")+"]"}),ha.push({key:"XStep",value:me(oe.xStep)}),ha.push({key:"YStep",value:me(oe.yStep)}),ha.push({key:"Resources",value:zt+" 0 R"}),oe.matrix&&ha.push({key:"Matrix",value:"["+oe.matrix.toString()+"]"}),Ar({data:oe.stream,additionalKeyValues:ha,objectId:oe.objectNumber}),St("endobj")},Ni=function(oe){var $e;for($e in Er)Er.hasOwnProperty($e)&&(Er[$e]instanceof IA?Hr(Er[$e]):Er[$e]instanceof E_&&In(Er[$e],oe))},Bi=function(oe){for(var $e in oe.objectNumber=Ct(),St("<<"),oe)switch($e){case"opacity":St("/ca "+Oe(oe[$e]));break;case"stroke-opacity":St("/CA "+Oe(oe[$e]))}St(">>"),St("endobj")},_s=function(){var oe;for(oe in ki)ki.hasOwnProperty(oe)&&Bi(ki[oe])},vs=function(){for(var oe in St("/XObject <<"),Fs)Fs.hasOwnProperty(oe)&&Fs[oe].objectNumber>=0&&St("/"+oe+" "+Fs[oe].objectNumber+" 0 R");ui.publish("putXobjectDict"),St(">>")},Oo=function(){lo.oid=Ct(),St("<<"),St("/Filter /Standard"),St("/V "+lo.v),St("/R "+lo.r),St("/U <"+lo.toHexString(lo.U)+">"),St("/O <"+lo.toHexString(lo.O)+">"),St("/P "+lo.P),St(">>"),St("endobj")},ws=function(){for(var oe in St("/Font <<"),Mn)Mn.hasOwnProperty(oe)&&(z===!1||z===!0&&k.hasOwnProperty(oe))&&St("/"+oe+" "+Mn[oe].objectNumber+" 0 R");St(">>")},Us=function(){if(Object.keys(Er).length>0){for(var oe in St("/Shading <<"),Er)Er.hasOwnProperty(oe)&&Er[oe]instanceof IA&&Er[oe].objectNumber>=0&&St("/"+oe+" "+Er[oe].objectNumber+" 0 R");ui.publish("putShadingPatternDict"),St(">>")}},nc=function(oe){if(Object.keys(Er).length>0){for(var $e in St("/Pattern <<"),Er)Er.hasOwnProperty($e)&&Er[$e]instanceof U.TilingPattern&&Er[$e].objectNumber>=0&&Er[$e].objectNumber<oe&&St("/"+$e+" "+Er[$e].objectNumber+" 0 R");ui.publish("putTilingPatternDict"),St(">>")}},Ko=function(){if(Object.keys(ki).length>0){var oe;for(oe in St("/ExtGState <<"),ki)ki.hasOwnProperty(oe)&&ki[oe].objectNumber>=0&&St("/"+oe+" "+ki[oe].objectNumber+" 0 R");ui.publish("putGStateDict"),St(">>")}},Vi=function(oe){Pt(oe.resourcesOid,!0),St("<<"),St("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ws(),Us(),nc(oe.objectOid),Ko(),vs(),St(">>"),St("endobj")},kl=function(){var oe=[];zn(),_s(),qr(),Ni(oe),ui.publish("putResources"),oe.forEach(Vi),Vi({resourcesOid:Zt,objectOid:Number.MAX_SAFE_INTEGER}),ui.publish("postPutResources")},Do=function(){ui.publish("putAdditionalObjects");for(var oe=0;oe<ve.length;oe++){var $e=ve[oe];Pt($e.objId,!0),St($e.content),St("endobj")}ui.publish("postPutAdditionalObjects")},yd=function(oe){mn[oe.fontName]=mn[oe.fontName]||{},mn[oe.fontName][oe.fontStyle]=oe.id},Nc=function(oe,$e,zt,Wt,ha){var Da={id:"F"+(Object.keys(Mn).length+1).toString(10),postScriptName:oe,fontName:$e,fontStyle:zt,encoding:Wt,isStandardFont:ha||!1,metadata:{}};return ui.publish("addFont",{font:Da,instance:this}),Mn[Da.id]=Da,yd(Da),Da.id},Qd=function(oe){for(var $e=0,zt=za.length;$e<zt;$e++){var Wt=Nc.call(this,oe[$e][0],oe[$e][1],oe[$e][2],za[$e][3],!0);z===!1&&(k[Wt]=!0);var ha=oe[$e][0].split("-");yd({id:Wt,fontName:ha[0],fontStyle:ha[1]||""})}ui.publish("addFonts",{fonts:Mn,dictionary:mn})},uu=function(oe){return oe.foo=function(){try{return oe.apply(this,arguments)}catch(Wt){var $e=Wt.stack||"";~$e.indexOf(" at ")&&($e=$e.split(" at ")[1]);var zt="Error in function "+$e.split(`
`)[0].split("<")[0]+": "+Wt.message;if(!$n.console)throw new Error(zt);$n.console.error(zt,Wt),$n.alert&&alert(zt)}},oe.foo.bar=oe,oe.foo},Vc=function(oe,$e){var zt,Wt,ha,Da,ar,wr,$r,Sn,Nn;if(ha=($e=$e||{}).sourceEncoding||"Unicode",ar=$e.outputEncoding,($e.autoencode||ar)&&Mn[Wa].metadata&&Mn[Wa].metadata[ha]&&Mn[Wa].metadata[ha].encoding&&(Da=Mn[Wa].metadata[ha].encoding,!ar&&Mn[Wa].encoding&&(ar=Mn[Wa].encoding),!ar&&Da.codePages&&(ar=Da.codePages[0]),typeof ar=="string"&&(ar=Da[ar]),ar)){for($r=!1,wr=[],zt=0,Wt=oe.length;zt<Wt;zt++)(Sn=ar[oe.charCodeAt(zt)])?wr.push(String.fromCharCode(Sn)):wr.push(oe[zt]),wr[zt].charCodeAt(0)>>8&&($r=!0);oe=wr.join("")}for(zt=oe.length;$r===void 0&&zt!==0;)oe.charCodeAt(zt-1)>>8&&($r=!0),zt--;if(!$r)return oe;for(wr=$e.noBOM?[]:[254,255],zt=0,Wt=oe.length;zt<Wt;zt++){if((Nn=(Sn=oe.charCodeAt(zt))>>8)>>8)throw new Error("Character at position "+zt+" of string '"+oe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wr.push(Nn),wr.push(Sn-(Nn<<8))}return String.fromCharCode.apply(void 0,wr)},ul=U.__private__.pdfEscape=U.pdfEscape=function(oe,$e){return Vc(oe,$e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ys=U.__private__.beginPage=function(oe){ea[++Ei]=[],hn[Ei]={objId:0,contentsObjId:0,userUnit:Number(n),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(oe[0]),topRightY:Number(oe[1])}},cu(Ei),la(ea[ze])},Mo=function(oe,$e){var zt,Wt,ha;switch(a=$e||a,typeof oe=="string"&&(zt=Q(oe.toLowerCase()),Array.isArray(zt)&&(Wt=zt[0],ha=zt[1])),Array.isArray(oe)&&(Wt=oe[0]*ca,ha=oe[1]*ca),isNaN(Wt)&&(Wt=s[0],ha=s[1]),(Wt>14400||ha>14400)&&(no.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Wt=Math.min(14400,Wt),ha=Math.min(14400,ha)),s=[Wt,ha],a.substr(0,1)){case"l":ha>Wt&&(s=[ha,Wt]);break;case"p":Wt>ha&&(s=[ha,Wt])}Ys(s),_d(Ci),St(Rl),Nh!==0&&St(Nh+" J"),Uo!==0&&St(Uo+" j"),ui.publish("addPage",{pageNumber:Ei})},Bl=function(oe){oe>0&&oe<=Ei&&(ea.splice(oe,1),hn.splice(oe,1),Ei--,ze>Ei&&(ze=Ei),this.setPage(ze))},cu=function(oe){oe>0&&oe<=Ei&&(ze=oe)},oo=U.__private__.getNumberOfPages=U.getNumberOfPages=function(){return ea.length-1},Io=function(oe,$e,zt){var Wt,ha=void 0;return zt=zt||{},oe=oe!==void 0?oe:Mn[Wa].fontName,$e=$e!==void 0?$e:Mn[Wa].fontStyle,Wt=oe.toLowerCase(),mn[Wt]!==void 0&&mn[Wt][$e]!==void 0?ha=mn[Wt][$e]:mn[oe]!==void 0&&mn[oe][$e]!==void 0?ha=mn[oe][$e]:zt.disableWarning===!1&&no.warn("Unable to look up font label for font '"+oe+"', '"+$e+"'. Refer to getFontList() for available fonts."),ha||zt.noFallback||(ha=mn.times[$e])==null&&(ha=mn.times.normal),ha},gd=U.__private__.putInfo=function(){var oe=Ct(),$e=function(Wt){return Wt};for(var zt in E!==null&&($e=lo.encryptor(oe,0)),St("<<"),St("/Producer ("+ul($e("jsPDF "+Bn.version))+")"),va)va.hasOwnProperty(zt)&&va[zt]&&St("/"+zt.substr(0,1).toUpperCase()+zt.substr(1)+" ("+ul($e(va[zt]))+")");St("/CreationDate ("+ul($e(Ie))+")"),St(">>"),St("endobj")},Fu=U.__private__.putCatalog=function(oe){var $e=(oe=oe||{}).rootDictionaryObjId||Ht;switch(Ct(),St("<<"),St("/Type /Catalog"),St("/Pages "+$e+" 0 R"),cr||(cr="fullwidth"),cr){case"fullwidth":St("/OpenAction [3 0 R /FitH null]");break;case"fullheight":St("/OpenAction [3 0 R /FitV null]");break;case"fullpage":St("/OpenAction [3 0 R /Fit]");break;case"original":St("/OpenAction [3 0 R /XYZ null null 1]");break;default:var zt=""+cr;zt.substr(zt.length-1)==="%"&&(cr=parseInt(cr)/100),typeof cr=="number"&&St("/OpenAction [3 0 R /XYZ null null "+Oe(cr)+"]")}switch(pn||(pn="continuous"),pn){case"continuous":St("/PageLayout /OneColumn");break;case"single":St("/PageLayout /SinglePage");break;case"two":case"twoleft":St("/PageLayout /TwoColumnLeft");break;case"tworight":St("/PageLayout /TwoColumnRight")}ka&&St("/PageMode /"+ka),ui.publish("putCatalog"),St(">>"),St("endobj")},cf=U.__private__.putTrailer=function(){St("trailer"),St("<<"),St("/Size "+(vt+1)),St("/Root "+vt+" 0 R"),St("/Info "+(vt-1)+" 0 R"),E!==null&&St("/Encrypt "+lo.oid+" 0 R"),St("/ID [ <"+Ue+"> <"+Ue+"> ]"),St(">>")},Gl=U.__private__.putHeader=function(){St("%PDF-"+q),St("%ºß¬à")},Lo=U.__private__.putXRef=function(){var oe="0000000000";St("xref"),St("0 "+(vt+1)),St("0000000000 65535 f ");for(var $e=1;$e<=vt;$e++)typeof Ot[$e]=="function"?St((oe+Ot[$e]()).slice(-10)+" 00000 n "):Ot[$e]!==void 0?St((oe+Ot[$e]).slice(-10)+" 00000 n "):St("0000000000 00000 n ")},Uu=U.__private__.buildDocument=function(){Bt(),la(dt),ui.publish("buildDocument"),Gl(),Vr(),Do(),kl(),E!==null&&Oo(),gd(),Fu();var oe=pt;return Lo(),cf(),St("startxref"),St(""+oe),St("%%EOF"),la(ea[ze]),dt.join(`
`)},eh=U.__private__.getBlob=function(oe){return new Blob([Va(oe)],{type:"application/pdf"})},Wo=U.output=U.__private__.output=uu(function(oe,$e){switch(typeof($e=$e||{})=="string"?$e={filename:$e}:$e.filename=$e.filename||"generated.pdf",oe){case void 0:return Uu();case"save":U.save($e.filename);break;case"arraybuffer":return Va(Uu());case"blob":return eh(Uu());case"bloburi":case"bloburl":if($n.URL!==void 0&&typeof $n.URL.createObjectURL=="function")return $n.URL&&$n.URL.createObjectURL(eh(Uu()))||void 0;no.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var zt="",Wt=Uu();try{zt=zM(Wt)}catch{zt=zM(unescape(encodeURIComponent(Wt)))}return"data:application/pdf;filename="+$e.filename+";base64,"+zt;case"pdfobjectnewwindow":if(Object.prototype.toString.call($n)==="[object Window]"){var ha="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Da=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$e.pdfObjectUrl&&(ha=$e.pdfObjectUrl,Da="");var ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ha+'"'+Da+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($e)+");<\/script></body></html>",wr=$n.open();return wr!==null&&wr.document.write(ar),wr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call($n)==="[object Window]"){var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$e.filename+'" width="500px" height="400px" /></body></html>',Sn=$n.open();if(Sn!==null){Sn.document.write($r);var Nn=this;Sn.document.documentElement.querySelector("#pdfViewer").onload=function(){Sn.document.title=$e.filename,Sn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nn.output("bloburl"))}}return Sn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call($n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var pi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$e)+'"></iframe></body></html>',Ss=$n.open();if(Ss!==null&&(Ss.document.write(pi),Ss.document.title=$e.filename),Ss||typeof safari>"u")return Ss;break;case"datauri":case"dataurl":return $n.document.location.href=this.output("datauristring",$e);default:return null}}),bn=function(oe){return Array.isArray(Ec)===!0&&Ec.indexOf(oe)>-1};switch(r){case"pt":ca=1;break;case"mm":ca=72/25.4;break;case"cm":ca=72/2.54;break;case"in":ca=72;break;case"px":ca=bn("px_scaling")==1?.75:96/72;break;case"pc":case"em":ca=12;break;case"ex":ca=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ca=r}var lo=null;qe(),ke();var hr=function(oe){return E!==null?lo.encryptor(oe,0):function($e){return $e}},zc=U.__private__.getPageInfo=U.getPageInfo=function(oe){if(isNaN(oe)||oe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:hn[oe].objId,pageNumber:oe,pageContext:hn[oe]}},gn=U.__private__.getPageInfoByObjId=function(oe){if(isNaN(oe)||oe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $e in hn)if(hn[$e].objId===oe)break;return zc($e)},th=U.__private__.getCurrentPageInfo=U.getCurrentPageInfo=function(){return{objId:hn[ze].objId,pageNumber:ze,pageContext:hn[ze]}};U.addPage=function(){return Mo.apply(this,arguments),this},U.setPage=function(){return cu.apply(this,arguments),la.call(this,ea[ze]),this},U.insertPage=function(oe){return this.addPage(),this.movePage(ze,oe),this},U.movePage=function(oe,$e){var zt,Wt;if(oe>$e){zt=ea[oe],Wt=hn[oe];for(var ha=oe;ha>$e;ha--)ea[ha]=ea[ha-1],hn[ha]=hn[ha-1];ea[$e]=zt,hn[$e]=Wt,this.setPage($e)}else if(oe<$e){zt=ea[oe],Wt=hn[oe];for(var Da=oe;Da<$e;Da++)ea[Da]=ea[Da+1],hn[Da]=hn[Da+1];ea[$e]=zt,hn[$e]=Wt,this.setPage($e)}return this},U.deletePage=function(){return Bl.apply(this,arguments),this},U.__private__.text=U.text=function(oe,$e,zt,Wt,ha){var Da,ar,wr,$r,Sn,Nn,pi,Ss,Cs,Xs=(Wt=Wt||{}).scope||this;if(typeof oe=="number"&&typeof $e=="number"&&(typeof zt=="string"||Array.isArray(zt))){var Qi=zt;zt=$e,$e=oe,oe=Qi}if(arguments[3]instanceof De?(Ae("The transform parameter of text() with a Matrix value"),Cs=ha):(wr=arguments[4],$r=arguments[5],Is(pi=arguments[3])==="object"&&pi!==null||(typeof wr=="string"&&($r=wr,wr=null),typeof pi=="string"&&($r=pi,pi=null),typeof pi=="number"&&(wr=pi,pi=null),Wt={flags:pi,angle:wr,align:$r})),isNaN($e)||isNaN(zt)||oe==null)throw new Error("Invalid arguments passed to jsPDF.text");if(oe.length===0)return Xs;var br="",ir=!1,cl=typeof Wt.lineHeightFactor=="number"?Wt.lineHeightFactor:Li,Rr=Xs.internal.scaleFactor;function pu(Yn){return Yn=Yn.split("	").join(Array(Wt.TabLen||9).join(" ")),ul(Yn,pi)}function Hl(Yn){for(var ti,Zi=Yn.concat(),ns=[],Wl=Zi.length;Wl--;)typeof(ti=Zi.shift())=="string"?ns.push(ti):Array.isArray(Yn)&&(ti.length===1||ti[1]===void 0&&ti[2]===void 0)?ns.push(ti[0]):ns.push([ti[0],ti[1],ti[2]]);return ns}function _r(Yn,ti){var Zi;if(typeof Yn=="string")Zi=ti(Yn)[0];else if(Array.isArray(Yn)){for(var ns,Wl,Fc=Yn.concat(),Jo=[],Yl=Fc.length;Yl--;)typeof(ns=Fc.shift())=="string"?Jo.push(ti(ns)[0]):Array.isArray(ns)&&typeof ns[0]=="string"&&(Wl=ti(ns[0],ns[1],ns[2]),Jo.push([Wl[0],Wl[1],Wl[2]]));Zi=Jo}return Zi}var rh=!1,$l=!0;if(typeof oe=="string")rh=!0;else if(Array.isArray(oe)){var uc=oe.concat();ar=[];for(var Rd,bs=uc.length;bs--;)(typeof(Rd=uc.shift())!="string"||Array.isArray(Rd)&&typeof Rd[0]!="string")&&($l=!1);rh=$l}if(rh===!1)throw new Error('Type of text must be string or Array. "'+oe+'" is not recognized.');typeof oe=="string"&&(oe=oe.match(/[\r?\n]/)?oe.split(/\r\n|\r|\n/g):[oe]);var gi=nr/Xs.internal.scaleFactor,cc=gi*(cl-1);switch(Wt.baseline){case"bottom":zt-=cc;break;case"top":zt+=gi-cc;break;case"hanging":zt+=gi-2*cc;break;case"middle":zt+=gi/2-cc}if((Nn=Wt.maxWidth||0)>0&&(typeof oe=="string"?oe=Xs.splitTextToSize(oe,Nn):Object.prototype.toString.call(oe)==="[object Array]"&&(oe=oe.reduce(function(Yn,ti){return Yn.concat(Xs.splitTextToSize(ti,Nn))},[]))),Da={text:oe,x:$e,y:zt,options:Wt,mutex:{pdfEscape:ul,activeFontKey:Wa,fonts:Mn,activeFontSize:nr}},ui.publish("preProcessText",Da),oe=Da.text,wr=(Wt=Da.options).angle,!(Cs instanceof De)&&wr&&typeof wr=="number"){wr*=Math.PI/180,Wt.rotationDirection===0&&(wr=-wr),de===ne.ADVANCED&&(wr=-wr);var Na=Math.cos(wr),Td=Math.sin(wr);Cs=new De(Na,Td,-Td,Na,0,0)}else wr&&wr instanceof De&&(Cs=wr);de!==ne.ADVANCED||Cs||(Cs=At),(Sn=Wt.charSpace||jl)!==void 0&&(br+=me(we(Sn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ss=Wt.horizontalScale)!==void 0&&(br+=me(100*Ss)+` Tz
`),Wt.lang;var Zs=-1,co=Wt.renderingMode!==void 0?Wt.renderingMode:Wt.stroke,ff=Xs.internal.getCurrentPageInfo().pageContext;switch(co){case 0:case!1:case"fill":Zs=0;break;case 1:case!0:case"stroke":Zs=1;break;case 2:case"fillThenStroke":Zs=2;break;case 3:case"invisible":Zs=3;break;case 4:case"fillAndAddForClipping":Zs=4;break;case 5:case"strokeAndAddPathForClipping":Zs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Zs=6;break;case 7:case"addToPathForClipping":Zs=7}var Vh=ff.usedRenderingMode!==void 0?ff.usedRenderingMode:-1;Zs!==-1?br+=Zs+` Tr
`:Vh!==-1&&(br+=`0 Tr
`),Zs!==-1&&(ff.usedRenderingMode=Zs),$r=Wt.align||"left";var ho,Os=nr*cl,Tl=Xs.internal.pageSize.getWidth(),Oc=Mn[Wa];Sn=Wt.charSpace||jl,Nn=Wt.maxWidth||0,pi=Object.assign({autoencode:!0,noBOM:!0},Wt.flags);var Kl=[],nh=function(Yn){return Xs.getStringUnitWidth(Yn,{font:Oc,charSpace:Sn,fontSize:nr,doKerning:!1})*nr/Rr};if(Object.prototype.toString.call(oe)==="[object Array]"){var Sl;ar=Hl(oe),$r!=="left"&&(ho=ar.map(nh));var Ro,Sd=0;if($r==="right"){$e-=ho[0],oe=[],bs=ar.length;for(var Dc=0;Dc<bs;Dc++)Dc===0?(Ro=Yo($e),Sl=us(zt)):(Ro=we(Sd-ho[Dc]),Sl=-Os),oe.push([ar[Dc],Ro,Sl]),Sd=ho[Dc]}else if($r==="center"){$e-=ho[0]/2,oe=[],bs=ar.length;for(var Cl=0;Cl<bs;Cl++)Cl===0?(Ro=Yo($e),Sl=us(zt)):(Ro=we((Sd-ho[Cl])/2),Sl=-Os),oe.push([ar[Cl],Ro,Sl]),Sd=ho[Cl]}else if($r==="left"){oe=[],bs=ar.length;for(var dc=0;dc<bs;dc++)oe.push(ar[dc])}else if($r==="justify"&&Oc.encoding==="Identity-H"){oe=[],bs=ar.length,Nn=Nn!==0?Nn:Tl;for(var mu=0,ji=0;ji<bs;ji++)if(Sl=ji===0?us(zt):-Os,Ro=ji===0?Yo($e):mu,ji<bs-1){var pf=we((Nn-ho[ji])/(ar[ji].split(" ").length-1)),Js=ar[ji].split(" ");oe.push([Js[0]+" ",Ro,Sl]),mu=0;for(var fo=1;fo<Js.length;fo++){var Cd=(nh(Js[fo-1]+" "+Js[fo])-nh(Js[fo]))*Rr+pf;fo==Js.length-1?oe.push([Js[fo],Cd,0]):oe.push([Js[fo]+" ",Cd,0]),mu-=Cd}}else oe.push([ar[ji],Ro,Sl]);oe.push(["",mu,0])}else{if($r!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(oe=[],bs=ar.length,Nn=Nn!==0?Nn:Tl,ji=0;ji<bs;ji++)Sl=ji===0?us(zt):-Os,Ro=ji===0?Yo($e):0,ji<bs-1?Kl.push(me(we((Nn-ho[ji])/(ar[ji].split(" ").length-1)))):Kl.push(0),oe.push([ar[ji],Ro,Sl])}}var bd=typeof Wt.R2L=="boolean"?Wt.R2L:Pr;bd===!0&&(oe=_r(oe,function(Yn,ti,Zi){return[Yn.split("").reverse().join(""),ti,Zi]})),Da={text:oe,x:$e,y:zt,options:Wt,mutex:{pdfEscape:ul,activeFontKey:Wa,fonts:Mn,activeFontSize:nr}},ui.publish("postProcessText",Da),oe=Da.text,ir=Da.mutex.isHex||!1;var Qs=Mn[Wa].encoding;Qs!=="WinAnsiEncoding"&&Qs!=="StandardEncoding"||(oe=_r(oe,function(Yn,ti,Zi){return[pu(Yn),ti,Zi]})),ar=Hl(oe),oe=[];for(var Mc,hc,yu,Ic=0,gu=1,Lc=Array.isArray(ar[0])?gu:Ic,fc="",Bu=function(Yn,ti,Zi){var ns="";return Zi instanceof De?(Zi=typeof Wt.angle=="number"?at(Zi,new De(1,0,0,1,Yn,ti)):at(new De(1,0,0,1,Yn,ti),Zi),de===ne.ADVANCED&&(Zi=at(new De(1,0,0,-1,0,0),Zi)),ns=Zi.join(" ")+` Tm
`):ns=me(Yn)+" "+me(ti)+` Td
`,ns},ko=0;ko<ar.length;ko++){switch(fc="",Lc){case gu:yu=(ir?"<":"(")+ar[ko][0]+(ir?">":")"),Mc=parseFloat(ar[ko][1]),hc=parseFloat(ar[ko][2]);break;case Ic:yu=(ir?"<":"(")+ar[ko]+(ir?">":")"),Mc=Yo($e),hc=us(zt)}Kl!==void 0&&Kl[ko]!==void 0&&(fc=Kl[ko]+` Tw
`),ko===0?oe.push(fc+Bu(Mc,hc,Cs)+yu):Lc===Ic?oe.push(fc+yu):Lc===gu&&oe.push(fc+Bu(Mc,hc,Cs)+yu)}oe=Lc===Ic?oe.join(` Tj
T* `):oe.join(` Tj
`),oe+=` Tj
`;var cs=`BT
/`;return cs+=Wa+" "+nr+` Tf
`,cs+=me(nr*cl)+` TL
`,cs+=Gi+`
`,cs+=br,cs+=oe,St(cs+="ET"),k[Wa]=!0,Xs};var Tn=U.__private__.clip=U.clip=function(oe){return St(oe==="evenodd"?"W*":"W"),this};U.clipEvenOdd=function(){return Tn("evenodd")},U.__private__.discardPath=U.discardPath=function(){return St("n"),this};var ks=U.__private__.isValidStyle=function(oe){var $e=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(oe)!==-1&&($e=!0),$e};U.__private__.setDefaultPathOperation=U.setDefaultPathOperation=function(oe){return ks(oe)&&(T=oe),this};var ic=U.__private__.getStyle=U.getStyle=function(oe){var $e=T;switch(oe){case"D":case"S":$e="S";break;case"F":$e="f";break;case"FD":case"DF":$e="B";break;case"f":case"f*":case"B":case"B*":$e=oe}return $e},sc=U.close=function(){return St("h"),this};U.stroke=function(){return St("S"),this},U.fill=function(oe){return Xa("f",oe),this},U.fillEvenOdd=function(oe){return Xa("f*",oe),this},U.fillStroke=function(oe){return Xa("B",oe),this},U.fillStrokeEvenOdd=function(oe){return Xa("B*",oe),this};var Xa=function(oe,$e){Is($e)==="object"?Bs($e,oe):St(oe)},an=function(oe){oe===null||de===ne.ADVANCED&&oe===void 0||(oe=ic(oe),St(oe))};function An(oe,$e,zt,Wt,ha){var Da=new E_($e||this.boundingBox,zt||this.xStep,Wt||this.yStep,this.gState,ha||this.matrix);Da.stream=this.stream;var ar=oe+"$$"+this.cloneIndex+++"$$";return mt(ar,Da),Da}var Bs=function(oe,$e){var zt=As[oe.key],Wt=Er[zt];if(Wt instanceof IA)St("q"),St(Ad($e)),Wt.gState&&U.setGState(Wt.gState),St(oe.matrix.toString()+" cm"),St("/"+zt+" sh"),St("Q");else if(Wt instanceof E_){var ha=new De(1,0,0,-1,0,ql());oe.matrix&&(ha=ha.multiply(oe.matrix||At),zt=An.call(Wt,oe.key,oe.boundingBox,oe.xStep,oe.yStep,ha).id),St("q"),St("/Pattern cs"),St("/"+zt+" scn"),Wt.gState&&U.setGState(Wt.gState),St($e),St("Q")}},Ad=function(oe){switch(oe){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ln=U.moveTo=function(oe,$e){return St(me(we(oe))+" "+me(Ve($e))+" m"),this},Fo=U.lineTo=function(oe,$e){return St(me(we(oe))+" "+me(Ve($e))+" l"),this},du=U.curveTo=function(oe,$e,zt,Wt,ha,Da){return St([me(we(oe)),me(Ve($e)),me(we(zt)),me(Ve(Wt)),me(we(ha)),me(Ve(Da)),"c"].join(" ")),this};U.__private__.line=U.line=function(oe,$e,zt,Wt,ha){if(isNaN(oe)||isNaN($e)||isNaN(zt)||isNaN(Wt)||!ks(ha))throw new Error("Invalid arguments passed to jsPDF.line");return de===ne.COMPAT?this.lines([[zt-oe,Wt-$e]],oe,$e,[1,1],ha||"S"):this.lines([[zt-oe,Wt-$e]],oe,$e,[1,1]).stroke()},U.__private__.lines=U.lines=function(oe,$e,zt,Wt,ha,Da){var ar,wr,$r,Sn,Nn,pi,Ss,Cs,Xs,Qi,br,ir;if(typeof oe=="number"&&(ir=zt,zt=$e,$e=oe,oe=ir),Wt=Wt||[1,1],Da=Da||!1,isNaN($e)||isNaN(zt)||!Array.isArray(oe)||!Array.isArray(Wt)||!ks(ha)||typeof Da!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ln($e,zt),ar=Wt[0],wr=Wt[1],Sn=oe.length,Qi=$e,br=zt,$r=0;$r<Sn;$r++)(Nn=oe[$r]).length===2?(Qi=Nn[0]*ar+Qi,br=Nn[1]*wr+br,Fo(Qi,br)):(pi=Nn[0]*ar+Qi,Ss=Nn[1]*wr+br,Cs=Nn[2]*ar+Qi,Xs=Nn[3]*wr+br,Qi=Nn[4]*ar+Qi,br=Nn[5]*wr+br,du(pi,Ss,Cs,Xs,Qi,br));return Da&&sc(),an(ha),this},U.path=function(oe){for(var $e=0;$e<oe.length;$e++){var zt=oe[$e],Wt=zt.c;switch(zt.op){case"m":ln(Wt[0],Wt[1]);break;case"l":Fo(Wt[0],Wt[1]);break;case"c":du.apply(this,Wt);break;case"h":sc()}}return this},U.__private__.rect=U.rect=function(oe,$e,zt,Wt,ha){if(isNaN(oe)||isNaN($e)||isNaN(zt)||isNaN(Wt)||!ks(ha))throw new Error("Invalid arguments passed to jsPDF.rect");return de===ne.COMPAT&&(Wt=-Wt),St([me(we(oe)),me(Ve($e)),me(we(zt)),me(we(Wt)),"re"].join(" ")),an(ha),this},U.__private__.triangle=U.triangle=function(oe,$e,zt,Wt,ha,Da,ar){if(isNaN(oe)||isNaN($e)||isNaN(zt)||isNaN(Wt)||isNaN(ha)||isNaN(Da)||!ks(ar))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[zt-oe,Wt-$e],[ha-zt,Da-Wt],[oe-ha,$e-Da]],oe,$e,[1,1],ar,!0),this},U.__private__.roundedRect=U.roundedRect=function(oe,$e,zt,Wt,ha,Da,ar){if(isNaN(oe)||isNaN($e)||isNaN(zt)||isNaN(Wt)||isNaN(ha)||isNaN(Da)||!ks(ar))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wr=4/3*(Math.SQRT2-1);return ha=Math.min(ha,.5*zt),Da=Math.min(Da,.5*Wt),this.lines([[zt-2*ha,0],[ha*wr,0,ha,Da-Da*wr,ha,Da],[0,Wt-2*Da],[0,Da*wr,-ha*wr,Da,-ha,Da],[2*ha-zt,0],[-ha*wr,0,-ha,-Da*wr,-ha,-Da],[0,2*Da-Wt],[0,-Da*wr,ha*wr,-Da,ha,-Da]],oe+ha,$e,[1,1],ar,!0),this},U.__private__.ellipse=U.ellipse=function(oe,$e,zt,Wt,ha){if(isNaN(oe)||isNaN($e)||isNaN(zt)||isNaN(Wt)||!ks(ha))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Da=4/3*(Math.SQRT2-1)*zt,ar=4/3*(Math.SQRT2-1)*Wt;return ln(oe+zt,$e),du(oe+zt,$e-ar,oe+Da,$e-Wt,oe,$e-Wt),du(oe-Da,$e-Wt,oe-zt,$e-ar,oe-zt,$e),du(oe-zt,$e+ar,oe-Da,$e+Wt,oe,$e+Wt),du(oe+Da,$e+Wt,oe+zt,$e+ar,oe+zt,$e),an(ha),this},U.__private__.circle=U.circle=function(oe,$e,zt,Wt){if(isNaN(oe)||isNaN($e)||isNaN(zt)||!ks(Wt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(oe,$e,zt,zt,Wt)},U.setFont=function(oe,$e,zt){return zt&&($e=_e($e,zt)),Wa=Io(oe,$e,{disableWarning:!1}),this};var Rs=U.__private__.getFont=U.getFont=function(){return Mn[Io.apply(U,arguments)]};U.__private__.getFontList=U.getFontList=function(){var oe,$e,zt={};for(oe in mn)if(mn.hasOwnProperty(oe))for($e in zt[oe]=[],mn[oe])mn[oe].hasOwnProperty($e)&&zt[oe].push($e);return zt},U.addFont=function(oe,$e,zt,Wt,ha){var Da=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Da.indexOf(arguments[3])!==-1?ha=arguments[3]:arguments[3]&&Da.indexOf(arguments[3])==-1&&(zt=_e(zt,Wt)),ha=ha||"Identity-H",Nc.call(this,oe,$e,zt,ha)};var Li,Ci=t.lineWidth||.200025,uo=U.__private__.getLineWidth=U.getLineWidth=function(){return Ci},_d=U.__private__.setLineWidth=U.setLineWidth=function(oe){return Ci=oe,St(me(we(oe))+" w"),this};U.__private__.setLineDash=Bn.API.setLineDash=Bn.API.setLineDashPattern=function(oe,$e){if(oe=oe||[],$e=$e||0,isNaN($e)||!Array.isArray(oe))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return oe=oe.map(function(zt){return me(we(zt))}).join(" "),$e=me(we($e)),St("["+oe+"] "+$e+" d"),this};var ah=U.__private__.getLineHeight=U.getLineHeight=function(){return nr*Li};U.__private__.getLineHeight=U.getLineHeight=function(){return nr*Li};var oc=U.__private__.setLineHeightFactor=U.setLineHeightFactor=function(oe){return typeof(oe=oe||1.15)=="number"&&(Li=oe),this},lc=U.__private__.getLineHeightFactor=U.getLineHeightFactor=function(){return Li};oc(t.lineHeight);var Yo=U.__private__.getHorizontalCoordinate=function(oe){return we(oe)},us=U.__private__.getVerticalCoordinate=function(oe){return de===ne.ADVANCED?oe:hn[ze].mediaBox.topRightY-hn[ze].mediaBox.bottomLeftY-we(oe)},ku=U.__private__.getHorizontalCoordinateString=U.getHorizontalCoordinateString=function(oe){return me(Yo(oe))},Ts=U.__private__.getVerticalCoordinateString=U.getVerticalCoordinateString=function(oe){return me(us(oe))},Rl=t.strokeColor||"0 G";U.__private__.getStrokeColor=U.getDrawColor=function(){return Ra(Rl)},U.__private__.setStrokeColor=U.setDrawColor=function(oe,$e,zt,Wt){return Rl=Ma({ch1:oe,ch2:$e,ch3:zt,ch4:Wt,pdfColorType:"draw",precision:2}),St(Rl),this};var Xo=t.fillColor||"0 g";U.__private__.getFillColor=U.getFillColor=function(){return Ra(Xo)},U.__private__.setFillColor=U.setFillColor=function(oe,$e,zt,Wt){return Xo=Ma({ch1:oe,ch2:$e,ch3:zt,ch4:Wt,pdfColorType:"fill",precision:2}),St(Xo),this};var Gi=t.textColor||"0 g",Gs=U.__private__.getTextColor=U.getTextColor=function(){return Ra(Gi)};U.__private__.setTextColor=U.setTextColor=function(oe,$e,zt,Wt){return Gi=Ma({ch1:oe,ch2:$e,ch3:zt,ch4:Wt,pdfColorType:"text",precision:3}),this};var jl=t.charSpace,rs=U.__private__.getCharSpace=U.getCharSpace=function(){return parseFloat(jl||0)};U.__private__.setCharSpace=U.setCharSpace=function(oe){if(isNaN(oe))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return jl=oe,this};var Nh=0;U.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},U.__private__.setLineCap=U.setLineCap=function(oe){var $e=U.CapJoinStyles[oe];if($e===void 0)throw new Error("Line cap style of '"+oe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nh=$e,St($e+" J"),this};var Uo=0;U.__private__.setLineJoin=U.setLineJoin=function(oe){var $e=U.CapJoinStyles[oe];if($e===void 0)throw new Error("Line join style of '"+oe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Uo=$e,St($e+" j"),this},U.__private__.setLineMiterLimit=U.__private__.setMiterLimit=U.setLineMiterLimit=U.setMiterLimit=function(oe){if(oe=oe||0,isNaN(oe))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return St(me(we(oe))+" M"),this},U.GState=mx,U.setGState=function(oe){(oe=typeof oe=="string"?ki[Ji[oe]]:vd(null,oe)).equals(zo)||(St("/"+oe.id+" gs"),zo=oe)};var vd=function(oe,$e){if(!oe||!Ji[oe]){var zt=!1;for(var Wt in ki)if(ki.hasOwnProperty(Wt)&&ki[Wt].equals($e)){zt=!0;break}if(zt)$e=ki[Wt];else{var ha="GS"+(Object.keys(ki).length+1).toString(10);ki[ha]=$e,$e.id=ha}return oe&&(Ji[oe]=$e.id),ui.publish("addGState",$e),$e}};U.addGState=function(oe,$e){return vd(oe,$e),this},U.saveGraphicsState=function(){return St("q"),en.push({key:Wa,size:nr,color:Gi}),this},U.restoreGraphicsState=function(){St("Q");var oe=en.pop();return Wa=oe.key,nr=oe.size,Gi=oe.color,zo=null,this},U.setCurrentTransformationMatrix=function(oe){return St(oe.toString()+" cm"),this},U.comment=function(oe){return St("#"+oe),this};var hu=function(oe,$e){var zt=oe||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return zt},set:function(Da){isNaN(Da)||(zt=parseFloat(Da))}});var Wt=$e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Wt},set:function(Da){isNaN(Da)||(Wt=parseFloat(Da))}});var ha="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ha},set:function(Da){ha=Da.toString()}}),this},fu=function(oe,$e,zt,Wt){hu.call(this,oe,$e),this.type="rect";var ha=zt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ha},set:function(ar){isNaN(ar)||(ha=parseFloat(ar))}});var Da=Wt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Da},set:function(ar){isNaN(ar)||(Da=parseFloat(ar))}}),this},jf=function(){this.page=Ei,this.currentPage=ze,this.pages=ea.slice(0),this.pagesContext=hn.slice(0),this.x=Qa,this.y=yr,this.matrix=jn,this.width=js(ze),this.height=ql(ze),this.outputDestination=Ea,this.id="",this.objectNumber=-1};jf.prototype.restore=function(){Ei=this.page,ze=this.currentPage,hn=this.pagesContext,ea=this.pages,Qa=this.x,yr=this.y,jn=this.matrix,df(ze,this.width),hf(ze,this.height),Ea=this.outputDestination};var Zl=function(oe,$e,zt,Wt,ha){be.push(new jf),Ei=ze=0,ea=[],Qa=oe,yr=$e,jn=ha,Ys([zt,Wt])},Om=function(oe){if(Xt[oe])be.pop().restore();else{var $e=new jf,zt="Xo"+(Object.keys(Fs).length+1).toString(10);$e.id=zt,Xt[oe]=zt,Fs[zt]=$e,ui.publish("addFormObject",$e),be.pop().restore()}};for(var wd in U.beginFormObject=function(oe,$e,zt,Wt,ha){return Zl(oe,$e,zt,Wt,ha),this},U.endFormObject=function(oe){return Om(oe),this},U.doFormObject=function(oe,$e){var zt=Fs[Xt[oe]];return St("q"),St($e.toString()+" cm"),St("/"+zt.id+" Do"),St("Q"),this},U.getFormObject=function(oe){var $e=Fs[Xt[oe]];return{x:$e.x,y:$e.y,width:$e.width,height:$e.height,matrix:$e.matrix}},U.save=function(oe,$e){return oe=oe||"generated.pdf",($e=$e||{}).returnPromise=$e.returnPromise||!1,$e.returnPromise===!1?(DA(eh(Uu()),oe),typeof DA.unload=="function"&&$n.setTimeout&&setTimeout(DA.unload,911),this):new Promise(function(zt,Wt){try{var ha=DA(eh(Uu()),oe);typeof DA.unload=="function"&&$n.setTimeout&&setTimeout(DA.unload,911),zt(ha)}catch(Da){Wt(Da.message)}})},Bn.API)Bn.API.hasOwnProperty(wd)&&(wd==="events"&&Bn.API.events.length?function(oe,$e){var zt,Wt,ha;for(ha=$e.length-1;ha!==-1;ha--)zt=$e[ha][0],Wt=$e[ha][1],oe.subscribe.apply(oe,[zt].concat(typeof Wt=="function"?[Wt]:Wt))}(ui,Bn.API.events):U[wd]=Bn.API[wd]);var js=U.getPageWidth=function(oe){return(hn[oe=oe||ze].mediaBox.topRightX-hn[oe].mediaBox.bottomLeftX)/ca},df=U.setPageWidth=function(oe,$e){hn[oe].mediaBox.topRightX=$e*ca+hn[oe].mediaBox.bottomLeftX},ql=U.getPageHeight=function(oe){return(hn[oe=oe||ze].mediaBox.topRightY-hn[oe].mediaBox.bottomLeftY)/ca},hf=U.setPageHeight=function(oe,$e){hn[oe].mediaBox.topRightY=$e*ca+hn[oe].mediaBox.bottomLeftY};return U.internal={pdfEscape:ul,getStyle:ic,getFont:Rs,getFontSize:ur,getCharSpace:rs,getTextColor:Gs,getLineHeight:ah,getLineHeightFactor:lc,getLineWidth:uo,write:vr,getHorizontalCoordinate:Yo,getVerticalCoordinate:us,getCoordinateString:ku,getVerticalCoordinateString:Ts,collections:{},newObject:Ct,newAdditionalObject:qt,newObjectDeferred:kt,newObjectDeferredBegin:Pt,getFilters:Ba,putStream:Ar,events:ui,scaleFactor:ca,pageSize:{getWidth:function(){return js(ze)},setWidth:function(oe){df(ze,oe)},getHeight:function(){return ql(ze)},setHeight:function(oe){hf(ze,oe)}},encryptionOptions:E,encryption:lo,getEncryptor:hr,output:Wo,getNumberOfPages:oo,pages:ea,out:St,f2:Oe,f3:ie,getPageInfo:zc,getPageInfoByObjId:gn,getCurrentPageInfo:th,getPDFVersion:H,Point:hu,Rectangle:fu,Matrix:De,hasHotfix:bn},Object.defineProperty(U.internal.pageSize,"width",{get:function(){return js(ze)},set:function(oe){df(ze,oe)},enumerable:!0,configurable:!0}),Object.defineProperty(U.internal.pageSize,"height",{get:function(){return ql(ze)},set:function(oe){hf(ze,oe)},enumerable:!0,configurable:!0}),Qd.call(U,za),Wa="F1",Mo(s,a),ui.publish("initialized"),U}__.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},__.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},__.prototype.hexToBytes=function(t){for(var e=[],a=0;a<t.length;a+=2)e.push(String.fromCharCode(parseInt(t.substr(a,2),16)));return e.join("")},__.prototype.processOwnerPassword=function(t,e){return DM(OM(e).substr(0,5),t)},__.prototype.encryptor=function(t,e){var a=OM(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return DM(a,r)}},mx.prototype.equals=function(t){var e,a="id,objectNumber,equals";if(!t||Is(t)!==Is(this))return!1;var r=0;for(e in this)if(!(a.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&a.indexOf(e)<0&&r--;return r===0},Bn.API={events:[]},Bn.version="3.0.1";var _l=Bn.API,A4=1,S0=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},p_=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},li=function(t){return t.toFixed(2)},cg=function(t){return t.toFixed(5)};_l.__acroform__={};var Eh=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},vZ=function(t){return t*A4},dm=function(t){var e=new EJ,a=Qr.internal.getHeight(t)||0,r=Qr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(li(r)),Number(li(a))],e},S2e=_l.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},C2e=_l.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},b2e=_l.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Il=_l.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return b2e(t,e-1)},Ll=_l.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return S2e(t,e-1)},Fl=_l.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return C2e(t,e-1)},x2e=_l.__acroform__.calculateCoordinates=function(t,e){var a=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=t[0],l=t[1],h=t[2],n=t[3],w={};return w.lowerLeft_X=a(s)||0,w.lowerLeft_Y=r(l+n)||0,w.upperRight_X=a(s+h)||0,w.upperRight_Y=r(l)||0,[Number(li(w.lowerLeft_X)),Number(li(w.lowerLeft_Y)),Number(li(w.upperRight_X)),Number(li(w.upperRight_Y))]},P2e=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],a=t._V||t.DV,r=MM(t,a),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+li(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=dm(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},MM=function(t,e){var a=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(ie){return ie.split(`
`)}):s.map(function(ie){return[ie]});var l=a,h=Qr.internal.getHeight(t)||0;h=h<0?-h:h;var n=Qr.internal.getWidth(t)||0;n=n<0?-n:n;var w=function(ie,we,Me){if(ie+1<s.length){var Ve=we+" "+s[ie+1][0];return fC(Ve,t,Me).width<=n-4}return!1};l++;e:for(;l>0;){e="",l--;var T,E,z=fC("3",t,l).height,k=t.multiline?h-l:(h-z)/2,U=k+=2,q=0,H=0,$=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+fC(e,t,l=12).width+", FieldWidth:"+n+`
`;break}for(var Q="",ne=0,de=0;de<s.length;de++)if(s.hasOwnProperty(de)){var ge=!1;if(s[de].length!==1&&$!==s[de].length-1){if((z+2)*(ne+2)+2>h)continue e;Q+=s[de][$],ge=!0,H=de,de--}else{Q=(Q+=s[de][$]+" ").substr(Q.length-1)==" "?Q.substr(0,Q.length-1):Q;var fe=parseInt(de),_e=w(fe,Q,l),me=de>=s.length-1;if(_e&&!me){Q+=" ",$=0;continue}if(_e||me){if(me)H=fe;else if(t.multiline&&(z+2)*(ne+2)+2>h)continue e}else{if(!t.multiline||(z+2)*(ne+2)+2>h)continue e;H=fe}}for(var Ae="",Te=q;Te<=H;Te++){var Oe=s[Te];if(t.multiline){if(Te===H){Ae+=Oe[$]+" ",$=($+1)%Oe.length;continue}if(Te===q){Ae+=Oe[Oe.length-1]+" ";continue}}Ae+=Oe[0]+" "}switch(Ae=Ae.substr(Ae.length-1)==" "?Ae.substr(0,Ae.length-1):Ae,E=fC(Ae,t,l).width,t.textAlign){case"right":T=n-E-2;break;case"center":T=(n-E)/2;break;case"left":default:T=2}e+=li(T)+" "+li(U)+` Td
`,e+="("+S0(Ae)+`) Tj
`,e+=-li(T)+` 0 Td
`,U=-(l+2),E=0,q=ge?H:H+1,ne++,Q=""}break}return r.text=e,r.fontSize=l,r},fC=function(t,e,a){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:s}},E2e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},N2e=function(t,e){var a={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===a.type&&r.object===a.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(a)},V2e=function(t,e){for(var a in t)if(t.hasOwnProperty(a)){var r=a,s=t[a];e.internal.newObjectDeferredBegin(s.objId,!0),Is(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[r]}},z2e=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Dp.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(E2e)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");A4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new NJ,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var l=r[s];l.objId=void 0,l.hasAnnotation&&N2e(l,a)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(a){(function(r,s){var l=!r;for(var h in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(h)){var n=r[h],w=[],T=n.Rect;if(n.Rect&&(n.Rect=x2e(n.Rect,s)),s.internal.newObjectDeferredBegin(n.objId,!0),n.DA=Qr.createDefaultAppearanceStream(n),Is(n)==="object"&&typeof n.getKeyValueListForStream=="function"&&(w=n.getKeyValueListForStream()),n.Rect=T,n.hasAppearanceStream&&!n.appearanceStreamContent){var E=P2e(n);w.push({key:"AP",value:"<</N "+E+">>"}),s.internal.acroformPlugin.xForms.push(E)}if(n.appearanceStreamContent){var z="";for(var k in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(k)){var U=n.appearanceStreamContent[k];if(z+="/"+k+" ",z+="<<",Object.keys(U).length>=1||Array.isArray(U)){for(var h in U)if(U.hasOwnProperty(h)){var q=U[h];typeof q=="function"&&(q=q.call(s,n)),z+="/"+h+" "+q+" ",s.internal.acroformPlugin.xForms.indexOf(q)>=0||s.internal.acroformPlugin.xForms.push(q)}}else typeof(q=U)=="function"&&(q=q.call(s,n)),z+="/"+h+" "+q,s.internal.acroformPlugin.xForms.indexOf(q)>=0||s.internal.acroformPlugin.xForms.push(q);z+=">>"}w.push({key:"AP",value:`<<
`+z+">>"})}s.internal.putStream({additionalKeyValues:w,objectId:n.objId}),s.internal.out("endobj")}l&&V2e(s.internal.acroformPlugin.xForms,s)})(a,t)}),t.internal.acroformPlugin.isInitialized=!0}},PJ=_l.__acroform__.arrayToPdfArray=function(t,e,a){var r=function(h){return h};if(Array.isArray(t)){for(var s="[",l=0;l<t.length;l++)switch(l!==0&&(s+=" "),Is(t[l])){case"boolean":case"number":case"object":s+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&a&&(r=a.internal.getEncryptor(e)),s+="("+S0(r(t[l].toString()))+")"):s+=t[l].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},u5=function(t,e,a){var r=function(s){return s};return e!==void 0&&a&&(r=a.internal.getEncryptor(e)),(t=t||"").toString(),t="("+S0(r(t))+")"},_m=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};_m.prototype.toString=function(){return this.objId+" 0 R"},_m.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},_m.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var a in e)if(Object.getOwnPropertyDescriptor(this,e[a]).configurable===!1){var r=e[a],s=this[r];s&&(Array.isArray(s)?t.push({key:r,value:PJ(s,this.objId,this.scope)}):s instanceof _m?(s.scope=this.scope,t.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:r,value:s}))}return t};var EJ=function(){_m.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){t=a.trim()},get:function(){return t||null}})};Eh(EJ,_m);var NJ=function(){_m.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var a=function(r){return r};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+S0(a(t))+")"}},set:function(a){t=a}})};Eh(NJ,_m);var Dp=function t(){_m.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Q){if(isNaN(Q))throw new Error('Invalid value "'+Q+'" for attribute F supplied.');e=Q}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Il(e,3)},set:function(Q){Q?this.F=Ll(e,3):this.F=Fl(e,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(Q){if(isNaN(Q))throw new Error('Invalid value "'+Q+'" for attribute Ff supplied.');a=Q}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(Q){r=Q!==void 0?Q:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(Q){r[0]=Q}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(Q){r[1]=Q}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(Q){r[2]=Q}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(Q){r[3]=Q}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(Q){switch(Q){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=Q;break;default:throw new Error('Invalid value "'+Q+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof yx)return;l="FieldObject"+t.FieldNum++}var Q=function(ne){return ne};return this.scope&&(Q=this.scope.internal.getEncryptor(this.objId)),"("+S0(Q(l))+")"},set:function(Q){l=Q.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(Q){l=Q}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(Q){h=Q}});var n="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return n},set:function(Q){n=Q}});var w=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return w},set:function(Q){w=Q}});var T=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return T===void 0?50/A4:T},set:function(Q){T=Q}});var E="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return E},set:function(Q){E=Q}});var z="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!z||this instanceof yx||this instanceof JA))return u5(z,this.objId,this.scope)},set:function(Q){Q=Q.toString(),z=Q}});var k=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(k)return this instanceof Qu?k:u5(k,this.objId,this.scope)},set:function(Q){Q=Q.toString(),k=this instanceof Qu?Q:Q.substr(0,1)==="("?p_(Q.substr(1,Q.length-2)):p_(Q)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qu?p_(k.substr(1,k.length-1)):k},set:function(Q){Q=Q.toString(),k=this instanceof Qu?"/"+Q:Q}});var U=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(U)return U},set:function(Q){this.V=Q}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(U)return this instanceof Qu?U:u5(U,this.objId,this.scope)},set:function(Q){Q=Q.toString(),U=this instanceof Qu?Q:Q.substr(0,1)==="("?p_(Q.substr(1,Q.length-2)):p_(Q)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qu?p_(U.substr(1,U.length-1)):U},set:function(Q){Q=Q.toString(),U=this instanceof Qu?"/"+Q:Q}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var q,H=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return H},set:function(Q){Q=!!Q,H=Q}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(q)return q},set:function(Q){q=Q}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,1)},set:function(Q){Q?this.Ff=Ll(this.Ff,1):this.Ff=Fl(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,2)},set:function(Q){Q?this.Ff=Ll(this.Ff,2):this.Ff=Fl(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,3)},set:function(Q){Q?this.Ff=Ll(this.Ff,3):this.Ff=Fl(this.Ff,3)}});var $=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if($!==null)return $},set:function(Q){if([0,1,2].indexOf(Q)===-1)throw new Error('Invalid value "'+Q+'" for attribute Q supplied.');$=Q}}),Object.defineProperty(this,"textAlign",{get:function(){var Q;switch($){case 0:default:Q="left";break;case 1:Q="center";break;case 2:Q="right"}return Q},configurable:!0,enumerable:!0,set:function(Q){switch(Q){case"right":case 2:$=2;break;case"center":case 1:$=1;break;case"left":case 0:default:$=0}}})};Eh(Dp,_m);var B_=function(){Dp.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(a){t=a}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return PJ(e,this.objId,this.scope)},set:function(a){var r,s;s=[],typeof(r=a)=="string"&&(s=function(l,h,n){n||(n=1);for(var w,T=[];w=h.exec(l);)T.push(w[n]);return T}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(a){e=a,this.sort&&e.sort()},this.addOption=function(a){a=(a=a||"").toString(),e.push(a),this.sort&&e.sort()},this.removeOption=function(a,r){for(r=r||!1,a=(a=a||"").toString();e.indexOf(a)!==-1&&(e.splice(e.indexOf(a),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,18)},set:function(a){a?this.Ff=Ll(this.Ff,18):this.Ff=Fl(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=Ll(this.Ff,19):this.Ff=Fl(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,20)},set:function(a){a?(this.Ff=Ll(this.Ff,20),e.sort()):this.Ff=Fl(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,22)},set:function(a){a?this.Ff=Ll(this.Ff,22):this.Ff=Fl(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,23)},set:function(a){a?this.Ff=Ll(this.Ff,23):this.Ff=Fl(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,27)},set:function(a){a?this.Ff=Ll(this.Ff,27):this.Ff=Fl(this.Ff,27)}}),this.hasAppearanceStream=!1};Eh(B_,Dp);var G_=function(){B_.call(this),this.fontName="helvetica",this.combo=!1};Eh(G_,B_);var j_=function(){G_.call(this),this.combo=!0};Eh(j_,G_);var IC=function(){j_.call(this),this.edit=!0};Eh(IC,j_);var Qu=function(){Dp.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,15)},set:function(a){a?this.Ff=Ll(this.Ff,15):this.Ff=Fl(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,16)},set:function(a){a?this.Ff=Ll(this.Ff,16):this.Ff=Fl(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,17)},set:function(a){a?this.Ff=Ll(this.Ff,17):this.Ff=Fl(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,26)},set:function(a){a?this.Ff=Ll(this.Ff,26):this.Ff=Fl(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+S0(a(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(a){Is(a)==="object"&&(e=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(a){typeof a=="string"&&(e.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}})};Eh(Qu,Dp);var LC=function(){Qu.call(this),this.pushButton=!0};Eh(LC,Qu);var Z_=function(){Qu.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Eh(Z_,Qu);var yx=function(){var t,e;Dp.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(n){return n};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var l,h=[];for(l in h.push("<<"),r)h.push("/"+l+" ("+S0(s(r[l]))+")");return h.push(">>"),h.join(`
`)},set:function(s){Is(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(s){a=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(s){a="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Eh(yx,Dp),Z_.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var a=this.Kids[e];a.appearanceStreamContent=t.createAppearanceStream(a.optionName),a.caption=t.getCA()}},Z_.prototype.createOption=function(t){var e=new yx;return e.Parent=this,e.optionName=t,this.Kids.push(e),O2e.call(this.scope,e),e};var FC=function(){Qu.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qr.CheckBox.createAppearanceStream()};Eh(FC,Qu);var JA=function(){Dp.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,13)},set:function(e){e?this.Ff=Ll(this.Ff,13):this.Ff=Fl(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,21)},set:function(e){e?this.Ff=Ll(this.Ff,21):this.Ff=Fl(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,23)},set:function(e){e?this.Ff=Ll(this.Ff,23):this.Ff=Fl(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,24)},set:function(e){e?this.Ff=Ll(this.Ff,24):this.Ff=Fl(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,25)},set:function(e){e?this.Ff=Ll(this.Ff,25):this.Ff=Fl(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,26)},set:function(e){e?this.Ff=Ll(this.Ff,26):this.Ff=Fl(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Eh(JA,Dp);var UC=function(){JA.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Il(this.Ff,14)},set:function(t){t?this.Ff=Ll(this.Ff,14):this.Ff=Fl(this.Ff,14)}}),this.password=!0};Eh(UC,JA);var Qr={CheckBox:{createAppearanceStream:function(){return{N:{On:Qr.CheckBox.YesNormal},D:{On:Qr.CheckBox.YesPushDown,Off:Qr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=dm(t);e.scope=t.scope;var a=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),l=MM(t,t.caption);return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+li(l.fontSize)+" Tf "+s),a.push("BT"),a.push(l.text),a.push("ET"),a.push("Q"),a.push("EMC"),e.stream=a.join(`
`),e},YesNormal:function(t){var e=dm(t);e.scope=t.scope;var a=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=[],l=Qr.internal.getHeight(t),h=Qr.internal.getWidth(t),n=MM(t,t.caption);return s.push("1 g"),s.push("0 0 "+li(h)+" "+li(l)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+li(h-1)+" "+li(l-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+a+" "+li(n.fontSize)+" Tf "+r),s.push(n.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=dm(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qr.RadioButton.Circle.YesNormal,e.D[t]=Qr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=dm(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Qr.internal.Bezier_C,l=Number((r*s).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+cg(Qr.internal.getWidth(t)/2)+" "+cg(Qr.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),a.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),a.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),a.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=dm(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),l=Number((s*Qr.internal.Bezier_C).toFixed(5)),h=Number((r*Qr.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+cg(Qr.internal.getWidth(t)/2)+" "+cg(Qr.internal.getHeight(t)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),a.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),a.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),a.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+cg(Qr.internal.getWidth(t)/2)+" "+cg(Qr.internal.getHeight(t)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+h+" "+h+" "+r+" 0 "+r+" c"),a.push("-"+h+" "+r+" -"+r+" "+h+" -"+r+" 0 c"),a.push("-"+r+" -"+h+" -"+h+" -"+r+" 0 -"+r+" c"),a.push(h+" -"+r+" "+r+" -"+h+" "+r+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=dm(t);e.scope=t.scope;var a=[],r=Qr.internal.getWidth(t)<=Qr.internal.getHeight(t)?Qr.internal.getWidth(t)/4:Qr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),l=Number((s*Qr.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+cg(Qr.internal.getWidth(t)/2)+" "+cg(Qr.internal.getHeight(t)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),a.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),a.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),a.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),a.push("f"),a.push("Q"),e.stream=a.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qr.RadioButton.Cross.YesNormal,e.D[t]=Qr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=dm(t);e.scope=t.scope;var a=[],r=Qr.internal.calculateCross(t);return a.push("q"),a.push("1 1 "+li(Qr.internal.getWidth(t)-2)+" "+li(Qr.internal.getHeight(t)-2)+" re"),a.push("W"),a.push("n"),a.push(li(r.x1.x)+" "+li(r.x1.y)+" m"),a.push(li(r.x2.x)+" "+li(r.x2.y)+" l"),a.push(li(r.x4.x)+" "+li(r.x4.y)+" m"),a.push(li(r.x3.x)+" "+li(r.x3.y)+" l"),a.push("s"),a.push("Q"),e.stream=a.join(`
`),e},YesPushDown:function(t){var e=dm(t);e.scope=t.scope;var a=Qr.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+li(Qr.internal.getWidth(t)-2)+" "+li(Qr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(li(a.x1.x)+" "+li(a.x1.y)+" m"),r.push(li(a.x2.x)+" "+li(a.x2.y)+" l"),r.push(li(a.x4.x)+" "+li(a.x4.y)+" m"),r.push(li(a.x3.x)+" "+li(a.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=dm(t);e.scope=t.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+li(Qr.internal.getWidth(t))+" "+li(Qr.internal.getHeight(t))+" re"),a.push("f"),e.stream=a.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+a}};Qr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qr.internal.getWidth(t),a=Qr.internal.getHeight(t),r=Math.min(e,a);return{x1:{x:(e-r)/2,y:(a-r)/2+r},x2:{x:(e-r)/2+r,y:(a-r)/2},x3:{x:(e-r)/2,y:(a-r)/2},x4:{x:(e-r)/2+r,y:(a-r)/2+r}}}},Qr.internal.getWidth=function(t){var e=0;return Is(t)==="object"&&(e=vZ(t.Rect[2])),e},Qr.internal.getHeight=function(t){var e=0;return Is(t)==="object"&&(e=vZ(t.Rect[3])),e};var O2e=_l.addField=function(t){if(z2e(this,t),!(t instanceof Dp))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};_l.AcroFormChoiceField=B_,_l.AcroFormListBox=G_,_l.AcroFormComboBox=j_,_l.AcroFormEditBox=IC,_l.AcroFormButton=Qu,_l.AcroFormPushButton=LC,_l.AcroFormRadioButton=Z_,_l.AcroFormCheckBox=FC,_l.AcroFormTextField=JA,_l.AcroFormPasswordField=UC,_l.AcroFormAppearance=Qr,_l.AcroForm={ChoiceField:B_,ListBox:G_,ComboBox:j_,EditBox:IC,Button:Qu,PushButton:LC,RadioButton:Z_,CheckBox:FC,TextField:JA,PasswordField:UC,Appearance:Qr},Bn.AcroForm={ChoiceField:B_,ListBox:G_,ComboBox:j_,EditBox:IC,Button:Qu,PushButton:LC,RadioButton:Z_,CheckBox:FC,TextField:JA,PasswordField:UC,Appearance:Qr};Bn.AcroForm;function VJ(t){return t.reduce(function(e,a,r){return e[a]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(ie,we){var Me,Ve,Ie,Ue,Be,ke=e;if((we=we||e)==="RGBA"||ie.data!==void 0&&ie.data instanceof Uint8ClampedArray&&"height"in ie&&"width"in ie)return"RGBA";if(_e(ie))for(Be in a)for(Ie=a[Be],Me=0;Me<Ie.length;Me+=1){for(Ue=!0,Ve=0;Ve<Ie[Me].length;Ve+=1)if(Ie[Me][Ve]!==void 0&&Ie[Me][Ve]!==ie[Ve]){Ue=!1;break}if(Ue===!0){ke=Be;break}}else for(Be in a)for(Ie=a[Be],Me=0;Me<Ie.length;Me+=1){for(Ue=!0,Ve=0;Ve<Ie[Me].length;Ve+=1)if(Ie[Me][Ve]!==void 0&&Ie[Me][Ve]!==ie.charCodeAt(Ve)){Ue=!1;break}if(Ue===!0){ke=Be;break}}return ke===e&&we!==e&&(ke=we),ke},s=function ie(we){for(var Me=this.internal.write,Ve=this.internal.putStream,Ie=(0,this.internal.getFilters)();Ie.indexOf("FlateEncode")!==-1;)Ie.splice(Ie.indexOf("FlateEncode"),1);we.objectId=this.internal.newObject();var Ue=[];if(Ue.push({key:"Type",value:"/XObject"}),Ue.push({key:"Subtype",value:"/Image"}),Ue.push({key:"Width",value:we.width}),Ue.push({key:"Height",value:we.height}),we.colorSpace===$.INDEXED?Ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(we.palette.length/3-1)+" "+("sMask"in we&&we.sMask!==void 0?we.objectId+2:we.objectId+1)+" 0 R]"}):(Ue.push({key:"ColorSpace",value:"/"+we.colorSpace}),we.colorSpace===$.DEVICE_CMYK&&Ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ue.push({key:"BitsPerComponent",value:we.bitsPerComponent}),"decodeParameters"in we&&we.decodeParameters!==void 0&&Ue.push({key:"DecodeParms",value:"<<"+we.decodeParameters+">>"}),"transparency"in we&&Array.isArray(we.transparency)){for(var Be="",ke=0,Je=we.transparency.length;ke<Je;ke++)Be+=we.transparency[ke]+" "+we.transparency[ke]+" ";Ue.push({key:"Mask",value:"["+Be+"]"})}we.sMask!==void 0&&Ue.push({key:"SMask",value:we.objectId+1+" 0 R"});var Le=we.filter!==void 0?["/"+we.filter]:void 0;if(Ve({data:we.data,additionalKeyValues:Ue,alreadyAppliedFilters:Le,objectId:we.objectId}),Me("endobj"),"sMask"in we&&we.sMask!==void 0){var qe="/Predictor "+we.predictor+" /Colors 1 /BitsPerComponent "+we.bitsPerComponent+" /Columns "+we.width,ye={width:we.width,height:we.height,colorSpace:"DeviceGray",bitsPerComponent:we.bitsPerComponent,decodeParameters:qe,data:we.sMask};"filter"in we&&(ye.filter=we.filter),ie.call(this,ye)}if(we.colorSpace===$.INDEXED){var ze=this.internal.newObject();Ve({data:Ae(new Uint8Array(we.palette)),objectId:ze}),Me("endobj")}},l=function(){var ie=this.internal.collections.addImage_images;for(var we in ie)s.call(this,ie[we])},h=function(){var ie,we=this.internal.collections.addImage_images,Me=this.internal.write;for(var Ve in we)Me("/I"+(ie=we[Ve]).index,ie.objectId,"0","R")},n=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",h))},w=function(){var ie=this.internal.collections.addImage_images;return n.call(this),ie},T=function(){return Object.keys(this.internal.collections.addImage_images).length},E=function(ie){return typeof t["process"+ie.toUpperCase()]=="function"},z=function(ie){return Is(ie)==="object"&&ie.nodeType===1},k=function(ie,we){if(ie.nodeName==="IMG"&&ie.hasAttribute("src")){var Me=""+ie.getAttribute("src");if(Me.indexOf("data:image/")===0)return Bw(unescape(Me).split("base64,").pop());var Ve=t.loadFile(Me,!0);if(Ve!==void 0)return Ve}if(ie.nodeName==="CANVAS"){if(ie.width===0||ie.height===0)throw new Error("Given canvas must have data. Canvas width: "+ie.width+", height: "+ie.height);var Ie;switch(we){case"PNG":Ie="image/png";break;case"WEBP":Ie="image/webp";break;case"JPEG":case"JPG":default:Ie="image/jpeg"}return Bw(ie.toDataURL(Ie,1).split("base64,").pop())}},U=function(ie){var we=this.internal.collections.addImage_images;if(we){for(var Me in we)if(ie===we[Me].alias)return we[Me]}},q=function(ie,we,Me){return ie||we||(ie=-96,we=-96),ie<0&&(ie=-1*Me.width*72/ie/this.internal.scaleFactor),we<0&&(we=-1*Me.height*72/we/this.internal.scaleFactor),ie===0&&(ie=we*Me.width/Me.height),we===0&&(we=ie*Me.height/Me.width),[ie,we]},H=function(ie,we,Me,Ve,Ie,Ue){var Be=q.call(this,Me,Ve,Ie),ke=this.internal.getCoordinateString,Je=this.internal.getVerticalCoordinateString,Le=w.call(this);if(Me=Be[0],Ve=Be[1],Le[Ie.index]=Ie,Ue){Ue*=Math.PI/180;var qe=Math.cos(Ue),ye=Math.sin(Ue),ze=function(lt){return lt.toFixed(4)},We=[ze(qe),ze(ye),ze(-1*ye),ze(qe),0,0,"cm"]}this.internal.write("q"),Ue?(this.internal.write([1,"0","0",1,ke(ie),Je(we+Ve),"cm"].join(" ")),this.internal.write(We.join(" ")),this.internal.write([ke(Me),"0","0",ke(Ve),"0","0","cm"].join(" "))):this.internal.write([ke(Me),"0","0",ke(Ve),ke(ie),Je(we+Ve),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ie.index+" Do"),this.internal.write("Q")},$=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Q=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ne=t.__addimage__.sHashCode=function(ie){var we,Me,Ve=0;if(typeof ie=="string")for(Me=ie.length,we=0;we<Me;we++)Ve=(Ve<<5)-Ve+ie.charCodeAt(we),Ve|=0;else if(_e(ie))for(Me=ie.byteLength/2,we=0;we<Me;we++)Ve=(Ve<<5)-Ve+ie[we],Ve|=0;return Ve},de=t.__addimage__.validateStringAsBase64=function(ie){(ie=ie||"").toString().trim();var we=!0;return ie.length===0&&(we=!1),ie.length%4!=0&&(we=!1),/^[A-Za-z0-9+/]+$/.test(ie.substr(0,ie.length-2))===!1&&(we=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ie.substr(-2))===!1&&(we=!1),we},ge=t.__addimage__.extractImageFromDataUrl=function(ie){if(ie==null||!(ie=ie.trim()).startsWith("data:"))return null;var we=ie.indexOf(",");return we<0?null:ie.substring(0,we).trim().endsWith("base64")?ie.substring(we+1):null},fe=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(ie){return fe()&&ie instanceof ArrayBuffer};var _e=t.__addimage__.isArrayBufferView=function(ie){return fe()&&typeof Uint32Array<"u"&&(ie instanceof Int8Array||ie instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ie instanceof Uint8ClampedArray||ie instanceof Int16Array||ie instanceof Uint16Array||ie instanceof Int32Array||ie instanceof Uint32Array||ie instanceof Float32Array||ie instanceof Float64Array)},me=t.__addimage__.binaryStringToUint8Array=function(ie){for(var we=ie.length,Me=new Uint8Array(we),Ve=0;Ve<we;Ve++)Me[Ve]=ie.charCodeAt(Ve);return Me},Ae=t.__addimage__.arrayBufferToBinaryString=function(ie){for(var we="",Me=_e(ie)?ie:new Uint8Array(ie),Ve=0;Ve<Me.length;Ve+=8192)we+=String.fromCharCode.apply(null,Me.subarray(Ve,Ve+8192));return we};t.addImage=function(){var ie,we,Me,Ve,Ie,Ue,Be,ke,Je;if(typeof arguments[1]=="number"?(we=e,Me=arguments[1],Ve=arguments[2],Ie=arguments[3],Ue=arguments[4],Be=arguments[5],ke=arguments[6],Je=arguments[7]):(we=arguments[1],Me=arguments[2],Ve=arguments[3],Ie=arguments[4],Ue=arguments[5],Be=arguments[6],ke=arguments[7],Je=arguments[8]),Is(ie=arguments[0])==="object"&&!z(ie)&&"imageData"in ie){var Le=ie;ie=Le.imageData,we=Le.format||we||e,Me=Le.x||Me||0,Ve=Le.y||Ve||0,Ie=Le.w||Le.width||Ie,Ue=Le.h||Le.height||Ue,Be=Le.alias||Be,ke=Le.compression||ke,Je=Le.rotation||Le.angle||Je}var qe=this.internal.getFilters();if(ke===void 0&&qe.indexOf("FlateEncode")!==-1&&(ke="SLOW"),isNaN(Me)||isNaN(Ve))throw new Error("Invalid coordinates passed to jsPDF.addImage");n.call(this);var ye=Te.call(this,ie,we,Be,ke);return H.call(this,Me,Ve,Ie,Ue,ye,Je),this};var Te=function(ie,we,Me,Ve){var Ie,Ue,Be;if(typeof ie=="string"&&r(ie)===e){ie=unescape(ie);var ke=Oe(ie,!1);(ke!==""||(ke=t.loadFile(ie,!0))!==void 0)&&(ie=ke)}if(z(ie)&&(ie=k(ie,we)),we=r(ie,we),!E(we))throw new Error("addImage does not support files of type '"+we+"', please ensure that a plugin for '"+we+"' support is added.");if(((Be=Me)==null||Be.length===0)&&(Me=function(Je){return typeof Je=="string"||_e(Je)?ne(Je):_e(Je.data)?ne(Je.data):null}(ie)),(Ie=U.call(this,Me))||(fe()&&(ie instanceof Uint8Array||we==="RGBA"||(Ue=ie,ie=me(ie))),Ie=this["process"+we.toUpperCase()](ie,T.call(this),Me,function(Je){return Je&&typeof Je=="string"&&(Je=Je.toUpperCase()),Je in t.image_compression?Je:Q.NONE}(Ve),Ue)),!Ie)throw new Error("An unknown error occurred whilst processing the image.");return Ie},Oe=t.__addimage__.convertBase64ToBinaryString=function(ie,we){we=typeof we!="boolean"||we;var Me,Ve="";if(typeof ie=="string"){var Ie;Me=(Ie=ge(ie))!==null&&Ie!==void 0?Ie:ie;try{Ve=Bw(Me)}catch(Ue){if(we)throw de(Me)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ve};t.getImageProperties=function(ie){var we,Me,Ve="";if(z(ie)&&(ie=k(ie)),typeof ie=="string"&&r(ie)===e&&((Ve=Oe(ie,!1))===""&&(Ve=t.loadFile(ie)||""),ie=Ve),Me=r(ie),!E(Me))throw new Error("addImage does not support files of type '"+Me+"', please ensure that a plugin for '"+Me+"' support is added.");if(!fe()||ie instanceof Uint8Array||(ie=me(ie)),!(we=this["process"+Me.toUpperCase()](ie)))throw new Error("An unknown error occurred whilst processing the image");return we.fileType=Me,we}})(Bn.API),function(t){var e=function(a){if(a!==void 0&&a!="")return!0};Bn.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(a){for(var r,s,l,h=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,w=this.internal.getPageInfoByObjId(a.objId),T=a.pageContext.annotations,E=!1,z=0;z<T.length&&!E;z++)switch((r=T[z]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(E=!0);break;case"reference":case"text":case"freetext":E=!0}if(E!=0){this.internal.write("/Annots [");for(var k=0;k<T.length;k++){r=T[k];var U=this.internal.pdfEscape,q=this.internal.getEncryptor(a.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var H=this.internal.newAdditionalObject(),$=this.internal.newAdditionalObject(),Q=this.internal.getEncryptor(H.objId),ne=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(s="/Rect ["+h(r.bounds.x)+" "+n(r.bounds.y+r.bounds.h)+" "+h(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y)+"] ")+"/Contents ("+U(Q(r.contents))+")",l+=" /Popup "+$.objId+" 0 R",l+=" /P "+w.objId+" 0 R",l+=" /T ("+U(Q(ne))+") >>",H.content=l;var de=H.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+h(r.bounds.x+30)+" "+n(r.bounds.y+r.bounds.h)+" "+h(r.bounds.x+r.bounds.w+30)+" "+n(r.bounds.y)+"] ")+" /Parent "+de,r.open&&(l+=" /Open true"),l+=" >>",$.content=l,this.internal.write(H.objId,"0 R",$.objId,"0 R");break;case"freetext":s="/Rect ["+h(r.bounds.x)+" "+n(r.bounds.y)+" "+h(r.bounds.x+r.bounds.w)+" "+n(r.bounds.y+r.bounds.h)+"] ";var ge=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+U(q(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ge+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var fe=this.annotations._nameMap[r.options.name];r.options.pageNumber=fe.page,r.options.top=fe.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+U(q(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var _e=n(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+_e+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(a){var r=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":r.pageContext.annotations.push(a)}},t.link=function(a,r,s,l,h){var n=this.internal.getCurrentPageInfo(),w=this.internal.getCoordinateString,T=this.internal.getVerticalCoordinateString;n.pageContext.annotations.push({finalBounds:{x:w(a),y:T(r),w:w(a+s),h:T(r+l)},options:h,type:"link"})},t.textWithLink=function(a,r,s,l){var h,n,w=this.getTextWidth(a),T=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){n=l.maxWidth;var E=this.splitTextToSize(a,n).length;h=Math.ceil(T*E)}else n=w,h=T;return this.text(a,r,s,l),s+=.2*T,l.align==="center"&&(r-=w/2),l.align==="right"&&(r-=w),this.link(r,s-T,n,h,l),w},t.getTextWidth=function(a){var r=this.internal.getFontSize();return this.getStringUnitWidth(a)*r/this.internal.scaleFactor}}(Bn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(H){return e[H.charCodeAt(0)]!==void 0},h=t.__arabicParser__.isArabicLetter=function(H){return typeof H=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(H)},n=t.__arabicParser__.isArabicEndLetter=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length<=2},w=t.__arabicParser__.isArabicAlfLetter=function(H){return h(H)&&s.indexOf(H.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length>=1};var T=t.__arabicParser__.arabicLetterHasFinalForm=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length>=3};var E=t.__arabicParser__.arabicLetterHasMedialForm=function(H){return h(H)&&l(H)&&e[H.charCodeAt(0)].length==4},z=t.__arabicParser__.resolveLigatures=function(H){var $=0,Q=a,ne="",de=0;for($=0;$<H.length;$+=1)Q[H.charCodeAt($)]!==void 0?(de++,typeof(Q=Q[H.charCodeAt($)])=="number"&&(ne+=String.fromCharCode(Q),Q=a,de=0),$===H.length-1&&(Q=a,ne+=H.charAt($-(de-1)),$-=de-1,de=0)):(Q=a,ne+=H.charAt($-de),$-=de,de=0);return ne};t.__arabicParser__.isArabicDiacritic=function(H){return H!==void 0&&r[H.charCodeAt(0)]!==void 0};var k=t.__arabicParser__.getCorrectForm=function(H,$,Q){return h(H)?l(H)===!1?-1:!T(H)||!h($)&&!h(Q)||!h(Q)&&n($)||n(H)&&!h($)||n(H)&&w($)||n(H)&&n($)?0:E(H)&&h($)&&!n($)&&h(Q)&&T(Q)?3:n(H)||!h(Q)?1:2:-1},U=function(H){var $=0,Q=0,ne=0,de="",ge="",fe="",_e=(H=H||"").split("\\s+"),me=[];for($=0;$<_e.length;$+=1){for(me.push(""),Q=0;Q<_e[$].length;Q+=1)de=_e[$][Q],ge=_e[$][Q-1],fe=_e[$][Q+1],h(de)?(ne=k(de,ge,fe),me[$]+=ne!==-1?String.fromCharCode(e[de.charCodeAt(0)][ne]):de):me[$]+=de;me[$]=z(me[$])}return me.join(" ")},q=t.__arabicParser__.processArabic=t.processArabic=function(){var H,$=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Q=[];if(Array.isArray($)){var ne=0;for(Q=[],ne=0;ne<$.length;ne+=1)Array.isArray($[ne])?Q.push([U($[ne][0]),$[ne][1],$[ne][2]]):Q.push([U($[ne])]);H=Q}else H=U($);return typeof arguments[0]=="string"?H:(arguments[0].text=H,arguments[0])};t.events.push(["preProcessText",q])}(Bn.API),Bn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(n){a=n}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(n){r=isNaN(n)||Number.isInteger(n)===!1||n<0?150:n,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(n){s=isNaN(n)||Number.isInteger(n)===!1||n<0?300:n,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(n){l=n}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(n){h=n}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(a,r){var s;if((a=a||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Bn.API),function(t){var e={left:0,top:0,bottom:0,right:0},a=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var w=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return w},set:function(H){w=H}});var T=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return T},set:function(H){T=H}});var E=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return E},set:function(H){E=H}});var z=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return z},set:function(H){z=H}});var k=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return k},set:function(H){k=H}});var U=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return U},set:function(H){U=H}});var q=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return q},set:function(H){q=H}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(w){return r.call(this),this.internal.__cell__.headerFunction=typeof w=="function"?w:void 0,this},t.getTextDimensions=function(w,T){r.call(this);var E=(T=T||{}).fontSize||this.getFontSize(),z=T.font||this.getFont(),k=T.scaleFactor||this.internal.scaleFactor,U=0,q=0,H=0,$=this;if(!Array.isArray(w)&&typeof w!="string"){if(typeof w!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");w=String(w)}var Q=T.maxWidth;Q>0?typeof w=="string"?w=this.splitTextToSize(w,Q):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(de,ge){return de.concat($.splitTextToSize(ge,Q))},[])):w=Array.isArray(w)?w:[w];for(var ne=0;ne<w.length;ne++)U<(H=this.getStringUnitWidth(w[ne],{font:z})*E)&&(U=H);return U!==0&&(q=w.length),{w:U/=k,h:Math.max((q*E*this.getLineHeightFactor()-E*(this.getLineHeightFactor()-1))/k,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var w=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(w.left,w.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=t.cell=function(){var w;w=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var T=this.internal.__cell__.lastCell,E=this.internal.__cell__.padding,z=this.internal.__cell__.margins||e,k=this.internal.__cell__.tableHeaderRow,U=this.internal.__cell__.printHeaders;return T.lineNumber!==void 0&&(T.lineNumber===w.lineNumber?(w.x=(T.x||0)+(T.width||0),w.y=T.y||0):T.y+T.height+w.height+z.bottom>this.getPageHeight()?(this.cellAddPage(),w.y=z.top,U&&k&&(this.printHeaderRow(w.lineNumber,!0),w.y+=k[0].height)):w.y=T.y+T.height||w.y),w.text[0]!==void 0&&(this.rect(w.x,w.y,w.width,w.height,a===!0?"FD":void 0),w.align==="right"?this.text(w.text,w.x+w.width-E,w.y+E,{align:"right",baseline:"top"}):w.align==="center"?this.text(w.text,w.x+w.width/2,w.y+E,{align:"center",baseline:"top",maxWidth:w.width-E-E}):this.text(w.text,w.x+E,w.y+E,{align:"left",baseline:"top",maxWidth:w.width-E-E})),this.internal.__cell__.lastCell=w,this};t.table=function(w,T,E,z,k){if(r.call(this),!E)throw new Error("No data for PDF table.");var U,q,H,$,Q=[],ne=[],de=[],ge={},fe={},_e=[],me=[],Ae=(k=k||{}).autoSize||!1,Te=k.printHeaders!==!1,Oe=k.css&&k.css["font-size"]!==void 0?16*k.css["font-size"]:k.fontSize||12,ie=k.margins||Object.assign({width:this.getPageWidth()},e),we=typeof k.padding=="number"?k.padding:3,Me=k.headerBackgroundColor||"#c8c8c8",Ve=k.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=Te,this.internal.__cell__.margins=ie,this.internal.__cell__.table_font_size=Oe,this.internal.__cell__.padding=we,this.internal.__cell__.headerBackgroundColor=Me,this.internal.__cell__.headerTextColor=Ve,this.setFontSize(Oe),z==null)ne=Q=Object.keys(E[0]),de=Q.map(function(){return"left"});else if(Array.isArray(z)&&Is(z[0])==="object")for(Q=z.map(function(Le){return Le.name}),ne=z.map(function(Le){return Le.prompt||Le.name||""}),de=z.map(function(Le){return Le.align||"left"}),U=0;U<z.length;U+=1)fe[z[U].name]=z[U].width*(19.049976/25.4);else Array.isArray(z)&&typeof z[0]=="string"&&(ne=Q=z,de=Q.map(function(){return"left"}));if(Ae||Array.isArray(z)&&typeof z[0]=="string")for(U=0;U<Q.length;U+=1){for(ge[$=Q[U]]=E.map(function(Le){return Le[$]}),this.setFont(void 0,"bold"),_e.push(this.getTextDimensions(ne[U],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),q=ge[$],this.setFont(void 0,"normal"),H=0;H<q.length;H+=1)_e.push(this.getTextDimensions(q[H],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);fe[$]=Math.max.apply(null,_e)+we+we,_e=[]}if(Te){var Ie={};for(U=0;U<Q.length;U+=1)Ie[Q[U]]={},Ie[Q[U]].text=ne[U],Ie[Q[U]].align=de[U];var Ue=n.call(this,Ie,fe);me=Q.map(function(Le){return new l(w,T,fe[Le],Ue,Ie[Le].text,void 0,Ie[Le].align)}),this.setTableHeaderRow(me),this.printHeaderRow(1,!1)}var Be=z.reduce(function(Le,qe){return Le[qe.name]=qe.align,Le},{});for(U=0;U<E.length;U+=1){"rowStart"in k&&k.rowStart instanceof Function&&k.rowStart({row:U,data:E[U]},this);var ke=n.call(this,E[U],fe);for(H=0;H<Q.length;H+=1){var Je=E[U][Q[H]];"cellStart"in k&&k.cellStart instanceof Function&&k.cellStart({row:U,col:H,data:Je},this),h.call(this,new l(w,T,fe[Q[H]],ke,Je,U+2,Be[Q[H]]))}}return this.internal.__cell__.table_x=w,this.internal.__cell__.table_y=T,this};var n=function(w,T){var E=this.internal.__cell__.padding,z=this.internal.__cell__.table_font_size,k=this.internal.scaleFactor;return Object.keys(w).map(function(U){var q=w[U];return this.splitTextToSize(q.hasOwnProperty("text")?q.text:q,T[U]-E-E)},this).map(function(U){return this.getLineHeightFactor()*U.length*z/k+E+E},this).reduce(function(U,q){return Math.max(U,q)},0)};t.setTableHeaderRow=function(w){r.call(this),this.internal.__cell__.tableHeaderRow=w},t.printHeaderRow=function(w,T){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var E;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var z=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(z[0],z[1],z[2],z[3],void 0,-1)}this.setFont(void 0,"bold");for(var k=[],U=0;U<this.internal.__cell__.tableHeaderRow.length;U+=1){E=this.internal.__cell__.tableHeaderRow[U].clone(),T&&(E.y=this.internal.__cell__.margins.top||0,k.push(E)),E.lineNumber=w;var q=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,E),this.setTextColor(q)}k.length>0&&this.setTableHeaderRow(k),this.setFont(void 0,"normal"),a=!1}}(Bn.API);var zJ={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},OJ=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],IM=VJ(OJ),DJ=[100,200,300,400,500,600,700,800,900],D2e=VJ(DJ);function LM(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),a=function(l){return zJ[l=l||"normal"]?l:"normal"}(t.style),r=function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(l){return typeof IM[l=l||"normal"]=="number"?l:"normal"}(t.stretch);return{family:e,style:a,weight:r,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,a,r].join(" ")}}}function wZ(t,e,a,r){var s;for(s=a;s>=0&&s<e.length;s+=r)if(t[e[s]])return t[e[s]];for(s=a;s>=0&&s<e.length;s-=r)if(t[e[s]])return t[e[s]]}var M2e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},RZ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function TZ(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function I2e(t,e,a){for(var r=(a=a||{}).defaultFontFamily||"times",s=Object.assign({},M2e,a.genericFontFamilies||{}),l=null,h=null,n=0;n<e.length;++n)if(s[(l=LM(e[n])).family]&&(l.family=s[l.family]),t.hasOwnProperty(l.family)){h=t[l.family];break}if(!(h=h||t[r]))throw new Error("Could not find a font-family for the rule '"+TZ(l)+"' and default family '"+r+"'.");if(h=function(w,T){if(T[w])return T[w];var E=IM[w],z=E<=IM.normal?-1:1,k=wZ(T,OJ,E,z);if(!k)throw new Error("Could not find a matching font-stretch value for "+w);return k}(l.stretch,h),h=function(w,T){if(T[w])return T[w];for(var E=zJ[w],z=0;z<E.length;++z)if(T[E[z]])return T[E[z]];throw new Error("Could not find a matching font-style for "+w)}(l.style,h),!(h=function(w,T){if(T[w])return T[w];if(w===400&&T[500])return T[500];if(w===500&&T[400])return T[400];var E=D2e[w],z=wZ(T,DJ,E,w<400?-1:1);if(!z)throw new Error("Could not find a matching font-weight for value "+w);return z}(l.weight,h)))throw new Error("Failed to resolve a font for the rule '"+TZ(l)+"'.");return h}function SZ(t){return t.trimLeft()}function L2e(t,e){for(var a=0;a<t.length;){if(t.charAt(a)===e)return[t.substring(0,a),t.substring(a+1)];a+=1}return null}function F2e(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var pC,CZ,bZ,c5=["times"];(function(t){var e,a,r,s,l,h,n,w,T,E=function(ye){return ye=ye||{},this.isStrokeTransparent=ye.isStrokeTransparent||!1,this.strokeOpacity=ye.strokeOpacity||1,this.strokeStyle=ye.strokeStyle||"#000000",this.fillStyle=ye.fillStyle||"#000000",this.isFillTransparent=ye.isFillTransparent||!1,this.fillOpacity=ye.fillOpacity||1,this.font=ye.font||"10px sans-serif",this.textBaseline=ye.textBaseline||"alphabetic",this.textAlign=ye.textAlign||"left",this.lineWidth=ye.lineWidth||1,this.lineJoin=ye.lineJoin||"miter",this.lineCap=ye.lineCap||"butt",this.path=ye.path||[],this.transform=ye.transform!==void 0?ye.transform.clone():new w,this.globalCompositeOperation=ye.globalCompositeOperation||"normal",this.globalAlpha=ye.globalAlpha||1,this.clip_path=ye.clip_path||[],this.currentPoint=ye.currentPoint||new h,this.miterLimit=ye.miterLimit||10,this.lastPoint=ye.lastPoint||new h,this.lineDashOffset=ye.lineDashOffset||0,this.lineDash=ye.lineDash||[],this.margin=ye.margin||[0,0,0,0],this.prevPageLastElemOffset=ye.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ye.ignoreClearRect!="boolean"||ye.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new z(this),e=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,h=this.internal.Point,n=this.internal.Rectangle,w=this.internal.Matrix,T=new E}]);var z=function(ye){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ze=ye;Object.defineProperty(this,"pdf",{get:function(){return ze}});var We=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return We},set:function(la){We=!!la}});var lt=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return lt},set:function(la){lt=!!la}});var vt=0;Object.defineProperty(this,"posX",{get:function(){return vt},set:function(la){isNaN(la)||(vt=la)}});var Ot=0;Object.defineProperty(this,"posY",{get:function(){return Ot},set:function(la){isNaN(la)||(Ot=la)}}),Object.defineProperty(this,"margin",{get:function(){return T.margin},set:function(la){var St;typeof la=="number"?St=[la,la,la,la]:((St=new Array(4))[0]=la[0],St[1]=la.length>=2?la[1]:St[0],St[2]=la.length>=3?la[2]:St[0],St[3]=la.length>=4?la[3]:St[1]),T.margin=St}});var dt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return dt},set:function(la){dt=la}});var pt=0;Object.defineProperty(this,"lastBreak",{get:function(){return pt},set:function(la){pt=la}});var ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ve},set:function(la){ve=la}}),Object.defineProperty(this,"ctx",{get:function(){return T},set:function(la){la instanceof E&&(T=la)}}),Object.defineProperty(this,"path",{get:function(){return T.path},set:function(la){T.path=la}});var ea=[];Object.defineProperty(this,"ctxStack",{get:function(){return ea},set:function(la){ea=la}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(la){var St;St=k(la),this.ctx.fillStyle=St.style,this.ctx.isFillTransparent=St.a===0,this.ctx.fillOpacity=St.a,this.pdf.setFillColor(St.r,St.g,St.b,{a:St.a}),this.pdf.setTextColor(St.r,St.g,St.b,{a:St.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(la){var St=k(la);this.ctx.strokeStyle=St.style,this.ctx.isStrokeTransparent=St.a===0,this.ctx.strokeOpacity=St.a,St.a===0?this.pdf.setDrawColor(255,255,255):(St.a,this.pdf.setDrawColor(St.r,St.g,St.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(la){["butt","round","square"].indexOf(la)!==-1&&(this.ctx.lineCap=la,this.pdf.setLineCap(la))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(la){isNaN(la)||(this.ctx.lineWidth=la,this.pdf.setLineWidth(la))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(la){["bevel","round","miter"].indexOf(la)!==-1&&(this.ctx.lineJoin=la,this.pdf.setLineJoin(la))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(la){isNaN(la)||(this.ctx.miterLimit=la,this.pdf.setMiterLimit(la))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(la){this.ctx.textBaseline=la}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(la){["right","end","center","left","start"].indexOf(la)!==-1&&(this.ctx.textAlign=la)}});var Kt=null;function Ea(la,St){if(Kt===null){var vr=function(Va){var za=[];return Object.keys(Va).forEach(function(nr){Va[nr].forEach(function(cr){var ur=null;switch(cr){case"bold":ur={family:nr,weight:"bold"};break;case"italic":ur={family:nr,style:"italic"};break;case"bolditalic":ur={family:nr,weight:"bold",style:"italic"};break;case"":case"normal":ur={family:nr}}ur!==null&&(ur.ref={name:nr,style:cr},za.push(ur))})}),za}(la.getFontList());Kt=function(Va){for(var za={},nr=0;nr<Va.length;++nr){var cr=LM(Va[nr]),ur=cr.family,Pr=cr.stretch,ka=cr.style,jr=cr.weight;za[ur]=za[ur]||{},za[ur][Pr]=za[ur][Pr]||{},za[ur][Pr][ka]=za[ur][Pr][ka]||{},za[ur][Pr][ka][jr]=cr}return za}(vr.concat(St))}return Kt}var Bt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Bt},set:function(la){Kt=null,Bt=la}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(la){var St;if(this.ctx.font=la,(St=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(la))!==null){var vr=St[1];St[2];var Va=St[3],za=St[4];St[5];var nr=St[6],cr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(za)[2];za=Math.floor(cr==="px"?parseFloat(za)*this.pdf.internal.scaleFactor:cr==="em"?parseFloat(za)*this.pdf.getFontSize():parseFloat(za)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(za);var ur=function(va){var Wa,ca,Qa=[],yr=va.trim();if(yr==="")return c5;if(yr in RZ)return[RZ[yr]];for(;yr!=="";){switch(ca=null,Wa=(yr=SZ(yr)).charAt(0)){case'"':case"'":ca=L2e(yr.substring(1),Wa);break;default:ca=F2e(yr)}if(ca===null||(Qa.push(ca[0]),(yr=SZ(ca[1]))!==""&&yr.charAt(0)!==","))return c5;yr=yr.replace(/^,/,"")}return Qa}(nr);if(this.fontFaces){var Pr=I2e(Ea(this.pdf,this.fontFaces),ur.map(function(va){return{family:va,stretch:"normal",weight:Va,style:vr}}));this.pdf.setFont(Pr.ref.name,Pr.ref.style)}else{var ka="";(Va==="bold"||parseInt(Va,10)>=700||vr==="bold")&&(ka="bold"),vr==="italic"&&(ka+="italic"),ka.length===0&&(ka="normal");for(var jr="",pn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dn=0;Dn<ur.length;Dn++){if(this.pdf.internal.getFont(ur[Dn],ka,{noFallback:!0,disableWarning:!0})!==void 0){jr=ur[Dn];break}if(ka==="bolditalic"&&this.pdf.internal.getFont(ur[Dn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)jr=ur[Dn],ka="bold";else if(this.pdf.internal.getFont(ur[Dn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){jr=ur[Dn],ka="normal";break}}if(jr===""){for(var Rn=0;Rn<ur.length;Rn++)if(pn[ur[Rn]]){jr=pn[ur[Rn]];break}}jr=jr===""?"Times":jr,this.pdf.setFont(jr,ka)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(la){this.ctx.globalCompositeOperation=la}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(la){this.ctx.globalAlpha=la}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(la){this.ctx.lineDashOffset=la,qe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(la){this.ctx.lineDash=la,qe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(la){this.ctx.ignoreClearRect=!!la}})};z.prototype.setLineDash=function(ye){this.lineDash=ye},z.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},z.prototype.fill=function(){ge.call(this,"fill",!1)},z.prototype.stroke=function(){ge.call(this,"stroke",!1)},z.prototype.beginPath=function(){this.path=[{type:"begin"}]},z.prototype.moveTo=function(ye,ze){if(isNaN(ye)||isNaN(ze))throw no.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var We=this.ctx.transform.applyToPoint(new h(ye,ze));this.path.push({type:"mt",x:We.x,y:We.y}),this.ctx.lastPoint=new h(ye,ze)},z.prototype.closePath=function(){var ye=new h(0,0),ze=0;for(ze=this.path.length-1;ze!==-1;ze--)if(this.path[ze].type==="begin"&&Is(this.path[ze+1])==="object"&&typeof this.path[ze+1].x=="number"){ye=new h(this.path[ze+1].x,this.path[ze+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(ye.x,ye.y)},z.prototype.lineTo=function(ye,ze){if(isNaN(ye)||isNaN(ze))throw no.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var We=this.ctx.transform.applyToPoint(new h(ye,ze));this.path.push({type:"lt",x:We.x,y:We.y}),this.ctx.lastPoint=new h(We.x,We.y)},z.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ge.call(this,null,!0)},z.prototype.quadraticCurveTo=function(ye,ze,We,lt){if(isNaN(We)||isNaN(lt)||isNaN(ye)||isNaN(ze))throw no.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var vt=this.ctx.transform.applyToPoint(new h(We,lt)),Ot=this.ctx.transform.applyToPoint(new h(ye,ze));this.path.push({type:"qct",x1:Ot.x,y1:Ot.y,x:vt.x,y:vt.y}),this.ctx.lastPoint=new h(vt.x,vt.y)},z.prototype.bezierCurveTo=function(ye,ze,We,lt,vt,Ot){if(isNaN(vt)||isNaN(Ot)||isNaN(ye)||isNaN(ze)||isNaN(We)||isNaN(lt))throw no.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var dt=this.ctx.transform.applyToPoint(new h(vt,Ot)),pt=this.ctx.transform.applyToPoint(new h(ye,ze)),ve=this.ctx.transform.applyToPoint(new h(We,lt));this.path.push({type:"bct",x1:pt.x,y1:pt.y,x2:ve.x,y2:ve.y,x:dt.x,y:dt.y}),this.ctx.lastPoint=new h(dt.x,dt.y)},z.prototype.arc=function(ye,ze,We,lt,vt,Ot){if(isNaN(ye)||isNaN(ze)||isNaN(We)||isNaN(lt)||isNaN(vt))throw no.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ot=!!Ot,!this.ctx.transform.isIdentity){var dt=this.ctx.transform.applyToPoint(new h(ye,ze));ye=dt.x,ze=dt.y;var pt=this.ctx.transform.applyToPoint(new h(0,We)),ve=this.ctx.transform.applyToPoint(new h(0,0));We=Math.sqrt(Math.pow(pt.x-ve.x,2)+Math.pow(pt.y-ve.y,2))}Math.abs(vt-lt)>=2*Math.PI&&(lt=0,vt=2*Math.PI),this.path.push({type:"arc",x:ye,y:ze,radius:We,startAngle:lt,endAngle:vt,counterclockwise:Ot})},z.prototype.arcTo=function(ye,ze,We,lt,vt){throw new Error("arcTo not implemented.")},z.prototype.rect=function(ye,ze,We,lt){if(isNaN(ye)||isNaN(ze)||isNaN(We)||isNaN(lt))throw no.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ye,ze),this.lineTo(ye+We,ze),this.lineTo(ye+We,ze+lt),this.lineTo(ye,ze+lt),this.lineTo(ye,ze),this.lineTo(ye+We,ze),this.lineTo(ye,ze)},z.prototype.fillRect=function(ye,ze,We,lt){if(isNaN(ye)||isNaN(ze)||isNaN(We)||isNaN(lt))throw no.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!U.call(this)){var vt={};this.lineCap!=="butt"&&(vt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(vt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ye,ze,We,lt),this.fill(),vt.hasOwnProperty("lineCap")&&(this.lineCap=vt.lineCap),vt.hasOwnProperty("lineJoin")&&(this.lineJoin=vt.lineJoin)}},z.prototype.strokeRect=function(ye,ze,We,lt){if(isNaN(ye)||isNaN(ze)||isNaN(We)||isNaN(lt))throw no.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");q.call(this)||(this.beginPath(),this.rect(ye,ze,We,lt),this.stroke())},z.prototype.clearRect=function(ye,ze,We,lt){if(isNaN(ye)||isNaN(ze)||isNaN(We)||isNaN(lt))throw no.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ye,ze,We,lt))},z.prototype.save=function(ye){ye=typeof ye!="boolean"||ye;for(var ze=this.pdf.internal.getCurrentPageInfo().pageNumber,We=0;We<this.pdf.internal.getNumberOfPages();We++)this.pdf.setPage(We+1),this.pdf.internal.out("q");if(this.pdf.setPage(ze),ye){this.ctx.fontSize=this.pdf.internal.getFontSize();var lt=new E(this.ctx);this.ctxStack.push(this.ctx),this.ctx=lt}},z.prototype.restore=function(ye){ye=typeof ye!="boolean"||ye;for(var ze=this.pdf.internal.getCurrentPageInfo().pageNumber,We=0;We<this.pdf.internal.getNumberOfPages();We++)this.pdf.setPage(We+1),this.pdf.internal.out("Q");this.pdf.setPage(ze),ye&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},z.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var k=function(ye){var ze,We,lt,vt;if(ye.isCanvasGradient===!0&&(ye=ye.getColor()),!ye)return{r:0,g:0,b:0,a:0,style:ye};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ye))ze=0,We=0,lt=0,vt=0;else{var Ot=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ye);if(Ot!==null)ze=parseInt(Ot[1]),We=parseInt(Ot[2]),lt=parseInt(Ot[3]),vt=1;else if((Ot=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ye))!==null)ze=parseInt(Ot[1]),We=parseInt(Ot[2]),lt=parseInt(Ot[3]),vt=parseFloat(Ot[4]);else{if(vt=1,typeof ye=="string"&&ye.charAt(0)!=="#"){var dt=new CJ(ye);ye=dt.ok?dt.toHex():"#000000"}ye.length===4?(ze=ye.substring(1,2),ze+=ze,We=ye.substring(2,3),We+=We,lt=ye.substring(3,4),lt+=lt):(ze=ye.substring(1,3),We=ye.substring(3,5),lt=ye.substring(5,7)),ze=parseInt(ze,16),We=parseInt(We,16),lt=parseInt(lt,16)}}return{r:ze,g:We,b:lt,a:vt,style:ye}},U=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},q=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};z.prototype.fillText=function(ye,ze,We,lt){if(isNaN(ze)||isNaN(We)||typeof ye!="string")throw no.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(lt=isNaN(lt)?void 0:lt,!U.call(this)){var vt=ke(this.ctx.transform.rotation),Ot=this.ctx.transform.scaleX;we.call(this,{text:ye,x:ze,y:We,scale:Ot,angle:vt,align:this.textAlign,maxWidth:lt})}},z.prototype.strokeText=function(ye,ze,We,lt){if(isNaN(ze)||isNaN(We)||typeof ye!="string")throw no.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!q.call(this)){lt=isNaN(lt)?void 0:lt;var vt=ke(this.ctx.transform.rotation),Ot=this.ctx.transform.scaleX;we.call(this,{text:ye,x:ze,y:We,scale:Ot,renderingMode:"stroke",angle:vt,align:this.textAlign,maxWidth:lt})}},z.prototype.measureText=function(ye){if(typeof ye!="string")throw no.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ze=this.pdf,We=this.pdf.internal.scaleFactor,lt=ze.internal.getFontSize(),vt=ze.getStringUnitWidth(ye)*lt/ze.internal.scaleFactor,Ot=function(dt){var pt=(dt=dt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pt}}),this};return new Ot({width:vt*=Math.round(96*We/72*1e4)/1e4})},z.prototype.scale=function(ye,ze){if(isNaN(ye)||isNaN(ze))throw no.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var We=new w(ye,0,0,ze,0,0);this.ctx.transform=this.ctx.transform.multiply(We)},z.prototype.rotate=function(ye){if(isNaN(ye))throw no.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ze=new w(Math.cos(ye),Math.sin(ye),-Math.sin(ye),Math.cos(ye),0,0);this.ctx.transform=this.ctx.transform.multiply(ze)},z.prototype.translate=function(ye,ze){if(isNaN(ye)||isNaN(ze))throw no.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var We=new w(1,0,0,1,ye,ze);this.ctx.transform=this.ctx.transform.multiply(We)},z.prototype.transform=function(ye,ze,We,lt,vt,Ot){if(isNaN(ye)||isNaN(ze)||isNaN(We)||isNaN(lt)||isNaN(vt)||isNaN(Ot))throw no.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var dt=new w(ye,ze,We,lt,vt,Ot);this.ctx.transform=this.ctx.transform.multiply(dt)},z.prototype.setTransform=function(ye,ze,We,lt,vt,Ot){ye=isNaN(ye)?1:ye,ze=isNaN(ze)?0:ze,We=isNaN(We)?0:We,lt=isNaN(lt)?1:lt,vt=isNaN(vt)?0:vt,Ot=isNaN(Ot)?0:Ot,this.ctx.transform=new w(ye,ze,We,lt,vt,Ot)};var H=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};z.prototype.drawImage=function(ye,ze,We,lt,vt,Ot,dt,pt,ve){var ea=this.pdf.getImageProperties(ye),Kt=1,Ea=1,Bt=1,la=1;lt!==void 0&&pt!==void 0&&(Bt=pt/lt,la=ve/vt,Kt=ea.width/lt*pt/lt,Ea=ea.height/vt*ve/vt),Ot===void 0&&(Ot=ze,dt=We,ze=0,We=0),lt!==void 0&&pt===void 0&&(pt=lt,ve=vt),lt===void 0&&pt===void 0&&(pt=ea.width,ve=ea.height);for(var St,vr=this.ctx.transform.decompose(),Va=ke(vr.rotate.shx),za=new w,nr=(za=(za=(za=za.multiply(vr.translate)).multiply(vr.skew)).multiply(vr.scale)).applyToRectangle(new n(Ot-ze*Bt,dt-We*la,lt*Kt,vt*Ea)),cr=$.call(this,nr),ur=[],Pr=0;Pr<cr.length;Pr+=1)ur.indexOf(cr[Pr])===-1&&ur.push(cr[Pr]);if(de(ur),this.autoPaging)for(var ka=ur[0],jr=ur[ur.length-1],pn=ka;pn<jr+1;pn++){this.pdf.setPage(pn);var Dn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rn=pn===1?this.posY+this.margin[0]:this.margin[0],va=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wa=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ca=pn===1?0:va+(pn-2)*Wa;if(this.ctx.clip_path.length!==0){var Qa=this.path;St=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(St,this.posX+this.margin[3],-ca+Rn+this.ctx.prevPageLastElemOffset),fe.call(this,"fill",!0),this.path=Qa}var yr=JSON.parse(JSON.stringify(nr));yr=ne([yr],this.posX+this.margin[3],-ca+Rn+this.ctx.prevPageLastElemOffset)[0];var jn=(pn>ka||pn<jr)&&H.call(this);jn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dn,Wa,null).clip().discardPath()),this.pdf.addImage(ye,"JPEG",yr.x,yr.y,yr.w,yr.h,null,null,Va),jn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ye,"JPEG",nr.x,nr.y,nr.w,nr.h,null,null,Va)};var $=function(ye,ze,We){var lt=[];ze=ze||this.pdf.internal.pageSize.width,We=We||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var vt=this.posY+this.ctx.prevPageLastElemOffset;switch(ye.type){default:case"mt":case"lt":lt.push(Math.floor((ye.y+vt)/We)+1);break;case"arc":lt.push(Math.floor((ye.y+vt-ye.radius)/We)+1),lt.push(Math.floor((ye.y+vt+ye.radius)/We)+1);break;case"qct":var Ot=Je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ye.x1,ye.y1,ye.x,ye.y);lt.push(Math.floor((Ot.y+vt)/We)+1),lt.push(Math.floor((Ot.y+Ot.h+vt)/We)+1);break;case"bct":var dt=Le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ye.x1,ye.y1,ye.x2,ye.y2,ye.x,ye.y);lt.push(Math.floor((dt.y+vt)/We)+1),lt.push(Math.floor((dt.y+dt.h+vt)/We)+1);break;case"rect":lt.push(Math.floor((ye.y+vt)/We)+1),lt.push(Math.floor((ye.y+ye.h+vt)/We)+1)}for(var pt=0;pt<lt.length;pt+=1)for(;this.pdf.internal.getNumberOfPages()<lt[pt];)Q.call(this);return lt},Q=function(){var ye=this.fillStyle,ze=this.strokeStyle,We=this.font,lt=this.lineCap,vt=this.lineWidth,Ot=this.lineJoin;this.pdf.addPage(),this.fillStyle=ye,this.strokeStyle=ze,this.font=We,this.lineCap=lt,this.lineWidth=vt,this.lineJoin=Ot},ne=function(ye,ze,We){for(var lt=0;lt<ye.length;lt++)switch(ye[lt].type){case"bct":ye[lt].x2+=ze,ye[lt].y2+=We;case"qct":ye[lt].x1+=ze,ye[lt].y1+=We;case"mt":case"lt":case"arc":default:ye[lt].x+=ze,ye[lt].y+=We}return ye},de=function(ye){return ye.sort(function(ze,We){return ze-We})},ge=function(ye,ze){for(var We,lt,vt=this.fillStyle,Ot=this.strokeStyle,dt=this.lineCap,pt=this.lineWidth,ve=Math.abs(pt*this.ctx.transform.scaleX),ea=this.lineJoin,Kt=JSON.parse(JSON.stringify(this.path)),Ea=JSON.parse(JSON.stringify(this.path)),Bt=[],la=0;la<Ea.length;la++)if(Ea[la].x!==void 0)for(var St=$.call(this,Ea[la]),vr=0;vr<St.length;vr+=1)Bt.indexOf(St[vr])===-1&&Bt.push(St[vr]);for(var Va=0;Va<Bt.length;Va++)for(;this.pdf.internal.getNumberOfPages()<Bt[Va];)Q.call(this);if(de(Bt),this.autoPaging)for(var za=Bt[0],nr=Bt[Bt.length-1],cr=za;cr<nr+1;cr++){this.pdf.setPage(cr),this.fillStyle=vt,this.strokeStyle=Ot,this.lineCap=dt,this.lineWidth=ve,this.lineJoin=ea;var ur=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pr=cr===1?this.posY+this.margin[0]:this.margin[0],ka=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pn=cr===1?0:ka+(cr-2)*jr;if(this.ctx.clip_path.length!==0){var Dn=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(We,this.posX+this.margin[3],-pn+Pr+this.ctx.prevPageLastElemOffset),fe.call(this,ye,!0),this.path=Dn}if(lt=JSON.parse(JSON.stringify(Kt)),this.path=ne(lt,this.posX+this.margin[3],-pn+Pr+this.ctx.prevPageLastElemOffset),ze===!1||cr===0){var Rn=(cr>za||cr<nr)&&H.call(this);Rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ur,jr,null).clip().discardPath()),fe.call(this,ye,ze),Rn&&this.pdf.restoreGraphicsState()}this.lineWidth=pt}else this.lineWidth=ve,fe.call(this,ye,ze),this.lineWidth=pt;this.path=Kt},fe=function(ye,ze){if((ye!=="stroke"||ze||!q.call(this))&&(ye==="stroke"||ze||!U.call(this))){for(var We,lt,vt=[],Ot=this.path,dt=0;dt<Ot.length;dt++){var pt=Ot[dt];switch(pt.type){case"begin":vt.push({begin:!0});break;case"close":vt.push({close:!0});break;case"mt":vt.push({start:pt,deltas:[],abs:[]});break;case"lt":var ve=vt.length;if(Ot[dt-1]&&!isNaN(Ot[dt-1].x)&&(We=[pt.x-Ot[dt-1].x,pt.y-Ot[dt-1].y],ve>0)){for(;ve>=0;ve--)if(vt[ve-1].close!==!0&&vt[ve-1].begin!==!0){vt[ve-1].deltas.push(We),vt[ve-1].abs.push(pt);break}}break;case"bct":We=[pt.x1-Ot[dt-1].x,pt.y1-Ot[dt-1].y,pt.x2-Ot[dt-1].x,pt.y2-Ot[dt-1].y,pt.x-Ot[dt-1].x,pt.y-Ot[dt-1].y],vt[vt.length-1].deltas.push(We);break;case"qct":var ea=Ot[dt-1].x+2/3*(pt.x1-Ot[dt-1].x),Kt=Ot[dt-1].y+2/3*(pt.y1-Ot[dt-1].y),Ea=pt.x+2/3*(pt.x1-pt.x),Bt=pt.y+2/3*(pt.y1-pt.y),la=pt.x,St=pt.y;We=[ea-Ot[dt-1].x,Kt-Ot[dt-1].y,Ea-Ot[dt-1].x,Bt-Ot[dt-1].y,la-Ot[dt-1].x,St-Ot[dt-1].y],vt[vt.length-1].deltas.push(We);break;case"arc":vt.push({deltas:[],abs:[],arc:!0}),Array.isArray(vt[vt.length-1].abs)&&vt[vt.length-1].abs.push(pt)}}lt=ze?null:ye==="stroke"?"stroke":"fill";for(var vr=!1,Va=0;Va<vt.length;Va++)if(vt[Va].arc)for(var za=vt[Va].abs,nr=0;nr<za.length;nr++){var cr=za[nr];cr.type==="arc"?Ae.call(this,cr.x,cr.y,cr.radius,cr.startAngle,cr.endAngle,cr.counterclockwise,void 0,ze,!vr):Me.call(this,cr.x,cr.y),vr=!0}else if(vt[Va].close===!0)this.pdf.internal.out("h"),vr=!1;else if(vt[Va].begin!==!0){var ur=vt[Va].start.x,Pr=vt[Va].start.y;Ve.call(this,vt[Va].deltas,ur,Pr),vr=!0}lt&&Te.call(this,lt),ze&&Oe.call(this)}},_e=function(ye){var ze=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,We=ze*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ye-We;case"top":return ye+ze-We;case"hanging":return ye+ze-2*We;case"middle":return ye+ze/2-We;case"ideographic":return ye;case"alphabetic":default:return ye}},me=function(ye){return ye+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};z.prototype.createLinearGradient=function(){var ye=function(){};return ye.colorStops=[],ye.addColorStop=function(ze,We){this.colorStops.push([ze,We])},ye.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ye.isCanvasGradient=!0,ye},z.prototype.createPattern=function(){return this.createLinearGradient()},z.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Ae=function(ye,ze,We,lt,vt,Ot,dt,pt,ve){for(var ea=Ue.call(this,We,lt,vt,Ot),Kt=0;Kt<ea.length;Kt++){var Ea=ea[Kt];Kt===0&&(ve?ie.call(this,Ea.x1+ye,Ea.y1+ze):Me.call(this,Ea.x1+ye,Ea.y1+ze)),Ie.call(this,ye,ze,Ea.x2,Ea.y2,Ea.x3,Ea.y3,Ea.x4,Ea.y4)}pt?Oe.call(this):Te.call(this,dt)},Te=function(ye){switch(ye){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Oe=function(){this.pdf.clip(),this.pdf.discardPath()},ie=function(ye,ze){this.pdf.internal.out(a(ye)+" "+r(ze)+" m")},we=function(ye){var ze;switch(ye.align){case"right":case"end":ze="right";break;case"center":ze="center";break;case"left":case"start":default:ze="left"}var We=this.pdf.getTextDimensions(ye.text),lt=_e.call(this,ye.y),vt=me.call(this,lt)-We.h,Ot=this.ctx.transform.applyToPoint(new h(ye.x,lt)),dt=this.ctx.transform.decompose(),pt=new w;pt=(pt=(pt=pt.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale);for(var ve,ea,Kt,Ea=this.ctx.transform.applyToRectangle(new n(ye.x,lt,We.w,We.h)),Bt=pt.applyToRectangle(new n(ye.x,vt,We.w,We.h)),la=$.call(this,Bt),St=[],vr=0;vr<la.length;vr+=1)St.indexOf(la[vr])===-1&&St.push(la[vr]);if(de(St),this.autoPaging)for(var Va=St[0],za=St[St.length-1],nr=Va;nr<za+1;nr++){this.pdf.setPage(nr);var cr=nr===1?this.posY+this.margin[0]:this.margin[0],ur=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pr=this.pdf.internal.pageSize.height-this.margin[2],ka=Pr-this.margin[0],jr=this.pdf.internal.pageSize.width-this.margin[1],pn=jr-this.margin[3],Dn=nr===1?0:ur+(nr-2)*ka;if(this.ctx.clip_path.length!==0){var Rn=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ne(ve,this.posX+this.margin[3],-1*Dn+cr),fe.call(this,"fill",!0),this.path=Rn}var va=ne([JSON.parse(JSON.stringify(Bt))],this.posX+this.margin[3],-Dn+cr+this.ctx.prevPageLastElemOffset)[0];ye.scale>=.01&&(ea=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ea*ye.scale),Kt=this.lineWidth,this.lineWidth=Kt*ye.scale);var Wa=this.autoPaging!=="text";if(Wa||va.y+va.h<=Pr){if(Wa||va.y>=cr&&va.x<=jr){var ca=Wa?ye.text:this.pdf.splitTextToSize(ye.text,ye.maxWidth||jr-va.x)[0],Qa=ne([JSON.parse(JSON.stringify(Ea))],this.posX+this.margin[3],-Dn+cr+this.ctx.prevPageLastElemOffset)[0],yr=Wa&&(nr>Va||nr<za)&&H.call(this);yr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,ka,null).clip().discardPath()),this.pdf.text(ca,Qa.x,Qa.y,{angle:ye.angle,align:ze,renderingMode:ye.renderingMode}),yr&&this.pdf.restoreGraphicsState()}}else va.y<Pr&&(this.ctx.prevPageLastElemOffset+=Pr-va.y);ye.scale>=.01&&(this.pdf.setFontSize(ea),this.lineWidth=Kt)}else ye.scale>=.01&&(ea=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ea*ye.scale),Kt=this.lineWidth,this.lineWidth=Kt*ye.scale),this.pdf.text(ye.text,Ot.x+this.posX,Ot.y+this.posY,{angle:ye.angle,align:ze,renderingMode:ye.renderingMode,maxWidth:ye.maxWidth}),ye.scale>=.01&&(this.pdf.setFontSize(ea),this.lineWidth=Kt)},Me=function(ye,ze,We,lt){We=We||0,lt=lt||0,this.pdf.internal.out(a(ye+We)+" "+r(ze+lt)+" l")},Ve=function(ye,ze,We){return this.pdf.lines(ye,ze,We,null,null)},Ie=function(ye,ze,We,lt,vt,Ot,dt,pt){this.pdf.internal.out([e(s(We+ye)),e(l(lt+ze)),e(s(vt+ye)),e(l(Ot+ze)),e(s(dt+ye)),e(l(pt+ze)),"c"].join(" "))},Ue=function(ye,ze,We,lt){for(var vt=2*Math.PI,Ot=Math.PI/2;ze>We;)ze-=vt;var dt=Math.abs(We-ze);dt<vt&&lt&&(dt=vt-dt);for(var pt=[],ve=lt?-1:1,ea=ze;dt>1e-5;){var Kt=ea+ve*Math.min(dt,Ot);pt.push(Be.call(this,ye,ea,Kt)),dt-=Math.abs(Kt-ea),ea=Kt}return pt},Be=function(ye,ze,We){var lt=(We-ze)/2,vt=ye*Math.cos(lt),Ot=ye*Math.sin(lt),dt=vt,pt=-Ot,ve=dt*dt+pt*pt,ea=ve+dt*vt+pt*Ot,Kt=4/3*(Math.sqrt(2*ve*ea)-ea)/(dt*Ot-pt*vt),Ea=dt-Kt*pt,Bt=pt+Kt*dt,la=Ea,St=-Bt,vr=lt+ze,Va=Math.cos(vr),za=Math.sin(vr);return{x1:ye*Math.cos(ze),y1:ye*Math.sin(ze),x2:Ea*Va-Bt*za,y2:Ea*za+Bt*Va,x3:la*Va-St*za,y3:la*za+St*Va,x4:ye*Math.cos(We),y4:ye*Math.sin(We)}},ke=function(ye){return 180*ye/Math.PI},Je=function(ye,ze,We,lt,vt,Ot){var dt=ye+.5*(We-ye),pt=ze+.5*(lt-ze),ve=vt+.5*(We-vt),ea=Ot+.5*(lt-Ot),Kt=Math.min(ye,vt,dt,ve),Ea=Math.max(ye,vt,dt,ve),Bt=Math.min(ze,Ot,pt,ea),la=Math.max(ze,Ot,pt,ea);return new n(Kt,Bt,Ea-Kt,la-Bt)},Le=function(ye,ze,We,lt,vt,Ot,dt,pt){var ve,ea,Kt,Ea,Bt,la,St,vr,Va,za,nr,cr,ur,Pr,ka=We-ye,jr=lt-ze,pn=vt-We,Dn=Ot-lt,Rn=dt-vt,va=pt-Ot;for(ea=0;ea<41;ea++)Va=(St=(Kt=ye+(ve=ea/40)*ka)+ve*((Bt=We+ve*pn)-Kt))+ve*(Bt+ve*(vt+ve*Rn-Bt)-St),za=(vr=(Ea=ze+ve*jr)+ve*((la=lt+ve*Dn)-Ea))+ve*(la+ve*(Ot+ve*va-la)-vr),ea==0?(nr=Va,cr=za,ur=Va,Pr=za):(nr=Math.min(nr,Va),cr=Math.min(cr,za),ur=Math.max(ur,Va),Pr=Math.max(Pr,za));return new n(Math.round(nr),Math.round(cr),Math.round(ur-nr),Math.round(Pr-cr))},qe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ye,ze,We=(ye=this.ctx.lineDash,ze=this.ctx.lineDashOffset,JSON.stringify({lineDash:ye,lineDashOffset:ze}));this.prevLineDash!==We&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=We)}}})(Bn.API),function(t){var e=function(l){var h,n,w,T,E,z,k,U,q,H;for(n=[],w=0,T=(l+=h="\0\0\0\0".slice(l.length%4||4)).length;T>w;w+=4)(E=(l.charCodeAt(w)<<24)+(l.charCodeAt(w+1)<<16)+(l.charCodeAt(w+2)<<8)+l.charCodeAt(w+3))!==0?(z=(E=((E=((E=((E=(E-(H=E%85))/85)-(q=E%85))/85)-(U=E%85))/85)-(k=E%85))/85)%85,n.push(z+33,k+33,U+33,q+33,H+33)):n.push(122);return function($,Q){for(var ne=Q;ne>0;ne--)$.pop()}(n,h.length),String.fromCharCode.apply(String,n)+"~>"},a=function(l){var h,n,w,T,E,z=String,k="length",U=255,q="charCodeAt",H="slice",$="replace";for(l[H](-2),l=l[H](0,-2)[$](/\s/g,"")[$]("z","!!!!!"),w=[],T=0,E=(l+=h="uuuuu"[H](l[k]%5||5))[k];E>T;T+=5)n=52200625*(l[q](T)-33)+614125*(l[q](T+1)-33)+7225*(l[q](T+2)-33)+85*(l[q](T+3)-33)+(l[q](T+4)-33),w.push(U&n>>24,U&n>>16,U&n>>8,U&n);return function(Q,ne){for(var de=ne;de>0;de--)Q.pop()}(w,h[k]),z.fromCharCode.apply(z,w)},r=function(l){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),h.test(l)===!1)return"";for(var n="",w=0;w<l.length;w+=2)n+=String.fromCharCode("0x"+(l[w]+l[w+1]));return n},s=function(l){for(var h=new Uint8Array(l.length),n=l.length;n--;)h[n]=l.charCodeAt(n);return l=(h=VM(h)).reduce(function(w,T){return w+String.fromCharCode(T)},"")};t.processDataByFilters=function(l,h){var n=0,w=l||"",T=[];for(typeof(h=h||[])=="string"&&(h=[h]),n=0;n<h.length;n+=1)switch(h[n]){case"ASCII85Decode":case"/ASCII85Decode":w=a(w),T.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":w=e(w),T.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":w=r(w),T.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":w=w.split("").map(function(E){return("0"+E.charCodeAt().toString(16)).slice(-2)}).join("")+">",T.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":w=s(w),T.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[n]+'" is not implemented')}return{data:w,reverseChain:T.reverse().join(" ")}}}(Bn.API),function(t){t.loadFile=function(e,a,r){return function(s,l,h){l=l!==!1,h=typeof h=="function"?h:function(){};var n=void 0;try{n=function(w,T,E){var z=new XMLHttpRequest,k=0,U=function(q){var H=q.length,$=[],Q=String.fromCharCode;for(k=0;k<H;k+=1)$.push(Q(255&q.charCodeAt(k)));return $.join("")};if(z.open("GET",w,!T),z.overrideMimeType("text/plain; charset=x-user-defined"),T===!1&&(z.onload=function(){z.status===200?E(U(this.responseText)):E(void 0)}),z.send(null),T&&z.status===200)return U(z.responseText)}(s,l,h)}catch{}return n}(e,a,r)},t.loadImageFile=t.loadFile}(Bn.API),function(t){function e(){return($n.html2canvas?Promise.resolve($n.html2canvas):bM(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function a(){return($n.DOMPurify?Promise.resolve($n.DOMPurify):bM(()=>import("./purify.es-Ci5xwkH_.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var r=function(h){var n=Is(h);return n==="undefined"?"undefined":n==="string"||h instanceof String?"string":n==="number"||h instanceof Number?"number":n==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":n==="object"?"object":"unknown"},s=function(h,n){var w=document.createElement(h);for(var T in n.className&&(w.className=n.className),n.innerHTML&&n.dompurify&&(w.innerHTML=n.dompurify.sanitize(n.innerHTML)),n.style)w.style[T]=n.style[T];return w},l=function h(n){var w=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),T=h.convert(Promise.resolve(),w);return T=(T=T.setProgress(1,h,1,[h])).set(n)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(h,n){return h.__proto__=n||l.prototype,h},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(h,n){return this.then(function(){switch(n=n||function(w){switch(r(w)){case"string":return"string";case"element":return w.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(a).then(function(w){return this.set({src:s("div",{innerHTML:h,dompurify:w})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},l.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},n=function w(T,E){for(var z=T.nodeType===3?document.createTextNode(T.nodeValue):T.cloneNode(!1),k=T.firstChild;k;k=k.nextSibling)E!==!0&&k.nodeType===1&&k.nodeName==="SCRIPT"||z.appendChild(w(k,E));return T.nodeType===1&&(T.nodeName==="CANVAS"?(z.width=T.width,z.height=T.height,z.getContext("2d").drawImage(T,0,0)):T.nodeName!=="TEXTAREA"&&T.nodeName!=="SELECT"||(z.value=T.value),z.addEventListener("load",function(){z.scrollTop=T.scrollTop,z.scrollLeft=T.scrollLeft},!0)),z}(this.prop.src,this.opt.html2canvas.javascriptEnabled);n.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(n),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(n){var w=Object.assign({},this.opt.html2canvas);return delete w.onrendered,n(this.prop.container,w)}).then(function(n){(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(e).then(function(n){var w=this.opt.jsPDF,T=this.opt.fontFaces,E=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,z=Object.assign({async:!0,allowTaint:!0,scale:E,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete z.onrendered,w.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,w.context2d.posX=this.opt.x,w.context2d.posY=this.opt.y,w.context2d.margin=this.opt.margin,w.context2d.fontFaces=T,T)for(var k=0;k<T.length;++k){var U=T[k],q=U.src.find(function(H){return H.format==="truetype"});q&&w.addFont(q.url,U.ref.name,U.ref.style)}return z.windowHeight=z.windowHeight||0,z.windowHeight=z.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):z.windowHeight,w.context2d.save(!0),n(this.prop.container,z)}).then(function(n){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(n),this.prop.canvas=n,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(h,n,w){return(w=w||"pdf").toLowerCase()==="img"||w.toLowerCase()==="image"?this.outputImg(h,n):this.outputPdf(h,n)},l.prototype.outputPdf=function(h,n){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,n)})},l.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},l.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(h){if(r(h)!=="object")return this;var n=Object.keys(h||{}).map(function(w){if(w in l.template.prop)return function(){this.prop[w]=h[w]};switch(w){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[w]=h[w]}}},this);return this.then(function(){return this.thenList(n)})},l.prototype.get=function(h,n){return this.then(function(){var w=h in l.template.prop?this.prop[h]:this.opt[h];return n?n(w):w})},l.prototype.setMargin=function(h){return this.then(function(){switch(r(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},l.prototype.setPageSize=function(h){function n(w,T){return Math.floor(w*T/72*96)}return this.then(function(){(h=h||Bn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:n(h.inner.width,h.k),height:n(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},l.prototype.setProgress=function(h,n,w,T){return h!=null&&(this.progress.val=h),n!=null&&(this.progress.state=n),w!=null&&(this.progress.n=w),T!=null&&(this.progress.stack=T),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(h,n,w,T){return this.setProgress(h?this.progress.val+h:null,n||null,w?this.progress.n+w:null,T?this.progress.stack.concat(T):null)},l.prototype.then=function(h,n){var w=this;return this.thenCore(h,n,function(T,E){return w.updateProgress(null,null,1,[T]),Promise.prototype.then.call(this,function(z){return w.updateProgress(null,T),z}).then(T,E).then(function(z){return w.updateProgress(1),z})})},l.prototype.thenCore=function(h,n,w){w=w||Promise.prototype.then,h&&(h=h.bind(this)),n&&(n=n.bind(this));var T=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),E=w.call(T,h,n);return l.convert(E,this.__proto__)},l.prototype.thenExternal=function(h,n){return Promise.prototype.then.call(this,h,n)},l.prototype.thenList=function(h){var n=this;return h.forEach(function(w){n=n.thenCore(w)}),n},l.prototype.catch=function(h){h&&(h=h.bind(this));var n=Promise.prototype.catch.call(this,h);return l.convert(n,this)},l.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},l.prototype.error=function(h){return this.then(function(){throw new Error(h)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Bn.getPageSize=function(h,n,w){if(Is(h)==="object"){var T=h;h=T.orientation,n=T.unit||n,w=T.format||w}n=n||"mm",w=w||"a4",h=(""+(h||"P")).toLowerCase();var E,z=(""+w).toLowerCase(),k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(n){case"pt":E=1;break;case"mm":E=72/25.4;break;case"cm":E=72/2.54;break;case"in":E=72;break;case"px":E=.75;break;case"pc":case"em":E=12;break;case"ex":E=6;break;default:throw"Invalid unit: "+n}var U,q=0,H=0;if(k.hasOwnProperty(z))q=k[z][1]/E,H=k[z][0]/E;else try{q=w[1],H=w[0]}catch{throw new Error("Invalid format: "+w)}if(h==="p"||h==="portrait")h="p",H>q&&(U=H,H=q,q=U);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",q>H&&(U=H,H=q,q=U)}return{width:H,height:q,unit:n,k:E,orientation:h}},t.html=function(h,n){(n=n||{}).callback=n.callback||function(){},n.html2canvas=n.html2canvas||{},n.html2canvas.canvas=n.html2canvas.canvas||this.canvas,n.jsPDF=n.jsPDF||this,n.fontFaces=n.fontFaces?n.fontFaces.map(LM):null;var w=new l(n);return n.worker?w:w.from(h).doCallback()}}(Bn.API),Bn.API.addJS=function(t){return bZ=t,this.internal.events.subscribe("postPutResources",function(){pC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(pC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),CZ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+bZ+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){pC!==void 0&&CZ!==void 0&&this.internal.out("/Names <</JavaScript "+pC+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var a=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=a.outline.render().split(/\r\n/),l=0;l<s.length;l++){var h=s[l],n=r.exec(h);if(n!=null){var w=n[1];a.internal.newObjectDeferredBegin(w,!1)}a.internal.write(h)}if(this.outline.createNamedDestinations){var T=this.internal.pages.length,E=[];for(l=0;l<T;l++){var z=a.internal.newObject();E.push(z);var k=a.internal.getPageInfo(l+1);a.internal.write("<< /D["+k.objId+" 0 R /XYZ null null null]>> endobj")}var U=a.internal.newObject();for(a.internal.write("<< /Names [ "),l=0;l<E.length;l++)a.internal.write("(page_"+(l+1)+")"+E[l]+" 0 R");a.internal.write(" ] >>","endobj"),e=a.internal.newObject(),a.internal.write("<< /Dests "+U+" 0 R"),a.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(r,s,l){var h={title:s,options:l,children:[]};return r==null&&(r=this.root),r.children.push(h),h},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(r){r.id=a.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},a.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},a.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var h=r.children[l];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var n=this.count=this.count_r({count:0},h);if(n>0&&this.line("/Count "+n),h.options&&h.options.pageNumber){var w=a.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+w.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var T=0;T<r.children.length;T++)this.renderItems(r.children[T])},a.outline.line=function(r){this.ctx.val+=r+`\r
`},a.outline.makeRef=function(r){return r.id+" 0 R"},a.outline.makeString=function(r){return"("+a.internal.pdfEscape(r)+")"},a.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(r,s){for(var l=0;l<s.children.length;l++)r.count++,this.count_r(r,s.children[l]);return r.count}}])}(Bn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(a,r,s,l,h,n){var w,T=this.decode.DCT_DECODE,E=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=h||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,(w=function(z){for(var k,U=256*z.charCodeAt(4)+z.charCodeAt(5),q=z.length,H={width:0,height:0,numcomponents:1},$=4;$<q;$+=2){if($+=U,e.indexOf(z.charCodeAt($+1))!==-1){k=256*z.charCodeAt($+5)+z.charCodeAt($+6),H={width:256*z.charCodeAt($+7)+z.charCodeAt($+8),height:k,numcomponents:z.charCodeAt($+9)};break}U=256*z.charCodeAt($+2)+z.charCodeAt($+3)}return H}(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a)).numcomponents){case 1:n=this.color_spaces.DEVICE_GRAY;break;case 4:n=this.color_spaces.DEVICE_CMYK;break;case 3:n=this.color_spaces.DEVICE_RGB}E={data:a,width:w.width,height:w.height,colorSpace:n,bitsPerComponent:8,filter:T,index:r,alias:s}}return E}}(Bn.API);var m_,mC,xZ,PZ,EZ,U2e=function(){var t,e,a;function r(l){var h,n,w,T,E,z,k,U,q,H,$,Q,ne,de;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},z=null;;){switch(h=this.readUInt32(),q=(function(){var ge,fe;for(fe=[],ge=0;ge<4;++ge)fe.push(String.fromCharCode(this.data[this.pos++]));return fe}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":z&&this.animation.frames.push(z),this.pos+=4,z={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},E=this.readUInt16(),T=this.readUInt16()||100,z.delay=1e3*E/T,z.disposeOp=this.data[this.pos++],z.blendOp=this.data[this.pos++],z.data=[];break;case"IDAT":case"fdAT":for(q==="fdAT"&&(this.pos+=4,h-=4),l=(z!=null?z.data:void 0)||this.imgData,Q=0;0<=h?Q<h:Q>h;0<=h?++Q:--Q)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(w=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>w)throw new Error("More transparent colors than palette size");if((H=w-this.transparency.indexed.length)>0)for(ne=0;0<=H?ne<H:ne>H;0<=H?++ne:--ne)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":k=($=this.read(h)).indexOf(0),U=String.fromCharCode.apply(String,$.slice(0,k)),this.text[U]=String.fromCharCode.apply(String,$.slice(k+1));break;case"IEND":return z&&this.animation.frames.push(z),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(de=this.colorType)===4||de===6,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var h,n;for(n=[],h=0;0<=l?h<l:h>l;0<=l?++h:--h)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var h=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*h),w=0,T=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function E(z,k,U,q){var H,$,Q,ne,de,ge,fe,_e,me,Ae,Te,Oe,ie,we,Me,Ve,Ie,Ue,Be,ke,Je,Le=Math.ceil((T.width-z)/U),qe=Math.ceil((T.height-k)/q),ye=T.width==Le&&T.height==qe;for(we=h*Le,Oe=ye?n:new Uint8Array(we*qe),ge=l.length,ie=0,$=0;ie<qe&&w<ge;){switch(l[w++]){case 0:for(ne=Ie=0;Ie<we;ne=Ie+=1)Oe[$++]=l[w++];break;case 1:for(ne=Ue=0;Ue<we;ne=Ue+=1)H=l[w++],de=ne<h?0:Oe[$-h],Oe[$++]=(H+de)%256;break;case 2:for(ne=Be=0;Be<we;ne=Be+=1)H=l[w++],Q=(ne-ne%h)/h,Me=ie&&Oe[(ie-1)*we+Q*h+ne%h],Oe[$++]=(Me+H)%256;break;case 3:for(ne=ke=0;ke<we;ne=ke+=1)H=l[w++],Q=(ne-ne%h)/h,de=ne<h?0:Oe[$-h],Me=ie&&Oe[(ie-1)*we+Q*h+ne%h],Oe[$++]=(H+Math.floor((de+Me)/2))%256;break;case 4:for(ne=Je=0;Je<we;ne=Je+=1)H=l[w++],Q=(ne-ne%h)/h,de=ne<h?0:Oe[$-h],ie===0?Me=Ve=0:(Me=Oe[(ie-1)*we+Q*h+ne%h],Ve=Q&&Oe[(ie-1)*we+(Q-1)*h+ne%h]),fe=de+Me-Ve,_e=Math.abs(fe-de),Ae=Math.abs(fe-Me),Te=Math.abs(fe-Ve),me=_e<=Ae&&_e<=Te?de:Ae<=Te?Me:Ve,Oe[$++]=(H+me)%256;break;default:throw new Error("Invalid filter algorithm: "+l[w-1])}if(!ye){var ze=((k+ie*q)*T.width+z)*h,We=ie*we;for(ne=0;ne<Le;ne+=1){for(var lt=0;lt<h;lt+=1)n[ze++]=Oe[We++];ze+=(U-1)*h}}ie++}}return l=g2e(l),T.interlaceMethod==1?(E(0,0,8,8),E(4,0,8,8),E(0,4,4,8),E(2,0,4,4),E(0,2,2,4),E(1,0,2,2),E(0,1,1,2)):E(0,0,1,1),n},r.prototype.decodePalette=function(){var l,h,n,w,T,E,z,k,U;for(n=this.palette,E=this.transparency.indexed||[],T=new Uint8Array((E.length||0)+n.length),w=0,l=0,h=z=0,k=n.length;z<k;h=z+=3)T[w++]=n[h],T[w++]=n[h+1],T[w++]=n[h+2],T[w++]=(U=E[l++])!=null?U:255;return T},r.prototype.copyToImageData=function(l,h){var n,w,T,E,z,k,U,q,H,$,Q;if(w=this.colors,H=null,n=this.hasAlphaChannel,this.palette.length&&(H=(Q=this._decodedPalette)!=null?Q:this._decodedPalette=this.decodePalette(),w=4,n=!0),q=(T=l.data||l).length,z=H||h,E=k=0,w===1)for(;E<q;)U=H?4*h[E/4]:k,$=z[U++],T[E++]=$,T[E++]=$,T[E++]=$,T[E++]=n?z[U++]:255,k=U;else for(;E<q;)U=H?4*h[E/4]:k,T[E++]=z[U++],T[E++]=z[U++],T[E++]=z[U++],T[E++]=n?z[U++]:255,k=U},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var s=function(){if(Object.prototype.toString.call($n)==="[object Window]"){try{e=$n.document.createElement("canvas"),a=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(l){var h;if(s()===!0)return a.width=l.width,a.height=l.height,a.clearRect(0,0,l.width,l.height),a.putImageData(l,0,0),(h=new Image).src=e.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var h,n,w,T,E,z,k,U;if(this.animation){for(U=[],n=E=0,z=(k=this.animation.frames).length;E<z;n=++E)h=k[n],w=l.createImageData(h.width,h.height),T=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(w,T),h.imageData=w,U.push(h.image=t(w));return U}},r.prototype.renderFrame=function(l,h){var n,w,T;return n=(w=this.animation.frames)[h],T=w[h-1],h===0&&l.clearRect(0,0,this.width,this.height),(T!=null?T.disposeOp:void 0)===1?l.clearRect(T.xOffset,T.yOffset,T.width,T.height):(T!=null?T.disposeOp:void 0)===2&&l.putImageData(T.imageData,T.xOffset,T.yOffset),n.blendOp===0&&l.clearRect(n.xOffset,n.yOffset,n.width,n.height),l.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(l){var h,n,w,T,E,z,k=this;return n=0,z=this.animation,T=z.numFrames,w=z.frames,E=z.numPlays,(h=function(){var U,q;if(U=n++%T,q=w[U],k.renderFrame(l,U),T>1&&n/T<E)return k.animation._timeout=setTimeout(h,q.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var h,n;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,h=l.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(n=h.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),h.putImageData(n,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function k2e(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,s=t[e++],l=s>>7,h=1<<(7&s)+1;t[e++],t[e++];var n=null,w=null;l&&(n=e,w=h,e+=3*h);var T=!0,E=[],z=0,k=null,U=0,q=null;for(this.width=a,this.height=r;T&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,q=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((ie=t[e++])>=0))throw Error("Invalid block size");if(ie===0)break;e+=ie}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var H=t[e++];z=t[e++]|t[e++]<<8,k=t[e++],(1&H)==0&&(k=null),U=H>>2&7,e++;break;case 254:for(;;){if(!((ie=t[e++])>=0))throw Error("Invalid block size");if(ie===0)break;e+=ie}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var $=t[e++]|t[e++]<<8,Q=t[e++]|t[e++]<<8,ne=t[e++]|t[e++]<<8,de=t[e++]|t[e++]<<8,ge=t[e++],fe=ge>>6&1,_e=1<<(7&ge)+1,me=n,Ae=w,Te=!1;ge>>7&&(Te=!0,me=e,Ae=_e,e+=3*_e);var Oe=e;for(e++;;){var ie;if(!((ie=t[e++])>=0))throw Error("Invalid block size");if(ie===0)break;e+=ie}E.push({x:$,y:Q,width:ne,height:de,has_local_palette:Te,palette_offset:me,palette_size:Ae,data_offset:Oe,data_length:e-Oe,transparent_index:k,interlaced:!!fe,delay:z,disposal:U});break;case 59:T=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return E.length},this.loopCount=function(){return q},this.frameInfo=function(we){if(we<0||we>=E.length)throw new Error("Frame index out of range.");return E[we]},this.decodeAndBlitFrameBGRA=function(we,Me){var Ve=this.frameInfo(we),Ie=Ve.width*Ve.height,Ue=new Uint8Array(Ie);NZ(t,Ve.data_offset,Ue,Ie);var Be=Ve.palette_offset,ke=Ve.transparent_index;ke===null&&(ke=256);var Je=Ve.width,Le=a-Je,qe=Je,ye=4*(Ve.y*a+Ve.x),ze=4*((Ve.y+Ve.height)*a+Ve.x),We=ye,lt=4*Le;Ve.interlaced===!0&&(lt+=4*a*7);for(var vt=8,Ot=0,dt=Ue.length;Ot<dt;++Ot){var pt=Ue[Ot];if(qe===0&&(qe=Je,(We+=lt)>=ze&&(lt=4*Le+4*a*(vt-1),We=ye+(Je+Le)*(vt<<1),vt>>=1)),pt===ke)We+=4;else{var ve=t[Be+3*pt],ea=t[Be+3*pt+1],Kt=t[Be+3*pt+2];Me[We++]=Kt,Me[We++]=ea,Me[We++]=ve,Me[We++]=255}--qe}},this.decodeAndBlitFrameRGBA=function(we,Me){var Ve=this.frameInfo(we),Ie=Ve.width*Ve.height,Ue=new Uint8Array(Ie);NZ(t,Ve.data_offset,Ue,Ie);var Be=Ve.palette_offset,ke=Ve.transparent_index;ke===null&&(ke=256);var Je=Ve.width,Le=a-Je,qe=Je,ye=4*(Ve.y*a+Ve.x),ze=4*((Ve.y+Ve.height)*a+Ve.x),We=ye,lt=4*Le;Ve.interlaced===!0&&(lt+=4*a*7);for(var vt=8,Ot=0,dt=Ue.length;Ot<dt;++Ot){var pt=Ue[Ot];if(qe===0&&(qe=Je,(We+=lt)>=ze&&(lt=4*Le+4*a*(vt-1),We=ye+(Je+Le)*(vt<<1),vt>>=1)),pt===ke)We+=4;else{var ve=t[Be+3*pt],ea=t[Be+3*pt+1],Kt=t[Be+3*pt+2];Me[We++]=ve,Me[We++]=ea,Me[We++]=Kt,Me[We++]=255}--qe}}}function NZ(t,e,a,r){for(var s=t[e++],l=1<<s,h=l+1,n=h+1,w=s+1,T=(1<<w)-1,E=0,z=0,k=0,U=t[e++],q=new Int32Array(4096),H=null;;){for(;E<16&&U!==0;)z|=t[e++]<<E,E+=8,U===1?U=t[e++]:--U;if(E<w)break;var $=z&T;if(z>>=w,E-=w,$!==l){if($===h)break;for(var Q=$<n?$:H,ne=0,de=Q;de>l;)de=q[de]>>8,++ne;var ge=de;if(k+ne+(Q!==$?1:0)>r)return void no.log("Warning, gif stream longer than expected.");a[k++]=ge;var fe=k+=ne;for(Q!==$&&(a[k++]=ge),de=Q;ne--;)de=q[de],a[--fe]=255&de,de>>=8;H!==null&&n<4096&&(q[n++]=H<<8|ge,n>=T+1&&w<12&&(++w,T=T<<1|1)),H=$}else n=h+1,T=(1<<(w=s+1))-1,H=null}return k!==r&&no.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function d5(t){var e,a,r,s,l,h=Math.floor,n=new Array(64),w=new Array(64),T=new Array(64),E=new Array(64),z=new Array(65535),k=new Array(65535),U=new Array(64),q=new Array(64),H=[],$=0,Q=7,ne=new Array(64),de=new Array(64),ge=new Array(64),fe=new Array(256),_e=new Array(2048),me=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Ae=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Te=[0,1,2,3,4,5,6,7,8,9,10,11],Oe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ie=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],we=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Me=[0,1,2,3,4,5,6,7,8,9,10,11],Ve=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ue(ye,ze){for(var We=0,lt=0,vt=new Array,Ot=1;Ot<=16;Ot++){for(var dt=1;dt<=ye[Ot];dt++)vt[ze[lt]]=[],vt[ze[lt]][0]=We,vt[ze[lt]][1]=Ot,lt++,We++;We*=2}return vt}function Be(ye){for(var ze=ye[0],We=ye[1]-1;We>=0;)ze&1<<We&&($|=1<<Q),We--,--Q<0&&($==255?(ke(255),ke(0)):ke($),Q=7,$=0)}function ke(ye){H.push(ye)}function Je(ye){ke(ye>>8&255),ke(255&ye)}function Le(ye,ze,We,lt,vt){for(var Ot,dt=vt[0],pt=vt[240],ve=function(za,nr){var cr,ur,Pr,ka,jr,pn,Dn,Rn,va,Wa,ca=0;for(va=0;va<8;++va){cr=za[ca],ur=za[ca+1],Pr=za[ca+2],ka=za[ca+3],jr=za[ca+4],pn=za[ca+5],Dn=za[ca+6];var Qa=cr+(Rn=za[ca+7]),yr=cr-Rn,jn=ur+Dn,Mn=ur-Dn,mn=Pr+pn,en=Pr-pn,Er=ka+jr,As=ka-jr,ki=Qa+Er,Ji=Qa-Er,zo=jn+mn,Ei=jn-mn;za[ca]=ki+zo,za[ca+4]=ki-zo;var hn=.707106781*(Ei+Ji);za[ca+2]=Ji+hn,za[ca+6]=Ji-hn;var ui=.382683433*((ki=As+en)-(Ei=Mn+yr)),Ec=.5411961*ki+ui,Fs=1.306562965*Ei+ui,Xt=.707106781*(zo=en+Mn),be=yr+Xt,De=yr-Xt;za[ca+5]=De+Ec,za[ca+3]=De-Ec,za[ca+1]=be+Fs,za[ca+7]=be-Fs,ca+=8}for(ca=0,va=0;va<8;++va){cr=za[ca],ur=za[ca+8],Pr=za[ca+16],ka=za[ca+24],jr=za[ca+32],pn=za[ca+40],Dn=za[ca+48];var at=cr+(Rn=za[ca+56]),At=cr-Rn,mt=ur+Dn,Ct=ur-Dn,kt=Pr+pn,Pt=Pr-pn,qt=ka+jr,Ht=ka-jr,Zt=at+qt,Ra=at-qt,Ma=mt+kt,Ba=mt-kt;za[ca]=Zt+Ma,za[ca+32]=Zt-Ma;var Ar=.707106781*(Ba+Ra);za[ca+16]=Ra+Ar,za[ca+48]=Ra-Ar;var Nr=.382683433*((Zt=Ht+Pt)-(Ba=Ct+At)),Vr=.5411961*Zt+Nr,Gr=1.306562965*Ba+Nr,zn=.707106781*(Ma=Pt+Ct),Xn=At+zn,qr=At-zn;za[ca+40]=qr+Vr,za[ca+24]=qr-Vr,za[ca+8]=Xn+Gr,za[ca+56]=Xn-Gr,ca++}for(va=0;va<64;++va)Wa=za[va]*nr[va],U[va]=Wa>0?Wa+.5|0:Wa-.5|0;return U}(ye,ze),ea=0;ea<64;++ea)q[me[ea]]=ve[ea];var Kt=q[0]-We;We=q[0],Kt==0?Be(lt[0]):(Be(lt[k[Ot=32767+Kt]]),Be(z[Ot]));for(var Ea=63;Ea>0&&q[Ea]==0;)Ea--;if(Ea==0)return Be(dt),We;for(var Bt,la=1;la<=Ea;){for(var St=la;q[la]==0&&la<=Ea;)++la;var vr=la-St;if(vr>=16){Bt=vr>>4;for(var Va=1;Va<=Bt;++Va)Be(pt);vr&=15}Ot=32767+q[la],Be(vt[(vr<<4)+k[Ot]]),Be(z[Ot]),la++}return Ea!=63&&Be(dt),We}function qe(ye){ye=Math.min(Math.max(ye,1),100),l!=ye&&(function(ze){for(var We=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],lt=0;lt<64;lt++){var vt=h((We[lt]*ze+50)/100);vt=Math.min(Math.max(vt,1),255),n[me[lt]]=vt}for(var Ot=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],dt=0;dt<64;dt++){var pt=h((Ot[dt]*ze+50)/100);pt=Math.min(Math.max(pt,1),255),w[me[dt]]=pt}for(var ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ea=0,Kt=0;Kt<8;Kt++)for(var Ea=0;Ea<8;Ea++)T[ea]=1/(n[me[ea]]*ve[Kt]*ve[Ea]*8),E[ea]=1/(w[me[ea]]*ve[Kt]*ve[Ea]*8),ea++}(ye<50?Math.floor(5e3/ye):Math.floor(200-2*ye)),l=ye)}this.encode=function(ye,ze){ze&&qe(ze),H=new Array,$=0,Q=7,Je(65496),Je(65504),Je(16),ke(74),ke(70),ke(73),ke(70),ke(0),ke(1),ke(1),ke(0),Je(1),Je(1),ke(0),ke(0),function(){Je(65499),Je(132),ke(0);for(var ur=0;ur<64;ur++)ke(n[ur]);ke(1);for(var Pr=0;Pr<64;Pr++)ke(w[Pr])}(),function(ur,Pr){Je(65472),Je(17),ke(8),Je(Pr),Je(ur),ke(3),ke(1),ke(17),ke(0),ke(2),ke(17),ke(1),ke(3),ke(17),ke(1)}(ye.width,ye.height),function(){Je(65476),Je(418),ke(0);for(var ur=0;ur<16;ur++)ke(Ae[ur+1]);for(var Pr=0;Pr<=11;Pr++)ke(Te[Pr]);ke(16);for(var ka=0;ka<16;ka++)ke(Oe[ka+1]);for(var jr=0;jr<=161;jr++)ke(ie[jr]);ke(1);for(var pn=0;pn<16;pn++)ke(we[pn+1]);for(var Dn=0;Dn<=11;Dn++)ke(Me[Dn]);ke(17);for(var Rn=0;Rn<16;Rn++)ke(Ve[Rn+1]);for(var va=0;va<=161;va++)ke(Ie[va])}(),Je(65498),Je(12),ke(3),ke(1),ke(0),ke(2),ke(17),ke(3),ke(17),ke(0),ke(63),ke(0);var We=0,lt=0,vt=0;$=0,Q=7,this.encode.displayName="_encode_";for(var Ot,dt,pt,ve,ea,Kt,Ea,Bt,la,St=ye.data,vr=ye.width,Va=ye.height,za=4*vr,nr=0;nr<Va;){for(Ot=0;Ot<za;){for(ea=za*nr+Ot,Ea=-1,Bt=0,la=0;la<64;la++)Kt=ea+(Bt=la>>3)*za+(Ea=4*(7&la)),nr+Bt>=Va&&(Kt-=za*(nr+1+Bt-Va)),Ot+Ea>=za&&(Kt-=Ot+Ea-za+4),dt=St[Kt++],pt=St[Kt++],ve=St[Kt++],ne[la]=(_e[dt]+_e[pt+256>>0]+_e[ve+512>>0]>>16)-128,de[la]=(_e[dt+768>>0]+_e[pt+1024>>0]+_e[ve+1280>>0]>>16)-128,ge[la]=(_e[dt+1280>>0]+_e[pt+1536>>0]+_e[ve+1792>>0]>>16)-128;We=Le(ne,T,We,e,r),lt=Le(de,E,lt,a,s),vt=Le(ge,E,vt,a,s),Ot+=32}nr+=8}if(Q>=0){var cr=[];cr[1]=Q+1,cr[0]=(1<<Q+1)-1,Be(cr)}return Je(65497),new Uint8Array(H)},t=t||50,function(){for(var ye=String.fromCharCode,ze=0;ze<256;ze++)fe[ze]=ye(ze)}(),e=Ue(Ae,Te),a=Ue(we,Me),r=Ue(Oe,ie),s=Ue(Ve,Ie),function(){for(var ye=1,ze=2,We=1;We<=15;We++){for(var lt=ye;lt<ze;lt++)k[32767+lt]=We,z[32767+lt]=[],z[32767+lt][1]=We,z[32767+lt][0]=lt;for(var vt=-(ze-1);vt<=-ye;vt++)k[32767+vt]=We,z[32767+vt]=[],z[32767+vt][1]=We,z[32767+vt][0]=ze-1+vt;ye<<=1,ze<<=1}}(),function(){for(var ye=0;ye<256;ye++)_e[ye]=19595*ye,_e[ye+256>>0]=38470*ye,_e[ye+512>>0]=7471*ye+32768,_e[ye+768>>0]=-11059*ye,_e[ye+1024>>0]=-21709*ye,_e[ye+1280>>0]=32768*ye+8421375,_e[ye+1536>>0]=-27439*ye,_e[ye+1792>>0]=-5329*ye}(),qe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function _p(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function VZ(t){function e(Ae){if(!Ae)throw Error("assert :P")}function a(Ae,Te,Oe){for(var ie=0;4>ie;ie++)if(Ae[Te+ie]!=Oe.charCodeAt(ie))return!0;return!1}function r(Ae,Te,Oe,ie,we){for(var Me=0;Me<we;Me++)Ae[Te+Me]=Oe[ie+Me]}function s(Ae,Te,Oe,ie){for(var we=0;we<ie;we++)Ae[Te+we]=Oe}function l(Ae){return new Int32Array(Ae)}function h(Ae,Te){for(var Oe=[],ie=0;ie<Ae;ie++)Oe.push(new Te);return Oe}function n(Ae,Te){var Oe=[];return function ie(we,Me,Ve){for(var Ie=Ve[Me],Ue=0;Ue<Ie&&(we.push(Ve.length>Me+1?[]:new Te),!(Ve.length<Me+1));Ue++)ie(we[Ue],Me+1,Ve)}(Oe,0,Ae),Oe}var w=function(){var Ae=this;function Te(G,J){for(var he=1<<J-1>>>0;G&he;)he>>>=1;return he?(G&he-1)+he:G}function Oe(G,J,he,Ee,je){e(!(Ee%he));do G[J+(Ee-=he)]=je;while(0<Ee)}function ie(G,J,he,Ee,je){if(e(2328>=je),512>=je)var Qe=l(512);else if((Qe=l(je))==null)return 0;return function(tt,ot,ht,Tt,Jt,xt){var Aa,ra,wa=ot,fa=1<<ht,_t=l(16),ta=l(16);for(e(Jt!=0),e(Tt!=null),e(tt!=null),e(0<ht),ra=0;ra<Jt;++ra){if(15<Tt[ra])return 0;++_t[Tt[ra]]}if(_t[0]==Jt)return 0;for(ta[1]=0,Aa=1;15>Aa;++Aa){if(_t[Aa]>1<<Aa)return 0;ta[Aa+1]=ta[Aa]+_t[Aa]}for(ra=0;ra<Jt;++ra)Aa=Tt[ra],0<Tt[ra]&&(xt[ta[Aa]++]=ra);if(ta[15]==1)return(Tt=new we).g=0,Tt.value=xt[0],Oe(tt,wa,1,fa,Tt),fa;var Ga,Ka=-1,qa=fa-1,Sr=0,fr=1,rn=1,lr=1<<ht;for(ra=0,Aa=1,Jt=2;Aa<=ht;++Aa,Jt<<=1){if(fr+=rn<<=1,0>(rn-=_t[Aa]))return 0;for(;0<_t[Aa];--_t[Aa])(Tt=new we).g=Aa,Tt.value=xt[ra++],Oe(tt,wa+Sr,Jt,lr,Tt),Sr=Te(Sr,Aa)}for(Aa=ht+1,Jt=2;15>=Aa;++Aa,Jt<<=1){if(fr+=rn<<=1,0>(rn-=_t[Aa]))return 0;for(;0<_t[Aa];--_t[Aa]){if(Tt=new we,(Sr&qa)!=Ka){for(wa+=lr,Ga=1<<(Ka=Aa)-ht;15>Ka&&!(0>=(Ga-=_t[Ka]));)++Ka,Ga<<=1;fa+=lr=1<<(Ga=Ka-ht),tt[ot+(Ka=Sr&qa)].g=Ga+ht,tt[ot+Ka].value=wa-ot-Ka}Tt.g=Aa-ht,Tt.value=xt[ra++],Oe(tt,wa+(Sr>>ht),Jt,lr,Tt),Sr=Te(Sr,Aa)}}return fr!=2*ta[15]-1?0:fa}(G,J,he,Ee,je,Qe)}function we(){this.value=this.g=0}function Me(){this.value=this.g=0}function Ve(){this.G=h(5,we),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(bs,Me)}function Ie(G,J,he,Ee){e(G!=null),e(J!=null),e(2147483648>Ee),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=J,G.pa=he,G.Jd=J,G.Yc=he+Ee,G.Zc=4<=Ee?he+Ee-4+1:he,Ot(G)}function Ue(G,J){for(var he=0;0<J--;)he|=pt(G,128)<<J;return he}function Be(G,J){var he=Ue(G,J);return dt(G)?-he:he}function ke(G,J,he,Ee){var je,Qe=0;for(e(G!=null),e(J!=null),e(4294967288>Ee),G.Sb=Ee,G.Ra=0,G.u=0,G.h=0,4<Ee&&(Ee=4),je=0;je<Ee;++je)Qe+=J[he+je]<<8*je;G.Ra=Qe,G.bb=Ee,G.oa=J,G.pa=he}function Je(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<Na-8>>>0,++G.bb,G.u-=8;We(G)&&(G.h=1,G.u=0)}function Le(G,J){if(e(0<=J),!G.h&&J<=cc){var he=ze(G)&gi[J];return G.u+=J,Je(G),he}return G.h=1,G.u=0}function qe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ye(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ze(G){return G.Ra>>>(G.u&Na-1)>>>0}function We(G){return e(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>Na}function lt(G,J){G.u=J,G.h=We(G)}function vt(G){G.u>=Td&&(e(G.u>=Td),Je(G))}function Ot(G){e(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(e(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function dt(G){return Ue(G,1)}function pt(G,J){var he=G.Ca;0>G.b&&Ot(G);var Ee=G.b,je=he*J>>>8,Qe=(G.I>>>Ee>je)+0;for(Qe?(he-=je,G.I-=je+1<<Ee>>>0):he=je+1,Ee=he,je=0;256<=Ee;)je+=8,Ee>>=8;return Ee=7^je+Zs[Ee],G.b-=Ee,G.Ca=(he<<Ee)-1,Qe}function ve(G,J,he){G[J+0]=he>>24&255,G[J+1]=he>>16&255,G[J+2]=he>>8&255,G[J+3]=he>>0&255}function ea(G,J){return G[J+0]<<0|G[J+1]<<8}function Kt(G,J){return ea(G,J)|G[J+2]<<16}function Ea(G,J){return ea(G,J)|ea(G,J+2)<<16}function Bt(G,J){var he=1<<J;return e(G!=null),e(0<J),G.X=l(he),G.X==null?0:(G.Mb=32-J,G.Xa=J,1)}function la(G,J){e(G!=null),e(J!=null),e(G.Xa==J.Xa),r(J.X,0,G.X,0,1<<J.Xa)}function St(){this.X=[],this.Xa=this.Mb=0}function vr(G,J,he,Ee){e(he!=null),e(Ee!=null);var je=he[0],Qe=Ee[0];return je==0&&(je=(G*Qe+J/2)/J),Qe==0&&(Qe=(J*je+G/2)/G),0>=je||0>=Qe?0:(he[0]=je,Ee[0]=Qe,1)}function Va(G,J){return G+(1<<J)-1>>>J}function za(G,J){return((4278255360&G)+(4278255360&J)>>>0&4278255360)+((16711935&G)+(16711935&J)>>>0&16711935)>>>0}function nr(G,J){Ae[J]=function(he,Ee,je,Qe,tt,ot,ht){var Tt;for(Tt=0;Tt<tt;++Tt){var Jt=Ae[G](ot[ht+Tt-1],je,Qe+Tt);ot[ht+Tt]=za(he[Ee+Tt],Jt)}}}function cr(){this.ud=this.hd=this.jd=0}function ur(G,J){return((4278124286&(G^J))>>>1)+(G&J)>>>0}function Pr(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function ka(G,J){return Pr(G+(G-J+.5>>1))}function jr(G,J,he){return Math.abs(J-he)-Math.abs(G-he)}function pn(G,J,he,Ee,je,Qe,tt){for(Ee=Qe[tt-1],he=0;he<je;++he)Qe[tt+he]=Ee=za(G[J+he],Ee)}function Dn(G,J,he,Ee,je){var Qe;for(Qe=0;Qe<he;++Qe){var tt=G[J+Qe],ot=tt>>8&255,ht=16711935&(ht=(ht=16711935&tt)+((ot<<16)+ot));Ee[je+Qe]=(4278255360&tt)+ht>>>0}}function Rn(G,J){J.jd=G>>0&255,J.hd=G>>8&255,J.ud=G>>16&255}function va(G,J,he,Ee,je,Qe){var tt;for(tt=0;tt<Ee;++tt){var ot=J[he+tt],ht=ot>>>8,Tt=ot,Jt=255&(Jt=(Jt=ot>>>16)+((G.jd<<24>>24)*(ht<<24>>24)>>>5));Tt=255&(Tt=(Tt=Tt+((G.hd<<24>>24)*(ht<<24>>24)>>>5))+((G.ud<<24>>24)*(Jt<<24>>24)>>>5)),je[Qe+tt]=(4278255360&ot)+(Jt<<16)+Tt}}function Wa(G,J,he,Ee,je){Ae[J]=function(Qe,tt,ot,ht,Tt,Jt,xt,Aa,ra){for(ht=xt;ht<Aa;++ht)for(xt=0;xt<ra;++xt)Tt[Jt++]=je(ot[Ee(Qe[tt++])])},Ae[G]=function(Qe,tt,ot,ht,Tt,Jt,xt){var Aa=8>>Qe.b,ra=Qe.Ea,wa=Qe.K[0],fa=Qe.w;if(8>Aa)for(Qe=(1<<Qe.b)-1,fa=(1<<Aa)-1;tt<ot;++tt){var _t,ta=0;for(_t=0;_t<ra;++_t)_t&Qe||(ta=Ee(ht[Tt++])),Jt[xt++]=je(wa[ta&fa]),ta>>=Aa}else Ae["VP8LMapColor"+he](ht,Tt,wa,fa,Jt,xt,tt,ot,ra)}}function ca(G,J,he,Ee,je){for(he=J+he;J<he;){var Qe=G[J++];Ee[je++]=Qe>>16&255,Ee[je++]=Qe>>8&255,Ee[je++]=Qe>>0&255}}function Qa(G,J,he,Ee,je){for(he=J+he;J<he;){var Qe=G[J++];Ee[je++]=Qe>>16&255,Ee[je++]=Qe>>8&255,Ee[je++]=Qe>>0&255,Ee[je++]=Qe>>24&255}}function yr(G,J,he,Ee,je){for(he=J+he;J<he;){var Qe=(tt=G[J++])>>16&240|tt>>12&15,tt=tt>>0&240|tt>>28&15;Ee[je++]=Qe,Ee[je++]=tt}}function jn(G,J,he,Ee,je){for(he=J+he;J<he;){var Qe=(tt=G[J++])>>16&248|tt>>13&7,tt=tt>>5&224|tt>>3&31;Ee[je++]=Qe,Ee[je++]=tt}}function Mn(G,J,he,Ee,je){for(he=J+he;J<he;){var Qe=G[J++];Ee[je++]=Qe>>0&255,Ee[je++]=Qe>>8&255,Ee[je++]=Qe>>16&255}}function mn(G,J,he,Ee,je,Qe){if(Qe==0)for(he=J+he;J<he;)ve(Ee,((Qe=G[J++])[0]>>24|Qe[1]>>8&65280|Qe[2]<<8&16711680|Qe[3]<<24)>>>0),je+=32;else r(Ee,je,G,J,he)}function en(G,J){Ae[J][0]=Ae[G+"0"],Ae[J][1]=Ae[G+"1"],Ae[J][2]=Ae[G+"2"],Ae[J][3]=Ae[G+"3"],Ae[J][4]=Ae[G+"4"],Ae[J][5]=Ae[G+"5"],Ae[J][6]=Ae[G+"6"],Ae[J][7]=Ae[G+"7"],Ae[J][8]=Ae[G+"8"],Ae[J][9]=Ae[G+"9"],Ae[J][10]=Ae[G+"10"],Ae[J][11]=Ae[G+"11"],Ae[J][12]=Ae[G+"12"],Ae[J][13]=Ae[G+"13"],Ae[J][14]=Ae[G+"0"],Ae[J][15]=Ae[G+"0"]}function Er(G){return G==Au||G==Gu||G==mc||G==Ip}function As(){this.eb=[],this.size=this.A=this.fb=0}function ki(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ji(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new As,this.f.kb=new ki,this.sd=null}function zo(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ei(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function hn(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function ui(G,J){var he=G.T,Ee=J.ba.f.RGBA,je=Ee.eb,Qe=Ee.fb+G.ka*Ee.A,tt=tl[J.ba.S],ot=G.y,ht=G.O,Tt=G.f,Jt=G.N,xt=G.ea,Aa=G.W,ra=J.cc,wa=J.dc,fa=J.Mc,_t=J.Nc,ta=G.ka,Ga=G.ka+G.T,Ka=G.U,qa=Ka+1>>1;for(ta==0?tt(ot,ht,null,null,Tt,Jt,xt,Aa,Tt,Jt,xt,Aa,je,Qe,null,null,Ka):(tt(J.ec,J.fc,ot,ht,ra,wa,fa,_t,Tt,Jt,xt,Aa,je,Qe-Ee.A,je,Qe,Ka),++he);ta+2<Ga;ta+=2)ra=Tt,wa=Jt,fa=xt,_t=Aa,Jt+=G.Rc,Aa+=G.Rc,Qe+=2*Ee.A,tt(ot,(ht+=2*G.fa)-G.fa,ot,ht,ra,wa,fa,_t,Tt,Jt,xt,Aa,je,Qe-Ee.A,je,Qe,Ka);return ht+=G.fa,G.j+Ga<G.o?(r(J.ec,J.fc,ot,ht,Ka),r(J.cc,J.dc,Tt,Jt,qa),r(J.Mc,J.Nc,xt,Aa,qa),he--):1&Ga||tt(ot,ht,null,null,Tt,Jt,xt,Aa,Tt,Jt,xt,Aa,je,Qe+Ee.A,null,null,Ka),he}function Ec(G,J,he){var Ee=G.F,je=[G.J];if(Ee!=null){var Qe=G.U,tt=J.ba.S,ot=tt==Qo||tt==mc;J=J.ba.f.RGBA;var ht=[0],Tt=G.ka;ht[0]=G.T,G.Kb&&(Tt==0?--ht[0]:(--Tt,je[0]-=G.width),G.j+G.ka+G.T==G.o&&(ht[0]=G.o-G.j-Tt));var Jt=J.eb;Tt=J.fb+Tt*J.A,G=ti(Ee,je[0],G.width,Qe,ht,Jt,Tt+(ot?0:3),J.A),e(he==ht),G&&Er(tt)&&cs(Jt,Tt,ot,Qe,ht,J.A)}return 0}function Fs(G){var J=G.ma,he=J.ba.S,Ee=11>he,je=he==xd||he==zh||he==Qo||he==dl||he==12||Er(he);if(J.memory=null,J.Ib=null,J.Jb=null,J.Nd=null,!$l(J.Oa,G,je?11:12))return 0;if(je&&Er(he)&&ar(),G.da)alert("todo:use_scaling");else{if(Ee){if(J.Ib=hn,G.Kb){if(he=G.U+1>>1,J.memory=l(G.U+2*he),J.memory==null)return 0;J.ec=J.memory,J.fc=0,J.cc=J.ec,J.dc=J.fc+G.U,J.Mc=J.cc,J.Nc=J.dc+he,J.Ib=ui,ar()}}else alert("todo:EmitYUV");je&&(J.Jb=Ec,Ee&&ha())}if(Ee&&!Zu){for(G=0;256>G;++G)jc[G]=89858*(G-128)+wu>>Vd,Zc[G]=-22014*(G-128)+wu,Od[G]=-45773*(G-128),qf[G]=113618*(G-128)+wu>>Vd;for(G=zd;G<Gc;++G)J=76283*(G-16)+wu>>Vd,Ds[G-zd]=cl(J,255),Up[G-zd]=cl(J+8>>4,15);Zu=1}return 1}function Xt(G){var J=G.ma,he=G.U,Ee=G.T;return e(!(1&G.ka)),0>=he||0>=Ee?0:(he=J.Ib(G,J),J.Jb!=null&&J.Jb(G,J,he),J.Dc+=he,1)}function be(G){G.ma.memory=null}function De(G,J,he,Ee){return Le(G,8)!=47?0:(J[0]=Le(G,14)+1,he[0]=Le(G,14)+1,Ee[0]=Le(G,1),Le(G,3)!=0?0:!G.h)}function at(G,J){if(4>G)return G+1;var he=G-2>>1;return(2+(1&G)<<he)+Le(J,he)+1}function At(G,J){return 120<J?J-120:1<=(he=((he=Xl[J-1])>>4)*G+(8-(15&he)))?he:1;var he}function mt(G,J,he){var Ee=ze(he),je=G[J+=255&Ee].g-8;return 0<je&&(lt(he,he.u+8),Ee=ze(he),J+=G[J].value,J+=Ee&(1<<je)-1),lt(he,he.u+G[J].g),G[J].value}function Ct(G,J,he){return he.g+=G.g,he.value+=G.value<<J>>>0,e(8>=he.g),G.g}function kt(G,J,he){var Ee=G.xc;return e((J=Ee==0?0:G.vc[G.md*(he>>Ee)+(J>>Ee)])<G.Wb),G.Ya[J]}function Pt(G,J,he,Ee){var je=G.ab,Qe=G.c*J,tt=G.C;J=tt+J;var ot=he,ht=Ee;for(Ee=G.Ta,he=G.Ua;0<je--;){var Tt=G.gc[je],Jt=tt,xt=J,Aa=ot,ra=ht,wa=(ht=Ee,ot=he,Tt.Ea);switch(e(Jt<xt),e(xt<=Tt.nc),Tt.hc){case 2:Vh(Aa,ra,(xt-Jt)*wa,ht,ot);break;case 0:var fa=Jt,_t=xt,ta=ht,Ga=ot,Ka=(lr=Tt).Ea;fa==0&&(co(Aa,ra,null,null,1,ta,Ga),pn(Aa,ra+1,0,0,Ka-1,ta,Ga+1),ra+=Ka,Ga+=Ka,++fa);for(var qa=1<<lr.b,Sr=qa-1,fr=Va(Ka,lr.b),rn=lr.K,lr=lr.w+(fa>>lr.b)*fr;fa<_t;){var _i=rn,bi=lr,Zn=1;for(ff(Aa,ra,ta,Ga-Ka,1,ta,Ga);Zn<Ka;){var ai=(Zn&~Sr)+qa;ai>Ka&&(ai=Ka),(0,Kl[_i[bi++]>>8&15])(Aa,ra+ +Zn,ta,Ga+Zn-Ka,ai-Zn,ta,Ga+Zn),Zn=ai}ra+=Ka,Ga+=Ka,++fa&Sr||(lr+=fr)}xt!=Tt.nc&&r(ht,ot-wa,ht,ot+(xt-Jt-1)*wa,wa);break;case 1:for(wa=Aa,_t=ra,Ka=(Aa=Tt.Ea)-(Ga=Aa&~(ta=(ra=1<<Tt.b)-1)),fa=Va(Aa,Tt.b),qa=Tt.K,Tt=Tt.w+(Jt>>Tt.b)*fa;Jt<xt;){for(Sr=qa,fr=Tt,rn=new cr,lr=_t+Ga,_i=_t+Aa;_t<lr;)Rn(Sr[fr++],rn),nh(rn,wa,_t,ra,ht,ot),_t+=ra,ot+=ra;_t<_i&&(Rn(Sr[fr++],rn),nh(rn,wa,_t,Ka,ht,ot),_t+=Ka,ot+=Ka),++Jt&ta||(Tt+=fa)}break;case 3:if(Aa==ht&&ra==ot&&0<Tt.b){for(_t=ht,Aa=wa=ot+(xt-Jt)*wa-(Ga=(xt-Jt)*Va(Tt.Ea,Tt.b)),ra=ht,ta=ot,fa=[],Ga=(Ka=Ga)-1;0<=Ga;--Ga)fa[Ga]=ra[ta+Ga];for(Ga=Ka-1;0<=Ga;--Ga)_t[Aa+Ga]=fa[Ga];ho(Tt,Jt,xt,ht,wa,ht,ot)}else ho(Tt,Jt,xt,Aa,ra,ht,ot)}ot=Ee,ht=he}ht!=he&&r(Ee,he,ot,ht,Qe)}function qt(G,J){var he=G.V,Ee=G.Ba+G.c*G.C,je=J-G.C;if(e(J<=G.l.o),e(16>=je),0<je){var Qe=G.l,tt=G.Ta,ot=G.Ua,ht=Qe.width;if(Pt(G,je,he,Ee),je=ot=[ot],e((he=G.C)<(Ee=J)),e(Qe.v<Qe.va),Ee>Qe.o&&(Ee=Qe.o),he<Qe.j){var Tt=Qe.j-he;he=Qe.j,je[0]+=Tt*ht}if(he>=Ee?he=0:(je[0]+=4*Qe.v,Qe.ka=he-Qe.j,Qe.U=Qe.va-Qe.v,Qe.T=Ee-he,he=1),he){if(ot=ot[0],11>(he=G.ca).S){var Jt=he.f.RGBA,xt=(Ee=he.S,je=Qe.U,Qe=Qe.T,Tt=Jt.eb,Jt.A),Aa=Qe;for(Jt=Jt.fb+G.Ma*Jt.A;0<Aa--;){var ra=tt,wa=ot,fa=je,_t=Tt,ta=Jt;switch(Ee){case pc:Sl(ra,wa,fa,_t,ta);break;case xd:Ro(ra,wa,fa,_t,ta);break;case Au:Ro(ra,wa,fa,_t,ta),cs(_t,ta,0,fa,1,0);break;case ci:Cl(ra,wa,fa,_t,ta);break;case zh:mn(ra,wa,fa,_t,ta,1);break;case Gu:mn(ra,wa,fa,_t,ta,1),cs(_t,ta,0,fa,1,0);break;case Qo:mn(ra,wa,fa,_t,ta,0);break;case mc:mn(ra,wa,fa,_t,ta,0),cs(_t,ta,1,fa,1,0);break;case dl:Sd(ra,wa,fa,_t,ta);break;case Ip:Sd(ra,wa,fa,_t,ta),Yn(_t,ta,fa,1,0);break;case kc:Dc(ra,wa,fa,_t,ta);break;default:e(0)}ot+=ht,Jt+=xt}G.Ma+=Qe}else alert("todo:EmitRescaledRowsYUVA");e(G.Ma<=he.height)}}G.C=J,e(G.C<=G.i)}function Ht(G){var J;if(0<G.ua)return 0;for(J=0;J<G.Wb;++J){var he=G.Ya[J].G,Ee=G.Ya[J].H;if(0<he[1][Ee[1]+0].g||0<he[2][Ee[2]+0].g||0<he[3][Ee[3]+0].g)return 0}return 1}function Zt(G,J,he,Ee,je,Qe){if(G.Z!=0){var tt=G.qd,ot=G.rd;for(e(hl[G.Z]!=null);J<he;++J)hl[G.Z](tt,ot,Ee,je,Ee,je,Qe),tt=Ee,ot=je,je+=Qe;G.qd=tt,G.rd=ot}}function Ra(G,J){var he=G.l.ma,Ee=he.Z==0||he.Z==1?G.l.j:G.C;if(Ee=G.C<Ee?Ee:G.C,e(J<=G.l.o),J>Ee){var je=G.l.width,Qe=he.ca,tt=he.tb+je*Ee,ot=G.V,ht=G.Ba+G.c*Ee,Tt=G.gc;e(G.ab==1),e(Tt[0].hc==3),Tl(Tt[0],Ee,J,ot,ht,Qe,tt),Zt(he,Ee,J,Qe,tt,je)}G.C=G.Ma=J}function Ma(G,J,he,Ee,je,Qe,tt){var ot=G.$/Ee,ht=G.$%Ee,Tt=G.m,Jt=G.s,xt=he+G.$,Aa=xt;je=he+Ee*je;var ra=he+Ee*Qe,wa=280+Jt.ua,fa=G.Pb?ot:16777216,_t=0<Jt.ua?Jt.Wa:null,ta=Jt.wc,Ga=xt<ra?kt(Jt,ht,ot):null;e(G.C<Qe),e(ra<=je);var Ka=!1;e:for(;;){for(;Ka||xt<ra;){var qa=0;if(ot>=fa){var Sr=xt-he;e((fa=G).Pb),fa.wd=fa.m,fa.xd=Sr,0<fa.s.ua&&la(fa.s.Wa,fa.s.vb),fa=ot+Zf}if(ht&ta||(Ga=kt(Jt,ht,ot)),e(Ga!=null),Ga.Qb&&(J[xt]=Ga.qb,Ka=!0),!Ka)if(vt(Tt),Ga.jc){qa=Tt,Sr=J;var fr=xt,rn=Ga.pd[ze(qa)&bs-1];e(Ga.jc),256>rn.g?(lt(qa,qa.u+rn.g),Sr[fr]=rn.value,qa=0):(lt(qa,qa.u+rn.g-256),e(256<=rn.value),qa=rn.value),qa==0&&(Ka=!0)}else qa=mt(Ga.G[0],Ga.H[0],Tt);if(Tt.h)break;if(Ka||256>qa){if(!Ka)if(Ga.nd)J[xt]=(Ga.qb|qa<<8)>>>0;else{if(vt(Tt),Ka=mt(Ga.G[1],Ga.H[1],Tt),vt(Tt),Sr=mt(Ga.G[2],Ga.H[2],Tt),fr=mt(Ga.G[3],Ga.H[3],Tt),Tt.h)break;J[xt]=(fr<<24|Ka<<16|qa<<8|Sr)>>>0}if(Ka=!1,++xt,++ht>=Ee&&(ht=0,++ot,tt!=null&&ot<=Qe&&!(ot%16)&&tt(G,ot),_t!=null))for(;Aa<xt;)qa=J[Aa++],_t.X[(506832829*qa&4294967295)>>>_t.Mb]=qa}else if(280>qa){if(qa=at(qa-256,Tt),Sr=mt(Ga.G[4],Ga.H[4],Tt),vt(Tt),Sr=At(Ee,Sr=at(Sr,Tt)),Tt.h)break;if(xt-he<Sr||je-xt<qa)break e;for(fr=0;fr<qa;++fr)J[xt+fr]=J[xt+fr-Sr];for(xt+=qa,ht+=qa;ht>=Ee;)ht-=Ee,++ot,tt!=null&&ot<=Qe&&!(ot%16)&&tt(G,ot);if(e(xt<=je),ht&ta&&(Ga=kt(Jt,ht,ot)),_t!=null)for(;Aa<xt;)qa=J[Aa++],_t.X[(506832829*qa&4294967295)>>>_t.Mb]=qa}else{if(!(qa<wa))break e;for(Ka=qa-280,e(_t!=null);Aa<xt;)qa=J[Aa++],_t.X[(506832829*qa&4294967295)>>>_t.Mb]=qa;qa=xt,e(!(Ka>>>(Sr=_t).Xa)),J[qa]=Sr.X[Ka],Ka=!0}Ka||e(Tt.h==We(Tt))}if(G.Pb&&Tt.h&&xt<je)e(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&la(G.s.vb,G.s.Wa);else{if(Tt.h)break e;tt!=null&&tt(G,ot>Qe?Qe:ot),G.a=0,G.$=xt-he}return 1}return G.a=3,0}function Ba(G){e(G!=null),G.vc=null,G.yc=null,G.Ya=null;var J=G.Wa;J!=null&&(J.X=null),G.vb=null,e(G!=null)}function Ar(){var G=new Om;return G==null?null:(G.a=0,G.xb=Lh,en("Predictor","VP8LPredictors"),en("Predictor","VP8LPredictors_C"),en("PredictorAdd","VP8LPredictorsAdd"),en("PredictorAdd","VP8LPredictorsAdd_C"),Vh=Dn,nh=va,Sl=ca,Ro=Qa,Sd=yr,Dc=jn,Cl=Mn,Ae.VP8LMapColor32b=Os,Ae.VP8LMapColor8b=Oc,G)}function Nr(G,J,he,Ee,je){var Qe=1,tt=[G],ot=[J],ht=Ee.m,Tt=Ee.s,Jt=null,xt=0;e:for(;;){if(he)for(;Qe&&Le(ht,1);){var Aa=tt,ra=ot,wa=Ee,fa=1,_t=wa.m,ta=wa.gc[wa.ab],Ga=Le(_t,2);if(wa.Oc&1<<Ga)Qe=0;else{switch(wa.Oc|=1<<Ga,ta.hc=Ga,ta.Ea=Aa[0],ta.nc=ra[0],ta.K=[null],++wa.ab,e(4>=wa.ab),Ga){case 0:case 1:ta.b=Le(_t,3)+2,fa=Nr(Va(ta.Ea,ta.b),Va(ta.nc,ta.b),0,wa,ta.K),ta.K=ta.K[0];break;case 3:var Ka,qa=Le(_t,8)+1,Sr=16<qa?0:4<qa?1:2<qa?2:3;if(Aa[0]=Va(ta.Ea,Sr),ta.b=Sr,Ka=fa=Nr(qa,1,0,wa,ta.K)){var fr,rn=qa,lr=ta,_i=1<<(8>>lr.b),bi=l(_i);if(bi==null)Ka=0;else{var Zn=lr.K[0],ai=lr.w;for(bi[0]=lr.K[0][0],fr=1;fr<1*rn;++fr)bi[fr]=za(Zn[ai+fr],bi[fr-1]);for(;fr<4*_i;++fr)bi[fr]=0;lr.K[0]=null,lr.K[0]=bi,Ka=1}}fa=Ka;break;case 2:break;default:e(0)}Qe=fa}}if(tt=tt[0],ot=ot[0],Qe&&Le(ht,1)&&!(Qe=1<=(xt=Le(ht,4))&&11>=xt)){Ee.a=3;break e}var Hi;if(Hi=Qe)t:{var Fn,_n,ds,Fi=Ee,Un=tt,po=ot,vi=xt,is=he,vn=Fi.m,Mi=Fi.s,qs=[null],To=1,rl=0,Pl=_u[vi];a:for(;;){if(is&&Le(vn,1)){var xs=Le(vn,3)+2,El=Va(Un,xs),Ru=Va(po,xs),Ca=El*Ru;if(!Nr(El,Ru,0,Fi,qs))break a;for(qs=qs[0],Mi.xc=xs,Fn=0;Fn<Ca;++Fn){var Ua=qs[Fn]>>8&65535;qs[Fn]=Ua,Ua>=To&&(To=Ua+1)}}if(vn.h)break a;for(_n=0;5>_n;++_n){var $i=el[_n];!_n&&0<vi&&($i+=1<<vi),rl<$i&&(rl=$i)}var zi=h(To*Pl,we),Gt=To,Bp=h(Gt,Ve);if(Bp==null)var sh=null;else e(65536>=Gt),sh=Bp;var oh=l(rl);if(sh==null||oh==null||zi==null){Fi.a=1;break a}var lh=zi;for(Fn=ds=0;Fn<To;++Fn){var Tu=sh[Fn],uh=Tu.G,qu=Tu.H,Im=0,Hf=1,Lm=0;for(_n=0;5>_n;++_n){$i=el[_n],uh[_n]=lh,qu[_n]=ds,!_n&&0<vi&&($i+=1<<vi);n:{var ch,Nl=$i,kh=Fi,qc=oh,Hc=lh,$f=ds,$c=0,nl=kh.m,Fm=Le(nl,1);if(s(qc,0,0,Nl),Fm){var to=Le(nl,1)+1,Vy=Le(nl,1),dh=Le(nl,Vy==0?1:8);qc[dh]=1,to==2&&(qc[dh=Le(nl,8)]=1);var ri=1}else{var xn=l(19),Kf=Le(nl,4)+4;if(19<Kf){kh.a=3;var Su=0;break n}for(ch=0;ch<Kf;++ch)xn[Ai[ch]]=Le(nl,3);var Dd=void 0,Cu=void 0,Kc=kh,_f=xn,Bh=Nl,Vl=qc,vf=0,So=Kc.m,Md=8,Wf=h(128,we);r:for(;ie(Wf,0,7,_f,19);){if(Le(So,1)){var Yf=2+2*Le(So,3);if((Dd=2+Le(So,Yf))>Bh)break r}else Dd=Bh;for(Cu=0;Cu<Bh&&Dd--;){vt(So);var hh=Wf[0+(127&ze(So))];lt(So,So.u+hh.g);var Wc=hh.value;if(16>Wc)Vl[Cu++]=Wc,Wc!=0&&(Md=Wc);else{var Yc=Wc==16,Xf=Wc-16,Id=Dh[Xf],bu=Le(So,Oh[Xf])+Id;if(Cu+bu>Bh)break r;for(var Ac=Yc?Md:0;0<bu--;)Vl[Cu++]=Ac}}vf=1;break r}vf||(Kc.a=3),ri=vf}(ri=ri&&!nl.h)&&($c=ie(Hc,$f,8,qc,Nl)),ri&&$c!=0?Su=$c:(kh.a=3,Su=0)}if(Su==0)break a;if(Hf&&qi[_n]==1&&(Hf=lh[ds].g==0),Im+=lh[ds].g,ds+=Su,3>=_n){var Jl,_c=oh[0];for(Jl=1;Jl<$i;++Jl)oh[Jl]>_c&&(_c=oh[Jl]);Lm+=_c}}if(Tu.nd=Hf,Tu.Qb=0,Hf&&(Tu.qb=(uh[3][qu[3]+0].value<<24|uh[1][qu[1]+0].value<<16|uh[2][qu[2]+0].value)>>>0,Im==0&&256>uh[0][qu[0]+0].value&&(Tu.Qb=1,Tu.qb+=uh[0][qu[0]+0].value<<8)),Tu.jc=!Tu.Qb&&6>Lm,Tu.jc){var Ps,Ql=Tu;for(Ps=0;Ps<bs;++Ps){var Hu=Ps,Hs=Ql.pd[Hu],xu=Ql.G[0][Ql.H[0]+Hu];256<=xu.value?(Hs.g=xu.g+256,Hs.value=xu.value):(Hs.g=0,Hs.value=0,Hu>>=Ct(xu,8,Hs),Hu>>=Ct(Ql.G[1][Ql.H[1]+Hu],16,Hs),Hu>>=Ct(Ql.G[2][Ql.H[2]+Hu],0,Hs),Ct(Ql.G[3][Ql.H[3]+Hu],24,Hs))}}}Mi.vc=qs,Mi.Wb=To,Mi.Ya=sh,Mi.yc=zi,Hi=1;break t}Hi=0}if(!(Qe=Hi)){Ee.a=3;break e}if(0<xt){if(Tt.ua=1<<xt,!Bt(Tt.Wa,xt)){Ee.a=1,Qe=0;break e}}else Tt.ua=0;var fh=Ee,Jf=tt,Gh=ot,ph=fh.s,Ld=ph.xc;if(fh.c=Jf,fh.i=Gh,ph.md=Va(Jf,Ld),ph.wc=Ld==0?-1:(1<<Ld)-1,he){Ee.xb=Ny;break e}if((Jt=l(tt*ot))==null){Ee.a=1,Qe=0;break e}Qe=(Qe=Ma(Ee,Jt,0,tt,ot,ot,null))&&!ht.h;break e}return Qe?(je!=null?je[0]=Jt:(e(Jt==null),e(he)),Ee.$=0,he||Ba(Tt)):Ba(Tt),Qe}function Vr(G,J){var he=G.c*G.i,Ee=he+J+16*J;return e(G.c<=J),G.V=l(Ee),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+he+J,1)}function Gr(G,J){var he=G.C,Ee=J-he,je=G.V,Qe=G.Ba+G.c*he;for(e(J<=G.l.o);0<Ee;){var tt=16<Ee?16:Ee,ot=G.l.ma,ht=G.l.width,Tt=ht*tt,Jt=ot.ca,xt=ot.tb+ht*he,Aa=G.Ta,ra=G.Ua;Pt(G,tt,je,Qe),Zi(Aa,ra,Jt,xt,Tt),Zt(ot,he,he+tt,Jt,xt,ht),Ee-=tt,je+=tt*G.c,he+=tt}e(he==J),G.C=G.Ma=J}function zn(){this.ub=this.yd=this.td=this.Rb=0}function Xn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function qr(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function yn(){this.Yb=function(){var G=[];return function J(he,Ee,je){for(var Qe=je[Ee],tt=0;tt<Qe&&(he.push(je.length>Ee+1?[]:0),!(je.length<Ee+1));tt++)J(he[tt],Ee+1,je)}(G,0,[3,11]),G}()}function Hr(){this.jb=l(3),this.Wc=n([4,8],yn),this.Xc=n([4,17],yn)}function In(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Ni(){this.ld=this.La=this.dd=this.tc=0}function Bi(){this.Na=this.la=0}function _s(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function vs(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Oo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ni),this.Y=0,this.ya=Array(new vs),this.aa=0,this.l=new nc}function ws(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Us(){this.cb=this.a=0,this.sc="",this.m=new qe,this.Od=new zn,this.Kc=new Xn,this.ed=new In,this.Qa=new qr,this.Ic=this.$c=this.Aa=0,this.D=new Oo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,qe),this.ia=0,this.pb=h(4,_s),this.Pa=new Hr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ws),this.Hd=0,this.rb=Array(new Bi),this.sb=0,this.wa=Array(new Ni),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new vs),this.L=this.aa=0,this.gd=n([4,2],Ni),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function nc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ko(){var G=new Us;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,Pd||(Pd=yd)),G}function Vi(G,J,he){return G.a==0&&(G.a=J,G.sc=he,G.cb=0),0}function kl(G,J,he){return 3<=he&&G[J+0]==157&&G[J+1]==1&&G[J+2]==42}function Do(G,J){if(G==null)return 0;if(G.a=0,G.sc="OK",J==null)return Vi(G,2,"null VP8Io passed to VP8GetHeaders()");var he=J.data,Ee=J.w,je=J.ha;if(4>je)return Vi(G,7,"Truncated header.");var Qe=he[Ee+0]|he[Ee+1]<<8|he[Ee+2]<<16,tt=G.Od;if(tt.Rb=!(1&Qe),tt.td=Qe>>1&7,tt.yd=Qe>>4&1,tt.ub=Qe>>5,3<tt.td)return Vi(G,3,"Incorrect keyframe parameters.");if(!tt.yd)return Vi(G,4,"Frame not displayable.");Ee+=3,je-=3;var ot=G.Kc;if(tt.Rb){if(7>je)return Vi(G,7,"cannot parse picture header");if(!kl(he,Ee,je))return Vi(G,3,"Bad code word");ot.c=16383&(he[Ee+4]<<8|he[Ee+3]),ot.Td=he[Ee+4]>>6,ot.i=16383&(he[Ee+6]<<8|he[Ee+5]),ot.Ud=he[Ee+6]>>6,Ee+=7,je-=7,G.za=ot.c+15>>4,G.Ub=ot.i+15>>4,J.width=ot.c,J.height=ot.i,J.Da=0,J.j=0,J.v=0,J.va=J.width,J.o=J.height,J.da=0,J.ib=J.width,J.hb=J.height,J.U=J.width,J.T=J.height,s((Qe=G.Pa).jb,0,255,Qe.jb.length),e((Qe=G.Qa)!=null),Qe.Cb=0,Qe.Bb=0,Qe.Fb=1,s(Qe.Zb,0,0,Qe.Zb.length),s(Qe.Lb,0,0,Qe.Lb)}if(tt.ub>je)return Vi(G,7,"bad partition length");Ie(Qe=G.m,he,Ee,tt.ub),Ee+=tt.ub,je-=tt.ub,tt.Rb&&(ot.Ld=dt(Qe),ot.Kd=dt(Qe)),ot=G.Qa;var ht,Tt=G.Pa;if(e(Qe!=null),e(ot!=null),ot.Cb=dt(Qe),ot.Cb){if(ot.Bb=dt(Qe),dt(Qe)){for(ot.Fb=dt(Qe),ht=0;4>ht;++ht)ot.Zb[ht]=dt(Qe)?Be(Qe,7):0;for(ht=0;4>ht;++ht)ot.Lb[ht]=dt(Qe)?Be(Qe,6):0}if(ot.Bb)for(ht=0;3>ht;++ht)Tt.jb[ht]=dt(Qe)?Ue(Qe,8):255}else ot.Bb=0;if(Qe.Ka)return Vi(G,3,"cannot parse segment header");if((ot=G.ed).zd=dt(Qe),ot.Tb=Ue(Qe,6),ot.wb=Ue(Qe,3),ot.Pc=dt(Qe),ot.Pc&&dt(Qe)){for(Tt=0;4>Tt;++Tt)dt(Qe)&&(ot.vd[Tt]=Be(Qe,6));for(Tt=0;4>Tt;++Tt)dt(Qe)&&(ot.od[Tt]=Be(Qe,6))}if(G.L=ot.Tb==0?0:ot.zd?1:2,Qe.Ka)return Vi(G,3,"cannot parse filter header");var Jt=je;if(je=ht=Ee,Ee=ht+Jt,ot=Jt,G.Xb=(1<<Ue(G.m,2))-1,Jt<3*(Tt=G.Xb))he=7;else{for(ht+=3*Tt,ot-=3*Tt,Jt=0;Jt<Tt;++Jt){var xt=he[je+0]|he[je+1]<<8|he[je+2]<<16;xt>ot&&(xt=ot),Ie(G.Jc[+Jt],he,ht,xt),ht+=xt,ot-=xt,je+=3}Ie(G.Jc[+Tt],he,ht,ot),he=ht<Ee?0:5}if(he!=0)return Vi(G,he,"cannot parse partitions");for(he=Ue(ht=G.m,7),je=dt(ht)?Be(ht,4):0,Ee=dt(ht)?Be(ht,4):0,ot=dt(ht)?Be(ht,4):0,Tt=dt(ht)?Be(ht,4):0,ht=dt(ht)?Be(ht,4):0,Jt=G.Qa,xt=0;4>xt;++xt){if(Jt.Cb){var Aa=Jt.Zb[xt];Jt.Fb||(Aa+=he)}else{if(0<xt){G.pb[xt]=G.pb[0];continue}Aa=he}var ra=G.pb[xt];ra.Sc[0]=yc[cl(Aa+je,127)],ra.Sc[1]=mf[cl(Aa+0,127)],ra.Eb[0]=2*yc[cl(Aa+Ee,127)],ra.Eb[1]=101581*mf[cl(Aa+ot,127)]>>16,8>ra.Eb[1]&&(ra.Eb[1]=8),ra.Qc[0]=yc[cl(Aa+Tt,117)],ra.Qc[1]=mf[cl(Aa+ht,127)],ra.lc=Aa+ht}if(!tt.Rb)return Vi(G,4,"Not a key frame.");for(dt(Qe),tt=G.Pa,he=0;4>he;++he){for(je=0;8>je;++je)for(Ee=0;3>Ee;++Ee)for(ot=0;11>ot;++ot)Tt=pt(Qe,ih[he][je][Ee][ot])?Ue(Qe,8):yf[he][je][Ee][ot],tt.Wc[he][je].Yb[Ee][ot]=Tt;for(je=0;17>je;++je)tt.Xc[he][je]=tt.Wc[he][Ey[je]]}return G.kc=dt(Qe),G.kc&&(G.Bd=Ue(Qe,8)),G.cb=1}function yd(G,J,he,Ee,je,Qe,tt){var ot=J[je].Yb[he];for(he=0;16>je;++je){if(!pt(G,ot[he+0]))return je;for(;!pt(G,ot[he+1]);)if(ot=J[++je].Yb[0],he=0,je==16)return 16;var ht=J[je+1].Yb;if(pt(G,ot[he+2])){var Tt=G,Jt=0;if(pt(Tt,(Aa=ot)[(xt=he)+3]))if(pt(Tt,Aa[xt+6])){for(ot=0,xt=2*(Jt=pt(Tt,Aa[xt+8]))+(Aa=pt(Tt,Aa[xt+9+Jt])),Jt=0,Aa=Mh[xt];Aa[ot];++ot)Jt+=Jt+pt(Tt,Aa[ot]);Jt+=3+(8<<xt)}else pt(Tt,Aa[xt+7])?(Jt=7+2*pt(Tt,165),Jt+=pt(Tt,145)):Jt=5+pt(Tt,159);else Jt=pt(Tt,Aa[xt+4])?3+pt(Tt,Aa[xt+5]):2;ot=ht[2]}else Jt=1,ot=ht[1];ht=tt+Ih[je],0>(Tt=G).b&&Ot(Tt);var xt,Aa=Tt.b,ra=(xt=Tt.Ca>>1)-(Tt.I>>Aa)>>31;--Tt.b,Tt.Ca+=ra,Tt.Ca|=1,Tt.I-=(xt+1&ra)<<Aa,Qe[ht]=((Jt^ra)-ra)*Ee[(0<je)+0]}return 16}function Nc(G){var J=G.rb[G.sb-1];J.la=0,J.Na=0,s(G.zc,0,0,G.zc.length),G.ja=0}function Qd(G,J){if(G==null)return 0;if(J==null)return Vi(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!Do(G,J))return 0;if(e(G.cb),J.ac==null||J.ac(J)){J.ob&&(G.L=0);var he=Af[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=J.v-he>>4,G.zb=J.j-he>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=J.o+15+he>>4,G.Hb=J.va+15+he>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var Ee=G.ed;for(he=0;4>he;++he){var je;if(G.Qa.Cb){var Qe=G.Qa.Lb[he];G.Qa.Fb||(Qe+=Ee.Tb)}else Qe=Ee.Tb;for(je=0;1>=je;++je){var tt=G.gd[he][je],ot=Qe;if(Ee.Pc&&(ot+=Ee.vd[0],je&&(ot+=Ee.od[0])),0<(ot=0>ot?0:63<ot?63:ot)){var ht=ot;0<Ee.wb&&(ht=4<Ee.wb?ht>>2:ht>>1)>9-Ee.wb&&(ht=9-Ee.wb),1>ht&&(ht=1),tt.dd=ht,tt.tc=2*ot+ht,tt.ld=40<=ot?2:15<=ot?1:0}else tt.tc=0;tt.La=je}}}he=0}else Vi(G,6,"Frame setup failed"),he=G.a;if(he=he==0){if(he){G.$c=0,0<G.Aa||(G.Ic=eo);e:{he=G.Ic,Ee=4*(ht=G.za);var Tt=32*ht,Jt=ht+1,xt=0<G.L?ht*(0<G.Aa?2:1):0,Aa=(G.Aa==2?2:1)*ht;if((tt=Ee+832+(je=3*(16*he+Af[G.L])/2*Tt)+(Qe=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=tt)he=0;else{if(tt>G.Vb){if(G.Vb=0,G.Ec=l(tt),G.Fc=0,G.Ec==null){he=Vi(G,1,"no memory during frame initialization.");break e}G.Vb=tt}tt=G.Ec,ot=G.Fc,G.Ac=tt,G.Bc=ot,ot+=Ee,G.Gd=h(Tt,ws),G.Hd=0,G.rb=h(Jt+1,Bi),G.sb=1,G.wa=xt?h(xt,Ni):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=ht),e(!0),G.oc=tt,G.pc=ot,ot+=832,G.ya=h(Aa,vs),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=ht),G.R=16*ht,G.B=8*ht,ht=(Tt=Af[G.L])*G.R,Tt=Tt/2*G.B,G.sa=tt,G.ta=ot+ht,G.qa=G.sa,G.ra=G.ta+16*he*G.R+Tt,G.Ha=G.qa,G.Ia=G.ra+8*he*G.B+Tt,G.$c=0,ot+=je,G.mb=Qe?tt:null,G.nb=Qe?ot:null,e(ot+Qe<=G.Fc+G.Vb),Nc(G),s(G.Ac,G.Bc,0,Ee),he=1}}if(he){if(J.ka=0,J.y=G.sa,J.O=G.ta,J.f=G.qa,J.N=G.ra,J.ea=G.Ha,J.Vd=G.Ia,J.fa=G.R,J.Rc=G.B,J.F=null,J.J=0,!Yl){for(he=-255;255>=he;++he)ns[255+he]=0>he?-he:he;for(he=-1020;1020>=he;++he)Wl[1020+he]=-128>he?-128:127<he?127:he;for(he=-112;112>=he;++he)Fc[112+he]=-16>he?-16:15<he?15:he;for(he=-255;510>=he;++he)Jo[255+he]=0>he?0:255<he?255:he;Yl=1}dc=gd,mu=Bl,pf=cu,Js=oo,fo=Io,ji=Mo,Cd=Xo,bd=Gi,Qs=rs,Mc=Nh,hc=Gs,yu=jl,Ic=Uo,gu=vd,Lc=lc,fc=Yo,Bu=us,ko=ku,ju[0]=ks,ju[1]=cf,ju[2]=th,ju[3]=Tn,ju[4]=ic,ju[5]=Xa,ju[6]=sc,ju[7]=an,ju[8]=Bs,ju[9]=An,gc[0]=bn,gc[1]=Lo,gc[2]=Uu,gc[3]=eh,gc[4]=lo,gc[5]=hr,gc[6]=zc,vu[0]=du,vu[1]=Gl,vu[2]=Ad,vu[3]=ln,vu[4]=Li,vu[5]=Rs,vu[6]=Ci,he=1}else he=0}he&&(he=function(ra,wa){for(ra.M=0;ra.M<ra.Va;++ra.M){var fa,_t=ra.Jc[ra.M&ra.Xb],ta=ra.m,Ga=ra;for(fa=0;fa<Ga.za;++fa){var Ka=ta,qa=Ga,Sr=qa.Ac,fr=qa.Bc+4*fa,rn=qa.zc,lr=qa.ya[qa.aa+fa];if(qa.Qa.Bb?lr.$b=pt(Ka,qa.Pa.jb[0])?2+pt(Ka,qa.Pa.jb[2]):pt(Ka,qa.Pa.jb[1]):lr.$b=0,qa.kc&&(lr.Ad=pt(Ka,qa.Bd)),lr.Za=!pt(Ka,145)+0,lr.Za){var _i=lr.Ob,bi=0;for(qa=0;4>qa;++qa){var Zn,ai=rn[0+qa];for(Zn=0;4>Zn;++Zn){ai=Dm[Sr[fr+Zn]][ai];for(var Hi=Ed[pt(Ka,ai[0])];0<Hi;)Hi=Ed[2*Hi+pt(Ka,ai[Hi])];ai=-Hi,Sr[fr+Zn]=ai}r(_i,bi,Sr,fr,4),bi+=4,rn[0+qa]=ai}}else ai=pt(Ka,156)?pt(Ka,128)?1:3:pt(Ka,163)?2:0,lr.Ob[0]=ai,s(Sr,fr,ai,4),s(rn,0,ai,4);lr.Dd=pt(Ka,142)?pt(Ka,114)?pt(Ka,183)?1:3:2:0}if(Ga.m.Ka)return Vi(ra,7,"Premature end-of-partition0 encountered.");for(;ra.ja<ra.za;++ra.ja){if(Ga=_t,Ka=(ta=ra).rb[ta.sb-1],Sr=ta.rb[ta.sb+ta.ja],fa=ta.ya[ta.aa+ta.ja],fr=ta.kc?fa.Ad:0)Ka.la=Sr.la=0,fa.Za||(Ka.Na=Sr.Na=0),fa.Hc=0,fa.Gc=0,fa.ia=0;else{var Fn,_n;if(Ka=Sr,Sr=Ga,fr=ta.Pa.Xc,rn=ta.ya[ta.aa+ta.ja],lr=ta.pb[rn.$b],qa=rn.ad,_i=0,bi=ta.rb[ta.sb-1],ai=Zn=0,s(qa,_i,0,384),rn.Za)var ds=0,Fi=fr[3];else{Hi=l(16);var Un=Ka.Na+bi.Na;if(Un=Pd(Sr,fr[1],Un,lr.Eb,0,Hi,0),Ka.Na=bi.Na=(0<Un)+0,1<Un)dc(Hi,0,qa,_i);else{var po=Hi[0]+3>>3;for(Hi=0;256>Hi;Hi+=16)qa[_i+Hi]=po}ds=1,Fi=fr[0]}var vi=15&Ka.la,is=15&bi.la;for(Hi=0;4>Hi;++Hi){var vn=1&is;for(po=_n=0;4>po;++po)vi=vi>>1|(vn=(Un=Pd(Sr,Fi,Un=vn+(1&vi),lr.Sc,ds,qa,_i))>ds)<<7,_n=_n<<2|(3<Un?3:1<Un?2:qa[_i+0]!=0),_i+=16;vi>>=4,is=is>>1|vn<<7,Zn=(Zn<<8|_n)>>>0}for(Fi=vi,ds=is>>4,Fn=0;4>Fn;Fn+=2){for(_n=0,vi=Ka.la>>4+Fn,is=bi.la>>4+Fn,Hi=0;2>Hi;++Hi){for(vn=1&is,po=0;2>po;++po)Un=vn+(1&vi),vi=vi>>1|(vn=0<(Un=Pd(Sr,fr[2],Un,lr.Qc,0,qa,_i)))<<3,_n=_n<<2|(3<Un?3:1<Un?2:qa[_i+0]!=0),_i+=16;vi>>=2,is=is>>1|vn<<5}ai|=_n<<4*Fn,Fi|=vi<<4<<Fn,ds|=(240&is)<<Fn}Ka.la=Fi,bi.la=ds,rn.Hc=Zn,rn.Gc=ai,rn.ia=43690&ai?0:lr.ia,fr=!(Zn|ai)}if(0<ta.L&&(ta.wa[ta.Y+ta.ja]=ta.gd[fa.$b][fa.Za],ta.wa[ta.Y+ta.ja].La|=!fr),Ga.Ka)return Vi(ra,7,"Premature end-of-file encountered.")}if(Nc(ra),ta=wa,Ga=1,fa=(_t=ra).D,Ka=0<_t.L&&_t.M>=_t.zb&&_t.M<=_t.Va,_t.Aa==0)e:{if(fa.M=_t.M,fa.uc=Ka,_r(_t,fa),Ga=1,fa=(_n=_t.D).Nb,Ka=(ai=Af[_t.L])*_t.R,Sr=ai/2*_t.B,Hi=16*fa*_t.R,po=8*fa*_t.B,fr=_t.sa,rn=_t.ta-Ka+Hi,lr=_t.qa,qa=_t.ra-Sr+po,_i=_t.Ha,bi=_t.Ia-Sr+po,is=(vi=_n.M)==0,Zn=vi>=_t.Va-1,_t.Aa==2&&_r(_t,_n),_n.uc)for(vn=(Un=_t).D.M,e(Un.D.uc),_n=Un.yb;_n<Un.Hb;++_n){ds=_n,Fi=vn;var Mi=(qs=($i=Un).D).Nb;Fn=$i.R;var qs=qs.wa[qs.Y+ds],To=$i.sa,rl=$i.ta+16*Mi*Fn+16*ds,Pl=qs.dd,xs=qs.tc;if(xs!=0)if(e(3<=xs),$i.L==1)0<ds&&fc(To,rl,Fn,xs+4),qs.La&&ko(To,rl,Fn,xs),0<Fi&&Lc(To,rl,Fn,xs+4),qs.La&&Bu(To,rl,Fn,xs);else{var El=$i.B,Ru=$i.qa,Ca=$i.ra+8*Mi*El+8*ds,Ua=$i.Ha,$i=$i.Ia+8*Mi*El+8*ds;Mi=qs.ld,0<ds&&(bd(To,rl,Fn,xs+4,Pl,Mi),Mc(Ru,Ca,Ua,$i,El,xs+4,Pl,Mi)),qs.La&&(yu(To,rl,Fn,xs,Pl,Mi),gu(Ru,Ca,Ua,$i,El,xs,Pl,Mi)),0<Fi&&(Cd(To,rl,Fn,xs+4,Pl,Mi),Qs(Ru,Ca,Ua,$i,El,xs+4,Pl,Mi)),qs.La&&(hc(To,rl,Fn,xs,Pl,Mi),Ic(Ru,Ca,Ua,$i,El,xs,Pl,Mi))}}if(_t.ia&&alert("todo:DitherRow"),ta.put!=null){if(_n=16*vi,vi=16*(vi+1),is?(ta.y=_t.sa,ta.O=_t.ta+Hi,ta.f=_t.qa,ta.N=_t.ra+po,ta.ea=_t.Ha,ta.W=_t.Ia+po):(_n-=ai,ta.y=fr,ta.O=rn,ta.f=lr,ta.N=qa,ta.ea=_i,ta.W=bi),Zn||(vi-=ai),vi>ta.o&&(vi=ta.o),ta.F=null,ta.J=null,_t.Fa!=null&&0<_t.Fa.length&&_n<vi&&(ta.J=hf(_t,ta,_n,vi-_n),ta.F=_t.mb,ta.F==null&&ta.F.length==0)){Ga=Vi(_t,3,"Could not decode alpha data.");break e}_n<ta.j&&(ai=ta.j-_n,_n=ta.j,e(!(1&ai)),ta.O+=_t.R*ai,ta.N+=_t.B*(ai>>1),ta.W+=_t.B*(ai>>1),ta.F!=null&&(ta.J+=ta.width*ai)),_n<vi&&(ta.O+=ta.v,ta.N+=ta.v>>1,ta.W+=ta.v>>1,ta.F!=null&&(ta.J+=ta.v),ta.ka=_n-ta.j,ta.U=ta.va-ta.v,ta.T=vi-_n,Ga=ta.put(ta))}fa+1!=_t.Ic||Zn||(r(_t.sa,_t.ta-Ka,fr,rn+16*_t.R,Ka),r(_t.qa,_t.ra-Sr,lr,qa+8*_t.B,Sr),r(_t.Ha,_t.Ia-Sr,_i,bi+8*_t.B,Sr))}if(!Ga)return Vi(ra,6,"Output aborted.")}return 1}(G,J)),J.bc!=null&&J.bc(J),he&=1}return he?(G.cb=0,he):0}function uu(G,J,he,Ee,je){je=G[J+he+32*Ee]+(je>>3),G[J+he+32*Ee]=-256&je?0>je?0:255:je}function Vc(G,J,he,Ee,je,Qe){uu(G,J,0,he,Ee+je),uu(G,J,1,he,Ee+Qe),uu(G,J,2,he,Ee-Qe),uu(G,J,3,he,Ee-je)}function ul(G){return(20091*G>>16)+G}function Ys(G,J,he,Ee){var je,Qe=0,tt=l(16);for(je=0;4>je;++je){var ot=G[J+0]+G[J+8],ht=G[J+0]-G[J+8],Tt=(35468*G[J+4]>>16)-ul(G[J+12]),Jt=ul(G[J+4])+(35468*G[J+12]>>16);tt[Qe+0]=ot+Jt,tt[Qe+1]=ht+Tt,tt[Qe+2]=ht-Tt,tt[Qe+3]=ot-Jt,Qe+=4,J++}for(je=Qe=0;4>je;++je)ot=(G=tt[Qe+0]+4)+tt[Qe+8],ht=G-tt[Qe+8],Tt=(35468*tt[Qe+4]>>16)-ul(tt[Qe+12]),uu(he,Ee,0,0,ot+(Jt=ul(tt[Qe+4])+(35468*tt[Qe+12]>>16))),uu(he,Ee,1,0,ht+Tt),uu(he,Ee,2,0,ht-Tt),uu(he,Ee,3,0,ot-Jt),Qe++,Ee+=32}function Mo(G,J,he,Ee){var je=G[J+0]+4,Qe=35468*G[J+4]>>16,tt=ul(G[J+4]),ot=35468*G[J+1]>>16;Vc(he,Ee,0,je+tt,G=ul(G[J+1]),ot),Vc(he,Ee,1,je+Qe,G,ot),Vc(he,Ee,2,je-Qe,G,ot),Vc(he,Ee,3,je-tt,G,ot)}function Bl(G,J,he,Ee,je){Ys(G,J,he,Ee),je&&Ys(G,J+16,he,Ee+4)}function cu(G,J,he,Ee){mu(G,J+0,he,Ee,1),mu(G,J+32,he,Ee+128,1)}function oo(G,J,he,Ee){var je;for(G=G[J+0]+4,je=0;4>je;++je)for(J=0;4>J;++J)uu(he,Ee,J,je,G)}function Io(G,J,he,Ee){G[J+0]&&Js(G,J+0,he,Ee),G[J+16]&&Js(G,J+16,he,Ee+4),G[J+32]&&Js(G,J+32,he,Ee+128),G[J+48]&&Js(G,J+48,he,Ee+128+4)}function gd(G,J,he,Ee){var je,Qe=l(16);for(je=0;4>je;++je){var tt=G[J+0+je]+G[J+12+je],ot=G[J+4+je]+G[J+8+je],ht=G[J+4+je]-G[J+8+je],Tt=G[J+0+je]-G[J+12+je];Qe[0+je]=tt+ot,Qe[8+je]=tt-ot,Qe[4+je]=Tt+ht,Qe[12+je]=Tt-ht}for(je=0;4>je;++je)tt=(G=Qe[0+4*je]+3)+Qe[3+4*je],ot=Qe[1+4*je]+Qe[2+4*je],ht=Qe[1+4*je]-Qe[2+4*je],Tt=G-Qe[3+4*je],he[Ee+0]=tt+ot>>3,he[Ee+16]=Tt+ht>>3,he[Ee+32]=tt-ot>>3,he[Ee+48]=Tt-ht>>3,Ee+=64}function Fu(G,J,he){var Ee,je=J-32,Qe=bl,tt=255-G[je-1];for(Ee=0;Ee<he;++Ee){var ot,ht=Qe,Tt=tt+G[J-1];for(ot=0;ot<he;++ot)G[J+ot]=ht[Tt+G[je+ot]];J+=32}}function cf(G,J){Fu(G,J,4)}function Gl(G,J){Fu(G,J,8)}function Lo(G,J){Fu(G,J,16)}function Uu(G,J){var he;for(he=0;16>he;++he)r(G,J+32*he,G,J-32,16)}function eh(G,J){var he;for(he=16;0<he;--he)s(G,J,G[J-1],16),J+=32}function Wo(G,J,he){var Ee;for(Ee=0;16>Ee;++Ee)s(J,he+32*Ee,G,16)}function bn(G,J){var he,Ee=16;for(he=0;16>he;++he)Ee+=G[J-1+32*he]+G[J+he-32];Wo(Ee>>5,G,J)}function lo(G,J){var he,Ee=8;for(he=0;16>he;++he)Ee+=G[J-1+32*he];Wo(Ee>>4,G,J)}function hr(G,J){var he,Ee=8;for(he=0;16>he;++he)Ee+=G[J+he-32];Wo(Ee>>4,G,J)}function zc(G,J){Wo(128,G,J)}function gn(G,J,he){return G+2*J+he+2>>2}function th(G,J){var he,Ee=J-32;for(Ee=new Uint8Array([gn(G[Ee-1],G[Ee+0],G[Ee+1]),gn(G[Ee+0],G[Ee+1],G[Ee+2]),gn(G[Ee+1],G[Ee+2],G[Ee+3]),gn(G[Ee+2],G[Ee+3],G[Ee+4])]),he=0;4>he;++he)r(G,J+32*he,Ee,0,Ee.length)}function Tn(G,J){var he=G[J-1],Ee=G[J-1+32],je=G[J-1+64],Qe=G[J-1+96];ve(G,J+0,16843009*gn(G[J-1-32],he,Ee)),ve(G,J+32,16843009*gn(he,Ee,je)),ve(G,J+64,16843009*gn(Ee,je,Qe)),ve(G,J+96,16843009*gn(je,Qe,Qe))}function ks(G,J){var he,Ee=4;for(he=0;4>he;++he)Ee+=G[J+he-32]+G[J-1+32*he];for(Ee>>=3,he=0;4>he;++he)s(G,J+32*he,Ee,4)}function ic(G,J){var he=G[J-1+0],Ee=G[J-1+32],je=G[J-1+64],Qe=G[J-1-32],tt=G[J+0-32],ot=G[J+1-32],ht=G[J+2-32],Tt=G[J+3-32];G[J+0+96]=gn(Ee,je,G[J-1+96]),G[J+1+96]=G[J+0+64]=gn(he,Ee,je),G[J+2+96]=G[J+1+64]=G[J+0+32]=gn(Qe,he,Ee),G[J+3+96]=G[J+2+64]=G[J+1+32]=G[J+0+0]=gn(tt,Qe,he),G[J+3+64]=G[J+2+32]=G[J+1+0]=gn(ot,tt,Qe),G[J+3+32]=G[J+2+0]=gn(ht,ot,tt),G[J+3+0]=gn(Tt,ht,ot)}function sc(G,J){var he=G[J+1-32],Ee=G[J+2-32],je=G[J+3-32],Qe=G[J+4-32],tt=G[J+5-32],ot=G[J+6-32],ht=G[J+7-32];G[J+0+0]=gn(G[J+0-32],he,Ee),G[J+1+0]=G[J+0+32]=gn(he,Ee,je),G[J+2+0]=G[J+1+32]=G[J+0+64]=gn(Ee,je,Qe),G[J+3+0]=G[J+2+32]=G[J+1+64]=G[J+0+96]=gn(je,Qe,tt),G[J+3+32]=G[J+2+64]=G[J+1+96]=gn(Qe,tt,ot),G[J+3+64]=G[J+2+96]=gn(tt,ot,ht),G[J+3+96]=gn(ot,ht,ht)}function Xa(G,J){var he=G[J-1+0],Ee=G[J-1+32],je=G[J-1+64],Qe=G[J-1-32],tt=G[J+0-32],ot=G[J+1-32],ht=G[J+2-32],Tt=G[J+3-32];G[J+0+0]=G[J+1+64]=Qe+tt+1>>1,G[J+1+0]=G[J+2+64]=tt+ot+1>>1,G[J+2+0]=G[J+3+64]=ot+ht+1>>1,G[J+3+0]=ht+Tt+1>>1,G[J+0+96]=gn(je,Ee,he),G[J+0+64]=gn(Ee,he,Qe),G[J+0+32]=G[J+1+96]=gn(he,Qe,tt),G[J+1+32]=G[J+2+96]=gn(Qe,tt,ot),G[J+2+32]=G[J+3+96]=gn(tt,ot,ht),G[J+3+32]=gn(ot,ht,Tt)}function an(G,J){var he=G[J+0-32],Ee=G[J+1-32],je=G[J+2-32],Qe=G[J+3-32],tt=G[J+4-32],ot=G[J+5-32],ht=G[J+6-32],Tt=G[J+7-32];G[J+0+0]=he+Ee+1>>1,G[J+1+0]=G[J+0+64]=Ee+je+1>>1,G[J+2+0]=G[J+1+64]=je+Qe+1>>1,G[J+3+0]=G[J+2+64]=Qe+tt+1>>1,G[J+0+32]=gn(he,Ee,je),G[J+1+32]=G[J+0+96]=gn(Ee,je,Qe),G[J+2+32]=G[J+1+96]=gn(je,Qe,tt),G[J+3+32]=G[J+2+96]=gn(Qe,tt,ot),G[J+3+64]=gn(tt,ot,ht),G[J+3+96]=gn(ot,ht,Tt)}function An(G,J){var he=G[J-1+0],Ee=G[J-1+32],je=G[J-1+64],Qe=G[J-1+96];G[J+0+0]=he+Ee+1>>1,G[J+2+0]=G[J+0+32]=Ee+je+1>>1,G[J+2+32]=G[J+0+64]=je+Qe+1>>1,G[J+1+0]=gn(he,Ee,je),G[J+3+0]=G[J+1+32]=gn(Ee,je,Qe),G[J+3+32]=G[J+1+64]=gn(je,Qe,Qe),G[J+3+64]=G[J+2+64]=G[J+0+96]=G[J+1+96]=G[J+2+96]=G[J+3+96]=Qe}function Bs(G,J){var he=G[J-1+0],Ee=G[J-1+32],je=G[J-1+64],Qe=G[J-1+96],tt=G[J-1-32],ot=G[J+0-32],ht=G[J+1-32],Tt=G[J+2-32];G[J+0+0]=G[J+2+32]=he+tt+1>>1,G[J+0+32]=G[J+2+64]=Ee+he+1>>1,G[J+0+64]=G[J+2+96]=je+Ee+1>>1,G[J+0+96]=Qe+je+1>>1,G[J+3+0]=gn(ot,ht,Tt),G[J+2+0]=gn(tt,ot,ht),G[J+1+0]=G[J+3+32]=gn(he,tt,ot),G[J+1+32]=G[J+3+64]=gn(Ee,he,tt),G[J+1+64]=G[J+3+96]=gn(je,Ee,he),G[J+1+96]=gn(Qe,je,Ee)}function Ad(G,J){var he;for(he=0;8>he;++he)r(G,J+32*he,G,J-32,8)}function ln(G,J){var he;for(he=0;8>he;++he)s(G,J,G[J-1],8),J+=32}function Fo(G,J,he){var Ee;for(Ee=0;8>Ee;++Ee)s(J,he+32*Ee,G,8)}function du(G,J){var he,Ee=8;for(he=0;8>he;++he)Ee+=G[J+he-32]+G[J-1+32*he];Fo(Ee>>4,G,J)}function Rs(G,J){var he,Ee=4;for(he=0;8>he;++he)Ee+=G[J+he-32];Fo(Ee>>3,G,J)}function Li(G,J){var he,Ee=4;for(he=0;8>he;++he)Ee+=G[J-1+32*he];Fo(Ee>>3,G,J)}function Ci(G,J){Fo(128,G,J)}function uo(G,J,he){var Ee=G[J-he],je=G[J+0],Qe=3*(je-Ee)+tn[1020+G[J-2*he]-G[J+he]],tt=Uc[112+(Qe+4>>3)];G[J-he]=bl[255+Ee+Uc[112+(Qe+3>>3)]],G[J+0]=bl[255+je-tt]}function _d(G,J,he,Ee){var je=G[J+0],Qe=G[J+he];return es[255+G[J-2*he]-G[J-he]]>Ee||es[255+Qe-je]>Ee}function ah(G,J,he,Ee){return 4*es[255+G[J-he]-G[J+0]]+es[255+G[J-2*he]-G[J+he]]<=Ee}function oc(G,J,he,Ee,je){var Qe=G[J-3*he],tt=G[J-2*he],ot=G[J-he],ht=G[J+0],Tt=G[J+he],Jt=G[J+2*he],xt=G[J+3*he];return 4*es[255+ot-ht]+es[255+tt-Tt]>Ee?0:es[255+G[J-4*he]-Qe]<=je&&es[255+Qe-tt]<=je&&es[255+tt-ot]<=je&&es[255+xt-Jt]<=je&&es[255+Jt-Tt]<=je&&es[255+Tt-ht]<=je}function lc(G,J,he,Ee){var je=2*Ee+1;for(Ee=0;16>Ee;++Ee)ah(G,J+Ee,he,je)&&uo(G,J+Ee,he)}function Yo(G,J,he,Ee){var je=2*Ee+1;for(Ee=0;16>Ee;++Ee)ah(G,J+Ee*he,1,je)&&uo(G,J+Ee*he,1)}function us(G,J,he,Ee){var je;for(je=3;0<je;--je)lc(G,J+=4*he,he,Ee)}function ku(G,J,he,Ee){var je;for(je=3;0<je;--je)Yo(G,J+=4,he,Ee)}function Ts(G,J,he,Ee,je,Qe,tt,ot){for(Qe=2*Qe+1;0<je--;){if(oc(G,J,he,Qe,tt))if(_d(G,J,he,ot))uo(G,J,he);else{var ht=G,Tt=J,Jt=he,xt=ht[Tt-2*Jt],Aa=ht[Tt-Jt],ra=ht[Tt+0],wa=ht[Tt+Jt],fa=ht[Tt+2*Jt],_t=27*(Ga=tn[1020+3*(ra-Aa)+tn[1020+xt-wa]])+63>>7,ta=18*Ga+63>>7,Ga=9*Ga+63>>7;ht[Tt-3*Jt]=bl[255+ht[Tt-3*Jt]+Ga],ht[Tt-2*Jt]=bl[255+xt+ta],ht[Tt-Jt]=bl[255+Aa+_t],ht[Tt+0]=bl[255+ra-_t],ht[Tt+Jt]=bl[255+wa-ta],ht[Tt+2*Jt]=bl[255+fa-Ga]}J+=Ee}}function Rl(G,J,he,Ee,je,Qe,tt,ot){for(Qe=2*Qe+1;0<je--;){if(oc(G,J,he,Qe,tt))if(_d(G,J,he,ot))uo(G,J,he);else{var ht=G,Tt=J,Jt=he,xt=ht[Tt-Jt],Aa=ht[Tt+0],ra=ht[Tt+Jt],wa=Uc[112+((fa=3*(Aa-xt))+4>>3)],fa=Uc[112+(fa+3>>3)],_t=wa+1>>1;ht[Tt-2*Jt]=bl[255+ht[Tt-2*Jt]+_t],ht[Tt-Jt]=bl[255+xt+fa],ht[Tt+0]=bl[255+Aa-wa],ht[Tt+Jt]=bl[255+ra-_t]}J+=Ee}}function Xo(G,J,he,Ee,je,Qe){Ts(G,J,he,1,16,Ee,je,Qe)}function Gi(G,J,he,Ee,je,Qe){Ts(G,J,1,he,16,Ee,je,Qe)}function Gs(G,J,he,Ee,je,Qe){var tt;for(tt=3;0<tt;--tt)Rl(G,J+=4*he,he,1,16,Ee,je,Qe)}function jl(G,J,he,Ee,je,Qe){var tt;for(tt=3;0<tt;--tt)Rl(G,J+=4,1,he,16,Ee,je,Qe)}function rs(G,J,he,Ee,je,Qe,tt,ot){Ts(G,J,je,1,8,Qe,tt,ot),Ts(he,Ee,je,1,8,Qe,tt,ot)}function Nh(G,J,he,Ee,je,Qe,tt,ot){Ts(G,J,1,je,8,Qe,tt,ot),Ts(he,Ee,1,je,8,Qe,tt,ot)}function Uo(G,J,he,Ee,je,Qe,tt,ot){Rl(G,J+4*je,je,1,8,Qe,tt,ot),Rl(he,Ee+4*je,je,1,8,Qe,tt,ot)}function vd(G,J,he,Ee,je,Qe,tt,ot){Rl(G,J+4,1,je,8,Qe,tt,ot),Rl(he,Ee+4,1,je,8,Qe,tt,ot)}function hu(){this.ba=new Ji,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ei,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function fu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function jf(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Zl(){this.ua=0,this.Wa=new St,this.vb=new St,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ve,this.yc=new we}function Om(){this.xb=this.a=0,this.l=new nc,this.ca=new Ji,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ye,this.Pb=0,this.wd=new ye,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Zl,this.ab=0,this.gc=h(4,jf),this.Oc=0}function wd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new nc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function js(G,J,he,Ee,je,Qe,tt){for(G=G==null?0:G[J+0],J=0;J<tt;++J)je[Qe+J]=G+he[Ee+J]&255,G=je[Qe+J]}function df(G,J,he,Ee,je,Qe,tt){var ot;if(G==null)js(null,null,he,Ee,je,Qe,tt);else for(ot=0;ot<tt;++ot)je[Qe+ot]=G[J+ot]+he[Ee+ot]&255}function ql(G,J,he,Ee,je,Qe,tt){if(G==null)js(null,null,he,Ee,je,Qe,tt);else{var ot,ht=G[J+0],Tt=ht,Jt=ht;for(ot=0;ot<tt;++ot)Tt=Jt+(ht=G[J+ot])-Tt,Jt=he[Ee+ot]+(-256&Tt?0>Tt?0:255:Tt)&255,Tt=ht,je[Qe+ot]=Jt}}function hf(G,J,he,Ee){var je=J.width,Qe=J.o;if(e(G!=null&&J!=null),0>he||0>=Ee||he+Ee>Qe)return null;if(!G.Cc){if(G.ga==null){var tt;if(G.ga=new wd,(tt=G.ga==null)||(tt=J.width*J.o,e(G.Gb.length==0),G.Gb=l(tt),G.Uc=0,G.Gb==null?tt=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,tt=1),tt=!tt),!tt){tt=G.ga;var ot=G.Fa,ht=G.P,Tt=G.qc,Jt=G.mb,xt=G.nb,Aa=ht+1,ra=Tt-1,wa=tt.l;if(e(ot!=null&&Jt!=null&&J!=null),hl[0]=null,hl[1]=js,hl[2]=df,hl[3]=ql,tt.ca=Jt,tt.tb=xt,tt.c=J.width,tt.i=J.height,e(0<tt.c&&0<tt.i),1>=Tt)J=0;else if(tt.$a=ot[ht+0]>>0&3,tt.Z=ot[ht+0]>>2&3,tt.Lc=ot[ht+0]>>4&3,ht=ot[ht+0]>>6&3,0>tt.$a||1<tt.$a||4<=tt.Z||1<tt.Lc||ht)J=0;else if(wa.put=Xt,wa.ac=Fs,wa.bc=be,wa.ma=tt,wa.width=J.width,wa.height=J.height,wa.Da=J.Da,wa.v=J.v,wa.va=J.va,wa.j=J.j,wa.o=J.o,tt.$a)e:{e(tt.$a==1),J=Ar();t:for(;;){if(J==null){J=0;break e}if(e(tt!=null),tt.mc=J,J.c=tt.c,J.i=tt.i,J.l=tt.l,J.l.ma=tt,J.l.width=tt.c,J.l.height=tt.i,J.a=0,ke(J.m,ot,Aa,ra),!Nr(tt.c,tt.i,1,J,null)||(J.ab==1&&J.gc[0].hc==3&&Ht(J.s)?(tt.ic=1,ot=J.c*J.i,J.Ta=null,J.Ua=0,J.V=l(ot),J.Ba=0,J.V==null?(J.a=1,J=0):J=1):(tt.ic=0,J=Vr(J,tt.c)),!J))break t;J=1;break e}tt.mc=null,J=0}else J=ra>=tt.c*tt.i;tt=!J}if(tt)return null;G.ga.Lc!=1?G.Ga=0:Ee=Qe-he}e(G.ga!=null),e(he+Ee<=Qe);e:{if(J=(ot=G.ga).c,Qe=ot.l.o,ot.$a==0){if(Aa=G.rc,ra=G.Vc,wa=G.Fa,ht=G.P+1+he*J,Tt=G.mb,Jt=G.nb+he*J,e(ht<=G.P+G.qc),ot.Z!=0)for(e(hl[ot.Z]!=null),tt=0;tt<Ee;++tt)hl[ot.Z](Aa,ra,wa,ht,Tt,Jt,J),Aa=Tt,ra=Jt,Jt+=J,ht+=J;else for(tt=0;tt<Ee;++tt)r(Tt,Jt,wa,ht,J),Aa=Tt,ra=Jt,Jt+=J,ht+=J;G.rc=Aa,G.Vc=ra}else{if(e(ot.mc!=null),J=he+Ee,e((tt=ot.mc)!=null),e(J<=tt.i),tt.C>=J)J=1;else if(ot.ic||ha(),ot.ic){ot=tt.V,Aa=tt.Ba,ra=tt.c;var fa=tt.i,_t=(wa=1,ht=tt.$/ra,Tt=tt.$%ra,Jt=tt.m,xt=tt.s,tt.$),ta=ra*fa,Ga=ra*J,Ka=xt.wc,qa=_t<Ga?kt(xt,Tt,ht):null;e(_t<=ta),e(J<=fa),e(Ht(xt));t:for(;;){for(;!Jt.h&&_t<Ga;){if(Tt&Ka||(qa=kt(xt,Tt,ht)),e(qa!=null),vt(Jt),256>(fa=mt(qa.G[0],qa.H[0],Jt)))ot[Aa+_t]=fa,++_t,++Tt>=ra&&(Tt=0,++ht<=J&&!(ht%16)&&Ra(tt,ht));else{if(!(280>fa)){wa=0;break t}fa=at(fa-256,Jt);var Sr,fr=mt(qa.G[4],qa.H[4],Jt);if(vt(Jt),!(_t>=(fr=At(ra,fr=at(fr,Jt)))&&ta-_t>=fa)){wa=0;break t}for(Sr=0;Sr<fa;++Sr)ot[Aa+_t+Sr]=ot[Aa+_t+Sr-fr];for(_t+=fa,Tt+=fa;Tt>=ra;)Tt-=ra,++ht<=J&&!(ht%16)&&Ra(tt,ht);_t<Ga&&Tt&Ka&&(qa=kt(xt,Tt,ht))}e(Jt.h==We(Jt))}Ra(tt,ht>J?J:ht);break t}!wa||Jt.h&&_t<ta?(wa=0,tt.a=Jt.h?5:3):tt.$=_t,J=wa}else J=Ma(tt,tt.V,tt.Ba,tt.c,tt.i,J,Gr);if(!J){Ee=0;break e}}he+Ee>=Qe&&(G.Cc=1),Ee=1}if(!Ee)return null;if(G.Cc&&((Ee=G.ga)!=null&&(Ee.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+he*je}function oe(G,J,he,Ee,je,Qe){for(;0<je--;){var tt,ot=G,ht=J+(he?1:0),Tt=G,Jt=J+(he?0:3);for(tt=0;tt<Ee;++tt){var xt=Tt[Jt+4*tt];xt!=255&&(xt*=32897,ot[ht+4*tt+0]=ot[ht+4*tt+0]*xt>>23,ot[ht+4*tt+1]=ot[ht+4*tt+1]*xt>>23,ot[ht+4*tt+2]=ot[ht+4*tt+2]*xt>>23)}J+=Qe}}function $e(G,J,he,Ee,je){for(;0<Ee--;){var Qe;for(Qe=0;Qe<he;++Qe){var tt=G[J+2*Qe+0],ot=15&(Tt=G[J+2*Qe+1]),ht=4369*ot,Tt=(240&Tt|Tt>>4)*ht>>16;G[J+2*Qe+0]=(240&tt|tt>>4)*ht>>16&240|(15&tt|tt<<4)*ht>>16>>4&15,G[J+2*Qe+1]=240&Tt|ot}J+=je}}function zt(G,J,he,Ee,je,Qe,tt,ot){var ht,Tt,Jt=255;for(Tt=0;Tt<je;++Tt){for(ht=0;ht<Ee;++ht){var xt=G[J+ht];Qe[tt+4*ht]=xt,Jt&=xt}J+=he,tt+=ot}return Jt!=255}function Wt(G,J,he,Ee,je){var Qe;for(Qe=0;Qe<je;++Qe)he[Ee+Qe]=G[J+Qe]>>8}function ha(){cs=oe,Yn=$e,ti=zt,Zi=Wt}function Da(G,J,he){Ae[G]=function(Ee,je,Qe,tt,ot,ht,Tt,Jt,xt,Aa,ra,wa,fa,_t,ta,Ga,Ka){var qa,Sr=Ka-1>>1,fr=ot[ht+0]|Tt[Jt+0]<<16,rn=xt[Aa+0]|ra[wa+0]<<16;e(Ee!=null);var lr=3*fr+rn+131074>>2;for(J(Ee[je+0],255&lr,lr>>16,fa,_t),Qe!=null&&(lr=3*rn+fr+131074>>2,J(Qe[tt+0],255&lr,lr>>16,ta,Ga)),qa=1;qa<=Sr;++qa){var _i=ot[ht+qa]|Tt[Jt+qa]<<16,bi=xt[Aa+qa]|ra[wa+qa]<<16,Zn=fr+_i+rn+bi+524296,ai=Zn+2*(_i+rn)>>3;lr=ai+fr>>1,fr=(Zn=Zn+2*(fr+bi)>>3)+_i>>1,J(Ee[je+2*qa-1],255&lr,lr>>16,fa,_t+(2*qa-1)*he),J(Ee[je+2*qa-0],255&fr,fr>>16,fa,_t+(2*qa-0)*he),Qe!=null&&(lr=Zn+rn>>1,fr=ai+bi>>1,J(Qe[tt+2*qa-1],255&lr,lr>>16,ta,Ga+(2*qa-1)*he),J(Qe[tt+2*qa+0],255&fr,fr>>16,ta,Ga+(2*qa+0)*he)),fr=_i,rn=bi}1&Ka||(lr=3*fr+rn+131074>>2,J(Ee[je+Ka-1],255&lr,lr>>16,fa,_t+(Ka-1)*he),Qe!=null&&(lr=3*rn+fr+131074>>2,J(Qe[tt+Ka-1],255&lr,lr>>16,ta,Ga+(Ka-1)*he)))}}function ar(){tl[pc]=Fh,tl[xd]=Lp,tl[ci]=Nd,tl[zh]=Fp,tl[Qo]=Bc,tl[dl]=gf,tl[kc]=al,tl[Au]=Lp,tl[Gu]=Fp,tl[mc]=Bc,tl[Ip]=gf}function wr(G){return G&-16384?0>G?0:255:G>>xl}function $r(G,J){return wr((19077*G>>8)+(26149*J>>8)-14234)}function Sn(G,J,he){return wr((19077*G>>8)-(6419*J>>8)-(13320*he>>8)+8708)}function Nn(G,J){return wr((19077*G>>8)+(33050*J>>8)-17685)}function pi(G,J,he,Ee,je){Ee[je+0]=$r(G,he),Ee[je+1]=Sn(G,J,he),Ee[je+2]=Nn(G,J)}function Ss(G,J,he,Ee,je){Ee[je+0]=Nn(G,J),Ee[je+1]=Sn(G,J,he),Ee[je+2]=$r(G,he)}function Cs(G,J,he,Ee,je){var Qe=Sn(G,J,he);J=Qe<<3&224|Nn(G,J)>>3,Ee[je+0]=248&$r(G,he)|Qe>>5,Ee[je+1]=J}function Xs(G,J,he,Ee,je){var Qe=240&Nn(G,J)|15;Ee[je+0]=240&$r(G,he)|Sn(G,J,he)>>4,Ee[je+1]=Qe}function Qi(G,J,he,Ee,je){Ee[je+0]=255,pi(G,J,he,Ee,je+1)}function br(G,J,he,Ee,je){Ss(G,J,he,Ee,je),Ee[je+3]=255}function ir(G,J,he,Ee,je){pi(G,J,he,Ee,je),Ee[je+3]=255}function cl(G,J){return 0>G?0:G>J?J:G}function Rr(G,J,he){Ae[G]=function(Ee,je,Qe,tt,ot,ht,Tt,Jt,xt){for(var Aa=Jt+(-2&xt)*he;Jt!=Aa;)J(Ee[je+0],Qe[tt+0],ot[ht+0],Tt,Jt),J(Ee[je+1],Qe[tt+0],ot[ht+0],Tt,Jt+he),je+=2,++tt,++ht,Jt+=2*he;1&xt&&J(Ee[je+0],Qe[tt+0],ot[ht+0],Tt,Jt)}}function pu(G,J,he){return he==0?G==0?J==0?6:5:J==0?4:0:he}function Hl(G,J,he,Ee,je){switch(G>>>30){case 3:mu(J,he,Ee,je,0);break;case 2:ji(J,he,Ee,je);break;case 1:Js(J,he,Ee,je)}}function _r(G,J){var he,Ee,je=J.M,Qe=J.Nb,tt=G.oc,ot=G.pc+40,ht=G.oc,Tt=G.pc+584,Jt=G.oc,xt=G.pc+600;for(he=0;16>he;++he)tt[ot+32*he-1]=129;for(he=0;8>he;++he)ht[Tt+32*he-1]=129,Jt[xt+32*he-1]=129;for(0<je?tt[ot-1-32]=ht[Tt-1-32]=Jt[xt-1-32]=129:(s(tt,ot-32-1,127,21),s(ht,Tt-32-1,127,9),s(Jt,xt-32-1,127,9)),Ee=0;Ee<G.za;++Ee){var Aa=J.ya[J.aa+Ee];if(0<Ee){for(he=-1;16>he;++he)r(tt,ot+32*he-4,tt,ot+32*he+12,4);for(he=-1;8>he;++he)r(ht,Tt+32*he-4,ht,Tt+32*he+4,4),r(Jt,xt+32*he-4,Jt,xt+32*he+4,4)}var ra=G.Gd,wa=G.Hd+Ee,fa=Aa.ad,_t=Aa.Hc;if(0<je&&(r(tt,ot-32,ra[wa].y,0,16),r(ht,Tt-32,ra[wa].f,0,8),r(Jt,xt-32,ra[wa].ea,0,8)),Aa.Za){var ta=tt,Ga=ot-32+16;for(0<je&&(Ee>=G.za-1?s(ta,Ga,ra[wa].y[15],4):r(ta,Ga,ra[wa+1].y,0,4)),he=0;4>he;he++)ta[Ga+128+he]=ta[Ga+256+he]=ta[Ga+384+he]=ta[Ga+0+he];for(he=0;16>he;++he,_t<<=2)ta=tt,Ga=ot+Mm[he],ju[Aa.Ob[he]](ta,Ga),Hl(_t,fa,16*+he,ta,Ga)}else if(ta=pu(Ee,je,Aa.Ob[0]),gc[ta](tt,ot),_t!=0)for(he=0;16>he;++he,_t<<=2)Hl(_t,fa,16*+he,tt,ot+Mm[he]);for(he=Aa.Gc,ta=pu(Ee,je,Aa.Dd),vu[ta](ht,Tt),vu[ta](Jt,xt),_t=fa,ta=ht,Ga=Tt,255&(Aa=he>>0)&&(170&Aa?pf(_t,256,ta,Ga):fo(_t,256,ta,Ga)),Aa=Jt,_t=xt,255&(he>>=8)&&(170&he?pf(fa,320,Aa,_t):fo(fa,320,Aa,_t)),je<G.Ub-1&&(r(ra[wa].y,0,tt,ot+480,16),r(ra[wa].f,0,ht,Tt+224,8),r(ra[wa].ea,0,Jt,xt+224,8)),he=8*Qe*G.B,ra=G.sa,wa=G.ta+16*Ee+16*Qe*G.R,fa=G.qa,Aa=G.ra+8*Ee+he,_t=G.Ha,ta=G.Ia+8*Ee+he,he=0;16>he;++he)r(ra,wa+he*G.R,tt,ot+32*he,16);for(he=0;8>he;++he)r(fa,Aa+he*G.B,ht,Tt+32*he,8),r(_t,ta+he*G.B,Jt,xt+32*he,8)}}function rh(G,J,he,Ee,je,Qe,tt,ot,ht){var Tt=[0],Jt=[0],xt=0,Aa=ht!=null?ht.kd:0,ra=ht??new fu;if(G==null||12>he)return 7;ra.data=G,ra.w=J,ra.ha=he,J=[J],he=[he],ra.gb=[ra.gb];e:{var wa=J,fa=he,_t=ra.gb;if(e(G!=null),e(fa!=null),e(_t!=null),_t[0]=0,12<=fa[0]&&!a(G,wa[0],"RIFF")){if(a(G,wa[0]+8,"WEBP")){_t=3;break e}var ta=Ea(G,wa[0]+4);if(12>ta||4294967286<ta){_t=3;break e}if(Aa&&ta>fa[0]-8){_t=7;break e}_t[0]=ta,wa[0]+=12,fa[0]-=12}_t=0}if(_t!=0)return _t;for(ta=0<ra.gb[0],he=he[0];;){e:{var Ga=G;fa=J,_t=he;var Ka=Tt,qa=Jt,Sr=wa=[0];if((lr=xt=[xt])[0]=0,8>_t[0])_t=7;else{if(!a(Ga,fa[0],"VP8X")){if(Ea(Ga,fa[0]+4)!=10){_t=3;break e}if(18>_t[0]){_t=7;break e}var fr=Ea(Ga,fa[0]+8),rn=1+Kt(Ga,fa[0]+12);if(2147483648<=rn*(Ga=1+Kt(Ga,fa[0]+15))){_t=3;break e}Sr!=null&&(Sr[0]=fr),Ka!=null&&(Ka[0]=rn),qa!=null&&(qa[0]=Ga),fa[0]+=18,_t[0]-=18,lr[0]=1}_t=0}}if(xt=xt[0],wa=wa[0],_t!=0)return _t;if(fa=!!(2&wa),!ta&&xt)return 3;if(Qe!=null&&(Qe[0]=!!(16&wa)),tt!=null&&(tt[0]=fa),ot!=null&&(ot[0]=0),tt=Tt[0],wa=Jt[0],xt&&fa&&ht==null){_t=0;break}if(4>he){_t=7;break}if(ta&&xt||!ta&&!xt&&!a(G,J[0],"ALPH")){he=[he],ra.na=[ra.na],ra.P=[ra.P],ra.Sa=[ra.Sa];e:{fr=G,_t=J,ta=he;var lr=ra.gb;Ka=ra.na,qa=ra.P,Sr=ra.Sa,rn=22,e(fr!=null),e(ta!=null),Ga=_t[0];var _i=ta[0];for(e(Ka!=null),e(Sr!=null),Ka[0]=null,qa[0]=null,Sr[0]=0;;){if(_t[0]=Ga,ta[0]=_i,8>_i){_t=7;break e}var bi=Ea(fr,Ga+4);if(4294967286<bi){_t=3;break e}var Zn=8+bi+1&-2;if(rn+=Zn,0<lr&&rn>lr){_t=3;break e}if(!a(fr,Ga,"VP8 ")||!a(fr,Ga,"VP8L")){_t=0;break e}if(_i[0]<Zn){_t=7;break e}a(fr,Ga,"ALPH")||(Ka[0]=fr,qa[0]=Ga+8,Sr[0]=bi),Ga+=Zn,_i-=Zn}}if(he=he[0],ra.na=ra.na[0],ra.P=ra.P[0],ra.Sa=ra.Sa[0],_t!=0)break}he=[he],ra.Ja=[ra.Ja],ra.xa=[ra.xa];e:if(lr=G,_t=J,ta=he,Ka=ra.gb[0],qa=ra.Ja,Sr=ra.xa,fr=_t[0],Ga=!a(lr,fr,"VP8 "),rn=!a(lr,fr,"VP8L"),e(lr!=null),e(ta!=null),e(qa!=null),e(Sr!=null),8>ta[0])_t=7;else{if(Ga||rn){if(lr=Ea(lr,fr+4),12<=Ka&&lr>Ka-12){_t=3;break e}if(Aa&&lr>ta[0]-8){_t=7;break e}qa[0]=lr,_t[0]+=8,ta[0]-=8,Sr[0]=rn}else Sr[0]=5<=ta[0]&&lr[fr+0]==47&&!(lr[fr+4]>>5),qa[0]=ta[0];_t=0}if(he=he[0],ra.Ja=ra.Ja[0],ra.xa=ra.xa[0],J=J[0],_t!=0)break;if(4294967286<ra.Ja)return 3;if(ot==null||fa||(ot[0]=ra.xa?2:1),tt=[tt],wa=[wa],ra.xa){if(5>he){_t=7;break}ot=tt,Aa=wa,fa=Qe,G==null||5>he?G=0:5<=he&&G[J+0]==47&&!(G[J+4]>>5)?(ta=[0],lr=[0],Ka=[0],ke(qa=new ye,G,J,he),De(qa,ta,lr,Ka)?(ot!=null&&(ot[0]=ta[0]),Aa!=null&&(Aa[0]=lr[0]),fa!=null&&(fa[0]=Ka[0]),G=1):G=0):G=0}else{if(10>he){_t=7;break}ot=wa,G==null||10>he||!kl(G,J+3,he-3)?G=0:(Aa=G[J+0]|G[J+1]<<8|G[J+2]<<16,fa=16383&(G[J+7]<<8|G[J+6]),G=16383&(G[J+9]<<8|G[J+8]),1&Aa||3<(Aa>>1&7)||!(Aa>>4&1)||Aa>>5>=ra.Ja||!fa||!G?G=0:(tt&&(tt[0]=fa),ot&&(ot[0]=G),G=1))}if(!G||(tt=tt[0],wa=wa[0],xt&&(Tt[0]!=tt||Jt[0]!=wa)))return 3;ht!=null&&(ht[0]=ra,ht.offset=J-ht.w,e(4294967286>J-ht.w),e(ht.offset==ht.ha-he));break}return _t==0||_t==7&&xt&&ht==null?(Qe!=null&&(Qe[0]|=ra.na!=null&&0<ra.na.length),Ee!=null&&(Ee[0]=tt),je!=null&&(je[0]=wa),0):_t}function $l(G,J,he){var Ee=J.width,je=J.height,Qe=0,tt=0,ot=Ee,ht=je;if(J.Da=G!=null&&0<G.Da,J.Da&&(ot=G.cd,ht=G.bd,Qe=G.v,tt=G.j,11>he||(Qe&=-2,tt&=-2),0>Qe||0>tt||0>=ot||0>=ht||Qe+ot>Ee||tt+ht>je))return 0;if(J.v=Qe,J.j=tt,J.va=Qe+ot,J.o=tt+ht,J.U=ot,J.T=ht,J.da=G!=null&&0<G.da,J.da){if(!vr(ot,ht,he=[G.ib],Qe=[G.hb]))return 0;J.ib=he[0],J.hb=Qe[0]}return J.ob=G!=null&&G.ob,J.Kb=G==null||!G.Sd,J.da&&(J.ob=J.ib<3*Ee/4&&J.hb<3*je/4,J.Kb=0),1}function uc(G){if(G==null)return 2;if(11>G.S){var J=G.f.RGBA;J.fb+=(G.height-1)*J.A,J.A=-J.A}else J=G.f.kb,G=G.height,J.O+=(G-1)*J.fa,J.fa=-J.fa,J.N+=(G-1>>1)*J.Ab,J.Ab=-J.Ab,J.W+=(G-1>>1)*J.Db,J.Db=-J.Db,J.F!=null&&(J.J+=(G-1)*J.lb,J.lb=-J.lb);return 0}function Rd(G,J,he,Ee){if(Ee==null||0>=G||0>=J)return 2;if(he!=null){if(he.Da){var je=he.cd,Qe=he.bd,tt=-2&he.v,ot=-2&he.j;if(0>tt||0>ot||0>=je||0>=Qe||tt+je>G||ot+Qe>J)return 2;G=je,J=Qe}if(he.da){if(!vr(G,J,je=[he.ib],Qe=[he.hb]))return 2;G=je[0],J=Qe[0]}}Ee.width=G,Ee.height=J;e:{var ht=Ee.width,Tt=Ee.height;if(G=Ee.S,0>=ht||0>=Tt||!(G>=pc&&13>G))G=2;else{if(0>=Ee.Rd&&Ee.sd==null){tt=Qe=je=J=0;var Jt=(ot=ht*Uh[G])*Tt;if(11>G||(Qe=(Tt+1)/2*(J=(ht+1)/2),G==12&&(tt=(je=ht)*Tt)),(Tt=l(Jt+2*Qe+tt))==null){G=1;break e}Ee.sd=Tt,11>G?((ht=Ee.f.RGBA).eb=Tt,ht.fb=0,ht.A=ot,ht.size=Jt):((ht=Ee.f.kb).y=Tt,ht.O=0,ht.fa=ot,ht.Fd=Jt,ht.f=Tt,ht.N=0+Jt,ht.Ab=J,ht.Cd=Qe,ht.ea=Tt,ht.W=0+Jt+Qe,ht.Db=J,ht.Ed=Qe,G==12&&(ht.F=Tt,ht.J=0+Jt+2*Qe),ht.Tc=tt,ht.lb=je)}if(J=1,je=Ee.S,Qe=Ee.width,tt=Ee.height,je>=pc&&13>je)if(11>je)G=Ee.f.RGBA,J&=(ot=Math.abs(G.A))*(tt-1)+Qe<=G.size,J&=ot>=Qe*Uh[je],J&=G.eb!=null;else{G=Ee.f.kb,ot=(Qe+1)/2,Jt=(tt+1)/2,ht=Math.abs(G.fa),Tt=Math.abs(G.Ab);var xt=Math.abs(G.Db),Aa=Math.abs(G.lb),ra=Aa*(tt-1)+Qe;J&=ht*(tt-1)+Qe<=G.Fd,J&=Tt*(Jt-1)+ot<=G.Cd,J=(J&=xt*(Jt-1)+ot<=G.Ed)&ht>=Qe&Tt>=ot&xt>=ot,J&=G.y!=null,J&=G.f!=null,J&=G.ea!=null,je==12&&(J&=Aa>=Qe,J&=ra<=G.Tc,J&=G.F!=null)}else J=0;G=J?0:2}}return G!=0||he!=null&&he.fd&&(G=uc(Ee)),G}var bs=64,gi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cc=24,Na=32,Td=8,Zs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nr("Predictor0","PredictorAdd0"),Ae.Predictor0=function(){return 4278190080},Ae.Predictor1=function(G){return G},Ae.Predictor2=function(G,J,he){return J[he+0]},Ae.Predictor3=function(G,J,he){return J[he+1]},Ae.Predictor4=function(G,J,he){return J[he-1]},Ae.Predictor5=function(G,J,he){return ur(ur(G,J[he+1]),J[he+0])},Ae.Predictor6=function(G,J,he){return ur(G,J[he-1])},Ae.Predictor7=function(G,J,he){return ur(G,J[he+0])},Ae.Predictor8=function(G,J,he){return ur(J[he-1],J[he+0])},Ae.Predictor9=function(G,J,he){return ur(J[he+0],J[he+1])},Ae.Predictor10=function(G,J,he){return ur(ur(G,J[he-1]),ur(J[he+0],J[he+1]))},Ae.Predictor11=function(G,J,he){var Ee=J[he+0];return 0>=jr(Ee>>24&255,G>>24&255,(J=J[he-1])>>24&255)+jr(Ee>>16&255,G>>16&255,J>>16&255)+jr(Ee>>8&255,G>>8&255,J>>8&255)+jr(255&Ee,255&G,255&J)?Ee:G},Ae.Predictor12=function(G,J,he){var Ee=J[he+0];return(Pr((G>>24&255)+(Ee>>24&255)-((J=J[he-1])>>24&255))<<24|Pr((G>>16&255)+(Ee>>16&255)-(J>>16&255))<<16|Pr((G>>8&255)+(Ee>>8&255)-(J>>8&255))<<8|Pr((255&G)+(255&Ee)-(255&J)))>>>0},Ae.Predictor13=function(G,J,he){var Ee=J[he-1];return(ka((G=ur(G,J[he+0]))>>24&255,Ee>>24&255)<<24|ka(G>>16&255,Ee>>16&255)<<16|ka(G>>8&255,Ee>>8&255)<<8|ka(G>>0&255,Ee>>0&255))>>>0};var co=Ae.PredictorAdd0;Ae.PredictorAdd1=pn,nr("Predictor2","PredictorAdd2"),nr("Predictor3","PredictorAdd3"),nr("Predictor4","PredictorAdd4"),nr("Predictor5","PredictorAdd5"),nr("Predictor6","PredictorAdd6"),nr("Predictor7","PredictorAdd7"),nr("Predictor8","PredictorAdd8"),nr("Predictor9","PredictorAdd9"),nr("Predictor10","PredictorAdd10"),nr("Predictor11","PredictorAdd11"),nr("Predictor12","PredictorAdd12"),nr("Predictor13","PredictorAdd13");var ff=Ae.PredictorAdd2;Wa("ColorIndexInverseTransform","MapARGB","32b",function(G){return G>>8&255},function(G){return G}),Wa("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(G){return G},function(G){return G>>8&255});var Vh,ho=Ae.ColorIndexInverseTransform,Os=Ae.MapARGB,Tl=Ae.VP8LColorIndexInverseTransformAlpha,Oc=Ae.MapAlpha,Kl=Ae.VP8LPredictorsAdd=[];Kl.length=16,(Ae.VP8LPredictors=[]).length=16,(Ae.VP8LPredictorsAdd_C=[]).length=16,(Ae.VP8LPredictors_C=[]).length=16;var nh,Sl,Ro,Sd,Dc,Cl,dc,mu,ji,pf,Js,fo,Cd,bd,Qs,Mc,hc,yu,Ic,gu,Lc,fc,Bu,ko,cs,Yn,ti,Zi,ns=l(511),Wl=l(2041),Fc=l(225),Jo=l(767),Yl=0,tn=Wl,Uc=Fc,bl=Jo,es=ns,pc=0,xd=1,ci=2,zh=3,Qo=4,dl=5,kc=6,Au=7,Gu=8,mc=9,Ip=10,Oh=[2,3,7],Dh=[3,3,11],el=[280,256,256,256,40],qi=[0,1,1,1,0],Ai=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_u=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zf=8,yc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],mf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Pd=null,Mh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ih=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ed=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],yf=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Dm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ih=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ey=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],gc=[],ju=[],vu=[],Ny=1,Lh=2,hl=[],tl=[];Da("UpsampleRgbLinePair",pi,3),Da("UpsampleBgrLinePair",Ss,3),Da("UpsampleRgbaLinePair",ir,4),Da("UpsampleBgraLinePair",br,4),Da("UpsampleArgbLinePair",Qi,4),Da("UpsampleRgba4444LinePair",Xs,2),Da("UpsampleRgb565LinePair",Cs,2);var Fh=Ae.UpsampleRgbLinePair,Nd=Ae.UpsampleBgrLinePair,Lp=Ae.UpsampleRgbaLinePair,Fp=Ae.UpsampleBgraLinePair,Bc=Ae.UpsampleArgbLinePair,gf=Ae.UpsampleRgba4444LinePair,al=Ae.UpsampleRgb565LinePair,Vd=16,wu=1<<Vd-1,zd=-227,Gc=482,xl=6,Zu=0,jc=l(256),qf=l(256),Od=l(256),Zc=l(256),Ds=l(Gc-zd),Up=l(Gc-zd);Rr("YuvToRgbRow",pi,3),Rr("YuvToBgrRow",Ss,3),Rr("YuvToRgbaRow",ir,4),Rr("YuvToBgraRow",br,4),Rr("YuvToArgbRow",Qi,4),Rr("YuvToRgba4444Row",Xs,2),Rr("YuvToRgb565Row",Cs,2);var Mm=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Af=[0,2,8],kp=[8,7,6,4,4,2,2,2,1,1,1,1],eo=1;this.WebPDecodeRGBA=function(G,J,he,Ee,je){var Qe=xd,tt=new hu,ot=new Ji;tt.ba=ot,ot.S=Qe,ot.width=[ot.width],ot.height=[ot.height];var ht=ot.width,Tt=ot.height,Jt=new zo;if(Jt==null||G==null)var xt=2;else e(Jt!=null),xt=rh(G,J,he,Jt.width,Jt.height,Jt.Pd,Jt.Qd,Jt.format,null);if(xt!=0?ht=0:(ht!=null&&(ht[0]=Jt.width[0]),Tt!=null&&(Tt[0]=Jt.height[0]),ht=1),ht){ot.width=ot.width[0],ot.height=ot.height[0],Ee!=null&&(Ee[0]=ot.width),je!=null&&(je[0]=ot.height);e:{if(Ee=new nc,(je=new fu).data=G,je.w=J,je.ha=he,je.kd=1,J=[0],e(je!=null),((G=rh(je.data,je.w,je.ha,null,null,null,J,null,je))==0||G==7)&&J[0]&&(G=4),(J=G)==0){if(e(tt!=null),Ee.data=je.data,Ee.w=je.w+je.offset,Ee.ha=je.ha-je.offset,Ee.put=Xt,Ee.ac=Fs,Ee.bc=be,Ee.ma=tt,je.xa){if((G=Ar())==null){tt=1;break e}if(function(Aa,ra){var wa=[0],fa=[0],_t=[0];t:for(;;){if(Aa==null)return 0;if(ra==null)return Aa.a=2,0;if(Aa.l=ra,Aa.a=0,ke(Aa.m,ra.data,ra.w,ra.ha),!De(Aa.m,wa,fa,_t)){Aa.a=3;break t}if(Aa.xb=Lh,ra.width=wa[0],ra.height=fa[0],!Nr(wa[0],fa[0],1,Aa,null))break t;return 1}return e(Aa.a!=0),0}(G,Ee)){if(Ee=(J=Rd(Ee.width,Ee.height,tt.Oa,tt.ba))==0){t:{Ee=G;a:for(;;){if(Ee==null){Ee=0;break t}if(e(Ee.s.yc!=null),e(Ee.s.Ya!=null),e(0<Ee.s.Wb),e((he=Ee.l)!=null),e((je=he.ma)!=null),Ee.xb!=0){if(Ee.ca=je.ba,Ee.tb=je.tb,e(Ee.ca!=null),!$l(je.Oa,he,zh)){Ee.a=2;break a}if(!Vr(Ee,he.width)||he.da)break a;if((he.da||Er(Ee.ca.S))&&ha(),11>Ee.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ee.ca.f.kb.F!=null&&ha()),Ee.Pb&&0<Ee.s.ua&&Ee.s.vb.X==null&&!Bt(Ee.s.vb,Ee.s.Wa.Xa)){Ee.a=1;break a}Ee.xb=0}if(!Ma(Ee,Ee.V,Ee.Ba,Ee.c,Ee.i,he.o,qt))break a;je.Dc=Ee.Ma,Ee=1;break t}e(Ee.a!=0),Ee=0}Ee=!Ee}Ee&&(J=G.a)}else J=G.a}else{if((G=new Ko)==null){tt=1;break e}if(G.Fa=je.na,G.P=je.P,G.qc=je.Sa,Do(G,Ee)){if((J=Rd(Ee.width,Ee.height,tt.Oa,tt.ba))==0){if(G.Aa=0,he=tt.Oa,e((je=G)!=null),he!=null){if(0<(ht=0>(ht=he.Md)?0:100<ht?255:255*ht/100)){for(Tt=Jt=0;4>Tt;++Tt)12>(xt=je.pb[Tt]).lc&&(xt.ia=ht*kp[0>xt.lc?0:xt.lc]>>3),Jt|=xt.ia;Jt&&(alert("todo:VP8InitRandom"),je.ia=1)}je.Ga=he.Id,100<je.Ga?je.Ga=100:0>je.Ga&&(je.Ga=0)}Qd(G,Ee)||(J=G.a)}}else J=G.a}J==0&&tt.Oa!=null&&tt.Oa.fd&&(J=uc(tt.ba))}tt=J}Qe=tt!=0?null:11>Qe?ot.f.RGBA.eb:ot.f.kb.y}else Qe=null;return Qe};var Uh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function T(Ae,Te){for(var Oe="",ie=0;ie<4;ie++)Oe+=String.fromCharCode(Ae[Te++]);return Oe}function E(Ae,Te){return(Ae[Te+0]<<0|Ae[Te+1]<<8|Ae[Te+2]<<16)>>>0}function z(Ae,Te){return(Ae[Te+0]<<0|Ae[Te+1]<<8|Ae[Te+2]<<16|Ae[Te+3]<<24)>>>0}new w;var k=[0],U=[0],q=[],H=new w,$=t,Q=function(Ae,Te){var Oe={},ie=0,we=!1,Me=0,Ve=0;if(Oe.frames=[],!function(ze,We,lt,vt){for(var Ot=0;Ot<vt;Ot++)if(ze[We+Ot]!=lt.charCodeAt(Ot))return!0;return!1}(Ae,Te,"RIFF",4)){for(z(Ae,Te+=4),Te+=8;Te<Ae.length;){var Ie=T(Ae,Te),Ue=z(Ae,Te+=4);Te+=4;var Be=Ue+(1&Ue);switch(Ie){case"VP8 ":case"VP8L":Oe.frames[ie]===void 0&&(Oe.frames[ie]={}),(Le=Oe.frames[ie]).src_off=we?Ve:Te-8,Le.src_size=Me+Ue+8,ie++,we&&(we=!1,Me=0,Ve=0);break;case"VP8X":(Le=Oe.header={}).feature_flags=Ae[Te];var ke=Te+4;Le.canvas_width=1+E(Ae,ke),ke+=3,Le.canvas_height=1+E(Ae,ke),ke+=3;break;case"ALPH":we=!0,Me=Be+8,Ve=Te-8;break;case"ANIM":(Le=Oe.header).bgcolor=z(Ae,Te),ke=Te+4,Le.loop_count=(qe=Ae)[(ye=ke)+0]<<0|qe[ye+1]<<8,ke+=2;break;case"ANMF":var Je,Le;(Le=Oe.frames[ie]={}).offset_x=2*E(Ae,Te),Te+=3,Le.offset_y=2*E(Ae,Te),Te+=3,Le.width=1+E(Ae,Te),Te+=3,Le.height=1+E(Ae,Te),Te+=3,Le.duration=E(Ae,Te),Te+=3,Je=Ae[Te++],Le.dispose=1&Je,Le.blend=Je>>1&1}Ie!="ANMF"&&(Te+=Be)}var qe,ye;return Oe}}($,0);Q.response=$,Q.rgbaoutput=!0,Q.dataurl=!1;var ne=Q.header?Q.header:null,de=Q.frames?Q.frames:null;if(ne){ne.loop_counter=ne.loop_count,k=[ne.canvas_height],U=[ne.canvas_width];for(var ge=0;ge<de.length&&de[ge].blend!=0;ge++);}var fe=de[0],_e=H.WebPDecodeRGBA($,fe.src_off,fe.src_size,U,k);fe.rgba=_e,fe.imgwidth=U[0],fe.imgheight=k[0];for(var me=0;me<U[0]*k[0]*4;me++)q[me]=_e[me];return this.width=U,this.height=k,this.data=q,this}(function(t){var e=function(){return typeof VM=="function"},a=function(k,U,q,H){var $=4,Q=h;switch(H){case t.image_compression.FAST:$=1,Q=l;break;case t.image_compression.MEDIUM:$=6,Q=n;break;case t.image_compression.SLOW:$=9,Q=w}k=r(k,U,q,Q);var ne=VM(k,{level:$});return t.__addimage__.arrayBufferToBinaryString(ne)},r=function(k,U,q,H){for(var $,Q,ne,de=k.length/U,ge=new Uint8Array(k.length+de),fe=E(),_e=0;_e<de;_e+=1){if(ne=_e*U,$=k.subarray(ne,ne+U),H)ge.set(H($,q,Q),ne+_e);else{for(var me,Ae=fe.length,Te=[];me<Ae;me+=1)Te[me]=fe[me]($,q,Q);var Oe=z(Te.concat());ge.set(Te[Oe],ne+_e)}Q=$}return ge},s=function(k){var U=Array.apply([],k);return U.unshift(0),U},l=function(k,U){var q,H=[],$=k.length;H[0]=1;for(var Q=0;Q<$;Q+=1)q=k[Q-U]||0,H[Q+1]=k[Q]-q+256&255;return H},h=function(k,U,q){var H,$=[],Q=k.length;$[0]=2;for(var ne=0;ne<Q;ne+=1)H=q&&q[ne]||0,$[ne+1]=k[ne]-H+256&255;return $},n=function(k,U,q){var H,$,Q=[],ne=k.length;Q[0]=3;for(var de=0;de<ne;de+=1)H=k[de-U]||0,$=q&&q[de]||0,Q[de+1]=k[de]+256-(H+$>>>1)&255;return Q},w=function(k,U,q){var H,$,Q,ne,de=[],ge=k.length;de[0]=4;for(var fe=0;fe<ge;fe+=1)H=k[fe-U]||0,$=q&&q[fe]||0,Q=q&&q[fe-U]||0,ne=T(H,$,Q),de[fe+1]=k[fe]-ne+256&255;return de},T=function(k,U,q){if(k===U&&U===q)return k;var H=Math.abs(U-q),$=Math.abs(k-q),Q=Math.abs(k+U-q-q);return H<=$&&H<=Q?k:$<=Q?U:q},E=function(){return[s,l,h,n,w]},z=function(k){var U=k.map(function(q){return q.reduce(function(H,$){return H+Math.abs($)},0)});return U.indexOf(Math.min.apply(null,U))};t.processPNG=function(k,U,q,H){var $,Q,ne,de,ge,fe,_e,me,Ae,Te,Oe,ie,we,Me,Ve,Ie=this.decode.FLATE_DECODE,Ue="";if(this.__addimage__.isArrayBuffer(k)&&(k=new Uint8Array(k)),this.__addimage__.isArrayBufferView(k)){if(k=(ne=new U2e(k)).imgData,Q=ne.bits,$=ne.colorSpace,ge=ne.colors,[4,6].indexOf(ne.colorType)!==-1){if(ne.bits===8){Ae=(me=ne.pixelBitlength==32?new Uint32Array(ne.decodePixels().buffer):ne.pixelBitlength==16?new Uint16Array(ne.decodePixels().buffer):new Uint8Array(ne.decodePixels().buffer)).length,Oe=new Uint8Array(Ae*ne.colors),Te=new Uint8Array(Ae);var Be,ke=ne.pixelBitlength-ne.bits;for(Me=0,Ve=0;Me<Ae;Me++){for(we=me[Me],Be=0;Be<ke;)Oe[Ve++]=we>>>Be&255,Be+=ne.bits;Te[Me]=we>>>Be&255}}if(ne.bits===16){Ae=(me=new Uint32Array(ne.decodePixels().buffer)).length,Oe=new Uint8Array(Ae*(32/ne.pixelBitlength)*ne.colors),Te=new Uint8Array(Ae*(32/ne.pixelBitlength)),ie=ne.colors>1,Me=0,Ve=0;for(var Je=0;Me<Ae;)we=me[Me++],Oe[Ve++]=we>>>0&255,ie&&(Oe[Ve++]=we>>>16&255,we=me[Me++],Oe[Ve++]=we>>>0&255),Te[Je++]=we>>>16&255;Q=8}H!==t.image_compression.NONE&&e()?(k=a(Oe,ne.width*ne.colors,ne.colors,H),_e=a(Te,ne.width,1,H)):(k=Oe,_e=Te,Ie=void 0)}if(ne.colorType===3&&($=this.color_spaces.INDEXED,fe=ne.palette,ne.transparency.indexed)){var Le=ne.transparency.indexed,qe=0;for(Me=0,Ae=Le.length;Me<Ae;++Me)qe+=Le[Me];if((qe/=255)===Ae-1&&Le.indexOf(0)!==-1)de=[Le.indexOf(0)];else if(qe!==Ae){for(me=ne.decodePixels(),Te=new Uint8Array(me.length),Me=0,Ae=me.length;Me<Ae;Me++)Te[Me]=Le[me[Me]];_e=a(Te,ne.width,1)}}var ye=function(ze){var We;switch(ze){case t.image_compression.FAST:We=11;break;case t.image_compression.MEDIUM:We=13;break;case t.image_compression.SLOW:We=14;break;default:We=12}return We}(H);return Ie===this.decode.FLATE_DECODE&&(Ue="/Predictor "+ye+" "),Ue+="/Colors "+ge+" /BitsPerComponent "+Q+" /Columns "+ne.width,(this.__addimage__.isArrayBuffer(k)||this.__addimage__.isArrayBufferView(k))&&(k=this.__addimage__.arrayBufferToBinaryString(k)),(_e&&this.__addimage__.isArrayBuffer(_e)||this.__addimage__.isArrayBufferView(_e))&&(_e=this.__addimage__.arrayBufferToBinaryString(_e)),{alias:q,data:k,index:U,filter:Ie,decodeParameters:Ue,transparency:de,palette:fe,sMask:_e,predictor:ye,width:ne.width,height:ne.height,bitsPerComponent:Q,colorSpace:$}}}})(Bn.API),function(t){t.processGIF89A=function(e,a,r,s){var l=new k2e(e),h=l.width,n=l.height,w=[];l.decodeAndBlitFrameRGBA(0,w);var T={data:w,width:h,height:n},E=new d5(100).encode(T,100);return t.processJPEG.call(this,E,a,r,s)},t.processGIF87A=t.processGIF89A}(Bn.API),_p.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:a,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_p.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(a){no.log("bit decode error:"+a)}},_p.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),a=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+8*s*4,n=0;n<8&&8*s+n<this.width;n++){var w=this.palette[l>>7-n&1];this.data[h+4*n]=w.blue,this.data[h+4*n+1]=w.green,this.data[h+4*n+2]=w.red,this.data[h+4*n+3]=255}a!==0&&(this.pos+=4-a)}},_p.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<t;s++){var l=this.datav.getUint8(this.pos++,!0),h=r*this.width*4+2*s*4,n=l>>4,w=15&l,T=this.palette[n];if(this.data[h]=T.blue,this.data[h+1]=T.green,this.data[h+2]=T.red,this.data[h+3]=255,2*s+1>=this.width)break;T=this.palette[w],this.data[h+4]=T.blue,this.data[h+4+1]=T.green,this.data[h+4+2]=T.red,this.data[h+4+3]=255}e!==0&&(this.pos+=4-e)}},_p.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=a*this.width*4+4*r;if(s<this.palette.length){var h=this.palette[s];this.data[l]=h.red,this.data[l+1]=h.green,this.data[l+2]=h.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},_p.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(l&e)/e*255|0,n=(l>>5&e)/e*255|0,w=(l>>10&e)/e*255|0,T=l>>15?255:0,E=r*this.width*4+4*s;this.data[E]=w,this.data[E+1]=n,this.data[E+2]=h,this.data[E+3]=T}this.pos+=t}},_p.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var n=(h&e)/e*255|0,w=(h>>5&a)/a*255|0,T=(h>>11)/e*255|0,E=s*this.width*4+4*l;this.data[E]=T,this.data[E+1]=w,this.data[E+2]=n,this.data[E+3]=255}this.pos+=t}},_p.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=e*this.width*4+4*a;this.data[h]=l,this.data[h+1]=s,this.data[h+2]=r,this.data[h+3]=255}this.pos+=this.width%4}},_p.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),n=e*this.width*4+4*a;this.data[n]=l,this.data[n+1]=s,this.data[n+2]=r,this.data[n+3]=h}},_p.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,a,r,s){var l=new _p(e,!1),h=l.width,n=l.height,w={data:l.getData(),width:h,height:n},T=new d5(100).encode(w,100);return t.processJPEG.call(this,T,a,r,s)}}(Bn.API),VZ.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,a,r,s){var l=new VZ(e),h=l.width,n=l.height,w={data:l.getData(),width:h,height:n},T=new d5(100).encode(w,100);return t.processJPEG.call(this,T,a,r,s)}}(Bn.API),Bn.API.processRGBA=function(t,e,a){for(var r=t.data,s=r.length,l=new Uint8Array(s/4*3),h=new Uint8Array(s/4),n=0,w=0,T=0;T<s;T+=4){var E=r[T],z=r[T+1],k=r[T+2],U=r[T+3];l[n++]=E,l[n++]=z,l[n++]=k,h[w++]=U}var q=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:q,index:e,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Bn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},m_=Bn.API,mC=m_.getCharWidthsArray=function(t,e){var a,r,s=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),h=e.charSpace||this.internal.getCharSpace(),n=e.widths?e.widths:s.metadata.Unicode.widths,w=n.fof?n.fof:1,T=e.kerning?e.kerning:s.metadata.Unicode.kerning,E=T.fof?T.fof:1,z=e.doKerning!==!1,k=0,U=t.length,q=0,H=n[0]||w,$=[];for(a=0;a<U;a++)r=t.charCodeAt(a),typeof s.metadata.widthOfString=="function"?$.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+h*(1e3/l)||0)/1e3):(k=z&&Is(T[r])==="object"&&!isNaN(parseInt(T[r][q],10))?T[r][q]/E:0,$.push((n[r]||H)/w+k)),q=r;return $},xZ=m_.getStringUnitWidth=function(t,e){var a=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return m_.processArabic&&(t=m_.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,a,s)/a:mC.apply(this,arguments).reduce(function(l,h){return l+h},0)},PZ=function(t,e,a,r){for(var s=[],l=0,h=t.length,n=0;l!==h&&n+e[l]<a;)n+=e[l],l++;s.push(t.slice(0,l));var w=l;for(n=0;l!==h;)n+e[l]>r&&(s.push(t.slice(w,l)),n=0,w=l),n+=e[l],l++;return w!==l&&s.push(t.slice(w,l)),s},EZ=function(t,e,a){a||(a={});var r,s,l,h,n,w,T,E=[],z=[E],k=a.textIndent||0,U=0,q=0,H=t.split(" "),$=mC.apply(this,[" ",a])[0];if(w=a.lineIndent===-1?H[0].length+2:a.lineIndent||0){var Q=Array(w).join(" "),ne=[];H.map(function(ge){(ge=ge.split(/\s*\n/)).length>1?ne=ne.concat(ge.map(function(fe,_e){return(_e&&fe.length?`
`:"")+fe})):ne.push(ge[0])}),H=ne,w=xZ.apply(this,[Q,a])}for(l=0,h=H.length;l<h;l++){var de=0;if(r=H[l],w&&r[0]==`
`&&(r=r.substr(1),de=1),k+U+(q=(s=mC.apply(this,[r,a])).reduce(function(ge,fe){return ge+fe},0))>e||de){if(q>e){for(n=PZ.apply(this,[r,s,e-(k+U),e]),E.push(n.shift()),E=[n.pop()];n.length;)z.push([n.shift()]);q=s.slice(r.length-(E[0]?E[0].length:0)).reduce(function(ge,fe){return ge+fe},0)}else E=[r];z.push(E),k=q+w,U=$}else E.push(r),k+=U+q,U=$}return T=w?function(ge,fe){return(fe?Q:"")+ge.join(" ")}:function(ge){return ge.join(" ")},z.map(T)},m_.splitTextToSize=function(t,e,a){var r,s=(a=a||{}).fontSize||this.internal.getFontSize(),l=(function(E){if(E.widths&&E.kerning)return{widths:E.widths,kerning:E.kerning};var z=this.internal.getFont(E.fontName,E.fontStyle);return z.metadata.Unicode?{widths:z.metadata.Unicode.widths||{0:1},kerning:z.metadata.Unicode.kerning||{}}:{font:z.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var h=1*this.internal.scaleFactor*e/s;l.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/s:0,l.lineIndent=a.lineIndent;var n,w,T=[];for(n=0,w=r.length;n<w;n++)T=T.concat(EZ.apply(this,[r[n],h,l]));return T},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",a={},r={},s=0;s<e.length;s++)a[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var l=function(z){return"0x"+parseInt(z,10).toString(16)},h=t.__fontmetrics__.compress=function(z){var k,U,q,H,$=["{"];for(var Q in z){if(k=z[Q],isNaN(parseInt(Q,10))?U="'"+Q+"'":(Q=parseInt(Q,10),U=(U=l(Q).slice(2)).slice(0,-1)+r[U.slice(-1)]),typeof k=="number")k<0?(q=l(k).slice(3),H="-"):(q=l(k).slice(2),H=""),q=H+q.slice(0,-1)+r[q.slice(-1)];else{if(Is(k)!=="object")throw new Error("Don't know what to do with value type "+Is(k)+".");q=h(k)}$.push(U+q)}return $.push("}"),$.join("")},n=t.__fontmetrics__.uncompress=function(z){if(typeof z!="string")throw new Error("Invalid argument passed to uncompress.");for(var k,U,q,H,$={},Q=1,ne=$,de=[],ge="",fe="",_e=z.length-1,me=1;me<_e;me+=1)(H=z[me])=="'"?k?(q=k.join(""),k=void 0):k=[]:k?k.push(H):H=="{"?(de.push([ne,q]),ne={},q=void 0):H=="}"?((U=de.pop())[0][U[1]]=ne,q=void 0,ne=U[0]):H=="-"?Q=-1:q===void 0?a.hasOwnProperty(H)?(ge+=a[H],q=parseInt(ge,16)*Q,Q=1,ge=""):ge+=H:a.hasOwnProperty(H)?(fe+=a[H],ne[q]=parseInt(fe,16)*Q,Q=1,q=void 0,fe=""):fe+=H;return $},w={codePages:["WinAnsiEncoding"],WinAnsiEncoding:n("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},T={Unicode:{Courier:w,"Courier-Bold":w,"Courier-BoldOblique":w,"Courier-Oblique":w,Helvetica:w,"Helvetica-Bold":w,"Helvetica-BoldOblique":w,"Helvetica-Oblique":w,"Times-Roman":w,"Times-Bold":w,"Times-BoldItalic":w,"Times-Italic":w}},E={Unicode:{"Courier-Oblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":n("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":n("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:n("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":n("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:n("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":n("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":n("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":n("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":n("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(z){var k=z.font,U=E.Unicode[k.postScriptName];U&&(k.metadata.Unicode={},k.metadata.Unicode.widths=U.widths,k.metadata.Unicode.kerning=U.kerning);var q=T.Unicode[k.postScriptName];q&&(k.metadata.Unicode.encoding=q,k.encoding=q.codePages[0])}])}(Bn.API),function(t){var e=function(a){for(var r=a.length,s=new Uint8Array(r),l=0;l<r;l++)s[l]=a.charCodeAt(l);return s};t.API.events.push(["addFont",function(a){var r=void 0,s=a.font,l=a.instance;if(!s.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=l.existsFileInVFS(s.postScriptName)===!1?l.loadFile(s.postScriptName):l.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(h,n){n=/^\x00\x01\x00\x00/.test(n)?e(n):e(Bw(n)),h.metadata=t.API.TTFFont.open(n),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(s,r)}}])}(Bn),function(t){function e(){return($n.canvg?Promise.resolve($n.canvg):bM(()=>import("./index.es-LnpUYRKt.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load canvg: "+a))}).then(function(a){return a.default?a.default:a})}Bn.API.addSvgAsImage=function(a,r,s,l,h,n,w,T){if(isNaN(r)||isNaN(s))throw no.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(h))throw no.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var E=document.createElement("canvas");E.width=l,E.height=h;var z=E.getContext("2d");z.fillStyle="#fff",z.fillRect(0,0,E.width,E.height);var k={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},U=this;return e().then(function(q){return q.fromString(z,a,k)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(q){return q.render(k)}).then(function(){U.addImage(E.toDataURL("image/jpeg",1),r,s,l,h,w,T)})}}(),Bn.API.putTotalPages=function(t){var e,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),a=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,a);return this},Bn.API.viewerPreferences=function(t,e){var a;t=t||{},e=e||!1;var r,s,l,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},n=Object.keys(h),w=[],T=0,E=0,z=0;function k(q,H){var $,Q=!1;for($=0;$<q.length;$+=1)q[$]===H&&(Q=!0);return Q}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var U=n.length;for(z=0;z<U;z+=1)a[n[z]].value=a[n[z]].defaultValue,a[n[z]].explicitSet=!1}if(Is(t)==="object"){for(s in t)if(l=t[s],k(n,s)&&l!==void 0){if(a[s].type==="boolean"&&typeof l=="boolean")a[s].value=l;else if(a[s].type==="name"&&k(a[s].valueSet,l))a[s].value=l;else if(a[s].type==="integer"&&Number.isInteger(l))a[s].value=l;else if(a[s].type==="array"){for(T=0;T<l.length;T+=1)if(r=!0,l[T].length===1&&typeof l[T][0]=="number")w.push(String(l[T]-1));else if(l[T].length>1){for(E=0;E<l[T].length;E+=1)typeof l[T][E]!="number"&&(r=!1);r===!0&&w.push([l[T][0]-1,l[T][1]-1].join(" "))}a[s].value="["+w.join(" ")+"]"}else a[s].value=a[s].defaultValue;a[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var q,H=[];for(q in a)a[q].explicitSet===!0&&(a[q].type==="name"?H.push("/"+q+" /"+a[q].value):H.push("/"+q+" "+a[q].value));H.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+H.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),w=unescape(encodeURIComponent("</x:xmpmeta>")),T=l.length+h.length+n.length+s.length+w.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+T+" >>"),this.internal.write("stream"),this.internal.write(s+l+h+n+w),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",e)),this}}(Bn.API),function(t){var e=t.API,a=e.pdfEscape16=function(l,h){for(var n,w=h.metadata.Unicode.widths,T=["","0","00","000","0000"],E=[""],z=0,k=l.length;z<k;++z){if(n=h.metadata.characterToGlyph(l.charCodeAt(z)),h.metadata.glyIdsUsed.push(n),h.metadata.toUnicode[n]=l.charCodeAt(z),w.indexOf(n)==-1&&(w.push(n),w.push([parseInt(h.metadata.widthOfGlyph(n),10)])),n=="0")return E.join("");n=n.toString(16),E.push(T[4-n.length],n)}return E.join("")},r=function(l){var h,n,w,T,E,z,k;for(E=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,w=[],z=0,k=(n=Object.keys(l).sort(function(U,q){return U-q})).length;z<k;z++)h=n[z],w.length>=100&&(E+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar`,w=[]),l[h]!==void 0&&l[h]!==null&&typeof l[h].toString=="function"&&(T=("0000"+l[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),w.push("<"+h+"><"+T+">"));return w.length&&(E+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar
`),E+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(h){var n=h.font,w=h.out,T=h.newObject,E=h.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="Identity-H"){for(var z=n.metadata.Unicode.widths,k=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),U="",q=0;q<k.length;q++)U+=String.fromCharCode(k[q]);var H=T();E({data:U,addLength1:!0,objectId:H}),w("endobj");var $=T();E({data:r(n.metadata.toUnicode),addLength1:!0,objectId:$}),w("endobj");var Q=T();w("<<"),w("/Type /FontDescriptor"),w("/FontName /"+v_(n.fontName)),w("/FontFile2 "+H+" 0 R"),w("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),w("/Flags "+n.metadata.flags),w("/StemV "+n.metadata.stemV),w("/ItalicAngle "+n.metadata.italicAngle),w("/Ascent "+n.metadata.ascender),w("/Descent "+n.metadata.decender),w("/CapHeight "+n.metadata.capHeight),w(">>"),w("endobj");var ne=T();w("<<"),w("/Type /Font"),w("/BaseFont /"+v_(n.fontName)),w("/FontDescriptor "+Q+" 0 R"),w("/W "+t.API.PDFObject.convert(z)),w("/CIDToGIDMap /Identity"),w("/DW 1000"),w("/Subtype /CIDFontType2"),w("/CIDSystemInfo"),w("<<"),w("/Supplement 0"),w("/Registry (Adobe)"),w("/Ordering ("+n.encoding+")"),w(">>"),w(">>"),w("endobj"),n.objectNumber=T(),w("<<"),w("/Type /Font"),w("/Subtype /Type0"),w("/ToUnicode "+$+" 0 R"),w("/BaseFont /"+v_(n.fontName)),w("/Encoding /"+n.encoding),w("/DescendantFonts ["+ne+" 0 R]"),w(">>"),w("endobj"),n.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(h){var n=h.font,w=h.out,T=h.newObject,E=h.putStream;if(n.metadata instanceof t.API.TTFFont&&n.encoding==="WinAnsiEncoding"){for(var z=n.metadata.rawData,k="",U=0;U<z.length;U++)k+=String.fromCharCode(z[U]);var q=T();E({data:k,addLength1:!0,objectId:q}),w("endobj");var H=T();E({data:r(n.metadata.toUnicode),addLength1:!0,objectId:H}),w("endobj");var $=T();w("<<"),w("/Descent "+n.metadata.decender),w("/CapHeight "+n.metadata.capHeight),w("/StemV "+n.metadata.stemV),w("/Type /FontDescriptor"),w("/FontFile2 "+q+" 0 R"),w("/Flags 96"),w("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),w("/FontName /"+v_(n.fontName)),w("/ItalicAngle "+n.metadata.italicAngle),w("/Ascent "+n.metadata.ascender),w(">>"),w("endobj"),n.objectNumber=T();for(var Q=0;Q<n.metadata.hmtx.widths.length;Q++)n.metadata.hmtx.widths[Q]=parseInt(n.metadata.hmtx.widths[Q]*(1e3/n.metadata.head.unitsPerEm));w("<</Subtype/TrueType/Type/Font/ToUnicode "+H+" 0 R/BaseFont/"+v_(n.fontName)+"/FontDescriptor "+$+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),w("endobj"),n.isAlreadyPutted=!0}})(l)}]);var s=function(l){var h,n=l.text||"",w=l.x,T=l.y,E=l.options||{},z=l.mutex||{},k=z.pdfEscape,U=z.activeFontKey,q=z.fonts,H=U,$="",Q=0,ne="",de=q[H].encoding;if(q[H].encoding!=="Identity-H")return{text:n,x:w,y:T,options:E,mutex:z};for(ne=n,H=U,Array.isArray(n)&&(ne=n[0]),Q=0;Q<ne.length;Q+=1)q[H].metadata.hasOwnProperty("cmap")&&(h=q[H].metadata.cmap.unicode.codeMap[ne[Q].charCodeAt(0)]),h||ne[Q].charCodeAt(0)<256&&q[H].metadata.hasOwnProperty("Unicode")?$+=ne[Q]:$+="";var ge="";return parseInt(H.slice(1))<14||de==="WinAnsiEncoding"?ge=k($,H).split("").map(function(fe){return fe.charCodeAt(0).toString(16)}).join(""):de==="Identity-H"&&(ge=a($,q[H])),z.isHex=!0,{text:ge,x:w,y:T,options:E,mutex:z}};e.events.push(["postProcessText",function(l){var h=l.text||"",n=[],w={text:h,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(h)){var T=0;for(T=0;T<h.length;T+=1)Array.isArray(h[T])&&h[T].length===3?n.push([s(Object.assign({},w,{text:h[T][0]})).text,h[T][1],h[T][2]]):n.push(s(Object.assign({},w,{text:h[T]})).text);l.text=n}else l.text=s(Object.assign({},w,{text:h})).text}])}(Bn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0},t.addFileToVFS=function(a,r){return e.call(this),this.internal.vFS[a]=r,this},t.getFileFromVFS=function(a){return e.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}}(Bn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var s,l,h,n,w,T,E,z=e,k=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],U=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],q={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},H={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},$=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],Q=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ne=!1,de=0;this.__bidiEngine__={};var ge=function(ie){var we=ie.charCodeAt(),Me=we>>8,Ve=H[Me];return Ve!==void 0?z[256*Ve+(255&we)]:Me===252||Me===253?"AL":Q.test(Me)?"L":Me===8?"R":"N"},fe=function(ie){for(var we,Me=0;Me<ie.length;Me++){if((we=ge(ie.charAt(Me)))==="L")return!1;if(we==="R")return!0}return!1},_e=function(ie,we,Me,Ve){var Ie,Ue,Be,ke,Je=we[Ve];switch(Je){case"L":case"R":ne=!1;break;case"N":case"AN":break;case"EN":ne&&(Je="AN");break;case"AL":ne=!0,Je="R";break;case"WS":Je="N";break;case"CS":Ve<1||Ve+1>=we.length||(Ie=Me[Ve-1])!=="EN"&&Ie!=="AN"||(Ue=we[Ve+1])!=="EN"&&Ue!=="AN"?Je="N":ne&&(Ue="AN"),Je=Ue===Ie?Ue:"N";break;case"ES":Je=(Ie=Ve>0?Me[Ve-1]:"B")==="EN"&&Ve+1<we.length&&we[Ve+1]==="EN"?"EN":"N";break;case"ET":if(Ve>0&&Me[Ve-1]==="EN"){Je="EN";break}if(ne){Je="N";break}for(Be=Ve+1,ke=we.length;Be<ke&&we[Be]==="ET";)Be++;Je=Be<ke&&we[Be]==="EN"?"EN":"N";break;case"NSM":if(h&&!n){for(ke=we.length,Be=Ve+1;Be<ke&&we[Be]==="NSM";)Be++;if(Be<ke){var Le=ie[Ve],qe=Le>=1425&&Le<=2303||Le===64286;if(Ie=we[Be],qe&&(Ie==="R"||Ie==="AL")){Je="R";break}}}Je=Ve<1||(Ie=we[Ve-1])==="B"?"N":Me[Ve-1];break;case"B":ne=!1,s=!0,Je=de;break;case"S":l=!0,Je="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ne=!1;break;case"BN":Je="N"}return Je},me=function(ie,we,Me){var Ve=ie.split("");return Me&&Ae(Ve,Me,{hiLevel:de}),Ve.reverse(),we&&we.reverse(),Ve.join("")},Ae=function(ie,we,Me){var Ve,Ie,Ue,Be,ke,Je=-1,Le=ie.length,qe=0,ye=[],ze=de?U:k,We=[];for(ne=!1,s=!1,l=!1,Ie=0;Ie<Le;Ie++)We[Ie]=ge(ie[Ie]);for(Ue=0;Ue<Le;Ue++){if(ke=qe,ye[Ue]=_e(ie,We,ye,Ue),Ve=240&(qe=ze[ke][q[ye[Ue]]]),qe&=15,we[Ue]=Be=ze[qe][5],Ve>0)if(Ve===16){for(Ie=Je;Ie<Ue;Ie++)we[Ie]=1;Je=-1}else Je=-1;if(ze[qe][6])Je===-1&&(Je=Ue);else if(Je>-1){for(Ie=Je;Ie<Ue;Ie++)we[Ie]=Be;Je=-1}We[Ue]==="B"&&(we[Ue]=0),Me.hiLevel|=Be}l&&function(lt,vt,Ot){for(var dt=0;dt<Ot;dt++)if(lt[dt]==="S"){vt[dt]=de;for(var pt=dt-1;pt>=0&&lt[pt]==="WS";pt--)vt[pt]=de}}(We,we,Le)},Te=function(ie,we,Me,Ve,Ie){if(!(Ie.hiLevel<ie)){if(ie===1&&de===1&&!s)return we.reverse(),void(Me&&Me.reverse());for(var Ue,Be,ke,Je,Le=we.length,qe=0;qe<Le;){if(Ve[qe]>=ie){for(ke=qe+1;ke<Le&&Ve[ke]>=ie;)ke++;for(Je=qe,Be=ke-1;Je<Be;Je++,Be--)Ue=we[Je],we[Je]=we[Be],we[Be]=Ue,Me&&(Ue=Me[Je],Me[Je]=Me[Be],Me[Be]=Ue);qe=ke}qe++}}},Oe=function(ie,we,Me){var Ve=ie.split(""),Ie={hiLevel:de};return Me||(Me=[]),Ae(Ve,Me,Ie),function(Ue,Be,ke){if(ke.hiLevel!==0&&E)for(var Je,Le=0;Le<Ue.length;Le++)Be[Le]===1&&(Je=$.indexOf(Ue[Le]))>=0&&(Ue[Le]=$[Je+1])}(Ve,Me,Ie),Te(2,Ve,we,Me,Ie),Te(1,Ve,we,Me,Ie),Ve.join("")};return this.__bidiEngine__.doBidiReorder=function(ie,we,Me){if(function(Ie,Ue){if(Ue)for(var Be=0;Be<Ie.length;Be++)Ue[Be]=Be;n===void 0&&(n=fe(Ie)),T===void 0&&(T=fe(Ie))}(ie,we),h||!w||T)if(h&&w&&n^T)de=n?1:0,ie=me(ie,we,Me);else if(!h&&w&&T)de=n?1:0,ie=Oe(ie,we,Me),ie=me(ie,we);else if(!h||n||w||T){if(h&&!w&&n^T)ie=me(ie,we),n?(de=0,ie=Oe(ie,we,Me)):(de=1,ie=Oe(ie,we,Me),ie=me(ie,we));else if(h&&n&&!w&&T)de=1,ie=Oe(ie,we,Me),ie=me(ie,we);else if(!h&&!w&&n^T){var Ve=E;n?(de=1,ie=Oe(ie,we,Me),de=0,E=!1,ie=Oe(ie,we,Me),E=Ve):(de=0,ie=Oe(ie,we,Me),ie=me(ie,we),de=1,E=!1,ie=Oe(ie,we,Me),E=Ve,ie=me(ie,we))}}else de=0,ie=Oe(ie,we,Me);else de=n?1:0,ie=Oe(ie,we,Me);return ie},this.__bidiEngine__.setOptions=function(ie){ie&&(h=ie.isInputVisual,w=ie.isOutputVisual,n=ie.isInputRtl,T=ie.isOutputRtl,E=ie.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var l=r.options||{};r.mutex,l.lang;var h=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,a.setOptions(l),Object.prototype.toString.call(s)==="[object Array]"){var n=0;for(h=[],n=0;n<s.length;n+=1)Object.prototype.toString.call(s[n])==="[object Array]"?h.push([a.doBidiReorder(s[n][0]),s[n][1],s[n][2]]):h.push([a.doBidiReorder(s[n])]);r.text=h}else r.text=a.doBidiReorder(s);a.setOptions({isInputVisual:!0})}])}(Bn),Bn.API.TTFFont=function(){function t(e){var a;if(this.rawData=e,a=this.contents=new Ng(e),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new tPe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new B2e(this.contents),this.head=new j2e(this),this.name=new K2e(this),this.cmap=new MJ(this),this.toUnicode={},this.hhea=new Z2e(this),this.maxp=new W2e(this),this.hmtx=new Y2e(this),this.post=new H2e(this),this.os2=new q2e(this),this.loca=new ePe(this),this.glyf=new X2e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,a,r,s,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,n,w,T;for(T=[],h=0,n=(w=this.bbox).length;h<n;h++)e=w[h],T.push(Math.round(e*this.scaleFactor));return T}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),(32768&(a=s>>16))!=0&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var a;return((a=this.cmap.unicode)!=null?a.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*a},t.prototype.widthOfString=function(e,a,r){var s,l,h,n;for(h=0,l=0,n=(e=""+e).length;0<=n?l<n:l>n;l=0<=n?++l:--l)s=e.charCodeAt(l),h+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/a)||0;return h*(a/1e3)},t.prototype.lineHeight=function(e,a){var r;return a==null&&(a=!1),r=a?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Mp,Ng=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var a,r;for(r=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)r[a]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var a,r,s;for(s=[],a=0,r=e.length;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push(this.writeByte(e.charCodeAt(a)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,a,r,s,l,h,n,w;return e=this.readByte(),a=this.readByte(),r=this.readByte(),s=this.readByte(),l=this.readByte(),h=this.readByte(),n=this.readByte(),w=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^a)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^l)+65536*(255^h)+256*(255^n)+(255^w)+1):72057594037927940*e+281474976710656*a+1099511627776*r+4294967296*s+16777216*l+65536*h+256*n+w},t.prototype.writeLongLong=function(e){var a,r;return a=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var a,r;for(a=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)a.push(this.readByte());return a},t.prototype.write=function(e){var a,r,s,l;for(l=[],r=0,s=e.length;r<s;r++)a=e[r],l.push(this.writeByte(a));return l},t}(),B2e=function(){var t;function e(a){var r,s,l;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},s=0,l=this.tableCount;0<=l?s<l:s>l;s=0<=l?++s:--s)r={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(a){var r,s,l,h,n,w,T,E,z,k,U,q,H;for(H in U=Object.keys(a).length,w=Math.log(2),z=16*Math.floor(Math.log(U)/w),h=Math.floor(z/w),E=16*U-z,(s=new Ng).writeInt(this.scalarType),s.writeShort(U),s.writeShort(z),s.writeShort(h),s.writeShort(E),l=16*U,T=s.pos+l,n=null,q=[],a)for(k=a[H],s.writeString(H),s.writeInt(t(k)),s.writeInt(T),s.writeInt(k.length),q=q.concat(k),H==="head"&&(n=T),T+=k.length;T%4;)q.push(0),T++;return s.write(q),r=2981146554-t(s.data),s.pos=n+8,s.writeUInt32(r),s.data},t=function(a){var r,s,l,h;for(a=IJ.call(a);a.length%4;)a.push(0);for(l=new Ng(a),s=0,r=0,h=a.length;r<h;r=r+=4)s+=l.readUInt32();return 4294967295&s},e}(),G2e={}.hasOwnProperty,zm=function(t,e){for(var a in e)G2e.call(e,a)&&(t[a]=e[a]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Mp=function(){function t(e){var a;this.file=e,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var j2e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="head",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.revision=a.readInt(),this.checkSumAdjustment=a.readInt(),this.magicNumber=a.readInt(),this.flags=a.readShort(),this.unitsPerEm=a.readShort(),this.created=a.readLongLong(),this.modified=a.readLongLong(),this.xMin=a.readShort(),this.yMin=a.readShort(),this.xMax=a.readShort(),this.yMax=a.readShort(),this.macStyle=a.readShort(),this.lowestRecPPEM=a.readShort(),this.fontDirectionHint=a.readShort(),this.indexToLocFormat=a.readShort(),this.glyphDataFormat=a.readShort()},e.prototype.encode=function(a){var r;return(r=new Ng).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(a),r.writeShort(this.glyphDataFormat),r.data},e}(),zZ=function(){function t(e,a){var r,s,l,h,n,w,T,E,z,k,U,q,H,$,Q,ne,de;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=a+e.readInt(),z=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(w=0;w<256;++w)this.codeMap[w]=e.readByte();break;case 4:for(U=e.readUInt16(),k=U/2,e.pos+=6,l=function(){var ge,fe;for(fe=[],w=ge=0;0<=k?ge<k:ge>k;w=0<=k?++ge:--ge)fe.push(e.readUInt16());return fe}(),e.pos+=2,H=function(){var ge,fe;for(fe=[],w=ge=0;0<=k?ge<k:ge>k;w=0<=k?++ge:--ge)fe.push(e.readUInt16());return fe}(),T=function(){var ge,fe;for(fe=[],w=ge=0;0<=k?ge<k:ge>k;w=0<=k?++ge:--ge)fe.push(e.readUInt16());return fe}(),E=function(){var ge,fe;for(fe=[],w=ge=0;0<=k?ge<k:ge>k;w=0<=k?++ge:--ge)fe.push(e.readUInt16());return fe}(),s=(this.length-e.pos+this.offset)/2,n=function(){var ge,fe;for(fe=[],w=ge=0;0<=s?ge<s:ge>s;w=0<=s?++ge:--ge)fe.push(e.readUInt16());return fe}(),w=Q=0,de=l.length;Q<de;w=++Q)for($=l[w],r=ne=q=H[w];q<=$?ne<=$:ne>=$;r=q<=$?++ne:--ne)E[w]===0?h=r+T[w]:(h=n[E[w]/2+(r-q)-(k-w)]||0)!==0&&(h+=T[w]),this.codeMap[r]=65535&h}e.pos=z}return t.encode=function(e,a){var r,s,l,h,n,w,T,E,z,k,U,q,H,$,Q,ne,de,ge,fe,_e,me,Ae,Te,Oe,ie,we,Me,Ve,Ie,Ue,Be,ke,Je,Le,qe,ye,ze,We,lt,vt,Ot,dt,pt,ve,ea,Kt;switch(Ve=new Ng,h=Object.keys(e).sort(function(Ea,Bt){return Ea-Bt}),a){case"macroman":for(H=0,$=function(){var Ea=[];for(q=0;q<256;++q)Ea.push(0);return Ea}(),ne={0:0},l={},Ie=0,Je=h.length;Ie<Je;Ie++)ne[pt=e[s=h[Ie]]]==null&&(ne[pt]=++H),l[s]={old:e[s],new:ne[e[s]]},$[s]=ne[e[s]];return Ve.writeUInt16(1),Ve.writeUInt16(0),Ve.writeUInt32(12),Ve.writeUInt16(0),Ve.writeUInt16(262),Ve.writeUInt16(0),Ve.write($),{charMap:l,subtable:Ve.data,maxGlyphID:H+1};case"unicode":for(we=[],z=[],de=0,ne={},r={},Q=T=null,Ue=0,Le=h.length;Ue<Le;Ue++)ne[fe=e[s=h[Ue]]]==null&&(ne[fe]=++de),r[s]={old:fe,new:ne[fe]},n=ne[fe]-s,Q!=null&&n===T||(Q&&z.push(Q),we.push(s),T=n),Q=s;for(Q&&z.push(Q),z.push(65535),we.push(65535),Oe=2*(Te=we.length),Ae=2*Math.pow(Math.log(Te)/Math.LN2,2),k=Math.log(Ae/2)/Math.LN2,me=2*Te-Ae,w=[],_e=[],U=[],q=Be=0,qe=we.length;Be<qe;q=++Be){if(ie=we[q],E=z[q],ie===65535){w.push(0),_e.push(0);break}if(ie-(Me=r[ie].new)>=32768)for(w.push(0),_e.push(2*(U.length+Te-q)),s=ke=ie;ie<=E?ke<=E:ke>=E;s=ie<=E?++ke:--ke)U.push(r[s].new);else w.push(Me-ie),_e.push(0)}for(Ve.writeUInt16(3),Ve.writeUInt16(1),Ve.writeUInt32(12),Ve.writeUInt16(4),Ve.writeUInt16(16+8*Te+2*U.length),Ve.writeUInt16(0),Ve.writeUInt16(Oe),Ve.writeUInt16(Ae),Ve.writeUInt16(k),Ve.writeUInt16(me),Ot=0,ye=z.length;Ot<ye;Ot++)s=z[Ot],Ve.writeUInt16(s);for(Ve.writeUInt16(0),dt=0,ze=we.length;dt<ze;dt++)s=we[dt],Ve.writeUInt16(s);for(ve=0,We=w.length;ve<We;ve++)n=w[ve],Ve.writeUInt16(n);for(ea=0,lt=_e.length;ea<lt;ea++)ge=_e[ea],Ve.writeUInt16(ge);for(Kt=0,vt=U.length;Kt<vt;Kt++)H=U[Kt],Ve.writeUInt16(H);return{charMap:r,subtable:Ve.data,maxGlyphID:de+1}}},t}(),MJ=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="cmap",e.prototype.parse=function(a){var r,s,l;for(a.pos=this.offset,this.version=a.readUInt16(),l=a.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=l?s<l:s>l;s=0<=l?++s:--s)r=new zZ(a,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(a,r){var s,l;return r==null&&(r="macroman"),s=zZ.encode(a,r),(l=new Ng).writeUInt16(0),l.writeUInt16(1),s.table=l.data.concat(s.subtable),s},e}(),Z2e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="hhea",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.ascender=a.readShort(),this.decender=a.readShort(),this.lineGap=a.readShort(),this.advanceWidthMax=a.readShort(),this.minLeftSideBearing=a.readShort(),this.minRightSideBearing=a.readShort(),this.xMaxExtent=a.readShort(),this.caretSlopeRise=a.readShort(),this.caretSlopeRun=a.readShort(),this.caretOffset=a.readShort(),a.pos+=8,this.metricDataFormat=a.readShort(),this.numberOfMetrics=a.readUInt16()},e}(),q2e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="OS/2",e.prototype.parse=function(a){if(a.pos=this.offset,this.version=a.readUInt16(),this.averageCharWidth=a.readShort(),this.weightClass=a.readUInt16(),this.widthClass=a.readUInt16(),this.type=a.readShort(),this.ySubscriptXSize=a.readShort(),this.ySubscriptYSize=a.readShort(),this.ySubscriptXOffset=a.readShort(),this.ySubscriptYOffset=a.readShort(),this.ySuperscriptXSize=a.readShort(),this.ySuperscriptYSize=a.readShort(),this.ySuperscriptXOffset=a.readShort(),this.ySuperscriptYOffset=a.readShort(),this.yStrikeoutSize=a.readShort(),this.yStrikeoutPosition=a.readShort(),this.familyClass=a.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(a.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(a.readInt());return s}(),this.vendorID=a.readString(4),this.selection=a.readShort(),this.firstCharIndex=a.readShort(),this.lastCharIndex=a.readShort(),this.version>0&&(this.ascent=a.readShort(),this.descent=a.readShort(),this.lineGap=a.readShort(),this.winAscent=a.readShort(),this.winDescent=a.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(a.readInt());return s}(),this.version>1))return this.xHeight=a.readShort(),this.capHeight=a.readShort(),this.defaultChar=a.readShort(),this.breakChar=a.readShort(),this.maxContext=a.readShort()},e}(),H2e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="post",e.prototype.parse=function(a){var r,s,l;switch(a.pos=this.offset,this.format=a.readInt(),this.italicAngle=a.readInt(),this.underlinePosition=a.readShort(),this.underlineThickness=a.readShort(),this.isFixedPitch=a.readInt(),this.minMemType42=a.readInt(),this.maxMemType42=a.readInt(),this.minMemType1=a.readInt(),this.maxMemType1=a.readInt(),this.format){case 65536:break;case 131072:var h;for(s=a.readUInt16(),this.glyphNameIndex=[],h=0;0<=s?h<s:h>s;h=0<=s?++h:--h)this.glyphNameIndex.push(a.readUInt16());for(this.names=[],l=[];a.pos<this.offset+this.length;)r=a.readByte(),l.push(this.names.push(a.readString(r)));return l;case 151552:return s=a.readUInt16(),this.offsets=a.read(s);case 196608:break;case 262144:return this.map=(function(){var n,w,T;for(T=[],h=n=0,w=this.file.maxp.numGlyphs;0<=w?n<w:n>w;h=0<=w?++n:--n)T.push(a.readUInt32());return T}).call(this)}},e}(),$2e=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},K2e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="name",e.prototype.parse=function(a){var r,s,l,h,n,w,T,E,z,k,U;for(a.pos=this.offset,a.readShort(),r=a.readShort(),w=a.readShort(),s=[],h=0;0<=r?h<r:h>r;h=0<=r?++h:--h)s.push({platformID:a.readShort(),encodingID:a.readShort(),languageID:a.readShort(),nameID:a.readShort(),length:a.readShort(),offset:this.offset+w+a.readShort()});for(T={},h=z=0,k=s.length;z<k;h=++z)l=s[h],a.pos=l.offset,E=a.readString(l.length),n=new $2e(E,l),T[U=l.nameID]==null&&(T[U]=[]),T[l.nameID].push(n);this.strings=T,this.copyright=T[0],this.fontFamily=T[1],this.fontSubfamily=T[2],this.uniqueSubfamily=T[3],this.fontName=T[4],this.version=T[5];try{this.postscriptName=T[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=T[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=T[7],this.manufacturer=T[8],this.designer=T[9],this.description=T[10],this.vendorUrl=T[11],this.designerUrl=T[12],this.license=T[13],this.licenseUrl=T[14],this.preferredFamily=T[15],this.preferredSubfamily=T[17],this.compatibleFull=T[18],this.sampleText=T[19]},e}(),W2e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="maxp",e.prototype.parse=function(a){return a.pos=this.offset,this.version=a.readInt(),this.numGlyphs=a.readUInt16(),this.maxPoints=a.readUInt16(),this.maxContours=a.readUInt16(),this.maxCompositePoints=a.readUInt16(),this.maxComponentContours=a.readUInt16(),this.maxZones=a.readUInt16(),this.maxTwilightPoints=a.readUInt16(),this.maxStorage=a.readUInt16(),this.maxFunctionDefs=a.readUInt16(),this.maxInstructionDefs=a.readUInt16(),this.maxStackElements=a.readUInt16(),this.maxSizeOfInstructions=a.readUInt16(),this.maxComponentElements=a.readUInt16(),this.maxComponentDepth=a.readUInt16()},e}(),Y2e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="hmtx",e.prototype.parse=function(a){var r,s,l,h,n,w,T;for(a.pos=this.offset,this.metrics=[],r=0,w=this.file.hhea.numberOfMetrics;0<=w?r<w:r>w;r=0<=w?++r:--r)this.metrics.push({advance:a.readUInt16(),lsb:a.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var E,z;for(z=[],r=E=0;0<=l?E<l:E>l;r=0<=l?++E:--E)z.push(a.readInt16());return z}(),this.widths=(function(){var E,z,k,U;for(U=[],E=0,z=(k=this.metrics).length;E<z;E++)h=k[E],U.push(h.advance);return U}).call(this),s=this.widths[this.widths.length-1],T=[],r=n=0;0<=l?n<l:n>l;r=0<=l?++n:--n)T.push(this.widths.push(s));return T},e.prototype.forGlyph=function(a){return a in this.metrics?this.metrics[a]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[a-this.metrics.length]}},e}(),IJ=[].slice,X2e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(a){var r,s,l,h,n,w,T,E,z,k;return a in this.cache?this.cache[a]:(h=this.file.loca,r=this.file.contents,s=h.indexOf(a),(l=h.lengthOf(a))===0?this.cache[a]=null:(r.pos=this.offset+s,n=(w=new Ng(r.read(l))).readShort(),E=w.readShort(),k=w.readShort(),T=w.readShort(),z=w.readShort(),this.cache[a]=n===-1?new Q2e(w,E,k,T,z):new J2e(w,n,E,k,T,z),this.cache[a]))},e.prototype.encode=function(a,r,s){var l,h,n,w,T;for(n=[],h=[],w=0,T=r.length;w<T;w++)l=a[r[w]],h.push(n.length),l&&(n=n.concat(l.encode(s)));return h.push(n.length),{table:n,offsets:h}},e}(),J2e=function(){function t(e,a,r,s,l,h){this.raw=e,this.numberOfContours=a,this.xMin=r,this.yMin=s,this.xMax=l,this.yMax=h,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Q2e=function(){function t(e,a,r,s,l){var h,n;for(this.raw=e,this.xMin=a,this.yMin=r,this.xMax=s,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;n=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&n;)h.pos+=1&n?4:2,128&n?h.pos+=8:64&n?h.pos+=4:8&n&&(h.pos+=2)}return t.prototype.encode=function(){var e,a,r;for(a=new Ng(IJ.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)a.pos=this.glyphOffsets[e];return a.data},t}(),ePe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return zm(e,Mp),e.prototype.tag="loca",e.prototype.parse=function(a){var r,s;return a.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,h;for(h=[],s=0,l=this.length;s<l;s+=2)h.push(2*a.readUInt16());return h}).call(this):(function(){var l,h;for(h=[],s=0,l=this.length;s<l;s+=4)h.push(a.readUInt32());return h}).call(this)},e.prototype.indexOf=function(a){return this.offsets[a]},e.prototype.lengthOf=function(a){return this.offsets[a+1]-this.offsets[a]},e.prototype.encode=function(a,r){for(var s=new Uint32Array(this.offsets.length),l=0,h=0,n=0;n<s.length;++n)if(s[n]=l,h<r.length&&r[h]==n){++h,s[n]=l;var w=this.offsets[n],T=this.offsets[n+1]-w;T>0&&(l+=T)}for(var E=new Array(4*s.length),z=0;z<s.length;++z)E[4*z+3]=255&s[z],E[4*z+2]=(65280&s[z])>>8,E[4*z+1]=(16711680&s[z])>>16,E[4*z]=(4278190080&s[z])>>24;return E},e}(),tPe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,a,r,s,l;for(a in s=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[a],e[a]=s[r];return e},t.prototype.glyphsFor=function(e){var a,r,s,l,h,n,w;for(s={},h=0,n=e.length;h<n;h++)s[l=e[h]]=this.font.glyf.glyphFor(l);for(l in a=[],s)(r=s[l])!=null&&r.compound&&a.push.apply(a,r.glyphIDs);if(a.length>0)for(l in w=this.glyphsFor(a))r=w[l],s[l]=r;return s},t.prototype.encode=function(e,a){var r,s,l,h,n,w,T,E,z,k,U,q,H,$,Q;for(s in r=MJ.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(e),U={0:0},Q=r.charMap)U[(w=Q[s]).old]=w.new;for(q in k=r.maxGlyphID,h)q in U||(U[q]=k++);return E=function(ne){var de,ge;for(de in ge={},ne)ge[ne[de]]=de;return ge}(U),z=Object.keys(E).sort(function(ne,de){return ne-de}),H=function(){var ne,de,ge;for(ge=[],ne=0,de=z.length;ne<de;ne++)n=z[ne],ge.push(E[n]);return ge}(),l=this.font.glyf.encode(h,H,U),T=this.font.loca.encode(l.offsets,H),$={cmap:this.font.cmap.raw(),glyf:l.table,loca:T,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&($["OS/2"]=this.font.os2.raw()),this.font.directory.encode($)},t}();Bn.API.PDFObject=function(){var t;function e(){}return t=function(a,r){return(Array(r+1).join("0")+a).slice(-r)},e.convert=function(a){var r,s,l,h;if(Array.isArray(a))return"["+function(){var n,w,T;for(T=[],n=0,w=a.length;n<w;n++)r=a[n],T.push(e.convert(r));return T}().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a!=null&&a.isString)return"("+a+")";if(a instanceof Date)return"(D:"+t(a.getUTCFullYear(),4)+t(a.getUTCMonth(),2)+t(a.getUTCDate(),2)+t(a.getUTCHours(),2)+t(a.getUTCMinutes(),2)+t(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(s in l=["<<"],a)h=a[s],l.push("/"+s+" "+e.convert(h));return l.push(">>"),l.join(`
`)}return""+a},e}();const aPe=()=>{const[t,e]=rt.useState("available"),[a,r]=rt.useState("bike"),[s,l]=rt.useState(null),[h,n]=rt.useState([]),[w,T]=rt.useState(null),[E,z]=rt.useState(""),[k,U]=rt.useState(!1),[q,H]=rt.useState(!1),[$,Q]=rt.useState(null),[ne,de]=rt.useState(!1),[ge,fe]=rt.useState(""),[_e,me]=rt.useState(""),[Ae,Te]=rt.useState("all"),[Oe,ie]=rt.useState(1),[we]=rt.useState(10);rt.useEffect(()=>{Me()},[]);const Me=async()=>{const pt=(await Yi(Wn(kr,"bikes"))).docs.map(ve=>({id:ve.id,...ve.data()}));n(pt)},Ve=dt=>{l(dt.target.files[0])},Ie=()=>{const dt=h.filter(Kt=>Kt.bikeCategory==="Regular Bicycle").length+1,pt=h.filter(Kt=>Kt.bikeCategory==="Electric Bicycle").length+1;return`${_e==="Regular Bicycle"?"BK":"EBK"}-${String(_e==="Regular Bicycle"?dt:pt).padStart(3,"0")}`},Ue=async()=>{if(!s)return null;const dt=new FormData;dt.append("bikePhoto",s);try{return(await $o.post("http://192.168.6.200:4000/api/upload-bike-photo",dt,{headers:{"Content-Type":"multipart/form-data"}})).data.bikePhotoUrl}catch(pt){return console.error("Error uploading image:",pt),null}},Be=async dt=>{dt.preventDefault();const pt=await Ue();if(!pt){alert("Image upload failed. Try again.");return}const ea={bikeId:Ie(),bikeName:ge,bikeCategory:_e,bikeType:a,imageUrl:pt,bikeStatus:"Available",isAvailable:!0,createdAt:new Date};try{await oR(Wn(kr,"bikes"),ea),alert("Bike added successfully!"),n([...h,ea]),U(!1),Le()}catch(Kt){console.error("Error adding bike:",Kt)}},ke=async dt=>{dt.preventDefault();const pt=await Ue(),ve={bikeName:ge,bikeCategory:_e,bikeType:a,bikeStatus:t,imageUrl:pt||w.imageUrl};try{await Hd(io(kr,"bikes",w.id),ve),alert("Bike updated successfully!"),T(null),H(!1),Me(),Le()}catch(ea){console.error("Error updating bike:",ea)}},Je=(dt,pt)=>{pt.stopPropagation(),T(dt),fe(dt.bikeName),me(dt.bikeCategory),r(dt.bikeType),e(dt.bikeStatus),H(!0)},Le=()=>{fe(""),me(""),r(""),l(null),e("Available"),T(null)},qe=async()=>{const dt=new Bn,pt=40,ve=5,ea=3;let Kt=10,Ea=10;for(let Bt=0;Bt<h.length;Bt++){const la=h[Bt];try{const St=await a2e.toDataURL(la.id,{type:"image/jpeg"});St?(dt.text(`Bike ID: ${la.bikeId}`,Kt,Ea+pt+5),dt.addImage(St,"JPEG",Kt,Ea,pt,pt),Kt+=pt+ve,(Bt+1)%ea===0&&(Kt=10,Ea+=pt+20),Ea+pt+20>dt.internal.pageSize.height&&(dt.addPage(),Kt=10,Ea=10)):console.error("QR code generation failed for bike:",la.bikeId)}catch(St){console.error("Error generating QR code: ",St)}}dt.save("bike_qr_codes.pdf")},ye=dt=>{z(dt.target.value.toUpperCase()),ie(1)},ze=dt=>{Te(dt.target.value),ie(1)},We=Oe*we,lt=We-we,vt=Math.ceil(h.length/we),Ot=()=>{const dt=h.filter(ve=>ve.bikeCategory==="Regular Bicycle").length,pt=h.filter(ve=>ve.bikeCategory==="Electric Bicycle").length;return{regularBikes:dt,electricBikes:pt}};return X.jsxs(w0,{children:[X.jsx(Ig,{title:"Bike Management"}),X.jsxs("div",{className:"bike-management-container",children:[X.jsx("div",{className:"bike-management-header",children:X.jsx("h2",{children:"Bike Management"})}),X.jsxs("div",{className:"search-container",children:[X.jsx("input",{type:"text",placeholder:"🔍 Search by Bike ID (e.g., BK-001)...",className:"search-box",value:E,onChange:ye}),X.jsxs("button",{className:"add-bike-btn",onClick:()=>U(!0),children:[X.jsx(o3,{})," Add Bike"]}),X.jsx("button",{className:"generate-pdf-btn",onClick:qe,children:"Generate QR (PDF)"}),X.jsxs("div",{className:"sort-container",children:[X.jsx("label",{className:"sort-label",children:"Sort By:"}),X.jsxs("select",{value:Ae,onChange:ze,className:"sort-dropdown",children:[X.jsx("option",{value:"all",children:"All Bikes"}),X.jsx("option",{value:"Regular Bicycle",children:"Regular Bikes"}),X.jsx("option",{value:"Electric Bicycle",children:"Electric Bikes"}),X.jsxs("optgroup",{label:"Status",children:[X.jsx("option",{value:"Available",children:"Available"}),X.jsx("option",{value:"In Use",children:"In Use"}),X.jsx("option",{value:"To Repair",children:"To Repair"}),X.jsx("option",{value:"To Replace",children:"To Replace"}),X.jsx("option",{value:"Retired",children:"Retired"})]})]})]})]}),k&&X.jsx("div",{className:"modal-overlay",children:X.jsxs("div",{className:"modal-content",children:[X.jsx("h2",{children:"Adding New Bike"}),X.jsxs("form",{className:"bike-form",onSubmit:Be,children:[X.jsx("div",{className:"upload-box",children:X.jsxs("label",{className:"upload-label",children:[X.jsx(TU,{})," Upload Bike Image",X.jsx("input",{type:"file",accept:"image/*",onChange:Ve,required:!0})]})}),X.jsx("label",{children:"Bike Name:"}),X.jsx("input",{type:"text",value:ge,onChange:dt=>fe(dt.target.value),required:!0}),X.jsx("label",{children:"Category of Bike:"}),X.jsxs("select",{value:_e,onChange:dt=>me(dt.target.value),required:!0,children:[X.jsx("option",{value:"",children:"Select Category"}),X.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),X.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),X.jsx("label",{children:"Bike Type:"}),X.jsxs("select",{value:a,onChange:dt=>r(dt.target.value),required:!0,children:[X.jsx("option",{value:"",children:"Select Bike Type"}),X.jsx("option",{value:"Road Bike",children:"Road Bike"}),X.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),X.jsx("option",{value:"City Bike",children:"City Bike"}),X.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),X.jsx("option",{value:"BMX",children:"BMX"}),X.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),X.jsxs("div",{className:"modal-buttons",children:[X.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),X.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>U(!1),children:"Cancel"})]})]})]})}),X.jsxs("div",{className:"bike-stats-overlay",children:[X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Regular Bikes"}),X.jsx("p",{children:Ot().regularBikes})]}),X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Electric Bikes"}),X.jsx("p",{children:Ot().electricBikes})]})]}),X.jsx("div",{className:"bike-list",children:X.jsxs("table",{children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Bike Name"}),X.jsx("th",{children:"Bike ID"}),X.jsx("th",{children:"Category"}),X.jsx("th",{children:"Type"}),X.jsx("th",{children:"Image"}),X.jsx("th",{children:"Status"}),X.jsx("th",{children:"Action"})]})}),X.jsx("tbody",{children:h.filter(dt=>dt.bikeId.toUpperCase().includes(E)&&(Ae==="all"||Ae==="Regular Bicycle"&&dt.bikeCategory==="Regular Bicycle"||Ae==="Electric Bicycle"&&dt.bikeCategory==="Electric Bicycle"||dt.bikeStatus===Ae)).slice(lt,We).map(dt=>X.jsxs("tr",{onClick:()=>{Q(dt),de(!0)},className:"clickable-row",children:[X.jsx("td",{children:dt.bikeName||"No Name"}),X.jsx("td",{children:X.jsx("strong",{children:dt.bikeId})}),X.jsx("td",{children:dt.bikeCategory}),X.jsx("td",{children:dt.bikeType}),X.jsx("td",{children:X.jsx("img",{src:dt.imageUrl,alt:dt.bikeName,className:"table-bike-image",onClick:pt=>{pt.stopPropagation(),Q(dt),de(!0)}})}),X.jsx("td",{children:X.jsx("div",{className:`status-container status-${dt.bikeStatus.replace(/\s+/g,"-")}`,children:dt.bikeStatus})}),X.jsx("td",{children:X.jsx("button",{className:"edit-btn",onClick:pt=>Je(dt,pt),children:X.jsx(L_,{})})})]},dt.id))})]})}),ne&&$&&X.jsx("div",{className:"modal-overlay",children:X.jsxs("div",{className:"modal-content",children:[X.jsx("h2",{children:"Bike Details"}),X.jsx("div",{className:"bike-image-container",children:X.jsx("img",{src:$.imageUrl,alt:"Bike",className:"bike-preview"})}),X.jsxs("p",{children:[X.jsx("strong",{children:"Bike Name:"})," ",$.bikeName]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Bike ID:"})," ",$.bikeId]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Category:"})," ",$.bikeCategory]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Bike Type:"})," ",$.bikeType]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Status:"})," ",$.bikeStatus]}),X.jsx("div",{className:"modal-buttons",children:X.jsx("button",{className:"cancel-btn",onClick:()=>de(!1),children:"Close"})})]})}),q&&w&&X.jsx("div",{className:"modal-overlay",children:X.jsxs("div",{className:"modal-content",children:[X.jsx("h2",{children:"Edit Bike"}),X.jsxs("form",{className:"bike-form",onSubmit:ke,children:[X.jsxs("div",{className:"upload-box",children:[X.jsxs("label",{className:"upload-label",children:[X.jsx(TU,{})," Upload New Image",X.jsx("input",{type:"file",accept:"image/*",onChange:Ve})]}),w.imageUrl&&X.jsx("img",{src:w.imageUrl,alt:"Current Bike",className:"bike-preview"})]}),X.jsx("label",{children:"Bike Name:"}),X.jsx("input",{type:"text",value:ge,onChange:dt=>fe(dt.target.value),required:!0}),X.jsx("label",{children:"Category of Bike:"}),X.jsxs("select",{value:_e,onChange:dt=>me(dt.target.value),required:!0,children:[X.jsx("option",{value:"",children:"Select Category"}),X.jsx("option",{value:"Regular Bicycle",children:"Regular Bicycle"}),X.jsx("option",{value:"Electric Bicycle",children:"Electric Bicycle"})]}),X.jsx("label",{children:"Bike Type:"}),X.jsxs("select",{value:a,onChange:dt=>r(dt.target.value),required:!0,children:[X.jsx("option",{value:"",children:"Select Bike Type"}),X.jsx("option",{value:"Road Bike",children:"Road Bike"}),X.jsx("option",{value:"Mountain Bike",children:"Mountain Bike"}),X.jsx("option",{value:"City Bike",children:"City Bike"}),X.jsx("option",{value:"Fat Bike",children:"Fat Bike"}),X.jsx("option",{value:"BMX",children:"BMX"}),X.jsx("option",{value:"Electric Bike",children:"Electric Bike"})]}),X.jsx("label",{children:"Status:"}),X.jsxs("select",{value:t,onChange:dt=>e(dt.target.value),required:!0,children:[X.jsx("option",{value:"Available",children:"Available"}),X.jsx("option",{value:"To Repair",children:"To Repair"}),X.jsx("option",{value:"To Replace",children:"To Replace"}),X.jsx("option",{value:"Retired",children:"Retired"})]}),X.jsxs("div",{className:"modal-buttons",children:[X.jsx("button",{type:"submit",className:"save-btn",children:"Update"}),X.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>{H(!1),Le()},children:"Cancel"})]})]})]})})]}),X.jsxs("div",{className:"pagination-controls",children:[X.jsx("button",{className:"pagination-button",onClick:()=>ie(Oe-1),disabled:Oe===1,children:"Previous"}),X.jsxs("span",{className:"pagination-info",children:["Page ",Oe," of ",vt]}),X.jsx("button",{className:"pagination-button",onClick:()=>ie(Oe+1),disabled:Oe===vt,children:"Next"})]})]})},rPe="/ecpcaps/assets/bike_icon-CFICwI6a.png";ef.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const nPe=({onEditStation:t})=>{const[e,a]=rt.useState(null),[r,s]=rt.useState([]),[l,h]=rt.useState(null),[n,w]=rt.useState(!1),[T,E]=rt.useState([]),[z,k]=rt.useState(!0),[U,q]=rt.useState([]),[H,$]=rt.useState(""),[Q,ne]=rt.useState("all"),[de,ge]=rt.useState([]);rt.useEffect(()=>{if(!e){const me=new ef.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12});me.on("load",()=>{a(me)})}},[e]),rt.useEffect(()=>e?(r.forEach(Ae=>Ae.remove()),(async()=>{try{const Ae=await Yi(Wn(kr,"stations")),Te=await Yi(Wn(kr,"admins")),Oe={};Te.docs.forEach(we=>{const Me=we.data();Oe[we.id]={name:Me.name,profilePhoto:Me.profilePhoto}});const ie=[];if(Ae.docs.forEach(we=>{const Me=we.data(),Ve=Me.tanodAssigned||[],Ie=Array.isArray(Ve)?Ve:[Ve],Ue={id:we.id,...Me,tanodAssigned:Ie,tanodAssignedName:Ie.map(Be=>{var ke;return((ke=Oe[Be])==null?void 0:ke.name)||"Unknown"}).join(", "),tanodAssignedAvatar:Ie.map(Be=>{var ke;return(ke=Oe[Be])==null?void 0:ke.profilePhoto}).filter(Be=>Be)};if(Ue.coordinates&&Array.isArray(Ue.coordinates)&&Ue.coordinates.length===2){const Be=document.createElement("div");Be.className="custom-marker";const ke=document.createElement("div");ke.className="station-name",ke.textContent=Ue.stationName,Be.appendChild(ke);const Je=document.createElement("img");Je.src=rPe,Je.className="marker-icon",Be.appendChild(Je),Be.addEventListener("click",()=>{h(Ue),w(!0)});const Le=new ef.Marker(Be).setLngLat([Ue.coordinates[1],Ue.coordinates[0]]).addTo(e);ie.push(Le)}}),s(ie),ie.length>0){const we=new ef.LngLatBounds;Ae.docs.forEach(Me=>{const Ve=Me.data();Ve.coordinates&&Array.isArray(Ve.coordinates)&&Ve.coordinates.length===2&&we.extend([Ve.coordinates[1],Ve.coordinates[0]])}),e.fitBounds(we,{padding:50})}}catch(Ae){console.error("Error fetching stations:",Ae)}})(),()=>{r.forEach(Ae=>Ae.remove())}):void 0,[e]);const fe=async()=>{try{const Ae=(await Yi(Wn(kr,"admins"))).docs.map(Te=>({id:Te.id,...Te.data()}));ge(Ae)}catch(me){console.error("Error fetching admins:",me)}};rt.useEffect(()=>{fe()},[]);const _e=({station:me,onClose:Ae})=>{const[Te,Oe]=rt.useState(!1),[ie,we]=rt.useState(!1),[Me,Ve]=rt.useState(!1),[Ie,Ue]=rt.useState([]),[Be,ke]=rt.useState([]),[Je,Le]=rt.useState([]),[qe,ye]=rt.useState([]),[ze,We]=rt.useState(0),[lt,vt]=rt.useState(!1),[Ot,dt]=rt.useState(!1),[pt,ve]=rt.useState(!1),[ea,Kt]=rt.useState(null),[Ea,Bt]=rt.useState(!1),[la,St]=rt.useState([]),[vr,Va]=rt.useState(!1),[za,nr]=rt.useState(!1),[cr,ur]=rt.useState(null),[Pr,ka]=rt.useState([]);rt.useEffect(()=>{jr(),pn(),Dn()},[me.id]);const jr=async()=>{try{const Qa=(await Yi(Wn(kr,"bikes"))).docs.map(yr=>({id:yr.id,...yr.data()})).filter(yr=>yr.stationAssigned===me.id);Le(Qa)}catch(ca){console.error("Error fetching station bikes:",ca)}},pn=async()=>{try{const Qa=(await Yi(Wn(kr,"bikes"))).docs.map(yr=>({id:yr.id,...yr.data()})).filter(yr=>!yr.stationAssigned);ye(Qa)}catch(ca){console.error("Error fetching unassigned bikes:",ca)}},Dn=async()=>{try{const Qa=(await Yi(Wn(kr,"admins"))).docs.map(yr=>({id:yr.id,...yr.data()})).filter(yr=>{var jn;return!((jn=me.tanodAssigned)!=null&&jn.includes(yr.id))&&!yr.stationAssignedTo});St(Qa)}catch(ca){console.error("Error fetching unassigned admins:",ca)}},Rn=async()=>{try{Oe(!0);const ca=Ie.map(Qa=>Hd(io(kr,"bikes",Qa),{stationAssigned:null}));await Promise.all(ca),we(!1),Ue([]),jr()}catch(ca){console.error("Error removing bikes:",ca),alert("Failed to remove bikes")}finally{Oe(!1)}},va=async()=>{try{Oe(!0);const ca=Be.map(Qa=>Hd(io(kr,"bikes",Qa),{stationAssigned:me.id}));await Promise.all(ca),Ve(!1),ke([]),jr()}catch(ca){console.error("Error adding bikes:",ca),alert("Failed to add bikes")}finally{Oe(!1)}},Wa=async ca=>{try{Oe(!0);const Qa=me.tanodAssigned||[];await Hd(io(kr,"stations",me.id),{tanodAssigned:[...Qa,...ca]});const yr=ca.map(jn=>Hd(io(kr,"admins",jn),{stationAssignedTo:me.id}));await Promise.all(yr),Bt(!1),window.location.reload()}catch(Qa){console.error("Error assigning admins:",Qa),alert("Failed to assign admins")}finally{Oe(!1)}};return X.jsx("div",{className:"map-modal-overlay",children:X.jsxs("div",{className:"map-modal-content large",children:[X.jsxs("div",{className:"modal-header",children:[X.jsxs("div",{className:"station-header",children:[X.jsx("h2",{children:me.stationName}),X.jsx("p",{className:"station-address",children:me.stationAddress})]}),X.jsx("button",{className:"close-button",onClick:Ae,children:"×"})]}),X.jsxs("div",{className:"modal-body",children:[X.jsxs("div",{className:"admin-section",children:[X.jsxs("div",{className:"count-card",children:[X.jsxs("div",{className:"count-header",children:[X.jsx("h3",{children:"Station Admin"}),X.jsx("button",{className:"edit-btn",onClick:()=>Bt(!Ea),children:X.jsx(L_,{})})]}),Ea&&X.jsx("div",{className:"action-dropdown",children:X.jsx("button",{onClick:()=>{Va(!0),nr(!1),Bt(!1),Dn()},children:"Add Admin"})})]}),X.jsx("div",{className:"admin-content",children:vr?X.jsxs("div",{className:"admin-list",children:[X.jsx("h4",{children:"Select Admin to Assign"}),X.jsx("div",{className:"admin-grid",children:la.map(ca=>X.jsxs("div",{className:"admin-card",children:[X.jsx("input",{type:"checkbox",className:"admin-checkbox",checked:Pr.includes(ca.id),onChange:Qa=>{Qa.target.checked?ka([...Pr,ca.id]):ka(Pr.filter(yr=>yr!==ca.id))}}),X.jsx("img",{src:ca.profilePhoto||"/default-avatar.png",alt:ca.name,className:"admin-photo"}),X.jsx("span",{className:"admin-name",children:ca.name})]},ca.id))}),X.jsxs("div",{className:"action-buttons",children:[X.jsx("button",{className:"save-btn",onClick:()=>{Pr.length>0&&Wa(Pr)},disabled:Pr.length===0||Te,children:Te?"Saving...":"Save Changes"}),X.jsx("button",{className:"discard-btn",onClick:()=>{Va(!1),ka([])},children:"Discard Changes"})]})]}):X.jsx("div",{className:"admin-profile",children:Array.isArray(me.tanodAssigned)&&me.tanodAssigned.length>0?me.tanodAssigned.map(ca=>{const Qa=de.find(yr=>yr.id===ca);return X.jsxs("div",{className:"admin-avatar",children:[X.jsx("img",{src:(Qa==null?void 0:Qa.profilePhoto)||"/default-avatar.png",alt:Qa==null?void 0:Qa.name}),X.jsx("span",{children:(Qa==null?void 0:Qa.name)||"Unknown Admin"})]},ca)}):X.jsx("div",{className:"no-admin",children:X.jsx("span",{children:"No Admin Assigned"})})})})]}),X.jsxs("div",{className:"bikes-section",children:[X.jsxs("div",{className:"bikes-header-section",children:[X.jsx("h3",{children:"Station Bikes"}),X.jsx("div",{className:"counts-section",children:X.jsxs("div",{className:"count-cards",children:[X.jsxs("div",{className:"count-card",children:[X.jsxs("div",{className:"count-header",children:[X.jsxs("span",{children:["Regular Bikes:"," ",Je.filter(ca=>ca.bikeCategory==="Regular Bicycle").length]}),X.jsx("button",{className:"edit-btn",onClick:()=>dt(!Ot),children:X.jsx(L_,{})})]}),Ot&&X.jsxs("div",{className:"action-dropdown",children:[X.jsx("button",{onClick:()=>{Ve(!0),we(!1),Kt("Regular"),dt(!1)},children:"Add Bikes"}),X.jsx("button",{onClick:()=>{we(!0),Ve(!1),Kt("Regular"),dt(!1)},children:"Remove Bikes"})]})]}),X.jsxs("div",{className:"count-card",children:[X.jsxs("div",{className:"count-header",children:[X.jsxs("span",{children:["E-Bikes:"," ",Je.filter(ca=>ca.bikeCategory==="Electric Bicycle").length]}),X.jsx("button",{className:"edit-btn",onClick:()=>ve(!pt),children:X.jsx(L_,{})})]}),pt&&X.jsxs("div",{className:"action-dropdown",children:[X.jsx("button",{onClick:()=>{Ve(!0),we(!1),Kt("Electric"),ve(!1)},children:"Add E-Bikes"}),X.jsx("button",{onClick:()=>{we(!0),Ve(!1),Kt("Electric"),ve(!1)},children:"Remove E-Bikes"})]})]})]})})]}),X.jsx("div",{className:"bikes-content",children:X.jsx("div",{className:"bikes-grid",children:(ie||Me?ie?Je.filter(ca=>ea==="Regular"?ca.bikeCategory==="Regular Bicycle":ca.bikeCategory==="Electric Bicycle"):qe.filter(ca=>ea==="Regular"?ca.bikeCategory==="Regular Bicycle":ca.bikeCategory==="Electric Bicycle"):Je).slice(ze*6,(ze+1)*6).map(ca=>X.jsxs("div",{className:"bike-card",children:[(ie||Me)&&X.jsx("input",{type:"checkbox",className:"bike-checkbox",checked:ie?Ie.includes(ca.id):Be.includes(ca.id),onChange:Qa=>{const yr=ie?Ue:ke,jn=ie?Ie:Be;Qa.target.checked?yr([...jn,ca.id]):yr(jn.filter(Mn=>Mn!==ca.id))}}),X.jsx("img",{src:ca.imageUrl||"/default-bike.png",alt:ca.bikeName}),X.jsxs("div",{className:"bike-info",children:[X.jsx("span",{className:"bike-id",children:ca.bikeId}),X.jsx("span",{className:"bike-name",children:ca.bikeName})]})]},ca.id))})}),X.jsxs("div",{className:"bikes-footer",children:[X.jsxs("div",{className:"pagination",children:[X.jsx("button",{onClick:()=>We(ca=>ca-1),disabled:ze===0,className:"page-btn",children:X.jsx(que,{})}),X.jsxs("span",{children:["Page ",ze+1]}),X.jsx("button",{onClick:()=>We(ca=>ca+1),disabled:(ze+1)*6>=(ie?Je.length:Me?qe.length:Je.length),className:"page-btn",children:X.jsx(Hue,{})})]}),(ie||Me)&&X.jsxs("div",{className:"action-buttons",children:[X.jsx("button",{className:"save-btn",onClick:ie?Rn:va,disabled:Te||(ie?Ie.length===0:Be.length===0),children:Te?"Saving...":"Save Changes"}),X.jsx("button",{className:"discard-btn",onClick:()=>{we(!1),Ve(!1),Ue([]),ke([]),Kt(null)},children:"Discard Changes"})]})]})]})]})]})})};return X.jsxs("div",{className:"map-container",children:[X.jsx("div",{id:"map",className:"map-element"}),n&&X.jsx(_e,{station:l,onClose:()=>w(!1)})]})};ef.accessToken="pk.eyJ1IjoiY29jb2xlbW9uMTIiLCJhIjoiY204YTBoMnZpMHplbzJzcTR3dDFmOXc4NiJ9.NqqEHSBe8cn9Gy9knbUqew";const iPe=({onSelectLocation:t,isSelectingLocation:e})=>{const a=rt.useRef(null),r=rt.useRef(null),s=rt.useRef(null);return rt.useEffect(()=>{if(!r.current)return r.current=new ef.Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",center:[120.9882053036898,14.693467677226026],zoom:12}),()=>{r.current&&(r.current.remove(),r.current=null)}},[]),rt.useEffect(()=>{if(!r.current)return;const l=h=>{e&&(s.current&&s.current.remove(),s.current=new ef.Marker({draggable:!0,color:"#FF0000",scale:.8}).setLngLat([h.lngLat.lng,h.lngLat.lat]).addTo(r.current),s.current.on("dragend",()=>{const n=s.current.getLngLat();t([n.lat,n.lng])}),t([h.lngLat.lat,h.lngLat.lng]))};return e?(r.current.getCanvas().style.cursor="crosshair",r.current.on("click",l)):(r.current.getCanvas().style.cursor="",r.current.off("click",l)),()=>{r.current&&(r.current.off("click",l),r.current.getCanvas().style.cursor=""),s.current&&(s.current.remove(),s.current=null)}},[e,t]),X.jsx("div",{ref:a,className:"add-station-map"})},sPe=()=>{const[t,e]=rt.useState([]),[a,r]=rt.useState([]),[s,l]=rt.useState(!1),[h,n]=rt.useState(!1),[w,T]=rt.useState(null),[E,z]=rt.useState(!1),[k,U]=rt.useState(null),[q,H]=rt.useState(""),[$,Q]=rt.useState(""),[ne,de]=rt.useState(""),[ge,fe]=rt.useState(""),[_e,me]=rt.useState([]),[Ae,Te]=rt.useState([]),[Oe,ie]=rt.useState([]),[we,Me]=rt.useState([]),[Ve,Ie]=rt.useState(!1),[Ue,Be]=rt.useState(!1),[ke,Je]=rt.useState(!1),[Le,qe]=rt.useState(!1),[ye,ze]=rt.useState([]),[We,lt]=rt.useState([]),[vt,Ot]=rt.useState(!1),[dt,pt]=rt.useState(!1),[ve,ea]=rt.useState("");rt.useEffect(()=>{Kt(),Ea(),Bt(),la()},[]);const Kt=async()=>{try{const Wa=(await Yi(Wn(kr,"admins"))).docs.map(ca=>({id:ca.id,...ca.data()}));lt(Wa)}catch(va){console.error("Error fetching all admins:",va)}},Ea=async()=>{try{const ca=(await Yi(Wn(kr,"admins"))).docs.map(Qa=>({id:Qa.id,...Qa.data()})).filter(Qa=>!Qa.stationAssignedTo);ze(ca)}catch(va){console.error("Error fetching unassigned admins:",va)}},Bt=async()=>{try{const va=await Yi(Wn(kr,"admins")),Wa={};va.docs.forEach(mn=>{const en=mn.data();Wa[mn.id]=en.name});const Qa=(await Yi(Wn(kr,"stations"))).docs.map(mn=>{const en=mn.data(),Er=en.tanodAssigned||[],As=Array.isArray(Er)?Er:[Er];return{id:mn.id,...en,tanodAssignedID:As,tanodAssignedName:As.map(ki=>Wa[ki]||"Unknown").join(", ")||"Not Assigned"}}),jn=(await Yi(Wn(kr,"bikes"))).docs.map(mn=>({id:mn.id,...mn.data()})),Mn=Qa.map(mn=>{const en=jn.filter(As=>As.stationAssigned===mn.id&&As.bikeCategory==="Regular Bicycle"&&As.bikeStatus==="Available"&&As.isAvailable===!0).length,Er=jn.filter(As=>As.stationAssigned===mn.id&&As.bikeCategory==="Electric Bicycle"&&As.bikeStatus==="Available"&&As.isAvailable===!0).length;return{...mn,totalRegularBikes:en,totalElectricBikes:Er}});e(Mn)}catch(va){console.error("Error fetching stations:",va)}},la=async()=>{const Wa=(await Yi(Wn(kr,"bikes"))).docs.map(Qa=>({id:Qa.id,...Qa.data()})),ca=Wa.filter(Qa=>!Qa.stationAssigned&&Qa.bikeStatus==="Available"&&Qa.isAvailable===!0);r(Wa),ie(ca.filter(Qa=>Qa.bikeCategory==="Regular Bicycle")),Me(ca.filter(Qa=>Qa.bikeCategory==="Electric Bicycle"))},St=async va=>{if(window.confirm("Are you sure you want to delete this station?"))try{const Wa=io(kr,"stations",va),Qa=(await ny(Wa)).data(),yr=(Qa==null?void 0:Qa.tanodAssigned)||[],Mn=(Array.isArray(yr)?yr:[yr]).map(mn=>Hd(io(kr,"admins",mn),{stationAssignedTo:null}));await Promise.all(Mn),await s3(Wa)}catch(Wa){console.error("Error deleting station:",Wa)}},vr=async va=>{T(va),H(va.stationName||""),Q(va.stationAddress||""),fe(va.coordinates||""),de(va.tanodAssignedID||""),n(!0);const ca=(await Yi(Wn(kr,"bikes"))).docs.map(Qa=>({id:Qa.id,...Qa.data()}));me(ca.filter(Qa=>Qa.bikeCategory==="Regular Bicycle"&&Qa.stationAssigned===va.id).map(Qa=>Qa.id)),Te(ca.filter(Qa=>Qa.bikeCategory==="Electric Bicycle"&&Qa.stationAssigned===va.id).map(Qa=>Qa.id)),la()},Va=()=>{T(null),H(""),Q(""),fe(""),de(""),me([]),Te([]),Ot(!1),l(!0)},za=async(va,Wa)=>{try{const ca=await $o.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${va}&lon=${Wa}`);Q(ca.data.display_name||"Unknown Address")}catch(ca){console.error("Error fetching address:",ca)}},nr=va=>{const Wa=va.target.value;fe(Wa);const[ca,Qa]=Wa.split(",");ca&&Qa&&za(ca.trim(),Qa.trim())},cr=va=>{fe(va.join(",")),za(va[0],va[1])},ur=async va=>{if(va.preventDefault(),!ne){alert("Please select an admin (or allow none).");return}try{const Wa=typeof ge=="string"?ge.split(",").map(yr=>parseFloat(yr.trim())):[],ca=Array.isArray(ne)?ne:[ne];let Qa;if(w)Qa=io(kr,"stations",w.id),await Hd(Qa,{stationName:q,stationAddress:$,coordinates:Wa,tanodAssigned:ca}),ea("Station updated successfully!"),n(!1);else{const yr={stationName:q,stationAddress:$,coordinates:Wa,tanodAssigned:ca};Qa=await oR(Wn(kr,"stations"),yr),ea("Station added successfully!"),l(!1)}if(Qa&&Qa.id){const yr=ca.map(jn=>Hd(io(kr,"admins",jn),{stationAssignedTo:Qa.id}));await Promise.all(yr),await Pr(Qa.id),Ea(),Bt(),pt(!0),setTimeout(()=>{pt(!1)},2e3)}}catch(Wa){console.error("Error saving station:",Wa)}},Pr=async va=>{try{for(const Wa of _e){const ca=io(kr,"bikes",Wa);await Hd(ca,{stationAssigned:va})}for(const Wa of Ae){const ca=io(kr,"bikes",Wa);await Hd(ca,{stationAssigned:va})}console.log("Bikes assigned successfully:",va)}catch(Wa){console.error("Error assigning bikes:",Wa)}},ka=va=>{va==="Regular Bicycle"?Be(!0):Ie(!0)},jr=va=>{va==="Regular Bicycle"?(Je(!0),qe(!1)):(qe(!0),Je(!1))},pn=async(va,Wa)=>{try{const ca=io(kr,"bikes",va);await Hd(ca,{stationAssigned:null}),Wa==="Regular Bicycle"?me(Qa=>Qa.filter(yr=>yr!==va)):Te(Qa=>Qa.filter(yr=>yr!==va)),la(),console.log(`Bike ${va} unassigned successfully.`)}catch(ca){console.error("Error unassigning bike:",ca)}},Dn=({station:va,onClose:Wa})=>X.jsx("div",{className:"modal-overlay",onClick:Wa,children:X.jsxs("div",{className:"modal-content",onClick:ca=>ca.stopPropagation(),children:[X.jsx("h2",{children:va.stationName}),X.jsxs("p",{children:[X.jsx("strong",{children:"Address:"})," ",va.stationAddress]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Coordinates:"})," ",va.coordinates]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Tanod Assigned:"})," ",va.tanodAssignedName||"Not Assigned"]}),X.jsxs("p",{children:[X.jsx("strong",{children:"Total Bikes:"})," ",va.totalRegularBikes||0," ","(Regular), ",va.totalElectricBikes||0," (Electric)"]}),X.jsx("button",{className:"cancel-btn",onClick:Wa,children:"Close"})]})}),Rn=({message:va})=>X.jsx("div",{className:"success-overlay",children:X.jsxs("div",{className:"success-content",children:[X.jsx("div",{className:"success-icon",children:"✓"}),X.jsx("p",{children:va})]})});return X.jsxs(w0,{children:[X.jsx(Ig,{title:"Station Management"}),X.jsxs("div",{className:"station-management-container",children:[X.jsxs("div",{className:"station-management-header",children:[X.jsx("h2",{children:"Station Overview"}),X.jsxs("button",{className:"add-station-btn",onClick:Va,children:[X.jsx(o3,{})," Add New Station"]})]}),X.jsxs("div",{className:"station-map-section",children:[X.jsx("h2",{children:"Station Locations"}),X.jsx("div",{className:"map-container",children:X.jsx(nPe,{onEditStation:va=>{vr(va)}})})]}),X.jsx("div",{className:"station-list",children:X.jsxs("table",{children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Station Name"}),X.jsx("th",{children:"Station Address"}),X.jsx("th",{children:"Total Bikes"}),X.jsx("th",{children:"Total E-Bikes"}),X.jsx("th",{children:"Tanod Assigned"}),X.jsx("th",{children:"Action"})]})}),X.jsx("tbody",{children:t.length>0?t.map(va=>X.jsxs("tr",{children:[X.jsx("td",{children:X.jsx("strong",{children:va.stationName})}),X.jsx("td",{children:X.jsx("span",{onClick:()=>{U(va),z(!0)},style:{cursor:"pointer",color:"#00796b"},children:va.stationAddress})}),X.jsx("td",{children:va.totalRegularBikes||0}),X.jsx("td",{children:va.totalElectricBikes||0}),X.jsx("td",{children:X.jsx("strong",{children:va.tanodAssignedName||"Not Assigned"})}),X.jsx("td",{children:X.jsx("button",{className:"delete-btn",onClick:()=>St(va.id),children:X.jsx(pK,{})})})]},va.id)):X.jsx("tr",{children:X.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"10px"},children:"No stations available"})})})]})}),E&&k&&X.jsx(Dn,{station:k,onClose:()=>z(!1)}),s&&X.jsx("div",{className:"modal-overlay",children:X.jsxs("div",{className:"modal-content large",children:[X.jsxs("div",{className:"modal-header",children:[X.jsx("h2",{children:"Add Station"}),X.jsx("button",{className:"close-modal-btn",onClick:()=>{Ot(!1),l(!1)},children:X.jsx(fK,{})})]}),X.jsxs("form",{onSubmit:ur,children:[X.jsx("label",{children:"Station Name:"}),X.jsx("input",{type:"text",value:q,onChange:va=>H(va.target.value),required:!0}),X.jsx("label",{children:"Location:"}),X.jsxs("div",{className:"location-selection",children:[X.jsxs("div",{className:"coordinates-input",children:[X.jsx("input",{type:"text",value:ge,onChange:nr,placeholder:"Click on map or enter lat,long",readOnly:!0}),X.jsx("button",{type:"button",className:`select-location-btn ${vt?"active":""}`,onClick:()=>Ot(!vt),children:vt?"Done Selecting":"Select on Map"})]}),X.jsx("div",{className:"map-container",children:X.jsx(iPe,{onSelectLocation:cr,isSelectingLocation:vt})})]}),X.jsx("label",{children:"Address:"}),X.jsx("textarea",{value:$,readOnly:!0}),X.jsx("label",{children:"Tanod Assigned:"}),X.jsxs("select",{value:ne,onChange:va=>de(va.target.value),required:!0,children:[X.jsx("option",{value:"",children:"Select Tanod"}),ye.map(va=>X.jsxs("option",{value:va.id,children:[va.name," (",va.email,")"]},va.id))]}),X.jsx("label",{children:"Add Bikes:"}),X.jsxs("div",{className:"bike-selection",children:[X.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:"➕"}),X.jsx("input",{type:"text",value:`${_e.length} Selected`,readOnly:!0})]}),X.jsx("label",{children:"Add E-Bikes:"}),X.jsxs("div",{className:"bike-selection",children:[X.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:"➕"}),X.jsx("input",{type:"text",value:`${Ae.length} Selected`,readOnly:!0})]}),X.jsxs("div",{className:"modal-buttons",children:[X.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),X.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>l(!1),children:"Cancel"})]})]})]})}),Ue&&X.jsx("div",{className:"add-bike-modal-overlay",children:X.jsxs("div",{className:"add-bike-modal",children:[X.jsx("h2",{children:"Select Regular Bikes"}),X.jsx("div",{className:"bike-list-container",children:Oe.length>0?Oe.map(va=>X.jsxs("div",{className:"bike-item",children:[X.jsxs("label",{children:[va.bikeName," (",va.bikeId,")"]}),X.jsx("input",{type:"checkbox",checked:_e.includes(va.id),onChange:()=>{me(Wa=>Wa.includes(va.id)?Wa.filter(ca=>ca!==va.id):[...Wa,va.id])}})]},va.id)):X.jsx("p",{children:"No unassigned bikes available"})}),X.jsx("button",{className:"save-btn",onClick:()=>Be(!1),children:"Done"})]})}),Ve&&X.jsx("div",{className:"add-bike-modal-overlay",children:X.jsxs("div",{className:"add-bike-modal",children:[X.jsx("h2",{children:"Select Electric Bikes"}),X.jsx("div",{className:"bike-list-container",children:we.length>0?we.map(va=>X.jsxs("div",{className:"bike-item",children:[X.jsxs("label",{children:[va.bikeName," (",va.bikeId,")"]}),X.jsx("input",{type:"checkbox",checked:Ae.includes(va.id),onChange:()=>{Te(Wa=>Wa.includes(va.id)?Wa.filter(ca=>ca!==va.id):[...Wa,va.id])}})]},va.id)):X.jsx("p",{children:"No unassigned e-bikes available"})}),X.jsx("button",{className:"save-btn",onClick:()=>Ie(!1),children:"Done"})]})}),ke&&X.jsx("div",{className:"assigned-bike-overlay",children:X.jsxs("div",{className:"assigned-bike-modal",children:[X.jsx("h2",{children:"Remove Assigned Regular Bikes"}),X.jsx("div",{className:"bike-list-container",children:_e.length>0?_e.map(va=>{const Wa=a.find(ca=>ca.id===va);return X.jsxs("div",{className:"bike-item",children:[X.jsxs("label",{children:[Wa==null?void 0:Wa.bikeName," (",Wa==null?void 0:Wa.bikeId,")"]}),X.jsx("button",{className:"remove-btn",onClick:()=>pn(va,"Regular Bicycle"),children:"❌ Remove"})]},va)}):X.jsx("p",{children:"No assigned bikes."})}),X.jsx("button",{className:"save-btn",onClick:()=>Je(!1),children:"Done"})]})}),Le&&X.jsx("div",{className:"assigned-bike-overlay",children:X.jsxs("div",{className:"assigned-bike-modal",children:[X.jsx("h2",{children:"Remove Assigned Electric Bikes"}),X.jsx("div",{className:"bike-list-container",children:Ae.length>0?Ae.map(va=>{const Wa=a.find(ca=>ca.id===va);return X.jsxs("div",{className:"bike-item",children:[X.jsxs("label",{children:[Wa==null?void 0:Wa.bikeName," (",Wa==null?void 0:Wa.bikeId,")"]}),X.jsx("button",{className:"remove-btn",onClick:()=>pn(va,"Electric Bicycle"),children:"❌ Remove"})]},va)}):X.jsx("p",{children:"No assigned e-bikes."})}),X.jsx("button",{className:"save-btn",onClick:()=>qe(!1),children:"Done"})]})}),h&&w&&X.jsx("div",{className:"modal-overlay",children:X.jsxs("div",{className:"modal-content",children:[X.jsx("h2",{children:"Edit Station"}),X.jsxs("form",{onSubmit:ur,children:[X.jsx("label",{children:"Station Name:"}),X.jsx("input",{type:"text",value:q,onChange:va=>H(va.target.value),required:!0}),X.jsx("label",{children:"Coordinates:"}),X.jsx("input",{type:"text",value:ge,onChange:nr,placeholder:"Enter lat,long"}),X.jsx("label",{children:"Address:"}),X.jsx("textarea",{value:$,readOnly:!0}),X.jsx("label",{children:"Tanod Assigned:"}),(()=>{const va=w.tanodAssignedID,Wa=We.find(Qa=>Qa.id===va);let ca=[...ye];return Wa&&!ca.some(Qa=>Qa.id===Wa.id)&&ca.unshift(Wa),X.jsxs("select",{value:ne,onChange:Qa=>de(Qa.target.value),required:!0,children:[X.jsx("option",{value:"",children:"Select Tanod"}),ca.map(Qa=>X.jsxs("option",{value:Qa.id,children:[Qa.name," (",Qa.email,")"]},Qa.id))]})})(),X.jsx("label",{children:"Assigned Bikes:"}),X.jsxs("div",{className:"bike-selection",children:[X.jsx("button",{type:"button",onClick:()=>jr("Regular Bicycle"),children:"➖"}),X.jsx("input",{type:"text",value:`${_e.length} Assigned`,readOnly:!0}),X.jsx("button",{type:"button",onClick:()=>ka("Regular Bicycle"),children:"➕"})]}),X.jsx("label",{children:"Assigned E-Bikes:"}),X.jsxs("div",{className:"bike-selection",children:[X.jsx("button",{type:"button",onClick:()=>jr("Electric Bicycle"),children:"➖"}),X.jsx("input",{type:"text",value:`${Ae.length} Assigned`,readOnly:!0}),X.jsx("button",{type:"button",onClick:()=>ka("Electric Bicycle"),children:"➕"})]}),X.jsxs("div",{className:"modal-buttons",children:[X.jsx("button",{type:"submit",className:"save-btn",children:"Save"}),X.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>n(!1),children:"Cancel"})]})]})]})}),dt&&X.jsx(Rn,{message:ve})]})]})},oPe=()=>{const[t,e]=rt.useState([]),[a,r]=rt.useState(""),[s,l]=rt.useState(""),[h,n]=rt.useState(""),[w,T]=rt.useState(null),[E,z]=rt.useState(""),[k,U]=rt.useState(!1),[q,H]=rt.useState("station_manager"),[$,Q]=rt.useState(!1),[ne,de]=rt.useState(null),[ge,fe]=rt.useState(null),[_e,me]=rt.useState({adminId:null,role:""}),[Ae,Te]=rt.useState([]);rt.useEffect(()=>{Oe()},[]);const Oe=async()=>{try{const Be=await Yi(Wn(kr,"stations")),ke={};Be.docs.forEach(qe=>{ke[qe.id]={stationName:qe.data().stationName,stationAddress:qe.data().stationAddress}}),Te(ke);const Le=(await Yi(Wn(kr,"admins"))).docs.map(qe=>({id:qe.id,...qe.data(),stationDetails:qe.data().stationAssignedTo?ke[qe.data().stationAssignedTo]:null}));e(Le)}catch(Be){console.error("Error fetching admins:",Be)}},ie=async Be=>{const ke=new FormData;ke.append("profilePhoto",Be);try{return(await $o.post("http://192.168.6.200:4000/api/upload-profile-photo",ke,{headers:{"Content-Type":"multipart/form-data"}})).data.profilePhotoUrl}catch(Je){return console.error("Error uploading to AWS:",Je),null}},we=async Be=>{if(Be.preventDefault(),!a||!s||!h){alert("Please fill in all fields.");return}let ke="";if(w&&(ke=await ie(w),!ke)){alert("Failed to upload profile image.");return}try{const Je=await $o.post("http://localhost:4001/api/create-admin",{name:a,email:s,password:h,roles:[],profilePhoto:ke||"",status:"Active",stationAssignedTo:null});Je.data.success?(alert("Admin added successfully!"),r(""),l(""),n(""),T(null),z(""),U(!1)):alert("Error: "+Je.data.message)}catch(Je){console.error("Error creating admin:",Je),alert("There was an error creating the admin. Please try again.")}},Me=async Be=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await s3(io(kr,"admins",Be))}catch(ke){console.error("Error deleting admin:",ke)}},Ve=Be=>{de(Be),Q(!0),fe(null),H(Be.roles[0])},Ie=async Be=>{if(Be.preventDefault(),!ge){alert("Please select a new profile image.");return}const ke=await ie(ge);if(!ke){alert("Failed to upload new profile image.");return}try{const Je=io(kr,"admins",ne.id);await Hd(Je,{profilePhoto:ke}),alert("Profile photo updated successfully!"),Q(!1),de(null),fe(null)}catch(Je){console.error("Error updating admin profile photo:",Je),alert("Failed to update admin profile photo. Please try again.")}},Ue=()=>{Q(!1),de(null),fe(null)};return X.jsxs(w0,{children:[X.jsx(Ig,{title:"Admin Management"}),X.jsxs("div",{className:"admin-management-container",children:[X.jsxs("div",{className:"admin-management-header",children:[X.jsx("h2",{children:"Admin Creation"}),X.jsxs("button",{className:"btn-create-admin",onClick:()=>U(!0),children:[X.jsx(o3,{})," Create New Admin Account"]})]}),X.jsx("div",{className:"admin-gallery",children:t.length>0?t.map(Be=>{var ke,Je;return X.jsxs("div",{className:"admin-card",children:[X.jsxs("div",{className:"admin-photo",children:[X.jsxs("div",{className:"status-dot-container",children:[X.jsx("span",{className:`status-dot ${Be.status==="Active"?"active":"inactive"}`}),X.jsxs("div",{className:"status-tooltip",children:["Status: ",Be.status]})]}),Be.profilePhoto?X.jsx("img",{src:Be.profilePhoto,alt:"Admin"}):X.jsx("div",{className:"placeholder",children:"No Image"})]}),X.jsxs("div",{className:"admin-info",children:[X.jsx("h4",{children:Be.name}),X.jsx("p",{children:Be.email}),X.jsxs("p",{className:"role-text",children:["Role: ",((ke=Be.roles)==null?void 0:ke[0])||"Unassigned"]}),X.jsx("p",{className:"station-text",children:Be.stationAssignedTo?X.jsxs("span",{className:"station-assigned",children:["Station:",((Je=Be.stationDetails)==null?void 0:Je.stationName)||"Loading..."]}):X.jsx("span",{className:"station-unassigned",children:"📍 No Station Assigned"})})]}),X.jsxs("div",{className:"admin-actions",children:[X.jsx("button",{className:"edit-btn",onClick:()=>Ve(Be),children:X.jsx(L_,{})}),X.jsx("button",{className:"delete-btn",onClick:()=>Me(Be.id),children:X.jsx(pK,{})})]})]},Be.id)}):X.jsx("p",{children:"No admins found"})}),k&&X.jsx("div",{className:"modal-overlay",children:X.jsxs("div",{className:"modal-content",children:[X.jsx("h3",{children:"Create Admin Account"}),X.jsxs("form",{onSubmit:we,children:[X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Name:"}),X.jsx("input",{type:"text",value:a,onChange:Be=>r(Be.target.value),required:!0})]}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Role:"}),X.jsxs("select",{value:q,onChange:Be=>H(Be.target.value),children:[X.jsx("option",{value:"Station Manager",children:"Station Manager"}),X.jsx("option",{value:"User Support",children:"User Support"})]})]}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Email:"}),X.jsx("input",{type:"email",value:s,onChange:Be=>l(Be.target.value),required:!0})]}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Password:"}),X.jsx("input",{type:"password",value:h,onChange:Be=>n(Be.target.value),required:!0})]}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Profile Picture:"}),X.jsx("input",{type:"file",accept:"image/*",onChange:Be=>T(Be.target.files[0])})]}),w&&X.jsx("div",{className:"preview-image",children:X.jsx("img",{src:URL.createObjectURL(w),alt:"Preview"})}),X.jsx("button",{type:"submit",className:"btn-create",children:"Create"}),X.jsx("button",{type:"button",className:"btn-cancel",onClick:()=>U(!1),children:"Cancel"})]})]})}),$&&ne&&X.jsx("div",{className:"modal-overlay",children:X.jsxs("div",{className:"modal-content",children:[X.jsxs("h3",{children:["Edit Profile Photo for ",ne.name]}),X.jsxs("form",{onSubmit:Ie,children:[X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"New Profile Picture:"}),X.jsx("input",{type:"file",accept:"image/*",onChange:Be=>fe(Be.target.files[0])})]}),ge&&X.jsx("div",{className:"preview-image",children:X.jsx("img",{src:URL.createObjectURL(ge),alt:"Preview"})}),X.jsx("button",{type:"submit",className:"btn-update",children:"Update Photo"}),X.jsx("button",{type:"button",className:"btn-cancel",onClick:Ue,children:"Cancel"})]})]})})]})]})},h5={RegularBicycle:"Regular Bicycle",ElectricBicycle:"Electric Bicycle"},lPe=()=>{const[t,e]=rt.useState([]),[a,r]=rt.useState(!0),[s,l]=rt.useState(null),[h,n]=rt.useState(""),[w,T]=rt.useState([]),[E,z]=rt.useState([]),[k,U]=rt.useState(!1),[q,H]=rt.useState("daily"),[$,Q]=rt.useState({daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0},all:{revenue:0,rides:0}}),[ne,de]=rt.useState({key:"revenue",direction:"desc"}),ge=ie=>{de({key:ie,direction:ne.key===ie&&ne.direction==="asc"?"desc":"asc"})};rt.useEffect(()=>{fe(),_e(),me()},[]),rt.useEffect(()=>{me()},[q]);const fe=async()=>{try{const we=(await Yi(Wn(kr,"rentalRates"))).docs.map(Me=>({id:Me.id,...Me.data()}));e(we)}catch(ie){console.error("Error fetching rental rates:",ie)}finally{r(!1)}},_e=async()=>{try{const ie=Wn(kr,"rateHistory"),we=T_(ie,rK("timestamp","desc")),Ve=(await Yi(we)).docs.map(Ie=>({id:Ie.id,...Ie.data()}));T(Ve)}catch(ie){console.error("Error fetching rate history:",ie)}},me=async()=>{try{const ie=Wn(kr,"stations"),we=await Yi(ie),Me=new Map;we.forEach(Le=>{const qe=Le.data();Me.set(Le.id,{id:Le.id,stationName:qe.stationName,revenue:0,rides:0})});const Ve=Wn(kr,"ride_history"),Ie=await Yi(Ve),Ue=Ie.docs.length,Be=ls(),ke={daily:{revenue:0,rides:0},weekly:{revenue:0,rides:0},monthly:{revenue:0,rides:0},total:{revenue:0,rides:0}};Ie.docs.forEach(Le=>{const qe=Le.data(),ye=ls(qe.rideEndedAt.toDate()),ze=Number(qe.amountPaid||0);if((q==="all"?!0:q==="daily"?ye.isSame(Be,"day"):q==="weekly"?ye.isAfter(Be.subtract(1,"week")):q==="monthly"?ye.isAfter(Be.subtract(1,"month")):!0)&&qe.startStation){const lt=Me.get(qe.startStation);lt&&(lt.rides+=1,lt.revenue+=ze)}ke.total.rides+=1,ke.total.revenue+=ze,ye.isSame(Be,"day")&&(ke.daily.rides+=1,ke.daily.revenue+=ze),ye.isAfter(Be.subtract(1,"week"))&&(ke.weekly.rides+=1,ke.weekly.revenue+=ze),ye.isAfter(Be.subtract(1,"month"))&&(ke.monthly.rides+=1,ke.monthly.revenue+=ze)}),Q({daily:ke.daily,weekly:ke.weekly,monthly:ke.monthly,total:ke.total,all:ke.total});const Je=Array.from(Me.values()).sort((Le,qe)=>qe.revenue-Le.revenue).map(Le=>({...Le,totalSystemRides:Ue}));z(Je)}catch(ie){console.error("Error fetching station revenue:",ie)}},Ae=ie=>{var we;l(ie),n(((we=ie.pricePerMinute)==null?void 0:we.toString())||"")},Te=()=>{l(null),n("")},Oe=async()=>{if(!s)return;const ie=parseFloat(h);if(isNaN(ie)||ie<=0){alert("Please enter a valid number greater than 0 for the price.");return}try{const we=Lv.currentUser;if(!we)throw new Error("No user is signed in");const Me=io(kr,"users",we.uid),Ve=await ny(Me),Ie=Ve.exists()?Ve.data().name:"Unknown User",Ue=io(kr,"rentalRates",s.id);await Hd(Ue,{pricePerMinute:ie}),await oR(Wn(kr,"rateHistory"),{bikeType:s.id,oldPrice:s.pricePerMinute,newPrice:ie,timestamp:new Date,updatedBy:Ie});const Be=t.map(ke=>ke.id===s.id?{...ke,pricePerMinute:ie}:ke);e(Be),await _e(),Te()}catch(we){console.error("Error updating rate:",we),alert("Failed to update the rate. See console for details.")}};return X.jsxs(w0,{children:[X.jsx(Ig,{title:"Bike Management"}),X.jsxs("div",{className:"rate-management-container",children:[X.jsx("h2",{children:"Rental Rate Management"}),a?X.jsx("p",{children:"Loading..."}):X.jsx(X.Fragment,{children:X.jsx("div",{className:"table-container",children:X.jsxs("table",{className:"rate-table",children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Bike Type"}),X.jsx("th",{children:"Price Per Minute (₱)"}),X.jsx("th",{children:"Actions"})]})}),X.jsx("tbody",{children:t.length>0?t.map(ie=>{var Me;const we=h5[ie.id]||ie.id;return X.jsxs("tr",{children:[X.jsx("td",{children:we}),X.jsx("td",{children:(Me=ie.pricePerMinute)==null?void 0:Me.toFixed(2)}),X.jsx("td",{children:X.jsxs("button",{className:"edit-btn",onClick:()=>Ae(ie),children:[X.jsx(L_,{})," Edit"]})})]},ie.id)}):X.jsx("tr",{children:X.jsx("td",{colSpan:"3",style:{textAlign:"center"},children:"No rental rates available."})})})]})})}),X.jsxs("div",{className:"revenue-section",children:[X.jsx("h3",{children:"Station Revenue"}),X.jsx("div",{className:"controls",children:X.jsxs("div",{className:"time-filter",children:[X.jsx("button",{className:`filter-btn ${q==="all"?"active":""}`,onClick:()=>H("all"),children:"All Time"}),X.jsx("button",{className:`filter-btn ${q==="daily"?"active":""}`,onClick:()=>H("daily"),children:"Today"}),X.jsx("button",{className:`filter-btn ${q==="weekly"?"active":""}`,onClick:()=>H("weekly"),children:"This Week"}),X.jsx("button",{className:`filter-btn ${q==="monthly"?"active":""}`,onClick:()=>H("monthly"),children:"This Month"})]})}),X.jsx("div",{className:"table-container",children:X.jsxs("table",{className:"revenue-table",children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsxs("th",{onClick:()=>ge("stationName"),children:["Station Name"," ",ne.key==="stationName"&&(ne.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>ge("revenue"),children:["Total Revenue (₱)"," ",ne.key==="revenue"&&(ne.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>ge("rides"),children:["Total Rides"," ",ne.key==="rides"&&(ne.direction==="asc"?"↑":"↓")]})]})}),X.jsxs("tbody",{children:[E.sort((ie,we)=>ne.key==="stationName"?ne.direction==="asc"?ie.stationName.localeCompare(we.stationName):we.stationName.localeCompare(ie.stationName):ne.direction==="asc"?ie[ne.key]-we[ne.key]:we[ne.key]-ie[ne.key]).map(ie=>X.jsxs("tr",{children:[X.jsx("td",{children:ie.stationName}),X.jsx("td",{children:ie.revenue.toFixed(2)}),X.jsx("td",{children:ie.rides})]},ie.id)),X.jsxs("tr",{className:"total-row",children:[X.jsx("td",{children:X.jsx("strong",{children:"Total"})}),X.jsx("td",{children:X.jsxs("strong",{children:["₱",$[q].revenue.toFixed(2)]})}),X.jsx("td",{children:X.jsx("strong",{children:$[q].rides})})]})]})]})})]}),X.jsxs("div",{className:"history-section",children:[X.jsxs("div",{className:"history-header",children:[X.jsx("h3",{children:"Rate History"}),X.jsxs("button",{className:"history-toggle-btn",onClick:()=>U(!k),children:[X.jsx(Kue,{})," ",k?"Hide History":"Show History"]})]}),k&&X.jsx("div",{className:"table-container",children:X.jsxs("table",{className:"history-table",children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Date"}),X.jsx("th",{children:"Bike Type"}),X.jsx("th",{children:"Old Price (₱)"}),X.jsx("th",{children:"New Price (₱)"}),X.jsx("th",{children:"Updated By"})]})}),X.jsx("tbody",{children:w.map(ie=>{var we;return X.jsxs("tr",{children:[X.jsx("td",{children:ls(ie.timestamp.toDate()).format("MMM D, YYYY HH:mm")}),X.jsx("td",{children:h5[ie.bikeType]||ie.bikeType}),X.jsx("td",{children:(we=ie.oldPrice)==null?void 0:we.toFixed(2)}),X.jsx("td",{children:ie.newPrice.toFixed(2)}),X.jsx("td",{children:ie.updatedBy})]},ie.id)})})]})})]}),s&&X.jsx("div",{className:"modal-overlay",onClick:Te,children:X.jsxs("div",{className:"modal-content",onClick:ie=>ie.stopPropagation(),children:[X.jsx("h3",{children:"Edit Rental Rate"}),X.jsxs("p",{children:["Bike Type:"," ",X.jsx("strong",{children:h5[s.id]||s.id})]}),X.jsx("label",{children:"Price Per Minute (₱):"}),X.jsx("input",{type:"number",step:"0.01",value:h,onChange:ie=>n(ie.target.value)}),X.jsxs("div",{className:"modal-buttons",children:[X.jsx("button",{className:"save-btn",onClick:Oe,children:"Save"}),X.jsx("button",{className:"cancel-btn",onClick:Te,children:"Cancel"})]})]})})]})]})};var kC={exports:{}},uPe=kC.exports,OZ;function cPe(){return OZ||(OZ=1,function(t,e){(function(a,r){t.exports=r()})(uPe,function(){var a="week",r="year";return function(s,l,h){var n=l.prototype;n.week=function(w){if(w===void 0&&(w=null),w!==null)return this.add(7*(w-this.week()),"day");var T=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var E=h(this).startOf(r).add(1,r).date(T),z=h(this).endOf(a);if(E.isBefore(z))return 1}var k=h(this).startOf(r).date(T).startOf(a).subtract(1,"millisecond"),U=this.diff(k,a,!0);return U<0?h(this).startOf("week").week():Math.ceil(U)},n.weeks=function(w){return w===void 0&&(w=null),this.week(w)}}})}(kC)),kC.exports}var dPe=cPe();const hPe=Xi(dPe);var BC={exports:{}},fPe=BC.exports,DZ;function pPe(){return DZ||(DZ=1,function(t,e){(function(a,r){t.exports=r()})(fPe,function(){return function(a,r,s){r.prototype.isBetween=function(l,h,n,w){var T=s(l),E=s(h),z=(w=w||"()")[0]==="(",k=w[1]===")";return(z?this.isAfter(T,n):!this.isBefore(T,n))&&(k?this.isBefore(E,n):!this.isAfter(E,n))||(z?this.isBefore(T,n):!this.isAfter(T,n))&&(k?this.isAfter(E,n):!this.isBefore(E,n))}}})}(BC)),BC.exports}var mPe=pPe();const yPe=Xi(mPe);ls.extend(hPe);ls.extend(yPe);const gPe=({text:t})=>{const e=new RegExp("(?<!CO)(?<![\\d.])(\\d+\\.?\\d*)","g"),a=t.split(e);return X.jsx("span",{children:a.map((r,s)=>e.test(r)?X.jsx("span",{className:"highlighted-number",children:r},s):X.jsx("span",{children:r},s))})},NA=({title:t,analysis:e})=>X.jsxs("div",{className:"analysis-card",children:[X.jsx("h3",{children:t}),X.jsx("p",{children:X.jsx(gPe,{text:e})})]}),APe=()=>{var ge,fe,_e,me;const[t,e]=rt.useState([]),[a,r]=rt.useState({calories:[],distance:[],duration:[],carbonSaved:[]}),[s,l]=rt.useState([]),[h,n]=rt.useState([]),[w,T]=rt.useState("monthly"),[E,z]=rt.useState([]),k=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}],U=["#009C8C","#4CAF50","#2196F3","#FFA726","#FF5722","#9C27B0","#673AB7","#3F51B5","#00BCD4","#795548"],q=(Ae,Te,Oe)=>{const ie=ls(),we=new Map;return Te.filter(Ve=>{const Ie=ls(Ve.rideEndedAt);switch(Oe){case"daily":return Ie.isSame(ie,"day");case"weekly":return Ie.isAfter(ie.subtract(1,"week"));case"monthly":return Ie.isAfter(ie.subtract(1,"month"));default:return!0}}).forEach(Ve=>{Ve.startStation&&we.set(Ve.startStation,(we.get(Ve.startStation)||0)+1)}),Ae.map(Ve=>({id:Ve.id,stationName:Ve.stationName,rides:we.get(Ve.id)||0})).sort((Ve,Ie)=>Ie.rides-Ve.rides)},H=(Ae,Te)=>{const Oe=new Map,ie=ls();let we,Me;switch(Te){case"daily":we=ie.subtract(6,"day").startOf("day"),Me=ie.endOf("day");break;case"weekly":we=ie.subtract(11,"week").startOf("week"),Me=ie.endOf("week");break;case"monthly":we=ie.subtract(11,"month").startOf("month"),Me=ie.endOf("month");break;default:const Ie=Ae.map(Ue=>ls(Ue.rideEndedAt));we=ls.min(Ie),Me=ie}let Ve=we;for(;Ve.isBefore(Me);){let Ie;switch(Te){case"daily":Ie=Ve.format("MMM DD"),Ve=Ve.add(1,"day");break;case"weekly":Ie=`Week ${Ve.week()} - ${Ve.format("MMM")}`,Ve=Ve.add(1,"week");break;case"monthly":Ie=Ve.format("MMM YYYY"),Ve=Ve.add(1,"month");break}Oe.set(Ie,{period:Ie,revenue:0,calories:0,distance:0,duration:0,carbonSaved:0,rides:0})}return Ae.forEach(Ie=>{const Ue=ls(Ie.rideEndedAt);if(Ue.isBetween(we,Me,null,"[]")){let Be;switch(Te){case"daily":Be=Ue.format("MMM DD");break;case"weekly":Be=`Week ${Ue.week()} - ${Ue.format("MMM")}`;break;case"monthly":Be=Ue.format("MMM YYYY");break}if(Oe.has(Be)){const ke=Oe.get(Be);ke.revenue+=Number(Ie.amountPaid||0),ke.calories+=Number(Ie.caloriesBurned||0),ke.distance+=Number(Ie.distance||0),ke.duration+=Number(Ie.duration||0)/60,ke.carbonSaved+=Number(Ie.carbonSaved||0),ke.rides+=1}}}),Array.from(Oe.values()).map(Ie=>({...Ie,avgCalories:Ie.rides>0?Ie.calories/Ie.rides:0,avgDistance:Ie.rides>0?Ie.distance/Ie.rides:0,avgDuration:Ie.rides>0?Ie.duration/Ie.rides:0,avgCarbonSaved:Ie.rides>0?Ie.carbonSaved/Ie.rides:0}))},$=(Ae,Te)=>{const Oe=ls();switch(Te){case"daily":return Ae.filter(ie=>ls(ie.rideEndedAt).isSame(Oe,"day"));case"weekly":return Ae.filter(ie=>ls(ie.rideEndedAt).isAfter(Oe.subtract(1,"week")));case"monthly":return Ae.filter(ie=>ls(ie.rideEndedAt).isAfter(Oe.subtract(1,"month")));default:return Ae}},Q=(Ae,Te)=>{if(!Ae||Ae.length===0)return"No data available";const Oe=$(E,w),ie=Oe.reduce((Ve,Ie)=>{switch(Te){case"revenue":return Ve+(Ie.amountPaid||0);case"calories":return Ve+(Ie.caloriesBurned||0);case"distance":return Ve+(Ie.distance||0);case"duration":return Ve+(Ie.duration||0)/60;case"carbonSaved":return Ve+(Ie.carbonSaved||0);default:return Ve}},0),we=Oe.length,Me=w==="daily"?"today":w==="weekly"?"this week":"this month";switch(Te){case"revenue":const Ve=we>0?ie/we:0;return`The EcoRide Parada system generated ₱${ie.toFixed(2)} in revenue ${Me}. 
                With ${we} rides completed, residents spent an average of ₱${Ve.toFixed(2)} per trip. 
                These funds support system maintenance and expansion, creating sustainable transportation
                infrastructure for Barangay Parada while providing an affordable alternative to motor vehicles.`;case"calories":return`Barangay Parada residents burned ${ie.toFixed(0)} calories through cycling ${Me}, 
                equivalent to approximately ${Math.round(ie/100)} healthy meals worth of energy. 
                This active transportation promotes community health and wellness, potentially reducing healthcare 
                costs by ₱${(ie*.05).toFixed(2)} through preventative exercise. Regular cyclists in Parada 
                report improved cardiovascular health and reduced stress levels, creating a healthier community.`;case"distance":const Ie=ie*.251,Ue=ie*.15;return`EcoRide users covered ${ie.toFixed(2)} km by bike ${Me}, directly alleviating 
                traffic congestion in Barangay Parada's busiest corridors. This represents approximately 
                ${Math.round(ie/3)} car trips removed from local roads, reducing congestion by an 
                estimated ${Ue.toFixed(1)}%. Each kilometer cycled improves traffic flow 
                while preventing ${Ie.toFixed(2)} kg of CO2 emissions, supporting Parada's 
                commitment to sustainable urban mobility.`;case"duration":const Be=Math.floor(ie/60),ke=Math.floor(ie%60),Je=we*5,Le=ie*.3;return`Barangay Parada cyclists spent ${Be} hours and ${ke} minutes riding ${Me}. 
                By choosing EcoRide over cars, residents collectively saved approximately ${Math.round(Je/60+Le)} hours 
                on parking and traffic delays. This represents significant quality-of-life improvement for
                community members while reducing road congestion by an estimated ${Math.round(we*.8)} vehicles during 
                peak hours, improving mobility for all Parada residents.`;case"carbonSaved":const qe=(ie/21).toFixed(1),ye=(ie/.251).toFixed(1),ze=(ie*.05).toFixed(1);return`The EcoRide system prevented ${ie.toFixed(2)} kg of CO2 emissions in Barangay Parada ${Me}, 
                equivalent to the yearly CO2 absorption of ${qe} trees. This translates to approximately 
                ${ye} km of car travel removed from local roads and an estimated ${ze}% 
                improvement in local air quality. Every ride contributes to Parada's sustainability goals, helping 
                transform the barangay into a model for eco-friendly transportation in Metro Manila.`;default:return"No analysis available"}},ne=async()=>{try{const Ae=Wn(kr,"ride_history"),Oe=(await Yi(Ae)).docs.map(Le=>{var qe;return{id:Le.id,...Le.data(),rideEndedAt:(qe=Le.data().rideEndedAt)!=null&&qe.toDate?Le.data().rideEndedAt.toDate():new Date(Le.data().rideEndedAt.seconds*1e3)}});z(Oe);const ie=Wn(kr,"stations"),Me=(await Yi(ie)).docs.map(Le=>({id:Le.id,stationName:Le.data().stationName})),Ve=q(Me,Oe,w);n(Ve);const Ie=H(Oe,"monthly"),Ue=H(Oe,"weekly"),Be=H(Oe,"daily");l({monthly:Ie,weekly:Ue,daily:Be});const ke=new Map;Me.forEach(Le=>{ke.set(Le.id,{stationName:Le.stationName,revenue:0,rides:0})}),Oe.forEach(Le=>{if(Le.startStation){const qe=ke.get(Le.startStation);qe&&(qe.revenue+=Number(Le.amountPaid),qe.rides+=1)}});const Je=Array.from(ke.values()).sort((Le,qe)=>qe.revenue-Le.revenue);e(Je)}catch(Ae){console.error("Error fetching analytics:",Ae)}};rt.useEffect(()=>{ne()},[w]);const de=(Ae,Te)=>Ae[Te]||[];return X.jsxs(w0,{children:[X.jsx(Ig,{})," ",X.jsxs("div",{className:"analytics-container",children:[X.jsxs("div",{className:"analytics-header",children:[X.jsx("h1",{children:"System Analytics"}),X.jsx("div",{className:"time-filter",children:k.map(Ae=>X.jsx("button",{className:`filter-btn ${w===Ae.value?"active":""}`,onClick:()=>T(Ae.value),children:Ae.label},Ae.value))})]}),X.jsxs("div",{className:"charts-grid",children:[X.jsxs("div",{className:"chart-section full-width",children:[X.jsx("h2",{children:"Revenue Trend"}),X.jsxs("div",{className:"chart-with-analysis",children:[X.jsx(hm,{width:"100%",height:500,children:X.jsxs(fw,{data:de(s,w),margin:{top:20,right:30,left:20,bottom:90},children:[X.jsx("defs",{children:X.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[X.jsx("stop",{offset:"5%",stopColor:"#009C8C",stopOpacity:.8}),X.jsx("stop",{offset:"95%",stopColor:"#009C8C",stopOpacity:.1})]})}),X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"period",angle:-45,textAnchor:"end",height:80,interval:0}),X.jsx(Th,{tickFormatter:Ae=>`₱${Ae.toFixed(0)}`,label:{value:"Revenue (₱)",angle:-90,position:"insideLeft",offset:10,dy:50}}),X.jsx(Ou,{formatter:Ae=>[`₱${Ae.toFixed(2)}`,"Revenue"]}),X.jsx(If,{verticalAlign:"bottom",height:36,wrapperStyle:{paddingTop:"20px",marginBottom:"10px"}}),X.jsx(Uf,{type:"monotone",dataKey:"revenue",stroke:"#009C8C",fill:"url(#revenueGradient)",name:"Revenue",dot:{r:4}})]})}),X.jsx(NA,{title:"Revenue Analysis",analysis:Q(de(s,w),"revenue")})]})]}),X.jsxs("div",{className:"chart-section full-width",children:[X.jsx("h2",{children:"Revenue by Station"}),X.jsxs("div",{className:"chart-with-analysis",children:[X.jsx(hm,{width:"100%",height:500,children:X.jsxs(_M,{data:t.filter(Ae=>Ae.revenue>0),margin:{top:20,right:30,left:20,bottom:120},children:[X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"stationName",angle:-45,textAnchor:"end",height:100,interval:0,tick:{fontSize:12}}),X.jsx(Th,{tickFormatter:Ae=>`₱${Ae.toFixed(2)}`}),X.jsx(Ou,{formatter:Ae=>`₱${Ae.toFixed(2)}`}),X.jsx(Ry,{dataKey:"revenue",children:t.filter(Ae=>Ae.revenue>0).map((Ae,Te)=>X.jsx(fR,{fill:U[Te%U.length]},`cell-${Te}`))})]})}),X.jsx(NA,{title:"Station Revenue Analysis",analysis:`The top earning station is ${((ge=t[0])==null?void 0:ge.stationName)||"N/A"} with ₱${(fe=t[0])==null?void 0:fe.revenue.toFixed(2)} in revenue. There are ${t.filter(Ae=>Ae.revenue>0).length} stations generating revenue, with a total system revenue of ₱${t.reduce((Ae,Te)=>Ae+Te.revenue,0).toFixed(2)}.`})]})]}),X.jsxs("div",{className:"chart-section full-width",children:[X.jsx("h2",{children:"Average Calories Burned"}),X.jsxs("div",{className:"chart-with-analysis",children:[X.jsx(hm,{width:"100%",height:500,children:X.jsxs(fw,{data:de(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[X.jsx("defs",{children:X.jsxs("linearGradient",{id:"caloriesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[X.jsx("stop",{offset:"5%",stopColor:"#FF5722",stopOpacity:.8}),X.jsx("stop",{offset:"95%",stopColor:"#FF5722",stopOpacity:.1})]})}),X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"period"}),X.jsx(Th,{}),X.jsx(Ou,{}),X.jsx(If,{}),X.jsx(Uf,{type:"monotone",dataKey:"calories",stroke:"#FF5722",fill:"url(#caloriesGradient)",name:"Calories Burned",dot:{fill:"#FF5722"}})]})}),X.jsx(NA,{title:"Health Impact Analysis",analysis:Q(de(s,w),"calories")})]})]}),X.jsxs("div",{className:"chart-section full-width",children:[X.jsx("h2",{children:"Average Distance Covered"}),X.jsxs("div",{className:"chart-with-analysis",children:[X.jsx(hm,{width:"100%",height:500,children:X.jsxs(fw,{data:de(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[X.jsx("defs",{children:X.jsxs("linearGradient",{id:"distanceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[X.jsx("stop",{offset:"5%",stopColor:"#2196F3",stopOpacity:.8}),X.jsx("stop",{offset:"95%",stopColor:"#2196F3",stopOpacity:.1})]})}),X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"period"}),X.jsx(Th,{}),X.jsx(Ou,{}),X.jsx(If,{}),X.jsx(Uf,{type:"monotone",dataKey:"distance",stroke:"#2196F3",fill:"url(#distanceGradient)",name:"Distance (km)",dot:{fill:"#2196F3"}})]})}),X.jsx(NA,{title:"Distance Analysis",analysis:Q(de(s,w),"distance")})]})]}),X.jsxs("div",{className:"chart-section full-width",children:[X.jsx("h2",{children:"Average Ride Duration"}),X.jsxs("div",{className:"chart-with-analysis",children:[X.jsx(hm,{width:"100%",height:500,children:X.jsxs(fw,{data:de(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[X.jsx("defs",{children:X.jsxs("linearGradient",{id:"durationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[X.jsx("stop",{offset:"5%",stopColor:"#9C27B0",stopOpacity:.8}),X.jsx("stop",{offset:"95%",stopColor:"#9C27B0",stopOpacity:.1})]})}),X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"period"}),X.jsx(Th,{}),X.jsx(Ou,{formatter:(Ae,Te)=>[`${Ae.toFixed(0)} minutes`,"Duration"]}),X.jsx(If,{}),X.jsx(Uf,{type:"monotone",dataKey:"duration",stroke:"#9C27B0",fill:"url(#durationGradient)",name:"Duration (minutes)",dot:{fill:"#9C27B0"}})]})}),X.jsx(NA,{title:"Duration Analysis",analysis:Q(de(s,w),"duration")})]})]}),X.jsxs("div",{className:"chart-section full-width",children:[X.jsx("h2",{children:"Average CO2 Saved"}),X.jsxs("div",{className:"chart-with-analysis",children:[X.jsx(hm,{width:"100%",height:500,children:X.jsxs(fw,{data:de(s,w),margin:{top:20,right:30,left:20,bottom:70},children:[X.jsx("defs",{children:X.jsxs("linearGradient",{id:"co2Gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[X.jsx("stop",{offset:"5%",stopColor:"#4CAF50",stopOpacity:.8}),X.jsx("stop",{offset:"95%",stopColor:"#4CAF50",stopOpacity:.1})]})}),X.jsx(fm,{strokeDasharray:"3 3"}),X.jsx(Rh,{dataKey:"period"}),X.jsx(Th,{}),X.jsx(Ou,{}),X.jsx(If,{}),X.jsx(Uf,{type:"monotone",dataKey:"carbonSaved",stroke:"#4CAF50",fill:"url(#co2Gradient)",name:"CO2 Saved (kg)",dot:{fill:"#4CAF50"}})]})}),X.jsx(NA,{title:"Environmental Impact Analysis",analysis:Q(de(s,w),"carbonSaved")})]})]}),X.jsxs("div",{className:"chart-section full-width",children:[X.jsxs("h2",{children:["Most Popular Stations (",w,")"]}),X.jsxs("div",{className:"chart-with-analysis",children:[X.jsx(hm,{width:"100%",height:600,children:X.jsxs($Ce,{children:[X.jsx(Py,{data:q(h,E,w).filter(Ae=>Ae.rides>0).slice(0,5),dataKey:"rides",nameKey:"stationName",cx:"50%",cy:"50%",outerRadius:180,label:({name:Ae,percent:Te})=>`${Ae} ${(Te*100).toFixed(0)}%`,children:q(h,E,w).filter(Ae=>Ae.rides>0).slice(0,5).map((Ae,Te)=>X.jsx(fR,{fill:U[Te%U.length]},`cell-${Te}`))}),X.jsx(Ou,{formatter:(Ae,Te)=>[`${Ae} rides`,Te]}),X.jsx(If,{verticalAlign:"bottom",height:36})]})}),X.jsx(NA,{title:`Station Usage Analysis (${w})`,analysis:`For this ${w} period, the top stations account for ${q(h,E,w).filter(Ae=>Ae.rides>0).slice(0,5).reduce((Ae,Te)=>Ae+Te.rides,0)} rides out of ${E.length} total system rides. ${((_e=q(h,E,w)[0])==null?void 0:_e.stationName)||"N/A"} is currently the most active station with ${((me=q(h,E,w)[0])==null?void 0:me.rides)||0} rides in this period.`})]})]})]})]})]})},_Pe=()=>{const[t,e]=rt.useState([]),[a,r]=rt.useState({}),[s,l]=rt.useState({}),[h,n]=rt.useState({}),[w,T]=rt.useState(!0),[E,z]=rt.useState("all"),[k,U]=rt.useState({key:"rideEndedAt",direction:"desc"}),[q,H]=rt.useState(1),$=10,[Q,ne]=rt.useState({totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});rt.useEffect(()=>{de()},[]);const de=async()=>{try{const Te=Wn(kr,"bikes"),Oe=await Yi(Te),ie={};Oe.docs.forEach(qe=>{ie[qe.id]=qe.data()}),r(ie);const we=Wn(kr,"approved_users"),Me=await Yi(we),Ve={};Me.docs.forEach(qe=>{const ye=qe.data();Ve[qe.id]=`${ye.first_name} ${ye.surname}`}),l(Ve);const Ie=Wn(kr,"stations"),Ue=await Yi(Ie),Be={};Ue.docs.forEach(qe=>{Be[qe.id]=qe.data().stationName}),n(Be);const ke=Wn(kr,"ride_history"),Le=(await Yi(ke)).docs.map(qe=>{var ye;return{id:qe.id,...qe.data(),rideEndedAt:((ye=qe.data().rideEndedAt)==null?void 0:ye.toDate())||new Date(qe.data().rideEndedAt.seconds*1e3)}});e(Le),T(!1)}catch(Te){console.error("Error fetching data:",Te),T(!1)}},ge=Te=>{const Oe=ls();switch(E){case"today":return Te.filter(ie=>ls(ie.rideEndedAt).isSame(Oe,"day"));case"week":return Te.filter(ie=>ls(ie.rideEndedAt).isAfter(Oe.subtract(1,"week")));case"month":return Te.filter(ie=>ls(ie.rideEndedAt).isAfter(Oe.subtract(1,"month")));default:return Te}};rt.useEffect(()=>{const Oe=ge(t).reduce((ie,we)=>({totalRides:ie.totalRides+1,totalRevenue:ie.totalRevenue+(we.amountPaid||0),totalDistance:ie.totalDistance+(we.distance||0),totalDuration:ie.totalDuration+(we.duration||0),totalCalories:ie.totalCalories+(we.caloriesBurned||0),totalCarbonSaved:ie.totalCarbonSaved+(we.carbonSaved||0)}),{totalRides:0,totalRevenue:0,totalDistance:0,totalDuration:0,totalCalories:0,totalCarbonSaved:0});ne(Oe)},[t,E]);const fe=Te=>{U({key:Te,direction:k.key===Te&&k.direction==="asc"?"desc":"asc"})},_e=It.useMemo(()=>[...ge(t)].sort((Oe,ie)=>k.key==="rideEndedAt"?k.direction==="asc"?Oe[k.key]-ie[k.key]:ie[k.key]-Oe[k.key]:k.direction==="asc"?Oe[k.key]>ie[k.key]?1:-1:Oe[k.key]<ie[k.key]?1:-1),[t,E,k]),me=_e.slice((q-1)*$,q*$),Ae=Math.ceil(_e.length/$);return X.jsxs(w0,{children:[X.jsx(Ig,{})," ",X.jsxs("div",{className:"ride-details-container",children:[X.jsx("h1",{children:"Ride Details"}),X.jsx("div",{className:"controls",children:X.jsxs("div",{className:"time-filter",children:[X.jsx("button",{className:`filter-btn ${E==="all"?"active":""}`,onClick:()=>z("all"),children:"All Time"}),X.jsx("button",{className:`filter-btn ${E==="today"?"active":""}`,onClick:()=>z("today"),children:"Today"}),X.jsx("button",{className:`filter-btn ${E==="week"?"active":""}`,onClick:()=>z("week"),children:"This Week"}),X.jsx("button",{className:`filter-btn ${E==="month"?"active":""}`,onClick:()=>z("month"),children:"This Month"})]})}),X.jsxs("div",{className:"stats-grid",children:[X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Total Rides"}),X.jsx("p",{children:Q.totalRides})]}),X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Total Revenue"}),X.jsxs("p",{children:["₱",Q.totalRevenue.toFixed(2)]})]}),X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Total Distance"}),X.jsxs("p",{children:[Q.totalDistance.toFixed(2)," km"]})]}),X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Total Duration"}),X.jsxs("p",{children:[Math.round(Q.totalDuration/60)," min"]})]}),X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"Calories Burned"}),X.jsxs("p",{children:[Math.round(Q.totalCalories)," cal"]})]}),X.jsxs("div",{className:"stat-card",children:[X.jsx("h3",{children:"CO2 Saved"}),X.jsxs("p",{children:[Q.totalCarbonSaved.toFixed(2)," kg"]})]})]}),w?X.jsx("div",{className:"loading",children:"Loading..."}):X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"table-container",children:X.jsxs("table",{children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsxs("th",{onClick:()=>fe("rideEndedAt"),children:["Date"," ",k.key==="rideEndedAt"&&(k.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>fe("userId"),children:["User"," ",k.key==="userId"&&(k.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>fe("bikeId"),children:["Bike"," ",k.key==="bikeId"&&(k.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>fe("duration"),children:["Duration"," ",k.key==="duration"&&(k.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>fe("distance"),children:["Distance"," ",k.key==="distance"&&(k.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>fe("caloriesBurned"),children:["Calories"," ",k.key==="caloriesBurned"&&(k.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>fe("carbonSaved"),children:["CO2 Saved"," ",k.key==="carbonSaved"&&(k.direction==="asc"?"↑":"↓")]}),X.jsxs("th",{onClick:()=>fe("amountPaid"),children:["Amount"," ",k.key==="amountPaid"&&(k.direction==="asc"?"↑":"↓")]}),X.jsx("th",{children:"Start Station"}),X.jsx("th",{children:"End Station"})]})}),X.jsx("tbody",{children:me.map(Te=>{var Oe,ie,we,Me;return X.jsxs("tr",{children:[X.jsx("td",{children:ls(Te.rideEndedAt).format("MMM D, YYYY HH:mm")}),X.jsx("td",{children:s[Te.userId]||"Unknown User"}),X.jsx("td",{children:((Oe=a[Te.bikeId])==null?void 0:Oe.bikeName)||"Unknown Bike"}),X.jsxs("td",{children:[Math.round(Te.duration/60)," min"]}),X.jsxs("td",{children:[((ie=Te.distance)==null?void 0:ie.toFixed(2))||0," km"]}),X.jsxs("td",{children:[Math.round(Te.caloriesBurned)||0," cal"]}),X.jsxs("td",{children:[((we=Te.carbonSaved)==null?void 0:we.toFixed(2))||0," kg"]}),X.jsxs("td",{children:["₱",((Me=Te.amountPaid)==null?void 0:Me.toFixed(2))||0]}),X.jsx("td",{children:h[Te.startStation]||"Unknown Station"}),X.jsx("td",{children:h[Te.endStation]||"Unknown Station"})]},Te.id)})})]})}),X.jsxs("div",{className:"pagination-controls",children:[X.jsx("button",{className:"pagination-button",onClick:()=>H(Te=>Math.max(1,Te-1)),disabled:q===1,children:"Previous"}),X.jsxs("span",{className:"pagination-info",children:["Page ",q," of ",Ae]}),X.jsx("button",{className:"pagination-button",onClick:()=>H(Te=>Math.min(Ae,Te+1)),disabled:q===Ae,children:"Next"})]})]})]})]})};class vPe extends It.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,a){console.error("Error caught by boundary:",e,a)}render(){return this.state.hasError?X.jsxs("div",{className:"error-container",children:[X.jsx("h2",{children:"Something went wrong."}),X.jsx("p",{children:"Please refresh the page or try again later."})]}):this.props.children}}const wPe=()=>{const[t,e]=rt.useState(null);return rt.useEffect(()=>{Lv.onAuthStateChanged(a=>{e(a)})},[]),X.jsx(vPe,{children:X.jsx(Wte,{children:X.jsxs(bte,{children:[X.jsx(vp,{path:"/login",element:t?X.jsx(NO,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/dashboard",element:t?X.jsx(NO,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/user-management",element:t?X.jsx(nbe,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/bike-management",element:t?X.jsx(aPe,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/stations",element:t?X.jsx(sPe,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/admin-management",element:t?X.jsx(oPe,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/rate-management",element:t?X.jsx(lPe,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/system-analytics",element:t?X.jsx(APe,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/ride-details",element:t?X.jsx(_Pe,{}):X.jsx(lm,{})}),X.jsx(vp,{path:"/",element:t?X.jsx(NO,{}):X.jsx(lm,{})})]})})})};Iee.createRoot(document.getElementById("root")).render(X.jsx(rt.StrictMode,{children:X.jsx(wPe,{})}));export{Is as _,US as c,Xi as g};
